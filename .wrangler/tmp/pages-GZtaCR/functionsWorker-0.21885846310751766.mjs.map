{
  "version": 3,
  "sources": ["../../../functions/lib/settings-storage.ts", "../../../functions/lib/translation-service.ts", "../../../functions/api/admin/announcement-badges/translate.ts", "../../../functions/api/admin/announcement-badges/%5Bid%5D.ts", "../../../functions/api/admin/countdown-banners/%5Bid%5D.ts", "../../../functions/api/admin/dashboard-features/%5Bfeature%5D.ts", "../../../functions/api/admin/orders/%5BorderId%5D.ts", "../../../functions/api/extension/check/%5Bid%5D.ts", "../../../functions/api/extension/downloads/%5Bid%5D.ts", "../../../functions/api/invoices/%5Bid%5D/pdf.ts", "../../../functions/lib/db.ts", "../../../functions/api/tickets/%5Bid%5D/archive.ts", "../../../node_modules/bcryptjs/index.js", "../../../functions/lib/user-storage.ts", "../../../functions/api/tickets/%5Bid%5D/messages.ts", "../../../functions/api/tickets/%5Bid%5D/status.ts", "../../../functions/api/user/%5Bid%5D/purchase-status.ts", "../../../functions/api/user/%5BuserId%5D/invoices.ts", "../../../functions/api/user/%5BuserId%5D/orders.ts", "../../../functions/api/user/%5BuserId%5D/purchase-status.ts", "../../../functions/api/admin/analytics.ts", "../../../functions/api/admin/announcement-badges.ts", "../../../functions/api/admin/auth-settings.ts", "../../../functions/api/admin/chat-settings.ts", "../../../functions/api/admin/check-user-data.ts", "../../../functions/api/admin/countdown-banners.ts", "../../../functions/api/admin/create-default-banner.ts", "../../../functions/api/admin/customers.ts", "../../../functions/api/admin/dashboard-features.ts", "../../../functions/api/admin/fix-banner-price.ts", "../../../functions/api/admin/fix-premium-users.ts", "../../../functions/api/admin/fix-purchased-users.ts", "../../../functions/api/admin/force-update-price.ts", "../../../functions/api/admin/invoices.ts", "../../../functions/api/admin/login.ts", "../../../functions/api/admin/orders.ts", "../../../functions/api/admin/payment-settings.ts", "../../../functions/api/admin/pricing.ts", "../../../functions/api/admin/reset-db.ts", "../../../functions/api/admin/seo-settings.ts", "../../../functions/api/admin/stats.ts", "../../../functions/api/admin/sync-banner-price.ts", "../../../functions/api/admin/tickets.ts", "../../../functions/api/admin/update-banner-price.ts", "../../../functions/api/admin/update-banner-price-direct.ts", "../../../functions/api/admin/update-user-premium.ts", "../../../functions/api/admin/users.ts", "../../../functions/api/announcement-badge/active.ts", "../../../functions/api/auth/facebook.ts", "../../../functions/api/auth/github.ts", "../../../functions/api/auth/google.ts", "../../../functions/api/auth/register.ts", "../../../functions/api/countdown-banner/active.ts", "../../../functions/api/customer/login.ts", "../../../functions/api/customer/profile.ts", "../../../functions/api/customer/register.ts", "../../../functions/api/customer/stats.ts", "../../../functions/api/download-extension/premium.ts", "../../../functions/api/download-extension/trial.ts", "../../../functions/api/downloads/premium-extension.ts", "../../../functions/api/invoices/generate.ts", "../../../functions/api/me/invoices.ts", "../../../functions/api/me/orders.ts", "../../../functions/api/orders/complete-purchase.ts", "../../../functions/api/orders/user-orders.ts", "../../../functions/api/products/pricing.ts", "../../../functions/api/download-extension/%5Btype%5D.ts", "../../../functions/api/generate-invoice/%5BorderId%5D.ts", "../../../functions/api/tickets/%5Bid%5D.ts", "../../../functions/api/auth-settings.ts", "../../../functions/api/chat.ts", "../../../functions/api/complete-stripe-payment.ts", "../../../functions/api/create-user-payment-intent.ts", "../../../functions/api/download-premium.ts", "../../../functions/api/init-db.ts", "../../../functions/api/invoice-settings.ts", "../../../functions/api/invoices.ts", "../../../functions/api/me.ts", "../../../functions/api/migrate-db.ts", "../../../functions/api/purchase-complete.ts", "../../../functions/api/test-upload.ts", "../../../functions/api/test-user.ts", "../../../functions/api/tickets/index.ts", "../../../functions/health.ts", "functionsRoutes-0.4590401186987789.mjs", "../bundle-T1F7Rk/middleware-loader.entry.ts", "../bundle-T1F7Rk/middleware-insertion-facade.js", "../../../../../.nvm/versions/node/v20.19.4/lib/node_modules/wrangler/templates/pages-template-worker.ts", "../../../../../.nvm/versions/node/v20.19.4/lib/node_modules/wrangler/node_modules/path-to-regexp/src/index.ts", "../../../../../.nvm/versions/node/v20.19.4/lib/node_modules/wrangler/templates/middleware/middleware-ensure-req-body-drained.ts", "../../../../../.nvm/versions/node/v20.19.4/lib/node_modules/wrangler/templates/middleware/middleware-miniflare3-json-error.ts", "../../../../../.nvm/versions/node/v20.19.4/lib/node_modules/wrangler/templates/middleware/common.ts"],
  "sourceRoot": "/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/.wrangler/tmp/pages-GZtaCR/functionsWorker-0.21885846310751766.mjs",
  "sourcesContent": ["export class SettingsStorage {\n  private db: any;\n\n  constructor(database: any) {\n    this.db = database;\n  }\n\n  async initializeSettings() {\n    try {\n      const result = await this.db.prepare(`\n        CREATE TABLE IF NOT EXISTS settings (\n          key TEXT PRIMARY KEY,\n          value TEXT NOT NULL,\n          updated_at DATETIME DEFAULT CURRENT_TIMESTAMP\n        )\n      `).run();\n      console.log('Settings table initialized:', result);\n    } catch (error) {\n      console.error('Failed to initialize settings table:', error);\n      throw error;\n    }\n  }\n\n  async getSetting(key: string): Promise<string | null> {\n    try {\n      const result = await this.db.prepare(\n        'SELECT value FROM settings WHERE key = ?'\n      ).bind(key).first();\n      \n      return result ? result.value : null;\n    } catch (error) {\n      console.error('Failed to get setting:', error);\n      return null;\n    }\n  }\n\n  async setSetting(key: string, value: string): Promise<void> {\n    try {\n      console.log(`Setting ${key} with value length:`, value.length);\n      const result = await this.db.prepare(\n        'INSERT OR REPLACE INTO settings (key, value, updated_at) VALUES (?, ?, CURRENT_TIMESTAMP)'\n      ).bind(key, value).run();\n      console.log(`Successfully set ${key}, result:`, result);\n    } catch (error) {\n      console.error(`Failed to set setting ${key}:`, error);\n      throw error;\n    }\n  }\n\n  async getChatSettings(): Promise<any> {\n    try {\n      const openaiApiKey = await this.getSetting('openai_api_key');\n      const assistantId = await this.getSetting('openai_assistant_id');\n      const chatModel = await this.getSetting('chat_model') || 'gpt-4o-mini';\n      const enabled = await this.getSetting('chat_enabled') || 'true';\n\n      return {\n        openaiApiKey: openaiApiKey ? '***hidden***' : '',\n        assistantId: assistantId || '',\n        chatModel,\n        enabled: enabled === 'true'\n      };\n    } catch (error) {\n      console.error('Failed to get chat settings:', error);\n      return {\n        openaiApiKey: '',\n        assistantId: '',\n        chatModel: 'gpt-4o-mini',\n        enabled: true\n      };\n    }\n  }\n\n  async setChatSettings(settings: any): Promise<void> {\n    try {\n      if (settings.openaiApiKey && settings.openaiApiKey !== '***hidden***') {\n        await this.setSetting('openai_api_key', settings.openaiApiKey);\n      }\n      \n      if (settings.assistantId !== undefined) {\n        await this.setSetting('openai_assistant_id', settings.assistantId || '');\n      }\n      \n      if (settings.chatModel) {\n        await this.setSetting('chat_model', settings.chatModel);\n      }\n      \n      if (settings.enabled !== undefined) {\n        await this.setSetting('chat_enabled', settings.enabled.toString());\n      }\n    } catch (error) {\n      console.error('Failed to set chat settings:', error);\n      console.error('Settings object:', settings);\n      const message = error instanceof Error ? error.message : String(error);\n      throw new Error(`Settings storage error: ${message}`);\n    }\n  }\n\n  async getOpenAIApiKey(): Promise<string | null> {\n    return await this.getSetting('openai_api_key');\n  }\n}\n", "interface TranslationRequest {\n  text: string;\n  targetLanguages: string[];\n  context?: string;\n  maxLength?: number;\n  tone?: 'marketing' | 'professional' | 'casual' | 'urgent';\n}\n\ninterface TranslationResult {\n  [language: string]: string;\n}\n\ninterface OpenAIResponse {\n  choices: {\n    message: {\n      content: string;\n    };\n  }[];\n}\n\nexport class TranslationService {\n  private static readonly supportedLanguages = {\n    en: 'English',\n    de: 'German', \n    fr: 'French',\n    es: 'Spanish',\n    it: 'Italian',\n    pt: 'Portuguese',\n    nl: 'Dutch',\n    da: 'Danish',\n    no: 'Norwegian',\n    fi: 'Finnish',\n    tr: 'Turkish',\n    pl: 'Polish',\n    ru: 'Russian'\n  };\n\n  static async translateBadgeText(\n    text: string,\n    targetLanguages: string[],\n    openaiApiKey?: string\n  ): Promise<TranslationResult> {\n    // Return empty map if no API key provided\n    if (!openaiApiKey) {\n      console.warn('OpenAI API key not provided - returning empty translation map');\n      return {};\n    }\n\n    // Filter out invalid languages\n    const validLanguages = targetLanguages.filter(lang => \n      lang in this.supportedLanguages && lang !== 'en'\n    );\n\n    if (validLanguages.length === 0) {\n      return {};\n    }\n\n    const languageNames = validLanguages.map(code => \n      `${code}: ${this.supportedLanguages[code as keyof typeof this.supportedLanguages]}`\n    ).join(', ');\n\n    const prompt = `Translate the following announcement badge text into multiple languages.\n\nOriginal text (English): \"${text}\"\nContext: Announcement badge for a Chrome extension product website\nTarget languages: ${languageNames}\nTone: Marketing/promotional tone\n\nRequirements:\n- Maintain the marketing/promotional tone\n- Keep the same emotional impact as the original\n- Adapt cultural nuances appropriately for each target market\n- Keep translations concise and impactful for badge display\n- Ensure translations sound natural to native speakers\n\nRespond with a JSON object where keys are language codes (${validLanguages.join(', ')}) and values are the translated text.\n\nExample format:\n{\n  \"de\": \"German translation here\",\n  \"fr\": \"French translation here\"\n}`;\n\n    try {\n      const response = await fetch('https://api.openai.com/v1/chat/completions', {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${openaiApiKey}`,\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          model: \"gpt-4o\",\n          messages: [\n            {\n              role: \"system\",\n              content: \"You are a professional translator specializing in marketing and e-commerce content. Provide accurate, culturally appropriate translations that maintain the marketing impact of the original text.\"\n            },\n            {\n              role: \"user\", \n              content: prompt\n            }\n          ],\n          response_format: { type: \"json_object\" },\n          temperature: 0.3,\n          max_tokens: 1000\n        })\n      });\n\n      if (!response.ok) {\n        throw new Error(`OpenAI API error: ${response.status} ${response.statusText}`);\n      }\n\n      const data = await response.json() as OpenAIResponse;\n      const translationText = data.choices[0]?.message?.content;\n      \n      if (!translationText) {\n        throw new Error('No translation received from OpenAI');\n      }\n\n      const translations = JSON.parse(translationText);\n      \n      // Validate translations\n      const result: TranslationResult = {};\n      for (const lang of validLanguages) {\n        if (translations[lang] && typeof translations[lang] === 'string') {\n          result[lang] = translations[lang].trim();\n        }\n      }\n\n      return result;\n    } catch (error) {\n      console.error('Translation service error:', error);\n      throw new Error(`Translation failed: ${error instanceof Error ? error.message : 'Unknown error'}`);\n    }\n  }\n\n  static getSupportedLanguages(): typeof TranslationService.supportedLanguages {\n    return this.supportedLanguages;\n  }\n}\n", "import { SettingsStorage } from '../../../lib/settings-storage';\nimport { TranslationService } from '../../../lib/translation-service';\n\ninterface Env {\n  DB: D1Database;\n  OPENAI_API_KEY?: string;\n}\n\ndeclare global {\n  interface D1Database {}\n  interface PagesFunction<T = any> {\n    (context: { request: Request; env: T; params: any; waitUntil: (promise: Promise<any>) => void; }): Promise<Response> | Response;\n  }\n}\n\nexport const onRequestOptions: PagesFunction<Env> = async () => {\n  return new Response(null, {\n    status: 200,\n    headers: {\n      'Access-Control-Allow-Origin': '*',\n      'Access-Control-Allow-Methods': 'POST, OPTIONS',\n      'Access-Control-Allow-Headers': 'Content-Type, Authorization',\n    },\n  });\n};\n\nexport const onRequestPost: PagesFunction<Env> = async (context) => {\n  try {\n    const requestData = await context.request.json();\n    const { textEn, targetLanguages } = requestData;\n    \n    if (!textEn || !targetLanguages || !Array.isArray(targetLanguages)) {\n      return new Response(JSON.stringify({ \n        error: 'textEn and targetLanguages array are required' \n      }), {\n        status: 400,\n        headers: {\n          'Content-Type': 'application/json',\n          'Access-Control-Allow-Origin': '*',\n        },\n      });\n    }\n\n    // Get OpenAI API key from environment or settings\n    let openaiApiKey = context.env.OPENAI_API_KEY;\n    \n    if (!openaiApiKey) {\n      // Try to get from settings storage\n      const settingsStorage = new SettingsStorage(context.env.DB);\n      const apiKeySetting = await settingsStorage.getSetting('openai_api_key');\n      openaiApiKey = apiKeySetting;\n    }\n\n    if (!openaiApiKey) {\n      return new Response(JSON.stringify({ \n        error: 'OpenAI API key not configured' \n      }), {\n        status: 500,\n        headers: {\n          'Content-Type': 'application/json',\n          'Access-Control-Allow-Origin': '*',\n        },\n      });\n    }\n\n    console.log('Translating badge text:', textEn, 'to languages:', targetLanguages);\n\n    // Translate the text\n    const translations = await TranslationService.translateBadgeText(\n      textEn,\n      targetLanguages,\n      openaiApiKey\n    );\n\n    console.log('Translation results:', translations);\n\n    return new Response(JSON.stringify(translations), {\n      status: 200,\n      headers: {\n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*',\n      },\n    });\n  } catch (error) {\n    console.error('Error translating badge text:', error);\n    return new Response(JSON.stringify({ \n      error: 'Failed to translate badge text',\n      details: error instanceof Error ? error.message : 'Unknown error'\n    }), {\n      status: 500,\n      headers: {\n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*',\n      },\n    });\n  }\n};\n", "import { SettingsStorage } from '../../../lib/settings-storage';\n\ninterface Env {\n  DB: D1Database;\n}\n\ndeclare global {\n  interface D1Database {}\n  interface PagesFunction<T = any> {\n    (context: { request: Request; env: T; params: any; waitUntil: (promise: Promise<any>) => void; }): Promise<Response> | Response;\n  }\n}\n\ninterface AnnouncementBadge {\n  id: string;\n  title: string;\n  subtitle: string;\n  backgroundColor: string;\n  textColor: string;\n  priority: number;\n  isActive: boolean;\n  createdAt: string;\n  updatedAt: string;\n}\n\nexport const onRequestOptions: PagesFunction<Env> = async () => {\n  return new Response(null, {\n    status: 200,\n    headers: {\n      'Access-Control-Allow-Origin': '*',\n      'Access-Control-Allow-Methods': 'GET, PUT, DELETE, OPTIONS',\n      'Access-Control-Allow-Headers': 'Content-Type, Authorization',\n    },\n  });\n};\n\nexport const onRequestGet: PagesFunction<Env> = async (context) => {\n  try {\n    const settingsStorage = new SettingsStorage(context.env.DB);\n    const badgeId = context.params.id;\n    \n    if (!badgeId) {\n      return new Response(JSON.stringify({ error: 'Badge ID is required' }), {\n        status: 400,\n        headers: {\n          'Content-Type': 'application/json',\n          'Access-Control-Allow-Origin': '*',\n        },\n      });\n    }\n    \n    // Get all badges\n    const badgesData = await settingsStorage.getSetting('announcement_badges');\n    const badges = badgesData ? JSON.parse(badgesData) : [];\n    \n    // Find specific badge\n    const badge = badges.find((b: AnnouncementBadge) => b.id === badgeId);\n    \n    if (!badge) {\n      return new Response(JSON.stringify({ error: 'Badge not found' }), {\n        status: 404,\n        headers: {\n          'Content-Type': 'application/json',\n          'Access-Control-Allow-Origin': '*',\n        },\n      });\n    }\n    \n    return new Response(JSON.stringify(badge), {\n      status: 200,\n      headers: {\n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*',\n      },\n    });\n  } catch (error) {\n    console.error('Error fetching announcement badge:', error);\n    return new Response(JSON.stringify({ \n      error: 'Failed to fetch announcement badge',\n      details: error instanceof Error ? error.message : 'Unknown error'\n    }), {\n      status: 500,\n      headers: {\n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*',\n      },\n    });\n  }\n};\n\nexport const onRequestPut: PagesFunction<Env> = async (context) => {\n  try {\n    const settingsStorage = new SettingsStorage(context.env.DB);\n    const badgeId = context.params.id;\n    const requestData = await context.request.json();\n    \n    if (!badgeId) {\n      return new Response(JSON.stringify({ error: 'Badge ID is required' }), {\n        status: 400,\n        headers: {\n          'Content-Type': 'application/json',\n          'Access-Control-Allow-Origin': '*',\n        },\n      });\n    }\n    \n    console.log('Updating announcement badge:', badgeId, JSON.stringify(requestData, null, 2));\n    \n    // Get existing badges\n    const existingBadgesData = await settingsStorage.getSetting('announcement_badges');\n    const existingBadges = existingBadgesData ? JSON.parse(existingBadgesData) : [];\n    \n    // Find and update badge\n    const badgeIndex = existingBadges.findIndex((badge: AnnouncementBadge) => badge.id === badgeId);\n    \n    if (badgeIndex === -1) {\n      return new Response(JSON.stringify({ error: 'Badge not found' }), {\n        status: 404,\n        headers: {\n          'Content-Type': 'application/json',\n          'Access-Control-Allow-Origin': '*',\n        },\n      });\n    }\n    \n    // Update badge - handle different field names from frontend\n    existingBadges[badgeIndex] = {\n      ...existingBadges[badgeIndex],\n      title: requestData.title || requestData.text || requestData.badgeText || requestData.content || requestData.message || existingBadges[badgeIndex].title,\n      subtitle: requestData.subtitle || existingBadges[badgeIndex].subtitle,\n      backgroundColor: requestData.backgroundColor || requestData.bgColor || requestData.background || existingBadges[badgeIndex].backgroundColor,\n      textColor: requestData.textColor || requestData.color || requestData.foreground || existingBadges[badgeIndex].textColor,\n      priority: requestData.priority ? parseInt(requestData.priority) : existingBadges[badgeIndex].priority,\n      isActive: requestData.isActive !== undefined ? Boolean(requestData.isActive) : requestData.enabled !== undefined ? Boolean(requestData.enabled) : existingBadges[badgeIndex].isActive,\n      updatedAt: new Date().toISOString(),\n    };\n    \n    console.log('Updated badge object:', JSON.stringify(existingBadges[badgeIndex], null, 2));\n    \n    // Save updated badges\n    await settingsStorage.setSetting('announcement_badges', JSON.stringify(existingBadges));\n    \n    console.log('Updated announcement badge:', badgeId);\n    \n    return new Response(JSON.stringify(existingBadges[badgeIndex]), {\n      status: 200,\n      headers: {\n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*',\n      },\n    });\n  } catch (error) {\n    console.error('Error updating announcement badge:', error);\n    return new Response(JSON.stringify({ \n      error: 'Failed to update announcement badge',\n      details: error instanceof Error ? error.message : 'Unknown error'\n    }), {\n      status: 500,\n      headers: {\n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*',\n      },\n    });\n  }\n};\n\nexport const onRequestDelete: PagesFunction<Env> = async (context) => {\n  try {\n    const settingsStorage = new SettingsStorage(context.env.DB);\n    const badgeId = context.params.id;\n    \n    if (!badgeId) {\n      return new Response(JSON.stringify({ error: 'Badge ID is required' }), {\n        status: 400,\n        headers: {\n          'Content-Type': 'application/json',\n          'Access-Control-Allow-Origin': '*',\n        },\n      });\n    }\n    \n    console.log('Deleting announcement badge:', badgeId);\n    \n    // Get existing badges\n    const existingBadgesData = await settingsStorage.getSetting('announcement_badges');\n    const existingBadges = existingBadgesData ? JSON.parse(existingBadgesData) : [];\n    \n    // Filter out the badge to delete\n    const updatedBadges = existingBadges.filter((badge: AnnouncementBadge) => badge.id !== badgeId);\n    \n    if (updatedBadges.length === existingBadges.length) {\n      return new Response(JSON.stringify({ error: 'Badge not found' }), {\n        status: 404,\n        headers: {\n          'Content-Type': 'application/json',\n          'Access-Control-Allow-Origin': '*',\n        },\n      });\n    }\n    \n    // Save updated badges\n    await settingsStorage.setSetting('announcement_badges', JSON.stringify(updatedBadges));\n    \n    console.log('Deleted announcement badge:', badgeId);\n    \n    return new Response(JSON.stringify({ success: true }), {\n      status: 200,\n      headers: {\n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*',\n      },\n    });\n  } catch (error) {\n    console.error('Error deleting announcement badge:', error);\n    return new Response(JSON.stringify({ \n      error: 'Failed to delete announcement badge',\n      details: error instanceof Error ? error.message : 'Unknown error'\n    }), {\n      status: 500,\n      headers: {\n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*',\n      },\n    });\n  }\n};\n", "import { SettingsStorage } from '../../../lib/settings-storage';\n\ninterface Env {\n  DB: D1Database;\n}\n\ndeclare global {\n  interface D1Database {}\n  interface PagesFunction<T = any> {\n    (context: { request: Request; env: T; params: any; waitUntil: (promise: Promise<any>) => void; }): Promise<Response> | Response;\n  }\n}\n\ninterface CountdownBanner {\n  id: string;\n  title: string;\n  subtitle: string;\n  targetPrice: number;\n  originalPrice: number;\n  endDate: string;\n  priority: number;\n  backgroundColor: string;\n  textColor: string;\n  isActive: boolean;\n  createdAt: string;\n  updatedAt: string;\n}\n\nexport const onRequestOptions: PagesFunction<Env> = async () => {\n  return new Response(null, {\n    status: 200,\n    headers: {\n      'Access-Control-Allow-Origin': '*',\n      'Access-Control-Allow-Methods': 'GET, PUT, DELETE, OPTIONS',\n      'Access-Control-Allow-Headers': 'Content-Type, Authorization',\n    },\n  });\n};\n\nexport const onRequestGet: PagesFunction<Env> = async (context) => {\n  try {\n    const settingsStorage = new SettingsStorage(context.env.DB);\n    const bannerId = context.params.id;\n    \n    if (!bannerId) {\n      return new Response(JSON.stringify({ error: 'Banner ID is required' }), {\n        status: 400,\n        headers: {\n          'Content-Type': 'application/json',\n          'Access-Control-Allow-Origin': '*',\n        },\n      });\n    }\n    \n    // Get all banners\n    const bannersData = await settingsStorage.getSetting('countdown_banners');\n    const banners = bannersData ? JSON.parse(bannersData) : [];\n    \n    // Find specific banner\n    const banner = banners.find((b: CountdownBanner) => b.id === bannerId);\n    \n    if (!banner) {\n      return new Response(JSON.stringify({ error: 'Banner not found' }), {\n        status: 404,\n        headers: {\n          'Content-Type': 'application/json',\n          'Access-Control-Allow-Origin': '*',\n        },\n      });\n    }\n    \n    return new Response(JSON.stringify(banner), {\n      status: 200,\n      headers: {\n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*',\n      },\n    });\n  } catch (error) {\n    console.error('Error fetching countdown banner:', error);\n    return new Response(JSON.stringify({ \n      error: 'Failed to fetch countdown banner',\n      details: error instanceof Error ? error.message : 'Unknown error'\n    }), {\n      status: 500,\n      headers: {\n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*',\n      },\n    });\n  }\n};\n\nexport const onRequestPut: PagesFunction<Env> = async (context) => {\n  try {\n    const settingsStorage = new SettingsStorage(context.env.DB);\n    const bannerId = context.params.id;\n    const requestData = await context.request.json();\n    \n    if (!bannerId) {\n      return new Response(JSON.stringify({ error: 'Banner ID is required' }), {\n        status: 400,\n        headers: {\n          'Content-Type': 'application/json',\n          'Access-Control-Allow-Origin': '*',\n        },\n      });\n    }\n    \n    console.log('Updating countdown banner:', bannerId, requestData);\n    \n    // Get existing banners\n    const existingBannersData = await settingsStorage.getSetting('countdown_banners');\n    const existingBanners = existingBannersData ? JSON.parse(existingBannersData) : [];\n    \n    // Find and update banner\n    const bannerIndex = existingBanners.findIndex((banner: CountdownBanner) => banner.id === bannerId);\n    \n    if (bannerIndex === -1) {\n      return new Response(JSON.stringify({ error: 'Banner not found' }), {\n        status: 404,\n        headers: {\n          'Content-Type': 'application/json',\n          'Access-Control-Allow-Origin': '*',\n        },\n      });\n    }\n    \n    // Update banner\n    existingBanners[bannerIndex] = {\n      ...existingBanners[bannerIndex],\n      title: requestData.title || existingBanners[bannerIndex].title,\n      subtitle: requestData.subtitle || existingBanners[bannerIndex].subtitle,\n      targetPrice: requestData.targetPrice ? parseFloat(requestData.targetPrice) : existingBanners[bannerIndex].targetPrice,\n      originalPrice: requestData.originalPrice ? parseFloat(requestData.originalPrice) : existingBanners[bannerIndex].originalPrice,\n      endDate: requestData.endDate || existingBanners[bannerIndex].endDate,\n      priority: requestData.priority ? parseInt(requestData.priority) : existingBanners[bannerIndex].priority,\n      backgroundColor: requestData.backgroundColor || existingBanners[bannerIndex].backgroundColor,\n      textColor: requestData.textColor || existingBanners[bannerIndex].textColor,\n      isActive: requestData.isActive !== undefined ? requestData.isActive : existingBanners[bannerIndex].isActive,\n      updatedAt: new Date().toISOString(),\n    };\n    \n    // Save updated banners\n    await settingsStorage.setSetting('countdown_banners', JSON.stringify(existingBanners));\n    \n    console.log('Updated countdown banner:', bannerId);\n    \n    return new Response(JSON.stringify(existingBanners[bannerIndex]), {\n      status: 200,\n      headers: {\n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*',\n      },\n    });\n  } catch (error) {\n    console.error('Error updating countdown banner:', error);\n    return new Response(JSON.stringify({ \n      error: 'Failed to update countdown banner',\n      details: error instanceof Error ? error.message : 'Unknown error'\n    }), {\n      status: 500,\n      headers: {\n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*',\n      },\n    });\n  }\n};\n\nexport const onRequestDelete: PagesFunction<Env> = async (context) => {\n  try {\n    const settingsStorage = new SettingsStorage(context.env.DB);\n    const bannerId = context.params.id;\n    \n    if (!bannerId) {\n      return new Response(JSON.stringify({ error: 'Banner ID is required' }), {\n        status: 400,\n        headers: {\n          'Content-Type': 'application/json',\n          'Access-Control-Allow-Origin': '*',\n        },\n      });\n    }\n    \n    console.log('Deleting countdown banner:', bannerId);\n    \n    // Get existing banners\n    const existingBannersData = await settingsStorage.getSetting('countdown_banners');\n    const existingBanners = existingBannersData ? JSON.parse(existingBannersData) : [];\n    \n    // Filter out the banner to delete\n    const updatedBanners = existingBanners.filter((banner: CountdownBanner) => banner.id !== bannerId);\n    \n    if (updatedBanners.length === existingBanners.length) {\n      return new Response(JSON.stringify({ error: 'Banner not found' }), {\n        status: 404,\n        headers: {\n          'Content-Type': 'application/json',\n          'Access-Control-Allow-Origin': '*',\n        },\n      });\n    }\n    \n    // Save updated banners\n    await settingsStorage.setSetting('countdown_banners', JSON.stringify(updatedBanners));\n    \n    console.log('Deleted countdown banner:', bannerId);\n    \n    return new Response(JSON.stringify({ success: true }), {\n      status: 200,\n      headers: {\n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*',\n      },\n    });\n  } catch (error) {\n    console.error('Error deleting countdown banner:', error);\n    return new Response(JSON.stringify({ \n      error: 'Failed to delete countdown banner',\n      details: error instanceof Error ? error.message : 'Unknown error'\n    }), {\n      status: 500,\n      headers: {\n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*',\n      },\n    });\n  }\n};\n", "export const onRequestPut = async ({ request, params }: any) => {\n  try {\n    const featureName = params.feature;\n    const { isEnabled, description } = await request.json();\n    \n    // Demo response - in real implementation, save to database\n    return new Response(JSON.stringify({\n      success: true,\n      message: `Feature ${featureName} updated successfully`,\n      feature: {\n        id: featureName,\n        name: featureName.replace('-', ' ').replace(/\\b\\w/g, l => l.toUpperCase()),\n        isEnabled,\n        description: description || `${featureName} feature`\n      }\n    }), {\n      headers: { \n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*'\n      }\n    });\n    \n  } catch (error) {\n    return new Response(JSON.stringify({\n      success: false,\n      message: 'Failed to update feature'\n    }), {\n      status: 500,\n      headers: { \n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*'\n      }\n    });\n  }\n};\n\nexport const onRequestOptions = async () => {\n  return new Response(null, {\n    headers: {\n      'Access-Control-Allow-Origin': '*',\n      'Access-Control-Allow-Methods': 'PUT, OPTIONS',\n      'Access-Control-Allow-Headers': 'Content-Type'\n    }\n  });\n};\n", "export async function onRequestPut(context: any) {\n  const { request, env, params } = context;\n  const orderId = params.orderId;\n\n  // CORS headers\n  const corsHeaders = {\n    'Access-Control-Allow-Origin': '*',\n    'Access-Control-Allow-Methods': 'PUT, OPTIONS',\n    'Access-Control-Allow-Headers': 'Content-Type, Authorization',\n  };\n\n  // Handle preflight requests\n  if (request.method === 'OPTIONS') {\n    return new Response(null, { headers: corsHeaders });\n  }\n\n  try {\n    const { status } = await request.json();\n\n    if (!status || !['pending', 'completed', 'failed', 'refunded'].includes(status)) {\n      return new Response(JSON.stringify({ \n        success: false, \n        error: 'Invalid status. Must be one of: pending, completed, failed, refunded' \n      }), {\n        status: 400,\n        headers: { 'Content-Type': 'application/json', ...corsHeaders }\n      });\n    }\n\n    // Update order status\n    const updateQuery = `\n      UPDATE orders \n      SET status = ?, completedAt = ?\n      WHERE id = ?\n    `;\n    \n    const completedAt = status === 'completed' ? new Date().toISOString() : null;\n    \n    const updateResult = await env.DB.prepare(updateQuery)\n      .bind(status, completedAt, orderId)\n      .run();\n\n    if (!updateResult.success) {\n      throw new Error('Failed to update order status');\n    }\n\n    // If order is completed, update user premium status\n    if (status === 'completed') {\n      // Get order details to update user\n      const orderQuery = `\n        SELECT customerEmail, finalAmount \n        FROM orders \n        WHERE id = ?\n      `;\n      \n      const orderResult = await env.DB.prepare(orderQuery).bind(orderId).first();\n      \n      if (orderResult) {\n        // Update user premium status and stats\n        const userUpdateQuery = `\n          UPDATE users \n          SET \n            isPremium = 1\n          WHERE email = ?\n        `;\n        \n        await env.DB.prepare(userUpdateQuery)\n          .bind(orderResult.customerEmail)\n          .run();\n      }\n    }\n\n    return new Response(JSON.stringify({ \n      success: true, \n      message: 'Order status updated successfully' \n    }), {\n      status: 200,\n      headers: { 'Content-Type': 'application/json', ...corsHeaders }\n    });\n\n  } catch (error) {\n    console.error('Error updating order:', error);\n    return new Response(JSON.stringify({ \n      success: false, \n      error: 'Failed to update order status' \n    }), {\n      status: 500,\n      headers: { 'Content-Type': 'application/json', ...corsHeaders }\n    });\n  }\n}\n", "// Cloudflare Pages Function: /api/extension/check/[id]\n// Handles extension status check\n\nimport type { PagesFunction } from '@cloudflare/workers-types';\nimport { Env } from '../../../lib/context';\n\nfunction json(data: any, status = 200) {\n  return new Response(JSON.stringify(data), {\n    status,\n    headers: {\n      'Content-Type': 'application/json',\n      'Access-Control-Allow-Origin': '*',\n      'Access-Control-Allow-Methods': 'GET, OPTIONS',\n      'Access-Control-Allow-Headers': 'Content-Type, Authorization'\n    },\n  });\n}\n\nexport const onRequestGet: PagesFunction<Env> = async ({ request, params, env }) => {\n  try {\n        const paramId = params.id as string;\n    const authHeader = request.headers.get('Authorization');\n    \n    if (!authHeader || !authHeader.startsWith('Bearer ')) {\n      return json({ canUse: false, reason: 'Not authenticated' });\n    }\n\n    const token = authHeader.substring(7);\n\n    // Handle demo user\n    if (token === 'demo-jwt-token' && paramId === '1') {\n      return json({\n        canUse: true,\n        reason: 'Premium access',\n        trialUsed: 0,\n        isBlocked: false\n      });\n    }\n\n    // For real users, verify token and check database\n    if (token.startsWith('jwt-token-')) {\n      const userIdFromToken = parseInt(token.split('-')[2], 10);\n      const userIdFromParam = parseInt(paramId, 10);\n\n      if (isNaN(userIdFromToken) || isNaN(userIdFromParam) || userIdFromToken !== userIdFromParam) {\n        return json({ canUse: false, reason: 'Token mismatch' }, 403);\n      }\n\n      if (!env.DB) {\n        return json({ canUse: false, reason: 'Database not available' }, 500);\n      }\n\n      const customer = await env.DB.prepare(\n        'SELECT extension_activated FROM customers WHERE id = ?'\n      ).bind(userIdFromParam).first<{ extension_activated: number }>();\n\n      if (customer && customer.extension_activated) {\n        return json({\n          canUse: true,\n          reason: 'Premium access',\n          trialUsed: 0,\n          isBlocked: false\n        });\n      } else {\n        // Return trial status for non-premium users\n        return json({\n          canUse: true,\n          reason: 'Trial access',\n          trialUsed: 5, // This could be dynamic in a real app\n          isBlocked: false\n        });\n      }\n    }\n    \n    return json({ canUse: false, reason: 'Invalid token' }, 401);\n    \n  } catch (error: any) {\n    return json({ \n      error: error.message \n    }, 500);\n  }\n};\n", "// Cloudflare Pages Function: /api/extension/downloads/[id]\n// Handles extension downloads list\n\nimport type { PagesFunction } from '@cloudflare/workers-types';\nimport { Env } from '../../../lib/context';\n\nfunction json(data: any, status = 200) {\n  return new Response(JSON.stringify(data), {\n    status,\n    headers: {\n      'Content-Type': 'application/json',\n      'Access-Control-Allow-Origin': '*',\n      'Access-Control-Allow-Methods': 'GET, OPTIONS',\n      'Access-Control-Allow-Headers': 'Content-Type, Authorization'\n    },\n  });\n}\n\nexport const onRequestGet: PagesFunction<Env> = async ({ request, params, env }) => {\n  try {\n    const userId = params.id as string;\n    const authHeader = request.headers.get('Authorization');\n    \n    if (!authHeader || !authHeader.startsWith('Bearer ')) {\n      return json([]);\n    }\n\n    const token = authHeader.substring(7);\n    \n    // Handle demo-jwt-token or jwt-token-1-* format\n    if (token === 'demo-jwt-token' || (token.startsWith('jwt-token-') && token.split('-')[2] === '1')) {\n      return json([\n        {\n          id: 1,\n          downloadToken: 'demo-download-token',\n          downloadType: 'paid',\n          downloadCount: 1,\n          createdAt: new Date().toISOString()\n        }\n      ]);\n    }\n    \n    // For other users, return empty array\n    return json([]);\n    \n  } catch (error: any) {\n    return json({ \n      error: error.message \n    }, 500);\n  }\n};\n", "export const onRequestGet = async ({ params }: any) => {\n  const invoiceId = params.id;\n  \n  // Demo PDF response - in real implementation, generate actual PDF\n  const pdfContent = `%PDF-1.4\n1 0 obj\n<<\n/Type /Catalog\n/Pages 2 0 R\n>>\nendobj\n\n2 0 obj\n<<\n/Type /Pages\n/Kids [3 0 R]\n/Count 1\n>>\nendobj\n\n3 0 obj\n<<\n/Type /Page\n/Parent 2 0 R\n/MediaBox [0 0 612 792]\n/Contents 4 0 R\n>>\nendobj\n\n4 0 obj\n<<\n/Length 44\n>>\nstream\nBT\n/F1 12 Tf\n100 700 Td\n(Invoice #${invoiceId}) Tj\nET\nendstream\nendobj\n\nxref\n0 5\n0000000000 65535 f \n0000000010 00000 n \n0000000053 00000 n \n0000000125 00000 n \n0000000185 00000 n \ntrailer\n<<\n/Size 5\n/Root 1 0 R\n>>\nstartxref\n279\n%%EOF`;\n\n  return new Response(pdfContent, {\n    headers: { \n      'Content-Type': 'application/pdf',\n      'Content-Disposition': `attachment; filename=\"invoice-${invoiceId}.pdf\"`,\n      'Access-Control-Allow-Origin': '*'\n    }\n  });\n};\n\nexport const onRequestOptions = async () => {\n  return new Response(null, {\n    headers: {\n      'Access-Control-Allow-Origin': '*',\n      'Access-Control-Allow-Methods': 'GET, OPTIONS',\n      'Access-Control-Allow-Headers': 'Content-Type'\n    }\n  });\n};\n", "// D1 Database helper for Cloudflare Functions\n\n// D1Database type definition for Cloudflare Workers\ninterface D1Database {\n  prepare(query: string): D1PreparedStatement;\n  dump(): Promise<ArrayBuffer>;\n  batch<T = unknown>(statements: D1PreparedStatement[]): Promise<D1Result<T>[]>;\n  exec(query: string): Promise<D1ExecResult>;\n}\n\ninterface D1PreparedStatement {\n  bind(...values: any[]): D1PreparedStatement;\n  first<T = unknown>(colName?: string): Promise<T | null>;\n  run<T = unknown>(): Promise<D1Result<T>>;\n  all<T = unknown>(): Promise<D1Result<T[]>>;\n  raw<T = unknown>(): Promise<T[]>;\n}\n\ninterface D1Result<T = unknown> {\n  results: T;\n  success: boolean;\n  meta: any;\n  error?: string;\n}\n\ninterface D1ExecResult {\n  count: number;\n  duration: number;\n}\n\nexport interface Env {\n  DB: D1Database;\n  EXPRESS_API_BASE?: string;\n}\n\nexport interface Ticket {\n  id: number;\n  customer_id: number;\n  title: string;\n  description: string;\n  category: string;\n  priority: string;\n  status: 'open' | 'in-progress' | 'resolved' | 'closed' | 'archived';\n  customer_email: string;\n  customer_name: string;\n  assigned_to_user_id?: number;\n  created_at: string;\n  updated_at: string;\n  resolved_at?: string;\n  archived_at?: string;\n}\n\nexport interface TicketMessage {\n  id: number;\n  ticket_id: number;\n  message: string;\n  is_from_customer: boolean;\n  sender_name: string;\n  sender_email?: string;\n  created_at: string;\n  attachments?: string;\n}\n\nexport class TicketStorage {\n  constructor(private db: D1Database) {}\n\n  async getAllTickets(): Promise<Ticket[]> {\n    try {\n      const result = await this.db.prepare('SELECT * FROM tickets ORDER BY created_at DESC').all();\n      return result.results as Ticket[];\n    } catch (error: any) {\n      console.error('D1 getAllTickets error:', error);\n      throw new Error(`Database query failed: ${error.message}`);\n    }\n  }\n\n  async getTicketsByCustomerEmail(email: string): Promise<Ticket[]> {\n    try {\n      const result = await this.db.prepare('SELECT * FROM tickets WHERE customer_email = ? ORDER BY created_at DESC')\n        .bind(email)\n        .all();\n      return result.results as Ticket[];\n    } catch (error: any) {\n      console.error('D1 getTicketsByCustomerEmail error:', error);\n      throw new Error(`Database query failed: ${error.message}`);\n    }\n  }\n\n  async getTicketsByCustomerId(customerId: number): Promise<Ticket[]> {\n    try {\n      const result = await this.db.prepare('SELECT * FROM tickets WHERE customer_id = ? ORDER BY created_at DESC')\n        .bind(customerId)\n        .all();\n      return result.results as Ticket[];\n    } catch (error: any) {\n      console.error('D1 getTicketsByCustomerId error:', error);\n      throw new Error(`Database query failed: ${error.message}`);\n    }\n  }\n\n  async getTicketById(id: number): Promise<Ticket | null> {\n    const result = await this.db.prepare('SELECT * FROM tickets WHERE id = ?')\n      .bind(id)\n      .first();\n    return result as Ticket | null;\n  }\n\n  async createTicket(ticket: Omit<Ticket, 'id' | 'created_at' | 'updated_at'>): Promise<Ticket> {\n    // Ensure customer_id is part of the ticket object for insertion\n    if (ticket.customer_id === undefined) {\n      throw new Error('customer_id is required to create a ticket.');\n    }\n    const now = new Date().toISOString();\n    \n    try {\n      const result = await this.db.prepare(`\n        INSERT INTO tickets (customer_id, title, description, category, priority, status, customer_email, customer_name, assigned_to_user_id, created_at, updated_at)\n        VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)\n        RETURNING *\n      `).bind(\n        ticket.customer_id,\n        ticket.title,\n        ticket.description,\n        ticket.category,\n        ticket.priority,\n        ticket.status,\n        ticket.customer_email,\n        ticket.customer_name,\n        ticket.assigned_to_user_id || null,\n        now,\n        now\n      ).first();\n      \n      if (!result) {\n        throw new Error('Failed to insert ticket - no result returned');\n      }\n      \n      return result as Ticket;\n    } catch (error: any) {\n      console.error('D1 createTicket error:', error);\n      throw new Error(`Database insert failed: ${error.message}`);\n    }\n  }\n\n  async updateTicket(id: number, updates: Partial<Ticket>): Promise<Ticket | null> {\n    const now = new Date().toISOString();\n    \n    try {\n      const result = await this.db.prepare(`\n        UPDATE tickets \n        SET title = COALESCE(?, title),\n            description = COALESCE(?, description),\n            category = COALESCE(?, category),\n            priority = COALESCE(?, priority),\n            status = COALESCE(?, status),\n            assigned_to_user_id = COALESCE(?, assigned_to_user_id),\n            updated_at = ?,\n            resolved_at = CASE WHEN ? = 'resolved' THEN ? ELSE resolved_at END,\n            archived_at = CASE WHEN ? = 'archived' THEN ? ELSE archived_at END\n        WHERE id = ?\n        RETURNING *\n      `).bind(\n        updates.title || null,\n        updates.description || null,\n        updates.category || null,\n        updates.priority || null,\n        updates.status || null,\n        updates.assigned_to_user_id || null,\n        now,\n        updates.status,\n        updates.status === 'resolved' ? now : null,\n        updates.status,\n        updates.status === 'archived' ? now : null,\n        id\n      ).first();\n      \n      return result as Ticket | null;\n    } catch (error: any) {\n      console.error('D1 updateTicket error:', error);\n      throw new Error(`Database update failed: ${error.message}`);\n    }\n  }\n\n  async archiveTicket(id: number): Promise<Ticket | null> {\n    const now = new Date().toISOString();\n    \n    try {\n      const result = await this.db.prepare(`\n        UPDATE tickets \n        SET status = 'archived',\n            archived_at = ?,\n            updated_at = ?\n        WHERE id = ?\n        RETURNING *\n      `).bind(now, now, id).first();\n      \n      return result as Ticket | null;\n    } catch (error: any) {\n      console.error('D1 archiveTicket error:', error);\n      throw new Error(`Database archive failed: ${error.message}`);\n    }\n  }\n\n  async updateTicketStatus(id: number, status: string): Promise<void> {\n    const now = new Date().toISOString();\n    await this.db.prepare('UPDATE tickets SET status = ?, updated_at = ? WHERE id = ?')\n      .bind(status, now, id)\n      .run();\n  }\n\n  async deleteTicket(id: number): Promise<void> {\n    // Delete messages first due to foreign key constraint\n    await this.db.prepare('DELETE FROM ticket_messages WHERE ticket_id = ?').bind(id).run();\n    await this.db.prepare('DELETE FROM tickets WHERE id = ?').bind(id).run();\n  }\n\n  async getTicketMessages(ticketId: number): Promise<TicketMessage[]> {\n    const result = await this.db.prepare('SELECT * FROM ticket_messages WHERE ticket_id = ? ORDER BY created_at ASC')\n      .bind(ticketId)\n      .all();\n    return result.results as TicketMessage[];\n  }\n\n  async addTicketMessage(message: Omit<TicketMessage, 'id' | 'created_at'>): Promise<TicketMessage> {\n    const now = new Date().toISOString();\n    \n    // Insert message\n    const result = await this.db.prepare(`\n      INSERT INTO ticket_messages (ticket_id, message, is_from_customer, sender_name, sender_email, created_at, attachments)\n      VALUES (?, ?, ?, ?, ?, ?, ?)\n      RETURNING *\n    `).bind(\n      message.ticket_id,\n      message.message,\n      message.is_from_customer ? 1 : 0,\n      message.sender_name,\n      message.sender_email || null,\n      now,\n      message.attachments || null\n    ).first();\n\n    // Update ticket timestamp\n    await this.db.prepare('UPDATE tickets SET updated_at = ? WHERE id = ?')\n      .bind(now, message.ticket_id)\n      .run();\n\n    return result as TicketMessage;\n  }\n}\n", "// Archive ticket endpoint for Cloudflare Pages Functions\nimport { TicketStorage } from '../../../lib/db';\n\ninterface Env {\n  DB: any;\n  EXPRESS_API_BASE?: string;\n}\n\nexport const onRequestPost = async ({ request, params, env }: { request: Request; params: { id: string }; env: Env }) => {\n  const ticketId = Number(params.id);\n\n  if (!ticketId || isNaN(ticketId)) {\n    return Response.json({ success: false, message: 'Invalid ticket ID' }, { status: 400 });\n  }\n\n  // Check if we should proxy to Express backend\n  if (env.EXPRESS_API_BASE) {\n    try {\n      const proxyUrl = `${env.EXPRESS_API_BASE}/api/tickets/${ticketId}/archive`;\n      const proxyResponse = await fetch(proxyUrl, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': request.headers.get('Authorization') || '',\n        },\n      });\n      \n      const data = await proxyResponse.json();\n      return Response.json(data, { status: proxyResponse.status });\n    } catch (error) {\n      console.error('Express proxy error:', error);\n      // Fall through to D1 implementation\n    }\n  }\n\n  // Check if database is available\n  if (!env.DB) {\n    return Response.json({ success: false, message: 'Database not available' }, { status: 500 });\n  }\n\n  try {\n    const storage = new TicketStorage(env.DB);\n    \n    // Check if ticket exists\n    const existingTicket = await storage.getTicketById(ticketId);\n    if (!existingTicket) {\n      return Response.json({ success: false, message: 'Ticket not found' }, { status: 404 });\n    }\n\n    // Archive the ticket\n    const archivedTicket = await storage.archiveTicket(ticketId);\n    \n    if (!archivedTicket) {\n      return Response.json({ success: false, message: 'Failed to archive ticket' }, { status: 500 });\n    }\n\n    return Response.json({ \n      success: true, \n      message: 'Ticket archived successfully',\n      ticket: archivedTicket \n    });\n\n  } catch (error: any) {\n    console.error('Archive ticket error:', error);\n    return Response.json({ \n      success: false, \n      message: 'Failed to archive ticket',\n      error: error.message \n    }, { status: 500 });\n  }\n};\n", "/*\n Copyright (c) 2012 Nevins Bartolomeo <nevins.bartolomeo@gmail.com>\n Copyright (c) 2012 Shane Girish <shaneGirish@gmail.com>\n Copyright (c) 2025 Daniel Wirtz <dcode@dcode.io>\n\n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions\n are met:\n 1. Redistributions of source code must retain the above copyright\n notice, this list of conditions and the following disclaimer.\n 2. Redistributions in binary form must reproduce the above copyright\n notice, this list of conditions and the following disclaimer in the\n documentation and/or other materials provided with the distribution.\n 3. The name of the author may not be used to endorse or promote products\n derived from this software without specific prior written permission.\n\n THIS SOFTWARE IS PROVIDED BY THE AUTHOR ``AS IS'' AND ANY EXPRESS OR\n IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES\n OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.\n IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY DIRECT, INDIRECT,\n INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT\n NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF\n THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n// The Node.js crypto module is used as a fallback for the Web Crypto API. When\n// building for the browser, inclusion of the crypto module should be disabled,\n// which the package hints at in its package.json for bundlers that support it.\nimport nodeCrypto from \"crypto\";\n\n/**\n * The random implementation to use as a fallback.\n * @type {?function(number):!Array.<number>}\n * @inner\n */\nvar randomFallback = null;\n\n/**\n * Generates cryptographically secure random bytes.\n * @function\n * @param {number} len Bytes length\n * @returns {!Array.<number>} Random bytes\n * @throws {Error} If no random implementation is available\n * @inner\n */\nfunction randomBytes(len) {\n  // Web Crypto API. Globally available in the browser and in Node.js >=23.\n  try {\n    return crypto.getRandomValues(new Uint8Array(len));\n  } catch {}\n  // Node.js crypto module for non-browser environments.\n  try {\n    return nodeCrypto.randomBytes(len);\n  } catch {}\n  // Custom fallback specified with `setRandomFallback`.\n  if (!randomFallback) {\n    throw Error(\n      \"Neither WebCryptoAPI nor a crypto module is available. Use bcrypt.setRandomFallback to set an alternative\",\n    );\n  }\n  return randomFallback(len);\n}\n\n/**\n * Sets the pseudo random number generator to use as a fallback if neither node's `crypto` module nor the Web Crypto\n *  API is available. Please note: It is highly important that the PRNG used is cryptographically secure and that it\n *  is seeded properly!\n * @param {?function(number):!Array.<number>} random Function taking the number of bytes to generate as its\n *  sole argument, returning the corresponding array of cryptographically secure random byte values.\n * @see http://nodejs.org/api/crypto.html\n * @see http://www.w3.org/TR/WebCryptoAPI/\n */\nexport function setRandomFallback(random) {\n  randomFallback = random;\n}\n\n/**\n * Synchronously generates a salt.\n * @param {number=} rounds Number of rounds to use, defaults to 10 if omitted\n * @param {number=} seed_length Not supported.\n * @returns {string} Resulting salt\n * @throws {Error} If a random fallback is required but not set\n */\nexport function genSaltSync(rounds, seed_length) {\n  rounds = rounds || GENSALT_DEFAULT_LOG2_ROUNDS;\n  if (typeof rounds !== \"number\")\n    throw Error(\n      \"Illegal arguments: \" + typeof rounds + \", \" + typeof seed_length,\n    );\n  if (rounds < 4) rounds = 4;\n  else if (rounds > 31) rounds = 31;\n  var salt = [];\n  salt.push(\"$2b$\");\n  if (rounds < 10) salt.push(\"0\");\n  salt.push(rounds.toString());\n  salt.push(\"$\");\n  salt.push(base64_encode(randomBytes(BCRYPT_SALT_LEN), BCRYPT_SALT_LEN)); // May throw\n  return salt.join(\"\");\n}\n\n/**\n * Asynchronously generates a salt.\n * @param {(number|function(Error, string=))=} rounds Number of rounds to use, defaults to 10 if omitted\n * @param {(number|function(Error, string=))=} seed_length Not supported.\n * @param {function(Error, string=)=} callback Callback receiving the error, if any, and the resulting salt\n * @returns {!Promise} If `callback` has been omitted\n * @throws {Error} If `callback` is present but not a function\n */\nexport function genSalt(rounds, seed_length, callback) {\n  if (typeof seed_length === \"function\")\n    (callback = seed_length), (seed_length = undefined); // Not supported.\n  if (typeof rounds === \"function\") (callback = rounds), (rounds = undefined);\n  if (typeof rounds === \"undefined\") rounds = GENSALT_DEFAULT_LOG2_ROUNDS;\n  else if (typeof rounds !== \"number\")\n    throw Error(\"illegal arguments: \" + typeof rounds);\n\n  function _async(callback) {\n    nextTick(function () {\n      // Pretty thin, but salting is fast enough\n      try {\n        callback(null, genSaltSync(rounds));\n      } catch (err) {\n        callback(err);\n      }\n    });\n  }\n\n  if (callback) {\n    if (typeof callback !== \"function\")\n      throw Error(\"Illegal callback: \" + typeof callback);\n    _async(callback);\n  } else\n    return new Promise(function (resolve, reject) {\n      _async(function (err, res) {\n        if (err) {\n          reject(err);\n          return;\n        }\n        resolve(res);\n      });\n    });\n}\n\n/**\n * Synchronously generates a hash for the given password.\n * @param {string} password Password to hash\n * @param {(number|string)=} salt Salt length to generate or salt to use, default to 10\n * @returns {string} Resulting hash\n */\nexport function hashSync(password, salt) {\n  if (typeof salt === \"undefined\") salt = GENSALT_DEFAULT_LOG2_ROUNDS;\n  if (typeof salt === \"number\") salt = genSaltSync(salt);\n  if (typeof password !== \"string\" || typeof salt !== \"string\")\n    throw Error(\"Illegal arguments: \" + typeof password + \", \" + typeof salt);\n  return _hash(password, salt);\n}\n\n/**\n * Asynchronously generates a hash for the given password.\n * @param {string} password Password to hash\n * @param {number|string} salt Salt length to generate or salt to use\n * @param {function(Error, string=)=} callback Callback receiving the error, if any, and the resulting hash\n * @param {function(number)=} progressCallback Callback successively called with the percentage of rounds completed\n *  (0.0 - 1.0), maximally once per `MAX_EXECUTION_TIME = 100` ms.\n * @returns {!Promise} If `callback` has been omitted\n * @throws {Error} If `callback` is present but not a function\n */\nexport function hash(password, salt, callback, progressCallback) {\n  function _async(callback) {\n    if (typeof password === \"string\" && typeof salt === \"number\")\n      genSalt(salt, function (err, salt) {\n        _hash(password, salt, callback, progressCallback);\n      });\n    else if (typeof password === \"string\" && typeof salt === \"string\")\n      _hash(password, salt, callback, progressCallback);\n    else\n      nextTick(\n        callback.bind(\n          this,\n          Error(\"Illegal arguments: \" + typeof password + \", \" + typeof salt),\n        ),\n      );\n  }\n\n  if (callback) {\n    if (typeof callback !== \"function\")\n      throw Error(\"Illegal callback: \" + typeof callback);\n    _async(callback);\n  } else\n    return new Promise(function (resolve, reject) {\n      _async(function (err, res) {\n        if (err) {\n          reject(err);\n          return;\n        }\n        resolve(res);\n      });\n    });\n}\n\n/**\n * Compares two strings of the same length in constant time.\n * @param {string} known Must be of the correct length\n * @param {string} unknown Must be the same length as `known`\n * @returns {boolean}\n * @inner\n */\nfunction safeStringCompare(known, unknown) {\n  var diff = known.length ^ unknown.length;\n  for (var i = 0; i < known.length; ++i) {\n    diff |= known.charCodeAt(i) ^ unknown.charCodeAt(i);\n  }\n  return diff === 0;\n}\n\n/**\n * Synchronously tests a password against a hash.\n * @param {string} password Password to compare\n * @param {string} hash Hash to test against\n * @returns {boolean} true if matching, otherwise false\n * @throws {Error} If an argument is illegal\n */\nexport function compareSync(password, hash) {\n  if (typeof password !== \"string\" || typeof hash !== \"string\")\n    throw Error(\"Illegal arguments: \" + typeof password + \", \" + typeof hash);\n  if (hash.length !== 60) return false;\n  return safeStringCompare(\n    hashSync(password, hash.substring(0, hash.length - 31)),\n    hash,\n  );\n}\n\n/**\n * Asynchronously tests a password against a hash.\n * @param {string} password Password to compare\n * @param {string} hashValue Hash to test against\n * @param {function(Error, boolean)=} callback Callback receiving the error, if any, otherwise the result\n * @param {function(number)=} progressCallback Callback successively called with the percentage of rounds completed\n *  (0.0 - 1.0), maximally once per `MAX_EXECUTION_TIME = 100` ms.\n * @returns {!Promise} If `callback` has been omitted\n * @throws {Error} If `callback` is present but not a function\n */\nexport function compare(password, hashValue, callback, progressCallback) {\n  function _async(callback) {\n    if (typeof password !== \"string\" || typeof hashValue !== \"string\") {\n      nextTick(\n        callback.bind(\n          this,\n          Error(\n            \"Illegal arguments: \" + typeof password + \", \" + typeof hashValue,\n          ),\n        ),\n      );\n      return;\n    }\n    if (hashValue.length !== 60) {\n      nextTick(callback.bind(this, null, false));\n      return;\n    }\n    hash(\n      password,\n      hashValue.substring(0, 29),\n      function (err, comp) {\n        if (err) callback(err);\n        else callback(null, safeStringCompare(comp, hashValue));\n      },\n      progressCallback,\n    );\n  }\n\n  if (callback) {\n    if (typeof callback !== \"function\")\n      throw Error(\"Illegal callback: \" + typeof callback);\n    _async(callback);\n  } else\n    return new Promise(function (resolve, reject) {\n      _async(function (err, res) {\n        if (err) {\n          reject(err);\n          return;\n        }\n        resolve(res);\n      });\n    });\n}\n\n/**\n * Gets the number of rounds used to encrypt the specified hash.\n * @param {string} hash Hash to extract the used number of rounds from\n * @returns {number} Number of rounds used\n * @throws {Error} If `hash` is not a string\n */\nexport function getRounds(hash) {\n  if (typeof hash !== \"string\")\n    throw Error(\"Illegal arguments: \" + typeof hash);\n  return parseInt(hash.split(\"$\")[2], 10);\n}\n\n/**\n * Gets the salt portion from a hash. Does not validate the hash.\n * @param {string} hash Hash to extract the salt from\n * @returns {string} Extracted salt part\n * @throws {Error} If `hash` is not a string or otherwise invalid\n */\nexport function getSalt(hash) {\n  if (typeof hash !== \"string\")\n    throw Error(\"Illegal arguments: \" + typeof hash);\n  if (hash.length !== 60)\n    throw Error(\"Illegal hash length: \" + hash.length + \" != 60\");\n  return hash.substring(0, 29);\n}\n\n/**\n * Tests if a password will be truncated when hashed, that is its length is\n * greater than 72 bytes when converted to UTF-8.\n * @param {string} password The password to test\n * @returns {boolean} `true` if truncated, otherwise `false`\n */\nexport function truncates(password) {\n  if (typeof password !== \"string\")\n    throw Error(\"Illegal arguments: \" + typeof password);\n  return utf8Length(password) > 72;\n}\n\n/**\n * Continues with the callback on the next tick.\n * @function\n * @param {function(...[*])} callback Callback to execute\n * @inner\n */\nvar nextTick =\n  typeof process !== \"undefined\" &&\n  process &&\n  typeof process.nextTick === \"function\"\n    ? typeof setImmediate === \"function\"\n      ? setImmediate\n      : process.nextTick\n    : setTimeout;\n\n/** Calculates the byte length of a string encoded as UTF8. */\nfunction utf8Length(string) {\n  var len = 0,\n    c = 0;\n  for (var i = 0; i < string.length; ++i) {\n    c = string.charCodeAt(i);\n    if (c < 128) len += 1;\n    else if (c < 2048) len += 2;\n    else if (\n      (c & 0xfc00) === 0xd800 &&\n      (string.charCodeAt(i + 1) & 0xfc00) === 0xdc00\n    ) {\n      ++i;\n      len += 4;\n    } else len += 3;\n  }\n  return len;\n}\n\n/** Converts a string to an array of UTF8 bytes. */\nfunction utf8Array(string) {\n  var offset = 0,\n    c1,\n    c2;\n  var buffer = new Array(utf8Length(string));\n  for (var i = 0, k = string.length; i < k; ++i) {\n    c1 = string.charCodeAt(i);\n    if (c1 < 128) {\n      buffer[offset++] = c1;\n    } else if (c1 < 2048) {\n      buffer[offset++] = (c1 >> 6) | 192;\n      buffer[offset++] = (c1 & 63) | 128;\n    } else if (\n      (c1 & 0xfc00) === 0xd800 &&\n      ((c2 = string.charCodeAt(i + 1)) & 0xfc00) === 0xdc00\n    ) {\n      c1 = 0x10000 + ((c1 & 0x03ff) << 10) + (c2 & 0x03ff);\n      ++i;\n      buffer[offset++] = (c1 >> 18) | 240;\n      buffer[offset++] = ((c1 >> 12) & 63) | 128;\n      buffer[offset++] = ((c1 >> 6) & 63) | 128;\n      buffer[offset++] = (c1 & 63) | 128;\n    } else {\n      buffer[offset++] = (c1 >> 12) | 224;\n      buffer[offset++] = ((c1 >> 6) & 63) | 128;\n      buffer[offset++] = (c1 & 63) | 128;\n    }\n  }\n  return buffer;\n}\n\n// A base64 implementation for the bcrypt algorithm. This is partly non-standard.\n\n/**\n * bcrypt's own non-standard base64 dictionary.\n * @type {!Array.<string>}\n * @const\n * @inner\n **/\nvar BASE64_CODE =\n  \"./ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\".split(\"\");\n\n/**\n * @type {!Array.<number>}\n * @const\n * @inner\n **/\nvar BASE64_INDEX = [\n  -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\n  -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\n  -1, -1, -1, -1, -1, -1, -1, -1, 0, 1, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63,\n  -1, -1, -1, -1, -1, -1, -1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15,\n  16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, -1, -1, -1, -1, -1, -1, 28,\n  29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47,\n  48, 49, 50, 51, 52, 53, -1, -1, -1, -1, -1,\n];\n\n/**\n * Encodes a byte array to base64 with up to len bytes of input.\n * @param {!Array.<number>} b Byte array\n * @param {number} len Maximum input length\n * @returns {string}\n * @inner\n */\nfunction base64_encode(b, len) {\n  var off = 0,\n    rs = [],\n    c1,\n    c2;\n  if (len <= 0 || len > b.length) throw Error(\"Illegal len: \" + len);\n  while (off < len) {\n    c1 = b[off++] & 0xff;\n    rs.push(BASE64_CODE[(c1 >> 2) & 0x3f]);\n    c1 = (c1 & 0x03) << 4;\n    if (off >= len) {\n      rs.push(BASE64_CODE[c1 & 0x3f]);\n      break;\n    }\n    c2 = b[off++] & 0xff;\n    c1 |= (c2 >> 4) & 0x0f;\n    rs.push(BASE64_CODE[c1 & 0x3f]);\n    c1 = (c2 & 0x0f) << 2;\n    if (off >= len) {\n      rs.push(BASE64_CODE[c1 & 0x3f]);\n      break;\n    }\n    c2 = b[off++] & 0xff;\n    c1 |= (c2 >> 6) & 0x03;\n    rs.push(BASE64_CODE[c1 & 0x3f]);\n    rs.push(BASE64_CODE[c2 & 0x3f]);\n  }\n  return rs.join(\"\");\n}\n\n/**\n * Decodes a base64 encoded string to up to len bytes of output.\n * @param {string} s String to decode\n * @param {number} len Maximum output length\n * @returns {!Array.<number>}\n * @inner\n */\nfunction base64_decode(s, len) {\n  var off = 0,\n    slen = s.length,\n    olen = 0,\n    rs = [],\n    c1,\n    c2,\n    c3,\n    c4,\n    o,\n    code;\n  if (len <= 0) throw Error(\"Illegal len: \" + len);\n  while (off < slen - 1 && olen < len) {\n    code = s.charCodeAt(off++);\n    c1 = code < BASE64_INDEX.length ? BASE64_INDEX[code] : -1;\n    code = s.charCodeAt(off++);\n    c2 = code < BASE64_INDEX.length ? BASE64_INDEX[code] : -1;\n    if (c1 == -1 || c2 == -1) break;\n    o = (c1 << 2) >>> 0;\n    o |= (c2 & 0x30) >> 4;\n    rs.push(String.fromCharCode(o));\n    if (++olen >= len || off >= slen) break;\n    code = s.charCodeAt(off++);\n    c3 = code < BASE64_INDEX.length ? BASE64_INDEX[code] : -1;\n    if (c3 == -1) break;\n    o = ((c2 & 0x0f) << 4) >>> 0;\n    o |= (c3 & 0x3c) >> 2;\n    rs.push(String.fromCharCode(o));\n    if (++olen >= len || off >= slen) break;\n    code = s.charCodeAt(off++);\n    c4 = code < BASE64_INDEX.length ? BASE64_INDEX[code] : -1;\n    o = ((c3 & 0x03) << 6) >>> 0;\n    o |= c4;\n    rs.push(String.fromCharCode(o));\n    ++olen;\n  }\n  var res = [];\n  for (off = 0; off < olen; off++) res.push(rs[off].charCodeAt(0));\n  return res;\n}\n\n/**\n * @type {number}\n * @const\n * @inner\n */\nvar BCRYPT_SALT_LEN = 16;\n\n/**\n * @type {number}\n * @const\n * @inner\n */\nvar GENSALT_DEFAULT_LOG2_ROUNDS = 10;\n\n/**\n * @type {number}\n * @const\n * @inner\n */\nvar BLOWFISH_NUM_ROUNDS = 16;\n\n/**\n * @type {number}\n * @const\n * @inner\n */\nvar MAX_EXECUTION_TIME = 100;\n\n/**\n * @type {Array.<number>}\n * @const\n * @inner\n */\nvar P_ORIG = [\n  0x243f6a88, 0x85a308d3, 0x13198a2e, 0x03707344, 0xa4093822, 0x299f31d0,\n  0x082efa98, 0xec4e6c89, 0x452821e6, 0x38d01377, 0xbe5466cf, 0x34e90c6c,\n  0xc0ac29b7, 0xc97c50dd, 0x3f84d5b5, 0xb5470917, 0x9216d5d9, 0x8979fb1b,\n];\n\n/**\n * @type {Array.<number>}\n * @const\n * @inner\n */\nvar S_ORIG = [\n  0xd1310ba6, 0x98dfb5ac, 0x2ffd72db, 0xd01adfb7, 0xb8e1afed, 0x6a267e96,\n  0xba7c9045, 0xf12c7f99, 0x24a19947, 0xb3916cf7, 0x0801f2e2, 0x858efc16,\n  0x636920d8, 0x71574e69, 0xa458fea3, 0xf4933d7e, 0x0d95748f, 0x728eb658,\n  0x718bcd58, 0x82154aee, 0x7b54a41d, 0xc25a59b5, 0x9c30d539, 0x2af26013,\n  0xc5d1b023, 0x286085f0, 0xca417918, 0xb8db38ef, 0x8e79dcb0, 0x603a180e,\n  0x6c9e0e8b, 0xb01e8a3e, 0xd71577c1, 0xbd314b27, 0x78af2fda, 0x55605c60,\n  0xe65525f3, 0xaa55ab94, 0x57489862, 0x63e81440, 0x55ca396a, 0x2aab10b6,\n  0xb4cc5c34, 0x1141e8ce, 0xa15486af, 0x7c72e993, 0xb3ee1411, 0x636fbc2a,\n  0x2ba9c55d, 0x741831f6, 0xce5c3e16, 0x9b87931e, 0xafd6ba33, 0x6c24cf5c,\n  0x7a325381, 0x28958677, 0x3b8f4898, 0x6b4bb9af, 0xc4bfe81b, 0x66282193,\n  0x61d809cc, 0xfb21a991, 0x487cac60, 0x5dec8032, 0xef845d5d, 0xe98575b1,\n  0xdc262302, 0xeb651b88, 0x23893e81, 0xd396acc5, 0x0f6d6ff3, 0x83f44239,\n  0x2e0b4482, 0xa4842004, 0x69c8f04a, 0x9e1f9b5e, 0x21c66842, 0xf6e96c9a,\n  0x670c9c61, 0xabd388f0, 0x6a51a0d2, 0xd8542f68, 0x960fa728, 0xab5133a3,\n  0x6eef0b6c, 0x137a3be4, 0xba3bf050, 0x7efb2a98, 0xa1f1651d, 0x39af0176,\n  0x66ca593e, 0x82430e88, 0x8cee8619, 0x456f9fb4, 0x7d84a5c3, 0x3b8b5ebe,\n  0xe06f75d8, 0x85c12073, 0x401a449f, 0x56c16aa6, 0x4ed3aa62, 0x363f7706,\n  0x1bfedf72, 0x429b023d, 0x37d0d724, 0xd00a1248, 0xdb0fead3, 0x49f1c09b,\n  0x075372c9, 0x80991b7b, 0x25d479d8, 0xf6e8def7, 0xe3fe501a, 0xb6794c3b,\n  0x976ce0bd, 0x04c006ba, 0xc1a94fb6, 0x409f60c4, 0x5e5c9ec2, 0x196a2463,\n  0x68fb6faf, 0x3e6c53b5, 0x1339b2eb, 0x3b52ec6f, 0x6dfc511f, 0x9b30952c,\n  0xcc814544, 0xaf5ebd09, 0xbee3d004, 0xde334afd, 0x660f2807, 0x192e4bb3,\n  0xc0cba857, 0x45c8740f, 0xd20b5f39, 0xb9d3fbdb, 0x5579c0bd, 0x1a60320a,\n  0xd6a100c6, 0x402c7279, 0x679f25fe, 0xfb1fa3cc, 0x8ea5e9f8, 0xdb3222f8,\n  0x3c7516df, 0xfd616b15, 0x2f501ec8, 0xad0552ab, 0x323db5fa, 0xfd238760,\n  0x53317b48, 0x3e00df82, 0x9e5c57bb, 0xca6f8ca0, 0x1a87562e, 0xdf1769db,\n  0xd542a8f6, 0x287effc3, 0xac6732c6, 0x8c4f5573, 0x695b27b0, 0xbbca58c8,\n  0xe1ffa35d, 0xb8f011a0, 0x10fa3d98, 0xfd2183b8, 0x4afcb56c, 0x2dd1d35b,\n  0x9a53e479, 0xb6f84565, 0xd28e49bc, 0x4bfb9790, 0xe1ddf2da, 0xa4cb7e33,\n  0x62fb1341, 0xcee4c6e8, 0xef20cada, 0x36774c01, 0xd07e9efe, 0x2bf11fb4,\n  0x95dbda4d, 0xae909198, 0xeaad8e71, 0x6b93d5a0, 0xd08ed1d0, 0xafc725e0,\n  0x8e3c5b2f, 0x8e7594b7, 0x8ff6e2fb, 0xf2122b64, 0x8888b812, 0x900df01c,\n  0x4fad5ea0, 0x688fc31c, 0xd1cff191, 0xb3a8c1ad, 0x2f2f2218, 0xbe0e1777,\n  0xea752dfe, 0x8b021fa1, 0xe5a0cc0f, 0xb56f74e8, 0x18acf3d6, 0xce89e299,\n  0xb4a84fe0, 0xfd13e0b7, 0x7cc43b81, 0xd2ada8d9, 0x165fa266, 0x80957705,\n  0x93cc7314, 0x211a1477, 0xe6ad2065, 0x77b5fa86, 0xc75442f5, 0xfb9d35cf,\n  0xebcdaf0c, 0x7b3e89a0, 0xd6411bd3, 0xae1e7e49, 0x00250e2d, 0x2071b35e,\n  0x226800bb, 0x57b8e0af, 0x2464369b, 0xf009b91e, 0x5563911d, 0x59dfa6aa,\n  0x78c14389, 0xd95a537f, 0x207d5ba2, 0x02e5b9c5, 0x83260376, 0x6295cfa9,\n  0x11c81968, 0x4e734a41, 0xb3472dca, 0x7b14a94a, 0x1b510052, 0x9a532915,\n  0xd60f573f, 0xbc9bc6e4, 0x2b60a476, 0x81e67400, 0x08ba6fb5, 0x571be91f,\n  0xf296ec6b, 0x2a0dd915, 0xb6636521, 0xe7b9f9b6, 0xff34052e, 0xc5855664,\n  0x53b02d5d, 0xa99f8fa1, 0x08ba4799, 0x6e85076a, 0x4b7a70e9, 0xb5b32944,\n  0xdb75092e, 0xc4192623, 0xad6ea6b0, 0x49a7df7d, 0x9cee60b8, 0x8fedb266,\n  0xecaa8c71, 0x699a17ff, 0x5664526c, 0xc2b19ee1, 0x193602a5, 0x75094c29,\n  0xa0591340, 0xe4183a3e, 0x3f54989a, 0x5b429d65, 0x6b8fe4d6, 0x99f73fd6,\n  0xa1d29c07, 0xefe830f5, 0x4d2d38e6, 0xf0255dc1, 0x4cdd2086, 0x8470eb26,\n  0x6382e9c6, 0x021ecc5e, 0x09686b3f, 0x3ebaefc9, 0x3c971814, 0x6b6a70a1,\n  0x687f3584, 0x52a0e286, 0xb79c5305, 0xaa500737, 0x3e07841c, 0x7fdeae5c,\n  0x8e7d44ec, 0x5716f2b8, 0xb03ada37, 0xf0500c0d, 0xf01c1f04, 0x0200b3ff,\n  0xae0cf51a, 0x3cb574b2, 0x25837a58, 0xdc0921bd, 0xd19113f9, 0x7ca92ff6,\n  0x94324773, 0x22f54701, 0x3ae5e581, 0x37c2dadc, 0xc8b57634, 0x9af3dda7,\n  0xa9446146, 0x0fd0030e, 0xecc8c73e, 0xa4751e41, 0xe238cd99, 0x3bea0e2f,\n  0x3280bba1, 0x183eb331, 0x4e548b38, 0x4f6db908, 0x6f420d03, 0xf60a04bf,\n  0x2cb81290, 0x24977c79, 0x5679b072, 0xbcaf89af, 0xde9a771f, 0xd9930810,\n  0xb38bae12, 0xdccf3f2e, 0x5512721f, 0x2e6b7124, 0x501adde6, 0x9f84cd87,\n  0x7a584718, 0x7408da17, 0xbc9f9abc, 0xe94b7d8c, 0xec7aec3a, 0xdb851dfa,\n  0x63094366, 0xc464c3d2, 0xef1c1847, 0x3215d908, 0xdd433b37, 0x24c2ba16,\n  0x12a14d43, 0x2a65c451, 0x50940002, 0x133ae4dd, 0x71dff89e, 0x10314e55,\n  0x81ac77d6, 0x5f11199b, 0x043556f1, 0xd7a3c76b, 0x3c11183b, 0x5924a509,\n  0xf28fe6ed, 0x97f1fbfa, 0x9ebabf2c, 0x1e153c6e, 0x86e34570, 0xeae96fb1,\n  0x860e5e0a, 0x5a3e2ab3, 0x771fe71c, 0x4e3d06fa, 0x2965dcb9, 0x99e71d0f,\n  0x803e89d6, 0x5266c825, 0x2e4cc978, 0x9c10b36a, 0xc6150eba, 0x94e2ea78,\n  0xa5fc3c53, 0x1e0a2df4, 0xf2f74ea7, 0x361d2b3d, 0x1939260f, 0x19c27960,\n  0x5223a708, 0xf71312b6, 0xebadfe6e, 0xeac31f66, 0xe3bc4595, 0xa67bc883,\n  0xb17f37d1, 0x018cff28, 0xc332ddef, 0xbe6c5aa5, 0x65582185, 0x68ab9802,\n  0xeecea50f, 0xdb2f953b, 0x2aef7dad, 0x5b6e2f84, 0x1521b628, 0x29076170,\n  0xecdd4775, 0x619f1510, 0x13cca830, 0xeb61bd96, 0x0334fe1e, 0xaa0363cf,\n  0xb5735c90, 0x4c70a239, 0xd59e9e0b, 0xcbaade14, 0xeecc86bc, 0x60622ca7,\n  0x9cab5cab, 0xb2f3846e, 0x648b1eaf, 0x19bdf0ca, 0xa02369b9, 0x655abb50,\n  0x40685a32, 0x3c2ab4b3, 0x319ee9d5, 0xc021b8f7, 0x9b540b19, 0x875fa099,\n  0x95f7997e, 0x623d7da8, 0xf837889a, 0x97e32d77, 0x11ed935f, 0x16681281,\n  0x0e358829, 0xc7e61fd6, 0x96dedfa1, 0x7858ba99, 0x57f584a5, 0x1b227263,\n  0x9b83c3ff, 0x1ac24696, 0xcdb30aeb, 0x532e3054, 0x8fd948e4, 0x6dbc3128,\n  0x58ebf2ef, 0x34c6ffea, 0xfe28ed61, 0xee7c3c73, 0x5d4a14d9, 0xe864b7e3,\n  0x42105d14, 0x203e13e0, 0x45eee2b6, 0xa3aaabea, 0xdb6c4f15, 0xfacb4fd0,\n  0xc742f442, 0xef6abbb5, 0x654f3b1d, 0x41cd2105, 0xd81e799e, 0x86854dc7,\n  0xe44b476a, 0x3d816250, 0xcf62a1f2, 0x5b8d2646, 0xfc8883a0, 0xc1c7b6a3,\n  0x7f1524c3, 0x69cb7492, 0x47848a0b, 0x5692b285, 0x095bbf00, 0xad19489d,\n  0x1462b174, 0x23820e00, 0x58428d2a, 0x0c55f5ea, 0x1dadf43e, 0x233f7061,\n  0x3372f092, 0x8d937e41, 0xd65fecf1, 0x6c223bdb, 0x7cde3759, 0xcbee7460,\n  0x4085f2a7, 0xce77326e, 0xa6078084, 0x19f8509e, 0xe8efd855, 0x61d99735,\n  0xa969a7aa, 0xc50c06c2, 0x5a04abfc, 0x800bcadc, 0x9e447a2e, 0xc3453484,\n  0xfdd56705, 0x0e1e9ec9, 0xdb73dbd3, 0x105588cd, 0x675fda79, 0xe3674340,\n  0xc5c43465, 0x713e38d8, 0x3d28f89e, 0xf16dff20, 0x153e21e7, 0x8fb03d4a,\n  0xe6e39f2b, 0xdb83adf7, 0xe93d5a68, 0x948140f7, 0xf64c261c, 0x94692934,\n  0x411520f7, 0x7602d4f7, 0xbcf46b2e, 0xd4a20068, 0xd4082471, 0x3320f46a,\n  0x43b7d4b7, 0x500061af, 0x1e39f62e, 0x97244546, 0x14214f74, 0xbf8b8840,\n  0x4d95fc1d, 0x96b591af, 0x70f4ddd3, 0x66a02f45, 0xbfbc09ec, 0x03bd9785,\n  0x7fac6dd0, 0x31cb8504, 0x96eb27b3, 0x55fd3941, 0xda2547e6, 0xabca0a9a,\n  0x28507825, 0x530429f4, 0x0a2c86da, 0xe9b66dfb, 0x68dc1462, 0xd7486900,\n  0x680ec0a4, 0x27a18dee, 0x4f3ffea2, 0xe887ad8c, 0xb58ce006, 0x7af4d6b6,\n  0xaace1e7c, 0xd3375fec, 0xce78a399, 0x406b2a42, 0x20fe9e35, 0xd9f385b9,\n  0xee39d7ab, 0x3b124e8b, 0x1dc9faf7, 0x4b6d1856, 0x26a36631, 0xeae397b2,\n  0x3a6efa74, 0xdd5b4332, 0x6841e7f7, 0xca7820fb, 0xfb0af54e, 0xd8feb397,\n  0x454056ac, 0xba489527, 0x55533a3a, 0x20838d87, 0xfe6ba9b7, 0xd096954b,\n  0x55a867bc, 0xa1159a58, 0xcca92963, 0x99e1db33, 0xa62a4a56, 0x3f3125f9,\n  0x5ef47e1c, 0x9029317c, 0xfdf8e802, 0x04272f70, 0x80bb155c, 0x05282ce3,\n  0x95c11548, 0xe4c66d22, 0x48c1133f, 0xc70f86dc, 0x07f9c9ee, 0x41041f0f,\n  0x404779a4, 0x5d886e17, 0x325f51eb, 0xd59bc0d1, 0xf2bcc18f, 0x41113564,\n  0x257b7834, 0x602a9c60, 0xdff8e8a3, 0x1f636c1b, 0x0e12b4c2, 0x02e1329e,\n  0xaf664fd1, 0xcad18115, 0x6b2395e0, 0x333e92e1, 0x3b240b62, 0xeebeb922,\n  0x85b2a20e, 0xe6ba0d99, 0xde720c8c, 0x2da2f728, 0xd0127845, 0x95b794fd,\n  0x647d0862, 0xe7ccf5f0, 0x5449a36f, 0x877d48fa, 0xc39dfd27, 0xf33e8d1e,\n  0x0a476341, 0x992eff74, 0x3a6f6eab, 0xf4f8fd37, 0xa812dc60, 0xa1ebddf8,\n  0x991be14c, 0xdb6e6b0d, 0xc67b5510, 0x6d672c37, 0x2765d43b, 0xdcd0e804,\n  0xf1290dc7, 0xcc00ffa3, 0xb5390f92, 0x690fed0b, 0x667b9ffb, 0xcedb7d9c,\n  0xa091cf0b, 0xd9155ea3, 0xbb132f88, 0x515bad24, 0x7b9479bf, 0x763bd6eb,\n  0x37392eb3, 0xcc115979, 0x8026e297, 0xf42e312d, 0x6842ada7, 0xc66a2b3b,\n  0x12754ccc, 0x782ef11c, 0x6a124237, 0xb79251e7, 0x06a1bbe6, 0x4bfb6350,\n  0x1a6b1018, 0x11caedfa, 0x3d25bdd8, 0xe2e1c3c9, 0x44421659, 0x0a121386,\n  0xd90cec6e, 0xd5abea2a, 0x64af674e, 0xda86a85f, 0xbebfe988, 0x64e4c3fe,\n  0x9dbc8057, 0xf0f7c086, 0x60787bf8, 0x6003604d, 0xd1fd8346, 0xf6381fb0,\n  0x7745ae04, 0xd736fccc, 0x83426b33, 0xf01eab71, 0xb0804187, 0x3c005e5f,\n  0x77a057be, 0xbde8ae24, 0x55464299, 0xbf582e61, 0x4e58f48f, 0xf2ddfda2,\n  0xf474ef38, 0x8789bdc2, 0x5366f9c3, 0xc8b38e74, 0xb475f255, 0x46fcd9b9,\n  0x7aeb2661, 0x8b1ddf84, 0x846a0e79, 0x915f95e2, 0x466e598e, 0x20b45770,\n  0x8cd55591, 0xc902de4c, 0xb90bace1, 0xbb8205d0, 0x11a86248, 0x7574a99e,\n  0xb77f19b6, 0xe0a9dc09, 0x662d09a1, 0xc4324633, 0xe85a1f02, 0x09f0be8c,\n  0x4a99a025, 0x1d6efe10, 0x1ab93d1d, 0x0ba5a4df, 0xa186f20f, 0x2868f169,\n  0xdcb7da83, 0x573906fe, 0xa1e2ce9b, 0x4fcd7f52, 0x50115e01, 0xa70683fa,\n  0xa002b5c4, 0x0de6d027, 0x9af88c27, 0x773f8641, 0xc3604c06, 0x61a806b5,\n  0xf0177a28, 0xc0f586e0, 0x006058aa, 0x30dc7d62, 0x11e69ed7, 0x2338ea63,\n  0x53c2dd94, 0xc2c21634, 0xbbcbee56, 0x90bcb6de, 0xebfc7da1, 0xce591d76,\n  0x6f05e409, 0x4b7c0188, 0x39720a3d, 0x7c927c24, 0x86e3725f, 0x724d9db9,\n  0x1ac15bb4, 0xd39eb8fc, 0xed545578, 0x08fca5b5, 0xd83d7cd3, 0x4dad0fc4,\n  0x1e50ef5e, 0xb161e6f8, 0xa28514d9, 0x6c51133c, 0x6fd5c7e7, 0x56e14ec4,\n  0x362abfce, 0xddc6c837, 0xd79a3234, 0x92638212, 0x670efa8e, 0x406000e0,\n  0x3a39ce37, 0xd3faf5cf, 0xabc27737, 0x5ac52d1b, 0x5cb0679e, 0x4fa33742,\n  0xd3822740, 0x99bc9bbe, 0xd5118e9d, 0xbf0f7315, 0xd62d1c7e, 0xc700c47b,\n  0xb78c1b6b, 0x21a19045, 0xb26eb1be, 0x6a366eb4, 0x5748ab2f, 0xbc946e79,\n  0xc6a376d2, 0x6549c2c8, 0x530ff8ee, 0x468dde7d, 0xd5730a1d, 0x4cd04dc6,\n  0x2939bbdb, 0xa9ba4650, 0xac9526e8, 0xbe5ee304, 0xa1fad5f0, 0x6a2d519a,\n  0x63ef8ce2, 0x9a86ee22, 0xc089c2b8, 0x43242ef6, 0xa51e03aa, 0x9cf2d0a4,\n  0x83c061ba, 0x9be96a4d, 0x8fe51550, 0xba645bd6, 0x2826a2f9, 0xa73a3ae1,\n  0x4ba99586, 0xef5562e9, 0xc72fefd3, 0xf752f7da, 0x3f046f69, 0x77fa0a59,\n  0x80e4a915, 0x87b08601, 0x9b09e6ad, 0x3b3ee593, 0xe990fd5a, 0x9e34d797,\n  0x2cf0b7d9, 0x022b8b51, 0x96d5ac3a, 0x017da67d, 0xd1cf3ed6, 0x7c7d2d28,\n  0x1f9f25cf, 0xadf2b89b, 0x5ad6b472, 0x5a88f54c, 0xe029ac71, 0xe019a5e6,\n  0x47b0acfd, 0xed93fa9b, 0xe8d3c48d, 0x283b57cc, 0xf8d56629, 0x79132e28,\n  0x785f0191, 0xed756055, 0xf7960e44, 0xe3d35e8c, 0x15056dd4, 0x88f46dba,\n  0x03a16125, 0x0564f0bd, 0xc3eb9e15, 0x3c9057a2, 0x97271aec, 0xa93a072a,\n  0x1b3f6d9b, 0x1e6321f5, 0xf59c66fb, 0x26dcf319, 0x7533d928, 0xb155fdf5,\n  0x03563482, 0x8aba3cbb, 0x28517711, 0xc20ad9f8, 0xabcc5167, 0xccad925f,\n  0x4de81751, 0x3830dc8e, 0x379d5862, 0x9320f991, 0xea7a90c2, 0xfb3e7bce,\n  0x5121ce64, 0x774fbe32, 0xa8b6e37e, 0xc3293d46, 0x48de5369, 0x6413e680,\n  0xa2ae0810, 0xdd6db224, 0x69852dfd, 0x09072166, 0xb39a460a, 0x6445c0dd,\n  0x586cdecf, 0x1c20c8ae, 0x5bbef7dd, 0x1b588d40, 0xccd2017f, 0x6bb4e3bb,\n  0xdda26a7e, 0x3a59ff45, 0x3e350a44, 0xbcb4cdd5, 0x72eacea8, 0xfa6484bb,\n  0x8d6612ae, 0xbf3c6f47, 0xd29be463, 0x542f5d9e, 0xaec2771b, 0xf64e6370,\n  0x740e0d8d, 0xe75b1357, 0xf8721671, 0xaf537d5d, 0x4040cb08, 0x4eb4e2cc,\n  0x34d2466a, 0x0115af84, 0xe1b00428, 0x95983a1d, 0x06b89fb4, 0xce6ea048,\n  0x6f3f3b82, 0x3520ab82, 0x011a1d4b, 0x277227f8, 0x611560b1, 0xe7933fdc,\n  0xbb3a792b, 0x344525bd, 0xa08839e1, 0x51ce794b, 0x2f32c9b7, 0xa01fbac9,\n  0xe01cc87e, 0xbcc7d1f6, 0xcf0111c3, 0xa1e8aac7, 0x1a908749, 0xd44fbd9a,\n  0xd0dadecb, 0xd50ada38, 0x0339c32a, 0xc6913667, 0x8df9317c, 0xe0b12b4f,\n  0xf79e59b7, 0x43f5bb3a, 0xf2d519ff, 0x27d9459c, 0xbf97222c, 0x15e6fc2a,\n  0x0f91fc71, 0x9b941525, 0xfae59361, 0xceb69ceb, 0xc2a86459, 0x12baa8d1,\n  0xb6c1075e, 0xe3056a0c, 0x10d25065, 0xcb03a442, 0xe0ec6e0e, 0x1698db3b,\n  0x4c98a0be, 0x3278e964, 0x9f1f9532, 0xe0d392df, 0xd3a0342b, 0x8971f21e,\n  0x1b0a7441, 0x4ba3348c, 0xc5be7120, 0xc37632d8, 0xdf359f8d, 0x9b992f2e,\n  0xe60b6f47, 0x0fe3f11d, 0xe54cda54, 0x1edad891, 0xce6279cf, 0xcd3e7e6f,\n  0x1618b166, 0xfd2c1d05, 0x848fd2c5, 0xf6fb2299, 0xf523f357, 0xa6327623,\n  0x93a83531, 0x56cccd02, 0xacf08162, 0x5a75ebb5, 0x6e163697, 0x88d273cc,\n  0xde966292, 0x81b949d0, 0x4c50901b, 0x71c65614, 0xe6c6c7bd, 0x327a140a,\n  0x45e1d006, 0xc3f27b9a, 0xc9aa53fd, 0x62a80f00, 0xbb25bfe2, 0x35bdd2f6,\n  0x71126905, 0xb2040222, 0xb6cbcf7c, 0xcd769c2b, 0x53113ec0, 0x1640e3d3,\n  0x38abbd60, 0x2547adf0, 0xba38209c, 0xf746ce76, 0x77afa1c5, 0x20756060,\n  0x85cbfe4e, 0x8ae88dd8, 0x7aaaf9b0, 0x4cf9aa7e, 0x1948c25c, 0x02fb8a8c,\n  0x01c36ae4, 0xd6ebe1f9, 0x90d4f869, 0xa65cdea0, 0x3f09252d, 0xc208e69f,\n  0xb74e6132, 0xce77e25b, 0x578fdfe3, 0x3ac372e6,\n];\n\n/**\n * @type {Array.<number>}\n * @const\n * @inner\n */\nvar C_ORIG = [\n  0x4f727068, 0x65616e42, 0x65686f6c, 0x64657253, 0x63727944, 0x6f756274,\n];\n\n/**\n * @param {Array.<number>} lr\n * @param {number} off\n * @param {Array.<number>} P\n * @param {Array.<number>} S\n * @returns {Array.<number>}\n * @inner\n */\nfunction _encipher(lr, off, P, S) {\n  // This is our bottleneck: 1714/1905 ticks / 90% - see profile.txt\n  var n,\n    l = lr[off],\n    r = lr[off + 1];\n\n  l ^= P[0];\n\n  /*\n    for (var i=0, k=BLOWFISH_NUM_ROUNDS-2; i<=k;)\n        // Feistel substitution on left word\n        n  = S[l >>> 24],\n        n += S[0x100 | ((l >> 16) & 0xff)],\n        n ^= S[0x200 | ((l >> 8) & 0xff)],\n        n += S[0x300 | (l & 0xff)],\n        r ^= n ^ P[++i],\n        // Feistel substitution on right word\n        n  = S[r >>> 24],\n        n += S[0x100 | ((r >> 16) & 0xff)],\n        n ^= S[0x200 | ((r >> 8) & 0xff)],\n        n += S[0x300 | (r & 0xff)],\n        l ^= n ^ P[++i];\n    */\n\n  //The following is an unrolled version of the above loop.\n  //Iteration 0\n  n = S[l >>> 24];\n  n += S[0x100 | ((l >> 16) & 0xff)];\n  n ^= S[0x200 | ((l >> 8) & 0xff)];\n  n += S[0x300 | (l & 0xff)];\n  r ^= n ^ P[1];\n  n = S[r >>> 24];\n  n += S[0x100 | ((r >> 16) & 0xff)];\n  n ^= S[0x200 | ((r >> 8) & 0xff)];\n  n += S[0x300 | (r & 0xff)];\n  l ^= n ^ P[2];\n  //Iteration 1\n  n = S[l >>> 24];\n  n += S[0x100 | ((l >> 16) & 0xff)];\n  n ^= S[0x200 | ((l >> 8) & 0xff)];\n  n += S[0x300 | (l & 0xff)];\n  r ^= n ^ P[3];\n  n = S[r >>> 24];\n  n += S[0x100 | ((r >> 16) & 0xff)];\n  n ^= S[0x200 | ((r >> 8) & 0xff)];\n  n += S[0x300 | (r & 0xff)];\n  l ^= n ^ P[4];\n  //Iteration 2\n  n = S[l >>> 24];\n  n += S[0x100 | ((l >> 16) & 0xff)];\n  n ^= S[0x200 | ((l >> 8) & 0xff)];\n  n += S[0x300 | (l & 0xff)];\n  r ^= n ^ P[5];\n  n = S[r >>> 24];\n  n += S[0x100 | ((r >> 16) & 0xff)];\n  n ^= S[0x200 | ((r >> 8) & 0xff)];\n  n += S[0x300 | (r & 0xff)];\n  l ^= n ^ P[6];\n  //Iteration 3\n  n = S[l >>> 24];\n  n += S[0x100 | ((l >> 16) & 0xff)];\n  n ^= S[0x200 | ((l >> 8) & 0xff)];\n  n += S[0x300 | (l & 0xff)];\n  r ^= n ^ P[7];\n  n = S[r >>> 24];\n  n += S[0x100 | ((r >> 16) & 0xff)];\n  n ^= S[0x200 | ((r >> 8) & 0xff)];\n  n += S[0x300 | (r & 0xff)];\n  l ^= n ^ P[8];\n  //Iteration 4\n  n = S[l >>> 24];\n  n += S[0x100 | ((l >> 16) & 0xff)];\n  n ^= S[0x200 | ((l >> 8) & 0xff)];\n  n += S[0x300 | (l & 0xff)];\n  r ^= n ^ P[9];\n  n = S[r >>> 24];\n  n += S[0x100 | ((r >> 16) & 0xff)];\n  n ^= S[0x200 | ((r >> 8) & 0xff)];\n  n += S[0x300 | (r & 0xff)];\n  l ^= n ^ P[10];\n  //Iteration 5\n  n = S[l >>> 24];\n  n += S[0x100 | ((l >> 16) & 0xff)];\n  n ^= S[0x200 | ((l >> 8) & 0xff)];\n  n += S[0x300 | (l & 0xff)];\n  r ^= n ^ P[11];\n  n = S[r >>> 24];\n  n += S[0x100 | ((r >> 16) & 0xff)];\n  n ^= S[0x200 | ((r >> 8) & 0xff)];\n  n += S[0x300 | (r & 0xff)];\n  l ^= n ^ P[12];\n  //Iteration 6\n  n = S[l >>> 24];\n  n += S[0x100 | ((l >> 16) & 0xff)];\n  n ^= S[0x200 | ((l >> 8) & 0xff)];\n  n += S[0x300 | (l & 0xff)];\n  r ^= n ^ P[13];\n  n = S[r >>> 24];\n  n += S[0x100 | ((r >> 16) & 0xff)];\n  n ^= S[0x200 | ((r >> 8) & 0xff)];\n  n += S[0x300 | (r & 0xff)];\n  l ^= n ^ P[14];\n  //Iteration 7\n  n = S[l >>> 24];\n  n += S[0x100 | ((l >> 16) & 0xff)];\n  n ^= S[0x200 | ((l >> 8) & 0xff)];\n  n += S[0x300 | (l & 0xff)];\n  r ^= n ^ P[15];\n  n = S[r >>> 24];\n  n += S[0x100 | ((r >> 16) & 0xff)];\n  n ^= S[0x200 | ((r >> 8) & 0xff)];\n  n += S[0x300 | (r & 0xff)];\n  l ^= n ^ P[16];\n\n  lr[off] = r ^ P[BLOWFISH_NUM_ROUNDS + 1];\n  lr[off + 1] = l;\n  return lr;\n}\n\n/**\n * @param {Array.<number>} data\n * @param {number} offp\n * @returns {{key: number, offp: number}}\n * @inner\n */\nfunction _streamtoword(data, offp) {\n  for (var i = 0, word = 0; i < 4; ++i)\n    (word = (word << 8) | (data[offp] & 0xff)),\n      (offp = (offp + 1) % data.length);\n  return { key: word, offp: offp };\n}\n\n/**\n * @param {Array.<number>} key\n * @param {Array.<number>} P\n * @param {Array.<number>} S\n * @inner\n */\nfunction _key(key, P, S) {\n  var offset = 0,\n    lr = [0, 0],\n    plen = P.length,\n    slen = S.length,\n    sw;\n  for (var i = 0; i < plen; i++)\n    (sw = _streamtoword(key, offset)),\n      (offset = sw.offp),\n      (P[i] = P[i] ^ sw.key);\n  for (i = 0; i < plen; i += 2)\n    (lr = _encipher(lr, 0, P, S)), (P[i] = lr[0]), (P[i + 1] = lr[1]);\n  for (i = 0; i < slen; i += 2)\n    (lr = _encipher(lr, 0, P, S)), (S[i] = lr[0]), (S[i + 1] = lr[1]);\n}\n\n/**\n * Expensive key schedule Blowfish.\n * @param {Array.<number>} data\n * @param {Array.<number>} key\n * @param {Array.<number>} P\n * @param {Array.<number>} S\n * @inner\n */\nfunction _ekskey(data, key, P, S) {\n  var offp = 0,\n    lr = [0, 0],\n    plen = P.length,\n    slen = S.length,\n    sw;\n  for (var i = 0; i < plen; i++)\n    (sw = _streamtoword(key, offp)), (offp = sw.offp), (P[i] = P[i] ^ sw.key);\n  offp = 0;\n  for (i = 0; i < plen; i += 2)\n    (sw = _streamtoword(data, offp)),\n      (offp = sw.offp),\n      (lr[0] ^= sw.key),\n      (sw = _streamtoword(data, offp)),\n      (offp = sw.offp),\n      (lr[1] ^= sw.key),\n      (lr = _encipher(lr, 0, P, S)),\n      (P[i] = lr[0]),\n      (P[i + 1] = lr[1]);\n  for (i = 0; i < slen; i += 2)\n    (sw = _streamtoword(data, offp)),\n      (offp = sw.offp),\n      (lr[0] ^= sw.key),\n      (sw = _streamtoword(data, offp)),\n      (offp = sw.offp),\n      (lr[1] ^= sw.key),\n      (lr = _encipher(lr, 0, P, S)),\n      (S[i] = lr[0]),\n      (S[i + 1] = lr[1]);\n}\n\n/**\n * Internaly crypts a string.\n * @param {Array.<number>} b Bytes to crypt\n * @param {Array.<number>} salt Salt bytes to use\n * @param {number} rounds Number of rounds\n * @param {function(Error, Array.<number>=)=} callback Callback receiving the error, if any, and the resulting bytes. If\n *  omitted, the operation will be performed synchronously.\n *  @param {function(number)=} progressCallback Callback called with the current progress\n * @returns {!Array.<number>|undefined} Resulting bytes if callback has been omitted, otherwise `undefined`\n * @inner\n */\nfunction _crypt(b, salt, rounds, callback, progressCallback) {\n  var cdata = C_ORIG.slice(),\n    clen = cdata.length,\n    err;\n\n  // Validate\n  if (rounds < 4 || rounds > 31) {\n    err = Error(\"Illegal number of rounds (4-31): \" + rounds);\n    if (callback) {\n      nextTick(callback.bind(this, err));\n      return;\n    } else throw err;\n  }\n  if (salt.length !== BCRYPT_SALT_LEN) {\n    err = Error(\n      \"Illegal salt length: \" + salt.length + \" != \" + BCRYPT_SALT_LEN,\n    );\n    if (callback) {\n      nextTick(callback.bind(this, err));\n      return;\n    } else throw err;\n  }\n  rounds = (1 << rounds) >>> 0;\n\n  var P,\n    S,\n    i = 0,\n    j;\n\n  //Use typed arrays when available - huge speedup!\n  if (typeof Int32Array === \"function\") {\n    P = new Int32Array(P_ORIG);\n    S = new Int32Array(S_ORIG);\n  } else {\n    P = P_ORIG.slice();\n    S = S_ORIG.slice();\n  }\n\n  _ekskey(salt, b, P, S);\n\n  /**\n   * Calcualtes the next round.\n   * @returns {Array.<number>|undefined} Resulting array if callback has been omitted, otherwise `undefined`\n   * @inner\n   */\n  function next() {\n    if (progressCallback) progressCallback(i / rounds);\n    if (i < rounds) {\n      var start = Date.now();\n      for (; i < rounds; ) {\n        i = i + 1;\n        _key(b, P, S);\n        _key(salt, P, S);\n        if (Date.now() - start > MAX_EXECUTION_TIME) break;\n      }\n    } else {\n      for (i = 0; i < 64; i++)\n        for (j = 0; j < clen >> 1; j++) _encipher(cdata, j << 1, P, S);\n      var ret = [];\n      for (i = 0; i < clen; i++)\n        ret.push(((cdata[i] >> 24) & 0xff) >>> 0),\n          ret.push(((cdata[i] >> 16) & 0xff) >>> 0),\n          ret.push(((cdata[i] >> 8) & 0xff) >>> 0),\n          ret.push((cdata[i] & 0xff) >>> 0);\n      if (callback) {\n        callback(null, ret);\n        return;\n      } else return ret;\n    }\n    if (callback) nextTick(next);\n  }\n\n  // Async\n  if (typeof callback !== \"undefined\") {\n    next();\n\n    // Sync\n  } else {\n    var res;\n    while (true) if (typeof (res = next()) !== \"undefined\") return res || [];\n  }\n}\n\n/**\n * Internally hashes a password.\n * @param {string} password Password to hash\n * @param {?string} salt Salt to use, actually never null\n * @param {function(Error, string=)=} callback Callback receiving the error, if any, and the resulting hash. If omitted,\n *  hashing is performed synchronously.\n *  @param {function(number)=} progressCallback Callback called with the current progress\n * @returns {string|undefined} Resulting hash if callback has been omitted, otherwise `undefined`\n * @inner\n */\nfunction _hash(password, salt, callback, progressCallback) {\n  var err;\n  if (typeof password !== \"string\" || typeof salt !== \"string\") {\n    err = Error(\"Invalid string / salt: Not a string\");\n    if (callback) {\n      nextTick(callback.bind(this, err));\n      return;\n    } else throw err;\n  }\n\n  // Validate the salt\n  var minor, offset;\n  if (salt.charAt(0) !== \"$\" || salt.charAt(1) !== \"2\") {\n    err = Error(\"Invalid salt version: \" + salt.substring(0, 2));\n    if (callback) {\n      nextTick(callback.bind(this, err));\n      return;\n    } else throw err;\n  }\n  if (salt.charAt(2) === \"$\") (minor = String.fromCharCode(0)), (offset = 3);\n  else {\n    minor = salt.charAt(2);\n    if (\n      (minor !== \"a\" && minor !== \"b\" && minor !== \"y\") ||\n      salt.charAt(3) !== \"$\"\n    ) {\n      err = Error(\"Invalid salt revision: \" + salt.substring(2, 4));\n      if (callback) {\n        nextTick(callback.bind(this, err));\n        return;\n      } else throw err;\n    }\n    offset = 4;\n  }\n\n  // Extract number of rounds\n  if (salt.charAt(offset + 2) > \"$\") {\n    err = Error(\"Missing salt rounds\");\n    if (callback) {\n      nextTick(callback.bind(this, err));\n      return;\n    } else throw err;\n  }\n  var r1 = parseInt(salt.substring(offset, offset + 1), 10) * 10,\n    r2 = parseInt(salt.substring(offset + 1, offset + 2), 10),\n    rounds = r1 + r2,\n    real_salt = salt.substring(offset + 3, offset + 25);\n  password += minor >= \"a\" ? \"\\x00\" : \"\";\n\n  var passwordb = utf8Array(password),\n    saltb = base64_decode(real_salt, BCRYPT_SALT_LEN);\n\n  /**\n   * Finishes hashing.\n   * @param {Array.<number>} bytes Byte array\n   * @returns {string}\n   * @inner\n   */\n  function finish(bytes) {\n    var res = [];\n    res.push(\"$2\");\n    if (minor >= \"a\") res.push(minor);\n    res.push(\"$\");\n    if (rounds < 10) res.push(\"0\");\n    res.push(rounds.toString());\n    res.push(\"$\");\n    res.push(base64_encode(saltb, saltb.length));\n    res.push(base64_encode(bytes, C_ORIG.length * 4 - 1));\n    return res.join(\"\");\n  }\n\n  // Sync\n  if (typeof callback == \"undefined\")\n    return finish(_crypt(passwordb, saltb, rounds));\n  // Async\n  else {\n    _crypt(\n      passwordb,\n      saltb,\n      rounds,\n      function (err, bytes) {\n        if (err) callback(err, null);\n        else callback(null, finish(bytes));\n      },\n      progressCallback,\n    );\n  }\n}\n\n/**\n * Encodes a byte array to base64 with up to len bytes of input, using the custom bcrypt alphabet.\n * @function\n * @param {!Array.<number>} bytes Byte array\n * @param {number} length Maximum input length\n * @returns {string}\n */\nexport function encodeBase64(bytes, length) {\n  return base64_encode(bytes, length);\n}\n\n/**\n * Decodes a base64 encoded string to up to len bytes of output, using the custom bcrypt alphabet.\n * @function\n * @param {string} string String to decode\n * @param {number} length Maximum output length\n * @returns {!Array.<number>}\n */\nexport function decodeBase64(string, length) {\n  return base64_decode(string, length);\n}\n\nexport default {\n  setRandomFallback,\n  genSaltSync,\n  genSalt,\n  hashSync,\n  hash,\n  compareSync,\n  compare,\n  getRounds,\n  getSalt,\n  truncates,\n  encodeBase64,\n  decodeBase64,\n};\n", "import type { D1Database } from '@cloudflare/workers-types';\nimport bcrypt from 'bcryptjs';\n\nexport interface User {\n  id: number;\n  email: string;\n  name: string;\n  password?: string;\n}\n\nexport class UserStorage {\n  constructor(private db: D1Database) {}\n\n  async initializeUsers(): Promise<void> {\n    try {\n      await this.db.prepare(`\n        CREATE TABLE IF NOT EXISTS users (\n          id INTEGER PRIMARY KEY AUTOINCREMENT,\n          email TEXT UNIQUE NOT NULL,\n          password TEXT, -- Nullable for social logins\n          name TEXT NOT NULL,\n          role TEXT DEFAULT 'customer' NOT NULL,\n          provider TEXT,\n          provider_id TEXT,\n          created_at TEXT NOT NULL,\n          updated_at TEXT NOT NULL\n        )\n      `).run();\n    } catch (error) {\n      console.error('Failed to initialize users table:', error);\n      throw new Error('Database initialization failed.');\n    }\n  }\n\n    async createUser(email: string, password: string, name: string): Promise<User> {\n    const hashedPassword = bcrypt.hashSync(password, 10);\n    const now = new Date().toISOString();\n    try {\n      const result = await this.db.prepare(`\n        INSERT INTO users (email, name, password)\n        VALUES (?, ?, ?)\n      `).bind(email, name, hashedPassword).run();\n\n      const userId = result.meta.last_row_id;\n      if (!userId) {\n        throw new Error('Failed to get user ID after creation.');\n      }\n\n      const newUser = await this.getUserById(userId);\n      if (!newUser) {\n        throw new Error('Could not retrieve newly created user.');\n      }\n      return newUser;\n\n    } catch (error) {\n      console.error('Failed to create user:', error);\n      throw error; // Re-throw to be handled by the caller\n    }\n  }\n\n  async getUserByEmail(email: string): Promise<User | null> {\n    try {\n      const user = await this.db.prepare(\n        'SELECT * FROM users WHERE email = ?'\n      ).bind(email).first<User>();\n      return user || null;\n    } catch (error) {\n      console.error('Failed to get user by email:', error);\n      return null;\n    }\n  }\n\n    async validateUser(email: string, password: string): Promise<Omit<User, 'password'> | null> {\n    try {\n      const user = await this.getUserByEmail(email);\n      if (user && user.password && bcrypt.compareSync(password, user.password)) {\n        const { password: _, ...userWithoutPassword } = user;\n        return userWithoutPassword;\n      }\n      return null;\n    } catch (error) {\n      console.error('Failed to validate user:', error);\n      return null;\n    }\n  }\n\n  async getUserById(id: number): Promise<User | null> {\n    try {\n      const user = await this.db.prepare(\n        'SELECT * FROM users WHERE id = ?'\n      ).bind(id).first<User>();\n      return user || null;\n    } catch (error) {\n      console.error('Failed to get user by ID:', error);\n      return null;\n    }\n  }\n}\n", "import { TicketStorage, Env } from '../../../lib/db';\n\ninterface MessagePayload {\n  content?: string;\n  message?: string;\n  customerEmail?: string;\n  customerName?: string;\n  isAdmin?: boolean;\n}\nimport { UserStorage } from '../../../lib/user-storage';\nimport type { D1Database } from '@cloudflare/workers-types';\n\nfunction json(data: any, status = 200) {\n  return new Response(JSON.stringify(data), {\n    status,\n    headers: {\n      'Content-Type': 'application/json',\n      'Access-Control-Allow-Origin': '*',\n    },\n  });\n}\n\nexport const onRequestPost = async ({ request, params, env }: { request: Request; params: { id: string }; env: Env }) => {\n  try {\n    const ticketId = Number(params.id);\n    // If EXPRESS_API_BASE is configured, proxy the request to Express (preserves persistence and auth via cookies)\n    const expressBase: string | undefined = env?.EXPRESS_API_BASE;\n    if (expressBase) {\n      const base = expressBase.replace(/\\/$/, \"\");\n      const url = `${base}/api/tickets/${ticketId}/messages`;\n      const headers: Record<string, string> = {};\n      const cookie = request.headers.get('cookie');\n      const ct = request.headers.get('content-type');\n      const auth = request.headers.get('authorization');\n      if (cookie) headers['cookie'] = cookie;\n      if (ct) headers['content-type'] = ct;\n      if (auth) headers['authorization'] = auth;\n      const proxied = await fetch(url, {\n        method: 'POST',\n        headers,\n        body: request.body,\n        redirect: 'manual',\n      });\n      // Rewrite Set-Cookie to scope to current host\n      const respHeaders = new Headers(proxied.headers);\n      const setCookie = respHeaders.get('set-cookie');\n      if (setCookie) {\n        const rewritten = setCookie.replace(/;\\s*Domain=[^;]+/i, '');\n        respHeaders.delete('set-cookie');\n        respHeaders.append('set-cookie', rewritten);\n      }\n      return new Response(proxied.body, { status: proxied.status, headers: respHeaders });\n    }\n    // Robust body parsing: JSON -> FormData -> Text\n    let content: string | undefined;\n    let customerEmail: string | undefined;\n    let customerName: string | undefined;\n    let isAdmin: boolean | undefined;\n    let attachmentData: string | undefined;\n\n    const ct = request.headers.get('content-type') || '';\n    try {\n      if (ct.includes('application/json')) {\n        const body = await request.json() as MessagePayload;\n        content = body?.content ?? body?.message;\n        customerEmail = body?.customerEmail;\n        customerName = body?.customerName;\n        isAdmin = !!body?.isAdmin;\n      } else if (ct.includes('multipart/form-data')) {\n        const form = await request.formData();\n        const raw = form.get('content') ?? form.get('message');\n        content = typeof raw === 'string' ? raw : undefined;\n        const ce = form.get('customerEmail');\n        customerEmail = typeof ce === 'string' ? ce : undefined;\n        const cn = form.get('customerName');\n        customerName = typeof cn === 'string' ? cn : undefined;\n        const ia = form.get('isAdmin');\n        isAdmin = typeof ia === 'string' ? ia === 'true' : false;\n        \n        // Process file attachments\n        const attachments: Array<{name: string; type: string; size: number}> = [];\n        for (const [key, value] of form.entries()) {\n          if (key.startsWith('attachment_') && value instanceof File) {\n            attachments.push({\n              name: value.name,\n              type: value.type,\n              size: value.size\n            });\n          }\n        }\n        \n        // Store attachment metadata as JSON string\n        if (attachments.length > 0) {\n          content = content || '[File attachment]';\n          attachmentData = JSON.stringify(attachments);\n        }\n      } else {\n        // Try JSON first, then text fallback\n        try {\n          const body = await request.json() as MessagePayload;\n          content = body?.content ?? body?.message;\n          customerEmail = body?.customerEmail;\n          customerName = body?.customerName;\n          isAdmin = !!body?.isAdmin;\n        } catch {\n          const text = await request.text();\n          // If plain text, treat as content\n          content = text || undefined;\n        }\n      }\n    } catch {\n      // As last resort, try reading text\n      const text = await request.text();\n      content = text || undefined;\n    }\n\n    content = typeof content === 'string' ? content.trim() : content;\n    \n    // Allow empty content if there are attachments (files/images)\n    const hasAttachments = request.headers.get('content-type')?.includes('multipart/form-data');\n    if (!content && !hasAttachments) {\n      return json({ success: false, message: 'Missing content' }, 400);\n    }\n    \n    // Set default content for attachment-only messages\n    if (!content && hasAttachments) {\n      content = '[File attachment]';\n    }\n\n    const storage = new TicketStorage(env.DB);\n    const ticket = await storage.getTicketById(ticketId);\n    // Degrade to 200 to prevent client hard-failures; keep informative payload\n    if (!ticket) return json({ success: false, message: 'Ticket not found' }, 200);\n\n    let finalSenderName = customerName;\n    \n    // If we don't have customerName but have customerEmail, try to fetch from user storage\n    if (!customerName && customerEmail && !isAdmin) {\n      try {\n        const userStorage = new UserStorage(env.DB as D1Database);\n        await userStorage.initializeUsers();\n        const user = await userStorage.getUserByEmail(customerEmail);\n        if (user) {\n          finalSenderName = user.name;\n        }\n      } catch (error) {\n        console.error('Failed to fetch user name for message:', error);\n      }\n    }\n\n    const msg = await storage.addTicketMessage({\n      ticket_id: ticketId,\n      message: content || '[File attachment]',\n      is_from_customer: !isAdmin,\n      sender_name: finalSenderName || (isAdmin ? 'Admin' : ticket.customer_name),\n      sender_email: customerEmail || (isAdmin ? undefined : ticket.customer_email),\n      attachments: attachmentData,\n    });\n\n    return json({ success: true, message: msg });\n  } catch (error) {\n    console.error('Failed to add message:', error);\n    const message = error instanceof Error ? error.message : 'An unknown error occurred';\n    return json({ success: false, message }, 500);\n  }\n};\n\nexport const onRequestGet = async ({ request, params, env }: { request: Request; params: { id: string }; env: Env }) => {\n  const ticketId = Number(params.id);\n  // If EXPRESS_API_BASE is configured, proxy the GET to Express to read from DB\n  const expressBase: string | undefined = env?.EXPRESS_API_BASE;\n  if (expressBase) {\n    const base = expressBase.replace(/\\/$/, \"\");\n    const url = `${base}/api/tickets/${ticketId}/messages`;\n    const headers: Record<string, string> = {};\n    const cookie = request.headers.get('cookie');\n    const auth = request.headers.get('authorization');\n    if (cookie) headers['cookie'] = cookie;\n    if (auth) headers['authorization'] = auth;\n    const proxied = await fetch(url, { headers, redirect: 'manual' });\n    const respHeaders = new Headers(proxied.headers);\n    const setCookie = respHeaders.get('set-cookie');\n    if (setCookie) {\n      const rewritten = setCookie.replace(/;\\s*Domain=[^;]+/i, '');\n      respHeaders.delete('set-cookie');\n      respHeaders.append('set-cookie', rewritten);\n    }\n    return new Response(proxied.body, { status: proxied.status, headers: respHeaders });\n  }\n\n  const storage = new TicketStorage(env.DB);\n  const messages = await storage.getTicketMessages(ticketId);\n  // Map to admin UI shape\n  const mapped = messages.map((m) => ({\n    id: m.id,\n    ticketId: m.ticket_id,\n    content: m.message,\n    isAdmin: !m.is_from_customer,\n    authorName: m.sender_name,\n    createdAt: m.created_at,\n    attachments: [],\n  }));\n  return json(mapped);\n};\n\nexport const onRequestOptions = async () => {\n  return new Response(null, {\n    headers: {\n      'Access-Control-Allow-Origin': '*',\n      'Access-Control-Allow-Methods': 'GET, POST, OPTIONS',\n      'Access-Control-Allow-Headers': 'Content-Type'\n    }\n  });\n};\n", "// Update only the status of a ticket: /api/tickets/:id/status\n\nfunction getStore() {\n  const s: any = (globalThis as any).__TICKET_STORE__;\n  if (!s) {\n    (globalThis as any).__TICKET_STORE__ = { tickets: [], messages: new Map(), seq: 1, msgSeq: 1 };\n  }\n  return (globalThis as any).__TICKET_STORE__ as {\n    tickets: any[];\n    messages: Map<number, any[]>;\n    seq: number;\n    msgSeq: number;\n  };\n}\n\nfunction json(data: any, status = 200) {\n  return new Response(JSON.stringify(data), {\n    status,\n    headers: {\n      'Content-Type': 'application/json',\n      'Access-Control-Allow-Origin': '*',\n    },\n  });\n}\n\nfunction toInternalStatus(input: string) {\n  // UI uses: open | in_progress | closed\n  // Store uses: open | in-progress | resolved | closed\n  if (input === 'in_progress') return 'in-progress';\n  if (input === 'closed') return 'closed';\n  return input || 'open';\n}\n\nexport const onRequestPut = async ({ request, params, env }: any) => {\n  try {\n    const ticketId = Number(params.id);\n    const expressBase: string | undefined = env?.EXPRESS_API_BASE;\n    if (expressBase) {\n      const base = expressBase.replace(/\\/$/, \"\");\n      const url = `${base}/api/tickets/${ticketId}/status`;\n      const headers: Record<string, string> = {};\n      const cookie = request.headers.get('cookie');\n      const ct = request.headers.get('content-type');\n      const auth = request.headers.get('authorization');\n      if (cookie) headers['cookie'] = cookie;\n      if (ct) headers['content-type'] = ct;\n      if (auth) headers['authorization'] = auth;\n      const proxied = await fetch(url, { method: 'PUT', headers, body: request.body, redirect: 'manual' });\n      const respHeaders = new Headers(proxied.headers);\n      const setCookie = respHeaders.get('set-cookie');\n      if (setCookie) {\n        const rewritten = setCookie.replace(/;\\s*Domain=[^;]+/i, '');\n        respHeaders.delete('set-cookie');\n        respHeaders.append('set-cookie', rewritten);\n      }\n      return new Response(proxied.body, { status: proxied.status, headers: respHeaders });\n    }\n    const body = await request.json().catch(() => ({}));\n    const status = body?.status;\n    if (!status) return json({ success: false, message: 'Missing status' }, 400);\n\n    const store = getStore();\n    const idx = store.tickets.findIndex((t) => t.id === ticketId);\n    if (idx === -1) return json({ success: false, message: 'Ticket not found' }, 404);\n\n    const now = new Date().toISOString();\n    store.tickets[idx] = {\n      ...store.tickets[idx],\n      status: toInternalStatus(status),\n      updated_at: now,\n    };\n\n    return json({ success: true, ticket: store.tickets[idx] });\n  } catch (e) {\n    return json({ success: false, message: 'Failed to update status' }, 500);\n  }\n};\n\nexport const onRequestOptions = async () => {\n  return new Response(null, {\n    headers: {\n      'Access-Control-Allow-Origin': '*',\n      'Access-Control-Allow-Methods': 'PUT, OPTIONS',\n      'Access-Control-Allow-Headers': 'Content-Type',\n    },\n  });\n};\n", "// Cloudflare Pages Function: /api/user/[id]/purchase-status\n// Handles user purchase status retrieval\n\nimport type { PagesFunction } from '@cloudflare/workers-types';\nimport { Env } from '../../../lib/context';\n\nfunction json(data: any, status = 200) {\n  return new Response(JSON.stringify(data), {\n    status,\n    headers: {\n      'Content-Type': 'application/json',\n      'Access-Control-Allow-Origin': '*',\n      'Access-Control-Allow-Methods': 'GET, OPTIONS',\n      'Access-Control-Allow-Headers': 'Content-Type, Authorization'\n    },\n  });\n}\n\nexport const onRequestGet: PagesFunction<Env> = async ({ request, params, env }) => {\n  try {\n    const userId = params.id as string;\n    const authHeader = request.headers.get('Authorization');\n    \n    if (!authHeader || !authHeader.startsWith('Bearer ')) {\n      return json({\n        hasPurchased: false,\n        totalSpent: '0.00',\n        completedOrders: 0,\n        lastPurchaseDate: null\n      });\n    }\n\n    const token = authHeader.substring(7);\n    \n    // Handle demo-jwt-token or jwt-token-1-* format\n    if (token === 'demo-jwt-token' || (token.startsWith('jwt-token-') && token.split('-')[2] === '1')) {\n      return json({\n        hasPurchased: true,\n        totalSpent: '29.99',\n        completedOrders: 1,\n        lastPurchaseDate: Date.now()\n      });\n    }\n    \n    // Check database for real customer purchases\n    if (!env.DB) {\n      return json({\n        hasPurchased: false,\n        totalSpent: '0.00',\n        completedOrders: 0,\n        lastPurchaseDate: null\n      });\n    }\n\n    try {\n      // First check users table (for registered customers)\n      const user = await env.DB.prepare(`\n        SELECT id, extension_activated, is_premium\n        FROM users WHERE id = ?\n      `).bind(parseInt(userId)).first();\n\n      let customer = null;\n      let hasPremiumStatus = false;\n      let hasExtensionActivated = false;\n\n      if (user) {\n        hasPremiumStatus = user.is_premium === 1;\n        hasExtensionActivated = user.extension_activated === 1;\n        console.log('User found:', userId, 'Premium:', hasPremiumStatus, 'Extension:', hasExtensionActivated);\n      } else {\n        // Fallback to customers table\n        customer = await env.DB.prepare(`\n          SELECT id, extension_activated, is_premium\n          FROM customers WHERE id = ?\n        `).bind(parseInt(userId)).first();\n\n        if (customer) {\n          hasPremiumStatus = customer.is_premium === 1;\n          hasExtensionActivated = customer.extension_activated === 1;\n          console.log('Customer found:', userId, 'Premium:', hasPremiumStatus, 'Extension:', hasExtensionActivated);\n        }\n      }\n\n      if (!user && !customer) {\n        return json({\n          hasPurchased: false,\n          totalSpent: '0.00',\n          completedOrders: 0,\n          lastPurchaseDate: null\n        });\n      }\n\n      // Check completed orders with correct column names\n      const orderStats = await env.DB.prepare(`\n        SELECT COUNT(*) as completedOrders, \n               SUM(final_amount) as totalPaid,\n               MAX(completed_at) as lastPurchaseDate\n        FROM orders \n        WHERE customer_id = ? AND status = 'completed' AND final_amount > 0\n      `).bind(parseInt(userId)).first();\n\n      const completedOrders = Number(orderStats?.completedOrders || 0);\n      const totalPaid = String(orderStats?.totalPaid || '0.00');\n      const lastPurchaseDate = orderStats?.lastPurchaseDate;\n\n      const hasPurchased = hasPremiumStatus && hasExtensionActivated;\n\n      return json({\n        hasPurchased,\n        totalSpent: totalPaid,\n        completedOrders,\n        lastPurchaseDate: lastPurchaseDate ? new Date(String(lastPurchaseDate)).getTime() : null\n      });\n\n    } catch (dbError) {\n      console.error('Database error in purchase-status:', dbError);\n      return json({\n        hasPurchased: false,\n        totalSpent: '0.00',\n        completedOrders: 0,\n        lastPurchaseDate: null\n      });\n    }\n    \n  } catch (error: any) {\n    return json({ \n      error: error.message \n    }, 500);\n  }\n};\n", "interface Env {\n  DB: D1Database;\n}\n\nexport const onRequestGet: PagesFunction<Env> = async (context) => {\n  try {\n    const { params } = context;\n    const userId = params.userId as string;\n\n    if (!userId) {\n      return new Response(JSON.stringify({ error: 'User ID is required' }), {\n        status: 400,\n        headers: { 'Content-Type': 'application/json' }\n      });\n    }\n\n    // Fetch user invoices from database with correct user information\n    const invoicesQuery = `\n      SELECT \n        i.id,\n        i.invoiceNumber,\n        i.orderId,\n        i.amount,\n        i.currency,\n        i.taxAmount,\n        i.status,\n        i.invoiceDate,\n        i.dueDate,\n        i.paidAt,\n        i.createdAt,\n        o.productId,\n        o.paymentMethod,\n        u.name as customerName,\n        u.email as customerEmail\n      FROM invoices i\n      LEFT JOIN orders o ON i.orderId = o.id\n      LEFT JOIN users u ON o.customerEmail = u.email\n      WHERE u.id = ? \n      ORDER BY i.createdAt DESC\n    `;\n\n    const invoicesResult = await context.env.DB.prepare(invoicesQuery).bind(userId).all();\n    \n    return new Response(JSON.stringify(invoicesResult.results || []), {\n      status: 200,\n      headers: { \n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*',\n        'Access-Control-Allow-Methods': 'GET, OPTIONS',\n        'Access-Control-Allow-Headers': 'Content-Type'\n      }\n    });\n\n  } catch (error) {\n    console.error('Error fetching user invoices:', error);\n    return new Response(JSON.stringify({ error: 'Failed to fetch invoices' }), {\n      status: 500,\n      headers: { \n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*'\n      }\n    });\n  }\n};\n\nexport const onRequestOptions: PagesFunction = async () => {\n  return new Response(null, {\n    status: 200,\n    headers: {\n      'Access-Control-Allow-Origin': '*',\n      'Access-Control-Allow-Methods': 'GET, OPTIONS',\n      'Access-Control-Allow-Headers': 'Content-Type'\n    }\n  });\n};\n", "interface Env {\n  DB: D1Database;\n}\n\nexport const onRequestGet: PagesFunction<Env> = async (context) => {\n  try {\n    const { params } = context;\n    const userId = params.userId as string;\n\n    if (!userId) {\n      return new Response(JSON.stringify({ error: 'User ID is required' }), {\n        status: 400,\n        headers: { 'Content-Type': 'application/json' }\n      });\n    }\n\n    // Fetch user orders from database\n    const ordersQuery = `\n      SELECT \n        id,\n        customerEmail,\n        customerName,\n        productId,\n        originalAmount,\n        finalAmount,\n        currency,\n        status,\n        paymentMethod,\n        downloadToken,\n        downloadCount,\n        maxDownloads,\n        activationCode,\n        createdAt,\n        completedAt\n      FROM orders \n      WHERE customerEmail = (SELECT email FROM users WHERE id = ?)\n      ORDER BY createdAt DESC\n    `;\n\n    const ordersResult = await context.env.DB.prepare(ordersQuery).bind(userId).all();\n    \n    return new Response(JSON.stringify(ordersResult.results || []), {\n      status: 200,\n      headers: { \n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*',\n        'Access-Control-Allow-Methods': 'GET, OPTIONS',\n        'Access-Control-Allow-Headers': 'Content-Type'\n      }\n    });\n\n  } catch (error) {\n    console.error('Error fetching user orders:', error);\n    return new Response(JSON.stringify({ error: 'Failed to fetch orders' }), {\n      status: 500,\n      headers: { \n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*'\n      }\n    });\n  }\n};\n\nexport const onRequestOptions: PagesFunction = async () => {\n  return new Response(null, {\n    status: 200,\n    headers: {\n      'Access-Control-Allow-Origin': '*',\n      'Access-Control-Allow-Methods': 'GET, OPTIONS',\n      'Access-Control-Allow-Headers': 'Content-Type'\n    }\n  });\n};\n", "import type { PagesFunction } from '@cloudflare/workers-types';\n\ninterface Env {\n  DB: D1Database;\n}\n\ninterface UserEmail {\n  email: string;\n}\n\ninterface PurchaseStatus {\n  completedOrders: number;\n  totalSpent: number;\n  lastPurchaseDate: string | null;\n}\n\nexport const onRequestGet: PagesFunction<Env> = async (context) => {\n  try {\n    const { params } = context;\n    const userId = params.userId as string;\n\n    if (!userId) {\n      return new Response(JSON.stringify({ error: 'User ID is required' }), {\n        status: 400,\n        headers: { 'Content-Type': 'application/json' }\n      });\n    }\n\n    // Always return default values if database is not available\n    if (!context.env.DB) {\n      return new Response(JSON.stringify({ \n        hasPurchased: false,\n        totalSpent: '0.00',\n        completedOrders: 0,\n        lastPurchaseDate: null\n      }), {\n        status: 200,\n        headers: { \n          'Content-Type': 'application/json',\n          'Access-Control-Allow-Origin': '*'\n        }\n      });\n    }\n\n    // Get user email from customers table first, then users table as fallback\n    let userResult: UserEmail | null = null;\n    \n    try {\n      // Try customers table first with different column name variations\n      try {\n        const customerQuery = `SELECT email FROM customers WHERE id = ?`;\n        userResult = await context.env.DB.prepare(customerQuery).bind(userId).first<UserEmail>();\n      } catch (e) {\n        // Try with different column names\n        try {\n          const customerQuery = `SELECT email FROM customers WHERE id = ?`;\n          userResult = await context.env.DB.prepare(customerQuery).bind(parseInt(userId)).first<UserEmail>();\n        } catch (e2) {\n          console.log('Customers table query failed');\n        }\n      }\n      \n      // Fallback to users table if not found in customers\n      if (!userResult) {\n        try {\n          const usersQuery = `SELECT email FROM users WHERE id = ?`;\n          userResult = await context.env.DB.prepare(usersQuery).bind(userId).first<UserEmail>();\n        } catch (e) {\n          try {\n            const usersQuery = `SELECT email FROM users WHERE id = ?`;\n            userResult = await context.env.DB.prepare(usersQuery).bind(parseInt(userId)).first<UserEmail>();\n          } catch (e2) {\n            console.log('Users table query also failed');\n          }\n        }\n      }\n    } catch (tableError) {\n      console.log('Table access error:', tableError);\n    }\n    \n    // Return default values if no user found\n    if (!userResult) {\n      return new Response(JSON.stringify({ \n        hasPurchased: false,\n        totalSpent: '0.00',\n        completedOrders: 0,\n        lastPurchaseDate: null\n      }), {\n        status: 200,\n        headers: { \n          'Content-Type': 'application/json',\n          'Access-Control-Allow-Origin': '*'\n        }\n      });\n    }\n\n    // Try to get purchase status from orders with multiple query variations\n    let statusResult: PurchaseStatus | null = null;\n    \n    try {\n      // Try different column name combinations\n      const queryVariations = [\n        `SELECT \n          COUNT(CASE WHEN status = 'completed' THEN 1 END) as completedOrders,\n          COALESCE(SUM(CASE WHEN status = 'completed' THEN CAST(final_amount as REAL) ELSE 0 END), 0) as totalSpent,\n          MAX(CASE WHEN status = 'completed' THEN created_at END) as lastPurchaseDate\n        FROM orders \n        WHERE (user_id = ? OR customer_email = ?)`,\n        \n        `SELECT \n          COUNT(CASE WHEN status = 'completed' THEN 1 END) as completedOrders,\n          COALESCE(SUM(CASE WHEN status = 'completed' THEN CAST(\"finalAmount\" as REAL) ELSE 0 END), 0) as totalSpent,\n          MAX(CASE WHEN status = 'completed' THEN \"createdAt\" END) as lastPurchaseDate\n        FROM orders \n        WHERE (\"userId\" = ? OR \"customerEmail\" = ?)`,\n        \n        `SELECT \n          COUNT(CASE WHEN status = 'completed' THEN 1 END) as completedOrders,\n          COALESCE(SUM(CASE WHEN status = 'completed' THEN CAST(finalAmount as REAL) ELSE 0 END), 0) as totalSpent,\n          MAX(CASE WHEN status = 'completed' THEN createdAt END) as lastPurchaseDate\n        FROM orders \n        WHERE (userId = ? OR customerEmail = ?)`\n      ];\n\n      for (const query of queryVariations) {\n        try {\n          statusResult = await context.env.DB.prepare(query).bind(userId, userResult.email).first<PurchaseStatus>();\n          if (statusResult) break;\n        } catch (e) {\n          try {\n            statusResult = await context.env.DB.prepare(query).bind(parseInt(userId), userResult.email).first<PurchaseStatus>();\n            if (statusResult) break;\n          } catch (e2) {\n            console.log('Query variation failed, trying next');\n          }\n        }\n      }\n    } catch (queryError) {\n      console.log('All order queries failed:', queryError);\n    }\n    \n    const hasPurchased = (statusResult?.completedOrders || 0) > 0;\n    const totalSpent = (statusResult?.totalSpent || 0).toFixed(2);\n    const completedOrders = statusResult?.completedOrders || 0;\n    const lastPurchaseDate = statusResult?.lastPurchaseDate ? new Date(statusResult.lastPurchaseDate).getTime() : null;\n\n    return new Response(JSON.stringify({\n      hasPurchased,\n      totalSpent,\n      completedOrders,\n      lastPurchaseDate\n    }), {\n      status: 200,\n      headers: { \n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*',\n        'Access-Control-Allow-Methods': 'GET, OPTIONS',\n        'Access-Control-Allow-Headers': 'Content-Type'\n      }\n    });\n\n  } catch (error) {\n    console.error('Error fetching purchase status:', error);\n    // Always return valid data instead of error\n    return new Response(JSON.stringify({ \n      hasPurchased: false,\n      totalSpent: '0.00',\n      completedOrders: 0,\n      lastPurchaseDate: null\n    }), {\n      status: 200,\n      headers: { \n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*'\n      }\n    });\n  }\n};\n\nexport const onRequestOptions: PagesFunction = async () => {\n  return new Response(null, {\n    status: 200,\n    headers: {\n      'Access-Control-Allow-Origin': '*',\n      'Access-Control-Allow-Methods': 'GET, OPTIONS',\n      'Access-Control-Allow-Headers': 'Content-Type'\n    }\n  });\n};\n", "interface Env {\n  DB: D1Database;\n}\n\nexport const onRequestGet: PagesFunction<Env> = async (context) => {\n  try {\n    // Get real analytics data from database\n    const ordersStatsQuery = `\n      SELECT \n        COUNT(*) as totalOrders,\n        COUNT(CASE WHEN status = 'completed' THEN 1 END) as completedOrders,\n        SUM(CASE WHEN status = 'completed' THEN CAST(final_amount as REAL) ELSE 0 END) as totalRevenue\n      FROM orders\n    `;\n\n    const usersStatsQuery = `\n      SELECT \n        COUNT(*) as totalUsers,\n        COUNT(CASE WHEN is_premium = 1 THEN 1 END) as premiumUsers\n      FROM users\n    `;\n\n    const [ordersStats, usersStats] = await Promise.all([\n      context.env.DB.prepare(ordersStatsQuery).first(),\n      context.env.DB.prepare(usersStatsQuery).first()\n    ]);\n\n    const analytics = {\n      totalRevenue: Number(ordersStats?.totalRevenue) || 0,\n      totalSales: Number(ordersStats?.completedOrders) || 0,\n      activeCustomers: Number(usersStats?.totalUsers) || 0,\n      avgRating: 4.9 // Static rating\n    };\n    \n    return new Response(JSON.stringify({\n      success: true,\n      ...analytics\n    }), {\n      headers: { \n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*',\n        'Access-Control-Allow-Methods': 'GET, OPTIONS',\n        'Access-Control-Allow-Headers': 'Content-Type'\n      }\n    });\n    \n  } catch (error) {\n    console.error('Failed to get analytics:', error);\n    return new Response(JSON.stringify({\n      success: false,\n      message: 'Failed to load analytics',\n      totalRevenue: 0,\n      totalSales: 0,\n      activeCustomers: 0,\n      avgRating: 4.9\n    }), {\n      status: 500,\n      headers: { \n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*'\n      }\n    });\n  }\n};\n\nexport const onRequestOptions: PagesFunction = async () => {\n  return new Response(null, {\n    status: 200,\n    headers: {\n      'Access-Control-Allow-Origin': '*',\n      'Access-Control-Allow-Methods': 'GET, OPTIONS',\n      'Access-Control-Allow-Headers': 'Content-Type'\n    }\n  });\n};\n", "import { SettingsStorage } from '../../lib/settings-storage';\n\ninterface Env {\n  DB: D1Database;\n}\n\ndeclare global {\n  interface D1Database {}\n  interface PagesFunction<T = any> {\n    (context: { request: Request; env: T; params: any; waitUntil: (promise: Promise<any>) => void; }): Promise<Response> | Response;\n  }\n}\n\ninterface AnnouncementBadge {\n  id: string;\n  title: string;\n  subtitle: string;\n  backgroundColor: string;\n  textColor: string;\n  priority: number;\n  isActive: boolean;\n  createdAt: string;\n  updatedAt: string;\n}\n\nexport const onRequestOptions: PagesFunction<Env> = async () => {\n  return new Response(null, {\n    status: 200,\n    headers: {\n      'Access-Control-Allow-Origin': '*',\n      'Access-Control-Allow-Methods': 'GET, POST, PUT, DELETE, OPTIONS',\n      'Access-Control-Allow-Headers': 'Content-Type, Authorization',\n    },\n  });\n};\n\nexport const onRequestGet: PagesFunction<Env> = async (context) => {\n  try {\n    const settingsStorage = new SettingsStorage(context.env.DB);\n    \n    // Get all announcement badges from storage\n    const badgesData = await settingsStorage.getSetting('announcement_badges');\n    const badges = badgesData ? JSON.parse(badgesData) : [];\n    \n    console.log('Retrieved announcement badges:', badges.length);\n    \n    return new Response(JSON.stringify(badges), {\n      status: 200,\n      headers: {\n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*',\n      },\n    });\n  } catch (error) {\n    console.error('Error fetching announcement badges:', error);\n    return new Response(JSON.stringify({ \n      error: 'Failed to fetch announcement badges',\n      details: error instanceof Error ? error.message : 'Unknown error'\n    }), {\n      status: 500,\n      headers: {\n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*',\n      },\n    });\n  }\n};\n\nexport const onRequestPost: PagesFunction<Env> = async (context) => {\n  try {\n    const settingsStorage = new SettingsStorage(context.env.DB);\n    const requestData = await context.request.json();\n    \n    console.log('Creating new announcement badge:', JSON.stringify(requestData, null, 2));\n    \n    // Create new badge - handle different field names from frontend\n    const newBadge: AnnouncementBadge = {\n      id: crypto.randomUUID(),\n      title: requestData.title || requestData.text || requestData.badgeText || requestData.content || requestData.message || '',\n      subtitle: requestData.subtitle || '',\n      backgroundColor: requestData.backgroundColor || requestData.bgColor || requestData.background || '#007cba',\n      textColor: requestData.textColor || requestData.color || requestData.foreground || '#ffffff',\n      priority: parseInt(requestData.priority) || 1,\n      isActive: requestData.isActive !== undefined ? Boolean(requestData.isActive) : requestData.enabled !== undefined ? Boolean(requestData.enabled) : true,\n      createdAt: new Date().toISOString(),\n      updatedAt: new Date().toISOString(),\n    };\n    \n    console.log('Created badge object:', JSON.stringify(newBadge, null, 2));\n    \n    // Auto-translate if requested\n    if (requestData.autoTranslate !== false && newBadge.title) {\n      try {\n        // Get OpenAI API key\n        let openaiApiKey = context.env.OPENAI_API_KEY;\n        if (!openaiApiKey) {\n          const apiKeySetting = await settingsStorage.getSetting('openai_api_key');\n          openaiApiKey = apiKeySetting;\n        }\n\n        if (openaiApiKey) {\n          const supportedLanguages = ['de', 'fr', 'es', 'it', 'pt', 'nl', 'da', 'no', 'fi', 'tr', 'pl', 'ru'];\n          \n          // Call translation service\n          const translationResponse = await fetch('https://api.openai.com/v1/chat/completions', {\n            method: 'POST',\n            headers: {\n              'Authorization': `Bearer ${openaiApiKey}`,\n              'Content-Type': 'application/json',\n            },\n            body: JSON.stringify({\n              model: \"gpt-4o\",\n              messages: [\n                {\n                  role: \"system\",\n                  content: \"You are a professional translator specializing in marketing content. Provide accurate, culturally appropriate translations that maintain the marketing impact of the original text.\"\n                },\n                {\n                  role: \"user\", \n                  content: `Translate the following announcement badge text into multiple languages.\n\nOriginal text (English): \"${newBadge.title}\"\nContext: Announcement badge for a Chrome extension product website\nTarget languages: ${supportedLanguages.map(code => `${code}: ${({'de': 'German', 'fr': 'French', 'es': 'Spanish', 'it': 'Italian', 'pt': 'Portuguese', 'nl': 'Dutch', 'da': 'Danish', 'no': 'Norwegian', 'fi': 'Finnish', 'tr': 'Turkish', 'pl': 'Polish', 'ru': 'Russian'})[code]}`).join(', ')}\nTone: Marketing/promotional tone\n\nRequirements:\n- Maintain the marketing/promotional tone\n- Keep the same emotional impact as the original\n- Adapt cultural nuances appropriately for each target market\n- Keep translations concise and impactful for badge display\n- Ensure translations sound natural to native speakers\n\nRespond with a JSON object where keys are language codes (${supportedLanguages.join(', ')}) and values are the translated text.\n\nExample format:\n{\n  \"de\": \"German translation here\",\n  \"fr\": \"French translation here\"\n}`\n                }\n              ],\n              response_format: { type: \"json_object\" },\n              temperature: 0.3,\n              max_tokens: 1000\n            })\n          });\n\n          if (translationResponse.ok) {\n            const data = await translationResponse.json();\n            const translationText = data.choices[0]?.message?.content;\n            \n            if (translationText) {\n              const translations = JSON.parse(translationText);\n              // Store translations in the badge object\n              (newBadge as any).textTranslations = translations;\n              console.log('Auto-translated badge to languages:', Object.keys(translations));\n            }\n          }\n        }\n      } catch (translationError) {\n        console.warn('Auto-translation failed, continuing without translations:', translationError);\n      }\n    }\n    \n    // Get existing badges\n    const existingBadgesData = await settingsStorage.getSetting('announcement_badges');\n    const existingBadges = existingBadgesData ? JSON.parse(existingBadgesData) : [];\n    \n    // Add new badge\n    existingBadges.push(newBadge);\n    \n    // Save updated badges\n    await settingsStorage.setSetting('announcement_badges', JSON.stringify(existingBadges));\n    \n    console.log('Created announcement badge:', newBadge.id);\n    \n    return new Response(JSON.stringify({ badge: newBadge }), {\n      status: 201,\n      headers: {\n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*',\n      },\n    });\n  } catch (error) {\n    console.error('Error creating announcement badge:', error);\n    return new Response(JSON.stringify({ \n      error: 'Failed to create announcement badge',\n      details: error instanceof Error ? error.message : 'Unknown error'\n    }), {\n      status: 500,\n      headers: {\n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*',\n      },\n    });\n  }\n};\n\nexport const onRequestPut: PagesFunction<Env> = async (context) => {\n  try {\n    const settingsStorage = new SettingsStorage(context.env.DB);\n    const requestData = await context.request.json();\n    const badgeId = requestData.id;\n    \n    if (!badgeId) {\n      return new Response(JSON.stringify({ error: 'Badge ID is required' }), {\n        status: 400,\n        headers: {\n          'Content-Type': 'application/json',\n          'Access-Control-Allow-Origin': '*',\n        },\n      });\n    }\n    \n    console.log('Updating announcement badge:', badgeId);\n    \n    // Get existing badges\n    const existingBadgesData = await settingsStorage.getSetting('announcement_badges');\n    const existingBadges = existingBadgesData ? JSON.parse(existingBadgesData) : [];\n    \n    // Find and update badge\n    const badgeIndex = existingBadges.findIndex((badge: AnnouncementBadge) => badge.id === badgeId);\n    \n    if (badgeIndex === -1) {\n      return new Response(JSON.stringify({ error: 'Badge not found' }), {\n        status: 404,\n        headers: {\n          'Content-Type': 'application/json',\n          'Access-Control-Allow-Origin': '*',\n        },\n      });\n    }\n    \n    // Update badge - handle different field names from frontend\n    existingBadges[badgeIndex] = {\n      ...existingBadges[badgeIndex],\n      title: requestData.title || requestData.text || requestData.badgeText || existingBadges[badgeIndex].title,\n      subtitle: requestData.subtitle || existingBadges[badgeIndex].subtitle,\n      backgroundColor: requestData.backgroundColor || requestData.bgColor || existingBadges[badgeIndex].backgroundColor,\n      textColor: requestData.textColor || requestData.color || existingBadges[badgeIndex].textColor,\n      priority: requestData.priority ? parseInt(requestData.priority) : existingBadges[badgeIndex].priority,\n      isActive: requestData.isActive !== undefined ? requestData.isActive : existingBadges[badgeIndex].isActive,\n      updatedAt: new Date().toISOString(),\n    };\n    \n    // Save updated badges\n    await settingsStorage.setSetting('announcement_badges', JSON.stringify(existingBadges));\n    \n    console.log('Updated announcement badge:', badgeId);\n    \n    return new Response(JSON.stringify({ badge: existingBadges[badgeIndex] }), {\n      status: 200,\n      headers: {\n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*',\n      },\n    });\n  } catch (error) {\n    console.error('Error updating announcement badge:', error);\n    return new Response(JSON.stringify({ \n      error: 'Failed to update announcement badge',\n      details: error instanceof Error ? error.message : 'Unknown error'\n    }), {\n      status: 500,\n      headers: {\n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*',\n      },\n    });\n  }\n};\n\nexport const onRequestDelete: PagesFunction<Env> = async (context) => {\n  try {\n    const settingsStorage = new SettingsStorage(context.env.DB);\n    const url = new URL(context.request.url);\n    const badgeId = url.searchParams.get('id');\n    \n    if (!badgeId) {\n      return new Response(JSON.stringify({ error: 'Badge ID is required' }), {\n        status: 400,\n        headers: {\n          'Content-Type': 'application/json',\n          'Access-Control-Allow-Origin': '*',\n        },\n      });\n    }\n    \n    console.log('Deleting announcement badge:', badgeId);\n    \n    // Get existing badges\n    const existingBadgesData = await settingsStorage.getSetting('announcement_badges');\n    const existingBadges = existingBadgesData ? JSON.parse(existingBadgesData) : [];\n    \n    // Filter out the badge to delete\n    const updatedBadges = existingBadges.filter((badge: AnnouncementBadge) => badge.id !== badgeId);\n    \n    if (updatedBadges.length === existingBadges.length) {\n      return new Response(JSON.stringify({ error: 'Badge not found' }), {\n        status: 404,\n        headers: {\n          'Content-Type': 'application/json',\n          'Access-Control-Allow-Origin': '*',\n        },\n      });\n    }\n    \n    // Save updated badges\n    await settingsStorage.setSetting('announcement_badges', JSON.stringify(updatedBadges));\n    \n    console.log('Deleted announcement badge:', badgeId);\n    \n    return new Response(JSON.stringify({ success: true }), {\n      status: 200,\n      headers: {\n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*',\n      },\n    });\n  } catch (error) {\n    console.error('Error deleting announcement badge:', error);\n    return new Response(JSON.stringify({ \n      error: 'Failed to delete announcement badge',\n      details: error instanceof Error ? error.message : 'Unknown error'\n    }), {\n      status: 500,\n      headers: {\n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*',\n      },\n    });\n  }\n};\n", "export const onRequestGet = async (context: any) => {\n  const { env } = context;\n  \n  try {\n    // Fetch auth settings from D1 database\n    const selectQuery = `SELECT * FROM auth_settings WHERE id = 1`;\n    const result = await env.DB.prepare(selectQuery).first();\n\n    if (!result) {\n      // Return default settings if no record found\n      const defaultSettings = {\n        googleEnabled: false,\n        facebookEnabled: false,\n        githubEnabled: false,\n        recaptchaEnabled: false,\n        recaptchaCustomerEnabled: false,\n        recaptchaAdminEnabled: false,\n        recaptchaSiteKey: '',\n        googleClientId: '',\n        googleClientSecret: '',\n        facebookAppId: '',\n        facebookAppSecret: '',\n        githubClientId: '',\n        githubClientSecret: '',\n        jwtSecret: 'demo-jwt-secret',\n        sessionTimeout: 3600\n      };\n\n      return new Response(JSON.stringify(defaultSettings), {\n        headers: { \n          'Content-Type': 'application/json',\n          'Access-Control-Allow-Origin': '*'\n        }\n      });\n    }\n\n    // Map database fields to frontend format\n    const authSettings = {\n      googleEnabled: Boolean(result.google_enabled),\n      facebookEnabled: Boolean(result.facebook_enabled),\n      githubEnabled: Boolean(result.github_enabled),\n      recaptchaEnabled: Boolean(result.recaptcha_enabled),\n      recaptchaCustomerEnabled: Boolean(result.recaptcha_customer_enabled),\n      recaptchaAdminEnabled: Boolean(result.recaptcha_admin_enabled),\n      recaptchaSiteKey: result.recaptcha_site_key || '',\n      googleClientId: result.google_client_id || '',\n      googleClientSecret: result.google_client_secret || '',\n      facebookAppId: result.facebook_app_id || '',\n      facebookAppSecret: result.facebook_app_secret || '',\n      githubClientId: result.github_client_id || '',\n      githubClientSecret: result.github_client_secret || '',\n      jwtSecret: result.jwt_secret || 'demo-jwt-secret',\n      sessionTimeout: result.session_timeout || 3600\n    };\n\n    return new Response(JSON.stringify(authSettings), {\n      headers: { \n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*'\n      }\n    });\n\n  } catch (error: any) {\n    console.error(\"Error fetching auth settings:\", error);\n    return new Response(JSON.stringify({ \n      message: \"Error fetching auth settings: \" + error.message \n    }), {\n      status: 500,\n      headers: { \n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*'\n      }\n    });\n  }\n};\n\nexport const onRequestPut = async (context: any) => {\n  const { request, env } = context;\n  \n  try {\n    const settings = await request.json();\n    \n    // Map frontend fields to database format\n    const updateData = {\n      google_enabled: settings.googleEnabled ? 1 : 0,\n      google_client_id: settings.googleClientId || null,\n      google_client_secret: settings.googleClientSecret || null,\n      facebook_enabled: settings.facebookEnabled ? 1 : 0,\n      facebook_app_id: settings.facebookAppId || null,\n      facebook_app_secret: settings.facebookAppSecret || null,\n      github_enabled: settings.githubEnabled ? 1 : 0,\n      github_client_id: settings.githubClientId || null,\n      github_client_secret: settings.githubClientSecret || null,\n      recaptcha_enabled: settings.recaptchaEnabled ? 1 : 0,\n      recaptcha_site_key: settings.recaptchaSiteKey || null,\n      recaptcha_secret_key: settings.recaptchaSecretKey || null,\n      recaptcha_mode: settings.recaptchaMode || 'v2',\n      recaptcha_customer_enabled: settings.recaptchaCustomerEnabled ? 1 : 0,\n      recaptcha_admin_enabled: settings.recaptchaAdminEnabled ? 1 : 0,\n      jwt_secret: settings.jwtSecret || 'demo-jwt-secret',\n      session_timeout: settings.sessionTimeout || 3600,\n      stripe_enabled: settings.stripeEnabled ? 1 : 0,\n      stripe_public_key: settings.stripePublicKey || null,\n      stripe_secret_key: settings.stripeSecretKey || null,\n      updated_at: new Date().toISOString()\n    };\n\n    // Update auth settings in D1 database\n    const updateQuery = `\n      UPDATE auth_settings \n      SET google_enabled = ?, google_client_id = ?, google_client_secret = ?,\n          facebook_enabled = ?, facebook_app_id = ?, facebook_app_secret = ?,\n          github_enabled = ?, github_client_id = ?, github_client_secret = ?,\n          recaptcha_enabled = ?, recaptcha_site_key = ?, recaptcha_secret_key = ?,\n          recaptcha_mode = ?, recaptcha_customer_enabled = ?, recaptcha_admin_enabled = ?,\n          jwt_secret = ?, session_timeout = ?, stripe_enabled = ?, stripe_public_key = ?, \n          stripe_secret_key = ?, updated_at = ?\n      WHERE id = 1\n    `;\n\n    await env.DB.prepare(updateQuery)\n      .bind(\n        updateData.google_enabled, updateData.google_client_id, updateData.google_client_secret,\n        updateData.facebook_enabled, updateData.facebook_app_id, updateData.facebook_app_secret,\n        updateData.github_enabled, updateData.github_client_id, updateData.github_client_secret,\n        updateData.recaptcha_enabled, updateData.recaptcha_site_key, updateData.recaptcha_secret_key,\n        updateData.recaptcha_mode, updateData.recaptcha_customer_enabled, updateData.recaptcha_admin_enabled,\n        updateData.jwt_secret, updateData.session_timeout, updateData.stripe_enabled, \n        updateData.stripe_public_key, updateData.stripe_secret_key, updateData.updated_at\n      )\n      .run();\n\n    // Fetch the updated settings to return\n    const selectQuery = `SELECT * FROM auth_settings WHERE id = 1`;\n    const result = await env.DB.prepare(selectQuery).first();\n\n    // Map back to frontend format for response\n    const updatedSettings = {\n      googleEnabled: Boolean(result.google_enabled),\n      facebookEnabled: Boolean(result.facebook_enabled),\n      githubEnabled: Boolean(result.github_enabled),\n      recaptchaEnabled: Boolean(result.recaptcha_enabled),\n      recaptchaCustomerEnabled: Boolean(result.recaptcha_customer_enabled),\n      recaptchaAdminEnabled: Boolean(result.recaptcha_admin_enabled),\n      recaptchaSiteKey: result.recaptcha_site_key || '',\n      googleClientId: result.google_client_id || '',\n      facebookAppId: result.facebook_app_id || '',\n      githubClientId: result.github_client_id || ''\n    };\n    \n    return new Response(JSON.stringify(updatedSettings), {\n      headers: { \n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*'\n      }\n    });\n    \n  } catch (error: any) {\n    console.error(\"Error updating auth settings:\", error);\n    return new Response(JSON.stringify({\n      success: false,\n      message: 'Failed to update authentication settings: ' + error.message\n    }), {\n      status: 500,\n      headers: { \n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*'\n      }\n    });\n  }\n};\n\nexport const onRequestOptions = async () => {\n  return new Response(null, {\n    headers: {\n      'Access-Control-Allow-Origin': '*',\n      'Access-Control-Allow-Methods': 'GET, PUT, OPTIONS',\n      'Access-Control-Allow-Headers': 'Content-Type'\n    }\n  });\n};\n", "import { SettingsStorage } from '../../lib/settings-storage';\n\nexport const onRequestGet = async ({ env }: any) => {\n  try {\n    if (!env.DB) {\n      return new Response(JSON.stringify({\n        success: false,\n        message: 'Database not available'\n      }), {\n        status: 500,\n        headers: { \n          'Content-Type': 'application/json',\n          'Access-Control-Allow-Origin': '*'\n        }\n      });\n    }\n\n    const settingsStorage = new SettingsStorage(env.DB);\n    await settingsStorage.initializeSettings();\n    \n    const settings = await settingsStorage.getChatSettings();\n\n    return new Response(JSON.stringify({\n      success: true,\n      ...settings\n    }), {\n      headers: { \n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*'\n      }\n    });\n    \n  } catch (error) {\n    console.error('Failed to get chat settings:', error);\n    return new Response(JSON.stringify({\n      success: false,\n      message: 'Failed to load chat settings'\n    }), {\n      status: 500,\n      headers: { \n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*'\n      }\n    });\n  }\n};\n\nexport const onRequestPut = async ({ request, env }: any) => {\n  try {\n    console.log('Chat settings PUT request received');\n    console.log('Environment DB available:', !!env.DB);\n    \n    if (!env.DB) {\n      console.error('Database not available in environment');\n      return new Response(JSON.stringify({\n        success: false,\n        message: 'Database not available'\n      }), {\n        status: 500,\n        headers: { \n          'Content-Type': 'application/json',\n          'Access-Control-Allow-Origin': '*'\n        }\n      });\n    }\n\n    const requestBody = await request.json();\n    console.log('Request body received:', requestBody);\n    \n    const { openaiApiKey, assistantId, chatModel, enabled } = requestBody;\n    \n    console.log('Initializing settings storage...');\n    const settingsStorage = new SettingsStorage(env.DB);\n    \n    try {\n      await settingsStorage.initializeSettings();\n      console.log('Settings storage initialized successfully');\n    } catch (initError) {\n      console.error('Failed to initialize settings storage:', initError);\n      throw initError;\n    }\n    \n    // Only update settings that are provided and not empty\n    const settingsToUpdate: any = {};\n    if (openaiApiKey && openaiApiKey.trim() !== '' && openaiApiKey !== '***hidden***') {\n      settingsToUpdate.openaiApiKey = openaiApiKey.trim();\n    }\n    if (assistantId !== undefined) {\n      settingsToUpdate.assistantId = assistantId;\n    }\n    if (chatModel && chatModel.trim() !== '') {\n      settingsToUpdate.chatModel = chatModel.trim();\n    }\n    if (enabled !== undefined) {\n      settingsToUpdate.enabled = enabled;\n    }\n    \n    console.log('Settings to update:', settingsToUpdate);\n    \n    try {\n      await settingsStorage.setChatSettings(settingsToUpdate);\n      console.log('Settings updated successfully');\n    } catch (updateError) {\n      console.error('Failed to update settings:', updateError);\n      throw updateError;\n    }\n\n    return new Response(JSON.stringify({\n      success: true,\n      message: 'Chat settings updated successfully'\n    }), {\n      headers: { \n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*'\n      }\n    });\n    \n  } catch (error) {\n    console.error('Chat settings PUT error:', error);\n    console.error('Error stack:', error.stack);\n    return new Response(JSON.stringify({\n      success: false,\n      message: `Failed to update chat settings: ${error.message || error}`,\n      error: error.toString()\n    }), {\n      status: 500,\n      headers: { \n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*'\n      }\n    });\n  }\n};\n\nexport const onRequestOptions = async () => {\n  return new Response(null, {\n    status: 200,\n    headers: {\n      'Access-Control-Allow-Origin': '*',\n      'Access-Control-Allow-Methods': 'GET, PUT, OPTIONS',\n      'Access-Control-Allow-Headers': 'Content-Type, Authorization',\n    },\n  });\n};\n", "// Cloudflare Pages Function: /api/admin/check-user-data\n// Check user data across all tables for debugging\n\nimport type { PagesFunction } from '@cloudflare/workers-types';\nimport { Env } from '../../lib/context';\n\nfunction json(data: any, status = 200) {\n  return new Response(JSON.stringify(data), {\n    status,\n    headers: {\n      'Content-Type': 'application/json',\n      'Access-Control-Allow-Origin': '*',\n    },\n  });\n}\n\nexport const onRequestGet: PagesFunction<Env> = async ({ request, env }) => {\n  try {\n    const url = new URL(request.url);\n    const email = url.searchParams.get('email');\n\n    if (!email) {\n      return json({ success: false, message: 'Email required' }, 400);\n    }\n\n    if (!env.DB) {\n      return json({ success: false, message: 'Database not available' }, 500);\n    }\n\n    // Check users table\n    const user = await env.DB.prepare(`\n      SELECT id, email, name, is_premium, extension_activated, premium_activated_at, created_at\n      FROM users WHERE email = ?\n    `).bind(email).first();\n\n    // Check customers table\n    const customer = await env.DB.prepare(`\n      SELECT id, email, name, is_premium, extension_activated, created_at\n      FROM customers WHERE email = ?\n    `).bind(email).first();\n\n    // Check orders\n    const orders = await env.DB.prepare(`\n      SELECT id, customer_id, customer_email, original_amount, final_amount, status, created_at, completed_at\n      FROM orders WHERE customer_email = ?\n    `).bind(email).all();\n\n    // Check invoices\n    const invoices = await env.DB.prepare(`\n      SELECT id, invoice_number, customer_id, order_id, amount, status, created_at\n      FROM invoices WHERE customer_id IN (\n        SELECT id FROM customers WHERE email = ?\n        UNION\n        SELECT id FROM users WHERE email = ?\n      )\n    `).bind(email, email).all();\n\n    return json({\n      success: true,\n      email,\n      user,\n      customer,\n      orders: orders.results,\n      invoices: invoices.results,\n      summary: {\n        userExists: !!user,\n        customerExists: !!customer,\n        userPremium: user?.is_premium === 1,\n        customerPremium: customer?.is_premium === 1,\n        userExtensionActivated: user?.extension_activated === 1,\n        customerExtensionActivated: customer?.extension_activated === 1,\n        totalOrders: orders.results?.length || 0,\n        totalInvoices: invoices.results?.length || 0\n      }\n    });\n\n  } catch (error: any) {\n    console.error('Error checking user data:', error);\n    return json({ \n      success: false, \n      message: error.message \n    }, 500);\n  }\n};\n", "import { SettingsStorage } from '../../lib/settings-storage';\n\ninterface Env {\n  DB: D1Database;\n  OPENAI_API_KEY?: string;\n}\n\ndeclare global {\n  interface D1Database {}\n  interface PagesFunction<T = any> {\n    (context: { request: Request; env: T; params: any; waitUntil: (promise: Promise<any>) => void; }): Promise<Response> | Response;\n  }\n}\n\ninterface CountdownBanner {\n  id: string;\n  title: string;\n  subtitle: string;\n  targetPrice: number;\n  originalPrice: number;\n  endDate: string;\n  priority: number;\n  backgroundColor: string;\n  textColor: string;\n  isActive: boolean;\n  createdAt: string;\n  updatedAt: string;\n}\n\nexport const onRequestOptions: PagesFunction<Env> = async () => {\n  return new Response(null, {\n    status: 200,\n    headers: {\n      'Access-Control-Allow-Origin': '*',\n      'Access-Control-Allow-Methods': 'GET, POST, PUT, DELETE, OPTIONS',\n      'Access-Control-Allow-Headers': 'Content-Type, Authorization',\n    },\n  });\n};\n\nexport const onRequestGet: PagesFunction<Env> = async (context) => {\n  try {\n    const settingsStorage = new SettingsStorage(context.env.DB);\n    \n    // Get all countdown banners from storage\n    const bannersData = await settingsStorage.getSetting('countdown_banners');\n    const banners = bannersData ? JSON.parse(bannersData) : [];\n    \n    console.log('Retrieved countdown banners:', banners.length);\n    \n    return new Response(JSON.stringify(banners), {\n      status: 200,\n      headers: {\n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*',\n      },\n    });\n  } catch (error) {\n    console.error('Error fetching countdown banners:', error);\n    return new Response(JSON.stringify({ \n      error: 'Failed to fetch countdown banners',\n      details: error instanceof Error ? error.message : 'Unknown error'\n    }), {\n      status: 500,\n      headers: {\n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*',\n      },\n    });\n  }\n};\n\nexport const onRequestPost: PagesFunction<Env> = async (context) => {\n  try {\n    const settingsStorage = new SettingsStorage(context.env.DB);\n    const requestData = await context.request.json();\n    \n    console.log('Creating new countdown banner:', requestData);\n    \n    // Create new banner\n    const newBanner: CountdownBanner = {\n      id: crypto.randomUUID(),\n      title: requestData.title || '',\n      subtitle: requestData.subtitle || '',\n      targetPrice: parseFloat(requestData.targetPrice) || 0,\n      originalPrice: parseFloat(requestData.originalPrice) || 0,\n      endDate: requestData.endDate || new Date(Date.now() + 7 * 24 * 60 * 60 * 1000).toISOString(),\n      priority: requestData.priority || 1,\n      backgroundColor: requestData.backgroundColor || '#007cba',\n      textColor: requestData.textColor || '#ffffff',\n      isActive: requestData.isActive !== false,\n      createdAt: new Date().toISOString(),\n      updatedAt: new Date().toISOString(),\n    };\n    \n    // Auto-translate if requested\n    if (requestData.autoTranslate !== false && (newBanner.title || newBanner.subtitle)) {\n      try {\n        // Get OpenAI API key\n        let openaiApiKey = context.env.OPENAI_API_KEY;\n        if (!openaiApiKey) {\n          const apiKeySetting = await settingsStorage.getSetting('openai_api_key');\n          openaiApiKey = apiKeySetting || undefined;\n        }\n\n        if (openaiApiKey) {\n          const supportedLanguages = ['de', 'fr', 'es', 'it', 'pt', 'nl', 'da', 'no', 'fi', 'tr', 'pl', 'ru'];\n          \n          // Translate both title and subtitle\n          const translationPromises: Promise<Response>[] = [];\n          \n          if (newBanner.title) {\n            translationPromises.push(\n              fetch('https://api.openai.com/v1/chat/completions', {\n                method: 'POST',\n                headers: {\n                  'Authorization': `Bearer ${openaiApiKey}`,\n                  'Content-Type': 'application/json',\n                },\n                body: JSON.stringify({\n                  model: \"gpt-4o\",\n                  messages: [\n                    {\n                      role: \"system\",\n                      content: \"You are a professional translator specializing in marketing content. Provide accurate, culturally appropriate translations that maintain the marketing impact of the original text.\"\n                    },\n                    {\n                      role: \"user\", \n                      content: `Translate the following countdown banner title into multiple languages.\n\nOriginal text (English): \"${newBanner.title}\"\nContext: Countdown banner title for limited-time promotion on Chrome extension website\nTarget languages: ${supportedLanguages.map(code => `${code}: ${({'de': 'German', 'fr': 'French', 'es': 'Spanish', 'it': 'Italian', 'pt': 'Portuguese', 'nl': 'Dutch', 'da': 'Danish', 'no': 'Norwegian', 'fi': 'Finnish', 'tr': 'Turkish', 'pl': 'Polish', 'ru': 'Russian'})[code]}`).join(', ')}\nTone: Urgent/promotional tone\n\nRequirements:\n- Maintain the urgent/promotional tone\n- Keep the same emotional impact as the original\n- Adapt cultural nuances appropriately for each target market\n- Keep translations concise and impactful for banner display\n- Ensure translations sound natural to native speakers\n\nRespond with a JSON object where keys are language codes (${supportedLanguages.join(', ')}) and values are the translated text.\n\nExample format:\n{\n  \"de\": \"German translation here\",\n  \"fr\": \"French translation here\"\n}`\n                    }\n                  ],\n                  response_format: { type: \"json_object\" },\n                  temperature: 0.3,\n                  max_tokens: 1000\n                })\n              })\n            );\n          }\n          \n          if (newBanner.subtitle) {\n            translationPromises.push(\n              fetch('https://api.openai.com/v1/chat/completions', {\n                method: 'POST',\n                headers: {\n                  'Authorization': `Bearer ${openaiApiKey}`,\n                  'Content-Type': 'application/json',\n                },\n                body: JSON.stringify({\n                  model: \"gpt-4o\",\n                  messages: [\n                    {\n                      role: \"system\",\n                      content: \"You are a professional translator specializing in marketing content. Provide accurate, culturally appropriate translations that maintain the marketing impact of the original text.\"\n                    },\n                    {\n                      role: \"user\", \n                      content: `Translate the following countdown banner subtitle into multiple languages.\n\nOriginal text (English): \"${newBanner.subtitle}\"\nContext: Countdown banner subtitle describing promotional offer on Chrome extension website\nTarget languages: ${supportedLanguages.map(code => `${code}: ${({'de': 'German', 'fr': 'French', 'es': 'Spanish', 'it': 'Italian', 'pt': 'Portuguese', 'nl': 'Dutch', 'da': 'Danish', 'no': 'Norwegian', 'fi': 'Finnish', 'tr': 'Turkish', 'pl': 'Polish', 'ru': 'Russian'})[code]}`).join(', ')}\nTone: Marketing/promotional tone\n\nRequirements:\n- Maintain the marketing/promotional tone\n- Keep the same emotional impact as the original\n- Adapt cultural nuances appropriately for each target market\n- Keep translations concise and impactful for banner display\n- Ensure translations sound natural to native speakers\n\nRespond with a JSON object where keys are language codes (${supportedLanguages.join(', ')}) and values are the translated text.\n\nExample format:\n{\n  \"de\": \"German translation here\",\n  \"fr\": \"French translation here\"\n}`\n                    }\n                  ],\n                  response_format: { type: \"json_object\" },\n                  temperature: 0.3,\n                  max_tokens: 1000\n                })\n              })\n            );\n          }\n\n          const responses = await Promise.all(translationPromises);\n          const translations: any = {};\n          \n          if (responses[0] && responses[0].ok) {\n            const titleData = await responses[0].json();\n            const titleTranslations = JSON.parse(titleData.choices[0]?.message?.content || '{}');\n            translations.titleTranslations = titleTranslations;\n          }\n          \n          if (responses[1] && responses[1].ok) {\n            const subtitleData = await responses[1].json();\n            const subtitleTranslations = JSON.parse(subtitleData.choices[0]?.message?.content || '{}');\n            translations.subtitleTranslations = subtitleTranslations;\n          }\n          \n          // Store translations in the banner object\n          Object.assign(newBanner, translations);\n          console.log('Auto-translated banner to languages:', Object.keys(translations));\n        }\n      } catch (translationError) {\n        console.warn('Auto-translation failed, continuing without translations:', translationError);\n      }\n    }\n    \n    // Get existing banners\n    const existingBannersData = await settingsStorage.getSetting('countdown_banners');\n    const existingBanners = existingBannersData ? JSON.parse(existingBannersData) : [];\n    \n    // Add new banner\n    existingBanners.push(newBanner);\n    \n    // Save updated banners\n    await settingsStorage.setSetting('countdown_banners', JSON.stringify(existingBanners));\n    \n    console.log('Created countdown banner:', newBanner.id);\n    \n    return new Response(JSON.stringify({ banner: newBanner }), {\n      status: 201,\n      headers: {\n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*',\n      },\n    });\n  } catch (error) {\n    console.error('Error creating countdown banner:', error);\n    return new Response(JSON.stringify({ \n      error: 'Failed to create countdown banner',\n      details: error instanceof Error ? error.message : 'Unknown error'\n    }), {\n      status: 500,\n      headers: {\n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*',\n      },\n    });\n  }\n};\n\nexport const onRequestPut: PagesFunction<Env> = async (context) => {\n  try {\n    const settingsStorage = new SettingsStorage(context.env.DB);\n    const requestData = await context.request.json();\n    const bannerId = requestData.id;\n    \n    if (!bannerId) {\n      return new Response(JSON.stringify({ error: 'Banner ID is required' }), {\n        status: 400,\n        headers: {\n          'Content-Type': 'application/json',\n          'Access-Control-Allow-Origin': '*',\n        },\n      });\n    }\n    \n    console.log('Updating countdown banner:', bannerId);\n    \n    // Get existing banners\n    const existingBannersData = await settingsStorage.getSetting('countdown_banners');\n    const existingBanners = existingBannersData ? JSON.parse(existingBannersData) : [];\n    \n    // Find and update banner\n    const bannerIndex = existingBanners.findIndex((banner: CountdownBanner) => banner.id === bannerId);\n    \n    if (bannerIndex === -1) {\n      return new Response(JSON.stringify({ error: 'Banner not found' }), {\n        status: 404,\n        headers: {\n          'Content-Type': 'application/json',\n          'Access-Control-Allow-Origin': '*',\n        },\n      });\n    }\n    \n    // Update banner\n    existingBanners[bannerIndex] = {\n      ...existingBanners[bannerIndex],\n      ...requestData,\n      targetPrice: requestData.targetPrice ? parseFloat(requestData.targetPrice) : existingBanners[bannerIndex].targetPrice,\n      originalPrice: requestData.originalPrice ? parseFloat(requestData.originalPrice) : existingBanners[bannerIndex].originalPrice,\n      updatedAt: new Date().toISOString(),\n    };\n    \n    // Save updated banners\n    await settingsStorage.setSetting('countdown_banners', JSON.stringify(existingBanners));\n    \n    console.log('Updated countdown banner:', bannerId);\n    \n    return new Response(JSON.stringify({ banner: existingBanners[bannerIndex] }), {\n      status: 200,\n      headers: {\n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*',\n      },\n    });\n  } catch (error) {\n    console.error('Error updating countdown banner:', error);\n    return new Response(JSON.stringify({ \n      error: 'Failed to update countdown banner',\n      details: error instanceof Error ? error.message : 'Unknown error'\n    }), {\n      status: 500,\n      headers: {\n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*',\n      },\n    });\n  }\n};\n\nexport const onRequestDelete: PagesFunction<Env> = async (context) => {\n  try {\n    const settingsStorage = new SettingsStorage(context.env.DB);\n    const url = new URL(context.request.url);\n    const bannerId = url.searchParams.get('id');\n    \n    if (!bannerId) {\n      return new Response(JSON.stringify({ error: 'Banner ID is required' }), {\n        status: 400,\n        headers: {\n          'Content-Type': 'application/json',\n          'Access-Control-Allow-Origin': '*',\n        },\n      });\n    }\n    \n    console.log('Deleting countdown banner:', bannerId);\n    \n    // Get existing banners\n    const existingBannersData = await settingsStorage.getSetting('countdown_banners');\n    const existingBanners = existingBannersData ? JSON.parse(existingBannersData) : [];\n    \n    // Filter out the banner to delete\n    const updatedBanners = existingBanners.filter((banner: CountdownBanner) => banner.id !== bannerId);\n    \n    if (updatedBanners.length === existingBanners.length) {\n      return new Response(JSON.stringify({ error: 'Banner not found' }), {\n        status: 404,\n        headers: {\n          'Content-Type': 'application/json',\n          'Access-Control-Allow-Origin': '*',\n        },\n      });\n    }\n    \n    // Save updated banners\n    await settingsStorage.setSetting('countdown_banners', JSON.stringify(updatedBanners));\n    \n    console.log('Deleted countdown banner:', bannerId);\n    \n    return new Response(JSON.stringify({ success: true }), {\n      status: 200,\n      headers: {\n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*',\n      },\n    });\n  } catch (error) {\n    console.error('Error deleting countdown banner:', error);\n    return new Response(JSON.stringify({ \n      error: 'Failed to delete countdown banner',\n      details: error instanceof Error ? error.message : 'Unknown error'\n    }), {\n      status: 500,\n      headers: {\n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*',\n      },\n    });\n  }\n};\n", "import type { PagesFunction } from '@cloudflare/workers-types';\nimport { Env } from '../../lib/context';\n\nexport const onRequestPost: PagesFunction<Env> = async ({ env }) => {\n  try {\n    // Check if there's already an active banner\n    const existingBanner = await env.DB.prepare(`\n      SELECT id FROM countdown_banners \n      WHERE isActive = 1 \n      LIMIT 1\n    `).first();\n\n    if (existingBanner) {\n      return new Response(JSON.stringify({\n        success: true,\n        message: 'Active banner already exists',\n        bannerId: existingBanner.id\n      }), {\n        headers: {\n          'Content-Type': 'application/json',\n          'Access-Control-Allow-Origin': '*'\n        }\n      });\n    }\n\n    // Create a default countdown banner for testing\n    const endDate = new Date();\n    endDate.setDate(endDate.getDate() + 7); // 7 days from now\n\n    // First update existing banner to \u20AC1 if it exists\n    await env.DB.prepare(`\n      UPDATE countdown_banners \n      SET targetPrice = '1.00' \n      WHERE id = 1\n    `).run();\n\n    const result = await env.DB.prepare(`\n      INSERT INTO countdown_banners (\n        titleEn, subtitleEn, titleTranslations, subtitleTranslations,\n        targetPrice, originalPrice, endDateTime, isEnabled, backgroundColor, textColor, priority\n      ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)\n    `).bind(\n      'Limited Time Offer!',\n      'Get OCUS Job Hunter Extension at Special Price',\n      '{}',\n      '{}',\n      '1.00',\n      '299.99',\n      endDate.toISOString(),\n      1,\n      '#FF6B35',\n      '#FFFFFF',\n      1\n    ).run();\n\n    return new Response(JSON.stringify({\n      success: true,\n      message: 'Default countdown banner created successfully',\n      bannerId: result.meta.last_row_id\n    }), {\n      headers: {\n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*'\n      }\n    });\n\n  } catch (error) {\n    console.error('Error creating default banner:', error);\n    \n    return new Response(JSON.stringify({\n      success: false,\n      error: 'Failed to create default banner',\n      details: error instanceof Error ? error.message : 'Unknown error'\n    }), {\n      status: 500,\n      headers: {\n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*'\n      }\n    });\n  }\n};\n\nexport const onRequestOptions: PagesFunction = async () => {\n  return new Response(null, {\n    headers: {\n      'Access-Control-Allow-Origin': '*',\n      'Access-Control-Allow-Methods': 'POST, OPTIONS',\n      'Access-Control-Allow-Headers': 'Content-Type'\n    }\n  });\n};\n", "import { UserStorage } from '../../lib/user-storage';\n\nexport const onRequestGet = async ({ env }: any) => {\n  try {\n    const userStorage = new UserStorage(env.DB);\n    await userStorage.initializeUsers();\n    \n    const customers = await userStorage.getAllCustomers();\n    \n    return new Response(JSON.stringify({\n      success: true,\n      customers\n    }), {\n      headers: { \n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*'\n      }\n    });\n    \n  } catch (error) {\n    console.error('Failed to get customers:', error);\n    return new Response(JSON.stringify({\n      success: false,\n      message: 'Failed to load customers'\n    }), {\n      status: 500,\n      headers: { \n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*'\n      }\n    });\n  }\n};\n\nexport const onRequestOptions = async () => {\n  return new Response(null, {\n    headers: {\n      'Access-Control-Allow-Origin': '*',\n      'Access-Control-Allow-Methods': 'GET, OPTIONS',\n      'Access-Control-Allow-Headers': 'Content-Type'\n    }\n  });\n};\n", "// Simple persistent storage using D1 database\nclass FeatureStorage {\n  private db: D1Database;\n\n  constructor(db: D1Database) {\n    this.db = db;\n  }\n\n  async getFeatureStates(): Promise<Record<string, boolean>> {\n    try {\n      const result = await this.db.prepare(`\n        SELECT feature_name, is_enabled \n        FROM dashboard_features\n      `).all();\n\n      const states: Record<string, boolean> = {\n        'affiliate-program': true,\n        'analytics': true,\n        'billing': true\n      };\n\n      if (result.results) {\n        result.results.forEach((row: any) => {\n          states[row.feature_name] = Boolean(row.is_enabled);\n        });\n      }\n\n      return states;\n    } catch (error) {\n      console.error('Failed to get feature states:', error);\n      return {\n        'affiliate-program': true,\n        'analytics': true,\n        'billing': true\n      };\n    }\n  }\n\n  async updateFeatureState(featureName: string, isEnabled: boolean): Promise<void> {\n    try {\n      await this.db.prepare(`\n        INSERT OR REPLACE INTO dashboard_features (feature_name, is_enabled, updated_at)\n        VALUES (?, ?, datetime('now'))\n      `).bind(featureName, isEnabled ? 1 : 0).run();\n    } catch (error) {\n      console.error('Failed to update feature state:', error);\n      throw error;\n    }\n  }\n\n  async initializeFeatures(): Promise<void> {\n    try {\n      await this.db.prepare(`\n        CREATE TABLE IF NOT EXISTS dashboard_features (\n          feature_name TEXT PRIMARY KEY,\n          is_enabled INTEGER DEFAULT 1,\n          updated_at TEXT DEFAULT (datetime('now'))\n        )\n      `).run();\n\n      const defaultFeatures = ['affiliate-program', 'analytics', 'billing'];\n      for (const feature of defaultFeatures) {\n        await this.db.prepare(`\n          INSERT OR IGNORE INTO dashboard_features (feature_name, is_enabled)\n          VALUES (?, 1)\n        `).bind(feature).run();\n      }\n    } catch (error) {\n      console.error('Failed to initialize features:', error);\n    }\n  }\n}\n\nexport const onRequestGet = async ({ env }: { env: any }) => {\n  try {\n    const storage = new FeatureStorage(env.DB);\n    await storage.initializeFeatures();\n    const states = await storage.getFeatureStates();\n\n    const features = [\n      {\n        id: 'affiliate-program',\n        name: 'Affiliate Program',\n        description: 'Controls visibility of referral system and commission tracking',\n        isEnabled: states['affiliate-program'],\n        category: 'monetization'\n      },\n      {\n        id: 'analytics',\n        name: 'Analytics',\n        description: 'Controls visibility of usage statistics and performance metrics',\n        isEnabled: states['analytics'],\n        category: 'insights'\n      },\n      {\n        id: 'billing',\n        name: 'Billing',\n        description: 'Controls visibility of payment history and subscription management',\n        isEnabled: states['billing'],\n        category: 'payments'\n      }\n    ];\n\n    return new Response(JSON.stringify(features), {\n      headers: { \n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*'\n      }\n    });\n  } catch (error) {\n    console.error('Error getting features:', error);\n    return new Response(JSON.stringify([]), {\n      headers: { \n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*'\n      }\n    });\n  }\n};\n\nexport const onRequestPut = async ({ request, env }: { request: Request; env: any }) => {\n  try {\n    const { featureName, isEnabled } = await request.json();\n    \n    const storage = new FeatureStorage(env.DB);\n    await storage.updateFeatureState(featureName, isEnabled);\n    \n    return new Response(JSON.stringify({\n      success: true,\n      message: `Feature ${featureName} updated successfully`,\n      feature: {\n        id: featureName,\n        isEnabled\n      }\n    }), {\n      headers: { \n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*'\n      }\n    });\n    \n  } catch (error) {\n    return new Response(JSON.stringify({\n      success: false,\n      message: 'Failed to update feature'\n    }), {\n      status: 500,\n      headers: { \n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*'\n      }\n    });\n  }\n};\n\nexport const onRequestOptions = async () => {\n  return new Response(null, {\n    headers: {\n      'Access-Control-Allow-Origin': '*',\n      'Access-Control-Allow-Methods': 'GET, PUT, OPTIONS',\n      'Access-Control-Allow-Headers': 'Content-Type'\n    }\n  });\n};\n", "import { PagesFunction } from '@cloudflare/workers-types';\n\ninterface Env {\n  DB: D1Database;\n}\n\nexport const onRequestPost: PagesFunction<Env> = async ({ env }) => {\n  try {\n    // Update the banner price directly in countdown_banners table\n    const updateResult = await env.DB.prepare(`\n      UPDATE countdown_banners \n      SET targetPrice = '1.00'\n      WHERE id = 1\n    `).run();\n\n    // Verify the update\n    const updatedBanner = await env.DB.prepare(`\n      SELECT id, targetPrice, originalPrice FROM countdown_banners WHERE id = 1\n    `).first();\n\n    return new Response(JSON.stringify({\n      success: true,\n      message: 'Banner price updated to \u20AC1.00',\n      updateResult: {\n        success: updateResult.success,\n        meta: updateResult.meta\n      },\n      banner: updatedBanner\n    }), {\n      headers: {\n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*'\n      }\n    });\n\n  } catch (error) {\n    return new Response(JSON.stringify({\n      success: false,\n      error: 'Failed to update banner price',\n      details: String(error)\n    }), {\n      status: 500,\n      headers: {\n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*'\n      }\n    });\n  }\n};\n", "// Fix premium activation for existing users who have completed purchases\nexport const onRequestPost = async ({ request, env }: any) => {\n  try {\n    const body = await request.json() as { adminKey?: string };\n    \n    // Simple admin key check\n    if (body.adminKey !== 'fix-premium-2024') {\n      return new Response(JSON.stringify({\n        success: false,\n        message: 'Invalid admin key'\n      }), {\n        status: 403,\n        headers: {\n          'Content-Type': 'application/json',\n          'Access-Control-Allow-Origin': '*',\n        },\n      });\n    }\n\n    if (!env.DB) {\n      return new Response(JSON.stringify({\n        success: false,\n        message: 'Database not available'\n      }), {\n        status: 500,\n        headers: {\n          'Content-Type': 'application/json',\n          'Access-Control-Allow-Origin': '*',\n        },\n      });\n    }\n\n    const results = {\n      usersChecked: 0,\n      customersChecked: 0,\n      usersFixed: 0,\n      customersFixed: 0,\n      errors: []\n    };\n\n    // Get all customers with completed paid orders but missing premium flags\n    const customersWithOrders = await env.DB.prepare(`\n      SELECT DISTINCT c.id, c.email, c.name, c.is_premium, c.extension_activated,\n             COUNT(o.id) as orderCount, SUM(o.final_amount) as totalPaid\n      FROM customers c\n      JOIN orders o ON c.id = o.customer_id\n      WHERE o.status = 'completed' AND o.final_amount > 0\n      GROUP BY c.id, c.email, c.name, c.is_premium, c.extension_activated\n    `).all();\n\n    console.log('Found customers with completed orders:', customersWithOrders.results?.length);\n\n    for (const customer of customersWithOrders.results || []) {\n      results.customersChecked++;\n      \n      // Check if customer needs premium flags updated\n      const needsUpdate = customer.is_premium !== 1 || customer.extension_activated !== 1;\n      \n      if (needsUpdate) {\n        try {\n          await env.DB.prepare(`\n            UPDATE customers \n            SET is_premium = 1, extension_activated = 1, premium_activated_at = datetime('now')\n            WHERE id = ?\n          `).bind(customer.id).run();\n          \n          results.customersFixed++;\n          console.log(`Fixed customer ${customer.email} (ID: ${customer.id})`);\n        } catch (error) {\n          results.errors.push(`Failed to fix customer ${customer.email}: ${error.message}`);\n        }\n      }\n    }\n\n    // Get all users with completed paid orders but missing premium flags\n    const usersWithOrders = await env.DB.prepare(`\n      SELECT DISTINCT u.id, u.email, u.name, u.is_premium, u.extension_activated,\n             COUNT(o.id) as orderCount, SUM(o.final_amount) as totalPaid\n      FROM users u\n      JOIN orders o ON u.email = o.customer_email\n      WHERE o.status = 'completed' AND o.final_amount > 0\n      GROUP BY u.id, u.email, u.name, u.is_premium, u.extension_activated\n    `).all();\n\n    console.log('Found users with completed orders:', usersWithOrders.results?.length);\n\n    for (const user of usersWithOrders.results || []) {\n      results.usersChecked++;\n      \n      // Check if user needs premium flags updated\n      const needsUpdate = user.is_premium !== 1 || user.extension_activated !== 1;\n      \n      if (needsUpdate) {\n        try {\n          await env.DB.prepare(`\n            UPDATE users \n            SET is_premium = 1, extension_activated = 1, premium_activated_at = datetime('now')\n            WHERE id = ?\n          `).bind(user.id).run();\n          \n          results.usersFixed++;\n          console.log(`Fixed user ${user.email} (ID: ${user.id})`);\n        } catch (error) {\n          results.errors.push(`Failed to fix user ${user.email}: ${error.message}`);\n        }\n      }\n    }\n\n    // Create activation codes for customers who don't have them\n    const customersNeedingCodes = await env.DB.prepare(`\n      SELECT c.id, c.email\n      FROM customers c\n      WHERE c.is_premium = 1 AND c.extension_activated = 1\n      AND NOT EXISTS (\n        SELECT 1 FROM activation_codes ac WHERE ac.customer_id = c.id\n      )\n    `).all();\n\n    let codesCreated = 0;\n    for (const customer of customersNeedingCodes.results || []) {\n      try {\n        const activationCode = `OCUS-${Date.now()}-${Math.random().toString(36).substr(2, 8).toUpperCase()}`;\n        \n        await env.DB.prepare(`\n          INSERT INTO activation_codes (customer_id, code, created_at)\n          VALUES (?, ?, datetime('now'))\n        `).bind(customer.id, activationCode).run();\n        \n        codesCreated++;\n        console.log(`Created activation code for customer ${customer.email}`);\n      } catch (error) {\n        results.errors.push(`Failed to create activation code for ${customer.email}: ${error.message}`);\n      }\n    }\n\n    return new Response(JSON.stringify({\n      success: true,\n      message: 'Premium activation fix completed',\n      results: {\n        ...results,\n        activationCodesCreated: codesCreated\n      }\n    }), {\n      headers: {\n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*',\n      },\n    });\n\n  } catch (error: any) {\n    console.error('Error fixing premium users:', error);\n    return new Response(JSON.stringify({\n      success: false,\n      message: error.message\n    }), {\n      status: 500,\n      headers: {\n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*',\n      },\n    });\n  }\n};\n", "// Cloudflare Pages Function: /api/admin/fix-purchased-users\n// Fix users who have purchased but don't have premium access\n\nimport type { PagesFunction } from '@cloudflare/workers-types';\nimport { Env } from '../../lib/context';\n\nfunction json(data: any, status = 200) {\n  return new Response(JSON.stringify(data), {\n    status,\n    headers: {\n      'Content-Type': 'application/json',\n      'Access-Control-Allow-Origin': '*',\n    },\n  });\n}\n\nexport const onRequestPost: PagesFunction<Env> = async ({ request, env }) => {\n  try {\n    const body = await request.json() as { emails: string[] };\n    const { emails } = body;\n\n    if (!emails || !Array.isArray(emails)) {\n      return json({ success: false, message: 'Array of emails required' }, 400);\n    }\n\n    if (!env.DB) {\n      return json({ success: false, message: 'Database not available' }, 500);\n    }\n\n    const now = new Date().toISOString();\n    const results = [];\n\n    for (const email of emails) {\n      try {\n        // Check if user exists in users table\n        const user = await env.DB.prepare(`\n          SELECT id, email, name FROM users WHERE email = ?\n        `).bind(email).first();\n\n        if (user) {\n          // Update user premium status like heshmat@gmail.com\n          await env.DB.prepare(`\n            UPDATE users \n            SET is_premium = 1,\n                extension_activated = 1,\n                premium_activated_at = ?\n            WHERE email = ?\n          `).bind(now, email).run();\n\n          results.push({\n            email,\n            status: 'updated',\n            message: 'User premium status activated'\n          });\n        } else {\n          results.push({\n            email,\n            status: 'not_found',\n            message: 'User not found in users table'\n          });\n        }\n      } catch (error: any) {\n        results.push({\n          email,\n          status: 'error',\n          message: error.message\n        });\n      }\n    }\n\n    return json({\n      success: true,\n      message: 'Batch update completed',\n      results\n    });\n\n  } catch (error: any) {\n    console.error('Error fixing purchased users:', error);\n    return json({ \n      success: false, \n      message: error.message \n    }, 500);\n  }\n};\n", "import { PagesFunction } from '@cloudflare/workers-types';\n\ninterface Env {\n  DB: D1Database;\n}\n\nexport const onRequestGet: PagesFunction<Env> = async ({ env }) => {\n  try {\n    // Force update banner price to \u20AC1\n    const updateResult = await env.DB.prepare(`\n      UPDATE countdown_banners \n      SET targetPrice = '1.00'\n      WHERE id = 1\n    `).run();\n\n    // Verify the update worked\n    const banner = await env.DB.prepare(`\n      SELECT id, targetPrice, originalPrice FROM countdown_banners WHERE id = 1\n    `).first();\n\n    return new Response(JSON.stringify({\n      success: true,\n      message: 'Banner price force updated to \u20AC1.00',\n      updateResult: {\n        success: updateResult.success,\n        meta: updateResult.meta\n      },\n      currentBanner: banner\n    }), {\n      headers: {\n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*'\n      }\n    });\n\n  } catch (error) {\n    return new Response(JSON.stringify({\n      success: false,\n      error: 'Failed to update banner price',\n      details: String(error)\n    }), {\n      status: 500,\n      headers: {\n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*'\n      }\n    });\n  }\n};\n", "interface Env {\n  DB: D1Database;\n}\n\nexport const onRequestGet: PagesFunction<Env> = async (context) => {\n  try {\n    // Fetch all invoices with user information for admin\n    const invoicesQuery = `\n      SELECT \n        i.id,\n        i.invoice_number,\n        i.order_id,\n        i.customer_id,\n        i.amount,\n        i.currency,\n        i.tax_amount,\n        i.status,\n        i.invoice_date,\n        i.due_date,\n        i.paid_at,\n        i.created_at,\n        u.name as customer_name,\n        u.email as customer_email,\n        o.product_id,\n        o.payment_method\n      FROM invoices i\n      LEFT JOIN users u ON i.customer_id = u.id\n      LEFT JOIN orders o ON i.order_id = o.id\n      ORDER BY i.created_at DESC\n    `;\n\n    const invoicesResult = await context.env.DB.prepare(invoicesQuery).all();\n    \n    return new Response(JSON.stringify(invoicesResult.results || []), {\n      status: 200,\n      headers: { \n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*',\n        'Access-Control-Allow-Methods': 'GET, OPTIONS',\n        'Access-Control-Allow-Headers': 'Content-Type'\n      }\n    });\n\n  } catch (error) {\n    console.error('Error fetching admin invoices:', error);\n    return new Response(JSON.stringify({ error: 'Failed to fetch invoices' }), {\n      status: 500,\n      headers: { \n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*'\n      }\n    });\n  }\n};\n\nexport const onRequestOptions: PagesFunction = async () => {\n  return new Response(null, {\n    status: 200,\n    headers: {\n      'Access-Control-Allow-Origin': '*',\n      'Access-Control-Allow-Methods': 'GET, OPTIONS',\n      'Access-Control-Allow-Headers': 'Content-Type'\n    }\n  });\n};\n", "export const onRequestPost = async ({ request }: any) => {\n  try {\n    const { username, password, recaptchaToken } = await request.json();\n    \n    // Demo authentication - replace with real authentication logic\n    if (username === 'admin' && password === 'admin123') {\n      return new Response(JSON.stringify({\n        success: true,\n        user: {\n          id: 1,\n          username: 'admin',\n          role: 'admin'\n        },\n        token: 'demo-admin-jwt-token'\n      }), {\n        headers: { \n          'Content-Type': 'application/json',\n          'Access-Control-Allow-Origin': '*'\n        }\n      });\n    }\n    \n    return new Response(JSON.stringify({\n      success: false,\n      message: 'Invalid credentials'\n    }), {\n      status: 401,\n      headers: { \n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*'\n      }\n    });\n    \n  } catch (error) {\n    return new Response(JSON.stringify({\n      success: false,\n      message: 'Login failed'\n    }), {\n      status: 500,\n      headers: { \n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*'\n      }\n    });\n  }\n};\n\nexport const onRequestOptions = async () => {\n  return new Response(null, {\n    headers: {\n      'Access-Control-Allow-Origin': '*',\n      'Access-Control-Allow-Methods': 'POST, OPTIONS',\n      'Access-Control-Allow-Headers': 'Content-Type'\n    }\n  });\n};\n", "import { PagesFunction } from '@cloudflare/workers-types';\n\ninterface Env {\n  DB: D1Database;\n}\n\nexport const onRequestGet: PagesFunction<Env> = async ({ env }) => {\n  try {\n    let orders = [];\n    let stats = {\n      totalOrders: 0,\n      totalRevenue: 0,\n      completedOrders: 0,\n      pendingOrders: 0\n    };\n\n    try {\n      // Try to fetch from orders table first\n      const orderResults = await env.DB.prepare(`\n        SELECT \n          id, \n          customerEmail, \n          customerName, \n          productId,\n          originalAmount, \n          finalAmount, \n          currency, \n          status, \n          paymentMethod,\n          downloadToken, \n          downloadCount, \n          maxDownloads, \n          activationCode,\n          createdAt, \n          completedAt\n        FROM orders \n        ORDER BY createdAt DESC\n      `).all();\n      orders = orderResults.results || [];\n\n      // Get order statistics\n      const statsResult = await env.DB.prepare(`\n        SELECT \n          COUNT(*) as totalOrders,\n          SUM(CASE WHEN status = 'completed' THEN CAST(finalAmount as REAL) ELSE 0 END) as totalRevenue,\n          COUNT(CASE WHEN status = 'completed' THEN 1 END) as completedOrders,\n          COUNT(CASE WHEN status = 'pending' THEN 1 END) as pendingOrders\n        FROM orders\n      `).first();\n      if (statsResult) {\n        stats = {\n          totalOrders: Number(statsResult.totalOrders) || 0,\n          totalRevenue: Number(statsResult.totalRevenue) || 0,\n          completedOrders: Number(statsResult.completedOrders) || 0,\n          pendingOrders: Number(statsResult.pendingOrders) || 0\n        };\n      }\n    } catch (dbError) {\n      console.log('Orders table not found, checking fallback storage:', dbError);\n      \n      // Fallback: Get orders from settings table\n      const settingsResults = await env.DB.prepare(`\n        SELECT key, value FROM settings \n        WHERE key LIKE 'order_%'\n      `).all();\n      \n      const allOrders = [];\n      for (const setting of (settingsResults.results || [])) {\n        try {\n          const orderData = JSON.parse(setting.value as string);\n          allOrders.push(orderData);\n        } catch (parseError) {\n          console.log('Error parsing order data:', parseError);\n        }\n      }\n      \n      // Sort by completedAt or createdAt\n      orders = allOrders.sort((a, b) => {\n        const dateA = new Date(a.completedAt || a.createdAt);\n        const dateB = new Date(b.completedAt || b.createdAt);\n        return dateB.getTime() - dateA.getTime();\n      });\n      \n      // Calculate stats from fallback data\n      stats.totalOrders = orders.length;\n      stats.completedOrders = orders.filter(o => o.status === 'completed').length;\n      stats.pendingOrders = orders.filter(o => o.status === 'pending').length;\n      stats.totalRevenue = orders\n        .filter(o => o.status === 'completed')\n        .reduce((sum, o) => sum + (parseFloat(o.finalAmount) || 0), 0);\n    }\n\n    return new Response(JSON.stringify({\n      success: true,\n      orders: orders,\n      stats: stats\n    }), {\n      headers: {\n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*'\n      }\n    });\n\n  } catch (error) {\n    console.error('Error fetching admin orders:', error);\n    return new Response(JSON.stringify({\n      success: false,\n      error: 'Failed to fetch orders',\n      details: String(error)\n    }), {\n      status: 500,\n      headers: {\n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*'\n      }\n    });\n  }\n};\n\nexport const onRequestOptions: PagesFunction<Env> = async () => {\n  return new Response(null, {\n    status: 200,\n    headers: {\n      'Access-Control-Allow-Origin': '*',\n      'Access-Control-Allow-Methods': 'GET, OPTIONS',\n      'Access-Control-Allow-Headers': 'Content-Type',\n    },\n  });\n};\n", "import type { PagesFunction } from '@cloudflare/workers-types';\nimport { Env } from '../../lib/context';\n\ninterface PaymentSettings {\n  stripeEnabled?: boolean;\n  paypalEnabled?: boolean;\n  stripePublicKey?: string;\n  stripeSecretKey?: string;\n  paypalClientId?: string;\n  paypalClientSecret?: string;\n  defaultPaymentMethod?: string;\n}\n\nexport const onRequestGet: PagesFunction<Env> = async ({ env }) => {\n  try {\n    // Get payment settings from database\n    const result = await env.DB.prepare(`\n      SELECT key, value FROM settings \n      WHERE key LIKE 'payment_%'\n    `).all();\n\n    // Convert database results to settings object\n    const settings: any = {\n      stripeEnabled: false,\n      paypalEnabled: false,\n      stripePublicKey: '',\n      stripeSecretKey: '',\n      paypalClientId: '',\n      paypalClientSecret: '',\n      defaultPaymentMethod: 'stripe'\n    };\n\n    // Map database values to settings\n    result.results?.forEach((row: any) => {\n      const key = row.key.replace('payment_', '');\n      let value = row.value;\n      \n      // Parse boolean values\n      if (value === 'true') value = true;\n      if (value === 'false') value = false;\n      \n      settings[key] = value;\n    });\n\n    return new Response(JSON.stringify(settings), {\n      headers: { \n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*'\n      }\n    });\n  } catch (error) {\n    console.error('Error fetching payment settings:', error);\n    \n    // Return default settings on error\n    const defaultSettings = {\n      stripeEnabled: false,\n      paypalEnabled: false,\n      stripePublicKey: '',\n      stripeSecretKey: '',\n      paypalClientId: '',\n      paypalClientSecret: '',\n      defaultPaymentMethod: 'stripe'\n    };\n\n    return new Response(JSON.stringify(defaultSettings), {\n      headers: { \n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*'\n      }\n    });\n  }\n};\n\nexport const onRequestPut: PagesFunction<Env> = async ({ request, env }) => {\n  try {\n    const settings = await request.json() as PaymentSettings;\n    \n    // Prepare batch insert/update for all payment settings\n    const settingsToSave = [\n      { key: 'payment_stripeEnabled', value: String(settings.stripeEnabled || false) },\n      { key: 'payment_paypalEnabled', value: String(settings.paypalEnabled || false) },\n      { key: 'payment_stripePublicKey', value: settings.stripePublicKey || '' },\n      { key: 'payment_stripeSecretKey', value: settings.stripeSecretKey || '' },\n      { key: 'payment_paypalClientId', value: settings.paypalClientId || '' },\n      { key: 'payment_paypalClientSecret', value: settings.paypalClientSecret || '' },\n      { key: 'payment_defaultPaymentMethod', value: settings.defaultPaymentMethod || 'stripe' }\n    ];\n\n    // Use transaction to ensure all settings are saved atomically\n    await env.DB.batch([\n      // First, delete existing payment settings\n      env.DB.prepare(`DELETE FROM settings WHERE key LIKE 'payment_%'`),\n      // Then insert new settings\n      ...settingsToSave.map(setting => \n        env.DB.prepare(`INSERT INTO settings (key, value) VALUES (?, ?)`)\n          .bind(setting.key, setting.value)\n      )\n    ]);\n\n    return new Response(JSON.stringify({\n      success: true,\n      message: 'Payment settings saved successfully',\n      settings\n    }), {\n      headers: { \n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*'\n      }\n    });\n    \n  } catch (error) {\n    console.error('Error saving payment settings:', error);\n    \n    return new Response(JSON.stringify({\n      success: false,\n      message: 'Failed to save payment settings',\n      error: error instanceof Error ? error.message : 'Unknown error'\n    }), {\n      status: 500,\n      headers: { \n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*'\n      }\n    });\n  }\n};\n\nexport const onRequestOptions = async () => {\n  return new Response(null, {\n    headers: {\n      'Access-Control-Allow-Origin': '*',\n      'Access-Control-Allow-Methods': 'GET, PUT, OPTIONS',\n      'Access-Control-Allow-Headers': 'Content-Type'\n    }\n  });\n};\n", "export async function onRequestGet(context: any) {\n  const { env } = context;\n  \n  try {\n    // Fetch the current product pricing from D1 database\n    const selectQuery = `SELECT * FROM products WHERE id = 1 AND isActive = 1`;\n    const result = await env.DB.prepare(selectQuery).first();\n\n    if (!result) {\n      // Return default pricing if no product found\n      return new Response(JSON.stringify({\n        id: 1,\n        name: \"OCUS Job Hunter Extension\",\n        price: \"250.00\",\n        beforePrice: null\n      }), {\n        status: 200,\n        headers: {\n          'Content-Type': 'application/json',\n          'Access-Control-Allow-Origin': '*',\n          'Access-Control-Allow-Methods': 'GET, POST, PUT, DELETE, OPTIONS',\n          'Access-Control-Allow-Headers': 'Content-Type, Authorization'\n        }\n      });\n    }\n\n    // Return the product pricing\n    return new Response(JSON.stringify({\n      id: result.id,\n      name: result.name,\n      price: result.price.toString(),\n      beforePrice: result.beforePrice ? result.beforePrice.toString() : null\n    }), {\n      status: 200,\n      headers: {\n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*',\n        'Access-Control-Allow-Methods': 'GET, POST, PUT, DELETE, OPTIONS',\n        'Access-Control-Allow-Headers': 'Content-Type, Authorization'\n      }\n    });\n\n  } catch (error: any) {\n    console.error(\"Error fetching pricing:\", error);\n    return new Response(JSON.stringify({ \n      message: \"Error fetching pricing: \" + error.message \n    }), {\n      status: 500,\n      headers: {\n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*',\n        'Access-Control-Allow-Methods': 'GET, POST, PUT, DELETE, OPTIONS',\n        'Access-Control-Allow-Headers': 'Content-Type, Authorization'\n      }\n    });\n  }\n}\n\nexport async function onRequestPut(context: any) {\n  const { request, env } = context;\n  \n  try {\n    const body = await request.json();\n    const { price, beforePrice } = body;\n\n    if (!price || price <= 0) {\n      return new Response(JSON.stringify({ message: \"Valid price is required\" }), {\n        status: 400,\n        headers: {\n          'Content-Type': 'application/json',\n          'Access-Control-Allow-Origin': '*',\n          'Access-Control-Allow-Methods': 'GET, POST, PUT, DELETE, OPTIONS',\n          'Access-Control-Allow-Headers': 'Content-Type, Authorization'\n        }\n      });\n    }\n\n    if (beforePrice && beforePrice <= price) {\n      return new Response(JSON.stringify({ message: \"Before price must be higher than current price\" }), {\n        status: 400,\n        headers: {\n          'Content-Type': 'application/json',\n          'Access-Control-Allow-Origin': '*',\n          'Access-Control-Allow-Methods': 'GET, POST, PUT, DELETE, OPTIONS',\n          'Access-Control-Allow-Headers': 'Content-Type, Authorization'\n        }\n      });\n    }\n\n    // Update or create product pricing in D1 database\n    const updateQuery = `\n      INSERT OR REPLACE INTO products (id, name, price, beforePrice, updatedAt)\n      VALUES (1, 'OCUS Job Hunter Extension', ?, ?, datetime('now'))\n    `;\n\n    await env.DB.prepare(updateQuery)\n      .bind(price, beforePrice || null)\n      .run();\n\n    // Fetch the updated product\n    const selectQuery = `SELECT * FROM products WHERE id = 1`;\n    const result = await env.DB.prepare(selectQuery).first();\n\n    return new Response(JSON.stringify({ \n      success: true, \n      product: result,\n      message: \"Pricing updated successfully\" \n    }), {\n      status: 200,\n      headers: {\n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*',\n        'Access-Control-Allow-Methods': 'GET, POST, PUT, DELETE, OPTIONS',\n        'Access-Control-Allow-Headers': 'Content-Type, Authorization'\n      }\n    });\n\n  } catch (error: any) {\n    console.error(\"Error updating pricing:\", error);\n    return new Response(JSON.stringify({ message: \"Error updating pricing: \" + error.message }), {\n      status: 500,\n      headers: {\n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*',\n        'Access-Control-Allow-Methods': 'GET, POST, PUT, DELETE, OPTIONS',\n        'Access-Control-Allow-Headers': 'Content-Type, Authorization'\n      }\n    });\n  }\n}\n\nexport async function onRequestOptions(context: any) {\n  return new Response(null, {\n    status: 200,\n    headers: {\n      'Access-Control-Allow-Origin': '*',\n      'Access-Control-Allow-Methods': 'GET, POST, PUT, DELETE, OPTIONS',\n      'Access-Control-Allow-Headers': 'Content-Type, Authorization'\n    }\n  });\n}\n", "// functions/api/admin/reset-db.ts\nimport type { PagesFunction } from '@cloudflare/workers-types';\nimport { Env } from '../../lib/context';\n\nconst SCHEMA_SQL = `-- D1 Database Schema for OCUS Ticket System\n-- Run: wrangler d1 execute ocus-tickets --file=./functions/schema.sql\n\n-- Drop existing tables if they exist (for development)\nDROP TABLE IF EXISTS ticket_messages;\nDROP TABLE IF EXISTS tickets;\nDROP TABLE IF EXISTS countdown_banners;\nDROP TABLE IF EXISTS orders;\nDROP TABLE IF EXISTS products;\nDROP TABLE IF EXISTS auth_settings;\nDROP TABLE IF EXISTS settings;\nDROP TABLE IF EXISTS users;\nDROP TABLE IF EXISTS customers;\nDROP TABLE IF EXISTS invoices;\nDROP TABLE IF EXISTS activation_codes;\n\nCREATE TABLE IF NOT EXISTS tickets (\n  id INTEGER PRIMARY KEY AUTOINCREMENT,\n  title TEXT NOT NULL,\n  description TEXT NOT NULL,\n  category TEXT NOT NULL DEFAULT 'general',\n  priority TEXT NOT NULL DEFAULT 'medium',\n  status TEXT NOT NULL DEFAULT 'open',\n  customer_email TEXT NOT NULL,\n  customer_name TEXT NOT NULL,\n  assigned_to_user_id INTEGER,\n  created_at TEXT NOT NULL DEFAULT (datetime('now')),\n  updated_at TEXT NOT NULL DEFAULT (datetime('now')),\n  resolved_at TEXT,\n  archived_at TEXT\n);\n\nCREATE TABLE IF NOT EXISTS ticket_messages (\n  id INTEGER PRIMARY KEY AUTOINCREMENT,\n  ticket_id INTEGER NOT NULL,\n  message TEXT NOT NULL,\n  is_from_customer BOOLEAN NOT NULL DEFAULT 1,\n  sender_name TEXT NOT NULL,\n  sender_email TEXT,\n  created_at TEXT NOT NULL DEFAULT (datetime('now')),\n  FOREIGN KEY (ticket_id) REFERENCES tickets(id) ON DELETE CASCADE\n);\n\n-- Countdown Banners Table\nCREATE TABLE IF NOT EXISTS countdown_banners (\n  id INTEGER PRIMARY KEY AUTOINCREMENT,\n  title TEXT NOT NULL,\n  subtitle TEXT NOT NULL,\n  titleTranslations TEXT,\n  subtitleTranslations TEXT,\n  targetPrice REAL NOT NULL,\n  originalPrice REAL,\n  endDate TEXT NOT NULL,\n  priority INTEGER NOT NULL DEFAULT 0,\n  backgroundColor TEXT NOT NULL DEFAULT '#000000',\n  textColor TEXT NOT NULL DEFAULT '#ffffff',\n  isActive BOOLEAN NOT NULL DEFAULT 0,\n  createdAt TEXT NOT NULL DEFAULT (datetime('now')),\n  updatedAt TEXT NOT NULL DEFAULT (datetime('now'))\n);\n\n-- Products Table\nCREATE TABLE IF NOT EXISTS products (\n  id INTEGER PRIMARY KEY AUTOINCREMENT,\n  name TEXT NOT NULL DEFAULT 'OCUS Job Hunter Extension',\n  price REAL NOT NULL,\n  beforePrice REAL,\n  description TEXT,\n  isActive BOOLEAN NOT NULL DEFAULT 1,\n  createdAt TEXT NOT NULL DEFAULT (datetime('now')),\n  updatedAt TEXT NOT NULL DEFAULT (datetime('now'))\n);\n\n-- Insert default product if not exists\nINSERT OR IGNORE INTO products (id, name, price, beforePrice) \nVALUES (1, 'OCUS Job Hunter Extension', 250.00, NULL);\n\n-- Auth Settings Table\nCREATE TABLE IF NOT EXISTS auth_settings (\n  id INTEGER PRIMARY KEY AUTOINCREMENT,\n  google_enabled BOOLEAN DEFAULT 0,\n  google_client_id TEXT,\n  google_client_secret TEXT,\n  facebook_enabled BOOLEAN DEFAULT 0,\n  facebook_app_id TEXT,\n  facebook_app_secret TEXT,\n  github_enabled BOOLEAN DEFAULT 0,\n  github_client_id TEXT,\n  github_client_secret TEXT,\n  recaptcha_enabled BOOLEAN DEFAULT 0,\n  recaptcha_site_key TEXT,\n  recaptcha_secret_key TEXT,\n  recaptcha_mode TEXT DEFAULT 'v2',\n  recaptcha_customer_enabled BOOLEAN DEFAULT 0,\n  recaptcha_admin_enabled BOOLEAN DEFAULT 0,\n  jwt_secret TEXT DEFAULT 'demo-jwt-secret',\n  session_timeout INTEGER DEFAULT 3600,\n  stripe_enabled BOOLEAN DEFAULT 0,\n  stripe_public_key TEXT,\n  stripe_secret_key TEXT,\n  created_at TEXT NOT NULL DEFAULT (datetime('now')),\n  updated_at TEXT NOT NULL DEFAULT (datetime('now'))\n);\n\n-- Insert default auth settings if not exists\nINSERT OR IGNORE INTO auth_settings (id) VALUES (1);\n\n-- Generic Settings Table for flexible key-value storage\nCREATE TABLE IF NOT EXISTS settings (\n  id INTEGER PRIMARY KEY AUTOINCREMENT,\n  key TEXT NOT NULL UNIQUE,\n  value TEXT,\n  created_at TEXT NOT NULL DEFAULT (datetime('now')),\n  updated_at TEXT NOT NULL DEFAULT (datetime('now'))\n);\n\n-- Orders/Purchases Table\nCREATE TABLE IF NOT EXISTS orders (\n  id INTEGER PRIMARY KEY AUTOINCREMENT,\n  customerId INTEGER,\n  customerEmail TEXT NOT NULL,\n  customerName TEXT NOT NULL,\n  productId INTEGER NOT NULL,\n  productName TEXT NOT NULL,\n  originalAmount REAL NOT NULL,\n  finalAmount REAL NOT NULL,\n  currency TEXT NOT NULL DEFAULT 'EUR',\n  status TEXT NOT NULL DEFAULT 'pending',\n  paymentMethod TEXT NOT NULL DEFAULT 'stripe',\n  paymentIntentId TEXT,\n  downloadToken TEXT UNIQUE,\n  downloadCount INTEGER DEFAULT 0,\n  maxDownloads INTEGER DEFAULT 5,\n  activationCode TEXT,\n  invoiceNumber TEXT UNIQUE,\n  createdAt TEXT NOT NULL DEFAULT (datetime('now')),\n  completedAt TEXT,\n  FOREIGN KEY (productId) REFERENCES products(id)\n);\n\n-- Customers Table (renamed from users for clarity)\nCREATE TABLE IF NOT EXISTS customers (\n  id INTEGER PRIMARY KEY AUTOINCREMENT,\n  email TEXT UNIQUE NOT NULL,\n  name TEXT NOT NULL,\n  hashedPassword TEXT,\n  isActive BOOLEAN DEFAULT 1,\n  isPremium BOOLEAN DEFAULT 0, -- Deprecated, use extension_activated\n  extension_activated BOOLEAN DEFAULT 0,\n  registrationDate TEXT NOT NULL DEFAULT (datetime('now')),\n  lastLoginAt TEXT,\n  activationToken TEXT,\n  passwordResetToken TEXT,\n  createdAt TEXT NOT NULL DEFAULT (datetime('now')),\n  updatedAt TEXT NOT NULL DEFAULT (datetime('now'))\n);\n\n-- Create a view for backward compatibility if 'users' is still used elsewhere\nCREATE VIEW IF NOT EXISTS users AS SELECT * FROM customers;\n\nCREATE TABLE IF NOT EXISTS activation_codes (\n    id INTEGER PRIMARY KEY AUTOINCREMENT,\n    order_id INTEGER NOT NULL,\n    code TEXT NOT NULL UNIQUE,\n    is_used BOOLEAN DEFAULT 0,\n    created_at TEXT DEFAULT (datetime('now')),\n    FOREIGN KEY (order_id) REFERENCES orders(id)\n);\n\n-- Invoices Table\nCREATE TABLE IF NOT EXISTS invoices (\n  id INTEGER PRIMARY KEY AUTOINCREMENT,\n  orderId INTEGER NOT NULL,\n  customerId INTEGER NOT NULL,\n  invoiceNumber TEXT NOT NULL UNIQUE,\n  amount REAL NOT NULL,\n  currency TEXT NOT NULL DEFAULT 'EUR',\n  taxAmount REAL DEFAULT 0,\n  status TEXT NOT NULL DEFAULT 'unpaid', -- unpaid, paid, void\n  invoiceDate TEXT NOT NULL DEFAULT (datetime('now')),\n  dueDate TEXT,\n  paidAt TEXT,\n  pdfUrl TEXT,\n  createdAt TEXT NOT NULL DEFAULT (datetime('now')),\n  updatedAt TEXT NOT NULL DEFAULT (datetime('now')),\n  FOREIGN KEY (orderId) REFERENCES orders(id),\n  FOREIGN KEY (customerId) REFERENCES customers(id)\n);\n\n\n-- Index for settings lookup\nCREATE INDEX IF NOT EXISTS idx_settings_key ON settings(key);\n\n-- Indexes for performance\nCREATE INDEX IF NOT EXISTS idx_tickets_customer_email ON tickets(customer_email);\nCREATE INDEX IF NOT EXISTS idx_tickets_status ON tickets(status);\nCREATE INDEX IF NOT EXISTS idx_tickets_created_at ON tickets(created_at);\nCREATE INDEX IF NOT EXISTS idx_ticket_messages_ticket_id ON ticket_messages(ticket_id);\nCREATE INDEX IF NOT EXISTS idx_ticket_messages_created_at ON ticket_messages(created_at);\nCREATE INDEX IF NOT EXISTS idx_countdown_banners_active ON countdown_banners(isActive);\nCREATE INDEX IF NOT EXISTS idx_countdown_banners_priority ON countdown_banners(priority);\nCREATE INDEX IF NOT EXISTS idx_products_active ON products(isActive);\nCREATE INDEX IF NOT EXISTS idx_orders_customer_email ON orders(customerEmail);\nCREATE INDEX IF NOT EXISTS idx_orders_status ON orders(status);\nCREATE INDEX IF NOT EXISTS idx_orders_created_at ON orders(createdAt);\nCREATE INDEX IF NOT EXISTS idx_customers_email ON customers(email);\nCREATE INDEX IF NOT EXISTS idx_customers_active ON customers(isActive);\nCREATE INDEX IF NOT EXISTS idx_invoices_customer_id ON invoices(customerId);\nCREATE INDEX IF NOT EXISTS idx_invoices_order_id ON invoices(orderId);\nCREATE INDEX IF NOT EXISTS idx_orders_customer_id ON orders(customerId);\n`;\n\nfunction toD1Batch(db: D1Database, sql: string): D1PreparedStatement[] {\n    return sql.split(';').filter(query => query.trim() !== '').map(query => db.prepare(query));\n}\n\nexport const onRequestPost: PagesFunction<Env> = async (context) => {\n    const { request, env } = context;\n\n    // Simple security check for development\n    const adminSecret = request.headers.get('X-Admin-Secret');\n    if (adminSecret !== 'ocus-power-secret') { // Use a more secure secret in production\n        return new Response('Unauthorized', { status: 401 });\n    }\n\n    try {\n        if (!env.DB) {\n            return new Response('Database not available', { status: 500 });\n        }\n        const statements = toD1Batch(env.DB, SCHEMA_SQL);\n        await env.DB.batch(statements);\n        \n        return new Response('Database reset and initialized successfully.', {\n            status: 200,\n            headers: { 'Content-Type': 'text/plain' },\n        });\n    } catch (error: any) {\n        console.error('Database reset failed:', error);\n        return new Response(`Database reset failed: ${error.message}`, {\n            status: 500,\n            headers: { 'Content-Type': 'text/plain' },\n        });\n    }\n};\n\nexport const onRequestOptions: PagesFunction = async () => {\n    return new Response(null, {\n      status: 204,\n      headers: {\n        'Access-Control-Allow-Origin': '*',\n        'Access-Control-Allow-Methods': 'POST, OPTIONS',\n        'Access-Control-Allow-Headers': 'Content-Type, X-Admin-Secret',\n      },\n    });\n};\n", "import { SettingsStorage } from '../../lib/settings-storage';\n\nexport const onRequestGet = async ({ env }: any) => {\n  try {\n    if (!env.DB) {\n      return new Response(JSON.stringify({\n        success: false,\n        message: 'Database not available'\n      }), {\n        status: 500,\n        headers: { \n          'Content-Type': 'application/json',\n          'Access-Control-Allow-Origin': '*'\n        }\n      });\n    }\n\n    const settingsStorage = new SettingsStorage(env.DB);\n    await settingsStorage.initializeSettings();\n    \n    // Get SEO settings from database\n    const title = await settingsStorage.getSetting('seo_title') || 'OCUS Job Hunter';\n    const description = await settingsStorage.getSetting('seo_description') || 'Automated job application Chrome extension';\n    const keywords = await settingsStorage.getSetting('seo_keywords') || 'job hunting, automation, chrome extension';\n    const coverImage = await settingsStorage.getSetting('seo_cover_image') || '';\n    const logo = await settingsStorage.getSetting('seo_logo') || '';\n    const favicon = await settingsStorage.getSetting('seo_favicon') || '';\n\n    console.log('GET SEO Settings - Retrieved from DB:', {\n      title,\n      description,\n      keywords,\n      coverImage: coverImage ? 'Has image data' : 'No image',\n      logo: logo ? 'Has logo data' : 'No logo',\n      favicon: favicon ? 'Has favicon data' : 'No favicon'\n    });\n\n    return new Response(JSON.stringify({\n      success: true,\n      title,\n      description,\n      keywords,\n      coverImage,\n      logo,\n      favicon\n    }), {\n      headers: { \n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*'\n      }\n    });\n    \n  } catch (error) {\n    console.error('Failed to get SEO settings:', error);\n    return new Response(JSON.stringify({\n      success: false,\n      message: 'Failed to load SEO settings'\n    }), {\n      status: 500,\n      headers: { \n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*'\n      }\n    });\n  }\n};\n\nexport const onRequestPut = async ({ request, env }: any) => {\n  try {\n    if (!env.DB) {\n      return new Response(JSON.stringify({\n        success: false,\n        message: 'Database not available'\n      }), {\n        status: 500,\n        headers: { \n          'Content-Type': 'application/json',\n          'Access-Control-Allow-Origin': '*'\n        }\n      });\n    }\n\n    const formData = await request.formData();\n    \n    const settingsStorage = new SettingsStorage(env.DB);\n    await settingsStorage.initializeSettings();\n    \n    console.log('FormData keys:', Array.from(formData.keys()));\n    console.log('FormData entries:');\n    for (const [key, value] of formData.entries()) {\n      console.log(`${key}:`, value instanceof File ? `File(${value.name}, ${value.size} bytes)` : value);\n    }\n\n    // Handle text fields\n    const title = formData.get('title')?.toString();\n    const description = formData.get('description')?.toString();\n    const keywords = formData.get('keywords')?.toString();\n    \n    if (title) {\n      await settingsStorage.setSetting('seo_title', title);\n    }\n    if (description) {\n      await settingsStorage.setSetting('seo_description', description);\n    }\n    if (keywords) {\n      await settingsStorage.setSetting('seo_keywords', keywords);\n    }\n    \n    // Handle file uploads\n    const coverImageFile = formData.get('coverImage') as File;\n    const logoFile = formData.get('logo') as File;\n    const faviconFile = formData.get('favicon') as File;\n    \n    console.log('File uploads check:', {\n      coverImage: coverImageFile ? `${coverImageFile.name} (${coverImageFile.size} bytes)` : 'null',\n      logo: logoFile ? `${logoFile.name} (${logoFile.size} bytes)` : 'null',\n      favicon: faviconFile ? `${faviconFile.name} (${faviconFile.size} bytes)` : 'null'\n    });\n    \n    if (coverImageFile && coverImageFile.size > 0) {\n      console.log('Processing cover image:', coverImageFile.name, coverImageFile.type, coverImageFile.size);\n      const arrayBuffer = await coverImageFile.arrayBuffer();\n      const base64 = btoa(String.fromCharCode(...new Uint8Array(arrayBuffer)));\n      const dataUrl = `data:${coverImageFile.type};base64,${base64}`;\n      console.log('Saving cover image to DB, data URL length:', dataUrl.length);\n      await settingsStorage.setSetting('seo_cover_image', dataUrl);\n      console.log('Cover image saved successfully');\n    }\n    \n    if (logoFile && logoFile.size > 0) {\n      const arrayBuffer = await logoFile.arrayBuffer();\n      const base64 = btoa(String.fromCharCode(...new Uint8Array(arrayBuffer)));\n      const dataUrl = `data:${logoFile.type};base64,${base64}`;\n      await settingsStorage.setSetting('seo_logo', dataUrl);\n    }\n    \n    if (faviconFile && faviconFile.size > 0) {\n      const arrayBuffer = await faviconFile.arrayBuffer();\n      const base64 = btoa(String.fromCharCode(...new Uint8Array(arrayBuffer)));\n      const dataUrl = `data:${faviconFile.type};base64,${base64}`;\n      await settingsStorage.setSetting('seo_favicon', dataUrl);\n    }\n\n    console.log('SEO settings updated successfully');\n\n    return new Response(JSON.stringify({\n      success: true,\n      message: 'SEO settings updated successfully'\n    }), {\n      headers: { \n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*'\n      }\n    });\n    \n  } catch (error) {\n    console.error('Failed to update SEO settings:', error);\n    return new Response(JSON.stringify({\n      success: false,\n      message: `Failed to update SEO settings: ${error.message || error}`\n    }), {\n      status: 500,\n      headers: { \n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*'\n      }\n    });\n  }\n};\n\nexport const onRequestPatch = async ({ request, env }: any) => {\n  try {\n    if (!env.DB) {\n      return new Response(JSON.stringify({\n        success: false,\n        message: 'Database not available'\n      }), {\n        status: 500,\n        headers: { \n          'Content-Type': 'application/json',\n          'Access-Control-Allow-Origin': '*'\n        }\n      });\n    }\n\n    const data = await request.json();\n    \n    const settingsStorage = new SettingsStorage(env.DB);\n    await settingsStorage.initializeSettings();\n    \n    // Handle text fields only for PATCH\n    if (data.title) {\n      await settingsStorage.setSetting('seo_title', data.title);\n    }\n    if (data.description) {\n      await settingsStorage.setSetting('seo_description', data.description);\n    }\n    if (data.keywords) {\n      await settingsStorage.setSetting('seo_keywords', data.keywords);\n    }\n\n    console.log('SEO text settings updated successfully');\n\n    return new Response(JSON.stringify({\n      success: true,\n      message: 'SEO settings updated successfully'\n    }), {\n      headers: { \n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*'\n      }\n    });\n    \n  } catch (error) {\n    console.error('Failed to update SEO text settings:', error);\n    return new Response(JSON.stringify({\n      success: false,\n      message: `Failed to update SEO settings: ${error.message || error}`\n    }), {\n      status: 500,\n      headers: { \n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*'\n      }\n    });\n  }\n};\n\nexport const onRequestOptions = async () => {\n  return new Response(null, {\n    status: 200,\n    headers: {\n      'Access-Control-Allow-Origin': '*',\n      'Access-Control-Allow-Methods': 'GET, PUT, PATCH, OPTIONS',\n      'Access-Control-Allow-Headers': 'Content-Type, Authorization',\n    },\n  });\n};\n", "export const onRequestGet = async () => {\n  // Demo admin statistics\n  const stats = {\n    totalUsers: 1247,\n    activeUsers: 892,\n    newUsersToday: 23,\n    totalTickets: 156,\n    openTickets: 34,\n    resolvedTickets: 122,\n    revenue: {\n      monthly: 15420,\n      yearly: 184500,\n      growth: 12.5\n    },\n    userGrowth: [\n      { month: 'Jan', users: 1100 },\n      { month: 'Feb', users: 1180 },\n      { month: 'Mar', users: 1247 }\n    ],\n    ticketStats: [\n      { category: 'Technical', count: 45 },\n      { category: 'Billing', count: 32 },\n      { category: 'Feature Request', count: 28 },\n      { category: 'General', count: 51 }\n    ],\n    recentActivity: [\n      { time: '2 min ago', action: 'New user registration: john@example.com' },\n      { time: '5 min ago', action: 'Ticket #156 resolved by support team' },\n      { time: '12 min ago', action: 'Payment received: $49.99 from user #1234' }\n    ]\n  };\n\n  return new Response(JSON.stringify(stats), {\n    headers: { \n      'Content-Type': 'application/json',\n      'Access-Control-Allow-Origin': '*'\n    }\n  });\n};\n\nexport const onRequestOptions = async () => {\n  return new Response(null, {\n    headers: {\n      'Access-Control-Allow-Origin': '*',\n      'Access-Control-Allow-Methods': 'GET, OPTIONS',\n      'Access-Control-Allow-Headers': 'Content-Type'\n    }\n  });\n};\n", "import { PagesFunction } from '@cloudflare/workers-types';\nimport { SettingsStorage } from '../../lib/settings-storage';\n\ninterface Env {\n  DB: D1Database;\n}\n\nexport const onRequestPost: PagesFunction<Env> = async ({ request, env }) => {\n  try {\n    const requestData = await request.json() as { targetPrice: number };\n    const { targetPrice } = requestData;\n    \n    if (!targetPrice) {\n      return new Response(JSON.stringify({ error: 'targetPrice is required' }), {\n        status: 400,\n        headers: {\n          'Content-Type': 'application/json',\n          'Access-Control-Allow-Origin': '*'\n        }\n      });\n    }\n\n    const settingsStorage = new SettingsStorage(env.DB);\n    \n    // Update settings table (admin dashboard storage)\n    const bannersData = await settingsStorage.getSetting('countdown_banners');\n    let banners = bannersData ? JSON.parse(bannersData) : [];\n    \n    if (banners.length === 0) {\n      // Create default banner in settings\n      banners = [{\n        id: '1',\n        title: 'Limited Time Offer!',\n        subtitle: 'Get OCUS Job Hunter Extension at Special Price',\n        targetPrice: targetPrice,\n        originalPrice: 299.99,\n        endDate: new Date(Date.now() + 7 * 24 * 60 * 60 * 1000).toISOString(),\n        priority: 1,\n        backgroundColor: '#FF6B35',\n        textColor: '#FFFFFF',\n        isActive: true,\n        createdAt: new Date().toISOString(),\n        updatedAt: new Date().toISOString()\n      }];\n    } else {\n      // Update existing banner\n      banners[0].targetPrice = targetPrice;\n      banners[0].updatedAt = new Date().toISOString();\n    }\n    \n    await settingsStorage.setSetting('countdown_banners', JSON.stringify(banners));\n    \n    // Update products table\n    const updateProductResult = await env.DB.prepare(`\n      UPDATE products \n      SET price = ? \n      WHERE id = 1\n    `).bind(targetPrice.toString()).run();\n\n    return new Response(JSON.stringify({\n      success: true,\n      message: 'Banner price synced successfully',\n      targetPrice: targetPrice\n    }), {\n      headers: {\n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*'\n      }\n    });\n\n  } catch (error) {\n    return new Response(JSON.stringify({\n      success: false,\n      error: 'Failed to sync banner price',\n      details: String(error)\n    }), {\n      status: 500,\n      headers: {\n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*'\n      }\n    });\n  }\n};\n\nexport const onRequestOptions: PagesFunction<Env> = async () => {\n  return new Response(null, {\n    status: 200,\n    headers: {\n      'Access-Control-Allow-Origin': '*',\n      'Access-Control-Allow-Methods': 'POST, OPTIONS',\n      'Access-Control-Allow-Headers': 'Content-Type',\n    },\n  });\n};\n", "import { TicketStorage, Env } from '../../lib/db';\n\nfunction mapStatus(status: string) {\n  // Admin UI expects: 'open' | 'in_progress' | 'closed'\n  if (status === 'in-progress') return 'in_progress';\n  if (status === 'resolved') return 'closed';\n  return status || 'open';\n}\n\nexport const onRequestGet = async ({ request, env }: { request: Request; env: Env }) => {\n  const expressBase: string | undefined = env?.EXPRESS_API_BASE;\n  if (expressBase) {\n    const base = expressBase.replace(/\\/$/, \"\");\n    const url = `${base}/api/admin/tickets`;\n    const headers: Record<string, string> = {};\n    const cookie = request.headers.get('cookie');\n    const auth = request.headers.get('authorization');\n    if (cookie) headers['cookie'] = cookie;\n    if (auth) headers['authorization'] = auth;\n    const proxied = await fetch(url, { headers, redirect: 'manual' });\n    // Clone headers to safely adjust Set-Cookie for the Pages host\n    const respHeaders = new Headers(proxied.headers);\n    const setCookie = respHeaders.get('set-cookie');\n    if (setCookie) {\n      // Remove Domain attribute so cookie is scoped to current host (Pages domain)\n      const rewritten = setCookie.replace(/;\\s*Domain=[^;]+/i, '');\n      respHeaders.delete('set-cookie');\n      respHeaders.append('set-cookie', rewritten);\n    }\n    return new Response(proxied.body, { status: proxied.status, headers: respHeaders });\n  }\n\n  const storage = new TicketStorage(env.DB);\n  const allTickets = await storage.getAllTickets();\n  const tickets = allTickets.map((t) => ({\n    id: t.id,\n    title: t.title,\n    description: t.description,\n    status: mapStatus(t.status),\n    priority: t.priority,\n    userId: t.assigned_to_user_id || 0,\n    userName: t.customer_name,\n    userEmail: t.customer_email,\n    createdAt: t.created_at,\n    updatedAt: t.updated_at,\n  }));\n\n  return new Response(JSON.stringify(tickets), {\n    headers: {\n      'Content-Type': 'application/json',\n      'Access-Control-Allow-Origin': '*',\n    },\n  });\n};\n\nexport const onRequestOptions = async () => {\n  return new Response(null, {\n    headers: {\n      'Access-Control-Allow-Origin': '*',\n      'Access-Control-Allow-Methods': 'GET, OPTIONS',\n      'Access-Control-Allow-Headers': 'Content-Type',\n    },\n  });\n};\n", "import { PagesFunction } from '@cloudflare/workers-types';\n\ninterface Env {\n  DB: D1Database;\n}\n\nexport const onRequestPost: PagesFunction<Env> = async ({ request, env }) => {\n  try {\n    const { bannerId, targetPrice } = await request.json() as { bannerId: number; targetPrice: number };\n\n    // Update the banner price\n    const result = await env.DB.prepare(`\n      UPDATE countdown_banners \n      SET targetPrice = ? \n      WHERE id = ?\n    `).bind(targetPrice.toString(), bannerId).run();\n\n    if (result.changes === 0) {\n      return new Response(JSON.stringify({\n        success: false,\n        error: 'Banner not found'\n      }), {\n        status: 404,\n        headers: {\n          'Content-Type': 'application/json',\n          'Access-Control-Allow-Origin': '*'\n        }\n      });\n    }\n\n    return new Response(JSON.stringify({\n      success: true,\n      message: 'Banner price updated successfully',\n      bannerId,\n      newPrice: targetPrice\n    }), {\n      headers: {\n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*'\n      }\n    });\n\n  } catch (error) {\n    console.error('Error updating banner price:', error);\n    \n    return new Response(JSON.stringify({\n      success: false,\n      error: 'Failed to update banner price'\n    }), {\n      status: 500,\n      headers: {\n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*'\n      }\n    });\n  }\n};\n\n// Handle CORS preflight requests\nexport const onRequestOptions: PagesFunction = async () => {\n  return new Response(null, {\n    status: 200,\n    headers: {\n      'Access-Control-Allow-Origin': '*',\n      'Access-Control-Allow-Methods': 'POST, OPTIONS',\n      'Access-Control-Allow-Headers': 'Content-Type',\n    },\n  });\n};\n", "import { PagesFunction } from '@cloudflare/workers-types';\n\ninterface Env {\n  DB: D1Database;\n}\n\nexport const onRequestGet: PagesFunction<Env> = async ({ env }) => {\n  try {\n    // Update banner ID 1 to have price of 1.00\n    const result = await env.DB.prepare(`\n      UPDATE countdown_banners \n      SET targetPrice = '1.00' \n      WHERE id = 1\n    `).run();\n\n    // Verify the update\n    const banner = await env.DB.prepare(`\n      SELECT * FROM countdown_banners WHERE id = 1\n    `).first();\n\n    return new Response(JSON.stringify({\n      success: true,\n      message: 'Banner price updated to \u20AC1.00',\n      updated: result.changes > 0,\n      banner: banner\n    }), {\n      headers: {\n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*'\n      }\n    });\n\n  } catch (error) {\n    console.error('Error updating banner price:', error);\n    \n    return new Response(JSON.stringify({\n      success: false,\n      error: 'Failed to update banner price',\n      details: error.message\n    }), {\n      status: 500,\n      headers: {\n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*'\n      }\n    });\n  }\n};\n", "// Fix premium activation for all users who have completed purchases\nexport const onRequestPost = async ({ request, env }: any) => {\n  try {\n    const body = await request.json() as { email?: string; adminKey?: string };\n    const { email, adminKey } = body;\n    \n    // Simple admin check\n    if (adminKey !== 'fix-premium-2024') {\n      return new Response(JSON.stringify({\n        success: false,\n        message: 'Invalid admin key'\n      }), {\n        status: 403,\n        headers: {\n          'Content-Type': 'application/json',\n          'Access-Control-Allow-Origin': '*',\n        },\n      });\n    }\n\n    if (!env.DB) {\n      return new Response(JSON.stringify({ success: false, message: 'Database not available' }), {\n        status: 500,\n        headers: {\n          'Content-Type': 'application/json',\n          'Access-Control-Allow-Origin': '*',\n        },\n      });\n    }\n\n    const results = {\n      usersFixed: 0,\n      customersFixed: 0,\n      errors: []\n    };\n\n    // Fix specific user if email provided, otherwise fix all\n    if (email) {\n      // Check if user exists in users table\n      const user = await env.DB.prepare(`\n        SELECT id, email, is_premium, extension_activated FROM users WHERE email = ?\n      `).bind(email).first();\n\n      if (user) {\n        // Check if user has completed orders\n        const userOrders = await env.DB.prepare(`\n          SELECT COUNT(*) as count FROM orders \n          WHERE customer_email = ? AND status = 'completed' AND final_amount > 0\n        `).bind(email).first();\n\n        if (userOrders && userOrders.count > 0) {\n          await env.DB.prepare(`\n            UPDATE users \n            SET is_premium = 1, extension_activated = 1, premium_activated_at = datetime('now')\n            WHERE id = ?\n          `).bind(user.id).run();\n          results.usersFixed++;\n        }\n      }\n\n      // Check if customer exists in customers table\n      const customer = await env.DB.prepare(`\n        SELECT id, email, is_premium, extension_activated FROM customers WHERE email = ?\n      `).bind(email).first();\n\n      if (customer) {\n        // Check if customer has completed orders\n        const customerOrders = await env.DB.prepare(`\n          SELECT COUNT(*) as count FROM orders \n          WHERE customer_id = ? AND status = 'completed' AND final_amount > 0\n        `).bind(customer.id).first();\n\n        if (customerOrders && customerOrders.count > 0) {\n          await env.DB.prepare(`\n            UPDATE customers \n            SET is_premium = 1, extension_activated = 1, premium_activated_at = datetime('now')\n            WHERE id = ?\n          `).bind(customer.id).run();\n          results.customersFixed++;\n        }\n      }\n    } else {\n      // Fix all users with completed orders\n      const usersToFix = await env.DB.prepare(`\n        SELECT DISTINCT u.id, u.email\n        FROM users u\n        JOIN orders o ON u.email = o.customer_email\n        WHERE o.status = 'completed' AND o.final_amount > 0\n        AND (u.is_premium != 1 OR u.extension_activated != 1)\n      `).all();\n\n      for (const user of usersToFix.results || []) {\n        await env.DB.prepare(`\n          UPDATE users \n          SET is_premium = 1, extension_activated = 1, premium_activated_at = datetime('now')\n          WHERE id = ?\n        `).bind(user.id).run();\n        results.usersFixed++;\n      }\n\n      const customersToFix = await env.DB.prepare(`\n        SELECT DISTINCT c.id, c.email\n        FROM customers c\n        JOIN orders o ON c.id = o.customer_id\n        WHERE o.status = 'completed' AND o.final_amount > 0\n        AND (c.is_premium != 1 OR c.extension_activated != 1)\n      `).all();\n\n      for (const customer of customersToFix.results || []) {\n        await env.DB.prepare(`\n          UPDATE customers \n          SET is_premium = 1, extension_activated = 1, premium_activated_at = datetime('now')\n          WHERE id = ?\n        `).bind(customer.id).run();\n        results.customersFixed++;\n      }\n    }\n\n    return new Response(JSON.stringify({ \n      success: true, \n      message: `Premium activation fix completed`,\n      results\n    }), {\n      headers: {\n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*',\n      },\n    });\n\n  } catch (error: any) {\n    console.error('Error fixing premium activation:', error);\n    return new Response(JSON.stringify({ \n      success: false, \n      message: error.message \n    }), {\n      status: 500,\n      headers: {\n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*',\n      },\n    });\n  }\n};\n", "import { PagesFunction } from '@cloudflare/workers-types';\n\ninterface Env {\n  DB: D1Database;\n}\n\nexport const onRequestGet: PagesFunction<Env> = async ({ env }) => {\n  try {\n    let users = [];\n    let stats = {\n      totalUsers: 0,\n      activeUsers: 0,\n      premiumUsers: 0\n    };\n\n    try {\n      // Fetch users with download and purchase information\n      const userResults = await env.DB.prepare(`\n        SELECT \n          u.id, \n          u.email, \n          u.name, \n          u.role,\n          u.created_at,\n          u.is_premium,\n          u.premium_activated_at,\n          u.total_spent,\n          u.total_orders,\n          u.extension_activated,\n          COUNT(DISTINCT d.id) as trial_downloads,\n          COUNT(DISTINCT o.id) as purchase_count,\n          MAX(d.created_at) as last_download,\n          MAX(o.created_at) as last_purchase\n        FROM users u\n        LEFT JOIN user_downloads d ON u.id = d.user_id\n        LEFT JOIN orders o ON u.id = o.customer_id AND o.status = 'completed'\n        GROUP BY u.id\n        ORDER BY u.created_at DESC\n      `).all();\n      users = userResults.results || [];\n\n      // Get user statistics\n      const statsResult = await env.DB.prepare(`\n        SELECT \n          COUNT(*) as totalUsers,\n          COUNT(CASE WHEN is_premium = 1 THEN 1 END) as premiumUsers,\n          COUNT(DISTINCT d.user_id) as trialUsers\n        FROM users u\n        LEFT JOIN user_downloads d ON u.id = d.user_id\n      `).first();\n      \n      if (statsResult) {\n        stats = {\n          totalUsers: Number(statsResult.totalUsers) || 0,\n          activeUsers: Number(statsResult.trialUsers) || 0,\n          premiumUsers: Number(statsResult.premiumUsers) || 0\n        };\n      }\n    } catch (dbError) {\n      console.log('Users table not found, checking fallback storage:', dbError);\n      \n      // Fallback: Get users from settings table\n      const settingsResults = await env.DB.prepare(`\n        SELECT key, value FROM settings \n        WHERE key LIKE 'user_%'\n      `).all();\n      \n      const allUsers = [];\n      for (const setting of (settingsResults.results || [])) {\n        try {\n          const userData = JSON.parse(setting.value as string);\n          // Add an ID based on email for consistency\n          userData.id = userData.email.replace('@', '_at_').replace('.', '_dot_');\n          userData.registrationDate = userData.updatedAt;\n          userData.createdAt = userData.updatedAt;\n          userData.isActive = true;\n          allUsers.push(userData);\n        } catch (parseError) {\n          console.log('Error parsing user data:', parseError);\n        }\n      }\n      \n      // Sort by updatedAt\n      users = allUsers.sort((a, b) => {\n        const dateA = new Date(a.updatedAt);\n        const dateB = new Date(b.updatedAt);\n        return dateB.getTime() - dateA.getTime();\n      });\n      \n      // Calculate stats from fallback data\n      stats.totalUsers = users.length;\n      stats.activeUsers = users.filter(u => u.isActive).length;\n      stats.premiumUsers = users.filter(u => u.isPremium).length;\n    }\n\n    return new Response(JSON.stringify({\n      success: true,\n      users: users,\n      stats: stats\n    }), {\n      headers: {\n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*'\n      }\n    });\n\n  } catch (error) {\n    console.error('Error fetching admin users:', error);\n    return new Response(JSON.stringify({\n      success: false,\n      error: 'Failed to fetch users',\n      details: String(error)\n    }), {\n      status: 500,\n      headers: {\n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*'\n      }\n    });\n  }\n};\n\nexport const onRequestOptions: PagesFunction<Env> = async () => {\n  return new Response(null, {\n    status: 200,\n    headers: {\n      'Access-Control-Allow-Origin': '*',\n      'Access-Control-Allow-Methods': 'GET, OPTIONS',\n      'Access-Control-Allow-Headers': 'Content-Type',\n    },\n  });\n};\n", "import { SettingsStorage } from '../../lib/settings-storage';\n\ninterface Env {\n  DB: D1Database;\n}\n\ndeclare global {\n  interface D1Database {}\n  interface PagesFunction<T = any> {\n    (context: { request: Request; env: T; params: any; waitUntil: (promise: Promise<any>) => void; }): Promise<Response> | Response;\n  }\n}\n\ninterface AnnouncementBadge {\n  id: string;\n  title: string;\n  subtitle: string;\n  backgroundColor: string;\n  textColor: string;\n  priority: number;\n  isActive: boolean;\n  createdAt: string;\n  updatedAt: string;\n}\n\ninterface FrontendBadgeData {\n  id: string;\n  isEnabled: boolean;\n  textEn: string;\n  textTranslations: Record<string, string>;\n  backgroundColor: string;\n  textColor: string;\n  priority: number;\n}\n\nexport const onRequestOptions: PagesFunction<Env> = async () => {\n  return new Response(null, {\n    status: 200,\n    headers: {\n      'Access-Control-Allow-Origin': '*',\n      'Access-Control-Allow-Methods': 'GET, OPTIONS',\n      'Access-Control-Allow-Headers': 'Content-Type, Authorization',\n    },\n  });\n};\n\nexport const onRequestGet: PagesFunction<Env> = async (context) => {\n  try {\n    const settingsStorage = new SettingsStorage(context.env.DB);\n    \n    // Get all announcement badges from storage\n    const badgesData = await settingsStorage.getSetting('announcement_badges');\n    const badges: AnnouncementBadge[] = badgesData ? JSON.parse(badgesData) : [];\n    \n    console.log('Retrieved announcement badges for active endpoint:', badges.length);\n    \n    // Find the highest priority active badge\n    const activeBadge = badges\n      .filter(badge => badge.isActive)\n      .sort((a, b) => b.priority - a.priority)[0];\n    \n    if (!activeBadge) {\n      return new Response(JSON.stringify(null), {\n        status: 200,\n        headers: {\n          'Content-Type': 'application/json',\n          'Access-Control-Allow-Origin': '*',\n        },\n      });\n    }\n    \n    // Transform backend data structure to frontend expected format\n    const frontendBadge: FrontendBadgeData = {\n      id: activeBadge.id,\n      isEnabled: activeBadge.isActive,\n      textEn: activeBadge.title,\n      textTranslations: (activeBadge as any).textTranslations || {},\n      backgroundColor: activeBadge.backgroundColor,\n      textColor: activeBadge.textColor,\n      priority: activeBadge.priority,\n    };\n    \n    console.log('Returning active badge:', frontendBadge);\n    \n    return new Response(JSON.stringify(frontendBadge), {\n      status: 200,\n      headers: {\n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*',\n      },\n    });\n  } catch (error) {\n    console.error('Error fetching active announcement badge:', error);\n    return new Response(JSON.stringify({ \n      error: 'Failed to fetch active announcement badge',\n      details: error instanceof Error ? error.message : 'Unknown error'\n    }), {\n      status: 500,\n      headers: {\n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*',\n      },\n    });\n  }\n};\n", "import { Env } from '../../lib/context';\n\n// Type definitions\ninterface AuthSettings {\n  facebook_enabled: number;\n  facebook_app_id: string;\n  facebook_app_secret: string;\n}\n\ninterface FacebookTokenResponse {\n  access_token: string;\n  token_type: string;\n  expires_in: number;\n}\n\ninterface FacebookUserResponse {\n  id: string;\n  name: string;\n  email: string;\n}\n\ninterface User {\n  id: number;\n  name: string;\n  email: string;\n}\n\nexport const onRequestGet: PagesFunction<Env> = async ({ request, env }) => {\n  const url = new URL(request.url);\n  const code = url.searchParams.get('code');\n\n  try {\n    // 1. Fetch auth settings from the database\n    const authSettings = await env.DB.prepare(\n      'SELECT facebook_enabled, facebook_app_id, facebook_app_secret FROM auth_settings WHERE id = 1'\n    ).first<AuthSettings>();\n\n    if (!authSettings?.facebook_enabled) {\n      return new Response('Facebook login is not enabled.', { status: 400 });\n    }\n\n    const { facebook_app_id, facebook_app_secret } = authSettings;\n    const redirectUri = `${url.origin}/api/auth/facebook`;\n\n    // 2. If no code is present, redirect to Facebook for authentication\n    if (!code) {\n      const authUrl = new URL('https://www.facebook.com/v18.0/dialog/oauth');\n      authUrl.searchParams.set('client_id', facebook_app_id);\n      authUrl.searchParams.set('redirect_uri', redirectUri);\n      authUrl.searchParams.set('response_type', 'code');\n      authUrl.searchParams.set('scope', 'email,public_profile');\n      return Response.redirect(authUrl.toString(), 302);\n    }\n\n    // 3. Exchange the authorization code for an access token\n    const tokenResponse = await fetch('https://graph.facebook.com/v18.0/oauth/access_token', {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/x-www-form-urlencoded' },\n      body: new URLSearchParams({\n        client_id: facebook_app_id,\n        client_secret: facebook_app_secret,\n        redirect_uri: redirectUri,\n        code,\n      }),\n    });\n\n    if (!tokenResponse.ok) {\n      const errorText = await tokenResponse.text();\n      throw new Error(`Failed to get access token: ${errorText}`);\n    }\n\n    const tokenData = await tokenResponse.json() as FacebookTokenResponse;\n\n    // 4. Use the access token to fetch user details from Facebook\n    const userResponse = await fetch(`https://graph.facebook.com/me?fields=id,name,email&access_token=${tokenData.access_token}`);\n\n    if (!userResponse.ok) {\n      throw new Error('Failed to fetch user data from Facebook.');\n    }\n\n    const userData = await userResponse.json() as FacebookUserResponse;\n\n    if (!userData.email) {\n      return new Response('Email not provided by Facebook.', { status: 400 });\n    }\n\n    // 5. Check if the user exists in the database or create a new one\n    let user = await env.DB.prepare('SELECT id, name, email FROM users WHERE email = ?').bind(userData.email).first<User>();\n\n    if (!user) {\n      const now = new Date().toISOString();\n      await env.DB.prepare(\n        'INSERT INTO users (email, name, provider, provider_id, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?)'\n      ).bind(userData.email, userData.name, 'facebook', userData.id, now, now).run();\n\n      user = await env.DB.prepare('SELECT id, name, email FROM users WHERE email = ?').bind(userData.email).first<User>();\n    }\n\n    if (!user) {\n      return new Response('Could not create or find user.', { status: 500 });\n    }\n\n    // 6. Redirect to the dashboard, passing user info in the URL\n    const redirectURL = new URL('/dashboard', url.origin);\n    redirectURL.searchParams.set('userId', user.id.toString());\n    redirectURL.searchParams.set('name', user.name);\n    redirectURL.searchParams.set('email', user.email);\n\n    return Response.redirect(redirectURL.toString(), 302);\n\n  } catch (error) {\n    console.error('Facebook OAuth Error:', error);\n    const errorUrl = new URL('/login', url.origin);\n    errorUrl.searchParams.set('error', 'oauth_failed');\n    errorUrl.searchParams.set('provider', 'facebook');\n    return Response.redirect(errorUrl.toString(), 302);\n  }\n};\n", "import type { PagesFunction } from '@cloudflare/workers-types';\nimport { Env } from '../../lib/context';\n\n// Type definitions for GitHub OAuth flow\ninterface GitHubTokenResponse {\n  access_token: string;\n  error?: string;\n  error_description?: string;\n}\n\ninterface GitHubUserResponse {\n  id: number;\n  login: string;\n  name: string | null;\n  email: string | null;\n}\n\ninterface GitHubEmailResponse {\n    email: string;\n    primary: boolean;\n    verified: boolean;\n    visibility: string | null;\n}\n\n// Type definition for database records\ninterface AuthSettings {\n  github_enabled: 0 | 1;\n  github_client_id: string;\n  github_client_secret: string;\n}\n\ninterface User {\n    id: number;\n    name: string;\n    email: string;\n}\n\nexport const onRequestGet: PagesFunction<Env> = async (context) => {\n  const { request, env } = context;\n  const url = new URL(request.url);\n  const code = url.searchParams.get('code');\n  const state = url.searchParams.get('state');\n\n  try {\n    // 1. Fetch auth settings from the database\n    const authSettings = await env.DB.prepare('SELECT github_enabled, github_client_id, github_client_secret FROM auth_settings WHERE id = 1').first<AuthSettings>();\n\n    if (!authSettings?.github_enabled) {\n      return new Response('GitHub login is not enabled.', { status: 400 });\n    }\n\n    if (!authSettings.github_client_id || !authSettings.github_client_secret) {\n      return new Response('GitHub client ID or secret is not configured.', { status: 500 });\n    }\n\n    // 2. If no code is present, redirect to GitHub to authorize\n    if (!code) {\n      const authUrl = new URL('https://github.com/login/oauth/authorize');\n      authUrl.searchParams.set('client_id', authSettings.github_client_id);\n      authUrl.searchParams.set('redirect_uri', `${url.origin}/api/auth/github`);\n      authUrl.searchParams.set('scope', 'user:email');\n      authUrl.searchParams.set('state', state || crypto.randomUUID());\n      return Response.redirect(authUrl.toString(), 302);\n    }\n\n    // 3. Exchange the authorization code for an access token\n    const tokenResponse = await fetch('https://github.com/login/oauth/access_token', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        'Accept': 'application/json',\n      },\n      body: JSON.stringify({\n        client_id: authSettings.github_client_id,\n        client_secret: authSettings.github_client_secret,\n        code: code,\n      }),\n    });\n\n    const tokenData = await tokenResponse.json() as GitHubTokenResponse;\n    if (tokenData.error || !tokenData.access_token) {\n      throw new Error(`Failed to get access token: ${tokenData.error_description || 'No token returned'}`);\n    }\n\n    // 4. Use the access token to fetch user details from GitHub\n    const userResponse = await fetch('https://api.github.com/user', {\n      headers: {\n        'Authorization': `Bearer ${tokenData.access_token}`,\n        'User-Agent': 'OCUS-Job-Hunter',\n      },\n    });\n    const userData = await userResponse.json() as GitHubUserResponse;\n\n    // 5. Fetch user's primary email if not included in the main user response\n    let userEmail = userData.email;\n    if (!userEmail) {\n        const emailResponse = await fetch('https://api.github.com/user/emails', {\n            headers: {\n                'Authorization': `Bearer ${tokenData.access_token}`,\n                'User-Agent': 'OCUS-Job-Hunter',\n            },\n        });\n        const emails = await emailResponse.json() as GitHubEmailResponse[];\n        const primaryEmail = emails.find((e: GitHubEmailResponse) => e.primary && e.verified);\n        userEmail = primaryEmail?.email || null;\n    }\n\n    if (!userEmail) {\n        return new Response('Could not retrieve a verified primary email from GitHub.', { status: 400 });\n    }\n\n    // 6. Check if the user exists in the database\n    let user = await env.DB.prepare('SELECT id, name, email FROM users WHERE github_id = ?').bind(userData.id).first<User>();\n\n    // 7. If user does not exist, create a new user record\n    if (!user) {\n        const name = userData.name || userData.login;\n        const now = new Date().toISOString();\n        await env.DB.prepare(\n            'INSERT INTO users (email, name, provider, provider_id, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?)'\n        ).bind(userEmail, name, 'github', userData.id, now, now).run();\n\n        // Retrieve the newly created user\n        user = await env.DB.prepare('SELECT id, name, email FROM users WHERE github_id = ?').bind(userData.id).first<User>();\n    }\n\n    if (!user) {\n        return new Response('Failed to create or find user.', { status: 500 });\n    }\n\n    // 8. User is now authenticated. Redirect to the dashboard.\n    // (In a real app, you would create a session/JWT here)\n    const redirectUrl = new URL(`${url.origin}/dashboard`);\n    redirectUrl.searchParams.set('status', 'loggedIn');\n    redirectUrl.searchParams.set('userId', user.id.toString());\n    redirectUrl.searchParams.set('name', user.name);\n    redirectUrl.searchParams.set('email', user.email);\n\n    return Response.redirect(redirectUrl.toString(), 302);\n\n  } catch (error) {\n    console.error('GitHub OAuth Error:', error);\n    const errorUrl = new URL(`${url.origin}/login`);\n    errorUrl.searchParams.set('error', 'github_oauth_failed');\n    return Response.redirect(errorUrl.toString(), 302);\n  }\n};\n", "import { Env } from '../../lib/context';\n\n// Type definitions\ninterface AuthSettings {\n  google_enabled: number;\n  google_client_id: string;\n  google_client_secret: string;\n}\n\ninterface GoogleTokenResponse {\n  access_token: string;\n  id_token: string;\n  expires_in: number;\n  token_type: string;\n  scope: string;\n}\n\ninterface GoogleUserResponse {\n  id: string;\n  email: string;\n  verified_email: boolean;\n  name: string;\n  given_name: string;\n  family_name: string;\n  picture: string;\n}\n\ninterface User {\n  id: number;\n  name: string;\n  email: string;\n}\n\nexport const onRequestGet: PagesFunction<Env> = async ({ request, env }) => {\n  const url = new URL(request.url);\n  const code = url.searchParams.get('code');\n\n  try {\n    // 1. Fetch auth settings from the database\n    const authSettings = await env.DB.prepare(\n      'SELECT google_enabled, google_client_id, google_client_secret FROM auth_settings WHERE id = 1'\n    ).first<AuthSettings>();\n\n    if (!authSettings?.google_enabled) {\n      return new Response('Google login is not enabled.', { status: 400 });\n    }\n\n    const { google_client_id, google_client_secret } = authSettings;\n    const redirectUri = `${url.origin}/api/auth/google`;\n\n    // 2. If no code is present, redirect to Google for authentication\n    if (!code) {\n      const authUrl = new URL('https://accounts.google.com/o/oauth2/v2/auth');\n      authUrl.searchParams.set('client_id', google_client_id);\n      authUrl.searchParams.set('redirect_uri', redirectUri);\n      authUrl.searchParams.set('response_type', 'code');\n      authUrl.searchParams.set('scope', 'openid email profile');\n      return Response.redirect(authUrl.toString(), 302);\n    }\n\n    // 3. Exchange the authorization code for an access token\n    const tokenResponse = await fetch('https://oauth2.googleapis.com/token', {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/x-www-form-urlencoded' },\n      body: new URLSearchParams({\n        client_id: google_client_id,\n        client_secret: google_client_secret,\n        redirect_uri: redirectUri,\n        grant_type: 'authorization_code',\n        code,\n      }),\n    });\n\n    if (!tokenResponse.ok) {\n      const errorText = await tokenResponse.text();\n      throw new Error(`Failed to get access token: ${errorText}`);\n    }\n\n    const tokenData = await tokenResponse.json() as GoogleTokenResponse;\n\n    // 4. Use the access token to fetch user details from Google\n    const userResponse = await fetch('https://www.googleapis.com/oauth2/v2/userinfo', {\n      headers: { 'Authorization': `Bearer ${tokenData.access_token}` },\n    });\n\n    if (!userResponse.ok) {\n      throw new Error('Failed to fetch user data from Google.');\n    }\n\n    const userData = await userResponse.json() as GoogleUserResponse;\n\n    if (!userData.email || !userData.verified_email) {\n      return new Response('A verified email is required from Google.', { status: 400 });\n    }\n\n    // 5. Check if the user exists in the database or create a new one\n    let user = await env.DB.prepare('SELECT id, name, email FROM users WHERE email = ?').bind(userData.email).first<User>();\n\n    if (!user) {\n      const now = new Date().toISOString();\n      await env.DB.prepare(\n        'INSERT INTO users (email, name, provider, provider_id, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?)'\n      ).bind(userData.email, userData.name, 'google', userData.id, now, now).run();\n\n      user = await env.DB.prepare('SELECT id, name, email FROM users WHERE email = ?').bind(userData.email).first<User>();\n    }\n\n    if (!user) {\n      return new Response('Could not create or find user.', { status: 500 });\n    }\n\n    // 6. Redirect to the dashboard, passing user info in the URL\n    const redirectURL = new URL('/dashboard', url.origin);\n    redirectURL.searchParams.set('userId', user.id.toString());\n    redirectURL.searchParams.set('name', user.name);\n    redirectURL.searchParams.set('email', user.email);\n\n    return Response.redirect(redirectURL.toString(), 302);\n\n  } catch (error) {\n    console.error('Google OAuth Error:', error);\n    const errorUrl = new URL('/login', url.origin);\n    errorUrl.searchParams.set('error', 'oauth_failed');\n    errorUrl.searchParams.set('provider', 'google');\n    return Response.redirect(errorUrl.toString(), 302);\n  }\n};\n", "import { UserStorage } from '../../lib/user-storage';\nimport { Env } from '../../lib/context';\nimport type { PagesFunction, HeadersInit } from '@cloudflare/workers-types';\n\ninterface RegisterBody {\n  email?: string;\n  password?: string;\n  name?: string;\n}\n\nconst jsonResponse = (body: object, status: number) => {\n  const headers: HeadersInit = {\n    'Content-Type': 'application/json',\n    'Access-Control-Allow-Origin': '*',\n  };\n  return new Response(JSON.stringify(body), { status, headers });\n};\n\nexport const onRequestPost: PagesFunction<Env> = async ({ request, env }) => {\n  try {\n    const { email, password, name } = await request.json<RegisterBody>();\n\n    if (!email || !password || !name) {\n      return jsonResponse({ success: false, message: 'Missing required fields.' }, 400);\n    }\n\n    const userStorage = new UserStorage(env.DB);\n    await userStorage.initializeUsers();\n    const existingUser = await userStorage.getUserByEmail(email);\n\n    if (existingUser) {\n      return jsonResponse({ success: false, message: 'An account with this email already exists.' }, 409);\n    }\n\n    const newUser = await userStorage.createUser(email, password, name);\n    const { password: _, ...userResponse } = newUser;\n\n    return jsonResponse({ success: true, message: 'Registration successful.', user: userResponse }, 201);\n\n  } catch (error) {\n    console.error('Registration Error:', error);\n    const errorMessage = error instanceof Error ? error.message : 'An unknown error occurred.';\n    \n    if (errorMessage.includes('UNIQUE constraint failed')) {\n      return jsonResponse({ success: false, message: 'An account with this email already exists.' }, 409);\n    }\n\n    return jsonResponse({ success: false, message: 'Registration failed.', error: errorMessage }, 500);\n  }\n};\n\nexport const onRequestOptions: PagesFunction = async () => {\n  return new Response(null, {\n    headers: {\n      'Access-Control-Allow-Origin': '*',\n      'Access-Control-Allow-Methods': 'POST, OPTIONS',\n      'Access-Control-Allow-Headers': 'Content-Type',\n    } as HeadersInit,\n  });\n};\n", "import { PagesFunction } from '@cloudflare/workers-types';\n\ninterface Env {\n  DB: D1Database;\n}\n\ninterface CountdownBanner {\n  id: string;\n  title: string;\n  subtitle: string;\n  titleTranslations?: string;\n  subtitleTranslations?: string;\n  targetPrice: number;\n  originalPrice?: number;\n  endDate: string;\n  priority: number;\n  backgroundColor: string;\n  textColor: string;\n  isActive: boolean;\n  createdAt: string;\n  updatedAt: string;\n}\n\nexport const onRequestGet: PagesFunction<Env> = async (context) => {\n  try {\n    const { env } = context;\n\n    // First check if there are banners in the countdown_banners table\n    const banner = await env.DB.prepare(`\n      SELECT * FROM countdown_banners \n      WHERE isActive = 1 \n      ORDER BY priority DESC, id ASC \n      LIMIT 1\n    `).first();\n\n    // Always check settings table for admin dashboard changes\n    try {\n      const settingsStorage = new (await import('../../lib/settings-storage')).SettingsStorage(env.DB);\n      const bannersData = await settingsStorage.getSetting('countdown_banners');\n      if (bannersData) {\n        const banners = JSON.parse(bannersData);\n        const activeBanner = banners.find((b: any) => b.isActive);\n        if (activeBanner) {\n          // Use admin dashboard price if available\n          return new Response(JSON.stringify({\n            id: activeBanner.id || 1,\n            isEnabled: activeBanner.isActive ? 1 : 0,\n            titleEn: activeBanner.title || 'Limited Time Offer!',\n            subtitleEn: activeBanner.subtitle || 'Get OCUS Job Hunter Extension at Special Price',\n            titleTranslations: activeBanner.titleTranslations || {},\n            subtitleTranslations: activeBanner.subtitleTranslations || {},\n            targetPrice: String(activeBanner.targetPrice || '1.00'),\n            originalPrice: String(activeBanner.originalPrice || '299.99'),\n            endDateTime: activeBanner.endDate || new Date(Date.now() + 7 * 24 * 60 * 60 * 1000).toISOString(),\n            backgroundColor: activeBanner.backgroundColor || '#FF6B35',\n            textColor: activeBanner.textColor || '#FFFFFF',\n            priority: activeBanner.priority || 1\n          }), {\n            headers: {\n              'Content-Type': 'application/json',\n              'Access-Control-Allow-Origin': '*'\n            }\n          });\n        }\n      }\n    } catch (settingsError) {\n      console.warn('Failed to check settings table for banners:', settingsError);\n    }\n\n    // If no banner found in countdown_banners table, return 404\n    if (!banner) {\n      return new Response(JSON.stringify({ message: 'No active countdown banner found' }), {\n        status: 404,\n        headers: {\n          'Content-Type': 'application/json',\n          'Access-Control-Allow-Origin': '*',\n          'Access-Control-Allow-Methods': 'GET, OPTIONS',\n          'Access-Control-Allow-Headers': 'Content-Type',\n        },\n      });\n    }\n\n    // Parse translations if they exist\n    let titleTranslations = {};\n    let subtitleTranslations = {};\n    \n    try {\n      if (banner.titleTranslations && typeof banner.titleTranslations === 'string') {\n        titleTranslations = JSON.parse(banner.titleTranslations);\n      }\n    } catch (e) {\n      console.warn('Failed to parse titleTranslations:', e);\n    }\n    \n    try {\n      if (banner.subtitleTranslations && typeof banner.subtitleTranslations === 'string') {\n        subtitleTranslations = JSON.parse(banner.subtitleTranslations);\n      }\n    } catch (e) {\n      console.warn('Failed to parse subtitleTranslations:', e);\n    }\n\n    // Transform the data to match frontend expectations\n    const transformedBanner = {\n      id: parseInt(String(banner.id)) || 0,\n      isEnabled: banner.isActive,\n      titleEn: banner.title,\n      subtitleEn: banner.subtitle,\n      titleTranslations,\n      subtitleTranslations,\n      targetPrice: String(banner.targetPrice || '1.00'),\n      originalPrice: banner.originalPrice ? String(banner.originalPrice) : undefined,\n      endDateTime: banner.endDate, // Frontend expects endDateTime\n      backgroundColor: banner.backgroundColor,\n      textColor: banner.textColor,\n      priority: banner.priority,\n    };\n\n    return new Response(JSON.stringify(transformedBanner), {\n      status: 200,\n      headers: {\n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*',\n        'Access-Control-Allow-Methods': 'GET, OPTIONS',\n        'Access-Control-Allow-Headers': 'Content-Type',\n      },\n    });\n\n  } catch (error) {\n    console.error('Error fetching active countdown banner:', error);\n    return new Response(JSON.stringify({ \n      error: 'Failed to fetch active countdown banner',\n      details: error instanceof Error ? error.message : 'Unknown error'\n    }), {\n      status: 500,\n      headers: {\n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*',\n        'Access-Control-Allow-Methods': 'GET, OPTIONS',\n        'Access-Control-Allow-Headers': 'Content-Type',\n      },\n    });\n  }\n};\n\n// Handle OPTIONS requests for CORS\nexport const onRequestOptions: PagesFunction<Env> = async () => {\n  return new Response(null, {\n    status: 200,\n    headers: {\n      'Access-Control-Allow-Origin': '*',\n      'Access-Control-Allow-Methods': 'GET, OPTIONS',\n      'Access-Control-Allow-Headers': 'Content-Type',\n    },\n  });\n};\n", "export const onRequestPost = async ({ request, env }: any) => {\n  try {\n    const { email, password, recaptchaToken } = await request.json();\n    \n    console.log('Login attempt for email:', email);\n    \n    // Fallback to demo credentials first\n    if (email === 'demo@example.com' && password === 'demo123') {\n      return new Response(JSON.stringify({\n        success: true,\n        user: {\n          id: 1,\n          email: 'demo@example.com',\n          name: 'Demo User',\n          role: 'customer'\n        },\n        token: 'demo-jwt-token'\n      }), {\n        headers: { \n          'Content-Type': 'application/json',\n          'Access-Control-Allow-Origin': '*'\n        }\n      });\n    }\n    \n    if (!env.DB) {\n      console.error('Database not available');\n      return new Response(JSON.stringify({\n        success: false,\n        message: 'Database not available'\n      }), {\n        status: 500,\n        headers: { \n          'Content-Type': 'application/json',\n          'Access-Control-Allow-Origin': '*'\n        }\n      });\n    }\n    \n    // Check for user in users table (for registered customers)\n    let user = null;\n    try {\n      console.log('Querying users table for email:', email);\n      \n      // First check if user exists with email only\n      const emailOnlyResult = await env.DB.prepare(`\n        SELECT id, email, name, role, created_at, password\n        FROM users WHERE email = ?\n      `).bind(email).first();\n      \n      if (emailOnlyResult) {\n        console.log('User found with email:', email);\n        console.log('Stored password starts with:', emailOnlyResult.password?.substring(0, 10));\n        console.log('Input password:', password);\n        \n        // Check if password is hashed (bcrypt starts with $2b$)\n        if (emailOnlyResult.password?.startsWith('$2b$')) {\n          console.log('Password is hashed, implementing bcrypt comparison');\n          try {\n            // Import bcrypt for password comparison\n            const bcrypt = await import('bcryptjs');\n            const isMatch = await bcrypt.compare(password, emailOnlyResult.password);\n            if (isMatch) {\n              user = emailOnlyResult as any;\n              console.log('Bcrypt password match for user:', user.email);\n            } else {\n              console.log('Bcrypt password mismatch');\n            }\n          } catch (bcryptError) {\n            console.log('Bcrypt comparison failed:', bcryptError);\n          }\n        } else {\n          // Plain text password comparison (for demo users)\n          if (emailOnlyResult.password === password) {\n            user = emailOnlyResult as any;\n            console.log('Plain text password match for user:', user.email);\n          } else {\n            console.log('Plain text password mismatch');\n          }\n        }\n      } else {\n        console.log('No user found with this email in users table');\n      }\n    } catch (e) {\n      console.log('Users table query failed:', e);\n    }\n    \n    if (user) {\n      return new Response(JSON.stringify({\n        success: true,\n        user,\n        token: `jwt-token-${user.id}-${Date.now()}`\n      }), {\n        headers: { \n          'Content-Type': 'application/json',\n          'Access-Control-Allow-Origin': '*'\n        }\n      });\n    }\n    \n    // Add more detailed logging for debugging\n    console.log('User found:', user ? 'Yes' : 'No');\n    console.log('Email check:', email);\n    console.log('Password length:', password ? password.length : 0);\n    \n    return new Response(JSON.stringify({\n      success: false,\n      message: 'Invalid credentials'\n    }), {\n      status: 401,\n      headers: { \n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*'\n      }\n    });\n    \n  } catch (error) {\n    return new Response(JSON.stringify({\n      success: false,\n      message: 'Login failed'\n    }), {\n      status: 500,\n      headers: { \n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*'\n      }\n    });\n  }\n};\n\nexport const onRequestOptions = async () => {\n  return new Response(null, {\n    headers: {\n      'Access-Control-Allow-Origin': '*',\n      'Access-Control-Allow-Methods': 'POST, OPTIONS',\n      'Access-Control-Allow-Headers': 'Content-Type'\n    }\n  });\n};\n", "import { UserStorage } from '../../lib/user-storage';\n\nexport const onRequestGet = async ({ request, env }: any) => {\n  try {\n    const url = new URL(request.url);\n    const userId = url.searchParams.get('userId');\n    \n    if (!userId) {\n      return new Response(JSON.stringify({\n        success: false,\n        message: 'User ID is required'\n      }), {\n        status: 400,\n        headers: { \n          'Content-Type': 'application/json',\n          'Access-Control-Allow-Origin': '*'\n        }\n      });\n    }\n\n    const userStorage = new UserStorage(env.DB);\n    await userStorage.initializeUsers();\n    \n    const user = await userStorage.getUserById(parseInt(userId));\n    \n    if (!user) {\n      return new Response(JSON.stringify({\n        success: false,\n        message: 'User not found'\n      }), {\n        status: 404,\n        headers: { \n          'Content-Type': 'application/json',\n          'Access-Control-Allow-Origin': '*'\n        }\n      });\n    }\n\n    // Get premium status and purchase info from database\n    const userQuery = `\n      SELECT \n        id, email, name, role, created_at,\n        is_premium, premium_activated_at, total_spent, \n        total_orders, extension_activated\n      FROM users \n      WHERE id = ?\n    `;\n    const userResult = await env.DB.prepare(userQuery).bind(user.id).first();\n    \n    const profile = {\n      id: user.id,\n      email: user.email,\n      name: user.name,\n      role: user.role,\n      isPremium: Boolean(userResult?.is_premium),\n      premiumActivatedAt: userResult?.premium_activated_at,\n      totalSpent: parseFloat(userResult?.total_spent || '0'),\n      totalOrders: parseInt(userResult?.total_orders || '0'),\n      extensionActivated: Boolean(userResult?.extension_activated),\n      subscriptionStatus: userResult?.is_premium ? 'premium' : 'free',\n      plan: userResult?.is_premium ? 'premium' : 'free',\n      joinedDate: user.created_at?.split('T')[0] || '2024-01-15',\n      lastLogin: new Date().toISOString(),\n      createdAt: user.created_at,\n      settings: {\n        notifications: true,\n        emailUpdates: true,\n        theme: 'light'\n      }\n    };\n\n    return new Response(JSON.stringify(profile), {\n      headers: { \n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*'\n      }\n    });\n    \n  } catch (error) {\n    console.error('Failed to get user profile:', error);\n    return new Response(JSON.stringify({\n      success: false,\n      message: 'Failed to load profile'\n    }), {\n      status: 500,\n      headers: { \n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*'\n      }\n    });\n  }\n};\n\nexport const onRequestPut = async ({ request }: any) => {\n  try {\n    const updates = await request.json();\n    \n    return new Response(JSON.stringify({\n      success: true,\n      message: 'Profile updated successfully',\n      profile: {\n        ...updates,\n        updatedAt: new Date().toISOString()\n      }\n    }), {\n      headers: { \n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*'\n      }\n    });\n    \n  } catch (error) {\n    return new Response(JSON.stringify({\n      success: false,\n      message: 'Failed to update profile'\n    }), {\n      status: 500,\n      headers: { \n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*'\n      }\n    });\n  }\n};\n\nexport const onRequestOptions = async () => {\n  return new Response(null, {\n    headers: {\n      'Access-Control-Allow-Origin': '*',\n      'Access-Control-Allow-Methods': 'GET, PUT, OPTIONS',\n      'Access-Control-Allow-Headers': 'Content-Type'\n    }\n  });\n};\n", "import type { PagesFunction } from '@cloudflare/workers-types';\nimport { Env } from '../../lib/context';\n\ninterface RegisterRequest {\n  email: string;\n  password: string;\n  name: string;\n  recaptchaToken?: string;\n}\n\nexport const onRequestPost: PagesFunction<Env> = async ({ request, env }) => {\n  try {\n    const { email, password, name, recaptchaToken } = await request.json() as RegisterRequest;\n    \n    if (!email || !password || !name) {\n      return new Response(JSON.stringify({\n        success: false,\n        message: 'Missing required fields'\n      }), {\n        status: 400,\n        headers: { \n          'Content-Type': 'application/json',\n          'Access-Control-Allow-Origin': '*'\n        }\n      });\n    }\n\n    // Check if D1 database is available\n    if (!env.DB) {\n      console.error('D1 database not available');\n      return new Response(JSON.stringify({\n        success: false,\n        message: 'Database not available'\n      }), {\n        status: 500,\n        headers: { \n          'Content-Type': 'application/json',\n          'Access-Control-Allow-Origin': '*'\n        }\n      });\n    }\n\n    // Create users table if it doesn't exist\n    await env.DB.prepare(`\n      CREATE TABLE IF NOT EXISTS users (\n        id INTEGER PRIMARY KEY AUTOINCREMENT,\n        email TEXT UNIQUE NOT NULL,\n        password TEXT NOT NULL,\n        name TEXT NOT NULL,\n        role TEXT DEFAULT 'customer',\n        created_at DATETIME DEFAULT CURRENT_TIMESTAMP\n      )\n    `).run();\n\n    // Create customers table if it doesn't exist\n    await env.DB.prepare(`\n      CREATE TABLE IF NOT EXISTS customers (\n        id INTEGER PRIMARY KEY AUTOINCREMENT,\n        email TEXT UNIQUE NOT NULL,\n        name TEXT NOT NULL,\n        created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\n        is_premium BOOLEAN DEFAULT 0,\n        extension_activated BOOLEAN DEFAULT 0,\n        total_spent DECIMAL(10,2) DEFAULT 0,\n        total_orders INTEGER DEFAULT 0\n      )\n    `).run();\n\n    const now = new Date().toISOString();\n\n    console.log('Registering user:', email, 'with password length:', password.length);\n\n    // Check if user already exists\n    const existingUser = await env.DB.prepare(`\n      SELECT id FROM users WHERE email = ?\n    `).bind(email).first();\n\n    if (existingUser) {\n      return new Response(JSON.stringify({\n        success: false,\n        message: 'User already exists'\n      }), {\n        status: 400,\n        headers: { \n          'Content-Type': 'application/json',\n          'Access-Control-Allow-Origin': '*'\n        }\n      });\n    }\n\n    // Insert user into users table\n    const userResult = await env.DB.prepare(`\n      INSERT INTO users (email, password, name, role, created_at)\n      VALUES (?, ?, ?, 'customer', ?)\n    `).bind(email, password, name, now).run();\n\n    console.log('User inserted with ID:', userResult.meta.last_row_id);\n\n    // Insert customer into customers table\n    const customerResult = await env.DB.prepare(`\n      INSERT INTO customers (email, name, created_at)\n      VALUES (?, ?, ?)\n    `).bind(email, name, now).run();\n\n    console.log('Customer inserted with ID:', customerResult.meta.last_row_id);\n\n    return new Response(JSON.stringify({\n      success: true,\n      message: 'Registration successful',\n      user: {\n        id: userResult.meta.last_row_id,\n        email,\n        name,\n        role: 'customer'\n      }\n    }), {\n      headers: { \n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*'\n      }\n    });\n    \n  } catch (error: any) {\n    console.error('Registration error:', error);\n    return new Response(JSON.stringify({\n      success: false,\n      message: 'Registration failed: ' + error.message\n    }), {\n      status: 500,\n      headers: { \n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*'\n      }\n    });\n  }\n};\n\nexport const onRequestOptions = async () => {\n  return new Response(null, {\n    headers: {\n      'Access-Control-Allow-Origin': '*',\n      'Access-Control-Allow-Methods': 'POST, OPTIONS',\n      'Access-Control-Allow-Headers': 'Content-Type'\n    }\n  });\n};\n", "export const onRequestGet = async () => {\n  // Demo customer statistics\n  const stats = {\n    totalApplications: 47,\n    successfulApplications: 12,\n    pendingApplications: 8,\n    rejectedApplications: 27,\n    successRate: 25.5,\n    averageResponseTime: '3.2 days',\n    monthlyApplications: [\n      { month: 'Jan', applications: 15, success: 4 },\n      { month: 'Feb', applications: 12, success: 3 },\n      { month: 'Mar', applications: 20, success: 5 }\n    ],\n    recentActivity: [\n      { date: '2024-03-15', action: 'Applied to Software Engineer at TechCorp', status: 'pending' },\n      { date: '2024-03-14', action: 'Interview scheduled with StartupXYZ', status: 'success' },\n      { date: '2024-03-13', action: 'Application rejected by BigTech Inc', status: 'rejected' }\n    ]\n  };\n\n  return new Response(JSON.stringify(stats), {\n    headers: { \n      'Content-Type': 'application/json',\n      'Access-Control-Allow-Origin': '*'\n    }\n  });\n};\n\nexport const onRequestOptions = async () => {\n  return new Response(null, {\n    headers: {\n      'Access-Control-Allow-Origin': '*',\n      'Access-Control-Allow-Methods': 'GET, OPTIONS',\n      'Access-Control-Allow-Headers': 'Content-Type'\n    }\n  });\n};\n", "// Cloudflare Pages Function: /api/download-extension/premium\n// Handles premium extension download\n\nimport type { PagesFunction } from '@cloudflare/workers-types';\nimport { Env } from '../../lib/context';\n\nexport const onRequestGet: PagesFunction<Env> = async ({ request, env }) => {\n  try {\n    const authHeader = request.headers.get('Authorization');\n    \n    if (!authHeader || !authHeader.startsWith('Bearer ')) {\n      return new Response('Unauthorized', { status: 401 });\n    }\n\n    const token = authHeader.substring(7);\n    \n    // Check if user has premium access\n        // Handle demo user separately\n    if (token === 'demo-jwt-token') {\n      // Return a mock ZIP file for demo purposes\n      const mockZipContent = new Uint8Array([\n        0x50, 0x4B, 0x03, 0x04, 0x14, 0x00, 0x00, 0x00, 0x08, 0x00, 0x00, 0x00, 0x00, 0x00,\n        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n        0x50, 0x4B, 0x05, 0x06, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n        0x00, 0x00, 0x00, 0x00\n      ]);\n      \n      return new Response(mockZipContent, {\n        headers: {\n          'Content-Type': 'application/zip',\n          'Content-Disposition': 'attachment; filename=\"ocus-job-hunter-premium-v2.1.8-STABLE.zip\"',\n          'Access-Control-Allow-Origin': '*'\n        }\n      });\n    }\n\n    // For real users, verify premium access from the database\n    if (token.startsWith('jwt-token-')) {\n      const userId = parseInt(token.split('-')[2], 10);\n      if (isNaN(userId)) {\n        return new Response('Invalid token format', { status: 401 });\n      }\n\n      if (!env.DB) {\n        return new Response('Database not available', { status: 500 });\n      }\n\n      // Check both customer status AND actual completed orders\n      const customer = await env.DB.prepare(\n        'SELECT extension_activated, total_spent FROM customers WHERE id = ?'\n      ).bind(userId).first<{ extension_activated: number; total_spent: string }>();\n\n      if (!customer) {\n        return new Response('Customer not found', { status: 404 });\n      }\n\n      // Verify customer has completed orders with payment\n      const orderCheck = await env.DB.prepare(`\n        SELECT COUNT(*) as orderCount, SUM(final_amount) as totalPaid\n        FROM orders \n        WHERE user_id = ? AND status = 'completed' AND final_amount > 0\n      `).bind(userId).first<{ orderCount: number; totalPaid: string }>();\n\n      const hasValidPurchase = customer.extension_activated && \n                              orderCheck && \n                              orderCheck.orderCount > 0 && \n                              parseFloat(orderCheck.totalPaid || '0') > 0;\n\n      if (hasValidPurchase) {\n        // Log the download attempt for security tracking\n        try {\n          const downloadToken = `download_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n          const now = new Date().toISOString();\n          \n          await env.DB.prepare(`\n            INSERT INTO extension_downloads (\n              customer_id, download_token, download_type, downloaded_at, \n              ip_address, user_agent, created_at\n            ) VALUES (?, ?, 'premium', ?, ?, ?, ?)\n          `).bind(\n            userId,\n            downloadToken,\n            now,\n            request.headers.get('CF-Connecting-IP') || 'unknown',\n            request.headers.get('User-Agent') || 'unknown',\n            now\n          ).run();\n        } catch (e) {\n          console.log('Failed to log download:', e);\n        }\n\n        // User has premium access, return the mock ZIP file\n        const mockZipContent = new Uint8Array([\n          0x50, 0x4B, 0x03, 0x04, 0x14, 0x00, 0x00, 0x00, 0x08, 0x00, 0x00, 0x00, 0x00, 0x00,\n          0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n          0x50, 0x4B, 0x05, 0x06, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n          0x00, 0x00, 0x00, 0x00\n        ]);\n        \n        return new Response(mockZipContent, {\n          headers: {\n            'Content-Type': 'application/zip',\n            'Content-Disposition': 'attachment; filename=\"ocus-job-hunter-premium-v2.1.8-STABLE.zip\"',\n            'Access-Control-Allow-Origin': '*'\n          }\n        });\n      }\n    }\n    \n    return new Response('Premium access required', { status: 403 });\n    \n  } catch (error: any) {\n    return new Response('Download failed', { status: 500 });\n  }\n};\n", "// Cloudflare Pages Function: /api/download-extension/trial\n// Handles trial extension download\n\nimport type { PagesFunction } from '@cloudflare/workers-types';\nimport { Env } from '../../lib/context';\n\nexport const onRequestGet: PagesFunction<Env> = async ({ request, env }) => {\n  try {\n    // Trial version is available to everyone\n    const mockZipContent = new Uint8Array([\n      0x50, 0x4B, 0x03, 0x04, // ZIP file signature\n      0x14, 0x00, 0x00, 0x00, 0x08, 0x00, // Version, flags, compression\n      0x00, 0x00, 0x00, 0x00, // Date/time\n      0x00, 0x00, 0x00, 0x00, // CRC-32\n      0x00, 0x00, 0x00, 0x00, // Compressed size\n      0x00, 0x00, 0x00, 0x00, // Uncompressed size\n      0x00, 0x00, // Filename length\n      0x00, 0x00, // Extra field length\n      0x50, 0x4B, 0x05, 0x06, // End of central directory signature\n      0x00, 0x00, 0x00, 0x00, // Number of entries\n      0x00, 0x00, 0x00, 0x00, // Size of central directory\n      0x00, 0x00, 0x00, 0x00, // Offset of central directory\n      0x00, 0x00 // Comment length\n    ]);\n    \n    return new Response(mockZipContent, {\n      headers: {\n        'Content-Type': 'application/zip',\n        'Content-Disposition': 'attachment; filename=\"ocus-job-hunter-trial-v2.1.8-STABLE.zip\"',\n        'Access-Control-Allow-Origin': '*'\n      }\n    });\n    \n  } catch (error: any) {\n    return new Response('Download failed', { status: 500 });\n  }\n};\n", "import { PagesFunction, HeadersInit } from '@cloudflare/workers-types';\n\ninterface Env {\n  DB: D1Database;\n}\n\nexport const onRequestGet: PagesFunction<Env> = async ({ request, env }) => {\n  try {\n    const url = new URL(request.url);\n    const downloadToken = url.searchParams.get('token');\n\n    if (!downloadToken) {\n      return new Response(JSON.stringify({ error: 'Download token is required' }), {\n        status: 400,\n        headers: {\n          'Content-Type': 'application/json',\n          'Access-Control-Allow-Origin': '*'\n        } as HeadersInit\n      });\n    }\n\n    // Verify download token and get order\n    const order = await env.DB.prepare(`\n      SELECT * FROM orders \n      WHERE downloadToken = ? AND status = 'completed'\n    `).bind(downloadToken).first();\n\n    if (!order) {\n      return new Response(JSON.stringify({ error: 'Invalid or expired download token' }), {\n        status: 404,\n        headers: {\n          'Content-Type': 'application/json',\n          'Access-Control-Allow-Origin': '*'\n        } as HeadersInit\n      });\n    }\n\n    // Check download limits\n    if (Number(order.downloadCount) >= Number(order.maxDownloads)) {\n      return new Response(JSON.stringify({ \n        error: 'Download limit exceeded',\n        maxDownloads: order.maxDownloads,\n        currentDownloads: order.downloadCount\n      }), {\n        status: 403,\n        headers: {\n          'Content-Type': 'application/json',\n          'Access-Control-Allow-Origin': '*'\n        } as HeadersInit\n      });\n    }\n\n    // Update download count\n    await env.DB.prepare(`\n      UPDATE orders \n      SET downloadCount = downloadCount + 1 \n      WHERE downloadToken = ?\n    `).bind(downloadToken).run();\n\n    // Log the download\n    console.log(`Premium extension downloaded for order ${order.id}, download count: ${Number(order.downloadCount) + 1}`);\n\n    // Return the extension file (this would be the actual file in production)\n    // For now, return a success response with download info\n    return new Response(JSON.stringify({\n      success: true,\n      message: 'Premium extension download authorized',\n      orderId: order.id,\n      downloadCount: Number(order.downloadCount) + 1,\n      maxDownloads: Number(order.maxDownloads),\n      activationCode: order.activationCode\n    }), {\n      status: 200,\n      headers: {\n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*'\n      } as HeadersInit\n    });\n\n  } catch (error) {\n    console.error('Error processing download:', error);\n    return new Response(JSON.stringify({\n      success: false,\n      error: 'Failed to process download',\n      details: String(error)\n    }), {\n      status: 500,\n      headers: {\n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*'\n      } as HeadersInit\n    });\n  }\n};\n\nexport const onRequestOptions: PagesFunction<Env> = async () => {\n  return new Response(null, {\n    status: 200,\n    headers: {\n      'Access-Control-Allow-Origin': '*',\n      'Access-Control-Allow-Methods': 'GET, OPTIONS',\n      'Access-Control-Allow-Headers': 'Content-Type',\n    } as HeadersInit,\n  });\n};\n", "import { PagesFunction } from '@cloudflare/workers-types';\n\ninterface Env {\n  DB: D1Database;\n}\n\nexport const onRequestGet: PagesFunction<Env> = async ({ request, env }) => {\n  try {\n    const url = new URL(request.url);\n    const orderId = url.searchParams.get('orderId');\n    const invoiceNumber = url.searchParams.get('invoiceNumber');\n\n    if (!orderId && !invoiceNumber) {\n      return new Response(JSON.stringify({ error: 'Order ID or Invoice Number is required' }), {\n        status: 400,\n        headers: {\n          'Content-Type': 'application/json',\n          'Access-Control-Allow-Origin': '*'\n        }\n      });\n    }\n\n    let order = null;\n\n    try {\n      // Try to fetch from orders table first\n      const orderQuery = orderId \n        ? `SELECT * FROM orders WHERE id = ?`\n        : `SELECT * FROM orders WHERE invoiceNumber = ?`;\n      \n      order = await env.DB.prepare(orderQuery)\n        .bind(orderId || invoiceNumber)\n        .first();\n    } catch (dbError) {\n      console.log('Orders table not found, checking fallback storage:', dbError);\n      \n      // Fallback: Get orders from settings table\n      const settingsResults = await env.DB.prepare(`\n        SELECT key, value FROM settings \n        WHERE key LIKE 'order_%'\n      `).all();\n      \n      for (const setting of (settingsResults.results || [])) {\n        try {\n          const orderData = JSON.parse(setting.value as string);\n          if ((orderId && orderData.id == orderId) || \n              (invoiceNumber && orderData.invoiceNumber === invoiceNumber)) {\n            order = orderData;\n            break;\n          }\n        } catch (parseError) {\n          console.log('Error parsing order data:', parseError);\n        }\n      }\n    }\n\n    if (!order) {\n      return new Response(JSON.stringify({ error: 'Order not found' }), {\n        status: 404,\n        headers: {\n          'Content-Type': 'application/json',\n          'Access-Control-Allow-Origin': '*'\n        }\n      });\n    }\n\n    // Generate invoice data\n    const invoiceData = {\n      invoiceNumber: order.invoiceNumber || '',\n      orderId: order.id,\n      customerEmail: order.customerEmail,\n      customerName: order.customerName,\n      issueDate: order.completedAt || order.createdAt,\n      dueDate: order.completedAt || order.createdAt,\n      \n      // Company details\n      company: {\n        name: 'OCUS Job Hunter',\n        address: 'Digital Services Company',\n        email: 'support@jobhunter.one',\n        website: 'https://jobhunter.one'\n      },\n      \n      // Customer details\n      customer: {\n        name: order.customerName,\n        email: order.customerEmail\n      },\n      \n      // Items\n      items: [{\n        description: order.productName,\n        quantity: 1,\n        unitPrice: order.finalAmount,\n        total: order.finalAmount\n      }],\n      \n      // Totals\n      subtotal: order.finalAmount,\n      tax: 0,\n      total: order.finalAmount,\n      currency: order.currency,\n      \n      // Payment details\n      paymentMethod: order.paymentMethod,\n      paymentStatus: order.status,\n      activationCode: order.activationCode,\n      downloadToken: order.downloadToken\n    };\n\n    return new Response(JSON.stringify({\n      success: true,\n      invoice: invoiceData\n    }), {\n      headers: {\n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*'\n      }\n    });\n\n  } catch (error) {\n    console.error('Error generating invoice:', error);\n    return new Response(JSON.stringify({\n      success: false,\n      error: 'Failed to generate invoice',\n      details: String(error)\n    }), {\n      status: 500,\n      headers: {\n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*'\n      }\n    });\n  }\n};\n\nexport const onRequestOptions: PagesFunction<Env> = async () => {\n  return new Response(null, {\n    status: 200,\n    headers: {\n      'Access-Control-Allow-Origin': '*',\n      'Access-Control-Allow-Methods': 'GET, OPTIONS',\n      'Access-Control-Allow-Headers': 'Content-Type',\n    },\n  });\n};\n", "// Cloudflare Pages Function: /api/me/invoices\n// Handles user invoice retrieval for authenticated customers\n\nimport type { PagesFunction } from '@cloudflare/workers-types';\nimport { Env } from '../../lib/context';\n\nfunction json(data: any, status = 200) {\n  return new Response(JSON.stringify(data), {\n    status,\n    headers: {\n      'Content-Type': 'application/json',\n      'Access-Control-Allow-Origin': '*',\n      'Access-Control-Allow-Methods': 'GET, OPTIONS',\n      'Access-Control-Allow-Headers': 'Content-Type, Authorization'\n    },\n  });\n}\n\nexport const onRequestGet: PagesFunction<Env> = async ({ request, env }) => {\n  try {\n    // Check authorization header for token\n    const authHeader = request.headers.get('Authorization');\n    \n    if (!authHeader || !authHeader.startsWith('Bearer ')) {\n      return json({ error: 'Unauthorized' }, 401);\n    }\n\n    const token = authHeader.substring(7);\n    \n    // Handle demo-jwt-token\n    if (token === 'demo-jwt-token') {\n      return json([\n        {\n          id: 1,\n          invoice_number: 'INV-2024-001',\n          order_id: 1,\n          amount: '29.99',\n          currency: 'eur',\n          tax_amount: '0.00',\n          status: 'paid',\n          invoice_date: new Date().toISOString(),\n          paid_at: new Date().toISOString(),\n          created_at: new Date().toISOString(),\n          customer_name: 'Demo User',\n          customer_email: 'demo@example.com',\n          payment_method: 'stripe',\n          product_id: 'premium-extension'\n        }\n      ]);\n    }\n    \n    // Handle jwt-token-{userId}-{timestamp} format\n    if (token.startsWith('jwt-token-')) {\n      const parts = token.split('-');\n      if (parts.length >= 3) {\n        const userId = parts[2];\n        \n        // Check database for real user invoices\n        if (!env.DB) {\n          return json({ error: 'Database not available' }, 500);\n        }\n\n        try {\n          // Get customer info first\n          const customer = await env.DB.prepare(`\n            SELECT id, email, name\n            FROM customers WHERE id = ?\n          `).bind(parseInt(userId)).first();\n\n          if (!customer) {\n            return json({ error: 'Customer not found' }, 404);\n          }\n\n          // Get invoices for this customer with exact paid amounts\n          const invoices = await env.DB.prepare(`\n            SELECT \n              i.id,\n              i.invoiceNumber as invoice_number,\n              i.orderId as order_id,\n              o.finalAmount as amount,\n              i.currency,\n              i.taxAmount as tax_amount,\n              i.status,\n              i.invoiceDate as invoice_date,\n              i.dueDate as due_date,\n              i.paidAt as paid_at,\n              i.createdAt as created_at,\n              o.customerName as customer_name,\n              o.customerEmail as customer_email,\n              o.paymentMethod as payment_method,\n              'premium-extension' as product_id\n            FROM invoices i\n            LEFT JOIN orders o ON i.orderId = o.id\n            WHERE i.customerId = ?\n            ORDER BY i.createdAt DESC\n          `).bind(parseInt(userId)).all();\n\n          return json(invoices.results || []);\n\n        } catch (dbError) {\n          console.error('Database error in /api/me/invoices:', dbError);\n          return json({ error: 'Database error' }, 500);\n        }\n      }\n    }\n    \n    // For any other token, return unauthorized\n    return json({ error: 'Invalid token' }, 401);\n    \n  } catch (error: any) {\n    return json({ \n      error: error.message \n    }, 500);\n  }\n};\n\nexport const onRequestOptions: PagesFunction = async () => {\n  return new Response(null, {\n    status: 200,\n    headers: {\n      'Access-Control-Allow-Origin': '*',\n      'Access-Control-Allow-Methods': 'GET, OPTIONS',\n      'Access-Control-Allow-Headers': 'Content-Type, Authorization',\n    },\n  });\n};\n", "// Cloudflare Pages Function: /api/me/orders\n// Handles user order/purchase history retrieval for authenticated customers\n\nimport type { PagesFunction } from '@cloudflare/workers-types';\nimport { Env } from '../../lib/context';\n\nfunction json(data: any, status = 200) {\n  return new Response(JSON.stringify(data), {\n    status,\n    headers: {\n      'Content-Type': 'application/json',\n      'Access-Control-Allow-Origin': '*',\n      'Access-Control-Allow-Methods': 'GET, OPTIONS',\n      'Access-Control-Allow-Headers': 'Content-Type, Authorization'\n    },\n  });\n}\n\nexport const onRequestGet: PagesFunction<Env> = async ({ request, env }) => {\n  try {\n    // Check authorization header for token\n    const authHeader = request.headers.get('Authorization');\n    \n    if (!authHeader || !authHeader.startsWith('Bearer ')) {\n      return json({ error: 'Unauthorized' }, 401);\n    }\n\n    const token = authHeader.substring(7);\n    \n    // Handle demo-jwt-token\n    if (token === 'demo-jwt-token') {\n      return json([\n        {\n          id: 1,\n          customerEmail: 'demo@example.com',\n          customerName: 'Demo User',\n          originalAmount: '29.99',\n          finalAmount: '29.99',\n          currency: 'eur',\n          status: 'completed',\n          paymentMethod: 'stripe',\n          downloadToken: 'demo-download-token',\n          downloadCount: 1,\n          maxDownloads: 5,\n          activationCode: 'DEMO-ACTIVATION-CODE',\n          createdAt: new Date().toISOString(),\n          completedAt: new Date().toISOString()\n        }\n      ]);\n    }\n    \n    // Handle jwt-token-{userId}-{timestamp} format\n    if (token.startsWith('jwt-token-')) {\n      const parts = token.split('-');\n      if (parts.length >= 3) {\n        const userId = parts[2];\n        \n        // Check database for real user orders\n        if (!env.DB) {\n          return json({ error: 'Database not available' }, 500);\n        }\n\n        try {\n          // Get customer info first\n          const customer = await env.DB.prepare(`\n            SELECT id, email, name\n            FROM customers WHERE id = ?\n          `).bind(parseInt(userId)).first();\n\n          if (!customer) {\n            return json({ error: 'Customer not found' }, 404);\n          }\n\n          // Get orders for this customer\n          const orders = await env.DB.prepare(`\n            SELECT \n              id,\n              customerEmail,\n              customerName,\n              originalAmount,\n              finalAmount,\n              currency,\n              status,\n              paymentMethod,\n              downloadToken,\n              downloadCount,\n              maxDownloads,\n              activationCode,\n              createdAt,\n              completedAt\n            FROM orders\n            WHERE customerId = ?\n            ORDER BY createdAt DESC\n          `).bind(parseInt(userId)).all();\n\n          return json(orders.results || []);\n\n        } catch (dbError) {\n          console.error('Database error in /api/me/orders:', dbError);\n          return json({ error: 'Database error' }, 500);\n        }\n      }\n    }\n    \n    // For any other token, return unauthorized\n    return json({ error: 'Invalid token' }, 401);\n    \n  } catch (error: any) {\n    return json({ \n      error: error.message \n    }, 500);\n  }\n};\n\nexport const onRequestOptions: PagesFunction = async () => {\n  return new Response(null, {\n    status: 200,\n    headers: {\n      'Access-Control-Allow-Origin': '*',\n      'Access-Control-Allow-Methods': 'GET, OPTIONS',\n      'Access-Control-Allow-Headers': 'Content-Type, Authorization',\n    },\n  });\n};\n", "import { PagesFunction } from '@cloudflare/workers-types';\n\ninterface Env {\n  DB: D1Database;\n}\n\ninterface CompletePurchaseRequest {\n  paymentIntentId: string;\n  customerEmail: string;\n  customerName: string;\n  amount: number;\n  currency: string;\n}\n\nexport const onRequestPost: PagesFunction<Env> = async ({ request, env }) => {\n  try {\n    const body = await request.json() as CompletePurchaseRequest;\n    const { paymentIntentId, customerEmail, customerName, amount, currency } = body;\n\n    if (!paymentIntentId || !customerEmail || !customerName || !amount) {\n      return new Response(JSON.stringify({ error: 'Missing required fields' }), {\n        status: 400,\n        headers: {\n          'Content-Type': 'application/json',\n          'Access-Control-Allow-Origin': '*'\n        }\n      });\n    }\n\n    // Generate unique tokens\n    const downloadToken = crypto.randomUUID();\n    const activationCode = Math.random().toString(36).substring(2, 15).toUpperCase();\n    const invoiceNumber = `INV-${Date.now()}-${Math.random().toString(36).substring(2, 8).toUpperCase()}`;\n\n    let orderId = null;\n\n    try {\n      // Try to create order record if orders table exists\n      const orderResult = await env.DB.prepare(`\n        INSERT INTO orders (\n          customerEmail, customerName, productId, productName,\n          originalAmount, finalAmount, currency, status, paymentMethod,\n          paymentIntentId, downloadToken, activationCode, invoiceNumber,\n          completedAt\n        ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, datetime('now'))\n      `).bind(\n        customerEmail,\n        customerName,\n        1, // Product ID for OCUS Extension\n        'OCUS Job Hunter Extension',\n        amount,\n        amount,\n        currency.toUpperCase(),\n        'completed',\n        'stripe',\n        paymentIntentId,\n        downloadToken,\n        activationCode,\n        invoiceNumber\n      ).run();\n      \n      orderId = orderResult.meta?.last_row_id;\n    } catch (dbError) {\n      console.log('Orders table not found, using fallback storage:', dbError);\n      // Fallback: Store in settings table as JSON\n      const orderData = {\n        id: Date.now(),\n        customerEmail,\n        customerName,\n        productId: 1,\n        productName: 'OCUS Job Hunter Extension',\n        originalAmount: amount,\n        finalAmount: amount,\n        currency: currency.toUpperCase(),\n        status: 'completed',\n        paymentMethod: 'stripe',\n        paymentIntentId,\n        downloadToken,\n        activationCode,\n        invoiceNumber,\n        completedAt: new Date().toISOString()\n      };\n      \n      // Store in settings table\n      const settingsKey = `order_${paymentIntentId}`;\n      await env.DB.prepare(`\n        INSERT OR REPLACE INTO settings (key, value, updated_at)\n        VALUES (?, ?, datetime('now'))\n      `).bind(settingsKey, JSON.stringify(orderData)).run();\n      \n      orderId = orderData.id;\n    }\n\n    try {\n      // Try to create or update user record if users table exists\n      await env.DB.prepare(`\n        INSERT OR REPLACE INTO users (\n          email, name, isPremium, lastLoginAt, updatedAt\n        ) VALUES (?, ?, 1, datetime('now'), datetime('now'))\n      `).bind(customerEmail, customerName).run();\n    } catch (userDbError) {\n      console.log('Users table not found, using fallback storage:', userDbError);\n      // Fallback: Store user in settings table\n      const userData = {\n        email: customerEmail,\n        name: customerName,\n        isPremium: true,\n        lastLoginAt: new Date().toISOString(),\n        updatedAt: new Date().toISOString()\n      };\n      \n      const userSettingsKey = `user_${customerEmail.replace('@', '_at_').replace('.', '_dot_')}`;\n      await env.DB.prepare(`\n        INSERT OR REPLACE INTO settings (key, value, updated_at)\n        VALUES (?, ?, datetime('now'))\n      `).bind(userSettingsKey, JSON.stringify(userData)).run();\n    }\n\n    return new Response(JSON.stringify({\n      success: true,\n      orderId,\n      downloadToken,\n      activationCode,\n      invoiceNumber,\n      message: 'Purchase completed successfully'\n    }), {\n      headers: {\n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*'\n      }\n    });\n\n  } catch (error) {\n    console.error('Error completing purchase:', error);\n    return new Response(JSON.stringify({\n      success: false,\n      error: 'Failed to complete purchase',\n      details: String(error)\n    }), {\n      status: 500,\n      headers: {\n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*'\n      }\n    });\n  }\n};\n\nexport const onRequestOptions: PagesFunction<Env> = async () => {\n  return new Response(null, {\n    status: 200,\n    headers: {\n      'Access-Control-Allow-Origin': '*',\n      'Access-Control-Allow-Methods': 'POST, OPTIONS',\n      'Access-Control-Allow-Headers': 'Content-Type',\n    },\n  });\n};\n", "import { PagesFunction } from '@cloudflare/workers-types';\n\ninterface Env {\n  DB: D1Database;\n}\n\nexport const onRequestGet: PagesFunction<Env> = async ({ request, env }) => {\n  try {\n    const url = new URL(request.url);\n    const customerEmail = url.searchParams.get('email');\n\n    if (!customerEmail) {\n      return new Response(JSON.stringify({ error: 'Email parameter is required' }), {\n        status: 400,\n        headers: {\n          'Content-Type': 'application/json',\n          'Access-Control-Allow-Origin': '*'\n        }\n      });\n    }\n\n    let orders = [];\n\n    try {\n      // Try to fetch from orders table first\n      const orderResults = await env.DB.prepare(`\n        SELECT * FROM orders \n        WHERE customerEmail = ? \n        ORDER BY createdAt DESC\n      `).bind(customerEmail).all();\n      orders = orderResults.results || [];\n    } catch (dbError) {\n      console.log('Orders table not found, checking fallback storage:', dbError);\n      \n      // Fallback: Get orders from settings table\n      const settingsResults = await env.DB.prepare(`\n        SELECT key, value FROM settings \n        WHERE key LIKE 'order_%'\n      `).all();\n      \n      const allOrders = [];\n      for (const setting of (settingsResults.results || [])) {\n        try {\n          const orderData = JSON.parse(setting.value as string);\n          if (orderData.customerEmail === customerEmail) {\n            allOrders.push(orderData);\n          }\n        } catch (parseError) {\n          console.log('Error parsing order data:', parseError);\n        }\n      }\n      \n      // Sort by completedAt or createdAt\n      orders = allOrders.sort((a, b) => {\n        const dateA = new Date(a.completedAt || a.createdAt);\n        const dateB = new Date(b.completedAt || b.createdAt);\n        return dateB.getTime() - dateA.getTime();\n      });\n    }\n\n    return new Response(JSON.stringify({\n      success: true,\n      orders: orders\n    }), {\n      headers: {\n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*'\n      }\n    });\n\n  } catch (error) {\n    console.error('Error fetching user orders:', error);\n    return new Response(JSON.stringify({\n      success: false,\n      error: 'Failed to fetch orders',\n      details: String(error)\n    }), {\n      status: 500,\n      headers: {\n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*'\n      }\n    });\n  }\n};\n\nexport const onRequestOptions: PagesFunction<Env> = async () => {\n  return new Response(null, {\n    status: 200,\n    headers: {\n      'Access-Control-Allow-Origin': '*',\n      'Access-Control-Allow-Methods': 'GET, OPTIONS',\n      'Access-Control-Allow-Headers': 'Content-Type',\n    },\n  });\n};\n", "export async function onRequestGet(context: any) {\n  const { env } = context;\n  \n  try {\n    // Fetch the current product pricing from D1 database\n    const selectQuery = `SELECT * FROM products WHERE id = 1 AND isActive = 1`;\n    const result = await env.DB.prepare(selectQuery).first();\n\n    if (!result) {\n      // Return default pricing if no product found\n      return new Response(JSON.stringify({\n        id: 1,\n        name: \"OCUS Job Hunter Extension\",\n        price: \"250.00\",\n        beforePrice: null\n      }), {\n        status: 200,\n        headers: {\n          'Content-Type': 'application/json',\n          'Access-Control-Allow-Origin': '*',\n          'Access-Control-Allow-Methods': 'GET, POST, PUT, DELETE, OPTIONS',\n          'Access-Control-Allow-Headers': 'Content-Type, Authorization'\n        }\n      });\n    }\n\n    // Return the product pricing\n    return new Response(JSON.stringify({\n      id: result.id,\n      name: result.name,\n      price: result.price.toString(),\n      beforePrice: result.beforePrice ? result.beforePrice.toString() : null\n    }), {\n      status: 200,\n      headers: {\n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*',\n        'Access-Control-Allow-Methods': 'GET, POST, PUT, DELETE, OPTIONS',\n        'Access-Control-Allow-Headers': 'Content-Type, Authorization'\n      }\n    });\n\n  } catch (error: any) {\n    console.error(\"Error fetching pricing:\", error);\n    return new Response(JSON.stringify({ \n      message: \"Error fetching pricing: \" + error.message \n    }), {\n      status: 500,\n      headers: {\n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*',\n        'Access-Control-Allow-Methods': 'GET, POST, PUT, DELETE, OPTIONS',\n        'Access-Control-Allow-Headers': 'Content-Type, Authorization'\n      }\n    });\n  }\n}\n\nexport async function onRequestOptions(context: any) {\n  return new Response(null, {\n    status: 200,\n    headers: {\n      'Access-Control-Allow-Origin': '*',\n      'Access-Control-Allow-Methods': 'GET, POST, PUT, DELETE, OPTIONS',\n      'Access-Control-Allow-Headers': 'Content-Type, Authorization'\n    }\n  });\n}\n", "interface Env {\n  DB: D1Database;\n}\n\nexport const onRequestGet: PagesFunction<Env> = async (context) => {\n  try {\n    const { params, request } = context;\n    const downloadType = params.type as string; // 'premium' or 'trial'\n    \n    // Get user info from request headers or query params\n    const url = new URL(request.url);\n    const userId = url.searchParams.get('userId') || '1'; // Default for demo\n    \n    if (!['premium', 'trial'].includes(downloadType)) {\n      return new Response(JSON.stringify({ error: 'Invalid download type' }), {\n        status: 400,\n        headers: { 'Content-Type': 'application/json' }\n      });\n    }\n\n    // Check if user has premium access for premium downloads\n    if (downloadType === 'premium') {\n      const userQuery = `SELECT is_premium FROM users WHERE id = ?`;\n      const userResult = await context.env.DB.prepare(userQuery).bind(userId).first();\n      \n      if (!userResult?.is_premium) {\n        return new Response(JSON.stringify({ error: 'Premium access required' }), {\n          status: 403,\n          headers: { 'Content-Type': 'application/json' }\n        });\n      }\n    }\n\n    // Log the download\n    const downloadLogQuery = `\n      INSERT INTO user_downloads (user_id, download_type, version, ip_address, user_agent)\n      VALUES (?, ?, ?, ?, ?)\n    `;\n    \n    const clientIP = request.headers.get('CF-Connecting-IP') || \n                    request.headers.get('X-Forwarded-For') || \n                    'unknown';\n    const userAgent = request.headers.get('User-Agent') || 'unknown';\n    \n    await context.env.DB.prepare(downloadLogQuery)\n      .bind(userId, downloadType, 'v2.1.9', clientIP, userAgent)\n      .run();\n\n    // Create a mock file response (in production, this would serve actual files)\n    const fileName = downloadType === 'premium' \n      ? 'ocus-job-hunter-premium-v2.1.9-STABLE.zip'\n      : 'ocus-job-hunter-trial-v2.1.9-STABLE.zip';\n      \n    const mockFileContent = `Mock ${downloadType} extension file content for ${fileName}`;\n    \n    return new Response(mockFileContent, {\n      status: 200,\n      headers: {\n        'Content-Type': 'application/zip',\n        'Content-Disposition': `attachment; filename=\"${fileName}\"`,\n        'Access-Control-Allow-Origin': '*'\n      }\n    });\n\n  } catch (error) {\n    console.error('Error handling extension download:', error);\n    return new Response(JSON.stringify({ error: 'Download failed' }), {\n      status: 500,\n      headers: { \n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*'\n      }\n    });\n  }\n};\n\nexport const onRequestOptions: PagesFunction = async () => {\n  return new Response(null, {\n    status: 200,\n    headers: {\n      'Access-Control-Allow-Origin': '*',\n      'Access-Control-Allow-Methods': 'GET, OPTIONS',\n      'Access-Control-Allow-Headers': 'Content-Type'\n    }\n  });\n};\n", "export async function onRequestPost(context: any) {\n  const { request, env, params } = context;\n  const orderId = params.orderId;\n\n  // CORS headers\n  const corsHeaders = {\n    'Access-Control-Allow-Origin': '*',\n    'Access-Control-Allow-Methods': 'POST, OPTIONS',\n    'Access-Control-Allow-Headers': 'Content-Type, Authorization',\n  };\n\n  // Handle preflight requests\n  if (request.method === 'OPTIONS') {\n    return new Response(null, { headers: corsHeaders });\n  }\n\n  try {\n    // Check if order exists and is completed\n    const orderQuery = `\n      SELECT \n        id, customer_id, customer_email, customer_name, \n        product_id, final_amount, currency, payment_method,\n        status, completed_at, created_at\n      FROM orders \n      WHERE id = ? AND status = 'completed'\n    `;\n    \n    const orderResult = await env.DB.prepare(orderQuery).bind(orderId).first();\n    \n    if (!orderResult) {\n      return new Response(JSON.stringify({ \n        success: false, \n        error: 'Order not found or not completed' \n      }), {\n        status: 404,\n        headers: { 'Content-Type': 'application/json', ...corsHeaders }\n      });\n    }\n\n    // Check if invoice already exists\n    const existingInvoiceQuery = `\n      SELECT id FROM invoices WHERE order_id = ?\n    `;\n    \n    const existingInvoice = await env.DB.prepare(existingInvoiceQuery).bind(orderId).first();\n    \n    if (existingInvoice) {\n      return new Response(JSON.stringify({ \n        success: false, \n        error: 'Invoice already exists for this order' \n      }), {\n        status: 400,\n        headers: { 'Content-Type': 'application/json', ...corsHeaders }\n      });\n    }\n\n    // Generate invoice number\n    const invoiceNumber = `INV-${Date.now()}-${orderId}`;\n    \n    // Calculate tax (assuming 0% for now, can be configured)\n    const amount = parseFloat(orderResult.final_amount);\n    const taxRate = 0.0; // 0% tax\n    const taxAmount = amount * taxRate;\n    \n    // Create invoice\n    const createInvoiceQuery = `\n      INSERT INTO invoices (\n        invoice_number, order_id, customer_id, amount, currency,\n        tax_amount, status, invoice_date, paid_at, created_at\n      ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)\n    `;\n    \n    const now = new Date().toISOString();\n    \n    const invoiceResult = await env.DB.prepare(createInvoiceQuery)\n      .bind(\n        invoiceNumber,\n        orderId,\n        orderResult.customer_id,\n        orderResult.final_amount,\n        orderResult.currency,\n        taxAmount.toString(),\n        'paid', // Since order is completed, invoice is paid\n        orderResult.completed_at || now,\n        orderResult.completed_at || now,\n        now\n      )\n      .run();\n\n    if (!invoiceResult.success) {\n      throw new Error('Failed to create invoice');\n    }\n\n    return new Response(JSON.stringify({ \n      success: true, \n      invoiceId: invoiceResult.meta.last_row_id,\n      invoiceNumber: invoiceNumber,\n      message: 'Invoice created successfully' \n    }), {\n      status: 201,\n      headers: { 'Content-Type': 'application/json', ...corsHeaders }\n    });\n\n  } catch (error) {\n    console.error('Error creating invoice:', error);\n    return new Response(JSON.stringify({ \n      success: false, \n      error: 'Failed to create invoice' \n    }), {\n      status: 500,\n      headers: { 'Content-Type': 'application/json', ...corsHeaders }\n    });\n  }\n}\n", "import { TicketStorage, Env } from '../../lib/db';\n\ninterface TicketUpdatePayload {\n  status?: string;\n}\n\nfunction json(data: any, status = 200) {\n  return new Response(JSON.stringify(data), {\n    status,\n    headers: {\n      'Content-Type': 'application/json',\n      'Access-Control-Allow-Origin': '*',\n    },\n  });\n}\n\nexport const onRequestPatch = async ({ request, params, env }: { request: Request; params: { id: string }; env: Env }) => {\n  try {\n    const ticketId = Number(params.id);\n    const expressBase: string | undefined = env?.EXPRESS_API_BASE;\n    if (expressBase) {\n      const base = expressBase.replace(/\\/$/, \"\");\n      const url = `${base}/api/tickets/${ticketId}`;\n      const headers: Record<string, string> = {};\n      const cookie = request.headers.get('cookie');\n      const ct = request.headers.get('content-type');\n      const auth = request.headers.get('authorization');\n      if (cookie) headers['cookie'] = cookie;\n      if (ct) headers['content-type'] = ct;\n      if (auth) headers['authorization'] = auth;\n      const proxied = await fetch(url, { method: 'PATCH', headers, body: request.body, redirect: 'manual' });\n      const respHeaders = new Headers(proxied.headers);\n      const setCookie = respHeaders.get('set-cookie');\n      if (setCookie) {\n        const rewritten = setCookie.replace(/;\\s*Domain=[^;]+/i, '');\n        respHeaders.delete('set-cookie');\n        respHeaders.append('set-cookie', rewritten);\n      }\n      return new Response(proxied.body, { status: proxied.status, headers: respHeaders });\n    }\n    const updates = await request.json() as TicketUpdatePayload;\n    const storage = new TicketStorage(env.DB);\n\n    const ticket = await storage.getTicketById(ticketId);\n    if (!ticket) return json({ success: false, message: 'Ticket not found' }, 404);\n\n    if (updates.status) {\n      await storage.updateTicketStatus(ticketId, updates.status);\n    }\n    \n    const updatedTicket = await storage.getTicketById(ticketId);\n    return json({ success: true, ticket: updatedTicket });\n  } catch (error) {\n    console.error('Failed to update ticket:', error);\n    const message = error instanceof Error ? error.message : 'An unknown error occurred';\n    return json({ success: false, message }, 500);\n  }\n};\n\nexport const onRequestPut = async (ctx: any) => {\n  // Reuse proxy and fallback logic from PATCH\n  return onRequestPatch(ctx);\n};\n\nexport const onRequestDelete = async ({ request, params, env }: { request: Request; params: { id: string }; env: Env }) => {\n  try {\n    const ticketId = Number(params.id);\n    const expressBase: string | undefined = env?.EXPRESS_API_BASE;\n    if (expressBase) {\n      const base = expressBase.replace(/\\/$/, \"\");\n      const url = `${base}/api/tickets/${ticketId}`;\n      const headers: Record<string, string> = {};\n      const cookie = request.headers.get('cookie');\n      const auth = request.headers.get('authorization');\n      if (cookie) headers['cookie'] = cookie;\n      if (auth) headers['authorization'] = auth;\n      const proxied = await fetch(url, { method: 'DELETE', headers, redirect: 'manual' });\n      const respHeaders = new Headers(proxied.headers);\n      const setCookie = respHeaders.get('set-cookie');\n      if (setCookie) {\n        const rewritten = setCookie.replace(/;\\s*Domain=[^;]+/i, '');\n        respHeaders.delete('set-cookie');\n        respHeaders.append('set-cookie', rewritten);\n      }\n      return new Response(proxied.body, { status: proxied.status, headers: respHeaders });\n    }\n    const storage = new TicketStorage(env.DB);\n    \n    const ticket = await storage.getTicketById(ticketId);\n    if (!ticket) {\n      return json({ success: false, message: 'Ticket not found' }, 404);\n    }\n    \n    await storage.deleteTicket(ticketId);\n    return json({ success: true, message: `Ticket ${ticketId} deleted` });\n  } catch (error) {\n    console.error('Failed to delete ticket:', error);\n    const message = error instanceof Error ? error.message : 'An unknown error occurred';\n    return json({ success: false, message }, 500);\n  }\n};\n\nexport const onRequestOptions = async () => {\n  return new Response(null, {\n    headers: {\n      'Access-Control-Allow-Origin': '*',\n      'Access-Control-Allow-Methods': 'PUT, PATCH, DELETE, OPTIONS',\n      'Access-Control-Allow-Headers': 'Content-Type'\n    }\n  });\n};\n", "import { Env } from '../lib/context';\n\n// Type for the data fetched from the database\ninterface DbAuthSettings {\n  google_enabled: number;\n  facebook_enabled: number;\n  github_enabled: number;\n  recaptcha_enabled: number;\n  recaptcha_customer_enabled: number;\n  recaptcha_admin_enabled: number;\n  recaptcha_site_key: string | null;\n  google_client_id: string | null;\n  facebook_app_id: string | null;\n  github_client_id: string | null;\n}\n\n// Type for the JSON response sent to the client\ninterface ApiAuthSettings {\n  googleEnabled: boolean;\n  facebookEnabled: boolean;\n  githubEnabled: boolean;\n  recaptchaEnabled: boolean;\n  recaptchaCustomerEnabled: boolean;\n  recaptchaAdminEnabled: boolean;\n  recaptchaSiteKey: string;\n  googleClientId: string;\n  facebookAppId: string;\n  githubClientId: string;\n}\n\nconst defaultSettings: ApiAuthSettings = {\n  googleEnabled: false,\n  facebookEnabled: false,\n  githubEnabled: false,\n  recaptchaEnabled: false,\n  recaptchaCustomerEnabled: false,\n  recaptchaAdminEnabled: false,\n  recaptchaSiteKey: '',\n  googleClientId: '',\n  facebookAppId: '',\n  githubClientId: '',\n};\n\nexport const onRequestGet: PagesFunction<Env> = async ({ env }) => {\n  try {\n    const dbQuery = 'SELECT * FROM auth_settings WHERE id = 1';\n    const dbSettings = await env.DB.prepare(dbQuery).first<DbAuthSettings>();\n\n    const apiSettings: ApiAuthSettings = {\n      ...defaultSettings,\n      ...(dbSettings && {\n        googleEnabled: !!dbSettings.google_enabled,\n        facebookEnabled: !!dbSettings.facebook_enabled,\n        githubEnabled: !!dbSettings.github_enabled,\n        recaptchaEnabled: !!dbSettings.recaptcha_enabled,\n        recaptchaCustomerEnabled: !!dbSettings.recaptcha_customer_enabled,\n        recaptchaAdminEnabled: !!dbSettings.recaptcha_admin_enabled,\n        recaptchaSiteKey: dbSettings.recaptcha_site_key || '',\n        googleClientId: dbSettings.google_client_id || '',\n        facebookAppId: dbSettings.facebook_app_id || '',\n        githubClientId: dbSettings.github_client_id || '',\n      }),\n    };\n\n    return new Response(JSON.stringify(apiSettings), {\n      headers: {\n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*',\n      },\n    });\n  } catch (error) {\n    console.error('Failed to fetch auth settings:', error);\n    return new Response(JSON.stringify(defaultSettings), {\n      status: 500,\n      headers: {\n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*',\n      },\n    });\n  }\n};\n\nexport const onRequestOptions: PagesFunction = async () => {\n  return new Response(null, {\n    headers: {\n      'Access-Control-Allow-Origin': '*',\n      'Access-Control-Allow-Methods': 'GET, OPTIONS',\n      'Access-Control-Allow-Headers': 'Content-Type',\n    },\n  });\n};\n", "import { SettingsStorage } from '../lib/settings-storage';\n\nexport const onRequestPost = async ({ request, env }: any) => {\n  try {\n    const { message, history } = await request.json();\n    \n    // Get OpenAI API key from database settings\n    let openaiApiKey: string | null = null;\n    if (env.DB) {\n      try {\n        const settingsStorage = new SettingsStorage(env.DB);\n        await settingsStorage.initializeSettings();\n        openaiApiKey = await settingsStorage.getOpenAIApiKey();\n      } catch (error) {\n        console.error('Failed to get API key from settings:', error);\n      }\n    }\n    \n    // Fallback to environment variable\n    if (!openaiApiKey) {\n      openaiApiKey = env.OPENAI_API_KEY;\n    }\n    \n    // Check if OpenAI API key is configured\n    if (!openaiApiKey) {\n      return new Response(JSON.stringify({\n        success: false,\n        response: \"I'm currently not configured to respond. Please contact our support team for assistance.\"\n      }), {\n        status: 200,\n        headers: { \n          'Content-Type': 'application/json',\n          'Access-Control-Allow-Origin': '*'\n        }\n      });\n    }\n\n    // Prepare conversation context\n    const conversationHistory = history?.map((msg: any) => ({\n      role: msg.sender === 'user' ? 'user' : 'assistant',\n      content: msg.text\n    })) || [];\n\n    // System prompt for OCUS Job Hunter assistant\n    const systemPrompt = {\n      role: 'system',\n      content: `You are a helpful AI assistant for the OCUS Job Hunter Chrome Extension. You help users with:\n      \n      - Understanding how to use the job hunting extension\n      - Troubleshooting extension issues\n      - Explaining features and benefits\n      - Providing job search tips and strategies\n      - Answering questions about pricing and subscriptions\n      \n      Keep responses helpful, concise, and focused on job hunting and the extension. If asked about unrelated topics, politely redirect to job hunting assistance.`\n    };\n\n    // Call OpenAI API\n    const openaiResponse = await fetch('https://api.openai.com/v1/chat/completions', {\n      method: 'POST',\n      headers: {\n        'Authorization': `Bearer ${openaiApiKey}`,\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        model: 'gpt-4o-mini',\n        messages: [\n          systemPrompt,\n          ...conversationHistory,\n          { role: 'user', content: message }\n        ],\n        max_tokens: 500,\n        temperature: 0.7\n      })\n    });\n\n    if (!openaiResponse.ok) {\n      throw new Error(`OpenAI API error: ${openaiResponse.status}`);\n    }\n\n    const openaiData = await openaiResponse.json();\n    const assistantResponse = openaiData.choices[0]?.message?.content || \n      \"I'm having trouble processing your request. Please try again or contact our support team.\";\n\n    return new Response(JSON.stringify({\n      success: true,\n      response: assistantResponse\n    }), {\n      headers: { \n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*'\n      }\n    });\n\n  } catch (error) {\n    console.error('Chat API error:', error);\n    \n    return new Response(JSON.stringify({\n      success: false,\n      response: \"I'm experiencing technical difficulties. Please contact our support team for immediate assistance.\"\n    }), {\n      status: 200,\n      headers: { \n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*'\n      }\n    });\n  }\n};\n\nexport const onRequestOptions = async () => {\n  return new Response(null, {\n    status: 200,\n    headers: {\n      'Access-Control-Allow-Origin': '*',\n      'Access-Control-Allow-Methods': 'POST, OPTIONS',\n      'Access-Control-Allow-Headers': 'Content-Type, Authorization',\n    },\n  });\n};\n", "// Cloudflare Pages Function: /api/complete-stripe-payment\n// Redirects to the correct purchase-complete endpoint\n\nimport type { PagesFunction } from '@cloudflare/workers-types';\nimport { Env } from '../lib/context';\n\ninterface StripePaymentRequest {\n  paymentIntentId: string;\n  customerEmail: string;\n  customerName: string;\n}\n\nfunction json(data: any, status = 200) {\n  return new Response(JSON.stringify(data), {\n    status,\n    headers: {\n      'Content-Type': 'application/json',\n      'Access-Control-Allow-Origin': '*',\n    },\n  });\n}\n\nexport const onRequestPost: PagesFunction<Env> = async ({ request, env }) => {\n  try {\n    const body = await request.json() as StripePaymentRequest;\n    const { paymentIntentId, customerEmail, customerName } = body;\n\n    if (!paymentIntentId || !customerEmail) {\n      return json({ success: false, message: 'Missing required fields' }, 400);\n    }\n\n    console.log('Stripe payment completion request:', { paymentIntentId, customerEmail, customerName });\n\n    // Call the purchase-complete endpoint with the correct data structure\n    const purchaseCompleteRequest = {\n      paymentIntentId,\n      customerEmail,\n      customerName,\n      amount: 29.99, // Default amount - should be passed from frontend\n      currency: 'USD',\n      productType: 'premium_extension'\n    };\n\n    // Call purchase-complete logic directly using the same logic\n    if (!env.DB) {\n      console.error('D1 database not available');\n      return json({ success: false, message: 'Database not available' }, 500);\n    }\n\n    const now = new Date().toISOString();\n\n    try {\n      // Update users table (for registered users)\n      const userUpdateResult = await env.DB.prepare(`\n        UPDATE users \n        SET is_premium = 1,\n            extension_activated = 1,\n            premium_activated_at = ?\n        WHERE email = ?\n      `).bind(now, customerEmail).run();\n      \n      console.log('User table update result for', customerEmail, ':', userUpdateResult);\n      \n      // Ensure we have a customer ID for orders/invoices\n      let finalCustomerId = null;\n      const existingCustomer = await env.DB.prepare(`\n        SELECT id FROM customers WHERE email = ?\n      `).bind(customerEmail).first();\n\n      if (existingCustomer) {\n        finalCustomerId = (existingCustomer as any).id;\n        await env.DB.prepare(`\n          UPDATE customers \n          SET is_premium = 1,\n              extension_activated = 1\n          WHERE id = ?\n        `).bind(finalCustomerId).run();\n      } else {\n        // Create new customer record\n        const result = await env.DB.prepare(`\n          INSERT INTO customers (\n            email, name, is_premium, extension_activated, \n            created_at\n          ) VALUES (?, ?, 1, 1, ?)\n        `).bind(\n          customerEmail, \n          customerName || customerEmail, \n          now\n        ).run();\n        \n        finalCustomerId = result.meta?.last_row_id as number;\n      }\n\n      console.log('Final customer ID for orders/invoices:', finalCustomerId);\n\n      // Create order record\n      const downloadToken = `download_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n      const orderResult = await env.DB.prepare(`\n        INSERT INTO orders (\n          customer_id, customer_email, customer_name, \n          original_amount, final_amount, currency, status, payment_method,\n          payment_intent_id, download_token, created_at, completed_at\n        ) VALUES (?, ?, ?, ?, ?, ?, 'completed', 'stripe', ?, ?, ?, ?)\n      `).bind(\n        finalCustomerId,\n        customerEmail,\n        customerName || customerEmail,\n        purchaseCompleteRequest.amount,\n        purchaseCompleteRequest.amount,\n        purchaseCompleteRequest.currency.toLowerCase(),\n        paymentIntentId,\n        downloadToken,\n        now,\n        now\n      ).run();\n\n      const orderId = orderResult.meta?.last_row_id as number;\n\n      // Generate activation code\n      const activationCode = `OCUS_${Date.now()}_${Math.random().toString(36).substr(2, 9).toUpperCase()}`;\n      \n      await env.DB.prepare(`\n        INSERT INTO activation_codes (\n          code, order_id, created_at\n        ) VALUES (?, ?, ?)\n      `).bind(activationCode, orderId, now).run();\n\n      // Skip invoice creation for now due to schema conflicts\n      // Invoice will be generated via separate endpoint if needed\n      console.log('Skipping invoice creation due to schema conflicts');\n\n      console.log('Purchase completed successfully:', {\n        customerId: finalCustomerId,\n        orderId,\n        paymentIntentId,\n        activationCode\n      });\n    \n      // Return activation key for frontend compatibility\n      return json({\n        success: true,\n        activationKey: activationCode,\n        message: 'Payment completed successfully'\n      });\n\n    } catch (error: any) {\n      console.error('Error in complete-stripe-payment:', error);\n      return json({ \n        success: false, \n        message: error.message \n      }, 500);\n    }\n  } catch (error: any) {\n    console.error('Error in complete-stripe-payment:', error);\n    return json({ \n      success: false, \n      message: error.message \n    }, 500);\n  }\n};\n\nexport const onRequestOptions: PagesFunction<Env> = async () => {\n  return new Response(null, {\n    status: 200,\n    headers: {\n      'Access-Control-Allow-Origin': '*',\n      'Access-Control-Allow-Methods': 'POST, OPTIONS',\n      'Access-Control-Allow-Headers': 'Content-Type',\n    },\n  });\n};\n", "import type { PagesFunction, HeadersInit } from '@cloudflare/workers-types';\nimport { Env } from '../lib/context';\n\ninterface PaymentIntentRequest {\n  amount: number;\n  currency?: string;\n  customerEmail?: string;\n  customerName?: string;\n  productId?: string;\n}\n\nexport const onRequestPost: PagesFunction<Env> = async ({ request, env }) => {\n  try {\n    const body = await request.json() as PaymentIntentRequest;\n    const { amount, currency = 'usd', customerEmail, customerName, productId } = body;\n\n    // Log the received data for debugging\n    console.log('Payment intent request:', { amount, currency, customerEmail, productId });\n\n    // Convert amount to number and validate\n    const numericAmount = typeof amount === 'string' ? parseFloat(amount) : Number(amount);\n    \n    if (!numericAmount || isNaN(numericAmount) || numericAmount <= 0) {\n      console.error('Invalid amount received:', { amount, numericAmount, type: typeof amount });\n      return new Response(JSON.stringify({\n        success: false,\n        error: `Invalid amount: ${amount}. Must be a positive number.`\n      }), {\n        status: 400,\n        headers: {\n          'Content-Type': 'application/json',\n          'Access-Control-Allow-Origin': '*'\n        } as HeadersInit\n      });\n    }\n\n    // Get payment settings from database\n    const paymentSettings = await env.DB.prepare(`\n      SELECT key, value FROM settings \n      WHERE key LIKE 'payment_%'\n    `).all();\n\n    const settings: any = {};\n    paymentSettings.results?.forEach((row: any) => {\n      const key = row.key.replace('payment_', '');\n      let value = row.value;\n      if (value === 'true') value = true;\n      if (value === 'false') value = false;\n      settings[key] = value;\n    });\n\n    // Check if Stripe is enabled and configured\n    if (!settings.stripeEnabled || !settings.stripeSecretKey) {\n      return new Response(JSON.stringify({\n        success: false,\n        error: 'Payment processing not configured'\n      }), {\n        status: 503,\n        headers: {\n          'Content-Type': 'application/json',\n          'Access-Control-Allow-Origin': '*'\n        } as HeadersInit\n      });\n    }\n\n    // Create Stripe payment intent\n    const stripeResponse = await fetch('https://api.stripe.com/v1/payment_intents', {\n      method: 'POST',\n      headers: {\n        'Authorization': `Bearer ${settings.stripeSecretKey}`,\n        'Content-Type': 'application/x-www-form-urlencoded',\n      },\n      body: new URLSearchParams({\n        amount: Math.round(numericAmount * 100).toString(), // Convert to cents\n        currency: currency.toLowerCase(),\n        'automatic_payment_methods[enabled]': 'true',\n        ...(customerEmail && { receipt_email: customerEmail }),\n        ...(productId && { 'metadata[productId]': productId, 'metadata[customerName]': customerName || '' })\n      })\n    });\n\n    if (!stripeResponse.ok) {\n      const errorData = await stripeResponse.text();\n      console.error('Stripe API error:', {\n        status: stripeResponse.status,\n        statusText: stripeResponse.statusText,\n        errorData,\n        requestData: {\n          amount: Math.round(numericAmount * 100),\n          currency: currency.toLowerCase(),\n          hasSecretKey: !!settings.stripeSecretKey,\n          secretKeyPrefix: settings.stripeSecretKey?.substring(0, 12) + '...'\n        }\n      });\n      \n      // Parse Stripe error for more details\n      let stripeError;\n      try {\n        stripeError = JSON.parse(errorData);\n      } catch {\n        stripeError = { message: errorData };\n      }\n      \n      return new Response(JSON.stringify({\n        success: false,\n        error: 'Failed to create payment intent',\n        details: stripeError.error?.message || stripeError.message || 'Unknown Stripe error',\n        stripeErrorType: stripeError.error?.type,\n        stripeErrorCode: stripeError.error?.code\n      }), {\n        status: 500,\n        headers: {\n          'Content-Type': 'application/json',\n          'Access-Control-Allow-Origin': '*'\n        } as HeadersInit\n      });\n    }\n\n    const paymentIntent = await stripeResponse.json() as {\n      id: string;\n      client_secret: string;\n      amount: number;\n      currency: string;\n      status: string;\n    };\n\n    // Store payment intent in database for tracking\n    try {\n      await env.DB.prepare(`\n        INSERT INTO settings (key, value) \n        VALUES (?, ?)\n      `).bind(\n        `payment_intent_${paymentIntent.id}`,\n        JSON.stringify({\n          id: paymentIntent.id,\n          amount: numericAmount,\n          currency,\n          customerEmail,\n          customerName,\n          productId,\n          status: 'created',\n          createdAt: new Date().toISOString()\n        })\n      ).run();\n    } catch (dbError) {\n      console.warn('Failed to store payment intent in database:', dbError);\n    }\n\n    return new Response(JSON.stringify({\n      success: true,\n      clientSecret: paymentIntent.client_secret,\n      paymentIntentId: paymentIntent.id,\n      publishableKey: settings.stripePublicKey\n    }), {\n      headers: {\n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*'\n      } as HeadersInit\n    });\n\n  } catch (error) {\n    console.error('Payment intent creation error:', error);\n    \n    return new Response(JSON.stringify({\n      success: false,\n      error: 'Internal server error'\n    }), {\n      status: 500,\n      headers: {\n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*'\n      } as HeadersInit\n    });\n  }\n};\n\nexport const onRequestOptions: PagesFunction = async () => {\n  return new Response(null, {\n    headers: {\n      'Access-Control-Allow-Origin': '*',\n      'Access-Control-Allow-Methods': 'POST, OPTIONS',\n      'Access-Control-Allow-Headers': 'Content-Type'\n    } as HeadersInit\n  });\n};\n", "// Cloudflare Pages Function: /api/download-premium\n// Handles premium extension download access validation\n\nimport type { PagesFunction } from '@cloudflare/workers-types';\nimport { Env } from '../lib/context';\n\ninterface DownloadRequest {\n  customerId?: number;\n  customerEmail?: string;\n  activationCode?: string;\n  email?: string;\n}\n\nfunction json(data: any, status = 200) {\n  return new Response(JSON.stringify(data), {\n    status,\n    headers: {\n      'Content-Type': 'application/json',\n      'Access-Control-Allow-Origin': '*',\n    },\n  });\n}\n\nexport const onRequestPost: PagesFunction<Env> = async ({ request, env }) => {\n  try {\n    const body = await request.json() as DownloadRequest;\n    const { customerId, customerEmail, activationCode, email } = body;\n    const finalEmail = customerEmail || email;\n\n    // Customer identification - require at least one method\n    if (!customerId && !finalEmail && !activationCode) {\n      return json({\n        success: false,\n        message: 'Customer identification required'\n      }, 400);\n    }\n\n    // Check if D1 database is available\n    if (!env.DB) {\n      console.error('D1 database not available');\n      return json({ success: false, message: 'Database not available' }, 500);\n    }\n\n    try {\n      let account: any = null;\n      let accountType: 'customer' | 'user' | null = null;\n\n      // Initialize tables if they don't exist\n      // (This part remains the same, so it's omitted for brevity but will be kept in the actual code)\n\n      // Find account by different methods\n      if (customerId) {\n        try {\n          account = await env.DB.prepare(`\n            SELECT id, email, name, is_premium, extension_activated, total_spent \n            FROM customers WHERE id = ?\n          `).bind(customerId).first();\n          if (account) accountType = 'customer';\n        } catch (e) {\n          console.log('Customer query failed, trying fallback');\n        }\n      } else if (finalEmail) {\n        try {\n          account = await env.DB.prepare(`\n            SELECT id, email, name, is_premium, extension_activated, total_spent \n            FROM customers WHERE email = ?\n          `).bind(finalEmail).first();\n          if (account) accountType = 'customer';\n        } catch (e) {\n          console.log('Customer email query failed, trying fallback');\n        }\n      } else if (activationCode) {\n        try {\n          const codeResult = await env.DB.prepare(`\n            SELECT c.id, c.email, c.name, c.is_premium, c.extension_activated, c.total_spent\n            FROM customers c\n            JOIN activation_codes ac ON c.id = ac.customer_id\n            WHERE ac.code = ? AND ac.is_active = 1\n          `).bind(activationCode).first();\n          account = codeResult;\n          if (account) accountType = 'customer';\n        } catch (e) {\n          console.log('Activation code query failed:', e);\n        }\n      }\n\n      // If no customer found, try finding a user by email\n      if (!account && finalEmail) {\n        try {\n          const user = await env.DB.prepare(`\n            SELECT id, email, name, is_premium, extension_activated\n            FROM users WHERE email = ?\n          `).bind(finalEmail).first();\n          \n          if (user) {\n            account = { ...user, total_spent: 0 }; // Add total_spent for consistent structure\n            accountType = 'user';\n          }\n        } catch (e) {\n          console.log('User email query failed:', e);\n        }\n      }\n\n      if (!account) {\n        return json({ \n          success: false, \n          message: 'Account not found or invalid credentials' \n        }, 404);\n      }\n\n      // Check if account has premium access\n      const hasBasicAccess = account.is_premium && account.extension_activated;\n\n      if (!hasBasicAccess) {\n        return json({\n          success: false,\n          message: 'Premium access not activated. Please complete your purchase first.',\n          accountStatus: {\n            isPremium: account.is_premium,\n            extensionActivated: account.extension_activated,\n            totalSpent: account.total_spent\n          }\n        }, 403);\n      }\n\n      // Verify completed orders for the account\n      let hasValidOrders = false;\n      if (account.is_premium) {\n        // For premium users or customers, bypass the strict order check if they are flagged as premium\n        hasValidOrders = true;\n        console.log(`Premium account '${account.email}' granted access based on premium flag.`);\n      } else {\n        // For non-premium customers, perform the full order check\n        try {\n          const orderCheck = await env.DB.prepare(`\n            SELECT COUNT(*) as orderCount FROM orders \n            WHERE (customer_id = ? OR customer_email = ?) AND status = 'completed' AND final_amount > 0\n          `).bind(account.id, account.email).first();\n          \n          hasValidOrders = (orderCheck as any)?.orderCount > 0;\n          console.log(`Order check for ${accountType} '${account.email}':`, { hasValidOrders });\n        } catch (e) {\n          console.log('Order check failed:', e);\n          // Fallback to premium flags if the check fails\n          hasValidOrders = account.is_premium && account.extension_activated;\n        }\n      }\n\n      if (!hasValidOrders) {\n        return json({\n          success: false,\n          message: 'No valid premium purchases found. Premium download requires completed payment.',\n          accountStatus: {\n            isPremium: account.is_premium,\n            extensionActivated: account.extension_activated,\n            totalSpent: account.total_spent,\n            requiresPayment: true\n          }\n        }, 403);\n      }\n\n      // Generate download token and log the download\n      const downloadToken = `download_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n      const now = new Date().toISOString();\n\n      try {\n        await env.DB.prepare(`\n          INSERT INTO extension_downloads (\n            customer_id, download_token, downloaded_at, ip_address, user_agent, created_at\n          ) VALUES (?, ?, ?, ?, ?, ?)\n        `).bind(\n          account.id, // Use account.id, which exists for both users and customers\n          downloadToken, now,\n          request.headers.get('CF-Connecting-IP') || 'unknown',\n          request.headers.get('User-Agent') || 'unknown',\n          now\n        ).run();\n      } catch (e) {\n        console.log('Failed to log download, continuing anyway:', e);\n      }\n\n      // Get or generate activation code\n      let activationCodeResult = `TEMP_${Date.now()}_${account.id}`;\n      if (accountType === 'customer') {\n          try {\n              const result = await env.DB.prepare(`SELECT code FROM activation_codes WHERE customer_id = ? AND is_active = 1 ORDER BY created_at DESC LIMIT 1`).bind(account.id).first();\n              if(result) activationCodeResult = (result as any).code;\n          } catch (e) { console.log('Failed to get activation code:', e); }\n      }\n\n      return json({\n        success: true,\n        message: 'Download access granted',\n        downloadEnabled: true,\n        downloadToken,\n        activationCode: activationCodeResult,\n        account: {\n          id: account.id,\n          email: account.email,\n          name: account.name\n        }\n      });\n\n    } catch (dbError: any) {\n      console.error('Database error during download validation:', dbError);\n      return json({\n        success: false,\n        message: 'Failed to validate download access',\n        error: dbError.message\n      }, 500);\n    }\n\n  } catch (error: any) {\n    console.error('Download validation error:', error);\n    return json({\n      success: false,\n      message: 'Internal server error',\n      error: error.message\n    }, 500);\n  }\n};\n\nexport const onRequestGet: PagesFunction<Env> = async ({ request, env }) => {\n  const url = new URL(request.url);\n  const customerId = url.searchParams.get('customerId');\n  const customerEmail = url.searchParams.get('customerEmail');\n\n  if (!customerId && !customerEmail) {\n    return json({ success: false, message: 'Customer identification required' }, 400);\n  }\n\n  // Check if D1 database is available\n  if (!env.DB) {\n    return json({ success: false, message: 'Database not available' }, 500);\n  }\n\n  try {\n    let customer: any = null;\n\n    if (customerId) {\n      customer = await env.DB.prepare(`\n        SELECT id, email, name, is_premium, extension_activated, total_spent \n        FROM customers WHERE id = ?\n      `).bind(parseInt(customerId)).first();\n    } else if (customerEmail) {\n      customer = await env.DB.prepare(`\n        SELECT id, email, name, is_premium, extension_activated, total_spent \n        FROM customers WHERE email = ?\n      `).bind(customerEmail).first();\n    }\n\n    if (!customer) {\n      return json({ success: false, downloadEnabled: false, message: 'Customer not found' });\n    }\n\n    const hasAccess = customer.is_premium && \n                     customer.extension_activated;\n\n    return json({\n      success: true,\n      downloadEnabled: hasAccess,\n      customer: {\n        id: customer.id,\n        email: customer.email,\n        name: customer.name,\n        totalSpent: customer.total_spent,\n        isPremium: customer.is_premium,\n        extensionActivated: customer.extension_activated\n      }\n    });\n\n  } catch (error: any) {\n    console.error('Download status check error:', error);\n    return json({ success: false, downloadEnabled: false, error: error.message }, 500);\n  }\n};\n\nexport const onRequestOptions: PagesFunction = async () => {\n  return new Response(null, {\n    headers: {\n      'Access-Control-Allow-Origin': '*',\n      'Access-Control-Allow-Methods': 'GET, POST, OPTIONS',\n      'Access-Control-Allow-Headers': 'Content-Type'\n    }\n  });\n};\n", "import type { PagesFunction } from '@cloudflare/workers-types';\nimport { Env } from '../lib/context';\n\nexport const onRequestGet: PagesFunction<Env> = async ({ env }) => {\n  try {\n    if (!env.DB) {\n      return new Response(JSON.stringify({\n        success: false,\n        message: 'Database not available'\n      }), {\n        status: 500,\n        headers: { \n          'Content-Type': 'application/json',\n          'Access-Control-Allow-Origin': '*'\n        }\n      });\n    }\n\n    // Create all tables\n    await env.DB.prepare(`\n      CREATE TABLE IF NOT EXISTS users (\n        id INTEGER PRIMARY KEY AUTOINCREMENT,\n        email TEXT UNIQUE NOT NULL,\n        password TEXT NOT NULL,\n        name TEXT NOT NULL,\n        role TEXT DEFAULT 'customer',\n        created_at DATETIME DEFAULT CURRENT_TIMESTAMP\n      )\n    `).run();\n\n    await env.DB.prepare(`\n      CREATE TABLE IF NOT EXISTS customers (\n        id INTEGER PRIMARY KEY AUTOINCREMENT,\n        email TEXT UNIQUE NOT NULL,\n        name TEXT NOT NULL,\n        created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\n        is_premium BOOLEAN DEFAULT 0,\n        extension_activated BOOLEAN DEFAULT 0,\n        total_spent DECIMAL(10,2) DEFAULT 0,\n        total_orders INTEGER DEFAULT 0\n      )\n    `).run();\n\n    await env.DB.prepare(`\n      CREATE TABLE IF NOT EXISTS invoices (\n        id INTEGER PRIMARY KEY AUTOINCREMENT,\n        invoice_number TEXT UNIQUE NOT NULL,\n        customer_id INTEGER NOT NULL,\n        customer_name TEXT NOT NULL,\n        customer_email TEXT NOT NULL,\n        invoice_date TEXT NOT NULL,\n        due_date TEXT NOT NULL,\n        subtotal TEXT NOT NULL,\n        total_amount TEXT NOT NULL,\n        currency TEXT DEFAULT 'USD',\n        status TEXT DEFAULT 'pending',\n        paid_at DATETIME,\n        notes TEXT,\n        created_at DATETIME DEFAULT CURRENT_TIMESTAMP\n      )\n    `).run();\n\n    await env.DB.prepare(`\n      CREATE TABLE IF NOT EXISTS orders (\n        id INTEGER PRIMARY KEY AUTOINCREMENT,\n        customer_id INTEGER NOT NULL,\n        product_name TEXT NOT NULL,\n        amount DECIMAL(10,2) NOT NULL,\n        status TEXT DEFAULT 'completed',\n        created_at DATETIME DEFAULT CURRENT_TIMESTAMP\n      )\n    `).run();\n\n    // Insert demo data\n    const now = new Date().toISOString();\n    \n    // Demo user\n    await env.DB.prepare(`\n      INSERT OR REPLACE INTO users (id, email, password, name, role, created_at)\n      VALUES (1, 'demo@example.com', 'demo123', 'Demo User', 'customer', ?)\n    `).bind(now).run();\n\n    // Demo customer\n    await env.DB.prepare(`\n      INSERT OR REPLACE INTO customers (id, email, name, created_at, is_premium, extension_activated, total_spent, total_orders)\n      VALUES (1, 'demo@example.com', 'Demo User', ?, 1, 1, 29.99, 1)\n    `).bind(now).run();\n\n    // Demo invoice\n    await env.DB.prepare(`\n      INSERT OR REPLACE INTO invoices (id, invoice_number, customer_id, customer_name, customer_email, invoice_date, due_date, subtotal, total_amount, currency, status, paid_at, notes, created_at)\n      VALUES (1, 'INV-2025-000001', 1, 'Demo User', 'demo@example.com', '2025-08-25', '2025-08-25', '29.99', '29.99', 'USD', 'paid', ?, 'Premium extension purchase', ?)\n    `).bind(now, now).run();\n\n    // Demo order\n    await env.DB.prepare(`\n      INSERT OR REPLACE INTO orders (id, customer_id, product_name, amount, status, created_at)\n      VALUES (1, 1, 'Premium Extension', 29.99, 'completed', ?)\n    `).bind(now).run();\n\n    // Verify data\n    const userCount = await env.DB.prepare('SELECT COUNT(*) as count FROM users').first();\n    const customerCount = await env.DB.prepare('SELECT COUNT(*) as count FROM customers').first();\n    const invoiceCount = await env.DB.prepare('SELECT COUNT(*) as count FROM invoices').first();\n    const orderCount = await env.DB.prepare('SELECT COUNT(*) as count FROM orders').first();\n\n    return new Response(JSON.stringify({\n      success: true,\n      message: 'Database initialized successfully',\n      tables: {\n        users: userCount?.count || 0,\n        customers: customerCount?.count || 0,\n        invoices: invoiceCount?.count || 0,\n        orders: orderCount?.count || 0\n      }\n    }), {\n      headers: { \n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*'\n      }\n    });\n\n  } catch (error: any) {\n    console.error('Database initialization error:', error);\n    return new Response(JSON.stringify({\n      success: false,\n      message: 'Database initialization failed: ' + error.message\n    }), {\n      status: 500,\n      headers: { \n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*'\n      }\n    });\n  }\n};\n\nexport const onRequestOptions = async () => {\n  return new Response(null, {\n    status: 200,\n    headers: {\n      'Access-Control-Allow-Origin': '*',\n      'Access-Control-Allow-Methods': 'GET, OPTIONS',\n      'Access-Control-Allow-Headers': 'Content-Type, Authorization'\n    }\n  });\n};\n", "// In-memory invoice settings (demo)\nfunction getSettingsStore() {\n  const g: any = globalThis as any;\n  if (!g.__INVOICE_SETTINGS__) {\n    g.__INVOICE_SETTINGS__ = {\n      id: 1,\n      companyName: 'OCUS Job Hunter',\n      companyAddress: '',\n      companyPhone: '',\n      companyEmail: '',\n      companyWebsite: '',\n      taxNumber: '',\n      invoicePrefix: 'INV',\n      receiptPrefix: 'REC',\n      invoiceNotes: '',\n      termsAndConditions: '',\n      footerText: 'Thank you for your business!'\n        ,\n      primaryColor: '#007bff',\n      secondaryColor: '#6c757d',\n      updatedAt: new Date().toISOString(),\n    };\n  }\n  return g.__INVOICE_SETTINGS__ as any;\n}\n\nfunction json(data: any, status = 200) {\n  return new Response(JSON.stringify(data), {\n    status,\n    headers: {\n      'Content-Type': 'application/json',\n      'Access-Control-Allow-Origin': '*',\n    },\n  });\n}\n\nexport const onRequestGet = async () => {\n  const settings = getSettingsStore();\n  // Return only fields used by UI\n  const ui = {\n    id: settings.id,\n    companyName: settings.companyName,\n    companyAddress: settings.companyAddress,\n    companyPhone: settings.companyPhone,\n    companyEmail: settings.companyEmail,\n    companyWebsite: settings.companyWebsite,\n    taxNumber: settings.taxNumber,\n    invoicePrefix: settings.invoicePrefix,\n    receiptPrefix: settings.receiptPrefix,\n    invoiceNotes: settings.invoiceNotes,\n    termsAndConditions: settings.termsAndConditions,\n    footerText: settings.footerText,\n    primaryColor: settings.primaryColor,\n    secondaryColor: settings.secondaryColor,\n  };\n  return json(ui);\n};\n\nexport const onRequestPut = async ({ request }: any) => {\n  try {\n    const body = await request.json().catch(() => ({}));\n    const store = getSettingsStore();\n\n    const allowedKeys = [\n      'companyName',\n      'companyAddress',\n      'companyPhone',\n      'companyEmail',\n      'companyWebsite',\n      'taxNumber',\n      'invoicePrefix',\n      'receiptPrefix',\n      'invoiceNotes',\n      'termsAndConditions',\n      'footerText',\n      'primaryColor',\n      'secondaryColor',\n    ];\n\n    for (const k of allowedKeys) {\n      if (k in body) store[k] = body[k];\n    }\n    store.updatedAt = new Date().toISOString();\n\n    return json({ ...store });\n  } catch (e) {\n    return json({ success: false, message: 'Failed to update settings' }, 500);\n  }\n};\n\nexport const onRequestOptions = async () => {\n  return new Response(null, {\n    headers: {\n      'Access-Control-Allow-Origin': '*',\n      'Access-Control-Allow-Methods': 'GET, PUT, OPTIONS',\n      'Access-Control-Allow-Headers': 'Content-Type',\n    },\n  });\n};\n", "// Cloudflare Pages Function: /api/invoices\n// Handles invoice retrieval\n\nimport type { PagesFunction } from '@cloudflare/workers-types';\nimport { Env } from '../lib/context';\n\nfunction json(data: any, status = 200) {\n  return new Response(JSON.stringify(data), {\n    status,\n    headers: {\n      'Content-Type': 'application/json',\n      'Access-Control-Allow-Origin': '*',\n      'Access-Control-Allow-Methods': 'GET, OPTIONS',\n      'Access-Control-Allow-Headers': 'Content-Type, Authorization'\n    },\n  });\n}\n\nexport const onRequestGet: PagesFunction<Env> = async ({ request, env }) => {\n  try {\n    // Check authorization header for token\n    const authHeader = request.headers.get('Authorization');\n    \n    if (!authHeader || !authHeader.startsWith('Bearer ')) {\n      return json([]);\n    }\n\n    const token = authHeader.substring(7);\n    \n    // Handle demo-jwt-token\n    if (token === 'demo-jwt-token') {\n      const demoInvoice = {\n        id: 1,\n        invoiceNumber: 'INV-2025-000001',\n        customerId: 1,\n        customerName: 'Demo User',\n        customerEmail: 'demo@example.com',\n        invoiceDate: new Date().toISOString().split('T')[0],\n        dueDate: new Date().toISOString().split('T')[0],\n        subtotal: '29.99',\n        totalAmount: '29.99',\n        currency: 'USD',\n        status: 'paid',\n        paidAt: new Date().toISOString(),\n        notes: 'Premium extension purchase'\n      };\n      \n      return json([demoInvoice]);\n    }\n    \n    // Handle jwt-token-{userId}-{timestamp} format\n    if (token.startsWith('jwt-token-')) {\n      const parts = token.split('-');\n      if (parts.length >= 3) {\n        const userId = parts[2];\n        // For user ID 1, return demo invoice\n        if (userId === '1') {\n          const demoInvoice = {\n            id: 1,\n            invoiceNumber: 'INV-2025-000001',\n            customerId: 1,\n            customerName: 'Demo User',\n            customerEmail: 'demo@example.com',\n            invoiceDate: new Date().toISOString().split('T')[0],\n            dueDate: new Date().toISOString().split('T')[0],\n            subtotal: '29.99',\n            totalAmount: '29.99',\n            currency: 'USD',\n            status: 'paid',\n            paidAt: new Date().toISOString(),\n            notes: 'Premium extension purchase'\n          };\n          \n          return json([demoInvoice]);\n        }\n      }\n    }\n    \n    // For any other case, return empty array\n    return json([]);\n    \n  } catch (error: any) {\n    return json({ \n      error: error.message \n    }, 500);\n  }\n};\n", "// Cloudflare Pages Function: /api/me\n// Handles user profile retrieval\n\nimport type { PagesFunction } from '@cloudflare/workers-types';\nimport { Env } from '../lib/context';\n\nfunction json(data: any, status = 200) {\n  return new Response(JSON.stringify(data), {\n    status,\n    headers: {\n      'Content-Type': 'application/json',\n      'Access-Control-Allow-Origin': '*',\n      'Access-Control-Allow-Methods': 'GET, OPTIONS',\n      'Access-Control-Allow-Headers': 'Content-Type, Authorization'\n    },\n  });\n}\n\nexport const onRequestGet: PagesFunction<Env> = async ({ request, env }) => {\n  try {\n    // Check authorization header for token\n    const authHeader = request.headers.get('Authorization');\n    \n    if (!authHeader || !authHeader.startsWith('Bearer ')) {\n      return json({ \n        error: 'Unauthorized' \n      }, 401);\n    }\n\n    const token = authHeader.substring(7);\n    \n    // Handle demo-jwt-token\n    if (token === 'demo-jwt-token') {\n      return json({\n        id: 1,\n        email: 'demo@example.com',\n        name: 'Demo User',\n        role: 'customer',\n        createdAt: new Date().toISOString(),\n        isPremium: true,\n        extensionActivated: true,\n        totalSpent: 29.99,\n        totalOrders: 1,\n        isAuthenticated: true\n      });\n    }\n    \n    // Handle jwt-token-{userId}-{timestamp} format\n    if (token.startsWith('jwt-token-')) {\n      const parts = token.split('-');\n      if (parts.length >= 3) {\n        const userId = parts[2];\n        console.log('Parsed userId from token:', userId, 'from token:', token);\n        \n        // Check database for real user data\n        if (!env.DB) {\n          return json({ error: 'Database not available' }, 500);\n        }\n\n        try {\n          // First try users table (for registered users)\n          const user = await env.DB.prepare(`\n            SELECT id, email, name, role, created_at, is_premium, extension_activated\n            FROM users WHERE id = ?\n          `).bind(parseInt(userId)).first();\n\n          if (user) {\n            return json({\n              id: user.id,\n              email: user.email,\n              name: user.name,\n              role: user.role || 'customer',\n              createdAt: user.created_at,\n              isPremium: user.is_premium || false,\n              extensionActivated: user.extension_activated || false,\n              isAuthenticated: true\n            });\n          }\n\n          // Fallback to customers table (for legacy users)\n          const customer = await env.DB.prepare(`\n            SELECT id, email, name, is_premium, extension_activated, created_at\n            FROM customers WHERE id = ?\n          `).bind(parseInt(userId)).first();\n\n          if (customer) {\n            return json({\n              id: customer.id,\n              email: customer.email,\n              name: customer.name,\n              role: 'customer',\n              createdAt: customer.created_at,\n              isPremium: customer.is_premium || false,\n              extensionActivated: customer.extension_activated || false,\n              isAuthenticated: true\n            });\n          }\n        } catch (dbError) {\n          console.error('Database error in /api/me:', dbError);\n        }\n      }\n    }\n    \n    // For any other token, return unauthorized\n    return json({ \n      error: 'Invalid token' \n    }, 401);\n    \n  } catch (error: any) {\n    return json({ \n      error: error.message \n    }, 500);\n  }\n};\n", "import type { PagesFunction } from '@cloudflare/workers-types';\nimport { Env } from '../lib/db';\n\n// Helper to return a JSON response\nfunction json(data: any, status = 200) {\n  return new Response(JSON.stringify(data), {\n    status,\n    headers: {\n      'Content-Type': 'application/json',\n      'Access-Control-Allow-Origin': '*',\n    },\n  });\n}\n\n// This function will add the customer_id column to the tickets table.\n// It's designed to be run once.\nexport const onRequestGet: PagesFunction<Env> = async ({ env }) => {\n  if (!env.DB) {\n    return json({ success: false, message: 'Database not available' }, 500);\n  }\n\n  try {\n    // Add customer_id to tickets table\n    const alterStmt = `ALTER TABLE tickets ADD COLUMN customer_id INTEGER;`;\n    await env.DB.prepare(alterStmt).run();\n\n    // Backfill customer_id for existing tickets from the customers table\n    const backfillStmt = `\n      UPDATE tickets\n      SET customer_id = (SELECT id FROM customers WHERE email = tickets.customer_email)\n      WHERE customer_id IS NULL;\n    `;\n    const backfillResult = await env.DB.prepare(backfillStmt).run();\n\n    return json({\n      success: true,\n      message: 'Database migration successful: customer_id added and backfilled.',\n      backfillDetails: backfillResult.meta,\n    });\n  } catch (e: any) {\n    // If the column already exists, the error is expected. We can ignore it.\n    if (e.message.includes('duplicate column name')) {\n      return json({\n        success: true,\n        message: 'Migration not needed: customer_id column already exists.',\n      });\n    }\n    console.error('Migration failed:', e);\n    return json({ success: false, message: e.message }, 500);\n  }\n};\n\n// OPTIONS handler for CORS preflight requests\nexport const onRequestOptions = async () => {\n  return new Response(null, {\n    headers: {\n      'Access-Control-Allow-Origin': '*',\n      'Access-Control-Allow-Methods': 'GET, POST, OPTIONS',\n      'Access-Control-Allow-Headers': 'Content-Type, Authorization',\n    },\n  });\n};\n", "// Cloudflare Pages Function: /api/purchase-complete\n// Handles post-purchase processing: activate customer, generate invoice, update download access\n\nimport type { PagesFunction } from '@cloudflare/workers-types';\nimport { Env } from '../lib/context';\n\ninterface PurchaseCompleteRequest {\n  paymentIntentId: string;\n  customerEmail: string;\n  customerName?: string;\n  customerId?: number;\n  amount: number;\n  currency?: string;\n  productType?: string;\n}\n\nfunction json(data: any, status = 200) {\n  return new Response(JSON.stringify(data), {\n    status,\n    headers: {\n      'Content-Type': 'application/json',\n      'Access-Control-Allow-Origin': '*',\n    },\n  });\n}\n\nexport const onRequestPost: PagesFunction<Env> = async ({ request, env }) => {\n  try {\n    const body = await request.json() as PurchaseCompleteRequest;\n    const { \n      paymentIntentId, \n      customerEmail, \n      customerName, \n      customerId, \n      amount, \n      currency = 'USD',\n      productType = 'premium_extension'\n    } = body;\n\n    if (!paymentIntentId || !customerEmail || !amount) {\n      return json({ success: false, message: 'Missing required fields' }, 400);\n    }\n\n    // Check if D1 database is available\n    if (!env.DB) {\n      console.error('D1 database not available');\n      return json({ success: false, message: 'Database not available' }, 500);\n    }\n\n    const now = new Date().toISOString();\n\n    try {\n      // 1. Update or create customer record with premium access\n      let finalCustomerId = customerId;\n      \n      // First update users table (for registered users)\n      if (customerEmail) {\n        const userUpdateResult = await env.DB.prepare(`\n          UPDATE users \n          SET is_premium = 1,\n              extension_activated = 1,\n              premium_activated_at = ?\n          WHERE email = ?\n        `).bind(now, customerEmail).run();\n        \n        console.log('User table update result for', customerEmail, ':', userUpdateResult);\n        \n        // If no user was updated, we need to ensure we have a customer ID for orders/invoices\n        if (userUpdateResult.meta?.changes === 0) {\n          console.log('No user found with email', customerEmail, 'in users table');\n        }\n      }\n      \n      if (customerId) {\n        // Update existing customer\n        await env.DB.prepare(`\n          UPDATE customers \n          SET is_premium = 1,\n              extension_activated = 1,\n              updated_at = ?\n          WHERE id = ?\n        `).bind(now, customerId).run();\n      } else {\n        // Find customer by email or create new one\n        const existingCustomer = await env.DB.prepare(`\n          SELECT id FROM customers WHERE email = ?\n        `).bind(customerEmail).first();\n\n        if (existingCustomer) {\n          finalCustomerId = (existingCustomer as any).id;\n          await env.DB.prepare(`\n            UPDATE customers \n            SET is_premium = 1,\n                extension_activated = 1,\n                updated_at = ?\n            WHERE id = ?\n          `).bind(now, finalCustomerId).run();\n        } else {\n          // Create new customer\n          const result = await env.DB.prepare(`\n            INSERT INTO customers (\n              email, name, is_premium, extension_activated, \n              created_at, updated_at\n            ) VALUES (?, ?, 1, 1, ?, ?)\n          `).bind(\n            customerEmail, \n            customerName || customerEmail, \n            now, \n            now\n          ).run();\n          \n          finalCustomerId = result.meta?.last_row_id as number;\n        }\n      }\n\n      // 2. Ensure we have a customer ID for orders/invoices\n      if (!finalCustomerId) {\n        // Find or create customer record for users who don't have a customer ID\n        const existingCustomer = await env.DB.prepare(`\n          SELECT id FROM customers WHERE email = ?\n        `).bind(customerEmail).first();\n\n        if (existingCustomer) {\n          finalCustomerId = (existingCustomer as any).id;\n          await env.DB.prepare(`\n            UPDATE customers \n            SET is_premium = 1,\n                extension_activated = 1,\n                updated_at = ?\n            WHERE id = ?\n          `).bind(now, finalCustomerId).run();\n        } else {\n          // Create new customer record\n          const result = await env.DB.prepare(`\n            INSERT INTO customers (\n              email, name, is_premium, extension_activated, \n              created_at, updated_at\n            ) VALUES (?, ?, 1, 1, ?, ?)\n          `).bind(\n            customerEmail, \n            customerName || customerEmail, \n            now, \n            now\n          ).run();\n          \n          finalCustomerId = result.meta?.last_row_id as number;\n        }\n      }\n\n      console.log('Final customer ID for orders/invoices:', finalCustomerId);\n\n      // 3. Create order record\n      const downloadToken = `download_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n      const orderResult = await env.DB.prepare(`\n        INSERT INTO orders (\n          customer_id, customer_email, customer_name, \n          original_amount, final_amount, currency, status, payment_method,\n          payment_intent_id, download_token, created_at, completed_at\n        ) VALUES (?, ?, ?, ?, ?, ?, 'completed', 'stripe', ?, ?, ?, ?)\n      `).bind(\n        finalCustomerId,\n        customerEmail,\n        customerName || customerEmail,\n        amount,\n        amount,\n        currency.toLowerCase(),\n        paymentIntentId,\n        downloadToken,\n        now,\n        now\n      ).run();\n\n      const orderId = orderResult.meta?.last_row_id as number;\n\n      // 4. Generate activation code for the extension\n      const activationCode = `OCUS_${Date.now()}_${Math.random().toString(36).substr(2, 9).toUpperCase()}`;\n      \n      await env.DB.prepare(`\n        INSERT INTO activation_codes (\n          code, order_id, created_at\n        ) VALUES (?, ?, ?)\n      `).bind(activationCode, orderId, now).run();\n\n      // Skip invoice creation for now due to schema conflicts\n      // Invoice will be generated via separate endpoint if needed\n      console.log('Skipping invoice creation due to schema conflicts');\n\n      // 5. Log the purchase completion\n      console.log('Purchase completed successfully:', {\n        customerId: finalCustomerId,\n        orderId,\n        paymentIntentId,\n        amount,\n        activationCode\n      });\n\n      return json({\n        success: true,\n        message: 'Purchase completed successfully',\n        data: {\n          customerId: finalCustomerId,\n          orderId,\n          activationCode,\n          downloadEnabled: true\n        }\n      });\n\n    } catch (dbError: any) {\n      console.error('Database error during purchase completion:', dbError);\n      return json({\n        success: false,\n        message: 'Failed to process purchase completion',\n        error: dbError.message\n      }, 500);\n    }\n\n  } catch (error: any) {\n    console.error('Purchase completion error:', error);\n    return json({\n      success: false,\n      message: 'Internal server error',\n      error: error.message\n    }, 500);\n  }\n};\n\nexport const onRequestOptions: PagesFunction = async () => {\n  return new Response(null, {\n    headers: {\n      'Access-Control-Allow-Origin': '*',\n      'Access-Control-Allow-Methods': 'POST, OPTIONS',\n      'Access-Control-Allow-Headers': 'Content-Type'\n    }\n  });\n};\n", "import { SettingsStorage } from '../lib/settings-storage';\n\nexport const onRequestPost = async ({ request, env }: any) => {\n  try {\n    console.log('=== TEST UPLOAD ENDPOINT ===');\n    \n    if (!env.DB) {\n      return new Response(JSON.stringify({\n        success: false,\n        message: 'Database not available'\n      }), {\n        status: 500,\n        headers: { \n          'Content-Type': 'application/json',\n          'Access-Control-Allow-Origin': '*'\n        }\n      });\n    }\n\n    const formData = await request.formData();\n    console.log('Test upload - FormData keys:', Array.from(formData.keys()));\n    \n    const testFile = formData.get('testImage') as File;\n    console.log('Test file received:', testFile ? `${testFile.name} (${testFile.size} bytes, ${testFile.type})` : 'null');\n    \n    if (testFile && testFile.size > 0) {\n      console.log('Converting test file to base64...');\n      const arrayBuffer = await testFile.arrayBuffer();\n      const base64 = btoa(String.fromCharCode(...new Uint8Array(arrayBuffer)));\n      const dataUrl = `data:${testFile.type};base64,${base64}`;\n      console.log('Test file converted, data URL length:', dataUrl.length);\n      \n      const settingsStorage = new SettingsStorage(env.DB);\n      await settingsStorage.initializeSettings();\n      \n      console.log('Saving test image to database...');\n      await settingsStorage.setSetting('test_image', dataUrl);\n      console.log('Test image saved successfully');\n      \n      // Verify it was saved\n      console.log('Verifying saved data...');\n      const savedData = await settingsStorage.getSetting('test_image');\n      console.log('Retrieved data length:', savedData ? savedData.length : 'null');\n      \n      return new Response(JSON.stringify({\n        success: true,\n        message: 'Test upload successful',\n        originalSize: testFile.size,\n        dataUrlLength: dataUrl.length,\n        savedDataLength: savedData ? savedData.length : 0,\n        verified: savedData === dataUrl\n      }), {\n        headers: { \n          'Content-Type': 'application/json',\n          'Access-Control-Allow-Origin': '*'\n        }\n      });\n    } else {\n      return new Response(JSON.stringify({\n        success: false,\n        message: 'No file received or file is empty'\n      }), {\n        status: 400,\n        headers: { \n          'Content-Type': 'application/json',\n          'Access-Control-Allow-Origin': '*'\n        }\n      });\n    }\n    \n  } catch (error) {\n    console.error('Test upload error:', error);\n    const message = error instanceof Error ? error.message : String(error);\n    return new Response(JSON.stringify({\n      success: false,\n      message: `Test upload failed: ${message}`\n    }), {\n      status: 500,\n      headers: { \n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*'\n      }\n    });\n  }\n};\n\nexport const onRequestOptions = async () => {\n  return new Response(null, {\n    status: 200,\n    headers: {\n      'Access-Control-Allow-Origin': '*',\n      'Access-Control-Allow-Methods': 'POST, OPTIONS',\n      'Access-Control-Allow-Headers': 'Content-Type, Authorization',\n    },\n  });\n};\n", "function json(data: any, status = 200) {\n  return new Response(JSON.stringify(data), {\n    status,\n    headers: {\n      'Content-Type': 'application/json',\n      'Access-Control-Allow-Origin': '*' \n    }\n  });\n}\n\n// Simple test endpoint to check user data\nexport const onRequestPost = async ({ request, env }: any) => {\n  try {\n    const body = await request.json() as { email?: string };\n    const email = body.email || 'heshmat@gmail.com';\n\n    if (!env.DB) {\n      return json({ success: false, message: 'Database not available' }, 500);\n    }\n\n    // Check users table\n    const user = await env.DB.prepare(`\n      SELECT id, email, name, is_premium, extension_activated, premium_activated_at, created_at\n      FROM users WHERE email = ?\n    `).bind(email).first();\n\n    // Check customers table\n    const customer = await env.DB.prepare(`\n      SELECT id, email, name, is_premium, extension_activated, created_at\n      FROM customers WHERE email = ?\n    `).bind(email).first();\n\n    // Check orders for both user_id and customer_id\n    const ordersUserQuery = await env.DB.prepare(`\n      SELECT id, customer_id, customer_email, original_amount, final_amount, status, created_at, completed_at\n      FROM orders WHERE customer_email = ?\n    `).bind(email).all();\n\n    const ordersCustomerQuery = customer ? await env.DB.prepare(`\n      SELECT id, customer_id, customer_email, original_amount, final_amount, status, created_at, completed_at\n      FROM orders WHERE customer_id = ?\n    `).bind(customer.id).all() : { results: [] };\n\n    return json({\n      success: true,\n      email,\n      user,\n      customer,\n      ordersFromEmail: ordersUserQuery.results,\n      ordersFromCustomerId: ordersCustomerQuery.results,\n      summary: {\n        userExists: !!user,\n        customerExists: !!customer,\n        userPremium: user?.is_premium === 1,\n        customerPremium: customer?.is_premium === 1,\n        userExtensionActivated: user?.extension_activated === 1,\n        customerExtensionActivated: customer?.extension_activated === 1,\n        totalOrdersFromEmail: ordersUserQuery.results?.length || 0,\n        totalOrdersFromCustomerId: ordersCustomerQuery.results?.length || 0\n      }\n    });\n\n  } catch (error: any) {\n    console.error('Error checking user data:', error);\n    return json({ \n      success: false, \n      message: error.message \n    }, 500);\n  }\n};\n", "// Cloudflare Pages Function: /api/tickets\n// Uses D1 database for persistent ticket storage\n\nimport { TicketStorage, Env } from '../../lib/db';\n\ninterface TicketPayload {\n  title?: string;\n  description?: string;\n  category?: string;\n  priority?: string;\n  customerEmail?: string;\n  customerName?: string;\n  customerId?: string;\n}\nimport { UserStorage } from '../../lib/user-storage';\nimport type { D1Database } from '@cloudflare/workers-types';\n\nfunction json(data: any, status = 200) {\n  return new Response(JSON.stringify(data), {\n    status,\n    headers: {\n      'Content-Type': 'application/json',\n      'Access-Control-Allow-Origin': '*',\n    },\n  });\n}\n\nexport const onRequestOptions = async () => {\n  return new Response(null, {\n    headers: {\n      'Access-Control-Allow-Origin': '*',\n      'Access-Control-Allow-Methods': 'GET, POST, PATCH, DELETE, OPTIONS',\n      'Access-Control-Allow-Headers': 'Content-Type',\n    },\n  });\n};\n\nexport const onRequestGet = async ({ request, env }: { request: Request; env: Env }) => {\n  const expressBase: string | undefined = env?.EXPRESS_API_BASE;\n  if (expressBase) {\n    const base = expressBase.replace(/\\/$/, \"\");\n    const urlObj = new URL(request.url);\n    const qs = urlObj.search ? urlObj.search : '';\n    const url = `${base}/api/tickets${qs}`;\n    const headers: Record<string, string> = {};\n    const cookie = request.headers.get('cookie');\n    const auth = request.headers.get('authorization');\n    if (cookie) headers['cookie'] = cookie;\n    if (auth) headers['authorization'] = auth;\n    const proxied = await fetch(url, { headers, redirect: 'manual' });\n    const respHeaders = new Headers(proxied.headers);\n    const setCookie = respHeaders.get('set-cookie');\n    if (setCookie) {\n      const rewritten = setCookie.replace(/;\\s*Domain=[^;]+/i, '');\n      respHeaders.delete('set-cookie');\n      respHeaders.append('set-cookie', rewritten);\n    }\n    return new Response(proxied.body, { status: proxied.status, headers: respHeaders });\n  }\n\n  const url = new URL(request.url);\n  const isAdmin = url.searchParams.get('isAdmin') === 'true';\n  const customerEmail = url.searchParams.get('customerEmail');\n  const customerId = url.searchParams.get('customerId');\n\n  // Check if D1 database is available\n  if (!env.DB) {\n    console.error('D1 database not available');\n    return json({ error: 'Database not available' }, 500);\n  }\n\n  try {\n    const storage = new TicketStorage(env.DB);\n    let result: any[] = [];\n    \n    if (isAdmin) {\n      // Admin sees all tickets\n      result = await storage.getAllTickets();\n    } else if (customerId) {\n      // Customer sees only their tickets by customer ID\n      result = await storage.getTicketsByCustomerId(parseInt(customerId));\n    } else if (customerEmail) {\n      // Fallback to email-based filtering\n      result = await storage.getTicketsByCustomerEmail(customerEmail);\n    } else {\n      // No identification provided - return empty array for security\n      result = [];\n    }\n    \n    return json(result);\n  } catch (error: any) {\n    console.error('Database error:', error);\n    return json({ error: 'Database query failed', details: error.message }, 500);\n  }\n};\n\nexport const onRequestPost = async ({ request, env }: { request: Request; env: Env }) => {\n  try {\n    const expressBase: string | undefined = env?.EXPRESS_API_BASE;\n    if (expressBase) {\n      const base = expressBase.replace(/\\/$/, \"\");\n      const url = `${base}/api/tickets`;\n      const headers: Record<string, string> = {};\n      const cookie = request.headers.get('cookie');\n      const ct = request.headers.get('content-type');\n      const auth = request.headers.get('authorization');\n      if (cookie) headers['cookie'] = cookie;\n      if (ct) headers['content-type'] = ct;\n      if (auth) headers['authorization'] = auth;\n      const proxied = await fetch(url, { method: 'POST', headers, body: request.body, redirect: 'manual' });\n      const respHeaders = new Headers(proxied.headers);\n      const setCookie = respHeaders.get('set-cookie');\n      if (setCookie) {\n        const rewritten = setCookie.replace(/;\\s*Domain=[^;]+/i, '');\n        respHeaders.delete('set-cookie');\n        respHeaders.append('set-cookie', rewritten);\n      }\n      return new Response(proxied.body, { status: proxied.status, headers: respHeaders });\n    }\n    const body = await request.json() as TicketPayload;\n    const { title, description, category, priority, customerEmail, customerName, customerId } = body;\n    const parsedCustomerId = customerId ? parseInt(customerId) : undefined;\n    if (!title || !description || !customerEmail || !parsedCustomerId) {\n      return json({ success: false, message: 'Missing required fields' }, 400);\n    }\n\n    // Check if D1 database is available\n    if (!env.DB) {\n      console.error('D1 database not available for ticket creation');\n      return json({ success: false, message: 'Database not available' }, 500);\n    }\n\n    const storage = new TicketStorage(env.DB);\n    let finalCustomerName = customerName;\n    \n    // If we have customerId but no customerName, fetch from user storage\n    if (parsedCustomerId && !customerName) {\n      try {\n        const userStorage = new UserStorage(env.DB as D1Database);\n        await userStorage.initializeUsers();\n        const user = await userStorage.getUserById(parsedCustomerId);\n        if (user) {\n          finalCustomerName = user.name;\n        }\n      } catch (error) {\n        console.error('Failed to fetch user name:', error);\n      }\n    }\n\n    const ticket = await storage.createTicket({\n      customer_id: parsedCustomerId,\n      title,\n      description,\n      category: category || 'general',\n      priority: priority || 'medium',\n      status: 'open',\n      customer_email: customerEmail,\n      customer_name: finalCustomerName || customerEmail,\n    });\n\n    return json({ success: true, ticket });\n  } catch (e) {\n    console.error('Failed to create ticket:', e);\n    const message = e instanceof Error ? e.message : 'An unknown error occurred';\n    return json({ success: false, message }, 500);\n  }\n};\n", "export const onRequestGet = async () => {\n  return new Response(JSON.stringify({\n    status: 'ok',\n    timestamp: Date.now(),\n    message: 'OCUS Job Hunter API is running'\n  }), {\n    headers: { \n      'Content-Type': 'application/json',\n      'Access-Control-Allow-Origin': '*'\n    }\n  });\n};\n", "import { onRequestOptions as __api_admin_announcement_badges_translate_ts_onRequestOptions } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/admin/announcement-badges/translate.ts\"\nimport { onRequestPost as __api_admin_announcement_badges_translate_ts_onRequestPost } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/admin/announcement-badges/translate.ts\"\nimport { onRequestDelete as __api_admin_announcement_badges__id__ts_onRequestDelete } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/admin/announcement-badges/[id].ts\"\nimport { onRequestGet as __api_admin_announcement_badges__id__ts_onRequestGet } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/admin/announcement-badges/[id].ts\"\nimport { onRequestOptions as __api_admin_announcement_badges__id__ts_onRequestOptions } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/admin/announcement-badges/[id].ts\"\nimport { onRequestPut as __api_admin_announcement_badges__id__ts_onRequestPut } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/admin/announcement-badges/[id].ts\"\nimport { onRequestDelete as __api_admin_countdown_banners__id__ts_onRequestDelete } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/admin/countdown-banners/[id].ts\"\nimport { onRequestGet as __api_admin_countdown_banners__id__ts_onRequestGet } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/admin/countdown-banners/[id].ts\"\nimport { onRequestOptions as __api_admin_countdown_banners__id__ts_onRequestOptions } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/admin/countdown-banners/[id].ts\"\nimport { onRequestPut as __api_admin_countdown_banners__id__ts_onRequestPut } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/admin/countdown-banners/[id].ts\"\nimport { onRequestOptions as __api_admin_dashboard_features__feature__ts_onRequestOptions } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/admin/dashboard-features/[feature].ts\"\nimport { onRequestPut as __api_admin_dashboard_features__feature__ts_onRequestPut } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/admin/dashboard-features/[feature].ts\"\nimport { onRequestPut as __api_admin_orders__orderId__ts_onRequestPut } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/admin/orders/[orderId].ts\"\nimport { onRequestGet as __api_extension_check__id__ts_onRequestGet } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/extension/check/[id].ts\"\nimport { onRequestGet as __api_extension_downloads__id__ts_onRequestGet } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/extension/downloads/[id].ts\"\nimport { onRequestGet as __api_invoices__id__pdf_ts_onRequestGet } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/invoices/[id]/pdf.ts\"\nimport { onRequestOptions as __api_invoices__id__pdf_ts_onRequestOptions } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/invoices/[id]/pdf.ts\"\nimport { onRequestPost as __api_tickets__id__archive_ts_onRequestPost } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/tickets/[id]/archive.ts\"\nimport { onRequestGet as __api_tickets__id__messages_ts_onRequestGet } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/tickets/[id]/messages.ts\"\nimport { onRequestOptions as __api_tickets__id__messages_ts_onRequestOptions } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/tickets/[id]/messages.ts\"\nimport { onRequestPost as __api_tickets__id__messages_ts_onRequestPost } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/tickets/[id]/messages.ts\"\nimport { onRequestOptions as __api_tickets__id__status_ts_onRequestOptions } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/tickets/[id]/status.ts\"\nimport { onRequestPut as __api_tickets__id__status_ts_onRequestPut } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/tickets/[id]/status.ts\"\nimport { onRequestGet as __api_user__id__purchase_status_ts_onRequestGet } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/user/[id]/purchase-status.ts\"\nimport { onRequestGet as __api_user__userId__invoices_ts_onRequestGet } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/user/[userId]/invoices.ts\"\nimport { onRequestOptions as __api_user__userId__invoices_ts_onRequestOptions } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/user/[userId]/invoices.ts\"\nimport { onRequestGet as __api_user__userId__orders_ts_onRequestGet } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/user/[userId]/orders.ts\"\nimport { onRequestOptions as __api_user__userId__orders_ts_onRequestOptions } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/user/[userId]/orders.ts\"\nimport { onRequestGet as __api_user__userId__purchase_status_ts_onRequestGet } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/user/[userId]/purchase-status.ts\"\nimport { onRequestOptions as __api_user__userId__purchase_status_ts_onRequestOptions } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/user/[userId]/purchase-status.ts\"\nimport { onRequestGet as __api_admin_analytics_ts_onRequestGet } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/admin/analytics.ts\"\nimport { onRequestOptions as __api_admin_analytics_ts_onRequestOptions } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/admin/analytics.ts\"\nimport { onRequestDelete as __api_admin_announcement_badges_ts_onRequestDelete } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/admin/announcement-badges.ts\"\nimport { onRequestGet as __api_admin_announcement_badges_ts_onRequestGet } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/admin/announcement-badges.ts\"\nimport { onRequestOptions as __api_admin_announcement_badges_ts_onRequestOptions } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/admin/announcement-badges.ts\"\nimport { onRequestPost as __api_admin_announcement_badges_ts_onRequestPost } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/admin/announcement-badges.ts\"\nimport { onRequestPut as __api_admin_announcement_badges_ts_onRequestPut } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/admin/announcement-badges.ts\"\nimport { onRequestGet as __api_admin_auth_settings_ts_onRequestGet } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/admin/auth-settings.ts\"\nimport { onRequestOptions as __api_admin_auth_settings_ts_onRequestOptions } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/admin/auth-settings.ts\"\nimport { onRequestPut as __api_admin_auth_settings_ts_onRequestPut } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/admin/auth-settings.ts\"\nimport { onRequestGet as __api_admin_chat_settings_ts_onRequestGet } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/admin/chat-settings.ts\"\nimport { onRequestOptions as __api_admin_chat_settings_ts_onRequestOptions } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/admin/chat-settings.ts\"\nimport { onRequestPut as __api_admin_chat_settings_ts_onRequestPut } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/admin/chat-settings.ts\"\nimport { onRequestGet as __api_admin_check_user_data_ts_onRequestGet } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/admin/check-user-data.ts\"\nimport { onRequestDelete as __api_admin_countdown_banners_ts_onRequestDelete } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/admin/countdown-banners.ts\"\nimport { onRequestGet as __api_admin_countdown_banners_ts_onRequestGet } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/admin/countdown-banners.ts\"\nimport { onRequestOptions as __api_admin_countdown_banners_ts_onRequestOptions } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/admin/countdown-banners.ts\"\nimport { onRequestPost as __api_admin_countdown_banners_ts_onRequestPost } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/admin/countdown-banners.ts\"\nimport { onRequestPut as __api_admin_countdown_banners_ts_onRequestPut } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/admin/countdown-banners.ts\"\nimport { onRequestOptions as __api_admin_create_default_banner_ts_onRequestOptions } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/admin/create-default-banner.ts\"\nimport { onRequestPost as __api_admin_create_default_banner_ts_onRequestPost } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/admin/create-default-banner.ts\"\nimport { onRequestGet as __api_admin_customers_ts_onRequestGet } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/admin/customers.ts\"\nimport { onRequestOptions as __api_admin_customers_ts_onRequestOptions } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/admin/customers.ts\"\nimport { onRequestGet as __api_admin_dashboard_features_ts_onRequestGet } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/admin/dashboard-features.ts\"\nimport { onRequestOptions as __api_admin_dashboard_features_ts_onRequestOptions } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/admin/dashboard-features.ts\"\nimport { onRequestPut as __api_admin_dashboard_features_ts_onRequestPut } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/admin/dashboard-features.ts\"\nimport { onRequestPost as __api_admin_fix_banner_price_ts_onRequestPost } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/admin/fix-banner-price.ts\"\nimport { onRequestPost as __api_admin_fix_premium_users_ts_onRequestPost } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/admin/fix-premium-users.ts\"\nimport { onRequestPost as __api_admin_fix_purchased_users_ts_onRequestPost } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/admin/fix-purchased-users.ts\"\nimport { onRequestGet as __api_admin_force_update_price_ts_onRequestGet } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/admin/force-update-price.ts\"\nimport { onRequestGet as __api_admin_invoices_ts_onRequestGet } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/admin/invoices.ts\"\nimport { onRequestOptions as __api_admin_invoices_ts_onRequestOptions } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/admin/invoices.ts\"\nimport { onRequestOptions as __api_admin_login_ts_onRequestOptions } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/admin/login.ts\"\nimport { onRequestPost as __api_admin_login_ts_onRequestPost } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/admin/login.ts\"\nimport { onRequestGet as __api_admin_orders_ts_onRequestGet } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/admin/orders.ts\"\nimport { onRequestOptions as __api_admin_orders_ts_onRequestOptions } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/admin/orders.ts\"\nimport { onRequestGet as __api_admin_payment_settings_ts_onRequestGet } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/admin/payment-settings.ts\"\nimport { onRequestOptions as __api_admin_payment_settings_ts_onRequestOptions } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/admin/payment-settings.ts\"\nimport { onRequestPut as __api_admin_payment_settings_ts_onRequestPut } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/admin/payment-settings.ts\"\nimport { onRequestGet as __api_admin_pricing_ts_onRequestGet } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/admin/pricing.ts\"\nimport { onRequestOptions as __api_admin_pricing_ts_onRequestOptions } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/admin/pricing.ts\"\nimport { onRequestPut as __api_admin_pricing_ts_onRequestPut } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/admin/pricing.ts\"\nimport { onRequestOptions as __api_admin_reset_db_ts_onRequestOptions } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/admin/reset-db.ts\"\nimport { onRequestPost as __api_admin_reset_db_ts_onRequestPost } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/admin/reset-db.ts\"\nimport { onRequestGet as __api_admin_seo_settings_ts_onRequestGet } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/admin/seo-settings.ts\"\nimport { onRequestOptions as __api_admin_seo_settings_ts_onRequestOptions } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/admin/seo-settings.ts\"\nimport { onRequestPatch as __api_admin_seo_settings_ts_onRequestPatch } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/admin/seo-settings.ts\"\nimport { onRequestPut as __api_admin_seo_settings_ts_onRequestPut } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/admin/seo-settings.ts\"\nimport { onRequestGet as __api_admin_stats_ts_onRequestGet } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/admin/stats.ts\"\nimport { onRequestOptions as __api_admin_stats_ts_onRequestOptions } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/admin/stats.ts\"\nimport { onRequestOptions as __api_admin_sync_banner_price_ts_onRequestOptions } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/admin/sync-banner-price.ts\"\nimport { onRequestPost as __api_admin_sync_banner_price_ts_onRequestPost } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/admin/sync-banner-price.ts\"\nimport { onRequestGet as __api_admin_tickets_ts_onRequestGet } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/admin/tickets.ts\"\nimport { onRequestOptions as __api_admin_tickets_ts_onRequestOptions } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/admin/tickets.ts\"\nimport { onRequestOptions as __api_admin_update_banner_price_ts_onRequestOptions } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/admin/update-banner-price.ts\"\nimport { onRequestPost as __api_admin_update_banner_price_ts_onRequestPost } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/admin/update-banner-price.ts\"\nimport { onRequestGet as __api_admin_update_banner_price_direct_ts_onRequestGet } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/admin/update-banner-price-direct.ts\"\nimport { onRequestPost as __api_admin_update_user_premium_ts_onRequestPost } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/admin/update-user-premium.ts\"\nimport { onRequestGet as __api_admin_users_ts_onRequestGet } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/admin/users.ts\"\nimport { onRequestOptions as __api_admin_users_ts_onRequestOptions } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/admin/users.ts\"\nimport { onRequestGet as __api_announcement_badge_active_ts_onRequestGet } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/announcement-badge/active.ts\"\nimport { onRequestOptions as __api_announcement_badge_active_ts_onRequestOptions } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/announcement-badge/active.ts\"\nimport { onRequestGet as __api_auth_facebook_ts_onRequestGet } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/auth/facebook.ts\"\nimport { onRequestGet as __api_auth_github_ts_onRequestGet } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/auth/github.ts\"\nimport { onRequestGet as __api_auth_google_ts_onRequestGet } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/auth/google.ts\"\nimport { onRequestOptions as __api_auth_register_ts_onRequestOptions } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/auth/register.ts\"\nimport { onRequestPost as __api_auth_register_ts_onRequestPost } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/auth/register.ts\"\nimport { onRequestGet as __api_countdown_banner_active_ts_onRequestGet } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/countdown-banner/active.ts\"\nimport { onRequestOptions as __api_countdown_banner_active_ts_onRequestOptions } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/countdown-banner/active.ts\"\nimport { onRequestOptions as __api_customer_login_ts_onRequestOptions } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/customer/login.ts\"\nimport { onRequestPost as __api_customer_login_ts_onRequestPost } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/customer/login.ts\"\nimport { onRequestGet as __api_customer_profile_ts_onRequestGet } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/customer/profile.ts\"\nimport { onRequestOptions as __api_customer_profile_ts_onRequestOptions } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/customer/profile.ts\"\nimport { onRequestPut as __api_customer_profile_ts_onRequestPut } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/customer/profile.ts\"\nimport { onRequestOptions as __api_customer_register_ts_onRequestOptions } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/customer/register.ts\"\nimport { onRequestPost as __api_customer_register_ts_onRequestPost } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/customer/register.ts\"\nimport { onRequestGet as __api_customer_stats_ts_onRequestGet } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/customer/stats.ts\"\nimport { onRequestOptions as __api_customer_stats_ts_onRequestOptions } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/customer/stats.ts\"\nimport { onRequestGet as __api_download_extension_premium_ts_onRequestGet } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/download-extension/premium.ts\"\nimport { onRequestGet as __api_download_extension_trial_ts_onRequestGet } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/download-extension/trial.ts\"\nimport { onRequestGet as __api_downloads_premium_extension_ts_onRequestGet } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/downloads/premium-extension.ts\"\nimport { onRequestOptions as __api_downloads_premium_extension_ts_onRequestOptions } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/downloads/premium-extension.ts\"\nimport { onRequestGet as __api_invoices_generate_ts_onRequestGet } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/invoices/generate.ts\"\nimport { onRequestOptions as __api_invoices_generate_ts_onRequestOptions } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/invoices/generate.ts\"\nimport { onRequestGet as __api_me_invoices_ts_onRequestGet } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/me/invoices.ts\"\nimport { onRequestOptions as __api_me_invoices_ts_onRequestOptions } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/me/invoices.ts\"\nimport { onRequestGet as __api_me_orders_ts_onRequestGet } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/me/orders.ts\"\nimport { onRequestOptions as __api_me_orders_ts_onRequestOptions } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/me/orders.ts\"\nimport { onRequestOptions as __api_orders_complete_purchase_ts_onRequestOptions } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/orders/complete-purchase.ts\"\nimport { onRequestPost as __api_orders_complete_purchase_ts_onRequestPost } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/orders/complete-purchase.ts\"\nimport { onRequestGet as __api_orders_user_orders_ts_onRequestGet } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/orders/user-orders.ts\"\nimport { onRequestOptions as __api_orders_user_orders_ts_onRequestOptions } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/orders/user-orders.ts\"\nimport { onRequestGet as __api_products_pricing_ts_onRequestGet } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/products/pricing.ts\"\nimport { onRequestOptions as __api_products_pricing_ts_onRequestOptions } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/products/pricing.ts\"\nimport { onRequestGet as __api_download_extension__type__ts_onRequestGet } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/download-extension/[type].ts\"\nimport { onRequestOptions as __api_download_extension__type__ts_onRequestOptions } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/download-extension/[type].ts\"\nimport { onRequestPost as __api_generate_invoice__orderId__ts_onRequestPost } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/generate-invoice/[orderId].ts\"\nimport { onRequestDelete as __api_tickets__id__ts_onRequestDelete } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/tickets/[id].ts\"\nimport { onRequestOptions as __api_tickets__id__ts_onRequestOptions } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/tickets/[id].ts\"\nimport { onRequestPatch as __api_tickets__id__ts_onRequestPatch } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/tickets/[id].ts\"\nimport { onRequestPut as __api_tickets__id__ts_onRequestPut } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/tickets/[id].ts\"\nimport { onRequestGet as __api_auth_settings_ts_onRequestGet } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/auth-settings.ts\"\nimport { onRequestOptions as __api_auth_settings_ts_onRequestOptions } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/auth-settings.ts\"\nimport { onRequestOptions as __api_chat_ts_onRequestOptions } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/chat.ts\"\nimport { onRequestPost as __api_chat_ts_onRequestPost } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/chat.ts\"\nimport { onRequestOptions as __api_complete_stripe_payment_ts_onRequestOptions } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/complete-stripe-payment.ts\"\nimport { onRequestPost as __api_complete_stripe_payment_ts_onRequestPost } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/complete-stripe-payment.ts\"\nimport { onRequestOptions as __api_create_user_payment_intent_ts_onRequestOptions } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/create-user-payment-intent.ts\"\nimport { onRequestPost as __api_create_user_payment_intent_ts_onRequestPost } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/create-user-payment-intent.ts\"\nimport { onRequestGet as __api_download_premium_ts_onRequestGet } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/download-premium.ts\"\nimport { onRequestOptions as __api_download_premium_ts_onRequestOptions } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/download-premium.ts\"\nimport { onRequestPost as __api_download_premium_ts_onRequestPost } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/download-premium.ts\"\nimport { onRequestGet as __api_init_db_ts_onRequestGet } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/init-db.ts\"\nimport { onRequestOptions as __api_init_db_ts_onRequestOptions } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/init-db.ts\"\nimport { onRequestGet as __api_invoice_settings_ts_onRequestGet } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/invoice-settings.ts\"\nimport { onRequestOptions as __api_invoice_settings_ts_onRequestOptions } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/invoice-settings.ts\"\nimport { onRequestPut as __api_invoice_settings_ts_onRequestPut } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/invoice-settings.ts\"\nimport { onRequestGet as __api_invoices_ts_onRequestGet } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/invoices.ts\"\nimport { onRequestGet as __api_me_ts_onRequestGet } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/me.ts\"\nimport { onRequestGet as __api_migrate_db_ts_onRequestGet } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/migrate-db.ts\"\nimport { onRequestOptions as __api_migrate_db_ts_onRequestOptions } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/migrate-db.ts\"\nimport { onRequestOptions as __api_purchase_complete_ts_onRequestOptions } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/purchase-complete.ts\"\nimport { onRequestPost as __api_purchase_complete_ts_onRequestPost } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/purchase-complete.ts\"\nimport { onRequestOptions as __api_test_upload_ts_onRequestOptions } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/test-upload.ts\"\nimport { onRequestPost as __api_test_upload_ts_onRequestPost } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/test-upload.ts\"\nimport { onRequestPost as __api_test_user_ts_onRequestPost } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/test-user.ts\"\nimport { onRequestGet as __api_tickets_index_ts_onRequestGet } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/tickets/index.ts\"\nimport { onRequestOptions as __api_tickets_index_ts_onRequestOptions } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/tickets/index.ts\"\nimport { onRequestPost as __api_tickets_index_ts_onRequestPost } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/api/tickets/index.ts\"\nimport { onRequestGet as __health_ts_onRequestGet } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/functions/health.ts\"\n\nexport const routes = [\n    {\n      routePath: \"/api/admin/announcement-badges/translate\",\n      mountPath: \"/api/admin/announcement-badges\",\n      method: \"OPTIONS\",\n      middlewares: [],\n      modules: [__api_admin_announcement_badges_translate_ts_onRequestOptions],\n    },\n  {\n      routePath: \"/api/admin/announcement-badges/translate\",\n      mountPath: \"/api/admin/announcement-badges\",\n      method: \"POST\",\n      middlewares: [],\n      modules: [__api_admin_announcement_badges_translate_ts_onRequestPost],\n    },\n  {\n      routePath: \"/api/admin/announcement-badges/:id\",\n      mountPath: \"/api/admin/announcement-badges\",\n      method: \"DELETE\",\n      middlewares: [],\n      modules: [__api_admin_announcement_badges__id__ts_onRequestDelete],\n    },\n  {\n      routePath: \"/api/admin/announcement-badges/:id\",\n      mountPath: \"/api/admin/announcement-badges\",\n      method: \"GET\",\n      middlewares: [],\n      modules: [__api_admin_announcement_badges__id__ts_onRequestGet],\n    },\n  {\n      routePath: \"/api/admin/announcement-badges/:id\",\n      mountPath: \"/api/admin/announcement-badges\",\n      method: \"OPTIONS\",\n      middlewares: [],\n      modules: [__api_admin_announcement_badges__id__ts_onRequestOptions],\n    },\n  {\n      routePath: \"/api/admin/announcement-badges/:id\",\n      mountPath: \"/api/admin/announcement-badges\",\n      method: \"PUT\",\n      middlewares: [],\n      modules: [__api_admin_announcement_badges__id__ts_onRequestPut],\n    },\n  {\n      routePath: \"/api/admin/countdown-banners/:id\",\n      mountPath: \"/api/admin/countdown-banners\",\n      method: \"DELETE\",\n      middlewares: [],\n      modules: [__api_admin_countdown_banners__id__ts_onRequestDelete],\n    },\n  {\n      routePath: \"/api/admin/countdown-banners/:id\",\n      mountPath: \"/api/admin/countdown-banners\",\n      method: \"GET\",\n      middlewares: [],\n      modules: [__api_admin_countdown_banners__id__ts_onRequestGet],\n    },\n  {\n      routePath: \"/api/admin/countdown-banners/:id\",\n      mountPath: \"/api/admin/countdown-banners\",\n      method: \"OPTIONS\",\n      middlewares: [],\n      modules: [__api_admin_countdown_banners__id__ts_onRequestOptions],\n    },\n  {\n      routePath: \"/api/admin/countdown-banners/:id\",\n      mountPath: \"/api/admin/countdown-banners\",\n      method: \"PUT\",\n      middlewares: [],\n      modules: [__api_admin_countdown_banners__id__ts_onRequestPut],\n    },\n  {\n      routePath: \"/api/admin/dashboard-features/:feature\",\n      mountPath: \"/api/admin/dashboard-features\",\n      method: \"OPTIONS\",\n      middlewares: [],\n      modules: [__api_admin_dashboard_features__feature__ts_onRequestOptions],\n    },\n  {\n      routePath: \"/api/admin/dashboard-features/:feature\",\n      mountPath: \"/api/admin/dashboard-features\",\n      method: \"PUT\",\n      middlewares: [],\n      modules: [__api_admin_dashboard_features__feature__ts_onRequestPut],\n    },\n  {\n      routePath: \"/api/admin/orders/:orderId\",\n      mountPath: \"/api/admin/orders\",\n      method: \"PUT\",\n      middlewares: [],\n      modules: [__api_admin_orders__orderId__ts_onRequestPut],\n    },\n  {\n      routePath: \"/api/extension/check/:id\",\n      mountPath: \"/api/extension/check\",\n      method: \"GET\",\n      middlewares: [],\n      modules: [__api_extension_check__id__ts_onRequestGet],\n    },\n  {\n      routePath: \"/api/extension/downloads/:id\",\n      mountPath: \"/api/extension/downloads\",\n      method: \"GET\",\n      middlewares: [],\n      modules: [__api_extension_downloads__id__ts_onRequestGet],\n    },\n  {\n      routePath: \"/api/invoices/:id/pdf\",\n      mountPath: \"/api/invoices/:id\",\n      method: \"GET\",\n      middlewares: [],\n      modules: [__api_invoices__id__pdf_ts_onRequestGet],\n    },\n  {\n      routePath: \"/api/invoices/:id/pdf\",\n      mountPath: \"/api/invoices/:id\",\n      method: \"OPTIONS\",\n      middlewares: [],\n      modules: [__api_invoices__id__pdf_ts_onRequestOptions],\n    },\n  {\n      routePath: \"/api/tickets/:id/archive\",\n      mountPath: \"/api/tickets/:id\",\n      method: \"POST\",\n      middlewares: [],\n      modules: [__api_tickets__id__archive_ts_onRequestPost],\n    },\n  {\n      routePath: \"/api/tickets/:id/messages\",\n      mountPath: \"/api/tickets/:id\",\n      method: \"GET\",\n      middlewares: [],\n      modules: [__api_tickets__id__messages_ts_onRequestGet],\n    },\n  {\n      routePath: \"/api/tickets/:id/messages\",\n      mountPath: \"/api/tickets/:id\",\n      method: \"OPTIONS\",\n      middlewares: [],\n      modules: [__api_tickets__id__messages_ts_onRequestOptions],\n    },\n  {\n      routePath: \"/api/tickets/:id/messages\",\n      mountPath: \"/api/tickets/:id\",\n      method: \"POST\",\n      middlewares: [],\n      modules: [__api_tickets__id__messages_ts_onRequestPost],\n    },\n  {\n      routePath: \"/api/tickets/:id/status\",\n      mountPath: \"/api/tickets/:id\",\n      method: \"OPTIONS\",\n      middlewares: [],\n      modules: [__api_tickets__id__status_ts_onRequestOptions],\n    },\n  {\n      routePath: \"/api/tickets/:id/status\",\n      mountPath: \"/api/tickets/:id\",\n      method: \"PUT\",\n      middlewares: [],\n      modules: [__api_tickets__id__status_ts_onRequestPut],\n    },\n  {\n      routePath: \"/api/user/:id/purchase-status\",\n      mountPath: \"/api/user/:id\",\n      method: \"GET\",\n      middlewares: [],\n      modules: [__api_user__id__purchase_status_ts_onRequestGet],\n    },\n  {\n      routePath: \"/api/user/:userId/invoices\",\n      mountPath: \"/api/user/:userId\",\n      method: \"GET\",\n      middlewares: [],\n      modules: [__api_user__userId__invoices_ts_onRequestGet],\n    },\n  {\n      routePath: \"/api/user/:userId/invoices\",\n      mountPath: \"/api/user/:userId\",\n      method: \"OPTIONS\",\n      middlewares: [],\n      modules: [__api_user__userId__invoices_ts_onRequestOptions],\n    },\n  {\n      routePath: \"/api/user/:userId/orders\",\n      mountPath: \"/api/user/:userId\",\n      method: \"GET\",\n      middlewares: [],\n      modules: [__api_user__userId__orders_ts_onRequestGet],\n    },\n  {\n      routePath: \"/api/user/:userId/orders\",\n      mountPath: \"/api/user/:userId\",\n      method: \"OPTIONS\",\n      middlewares: [],\n      modules: [__api_user__userId__orders_ts_onRequestOptions],\n    },\n  {\n      routePath: \"/api/user/:userId/purchase-status\",\n      mountPath: \"/api/user/:userId\",\n      method: \"GET\",\n      middlewares: [],\n      modules: [__api_user__userId__purchase_status_ts_onRequestGet],\n    },\n  {\n      routePath: \"/api/user/:userId/purchase-status\",\n      mountPath: \"/api/user/:userId\",\n      method: \"OPTIONS\",\n      middlewares: [],\n      modules: [__api_user__userId__purchase_status_ts_onRequestOptions],\n    },\n  {\n      routePath: \"/api/admin/analytics\",\n      mountPath: \"/api/admin\",\n      method: \"GET\",\n      middlewares: [],\n      modules: [__api_admin_analytics_ts_onRequestGet],\n    },\n  {\n      routePath: \"/api/admin/analytics\",\n      mountPath: \"/api/admin\",\n      method: \"OPTIONS\",\n      middlewares: [],\n      modules: [__api_admin_analytics_ts_onRequestOptions],\n    },\n  {\n      routePath: \"/api/admin/announcement-badges\",\n      mountPath: \"/api/admin\",\n      method: \"DELETE\",\n      middlewares: [],\n      modules: [__api_admin_announcement_badges_ts_onRequestDelete],\n    },\n  {\n      routePath: \"/api/admin/announcement-badges\",\n      mountPath: \"/api/admin\",\n      method: \"GET\",\n      middlewares: [],\n      modules: [__api_admin_announcement_badges_ts_onRequestGet],\n    },\n  {\n      routePath: \"/api/admin/announcement-badges\",\n      mountPath: \"/api/admin\",\n      method: \"OPTIONS\",\n      middlewares: [],\n      modules: [__api_admin_announcement_badges_ts_onRequestOptions],\n    },\n  {\n      routePath: \"/api/admin/announcement-badges\",\n      mountPath: \"/api/admin\",\n      method: \"POST\",\n      middlewares: [],\n      modules: [__api_admin_announcement_badges_ts_onRequestPost],\n    },\n  {\n      routePath: \"/api/admin/announcement-badges\",\n      mountPath: \"/api/admin\",\n      method: \"PUT\",\n      middlewares: [],\n      modules: [__api_admin_announcement_badges_ts_onRequestPut],\n    },\n  {\n      routePath: \"/api/admin/auth-settings\",\n      mountPath: \"/api/admin\",\n      method: \"GET\",\n      middlewares: [],\n      modules: [__api_admin_auth_settings_ts_onRequestGet],\n    },\n  {\n      routePath: \"/api/admin/auth-settings\",\n      mountPath: \"/api/admin\",\n      method: \"OPTIONS\",\n      middlewares: [],\n      modules: [__api_admin_auth_settings_ts_onRequestOptions],\n    },\n  {\n      routePath: \"/api/admin/auth-settings\",\n      mountPath: \"/api/admin\",\n      method: \"PUT\",\n      middlewares: [],\n      modules: [__api_admin_auth_settings_ts_onRequestPut],\n    },\n  {\n      routePath: \"/api/admin/chat-settings\",\n      mountPath: \"/api/admin\",\n      method: \"GET\",\n      middlewares: [],\n      modules: [__api_admin_chat_settings_ts_onRequestGet],\n    },\n  {\n      routePath: \"/api/admin/chat-settings\",\n      mountPath: \"/api/admin\",\n      method: \"OPTIONS\",\n      middlewares: [],\n      modules: [__api_admin_chat_settings_ts_onRequestOptions],\n    },\n  {\n      routePath: \"/api/admin/chat-settings\",\n      mountPath: \"/api/admin\",\n      method: \"PUT\",\n      middlewares: [],\n      modules: [__api_admin_chat_settings_ts_onRequestPut],\n    },\n  {\n      routePath: \"/api/admin/check-user-data\",\n      mountPath: \"/api/admin\",\n      method: \"GET\",\n      middlewares: [],\n      modules: [__api_admin_check_user_data_ts_onRequestGet],\n    },\n  {\n      routePath: \"/api/admin/countdown-banners\",\n      mountPath: \"/api/admin\",\n      method: \"DELETE\",\n      middlewares: [],\n      modules: [__api_admin_countdown_banners_ts_onRequestDelete],\n    },\n  {\n      routePath: \"/api/admin/countdown-banners\",\n      mountPath: \"/api/admin\",\n      method: \"GET\",\n      middlewares: [],\n      modules: [__api_admin_countdown_banners_ts_onRequestGet],\n    },\n  {\n      routePath: \"/api/admin/countdown-banners\",\n      mountPath: \"/api/admin\",\n      method: \"OPTIONS\",\n      middlewares: [],\n      modules: [__api_admin_countdown_banners_ts_onRequestOptions],\n    },\n  {\n      routePath: \"/api/admin/countdown-banners\",\n      mountPath: \"/api/admin\",\n      method: \"POST\",\n      middlewares: [],\n      modules: [__api_admin_countdown_banners_ts_onRequestPost],\n    },\n  {\n      routePath: \"/api/admin/countdown-banners\",\n      mountPath: \"/api/admin\",\n      method: \"PUT\",\n      middlewares: [],\n      modules: [__api_admin_countdown_banners_ts_onRequestPut],\n    },\n  {\n      routePath: \"/api/admin/create-default-banner\",\n      mountPath: \"/api/admin\",\n      method: \"OPTIONS\",\n      middlewares: [],\n      modules: [__api_admin_create_default_banner_ts_onRequestOptions],\n    },\n  {\n      routePath: \"/api/admin/create-default-banner\",\n      mountPath: \"/api/admin\",\n      method: \"POST\",\n      middlewares: [],\n      modules: [__api_admin_create_default_banner_ts_onRequestPost],\n    },\n  {\n      routePath: \"/api/admin/customers\",\n      mountPath: \"/api/admin\",\n      method: \"GET\",\n      middlewares: [],\n      modules: [__api_admin_customers_ts_onRequestGet],\n    },\n  {\n      routePath: \"/api/admin/customers\",\n      mountPath: \"/api/admin\",\n      method: \"OPTIONS\",\n      middlewares: [],\n      modules: [__api_admin_customers_ts_onRequestOptions],\n    },\n  {\n      routePath: \"/api/admin/dashboard-features\",\n      mountPath: \"/api/admin\",\n      method: \"GET\",\n      middlewares: [],\n      modules: [__api_admin_dashboard_features_ts_onRequestGet],\n    },\n  {\n      routePath: \"/api/admin/dashboard-features\",\n      mountPath: \"/api/admin\",\n      method: \"OPTIONS\",\n      middlewares: [],\n      modules: [__api_admin_dashboard_features_ts_onRequestOptions],\n    },\n  {\n      routePath: \"/api/admin/dashboard-features\",\n      mountPath: \"/api/admin\",\n      method: \"PUT\",\n      middlewares: [],\n      modules: [__api_admin_dashboard_features_ts_onRequestPut],\n    },\n  {\n      routePath: \"/api/admin/fix-banner-price\",\n      mountPath: \"/api/admin\",\n      method: \"POST\",\n      middlewares: [],\n      modules: [__api_admin_fix_banner_price_ts_onRequestPost],\n    },\n  {\n      routePath: \"/api/admin/fix-premium-users\",\n      mountPath: \"/api/admin\",\n      method: \"POST\",\n      middlewares: [],\n      modules: [__api_admin_fix_premium_users_ts_onRequestPost],\n    },\n  {\n      routePath: \"/api/admin/fix-purchased-users\",\n      mountPath: \"/api/admin\",\n      method: \"POST\",\n      middlewares: [],\n      modules: [__api_admin_fix_purchased_users_ts_onRequestPost],\n    },\n  {\n      routePath: \"/api/admin/force-update-price\",\n      mountPath: \"/api/admin\",\n      method: \"GET\",\n      middlewares: [],\n      modules: [__api_admin_force_update_price_ts_onRequestGet],\n    },\n  {\n      routePath: \"/api/admin/invoices\",\n      mountPath: \"/api/admin\",\n      method: \"GET\",\n      middlewares: [],\n      modules: [__api_admin_invoices_ts_onRequestGet],\n    },\n  {\n      routePath: \"/api/admin/invoices\",\n      mountPath: \"/api/admin\",\n      method: \"OPTIONS\",\n      middlewares: [],\n      modules: [__api_admin_invoices_ts_onRequestOptions],\n    },\n  {\n      routePath: \"/api/admin/login\",\n      mountPath: \"/api/admin\",\n      method: \"OPTIONS\",\n      middlewares: [],\n      modules: [__api_admin_login_ts_onRequestOptions],\n    },\n  {\n      routePath: \"/api/admin/login\",\n      mountPath: \"/api/admin\",\n      method: \"POST\",\n      middlewares: [],\n      modules: [__api_admin_login_ts_onRequestPost],\n    },\n  {\n      routePath: \"/api/admin/orders\",\n      mountPath: \"/api/admin\",\n      method: \"GET\",\n      middlewares: [],\n      modules: [__api_admin_orders_ts_onRequestGet],\n    },\n  {\n      routePath: \"/api/admin/orders\",\n      mountPath: \"/api/admin\",\n      method: \"OPTIONS\",\n      middlewares: [],\n      modules: [__api_admin_orders_ts_onRequestOptions],\n    },\n  {\n      routePath: \"/api/admin/payment-settings\",\n      mountPath: \"/api/admin\",\n      method: \"GET\",\n      middlewares: [],\n      modules: [__api_admin_payment_settings_ts_onRequestGet],\n    },\n  {\n      routePath: \"/api/admin/payment-settings\",\n      mountPath: \"/api/admin\",\n      method: \"OPTIONS\",\n      middlewares: [],\n      modules: [__api_admin_payment_settings_ts_onRequestOptions],\n    },\n  {\n      routePath: \"/api/admin/payment-settings\",\n      mountPath: \"/api/admin\",\n      method: \"PUT\",\n      middlewares: [],\n      modules: [__api_admin_payment_settings_ts_onRequestPut],\n    },\n  {\n      routePath: \"/api/admin/pricing\",\n      mountPath: \"/api/admin\",\n      method: \"GET\",\n      middlewares: [],\n      modules: [__api_admin_pricing_ts_onRequestGet],\n    },\n  {\n      routePath: \"/api/admin/pricing\",\n      mountPath: \"/api/admin\",\n      method: \"OPTIONS\",\n      middlewares: [],\n      modules: [__api_admin_pricing_ts_onRequestOptions],\n    },\n  {\n      routePath: \"/api/admin/pricing\",\n      mountPath: \"/api/admin\",\n      method: \"PUT\",\n      middlewares: [],\n      modules: [__api_admin_pricing_ts_onRequestPut],\n    },\n  {\n      routePath: \"/api/admin/reset-db\",\n      mountPath: \"/api/admin\",\n      method: \"OPTIONS\",\n      middlewares: [],\n      modules: [__api_admin_reset_db_ts_onRequestOptions],\n    },\n  {\n      routePath: \"/api/admin/reset-db\",\n      mountPath: \"/api/admin\",\n      method: \"POST\",\n      middlewares: [],\n      modules: [__api_admin_reset_db_ts_onRequestPost],\n    },\n  {\n      routePath: \"/api/admin/seo-settings\",\n      mountPath: \"/api/admin\",\n      method: \"GET\",\n      middlewares: [],\n      modules: [__api_admin_seo_settings_ts_onRequestGet],\n    },\n  {\n      routePath: \"/api/admin/seo-settings\",\n      mountPath: \"/api/admin\",\n      method: \"OPTIONS\",\n      middlewares: [],\n      modules: [__api_admin_seo_settings_ts_onRequestOptions],\n    },\n  {\n      routePath: \"/api/admin/seo-settings\",\n      mountPath: \"/api/admin\",\n      method: \"PATCH\",\n      middlewares: [],\n      modules: [__api_admin_seo_settings_ts_onRequestPatch],\n    },\n  {\n      routePath: \"/api/admin/seo-settings\",\n      mountPath: \"/api/admin\",\n      method: \"PUT\",\n      middlewares: [],\n      modules: [__api_admin_seo_settings_ts_onRequestPut],\n    },\n  {\n      routePath: \"/api/admin/stats\",\n      mountPath: \"/api/admin\",\n      method: \"GET\",\n      middlewares: [],\n      modules: [__api_admin_stats_ts_onRequestGet],\n    },\n  {\n      routePath: \"/api/admin/stats\",\n      mountPath: \"/api/admin\",\n      method: \"OPTIONS\",\n      middlewares: [],\n      modules: [__api_admin_stats_ts_onRequestOptions],\n    },\n  {\n      routePath: \"/api/admin/sync-banner-price\",\n      mountPath: \"/api/admin\",\n      method: \"OPTIONS\",\n      middlewares: [],\n      modules: [__api_admin_sync_banner_price_ts_onRequestOptions],\n    },\n  {\n      routePath: \"/api/admin/sync-banner-price\",\n      mountPath: \"/api/admin\",\n      method: \"POST\",\n      middlewares: [],\n      modules: [__api_admin_sync_banner_price_ts_onRequestPost],\n    },\n  {\n      routePath: \"/api/admin/tickets\",\n      mountPath: \"/api/admin\",\n      method: \"GET\",\n      middlewares: [],\n      modules: [__api_admin_tickets_ts_onRequestGet],\n    },\n  {\n      routePath: \"/api/admin/tickets\",\n      mountPath: \"/api/admin\",\n      method: \"OPTIONS\",\n      middlewares: [],\n      modules: [__api_admin_tickets_ts_onRequestOptions],\n    },\n  {\n      routePath: \"/api/admin/update-banner-price\",\n      mountPath: \"/api/admin\",\n      method: \"OPTIONS\",\n      middlewares: [],\n      modules: [__api_admin_update_banner_price_ts_onRequestOptions],\n    },\n  {\n      routePath: \"/api/admin/update-banner-price\",\n      mountPath: \"/api/admin\",\n      method: \"POST\",\n      middlewares: [],\n      modules: [__api_admin_update_banner_price_ts_onRequestPost],\n    },\n  {\n      routePath: \"/api/admin/update-banner-price-direct\",\n      mountPath: \"/api/admin\",\n      method: \"GET\",\n      middlewares: [],\n      modules: [__api_admin_update_banner_price_direct_ts_onRequestGet],\n    },\n  {\n      routePath: \"/api/admin/update-user-premium\",\n      mountPath: \"/api/admin\",\n      method: \"POST\",\n      middlewares: [],\n      modules: [__api_admin_update_user_premium_ts_onRequestPost],\n    },\n  {\n      routePath: \"/api/admin/users\",\n      mountPath: \"/api/admin\",\n      method: \"GET\",\n      middlewares: [],\n      modules: [__api_admin_users_ts_onRequestGet],\n    },\n  {\n      routePath: \"/api/admin/users\",\n      mountPath: \"/api/admin\",\n      method: \"OPTIONS\",\n      middlewares: [],\n      modules: [__api_admin_users_ts_onRequestOptions],\n    },\n  {\n      routePath: \"/api/announcement-badge/active\",\n      mountPath: \"/api/announcement-badge\",\n      method: \"GET\",\n      middlewares: [],\n      modules: [__api_announcement_badge_active_ts_onRequestGet],\n    },\n  {\n      routePath: \"/api/announcement-badge/active\",\n      mountPath: \"/api/announcement-badge\",\n      method: \"OPTIONS\",\n      middlewares: [],\n      modules: [__api_announcement_badge_active_ts_onRequestOptions],\n    },\n  {\n      routePath: \"/api/auth/facebook\",\n      mountPath: \"/api/auth\",\n      method: \"GET\",\n      middlewares: [],\n      modules: [__api_auth_facebook_ts_onRequestGet],\n    },\n  {\n      routePath: \"/api/auth/github\",\n      mountPath: \"/api/auth\",\n      method: \"GET\",\n      middlewares: [],\n      modules: [__api_auth_github_ts_onRequestGet],\n    },\n  {\n      routePath: \"/api/auth/google\",\n      mountPath: \"/api/auth\",\n      method: \"GET\",\n      middlewares: [],\n      modules: [__api_auth_google_ts_onRequestGet],\n    },\n  {\n      routePath: \"/api/auth/register\",\n      mountPath: \"/api/auth\",\n      method: \"OPTIONS\",\n      middlewares: [],\n      modules: [__api_auth_register_ts_onRequestOptions],\n    },\n  {\n      routePath: \"/api/auth/register\",\n      mountPath: \"/api/auth\",\n      method: \"POST\",\n      middlewares: [],\n      modules: [__api_auth_register_ts_onRequestPost],\n    },\n  {\n      routePath: \"/api/countdown-banner/active\",\n      mountPath: \"/api/countdown-banner\",\n      method: \"GET\",\n      middlewares: [],\n      modules: [__api_countdown_banner_active_ts_onRequestGet],\n    },\n  {\n      routePath: \"/api/countdown-banner/active\",\n      mountPath: \"/api/countdown-banner\",\n      method: \"OPTIONS\",\n      middlewares: [],\n      modules: [__api_countdown_banner_active_ts_onRequestOptions],\n    },\n  {\n      routePath: \"/api/customer/login\",\n      mountPath: \"/api/customer\",\n      method: \"OPTIONS\",\n      middlewares: [],\n      modules: [__api_customer_login_ts_onRequestOptions],\n    },\n  {\n      routePath: \"/api/customer/login\",\n      mountPath: \"/api/customer\",\n      method: \"POST\",\n      middlewares: [],\n      modules: [__api_customer_login_ts_onRequestPost],\n    },\n  {\n      routePath: \"/api/customer/profile\",\n      mountPath: \"/api/customer\",\n      method: \"GET\",\n      middlewares: [],\n      modules: [__api_customer_profile_ts_onRequestGet],\n    },\n  {\n      routePath: \"/api/customer/profile\",\n      mountPath: \"/api/customer\",\n      method: \"OPTIONS\",\n      middlewares: [],\n      modules: [__api_customer_profile_ts_onRequestOptions],\n    },\n  {\n      routePath: \"/api/customer/profile\",\n      mountPath: \"/api/customer\",\n      method: \"PUT\",\n      middlewares: [],\n      modules: [__api_customer_profile_ts_onRequestPut],\n    },\n  {\n      routePath: \"/api/customer/register\",\n      mountPath: \"/api/customer\",\n      method: \"OPTIONS\",\n      middlewares: [],\n      modules: [__api_customer_register_ts_onRequestOptions],\n    },\n  {\n      routePath: \"/api/customer/register\",\n      mountPath: \"/api/customer\",\n      method: \"POST\",\n      middlewares: [],\n      modules: [__api_customer_register_ts_onRequestPost],\n    },\n  {\n      routePath: \"/api/customer/stats\",\n      mountPath: \"/api/customer\",\n      method: \"GET\",\n      middlewares: [],\n      modules: [__api_customer_stats_ts_onRequestGet],\n    },\n  {\n      routePath: \"/api/customer/stats\",\n      mountPath: \"/api/customer\",\n      method: \"OPTIONS\",\n      middlewares: [],\n      modules: [__api_customer_stats_ts_onRequestOptions],\n    },\n  {\n      routePath: \"/api/download-extension/premium\",\n      mountPath: \"/api/download-extension\",\n      method: \"GET\",\n      middlewares: [],\n      modules: [__api_download_extension_premium_ts_onRequestGet],\n    },\n  {\n      routePath: \"/api/download-extension/trial\",\n      mountPath: \"/api/download-extension\",\n      method: \"GET\",\n      middlewares: [],\n      modules: [__api_download_extension_trial_ts_onRequestGet],\n    },\n  {\n      routePath: \"/api/downloads/premium-extension\",\n      mountPath: \"/api/downloads\",\n      method: \"GET\",\n      middlewares: [],\n      modules: [__api_downloads_premium_extension_ts_onRequestGet],\n    },\n  {\n      routePath: \"/api/downloads/premium-extension\",\n      mountPath: \"/api/downloads\",\n      method: \"OPTIONS\",\n      middlewares: [],\n      modules: [__api_downloads_premium_extension_ts_onRequestOptions],\n    },\n  {\n      routePath: \"/api/invoices/generate\",\n      mountPath: \"/api/invoices\",\n      method: \"GET\",\n      middlewares: [],\n      modules: [__api_invoices_generate_ts_onRequestGet],\n    },\n  {\n      routePath: \"/api/invoices/generate\",\n      mountPath: \"/api/invoices\",\n      method: \"OPTIONS\",\n      middlewares: [],\n      modules: [__api_invoices_generate_ts_onRequestOptions],\n    },\n  {\n      routePath: \"/api/me/invoices\",\n      mountPath: \"/api/me\",\n      method: \"GET\",\n      middlewares: [],\n      modules: [__api_me_invoices_ts_onRequestGet],\n    },\n  {\n      routePath: \"/api/me/invoices\",\n      mountPath: \"/api/me\",\n      method: \"OPTIONS\",\n      middlewares: [],\n      modules: [__api_me_invoices_ts_onRequestOptions],\n    },\n  {\n      routePath: \"/api/me/orders\",\n      mountPath: \"/api/me\",\n      method: \"GET\",\n      middlewares: [],\n      modules: [__api_me_orders_ts_onRequestGet],\n    },\n  {\n      routePath: \"/api/me/orders\",\n      mountPath: \"/api/me\",\n      method: \"OPTIONS\",\n      middlewares: [],\n      modules: [__api_me_orders_ts_onRequestOptions],\n    },\n  {\n      routePath: \"/api/orders/complete-purchase\",\n      mountPath: \"/api/orders\",\n      method: \"OPTIONS\",\n      middlewares: [],\n      modules: [__api_orders_complete_purchase_ts_onRequestOptions],\n    },\n  {\n      routePath: \"/api/orders/complete-purchase\",\n      mountPath: \"/api/orders\",\n      method: \"POST\",\n      middlewares: [],\n      modules: [__api_orders_complete_purchase_ts_onRequestPost],\n    },\n  {\n      routePath: \"/api/orders/user-orders\",\n      mountPath: \"/api/orders\",\n      method: \"GET\",\n      middlewares: [],\n      modules: [__api_orders_user_orders_ts_onRequestGet],\n    },\n  {\n      routePath: \"/api/orders/user-orders\",\n      mountPath: \"/api/orders\",\n      method: \"OPTIONS\",\n      middlewares: [],\n      modules: [__api_orders_user_orders_ts_onRequestOptions],\n    },\n  {\n      routePath: \"/api/products/pricing\",\n      mountPath: \"/api/products\",\n      method: \"GET\",\n      middlewares: [],\n      modules: [__api_products_pricing_ts_onRequestGet],\n    },\n  {\n      routePath: \"/api/products/pricing\",\n      mountPath: \"/api/products\",\n      method: \"OPTIONS\",\n      middlewares: [],\n      modules: [__api_products_pricing_ts_onRequestOptions],\n    },\n  {\n      routePath: \"/api/download-extension/:type\",\n      mountPath: \"/api/download-extension\",\n      method: \"GET\",\n      middlewares: [],\n      modules: [__api_download_extension__type__ts_onRequestGet],\n    },\n  {\n      routePath: \"/api/download-extension/:type\",\n      mountPath: \"/api/download-extension\",\n      method: \"OPTIONS\",\n      middlewares: [],\n      modules: [__api_download_extension__type__ts_onRequestOptions],\n    },\n  {\n      routePath: \"/api/generate-invoice/:orderId\",\n      mountPath: \"/api/generate-invoice\",\n      method: \"POST\",\n      middlewares: [],\n      modules: [__api_generate_invoice__orderId__ts_onRequestPost],\n    },\n  {\n      routePath: \"/api/tickets/:id\",\n      mountPath: \"/api/tickets\",\n      method: \"DELETE\",\n      middlewares: [],\n      modules: [__api_tickets__id__ts_onRequestDelete],\n    },\n  {\n      routePath: \"/api/tickets/:id\",\n      mountPath: \"/api/tickets\",\n      method: \"OPTIONS\",\n      middlewares: [],\n      modules: [__api_tickets__id__ts_onRequestOptions],\n    },\n  {\n      routePath: \"/api/tickets/:id\",\n      mountPath: \"/api/tickets\",\n      method: \"PATCH\",\n      middlewares: [],\n      modules: [__api_tickets__id__ts_onRequestPatch],\n    },\n  {\n      routePath: \"/api/tickets/:id\",\n      mountPath: \"/api/tickets\",\n      method: \"PUT\",\n      middlewares: [],\n      modules: [__api_tickets__id__ts_onRequestPut],\n    },\n  {\n      routePath: \"/api/auth-settings\",\n      mountPath: \"/api\",\n      method: \"GET\",\n      middlewares: [],\n      modules: [__api_auth_settings_ts_onRequestGet],\n    },\n  {\n      routePath: \"/api/auth-settings\",\n      mountPath: \"/api\",\n      method: \"OPTIONS\",\n      middlewares: [],\n      modules: [__api_auth_settings_ts_onRequestOptions],\n    },\n  {\n      routePath: \"/api/chat\",\n      mountPath: \"/api\",\n      method: \"OPTIONS\",\n      middlewares: [],\n      modules: [__api_chat_ts_onRequestOptions],\n    },\n  {\n      routePath: \"/api/chat\",\n      mountPath: \"/api\",\n      method: \"POST\",\n      middlewares: [],\n      modules: [__api_chat_ts_onRequestPost],\n    },\n  {\n      routePath: \"/api/complete-stripe-payment\",\n      mountPath: \"/api\",\n      method: \"OPTIONS\",\n      middlewares: [],\n      modules: [__api_complete_stripe_payment_ts_onRequestOptions],\n    },\n  {\n      routePath: \"/api/complete-stripe-payment\",\n      mountPath: \"/api\",\n      method: \"POST\",\n      middlewares: [],\n      modules: [__api_complete_stripe_payment_ts_onRequestPost],\n    },\n  {\n      routePath: \"/api/create-user-payment-intent\",\n      mountPath: \"/api\",\n      method: \"OPTIONS\",\n      middlewares: [],\n      modules: [__api_create_user_payment_intent_ts_onRequestOptions],\n    },\n  {\n      routePath: \"/api/create-user-payment-intent\",\n      mountPath: \"/api\",\n      method: \"POST\",\n      middlewares: [],\n      modules: [__api_create_user_payment_intent_ts_onRequestPost],\n    },\n  {\n      routePath: \"/api/download-premium\",\n      mountPath: \"/api\",\n      method: \"GET\",\n      middlewares: [],\n      modules: [__api_download_premium_ts_onRequestGet],\n    },\n  {\n      routePath: \"/api/download-premium\",\n      mountPath: \"/api\",\n      method: \"OPTIONS\",\n      middlewares: [],\n      modules: [__api_download_premium_ts_onRequestOptions],\n    },\n  {\n      routePath: \"/api/download-premium\",\n      mountPath: \"/api\",\n      method: \"POST\",\n      middlewares: [],\n      modules: [__api_download_premium_ts_onRequestPost],\n    },\n  {\n      routePath: \"/api/init-db\",\n      mountPath: \"/api\",\n      method: \"GET\",\n      middlewares: [],\n      modules: [__api_init_db_ts_onRequestGet],\n    },\n  {\n      routePath: \"/api/init-db\",\n      mountPath: \"/api\",\n      method: \"OPTIONS\",\n      middlewares: [],\n      modules: [__api_init_db_ts_onRequestOptions],\n    },\n  {\n      routePath: \"/api/invoice-settings\",\n      mountPath: \"/api\",\n      method: \"GET\",\n      middlewares: [],\n      modules: [__api_invoice_settings_ts_onRequestGet],\n    },\n  {\n      routePath: \"/api/invoice-settings\",\n      mountPath: \"/api\",\n      method: \"OPTIONS\",\n      middlewares: [],\n      modules: [__api_invoice_settings_ts_onRequestOptions],\n    },\n  {\n      routePath: \"/api/invoice-settings\",\n      mountPath: \"/api\",\n      method: \"PUT\",\n      middlewares: [],\n      modules: [__api_invoice_settings_ts_onRequestPut],\n    },\n  {\n      routePath: \"/api/invoices\",\n      mountPath: \"/api\",\n      method: \"GET\",\n      middlewares: [],\n      modules: [__api_invoices_ts_onRequestGet],\n    },\n  {\n      routePath: \"/api/me\",\n      mountPath: \"/api\",\n      method: \"GET\",\n      middlewares: [],\n      modules: [__api_me_ts_onRequestGet],\n    },\n  {\n      routePath: \"/api/migrate-db\",\n      mountPath: \"/api\",\n      method: \"GET\",\n      middlewares: [],\n      modules: [__api_migrate_db_ts_onRequestGet],\n    },\n  {\n      routePath: \"/api/migrate-db\",\n      mountPath: \"/api\",\n      method: \"OPTIONS\",\n      middlewares: [],\n      modules: [__api_migrate_db_ts_onRequestOptions],\n    },\n  {\n      routePath: \"/api/purchase-complete\",\n      mountPath: \"/api\",\n      method: \"OPTIONS\",\n      middlewares: [],\n      modules: [__api_purchase_complete_ts_onRequestOptions],\n    },\n  {\n      routePath: \"/api/purchase-complete\",\n      mountPath: \"/api\",\n      method: \"POST\",\n      middlewares: [],\n      modules: [__api_purchase_complete_ts_onRequestPost],\n    },\n  {\n      routePath: \"/api/test-upload\",\n      mountPath: \"/api\",\n      method: \"OPTIONS\",\n      middlewares: [],\n      modules: [__api_test_upload_ts_onRequestOptions],\n    },\n  {\n      routePath: \"/api/test-upload\",\n      mountPath: \"/api\",\n      method: \"POST\",\n      middlewares: [],\n      modules: [__api_test_upload_ts_onRequestPost],\n    },\n  {\n      routePath: \"/api/test-user\",\n      mountPath: \"/api\",\n      method: \"POST\",\n      middlewares: [],\n      modules: [__api_test_user_ts_onRequestPost],\n    },\n  {\n      routePath: \"/api/tickets\",\n      mountPath: \"/api/tickets\",\n      method: \"GET\",\n      middlewares: [],\n      modules: [__api_tickets_index_ts_onRequestGet],\n    },\n  {\n      routePath: \"/api/tickets\",\n      mountPath: \"/api/tickets\",\n      method: \"OPTIONS\",\n      middlewares: [],\n      modules: [__api_tickets_index_ts_onRequestOptions],\n    },\n  {\n      routePath: \"/api/tickets\",\n      mountPath: \"/api/tickets\",\n      method: \"POST\",\n      middlewares: [],\n      modules: [__api_tickets_index_ts_onRequestPost],\n    },\n  {\n      routePath: \"/health\",\n      mountPath: \"/\",\n      method: \"GET\",\n      middlewares: [],\n      modules: [__health_ts_onRequestGet],\n    },\n  ]", "// This loads all middlewares exposed on the middleware object and then starts\n// the invocation chain. The big idea is that we can add these to the middleware\n// export dynamically through wrangler, or we can potentially let users directly\n// add them as a sort of \"plugin\" system.\n\nimport ENTRY, { __INTERNAL_WRANGLER_MIDDLEWARE__ } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/.wrangler/tmp/bundle-T1F7Rk/middleware-insertion-facade.js\";\nimport { __facade_invoke__, __facade_register__, Dispatcher } from \"/Users/houmanghavamzadeh/.nvm/versions/node/v20.19.4/lib/node_modules/wrangler/templates/middleware/common.ts\";\nimport type { WorkerEntrypointConstructor } from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/.wrangler/tmp/bundle-T1F7Rk/middleware-insertion-facade.js\";\n\n// Preserve all the exports from the worker\nexport * from \"/Users/houmanghavamzadeh/CascadeProjects/ocus-job-hunter/.wrangler/tmp/bundle-T1F7Rk/middleware-insertion-facade.js\";\n\nclass __Facade_ScheduledController__ implements ScheduledController {\n\treadonly #noRetry: ScheduledController[\"noRetry\"];\n\n\tconstructor(\n\t\treadonly scheduledTime: number,\n\t\treadonly cron: string,\n\t\tnoRetry: ScheduledController[\"noRetry\"]\n\t) {\n\t\tthis.#noRetry = noRetry;\n\t}\n\n\tnoRetry() {\n\t\tif (!(this instanceof __Facade_ScheduledController__)) {\n\t\t\tthrow new TypeError(\"Illegal invocation\");\n\t\t}\n\t\t// Need to call native method immediately in case uncaught error thrown\n\t\tthis.#noRetry();\n\t}\n}\n\nfunction wrapExportedHandler(worker: ExportedHandler): ExportedHandler {\n\t// If we don't have any middleware defined, just return the handler as is\n\tif (\n\t\t__INTERNAL_WRANGLER_MIDDLEWARE__ === undefined ||\n\t\t__INTERNAL_WRANGLER_MIDDLEWARE__.length === 0\n\t) {\n\t\treturn worker;\n\t}\n\t// Otherwise, register all middleware once\n\tfor (const middleware of __INTERNAL_WRANGLER_MIDDLEWARE__) {\n\t\t__facade_register__(middleware);\n\t}\n\n\tconst fetchDispatcher: ExportedHandlerFetchHandler = function (\n\t\trequest,\n\t\tenv,\n\t\tctx\n\t) {\n\t\tif (worker.fetch === undefined) {\n\t\t\tthrow new Error(\"Handler does not export a fetch() function.\");\n\t\t}\n\t\treturn worker.fetch(request, env, ctx);\n\t};\n\n\treturn {\n\t\t...worker,\n\t\tfetch(request, env, ctx) {\n\t\t\tconst dispatcher: Dispatcher = function (type, init) {\n\t\t\t\tif (type === \"scheduled\" && worker.scheduled !== undefined) {\n\t\t\t\t\tconst controller = new __Facade_ScheduledController__(\n\t\t\t\t\t\tDate.now(),\n\t\t\t\t\t\tinit.cron ?? \"\",\n\t\t\t\t\t\t() => {}\n\t\t\t\t\t);\n\t\t\t\t\treturn worker.scheduled(controller, env, ctx);\n\t\t\t\t}\n\t\t\t};\n\t\t\treturn __facade_invoke__(request, env, ctx, dispatcher, fetchDispatcher);\n\t\t},\n\t};\n}\n\nfunction wrapWorkerEntrypoint(\n\tklass: WorkerEntrypointConstructor\n): WorkerEntrypointConstructor {\n\t// If we don't have any middleware defined, just return the handler as is\n\tif (\n\t\t__INTERNAL_WRANGLER_MIDDLEWARE__ === undefined ||\n\t\t__INTERNAL_WRANGLER_MIDDLEWARE__.length === 0\n\t) {\n\t\treturn klass;\n\t}\n\t// Otherwise, register all middleware once\n\tfor (const middleware of __INTERNAL_WRANGLER_MIDDLEWARE__) {\n\t\t__facade_register__(middleware);\n\t}\n\n\t// `extend`ing `klass` here so other RPC methods remain callable\n\treturn class extends klass {\n\t\t#fetchDispatcher: ExportedHandlerFetchHandler<Record<string, unknown>> = (\n\t\t\trequest,\n\t\t\tenv,\n\t\t\tctx\n\t\t) => {\n\t\t\tthis.env = env;\n\t\t\tthis.ctx = ctx;\n\t\t\tif (super.fetch === undefined) {\n\t\t\t\tthrow new Error(\"Entrypoint class does not define a fetch() function.\");\n\t\t\t}\n\t\t\treturn super.fetch(request);\n\t\t};\n\n\t\t#dispatcher: Dispatcher = (type, init) => {\n\t\t\tif (type === \"scheduled\" && super.scheduled !== undefined) {\n\t\t\t\tconst controller = new __Facade_ScheduledController__(\n\t\t\t\t\tDate.now(),\n\t\t\t\t\tinit.cron ?? \"\",\n\t\t\t\t\t() => {}\n\t\t\t\t);\n\t\t\t\treturn super.scheduled(controller);\n\t\t\t}\n\t\t};\n\n\t\tfetch(request: Request<unknown, IncomingRequestCfProperties>) {\n\t\t\treturn __facade_invoke__(\n\t\t\t\trequest,\n\t\t\t\tthis.env,\n\t\t\t\tthis.ctx,\n\t\t\t\tthis.#dispatcher,\n\t\t\t\tthis.#fetchDispatcher\n\t\t\t);\n\t\t}\n\t};\n}\n\nlet WRAPPED_ENTRY: ExportedHandler | WorkerEntrypointConstructor | undefined;\nif (typeof ENTRY === \"object\") {\n\tWRAPPED_ENTRY = wrapExportedHandler(ENTRY);\n} else if (typeof ENTRY === \"function\") {\n\tWRAPPED_ENTRY = wrapWorkerEntrypoint(ENTRY);\n}\nexport default WRAPPED_ENTRY;\n", "\t\t\t\timport worker, * as OTHER_EXPORTS from \"/Users/houmanghavamzadeh/.nvm/versions/node/v20.19.4/lib/node_modules/wrangler/templates/pages-template-worker.ts\";\n\t\t\t\timport * as __MIDDLEWARE_0__ from \"/Users/houmanghavamzadeh/.nvm/versions/node/v20.19.4/lib/node_modules/wrangler/templates/middleware/middleware-ensure-req-body-drained.ts\";\nimport * as __MIDDLEWARE_1__ from \"/Users/houmanghavamzadeh/.nvm/versions/node/v20.19.4/lib/node_modules/wrangler/templates/middleware/middleware-miniflare3-json-error.ts\";\n\n\t\t\t\texport * from \"/Users/houmanghavamzadeh/.nvm/versions/node/v20.19.4/lib/node_modules/wrangler/templates/pages-template-worker.ts\";\n\t\t\t\tconst MIDDLEWARE_TEST_INJECT = \"__INJECT_FOR_TESTING_WRANGLER_MIDDLEWARE__\";\n\t\t\t\texport const __INTERNAL_WRANGLER_MIDDLEWARE__ = [\n\t\t\t\t\t\n\t\t\t\t\t__MIDDLEWARE_0__.default,__MIDDLEWARE_1__.default\n\t\t\t\t]\n\t\t\t\texport default worker;", "import { match } from \"path-to-regexp\";\n\n//note: this explicitly does not include the * character, as pages requires this\nconst escapeRegex = /[.+?^${}()|[\\]\\\\]/g;\n\ntype HTTPMethod =\n\t| \"HEAD\"\n\t| \"OPTIONS\"\n\t| \"GET\"\n\t| \"POST\"\n\t| \"PUT\"\n\t| \"PATCH\"\n\t| \"DELETE\";\n\n/* TODO: Grab these from @cloudflare/workers-types instead */\ntype Params<P extends string = string> = Record<P, string | string[]>;\n\ntype EventContext<Env, P extends string, Data> = {\n\trequest: Request;\n\tfunctionPath: string;\n\twaitUntil: (promise: Promise<unknown>) => void;\n\tpassThroughOnException: () => void;\n\tnext: (input?: Request | string, init?: RequestInit) => Promise<Response>;\n\tenv: Env & { ASSETS: { fetch: typeof fetch } };\n\tparams: Params<P>;\n\tdata: Data;\n};\n\ndeclare type PagesFunction<\n\tEnv = unknown,\n\tP extends string = string,\n\tData extends Record<string, unknown> = Record<string, unknown>,\n> = (context: EventContext<Env, P, Data>) => Response | Promise<Response>;\n/* end @cloudflare/workers-types */\n\ntype RouteHandler = {\n\troutePath: string;\n\tmountPath: string;\n\tmethod?: HTTPMethod;\n\tmodules: PagesFunction[];\n\tmiddlewares: PagesFunction[];\n};\n\n// inject `routes` via ESBuild\ndeclare const routes: RouteHandler[];\n// define `__FALLBACK_SERVICE__` via ESBuild\ndeclare const __FALLBACK_SERVICE__: string;\n\n// expect an ASSETS fetcher binding pointing to the asset-server stage\ntype FetchEnv = {\n\t[name: string]: { fetch: typeof fetch };\n\tASSETS: { fetch: typeof fetch };\n};\n\ntype WorkerContext = {\n\twaitUntil: (promise: Promise<unknown>) => void;\n\tpassThroughOnException: () => void;\n};\n\nfunction* executeRequest(request: Request) {\n\tconst requestPath = new URL(request.url).pathname;\n\n\t// First, iterate through the routes (backwards) and execute \"middlewares\" on partial route matches\n\tfor (const route of [...routes].reverse()) {\n\t\tif (route.method && route.method !== request.method) {\n\t\t\tcontinue;\n\t\t}\n\n\t\t// replaces with \"\\\\$&\", this prepends a backslash to the matched string, e.g. \"[\" becomes \"\\[\"\n\t\tconst routeMatcher = match(route.routePath.replace(escapeRegex, \"\\\\$&\"), {\n\t\t\tend: false,\n\t\t});\n\t\tconst mountMatcher = match(route.mountPath.replace(escapeRegex, \"\\\\$&\"), {\n\t\t\tend: false,\n\t\t});\n\t\tconst matchResult = routeMatcher(requestPath);\n\t\tconst mountMatchResult = mountMatcher(requestPath);\n\t\tif (matchResult && mountMatchResult) {\n\t\t\tfor (const handler of route.middlewares.flat()) {\n\t\t\t\tyield {\n\t\t\t\t\thandler,\n\t\t\t\t\tparams: matchResult.params as Params,\n\t\t\t\t\tpath: mountMatchResult.path,\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t}\n\n\t// Then look for the first exact route match and execute its \"modules\"\n\tfor (const route of routes) {\n\t\tif (route.method && route.method !== request.method) {\n\t\t\tcontinue;\n\t\t}\n\t\tconst routeMatcher = match(route.routePath.replace(escapeRegex, \"\\\\$&\"), {\n\t\t\tend: true,\n\t\t});\n\t\tconst mountMatcher = match(route.mountPath.replace(escapeRegex, \"\\\\$&\"), {\n\t\t\tend: false,\n\t\t});\n\t\tconst matchResult = routeMatcher(requestPath);\n\t\tconst mountMatchResult = mountMatcher(requestPath);\n\t\tif (matchResult && mountMatchResult && route.modules.length) {\n\t\t\tfor (const handler of route.modules.flat()) {\n\t\t\t\tyield {\n\t\t\t\t\thandler,\n\t\t\t\t\tparams: matchResult.params as Params,\n\t\t\t\t\tpath: matchResult.path,\n\t\t\t\t};\n\t\t\t}\n\t\t\tbreak;\n\t\t}\n\t}\n}\n\nexport default {\n\tasync fetch(\n\t\toriginalRequest: Request,\n\t\tenv: FetchEnv,\n\t\tworkerContext: WorkerContext\n\t) {\n\t\tlet request = originalRequest;\n\t\tconst handlerIterator = executeRequest(request);\n\t\tlet data = {}; // arbitrary data the user can set between functions\n\t\tlet isFailOpen = false;\n\n\t\tconst next = async (input?: RequestInfo, init?: RequestInit) => {\n\t\t\tif (input !== undefined) {\n\t\t\t\tlet url = input;\n\t\t\t\tif (typeof input === \"string\") {\n\t\t\t\t\turl = new URL(input, request.url).toString();\n\t\t\t\t}\n\t\t\t\trequest = new Request(url, init);\n\t\t\t}\n\n\t\t\tconst result = handlerIterator.next();\n\t\t\t// Note we can't use `!result.done` because this doesn't narrow to the correct type\n\t\t\tif (result.done === false) {\n\t\t\t\tconst { handler, params, path } = result.value;\n\t\t\t\tconst context = {\n\t\t\t\t\trequest: new Request(request.clone()),\n\t\t\t\t\tfunctionPath: path,\n\t\t\t\t\tnext,\n\t\t\t\t\tparams,\n\t\t\t\t\tget data() {\n\t\t\t\t\t\treturn data;\n\t\t\t\t\t},\n\t\t\t\t\tset data(value) {\n\t\t\t\t\t\tif (typeof value !== \"object\" || value === null) {\n\t\t\t\t\t\t\tthrow new Error(\"context.data must be an object\");\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// user has overriden context.data, so we need to merge it with the existing data\n\t\t\t\t\t\tdata = value;\n\t\t\t\t\t},\n\t\t\t\t\tenv,\n\t\t\t\t\twaitUntil: workerContext.waitUntil.bind(workerContext),\n\t\t\t\t\tpassThroughOnException: () => {\n\t\t\t\t\t\tisFailOpen = true;\n\t\t\t\t\t},\n\t\t\t\t};\n\n\t\t\t\tconst response = await handler(context);\n\n\t\t\t\tif (!(response instanceof Response)) {\n\t\t\t\t\tthrow new Error(\"Your Pages function should return a Response\");\n\t\t\t\t}\n\n\t\t\t\treturn cloneResponse(response);\n\t\t\t} else if (__FALLBACK_SERVICE__) {\n\t\t\t\t// There are no more handlers so finish with the fallback service (`env.ASSETS.fetch` in Pages' case)\n\t\t\t\tconst response = await env[__FALLBACK_SERVICE__].fetch(request);\n\t\t\t\treturn cloneResponse(response);\n\t\t\t} else {\n\t\t\t\t// There was not fallback service so actually make the request to the origin.\n\t\t\t\tconst response = await fetch(request);\n\t\t\t\treturn cloneResponse(response);\n\t\t\t}\n\t\t};\n\n\t\ttry {\n\t\t\treturn await next();\n\t\t} catch (error) {\n\t\t\tif (isFailOpen) {\n\t\t\t\tconst response = await env[__FALLBACK_SERVICE__].fetch(request);\n\t\t\t\treturn cloneResponse(response);\n\t\t\t}\n\n\t\t\tthrow error;\n\t\t}\n\t},\n};\n\n// This makes a Response mutable\nconst cloneResponse = (response: Response) =>\n\t// https://fetch.spec.whatwg.org/#null-body-status\n\tnew Response(\n\t\t[101, 204, 205, 304].includes(response.status) ? null : response.body,\n\t\tresponse\n\t);\n", "/**\n * Tokenizer results.\n */\ninterface LexToken {\n  type:\n    | \"OPEN\"\n    | \"CLOSE\"\n    | \"PATTERN\"\n    | \"NAME\"\n    | \"CHAR\"\n    | \"ESCAPED_CHAR\"\n    | \"MODIFIER\"\n    | \"END\";\n  index: number;\n  value: string;\n}\n\n/**\n * Tokenize input string.\n */\nfunction lexer(str: string): LexToken[] {\n  const tokens: LexToken[] = [];\n  let i = 0;\n\n  while (i < str.length) {\n    const char = str[i];\n\n    if (char === \"*\" || char === \"+\" || char === \"?\") {\n      tokens.push({ type: \"MODIFIER\", index: i, value: str[i++] });\n      continue;\n    }\n\n    if (char === \"\\\\\") {\n      tokens.push({ type: \"ESCAPED_CHAR\", index: i++, value: str[i++] });\n      continue;\n    }\n\n    if (char === \"{\") {\n      tokens.push({ type: \"OPEN\", index: i, value: str[i++] });\n      continue;\n    }\n\n    if (char === \"}\") {\n      tokens.push({ type: \"CLOSE\", index: i, value: str[i++] });\n      continue;\n    }\n\n    if (char === \":\") {\n      let name = \"\";\n      let j = i + 1;\n\n      while (j < str.length) {\n        const code = str.charCodeAt(j);\n\n        if (\n          // `0-9`\n          (code >= 48 && code <= 57) ||\n          // `A-Z`\n          (code >= 65 && code <= 90) ||\n          // `a-z`\n          (code >= 97 && code <= 122) ||\n          // `_`\n          code === 95\n        ) {\n          name += str[j++];\n          continue;\n        }\n\n        break;\n      }\n\n      if (!name) throw new TypeError(`Missing parameter name at ${i}`);\n\n      tokens.push({ type: \"NAME\", index: i, value: name });\n      i = j;\n      continue;\n    }\n\n    if (char === \"(\") {\n      let count = 1;\n      let pattern = \"\";\n      let j = i + 1;\n\n      if (str[j] === \"?\") {\n        throw new TypeError(`Pattern cannot start with \"?\" at ${j}`);\n      }\n\n      while (j < str.length) {\n        if (str[j] === \"\\\\\") {\n          pattern += str[j++] + str[j++];\n          continue;\n        }\n\n        if (str[j] === \")\") {\n          count--;\n          if (count === 0) {\n            j++;\n            break;\n          }\n        } else if (str[j] === \"(\") {\n          count++;\n          if (str[j + 1] !== \"?\") {\n            throw new TypeError(`Capturing groups are not allowed at ${j}`);\n          }\n        }\n\n        pattern += str[j++];\n      }\n\n      if (count) throw new TypeError(`Unbalanced pattern at ${i}`);\n      if (!pattern) throw new TypeError(`Missing pattern at ${i}`);\n\n      tokens.push({ type: \"PATTERN\", index: i, value: pattern });\n      i = j;\n      continue;\n    }\n\n    tokens.push({ type: \"CHAR\", index: i, value: str[i++] });\n  }\n\n  tokens.push({ type: \"END\", index: i, value: \"\" });\n\n  return tokens;\n}\n\nexport interface ParseOptions {\n  /**\n   * Set the default delimiter for repeat parameters. (default: `'/'`)\n   */\n  delimiter?: string;\n  /**\n   * List of characters to automatically consider prefixes when parsing.\n   */\n  prefixes?: string;\n}\n\n/**\n * Parse a string for the raw tokens.\n */\nexport function parse(str: string, options: ParseOptions = {}): Token[] {\n  const tokens = lexer(str);\n  const { prefixes = \"./\", delimiter = \"/#?\" } = options;\n  const result: Token[] = [];\n  let key = 0;\n  let i = 0;\n  let path = \"\";\n\n  const tryConsume = (type: LexToken[\"type\"]): string | undefined => {\n    if (i < tokens.length && tokens[i].type === type) return tokens[i++].value;\n  };\n\n  const mustConsume = (type: LexToken[\"type\"]): string => {\n    const value = tryConsume(type);\n    if (value !== undefined) return value;\n    const { type: nextType, index } = tokens[i];\n    throw new TypeError(`Unexpected ${nextType} at ${index}, expected ${type}`);\n  };\n\n  const consumeText = (): string => {\n    let result = \"\";\n    let value: string | undefined;\n    while ((value = tryConsume(\"CHAR\") || tryConsume(\"ESCAPED_CHAR\"))) {\n      result += value;\n    }\n    return result;\n  };\n\n  const isSafe = (value: string): boolean => {\n    for (const char of delimiter) if (value.indexOf(char) > -1) return true;\n    return false;\n  };\n\n  const safePattern = (prefix: string) => {\n    const prev = result[result.length - 1];\n    const prevText = prefix || (prev && typeof prev === \"string\" ? prev : \"\");\n\n    if (prev && !prevText) {\n      throw new TypeError(\n        `Must have text between two parameters, missing text after \"${(prev as Key).name}\"`,\n      );\n    }\n\n    if (!prevText || isSafe(prevText)) return `[^${escapeString(delimiter)}]+?`;\n    return `(?:(?!${escapeString(prevText)})[^${escapeString(delimiter)}])+?`;\n  };\n\n  while (i < tokens.length) {\n    const char = tryConsume(\"CHAR\");\n    const name = tryConsume(\"NAME\");\n    const pattern = tryConsume(\"PATTERN\");\n\n    if (name || pattern) {\n      let prefix = char || \"\";\n\n      if (prefixes.indexOf(prefix) === -1) {\n        path += prefix;\n        prefix = \"\";\n      }\n\n      if (path) {\n        result.push(path);\n        path = \"\";\n      }\n\n      result.push({\n        name: name || key++,\n        prefix,\n        suffix: \"\",\n        pattern: pattern || safePattern(prefix),\n        modifier: tryConsume(\"MODIFIER\") || \"\",\n      });\n      continue;\n    }\n\n    const value = char || tryConsume(\"ESCAPED_CHAR\");\n    if (value) {\n      path += value;\n      continue;\n    }\n\n    if (path) {\n      result.push(path);\n      path = \"\";\n    }\n\n    const open = tryConsume(\"OPEN\");\n    if (open) {\n      const prefix = consumeText();\n      const name = tryConsume(\"NAME\") || \"\";\n      const pattern = tryConsume(\"PATTERN\") || \"\";\n      const suffix = consumeText();\n\n      mustConsume(\"CLOSE\");\n\n      result.push({\n        name: name || (pattern ? key++ : \"\"),\n        pattern: name && !pattern ? safePattern(prefix) : pattern,\n        prefix,\n        suffix,\n        modifier: tryConsume(\"MODIFIER\") || \"\",\n      });\n      continue;\n    }\n\n    mustConsume(\"END\");\n  }\n\n  return result;\n}\n\nexport interface TokensToFunctionOptions {\n  /**\n   * When `true` the regexp will be case sensitive. (default: `false`)\n   */\n  sensitive?: boolean;\n  /**\n   * Function for encoding input strings for output.\n   */\n  encode?: (value: string, token: Key) => string;\n  /**\n   * When `false` the function can produce an invalid (unmatched) path. (default: `true`)\n   */\n  validate?: boolean;\n}\n\n/**\n * Compile a string to a template function for the path.\n */\nexport function compile<P extends object = object>(\n  str: string,\n  options?: ParseOptions & TokensToFunctionOptions,\n) {\n  return tokensToFunction<P>(parse(str, options), options);\n}\n\nexport type PathFunction<P extends object = object> = (data?: P) => string;\n\n/**\n * Expose a method for transforming tokens into the path function.\n */\nexport function tokensToFunction<P extends object = object>(\n  tokens: Token[],\n  options: TokensToFunctionOptions = {},\n): PathFunction<P> {\n  const reFlags = flags(options);\n  const { encode = (x: string) => x, validate = true } = options;\n\n  // Compile all the tokens into regexps.\n  const matches = tokens.map((token) => {\n    if (typeof token === \"object\") {\n      return new RegExp(`^(?:${token.pattern})$`, reFlags);\n    }\n  });\n\n  return (data: Record<string, any> | null | undefined) => {\n    let path = \"\";\n\n    for (let i = 0; i < tokens.length; i++) {\n      const token = tokens[i];\n\n      if (typeof token === \"string\") {\n        path += token;\n        continue;\n      }\n\n      const value = data ? data[token.name] : undefined;\n      const optional = token.modifier === \"?\" || token.modifier === \"*\";\n      const repeat = token.modifier === \"*\" || token.modifier === \"+\";\n\n      if (Array.isArray(value)) {\n        if (!repeat) {\n          throw new TypeError(\n            `Expected \"${token.name}\" to not repeat, but got an array`,\n          );\n        }\n\n        if (value.length === 0) {\n          if (optional) continue;\n\n          throw new TypeError(`Expected \"${token.name}\" to not be empty`);\n        }\n\n        for (let j = 0; j < value.length; j++) {\n          const segment = encode(value[j], token);\n\n          if (validate && !(matches[i] as RegExp).test(segment)) {\n            throw new TypeError(\n              `Expected all \"${token.name}\" to match \"${token.pattern}\", but got \"${segment}\"`,\n            );\n          }\n\n          path += token.prefix + segment + token.suffix;\n        }\n\n        continue;\n      }\n\n      if (typeof value === \"string\" || typeof value === \"number\") {\n        const segment = encode(String(value), token);\n\n        if (validate && !(matches[i] as RegExp).test(segment)) {\n          throw new TypeError(\n            `Expected \"${token.name}\" to match \"${token.pattern}\", but got \"${segment}\"`,\n          );\n        }\n\n        path += token.prefix + segment + token.suffix;\n        continue;\n      }\n\n      if (optional) continue;\n\n      const typeOfMessage = repeat ? \"an array\" : \"a string\";\n      throw new TypeError(`Expected \"${token.name}\" to be ${typeOfMessage}`);\n    }\n\n    return path;\n  };\n}\n\nexport interface RegexpToFunctionOptions {\n  /**\n   * Function for decoding strings for params.\n   */\n  decode?: (value: string, token: Key) => string;\n}\n\n/**\n * A match result contains data about the path match.\n */\nexport interface MatchResult<P extends object = object> {\n  path: string;\n  index: number;\n  params: P;\n}\n\n/**\n * A match is either `false` (no match) or a match result.\n */\nexport type Match<P extends object = object> = false | MatchResult<P>;\n\n/**\n * The match function takes a string and returns whether it matched the path.\n */\nexport type MatchFunction<P extends object = object> = (\n  path: string,\n) => Match<P>;\n\n/**\n * Create path match function from `path-to-regexp` spec.\n */\nexport function match<P extends object = object>(\n  str: Path,\n  options?: ParseOptions & TokensToRegexpOptions & RegexpToFunctionOptions,\n) {\n  const keys: Key[] = [];\n  const re = pathToRegexp(str, keys, options);\n  return regexpToFunction<P>(re, keys, options);\n}\n\n/**\n * Create a path match function from `path-to-regexp` output.\n */\nexport function regexpToFunction<P extends object = object>(\n  re: RegExp,\n  keys: Key[],\n  options: RegexpToFunctionOptions = {},\n): MatchFunction<P> {\n  const { decode = (x: string) => x } = options;\n\n  return function (pathname: string) {\n    const m = re.exec(pathname);\n    if (!m) return false;\n\n    const { 0: path, index } = m;\n    const params = Object.create(null);\n\n    for (let i = 1; i < m.length; i++) {\n      if (m[i] === undefined) continue;\n\n      const key = keys[i - 1];\n\n      if (key.modifier === \"*\" || key.modifier === \"+\") {\n        params[key.name] = m[i].split(key.prefix + key.suffix).map((value) => {\n          return decode(value, key);\n        });\n      } else {\n        params[key.name] = decode(m[i], key);\n      }\n    }\n\n    return { path, index, params };\n  };\n}\n\n/**\n * Escape a regular expression string.\n */\nfunction escapeString(str: string) {\n  return str.replace(/([.+*?=^!:${}()[\\]|/\\\\])/g, \"\\\\$1\");\n}\n\n/**\n * Get the flags for a regexp from the options.\n */\nfunction flags(options?: { sensitive?: boolean }) {\n  return options && options.sensitive ? \"\" : \"i\";\n}\n\n/**\n * Metadata about a key.\n */\nexport interface Key {\n  name: string | number;\n  prefix: string;\n  suffix: string;\n  pattern: string;\n  modifier: string;\n}\n\n/**\n * A token is a string (nothing special) or key metadata (capture group).\n */\nexport type Token = string | Key;\n\n/**\n * Pull out keys from a regexp.\n */\nfunction regexpToRegexp(path: RegExp, keys?: Key[]): RegExp {\n  if (!keys) return path;\n\n  const groupsRegex = /\\((?:\\?<(.*?)>)?(?!\\?)/g;\n\n  let index = 0;\n  let execResult = groupsRegex.exec(path.source);\n  while (execResult) {\n    keys.push({\n      // Use parenthesized substring match if available, index otherwise\n      name: execResult[1] || index++,\n      prefix: \"\",\n      suffix: \"\",\n      modifier: \"\",\n      pattern: \"\",\n    });\n    execResult = groupsRegex.exec(path.source);\n  }\n\n  return path;\n}\n\n/**\n * Transform an array into a regexp.\n */\nfunction arrayToRegexp(\n  paths: Array<string | RegExp>,\n  keys?: Key[],\n  options?: TokensToRegexpOptions & ParseOptions,\n): RegExp {\n  const parts = paths.map((path) => pathToRegexp(path, keys, options).source);\n  return new RegExp(`(?:${parts.join(\"|\")})`, flags(options));\n}\n\n/**\n * Create a path regexp from string input.\n */\nfunction stringToRegexp(\n  path: string,\n  keys?: Key[],\n  options?: TokensToRegexpOptions & ParseOptions,\n) {\n  return tokensToRegexp(parse(path, options), keys, options);\n}\n\nexport interface TokensToRegexpOptions {\n  /**\n   * When `true` the regexp will be case sensitive. (default: `false`)\n   */\n  sensitive?: boolean;\n  /**\n   * When `true` the regexp won't allow an optional trailing delimiter to match. (default: `false`)\n   */\n  strict?: boolean;\n  /**\n   * When `true` the regexp will match to the end of the string. (default: `true`)\n   */\n  end?: boolean;\n  /**\n   * When `true` the regexp will match from the beginning of the string. (default: `true`)\n   */\n  start?: boolean;\n  /**\n   * Sets the final character for non-ending optimistic matches. (default: `/`)\n   */\n  delimiter?: string;\n  /**\n   * List of characters that can also be \"end\" characters.\n   */\n  endsWith?: string;\n  /**\n   * Encode path tokens for use in the `RegExp`.\n   */\n  encode?: (value: string) => string;\n}\n\n/**\n * Expose a function for taking tokens and returning a RegExp.\n */\nexport function tokensToRegexp(\n  tokens: Token[],\n  keys?: Key[],\n  options: TokensToRegexpOptions = {},\n) {\n  const {\n    strict = false,\n    start = true,\n    end = true,\n    encode = (x: string) => x,\n    delimiter = \"/#?\",\n    endsWith = \"\",\n  } = options;\n  const endsWithRe = `[${escapeString(endsWith)}]|$`;\n  const delimiterRe = `[${escapeString(delimiter)}]`;\n  let route = start ? \"^\" : \"\";\n\n  // Iterate over the tokens and create our regexp string.\n  for (const token of tokens) {\n    if (typeof token === \"string\") {\n      route += escapeString(encode(token));\n    } else {\n      const prefix = escapeString(encode(token.prefix));\n      const suffix = escapeString(encode(token.suffix));\n\n      if (token.pattern) {\n        if (keys) keys.push(token);\n\n        if (prefix || suffix) {\n          if (token.modifier === \"+\" || token.modifier === \"*\") {\n            const mod = token.modifier === \"*\" ? \"?\" : \"\";\n            route += `(?:${prefix}((?:${token.pattern})(?:${suffix}${prefix}(?:${token.pattern}))*)${suffix})${mod}`;\n          } else {\n            route += `(?:${prefix}(${token.pattern})${suffix})${token.modifier}`;\n          }\n        } else {\n          if (token.modifier === \"+\" || token.modifier === \"*\") {\n            throw new TypeError(\n              `Can not repeat \"${token.name}\" without a prefix and suffix`,\n            );\n          }\n\n          route += `(${token.pattern})${token.modifier}`;\n        }\n      } else {\n        route += `(?:${prefix}${suffix})${token.modifier}`;\n      }\n    }\n  }\n\n  if (end) {\n    if (!strict) route += `${delimiterRe}?`;\n\n    route += !options.endsWith ? \"$\" : `(?=${endsWithRe})`;\n  } else {\n    const endToken = tokens[tokens.length - 1];\n    const isEndDelimited =\n      typeof endToken === \"string\"\n        ? delimiterRe.indexOf(endToken[endToken.length - 1]) > -1\n        : endToken === undefined;\n\n    if (!strict) {\n      route += `(?:${delimiterRe}(?=${endsWithRe}))?`;\n    }\n\n    if (!isEndDelimited) {\n      route += `(?=${delimiterRe}|${endsWithRe})`;\n    }\n  }\n\n  return new RegExp(route, flags(options));\n}\n\n/**\n * Supported `path-to-regexp` input types.\n */\nexport type Path = string | RegExp | Array<string | RegExp>;\n\n/**\n * Normalize the given path string, returning a regular expression.\n *\n * An empty array can be passed in for the keys, which will hold the\n * placeholder key descriptions. For example, using `/user/:id`, `keys` will\n * contain `[{ name: 'id', delimiter: '/', optional: false, repeat: false }]`.\n */\nexport function pathToRegexp(\n  path: Path,\n  keys?: Key[],\n  options?: TokensToRegexpOptions & ParseOptions,\n) {\n  if (path instanceof RegExp) return regexpToRegexp(path, keys);\n  if (Array.isArray(path)) return arrayToRegexp(path, keys, options);\n  return stringToRegexp(path, keys, options);\n}\n", "import type { Middleware } from \"./common\";\n\nconst drainBody: Middleware = async (request, env, _ctx, middlewareCtx) => {\n\ttry {\n\t\treturn await middlewareCtx.next(request, env);\n\t} finally {\n\t\ttry {\n\t\t\tif (request.body !== null && !request.bodyUsed) {\n\t\t\t\tconst reader = request.body.getReader();\n\t\t\t\twhile (!(await reader.read()).done) {}\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tconsole.error(\"Failed to drain the unused request body.\", e);\n\t\t}\n\t}\n};\n\nexport default drainBody;\n", "import type { Middleware } from \"./common\";\n\ninterface JsonError {\n\tmessage?: string;\n\tname?: string;\n\tstack?: string;\n\tcause?: JsonError;\n}\n\nfunction reduceError(e: any): JsonError {\n\treturn {\n\t\tname: e?.name,\n\t\tmessage: e?.message ?? String(e),\n\t\tstack: e?.stack,\n\t\tcause: e?.cause === undefined ? undefined : reduceError(e.cause),\n\t};\n}\n\n// See comment in `bundle.ts` for details on why this is needed\nconst jsonError: Middleware = async (request, env, _ctx, middlewareCtx) => {\n\ttry {\n\t\treturn await middlewareCtx.next(request, env);\n\t} catch (e: any) {\n\t\tconst error = reduceError(e);\n\t\treturn Response.json(error, {\n\t\t\tstatus: 500,\n\t\t\theaders: { \"MF-Experimental-Error-Stack\": \"true\" },\n\t\t});\n\t}\n};\n\nexport default jsonError;\n", "export type Awaitable<T> = T | Promise<T>;\n// TODO: allow dispatching more events?\nexport type Dispatcher = (\n\ttype: \"scheduled\",\n\tinit: { cron?: string }\n) => Awaitable<void>;\n\nexport type IncomingRequest = Request<\n\tunknown,\n\tIncomingRequestCfProperties<unknown>\n>;\n\nexport interface MiddlewareContext {\n\tdispatch: Dispatcher;\n\tnext(request: IncomingRequest, env: any): Awaitable<Response>;\n}\n\nexport type Middleware = (\n\trequest: IncomingRequest,\n\tenv: any,\n\tctx: ExecutionContext,\n\tmiddlewareCtx: MiddlewareContext\n) => Awaitable<Response>;\n\nconst __facade_middleware__: Middleware[] = [];\n\n// The register functions allow for the insertion of one or many middleware,\n// We register internal middleware first in the stack, but have no way of controlling\n// the order that addMiddleware is run in service workers so need an internal function.\nexport function __facade_register__(...args: (Middleware | Middleware[])[]) {\n\t__facade_middleware__.push(...args.flat());\n}\nexport function __facade_registerInternal__(\n\t...args: (Middleware | Middleware[])[]\n) {\n\t__facade_middleware__.unshift(...args.flat());\n}\n\nfunction __facade_invokeChain__(\n\trequest: IncomingRequest,\n\tenv: any,\n\tctx: ExecutionContext,\n\tdispatch: Dispatcher,\n\tmiddlewareChain: Middleware[]\n): Awaitable<Response> {\n\tconst [head, ...tail] = middlewareChain;\n\tconst middlewareCtx: MiddlewareContext = {\n\t\tdispatch,\n\t\tnext(newRequest, newEnv) {\n\t\t\treturn __facade_invokeChain__(newRequest, newEnv, ctx, dispatch, tail);\n\t\t},\n\t};\n\treturn head(request, env, ctx, middlewareCtx);\n}\n\nexport function __facade_invoke__(\n\trequest: IncomingRequest,\n\tenv: any,\n\tctx: ExecutionContext,\n\tdispatch: Dispatcher,\n\tfinalMiddleware: Middleware\n): Awaitable<Response> {\n\treturn __facade_invokeChain__(request, env, ctx, dispatch, [\n\t\t...__facade_middleware__,\n\t\tfinalMiddleware,\n\t]);\n}\n"],
  "mappings": "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Y;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAAY;AAAA,MAC5D;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A,UACxC,aAAa;AAAA,UACb;AAAA,UACA;AAAA,UACA,UAAU,YAAY;AAAA,UACtB,UAAU,YAAY;AAAA,UACtB,QAAQ;AAAA,UACR,gBAAgB;AAAA,UAChB,eAAe,qBAAqB;AAAA,QACtC,CAAC;AAED,eAAOA,OAAK,EAAE,SAAS,MAAM,OAAO,CAAC;AAAA,MACvC,SAAS,GAAG;AACV,gBAAQ,MAAM,4BAA4B,CAAC;AAC3C,cAAM,UAAU,aAAa,QAAQ,EAAE,UAAU;AACjD,eAAOA,OAAK,EAAE,SAAS,OAAO,QAAQ,GAAG,GAAG;AAAA,MAC9C;AAAA,IACF,GAtE6B;AAAA;AAAA;;;AChG7B,IAAaM;AAAb;AAAA;AAAA;AAAA;AAAO,IAAMA,iBAAe,mCAAY;AACtC,aAAO,IAAI,SAAS,KAAK,UAAU;AAAA,QACjC,QAAQ;AAAA,QACR,WAAW,KAAK,IAAI;AAAA,QACpB,SAAS;AAAA,MACX,CAAC,GAAG;AAAA,QACF,SAAS;AAAA,UACP,gBAAgB;AAAA,UAChB,+BAA+B;AAAA,QACjC;AAAA,MACF,CAAC;AAAA,IACH,GAX4B;AAAA;AAAA;;;ACA5B,IAiKa;AAjKb;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA,IAAAC;AACA,IAAAA;AACA,IAAAA;AACA,IAAAA;AACA;AACA;AACA;AACA,IAAAA;AACA,IAAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAAC;AACA,IAAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAAC;AACA,IAAAA;AACA;AACA;AACA,IAAAC;AACA,IAAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAC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",
  "names": ["onRequestOptions", "onRequestOptions", "onRequestGet", "onRequestPut", "onRequestDelete", "init_id", "onRequestPut", "onRequestOptions", "onRequestPut", "onRequestGet", "init_id", "json", "onRequestGet", "init_id", "onRequestGet", "onRequestOptions", "onRequestPost", "nodeCrypto", "callback", "salt", "hash", "err", "json", "onRequestPost", "onRequestGet", "onRequestOptions", "ct", "json", "onRequestPut", "onRequestOptions", "json", "onRequestGet", "onRequestGet", "onRequestOptions", "onRequestGet", "onRequestOptions", "onRequestGet", "onRequestOptions", "init_purchase_status", "onRequestGet", "onRequestOptions", "onRequestOptions", "onRequestGet", "onRequestPost", "onRequestPut", "onRequestDelete", "onRequestGet", "onRequestPut", "onRequestOptions", "defaultSettings", "onRequestGet", "onRequestPut", "onRequestOptions", "json", "onRequestGet", "onRequestOptions", "onRequestGet", "onRequestPost", "onRequestPut", "onRequestDelete", "onRequestPost", "onRequestOptions", "onRequestGet", "onRequestOptions", "onRequestGet", "onRequestPut", "onRequestOptions", "onRequestPost", "onRequestPost", "json", "onRequestPost", "onRequestGet", "onRequestGet", "onRequestOptions", "init_invoices", "onRequestPost", "onRequestOptions", "onRequestGet", "onRequestOptions", "init_orders", "onRequestGet", "onRequestPut", "onRequestOptions", "defaultSettings", "onRequestGet", "onRequestPut", "onRequestOptions", "onRequestPost", "onRequestOptions", "onRequestGet", "onRequestPut", "onRequestOptions", "onRequestGet", "onRequestOptions", "onRequestPost", "onRequestOptions", "onRequestGet", "onRequestOptions", "onRequestPost", "onRequestOptions", "onRequestGet", "onRequestPost", "onRequestGet", "onRequestOptions", "onRequestOptions", "onRequestGet", "onRequestGet", "onRequestGet", "onRequestGet", "onRequestPost", "onRequestOptions", "onRequestGet", "onRequestOptions", "init_active", "onRequestPost", "onRequestOptions", "init_login", "onRequestGet", "onRequestPut", "onRequestOptions", "onRequestPost", "onRequestOptions", "init_register", "onRequestGet", "onRequestOptions", "init_stats", "onRequestGet", "onRequestGet", "onRequestGet", "onRequestOptions", "onRequestGet", "onRequestOptions", "json", "onRequestGet", "onRequestOptions", "init_invoices", "json", "onRequestGet", "onRequestOptions", "init_orders", "onRequestPost", "onRequestOptions", "onRequestGet", "onRequestOptions", "onRequestGet", "onRequestOptions", "init_pricing", "onRequestGet", "onRequestOptions", "onRequestPost", "init_orderId", "json", "onRequestPatch", "onRequestPut", "onRequestDelete", "onRequestOptions", "init_id", "onRequestGet", "onRequestOptions", "init_auth_settings", "onRequestPost", "onRequestOptions", "json", "onRequestPost", "onRequestOptions", "onRequestPost", "onRequestOptions", "json", "onRequestPost", "onRequestGet", "onRequestOptions", "onRequestGet", "onRequestOptions", "json", "onRequestGet", "onRequestPut", "onRequestOptions", "json", "onRequestGet", "init_invoices", "json", "onRequestGet", "json", "onRequestGet", "onRequestOptions", "json", "onRequestPost", "onRequestOptions", "onRequestPost", "onRequestOptions", "json", "onRequestPost", "json", "onRequestOptions", "onRequestGet", "onRequestPost", "init_tickets", "url", "onRequestGet", "init_id", "init_purchase_status", "init_invoices", "init_orders", "init_active", "init_login", "init_register", "init_stats", "init_pricing", "init_orderId", "init_auth_settings", "init_tickets", "onRequestOptions", "onRequestDelete", "onRequestGet", "onRequestPut", "onRequestPost", "onRequestPatch", "value", "_a", "result", "char", "prefix", "i"]
}
