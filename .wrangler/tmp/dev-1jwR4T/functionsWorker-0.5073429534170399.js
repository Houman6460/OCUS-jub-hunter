var __defProp = Object.defineProperty;
var __name = (target, value) => __defProp(target, "name", { value, configurable: true });

// .wrangler/tmp/pages-UCTxDL/functionsWorker-0.5073429534170399.mjs
var __create = Object.create;
var __defProp2 = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getProtoOf = Object.getPrototypeOf;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __name2 = /* @__PURE__ */ __name((target, value) => __defProp2(target, "name", { value, configurable: true }), "__name");
var __esm = /* @__PURE__ */ __name((fn, res) => /* @__PURE__ */ __name(function __init() {
  return fn && (res = (0, fn[__getOwnPropNames(fn)[0]])(fn = 0)), res;
}, "__init"), "__esm");
var __commonJS = /* @__PURE__ */ __name((cb, mod) => /* @__PURE__ */ __name(function __require() {
  return mod || (0, cb[__getOwnPropNames(cb)[0]])((mod = { exports: {} }).exports, mod), mod.exports;
}, "__require"), "__commonJS");
var __export = /* @__PURE__ */ __name((target, all) => {
  for (var name in all)
    __defProp2(target, name, { get: all[name], enumerable: true });
}, "__export");
var __copyProps = /* @__PURE__ */ __name((to, from, except2, desc2) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except2)
        __defProp2(to, key, { get: /* @__PURE__ */ __name(() => from[key], "get"), enumerable: !(desc2 = __getOwnPropDesc(from, key)) || desc2.enumerable });
  }
  return to;
}, "__copyProps");
var __toESM = /* @__PURE__ */ __name((mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(
  // If the importer is in node compatibility mode or this is not an ESM
  // file that has been converted to a CommonJS file using a Babel-
  // compatible transform (i.e. "__esModule" has not been set), then set
  // "default" to the CommonJS "module.exports" for node compatibility.
  isNodeMode || !mod || !mod.__esModule ? __defProp2(target, "default", { value: mod, enumerable: true }) : target,
  mod
)), "__toESM");
var settings_storage_exports = {};
__export(settings_storage_exports, {
  SettingsStorage: /* @__PURE__ */ __name(() => SettingsStorage, "SettingsStorage")
});
var SettingsStorage;
var init_settings_storage = __esm({
  "lib/settings-storage.ts"() {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    SettingsStorage = class {
      static {
        __name(this, "SettingsStorage");
      }
      static {
        __name2(this, "SettingsStorage");
      }
      db;
      constructor(database) {
        this.db = database;
      }
      async initializeSettings() {
        try {
          const result = await this.db.prepare(`
        CREATE TABLE IF NOT EXISTS settings (
          key TEXT PRIMARY KEY,
          value TEXT NOT NULL,
          updated_at DATETIME DEFAULT CURRENT_TIMESTAMP
        )
      `).run();
          console.log("Settings table initialized:", result);
        } catch (error) {
          console.error("Failed to initialize settings table:", error);
          throw error;
        }
      }
      async getSetting(key) {
        try {
          const result = await this.db.prepare(
            "SELECT value FROM settings WHERE key = ?"
          ).bind(key).first();
          return result ? result.value : null;
        } catch (error) {
          console.error("Failed to get setting:", error);
          return null;
        }
      }
      async setSetting(key, value) {
        try {
          console.log(`Setting ${key} with value length:`, value.length);
          const result = await this.db.prepare(
            "INSERT OR REPLACE INTO settings (key, value, updated_at) VALUES (?, ?, CURRENT_TIMESTAMP)"
          ).bind(key, value).run();
          console.log(`Successfully set ${key}, result:`, result);
        } catch (error) {
          console.error(`Failed to set setting ${key}:`, error);
          throw error;
        }
      }
      async getChatSettings() {
        try {
          const openaiApiKey = await this.getSetting("openai_api_key");
          const assistantId = await this.getSetting("openai_assistant_id");
          const chatModel = await this.getSetting("chat_model") || "gpt-4o-mini";
          const enabled = await this.getSetting("chat_enabled") || "true";
          return {
            openaiApiKey: openaiApiKey ? "***hidden***" : "",
            assistantId: assistantId || "",
            chatModel,
            enabled: enabled === "true"
          };
        } catch (error) {
          console.error("Failed to get chat settings:", error);
          return {
            openaiApiKey: "",
            assistantId: "",
            chatModel: "gpt-4o-mini",
            enabled: true
          };
        }
      }
      async setChatSettings(settings3) {
        try {
          if (settings3.openaiApiKey && settings3.openaiApiKey !== "***hidden***") {
            await this.setSetting("openai_api_key", settings3.openaiApiKey);
          }
          if (settings3.assistantId !== void 0) {
            await this.setSetting("openai_assistant_id", settings3.assistantId || "");
          }
          if (settings3.chatModel) {
            await this.setSetting("chat_model", settings3.chatModel);
          }
          if (settings3.enabled !== void 0) {
            await this.setSetting("chat_enabled", settings3.enabled.toString());
          }
        } catch (error) {
          console.error("Failed to set chat settings:", error);
          console.error("Settings object:", settings3);
          const message = error instanceof Error ? error.message : String(error);
          throw new Error(`Settings storage error: ${message}`);
        }
      }
      async getOpenAIApiKey() {
        return await this.getSetting("openai_api_key");
      }
    };
  }
});
var TranslationService;
var init_translation_service = __esm({
  "lib/translation-service.ts"() {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    TranslationService = class {
      static {
        __name(this, "TranslationService");
      }
      static {
        __name2(this, "TranslationService");
      }
      static supportedLanguages = {
        en: "English",
        de: "German",
        fr: "French",
        es: "Spanish",
        it: "Italian",
        pt: "Portuguese",
        nl: "Dutch",
        da: "Danish",
        no: "Norwegian",
        fi: "Finnish",
        tr: "Turkish",
        pl: "Polish",
        ru: "Russian"
      };
      static async translateBadgeText(text3, targetLanguages, openaiApiKey) {
        if (!openaiApiKey) {
          console.warn("OpenAI API key not provided - returning empty translation map");
          return {};
        }
        const validLanguages = targetLanguages.filter(
          (lang) => lang in this.supportedLanguages && lang !== "en"
        );
        if (validLanguages.length === 0) {
          return {};
        }
        const languageNames = validLanguages.map(
          (code) => `${code}: ${this.supportedLanguages[code]}`
        ).join(", ");
        const prompt = `Translate the following announcement badge text into multiple languages.

Original text (English): "${text3}"
Context: Announcement badge for a Chrome extension product website
Target languages: ${languageNames}
Tone: Marketing/promotional tone

Requirements:
- Maintain the marketing/promotional tone
- Keep the same emotional impact as the original
- Adapt cultural nuances appropriately for each target market
- Keep translations concise and impactful for badge display
- Ensure translations sound natural to native speakers

Respond with a JSON object where keys are language codes (${validLanguages.join(", ")}) and values are the translated text.

Example format:
{
  "de": "German translation here",
  "fr": "French translation here"
}`;
        try {
          const response = await fetch("https://api.openai.com/v1/chat/completions", {
            method: "POST",
            headers: {
              "Authorization": `Bearer ${openaiApiKey}`,
              "Content-Type": "application/json"
            },
            body: JSON.stringify({
              model: "gpt-4o",
              messages: [
                {
                  role: "system",
                  content: "You are a professional translator specializing in marketing and e-commerce content. Provide accurate, culturally appropriate translations that maintain the marketing impact of the original text."
                },
                {
                  role: "user",
                  content: prompt
                }
              ],
              response_format: { type: "json_object" },
              temperature: 0.3,
              max_tokens: 1e3
            })
          });
          if (!response.ok) {
            throw new Error(`OpenAI API error: ${response.status} ${response.statusText}`);
          }
          const data = await response.json();
          const translationText = data.choices[0]?.message?.content;
          if (!translationText) {
            throw new Error("No translation received from OpenAI");
          }
          const translations = JSON.parse(translationText);
          const result = {};
          for (const lang of validLanguages) {
            if (translations[lang] && typeof translations[lang] === "string") {
              result[lang] = translations[lang].trim();
            }
          }
          return result;
        } catch (error) {
          console.error("Translation service error:", error);
          throw new Error(`Translation failed: ${error instanceof Error ? error.message : "Unknown error"}`);
        }
      }
      static getSupportedLanguages() {
        return this.supportedLanguages;
      }
    };
  }
});
var onRequestOptions;
var onRequestPost;
var init_translate = __esm({
  "api/admin/announcement-badges/translate.ts"() {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    init_settings_storage();
    init_translation_service();
    onRequestOptions = /* @__PURE__ */ __name2(async () => {
      return new Response(null, {
        status: 200,
        headers: {
          "Access-Control-Allow-Origin": "*",
          "Access-Control-Allow-Methods": "POST, OPTIONS",
          "Access-Control-Allow-Headers": "Content-Type, Authorization"
        }
      });
    }, "onRequestOptions");
    onRequestPost = /* @__PURE__ */ __name2(async (context) => {
      try {
        const requestData = await context.request.json();
        const { textEn, targetLanguages } = requestData;
        if (!textEn || !targetLanguages || !Array.isArray(targetLanguages)) {
          return new Response(JSON.stringify({
            error: "textEn and targetLanguages array are required"
          }), {
            status: 400,
            headers: {
              "Content-Type": "application/json",
              "Access-Control-Allow-Origin": "*"
            }
          });
        }
        let openaiApiKey = context.env.OPENAI_API_KEY;
        if (!openaiApiKey) {
          const settingsStorage = new SettingsStorage(context.env.DB);
          const apiKeySetting = await settingsStorage.getSetting("openai_api_key");
          openaiApiKey = apiKeySetting;
        }
        if (!openaiApiKey) {
          return new Response(JSON.stringify({
            error: "OpenAI API key not configured"
          }), {
            status: 500,
            headers: {
              "Content-Type": "application/json",
              "Access-Control-Allow-Origin": "*"
            }
          });
        }
        console.log("Translating badge text:", textEn, "to languages:", targetLanguages);
        const translations = await TranslationService.translateBadgeText(
          textEn,
          targetLanguages,
          openaiApiKey
        );
        console.log("Translation results:", translations);
        return new Response(JSON.stringify(translations), {
          status: 200,
          headers: {
            "Content-Type": "application/json",
            "Access-Control-Allow-Origin": "*"
          }
        });
      } catch (error) {
        console.error("Error translating badge text:", error);
        return new Response(JSON.stringify({
          error: "Failed to translate badge text",
          details: error instanceof Error ? error.message : "Unknown error"
        }), {
          status: 500,
          headers: {
            "Content-Type": "application/json",
            "Access-Control-Allow-Origin": "*"
          }
        });
      }
    }, "onRequestPost");
  }
});
function json(data, status = 200) {
  return new Response(JSON.stringify(data), {
    status,
    headers: {
      "Content-Type": "application/json",
      "Access-Control-Allow-Origin": "*",
      "Access-Control-Allow-Methods": "GET, OPTIONS",
      "Access-Control-Allow-Headers": "Content-Type, Authorization"
    }
  });
}
__name(json, "json");
var onRequestGet;
var init_list = __esm({
  "api/invoices/admin/list.ts"() {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    __name2(json, "json");
    onRequestGet = /* @__PURE__ */ __name2(async ({ env }) => {
      try {
        const { results } = await env.DB.prepare(
          "SELECT * FROM invoices ORDER BY invoiceDate DESC"
        ).all();
        if (!results) {
          return json([]);
        }
        return json(results);
      } catch (error) {
        return json({
          error: error.message
        }, 500);
      }
    }, "onRequestGet");
  }
});
var onRequestOptions2;
var onRequestGet2;
var onRequestPut;
var onRequestDelete;
var init_id = __esm({
  "api/admin/announcement-badges/[id].ts"() {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    init_settings_storage();
    onRequestOptions2 = /* @__PURE__ */ __name2(async () => {
      return new Response(null, {
        status: 200,
        headers: {
          "Access-Control-Allow-Origin": "*",
          "Access-Control-Allow-Methods": "GET, PUT, DELETE, OPTIONS",
          "Access-Control-Allow-Headers": "Content-Type, Authorization"
        }
      });
    }, "onRequestOptions");
    onRequestGet2 = /* @__PURE__ */ __name2(async (context) => {
      try {
        const settingsStorage = new SettingsStorage(context.env.DB);
        const badgeId = context.params.id;
        if (!badgeId) {
          return new Response(JSON.stringify({ error: "Badge ID is required" }), {
            status: 400,
            headers: {
              "Content-Type": "application/json",
              "Access-Control-Allow-Origin": "*"
            }
          });
        }
        const badgesData = await settingsStorage.getSetting("announcement_badges");
        const badges = badgesData ? JSON.parse(badgesData) : [];
        const badge = badges.find((b2) => b2.id === badgeId);
        if (!badge) {
          return new Response(JSON.stringify({ error: "Badge not found" }), {
            status: 404,
            headers: {
              "Content-Type": "application/json",
              "Access-Control-Allow-Origin": "*"
            }
          });
        }
        return new Response(JSON.stringify(badge), {
          status: 200,
          headers: {
            "Content-Type": "application/json",
            "Access-Control-Allow-Origin": "*"
          }
        });
      } catch (error) {
        console.error("Error fetching announcement badge:", error);
        return new Response(JSON.stringify({
          error: "Failed to fetch announcement badge",
          details: error instanceof Error ? error.message : "Unknown error"
        }), {
          status: 500,
          headers: {
            "Content-Type": "application/json",
            "Access-Control-Allow-Origin": "*"
          }
        });
      }
    }, "onRequestGet");
    onRequestPut = /* @__PURE__ */ __name2(async (context) => {
      try {
        const settingsStorage = new SettingsStorage(context.env.DB);
        const badgeId = context.params.id;
        const requestData = await context.request.json();
        if (!badgeId) {
          return new Response(JSON.stringify({ error: "Badge ID is required" }), {
            status: 400,
            headers: {
              "Content-Type": "application/json",
              "Access-Control-Allow-Origin": "*"
            }
          });
        }
        console.log("Updating announcement badge:", badgeId, JSON.stringify(requestData, null, 2));
        const existingBadgesData = await settingsStorage.getSetting("announcement_badges");
        const existingBadges = existingBadgesData ? JSON.parse(existingBadgesData) : [];
        const badgeIndex = existingBadges.findIndex((badge) => badge.id === badgeId);
        if (badgeIndex === -1) {
          return new Response(JSON.stringify({ error: "Badge not found" }), {
            status: 404,
            headers: {
              "Content-Type": "application/json",
              "Access-Control-Allow-Origin": "*"
            }
          });
        }
        existingBadges[badgeIndex] = {
          ...existingBadges[badgeIndex],
          title: requestData.title || requestData.text || requestData.badgeText || requestData.content || requestData.message || existingBadges[badgeIndex].title,
          subtitle: requestData.subtitle || existingBadges[badgeIndex].subtitle,
          backgroundColor: requestData.backgroundColor || requestData.bgColor || requestData.background || existingBadges[badgeIndex].backgroundColor,
          textColor: requestData.textColor || requestData.color || requestData.foreground || existingBadges[badgeIndex].textColor,
          priority: requestData.priority ? parseInt(requestData.priority) : existingBadges[badgeIndex].priority,
          isActive: requestData.isActive !== void 0 ? Boolean(requestData.isActive) : requestData.enabled !== void 0 ? Boolean(requestData.enabled) : existingBadges[badgeIndex].isActive,
          updatedAt: (/* @__PURE__ */ new Date()).toISOString()
        };
        console.log("Updated badge object:", JSON.stringify(existingBadges[badgeIndex], null, 2));
        await settingsStorage.setSetting("announcement_badges", JSON.stringify(existingBadges));
        console.log("Updated announcement badge:", badgeId);
        return new Response(JSON.stringify(existingBadges[badgeIndex]), {
          status: 200,
          headers: {
            "Content-Type": "application/json",
            "Access-Control-Allow-Origin": "*"
          }
        });
      } catch (error) {
        console.error("Error updating announcement badge:", error);
        return new Response(JSON.stringify({
          error: "Failed to update announcement badge",
          details: error instanceof Error ? error.message : "Unknown error"
        }), {
          status: 500,
          headers: {
            "Content-Type": "application/json",
            "Access-Control-Allow-Origin": "*"
          }
        });
      }
    }, "onRequestPut");
    onRequestDelete = /* @__PURE__ */ __name2(async (context) => {
      try {
        const settingsStorage = new SettingsStorage(context.env.DB);
        const badgeId = context.params.id;
        if (!badgeId) {
          return new Response(JSON.stringify({ error: "Badge ID is required" }), {
            status: 400,
            headers: {
              "Content-Type": "application/json",
              "Access-Control-Allow-Origin": "*"
            }
          });
        }
        console.log("Deleting announcement badge:", badgeId);
        const existingBadgesData = await settingsStorage.getSetting("announcement_badges");
        const existingBadges = existingBadgesData ? JSON.parse(existingBadgesData) : [];
        const updatedBadges = existingBadges.filter((badge) => badge.id !== badgeId);
        if (updatedBadges.length === existingBadges.length) {
          return new Response(JSON.stringify({ error: "Badge not found" }), {
            status: 404,
            headers: {
              "Content-Type": "application/json",
              "Access-Control-Allow-Origin": "*"
            }
          });
        }
        await settingsStorage.setSetting("announcement_badges", JSON.stringify(updatedBadges));
        console.log("Deleted announcement badge:", badgeId);
        return new Response(JSON.stringify({ success: true }), {
          status: 200,
          headers: {
            "Content-Type": "application/json",
            "Access-Control-Allow-Origin": "*"
          }
        });
      } catch (error) {
        console.error("Error deleting announcement badge:", error);
        return new Response(JSON.stringify({
          error: "Failed to delete announcement badge",
          details: error instanceof Error ? error.message : "Unknown error"
        }), {
          status: 500,
          headers: {
            "Content-Type": "application/json",
            "Access-Control-Allow-Origin": "*"
          }
        });
      }
    }, "onRequestDelete");
  }
});
var onRequestOptions3;
var onRequestGet3;
var onRequestPut2;
var onRequestDelete2;
var init_id2 = __esm({
  "api/admin/countdown-banners/[id].ts"() {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    init_settings_storage();
    onRequestOptions3 = /* @__PURE__ */ __name2(async () => {
      return new Response(null, {
        status: 200,
        headers: {
          "Access-Control-Allow-Origin": "*",
          "Access-Control-Allow-Methods": "GET, PUT, DELETE, OPTIONS",
          "Access-Control-Allow-Headers": "Content-Type, Authorization"
        }
      });
    }, "onRequestOptions");
    onRequestGet3 = /* @__PURE__ */ __name2(async (context) => {
      try {
        const settingsStorage = new SettingsStorage(context.env.DB);
        const bannerId = context.params.id;
        if (!bannerId) {
          return new Response(JSON.stringify({ error: "Banner ID is required" }), {
            status: 400,
            headers: {
              "Content-Type": "application/json",
              "Access-Control-Allow-Origin": "*"
            }
          });
        }
        const bannersData = await settingsStorage.getSetting("countdown_banners");
        const banners = bannersData ? JSON.parse(bannersData) : [];
        const banner = banners.find((b2) => b2.id === bannerId);
        if (!banner) {
          return new Response(JSON.stringify({ error: "Banner not found" }), {
            status: 404,
            headers: {
              "Content-Type": "application/json",
              "Access-Control-Allow-Origin": "*"
            }
          });
        }
        return new Response(JSON.stringify(banner), {
          status: 200,
          headers: {
            "Content-Type": "application/json",
            "Access-Control-Allow-Origin": "*"
          }
        });
      } catch (error) {
        console.error("Error fetching countdown banner:", error);
        return new Response(JSON.stringify({
          error: "Failed to fetch countdown banner",
          details: error instanceof Error ? error.message : "Unknown error"
        }), {
          status: 500,
          headers: {
            "Content-Type": "application/json",
            "Access-Control-Allow-Origin": "*"
          }
        });
      }
    }, "onRequestGet");
    onRequestPut2 = /* @__PURE__ */ __name2(async (context) => {
      try {
        const settingsStorage = new SettingsStorage(context.env.DB);
        const bannerId = context.params.id;
        const requestData = await context.request.json();
        if (!bannerId) {
          return new Response(JSON.stringify({ error: "Banner ID is required" }), {
            status: 400,
            headers: {
              "Content-Type": "application/json",
              "Access-Control-Allow-Origin": "*"
            }
          });
        }
        console.log("Updating countdown banner:", bannerId, requestData);
        const existingBannersData = await settingsStorage.getSetting("countdown_banners");
        const existingBanners = existingBannersData ? JSON.parse(existingBannersData) : [];
        const bannerIndex = existingBanners.findIndex((banner) => banner.id === bannerId);
        if (bannerIndex === -1) {
          return new Response(JSON.stringify({ error: "Banner not found" }), {
            status: 404,
            headers: {
              "Content-Type": "application/json",
              "Access-Control-Allow-Origin": "*"
            }
          });
        }
        existingBanners[bannerIndex] = {
          ...existingBanners[bannerIndex],
          title: requestData.title || existingBanners[bannerIndex].title,
          subtitle: requestData.subtitle || existingBanners[bannerIndex].subtitle,
          targetPrice: requestData.targetPrice ? parseFloat(requestData.targetPrice) : existingBanners[bannerIndex].targetPrice,
          originalPrice: requestData.originalPrice ? parseFloat(requestData.originalPrice) : existingBanners[bannerIndex].originalPrice,
          endDate: requestData.endDate || existingBanners[bannerIndex].endDate,
          priority: requestData.priority ? parseInt(requestData.priority) : existingBanners[bannerIndex].priority,
          backgroundColor: requestData.backgroundColor || existingBanners[bannerIndex].backgroundColor,
          textColor: requestData.textColor || existingBanners[bannerIndex].textColor,
          isActive: requestData.isActive !== void 0 ? requestData.isActive : existingBanners[bannerIndex].isActive,
          updatedAt: (/* @__PURE__ */ new Date()).toISOString()
        };
        await settingsStorage.setSetting("countdown_banners", JSON.stringify(existingBanners));
        console.log("Updated countdown banner:", bannerId);
        return new Response(JSON.stringify(existingBanners[bannerIndex]), {
          status: 200,
          headers: {
            "Content-Type": "application/json",
            "Access-Control-Allow-Origin": "*"
          }
        });
      } catch (error) {
        console.error("Error updating countdown banner:", error);
        return new Response(JSON.stringify({
          error: "Failed to update countdown banner",
          details: error instanceof Error ? error.message : "Unknown error"
        }), {
          status: 500,
          headers: {
            "Content-Type": "application/json",
            "Access-Control-Allow-Origin": "*"
          }
        });
      }
    }, "onRequestPut");
    onRequestDelete2 = /* @__PURE__ */ __name2(async (context) => {
      try {
        const settingsStorage = new SettingsStorage(context.env.DB);
        const bannerId = context.params.id;
        if (!bannerId) {
          return new Response(JSON.stringify({ error: "Banner ID is required" }), {
            status: 400,
            headers: {
              "Content-Type": "application/json",
              "Access-Control-Allow-Origin": "*"
            }
          });
        }
        console.log("Deleting countdown banner:", bannerId);
        const existingBannersData = await settingsStorage.getSetting("countdown_banners");
        const existingBanners = existingBannersData ? JSON.parse(existingBannersData) : [];
        const updatedBanners = existingBanners.filter((banner) => banner.id !== bannerId);
        if (updatedBanners.length === existingBanners.length) {
          return new Response(JSON.stringify({ error: "Banner not found" }), {
            status: 404,
            headers: {
              "Content-Type": "application/json",
              "Access-Control-Allow-Origin": "*"
            }
          });
        }
        await settingsStorage.setSetting("countdown_banners", JSON.stringify(updatedBanners));
        console.log("Deleted countdown banner:", bannerId);
        return new Response(JSON.stringify({ success: true }), {
          status: 200,
          headers: {
            "Content-Type": "application/json",
            "Access-Control-Allow-Origin": "*"
          }
        });
      } catch (error) {
        console.error("Error deleting countdown banner:", error);
        return new Response(JSON.stringify({
          error: "Failed to delete countdown banner",
          details: error instanceof Error ? error.message : "Unknown error"
        }), {
          status: 500,
          headers: {
            "Content-Type": "application/json",
            "Access-Control-Allow-Origin": "*"
          }
        });
      }
    }, "onRequestDelete");
  }
});
var onRequestPut3;
var onRequestOptions4;
var init_feature = __esm({
  "api/admin/dashboard-features/[feature].ts"() {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    onRequestPut3 = /* @__PURE__ */ __name2(async ({ request, params }) => {
      try {
        const featureName = params.feature;
        const { isEnabled, description } = await request.json();
        return new Response(JSON.stringify({
          success: true,
          message: `Feature ${featureName} updated successfully`,
          feature: {
            id: featureName,
            name: featureName.replace("-", " ").replace(/\b\w/g, (l3) => l3.toUpperCase()),
            isEnabled,
            description: description || `${featureName} feature`
          }
        }), {
          headers: {
            "Content-Type": "application/json",
            "Access-Control-Allow-Origin": "*"
          }
        });
      } catch (error) {
        return new Response(JSON.stringify({
          success: false,
          message: "Failed to update feature"
        }), {
          status: 500,
          headers: {
            "Content-Type": "application/json",
            "Access-Control-Allow-Origin": "*"
          }
        });
      }
    }, "onRequestPut");
    onRequestOptions4 = /* @__PURE__ */ __name2(async () => {
      return new Response(null, {
        headers: {
          "Access-Control-Allow-Origin": "*",
          "Access-Control-Allow-Methods": "PUT, OPTIONS",
          "Access-Control-Allow-Headers": "Content-Type"
        }
      });
    }, "onRequestOptions");
  }
});
async function onRequestPut4(context) {
  const { request, env, params } = context;
  const orderId = params.orderId;
  const corsHeaders = {
    "Access-Control-Allow-Origin": "*",
    "Access-Control-Allow-Methods": "PUT, OPTIONS",
    "Access-Control-Allow-Headers": "Content-Type, Authorization"
  };
  if (request.method === "OPTIONS") {
    return new Response(null, { headers: corsHeaders });
  }
  try {
    const { status } = await request.json();
    if (!status || !["pending", "completed", "failed", "refunded"].includes(status)) {
      return new Response(JSON.stringify({
        success: false,
        error: "Invalid status. Must be one of: pending, completed, failed, refunded"
      }), {
        status: 400,
        headers: { "Content-Type": "application/json", ...corsHeaders }
      });
    }
    const updateQuery = `
      UPDATE orders 
      SET status = ?, completedAt = ?
      WHERE id = ?
    `;
    const completedAt = status === "completed" ? (/* @__PURE__ */ new Date()).toISOString() : null;
    const updateResult = await env.DB.prepare(updateQuery).bind(status, completedAt, orderId).run();
    if (!updateResult.success) {
      throw new Error("Failed to update order status");
    }
    if (status === "completed") {
      const orderQuery = `
        SELECT customerEmail, finalAmount 
        FROM orders 
        WHERE id = ?
      `;
      const orderResult = await env.DB.prepare(orderQuery).bind(orderId).first();
      if (orderResult) {
        const userUpdateQuery = `
          UPDATE users 
          SET 
            isPremium = 1
          WHERE email = ?
        `;
        await env.DB.prepare(userUpdateQuery).bind(orderResult.customerEmail).run();
      }
    }
    return new Response(JSON.stringify({
      success: true,
      message: "Order status updated successfully"
    }), {
      status: 200,
      headers: { "Content-Type": "application/json", ...corsHeaders }
    });
  } catch (error) {
    console.error("Error updating order:", error);
    return new Response(JSON.stringify({
      success: false,
      error: "Failed to update order status"
    }), {
      status: 500,
      headers: { "Content-Type": "application/json", ...corsHeaders }
    });
  }
}
__name(onRequestPut4, "onRequestPut4");
var init_orderId = __esm({
  "api/admin/orders/[orderId].ts"() {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    __name2(onRequestPut4, "onRequestPut");
  }
});
function json2(data, status = 200) {
  return new Response(JSON.stringify(data), {
    status,
    headers: {
      "Content-Type": "application/json",
      "Access-Control-Allow-Origin": "*",
      "Access-Control-Allow-Methods": "GET, OPTIONS",
      "Access-Control-Allow-Headers": "Content-Type, Authorization"
    }
  });
}
__name(json2, "json2");
var onRequestGet4;
var init_id3 = __esm({
  "api/extension/check/[id].ts"() {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    __name2(json2, "json");
    onRequestGet4 = /* @__PURE__ */ __name2(async ({ request, params, env }) => {
      try {
        const paramId = params.id;
        const authHeader = request.headers.get("Authorization");
        if (!authHeader || !authHeader.startsWith("Bearer ")) {
          return json2({ canUse: false, reason: "Not authenticated" });
        }
        const token = authHeader.substring(7);
        if (token === "demo-jwt-token" && paramId === "1") {
          return json2({
            canUse: true,
            reason: "Premium access",
            trialUsed: 0,
            isBlocked: false
          });
        }
        if (token.startsWith("jwt-token-")) {
          const parts = token.split("-");
          if (parts.length < 3) {
            return json2({ canUse: false, reason: "Invalid token" }, 401);
          }
          const userEmail = parts[2];
          if (!env.DB) {
            return json2({ canUse: false, reason: "Database not available" }, 500);
          }
          const customer = await env.DB.prepare(
            "SELECT extension_activated FROM customers WHERE email = ?"
          ).bind(userEmail).first();
          if (customer && customer.extension_activated) {
            return json2({
              canUse: true,
              reason: "Premium access",
              trialUsed: 0,
              isBlocked: false
            });
          } else {
            return json2({
              canUse: true,
              reason: "Trial access",
              trialUsed: 5,
              // This could be dynamic in a real app
              isBlocked: false
            });
          }
        }
        return json2({ canUse: false, reason: "Invalid token" }, 401);
      } catch (error) {
        return json2({
          error: error.message
        }, 500);
      }
    }, "onRequestGet");
  }
});
function json3(data, status = 200) {
  return new Response(JSON.stringify(data), {
    status,
    headers: {
      "Content-Type": "application/json",
      "Access-Control-Allow-Origin": "*",
      "Access-Control-Allow-Methods": "GET, OPTIONS",
      "Access-Control-Allow-Headers": "Content-Type, Authorization"
    }
  });
}
__name(json3, "json3");
var onRequestGet5;
var init_id4 = __esm({
  "api/extension/downloads/[id].ts"() {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    __name2(json3, "json");
    onRequestGet5 = /* @__PURE__ */ __name2(async ({ request, params, env }) => {
      try {
        const userId = params.id;
        const authHeader = request.headers.get("Authorization");
        if (!authHeader || !authHeader.startsWith("Bearer ")) {
          return json3([]);
        }
        const token = authHeader.substring(7);
        if (token === "demo-jwt-token" || token.startsWith("jwt-token-") && token.split("-")[2] === "1") {
          return json3([
            {
              id: 1,
              downloadToken: "demo-download-token",
              downloadType: "paid",
              downloadCount: 1,
              createdAt: (/* @__PURE__ */ new Date()).toISOString()
            }
          ]);
        }
        return json3([]);
      } catch (error) {
        return json3({
          error: error.message
        }, 500);
      }
    }, "onRequestGet");
  }
});
function _typeof(o3) {
  "@babel/helpers - typeof";
  return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(o4) {
    return typeof o4;
  } : function(o4) {
    return o4 && "function" == typeof Symbol && o4.constructor === Symbol && o4 !== Symbol.prototype ? "symbol" : typeof o4;
  }, _typeof(o3);
}
__name(_typeof, "_typeof");
var init_typeof = __esm({
  "../node_modules/@babel/runtime/helpers/esm/typeof.js"() {
    init_functionsRoutes_0_8044054200943971();
    __name2(_typeof, "_typeof");
  }
});
function zlibSync(data, opts) {
  if (!opts)
    opts = {};
  var a3 = adler();
  a3.p(data);
  var d2 = dopt(data, opts, opts.dictionary ? 6 : 2, 4);
  return zlh(d2, opts), wbytes(d2, d2.length - 4, a3.d()), d2;
}
__name(zlibSync, "zlibSync");
function unzlibSync(data, opts) {
  return inflt(data.subarray(zls(data, opts && opts.dictionary), -4), { i: 2 }, opts && opts.out, opts && opts.dictionary);
}
__name(unzlibSync, "unzlibSync");
var u8;
var u16;
var i32;
var fleb;
var fdeb;
var clim;
var freb;
var _a;
var fl;
var revfl;
var _b;
var fd;
var revfd;
var rev;
var x2;
var i3;
var hMap;
var flt;
var i3;
var i3;
var i3;
var i3;
var fdt;
var i3;
var flm;
var flrm;
var fdm;
var fdrm;
var max;
var bits;
var bits16;
var shft;
var slc;
var ec;
var err;
var inflt;
var wbits;
var wbits16;
var hTree;
var ln;
var lc;
var clen;
var wfblk;
var wblk;
var deo;
var et;
var dflt;
var adler;
var dopt;
var wbytes;
var zlh;
var zls;
var td;
var tds;
var init_browser = __esm({
  "../node_modules/fflate/esm/browser.js"() {
    init_functionsRoutes_0_8044054200943971();
    u8 = Uint8Array;
    u16 = Uint16Array;
    i32 = Int32Array;
    fleb = new u8([
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      1,
      1,
      1,
      1,
      2,
      2,
      2,
      2,
      3,
      3,
      3,
      3,
      4,
      4,
      4,
      4,
      5,
      5,
      5,
      5,
      0,
      /* unused */
      0,
      0,
      /* impossible */
      0
    ]);
    fdeb = new u8([
      0,
      0,
      0,
      0,
      1,
      1,
      2,
      2,
      3,
      3,
      4,
      4,
      5,
      5,
      6,
      6,
      7,
      7,
      8,
      8,
      9,
      9,
      10,
      10,
      11,
      11,
      12,
      12,
      13,
      13,
      /* unused */
      0,
      0
    ]);
    clim = new u8([16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15]);
    freb = /* @__PURE__ */ __name2(function(eb, start) {
      var b2 = new u16(31);
      for (var i33 = 0; i33 < 31; ++i33) {
        b2[i33] = start += 1 << eb[i33 - 1];
      }
      var r2 = new i32(b2[30]);
      for (var i33 = 1; i33 < 30; ++i33) {
        for (var j2 = b2[i33]; j2 < b2[i33 + 1]; ++j2) {
          r2[j2] = j2 - b2[i33] << 5 | i33;
        }
      }
      return { b: b2, r: r2 };
    }, "freb");
    _a = freb(fleb, 2);
    fl = _a.b;
    revfl = _a.r;
    fl[28] = 258, revfl[258] = 28;
    _b = freb(fdeb, 0);
    fd = _b.b;
    revfd = _b.r;
    rev = new u16(32768);
    for (i3 = 0; i3 < 32768; ++i3) {
      x2 = (i3 & 43690) >> 1 | (i3 & 21845) << 1;
      x2 = (x2 & 52428) >> 2 | (x2 & 13107) << 2;
      x2 = (x2 & 61680) >> 4 | (x2 & 3855) << 4;
      rev[i3] = ((x2 & 65280) >> 8 | (x2 & 255) << 8) >> 1;
    }
    hMap = /* @__PURE__ */ __name2(function(cd, mb, r2) {
      var s3 = cd.length;
      var i33 = 0;
      var l3 = new u16(mb);
      for (; i33 < s3; ++i33) {
        if (cd[i33])
          ++l3[cd[i33] - 1];
      }
      var le2 = new u16(mb);
      for (i33 = 1; i33 < mb; ++i33) {
        le2[i33] = le2[i33 - 1] + l3[i33 - 1] << 1;
      }
      var co;
      if (r2) {
        co = new u16(1 << mb);
        var rvb = 15 - mb;
        for (i33 = 0; i33 < s3; ++i33) {
          if (cd[i33]) {
            var sv = i33 << 4 | cd[i33];
            var r_1 = mb - cd[i33];
            var v3 = le2[cd[i33] - 1]++ << r_1;
            for (var m4 = v3 | (1 << r_1) - 1; v3 <= m4; ++v3) {
              co[rev[v3] >> rvb] = sv;
            }
          }
        }
      } else {
        co = new u16(s3);
        for (i33 = 0; i33 < s3; ++i33) {
          if (cd[i33]) {
            co[i33] = rev[le2[cd[i33] - 1]++] >> 15 - cd[i33];
          }
        }
      }
      return co;
    }, "hMap");
    flt = new u8(288);
    for (i3 = 0; i3 < 144; ++i3)
      flt[i3] = 8;
    for (i3 = 144; i3 < 256; ++i3)
      flt[i3] = 9;
    for (i3 = 256; i3 < 280; ++i3)
      flt[i3] = 7;
    for (i3 = 280; i3 < 288; ++i3)
      flt[i3] = 8;
    fdt = new u8(32);
    for (i3 = 0; i3 < 32; ++i3)
      fdt[i3] = 5;
    flm = /* @__PURE__ */ hMap(flt, 9, 0);
    flrm = /* @__PURE__ */ hMap(flt, 9, 1);
    fdm = /* @__PURE__ */ hMap(fdt, 5, 0);
    fdrm = /* @__PURE__ */ hMap(fdt, 5, 1);
    max = /* @__PURE__ */ __name2(function(a3) {
      var m4 = a3[0];
      for (var i33 = 1; i33 < a3.length; ++i33) {
        if (a3[i33] > m4)
          m4 = a3[i33];
      }
      return m4;
    }, "max");
    bits = /* @__PURE__ */ __name2(function(d2, p3, m4) {
      var o3 = p3 / 8 | 0;
      return (d2[o3] | d2[o3 + 1] << 8) >> (p3 & 7) & m4;
    }, "bits");
    bits16 = /* @__PURE__ */ __name2(function(d2, p3) {
      var o3 = p3 / 8 | 0;
      return (d2[o3] | d2[o3 + 1] << 8 | d2[o3 + 2] << 16) >> (p3 & 7);
    }, "bits16");
    shft = /* @__PURE__ */ __name2(function(p3) {
      return (p3 + 7) / 8 | 0;
    }, "shft");
    slc = /* @__PURE__ */ __name2(function(v3, s3, e2) {
      if (s3 == null || s3 < 0)
        s3 = 0;
      if (e2 == null || e2 > v3.length)
        e2 = v3.length;
      return new u8(v3.subarray(s3, e2));
    }, "slc");
    ec = [
      "unexpected EOF",
      "invalid block type",
      "invalid length/literal",
      "invalid distance",
      "stream finished",
      "no stream handler",
      ,
      "no callback",
      "invalid UTF-8 data",
      "extra field too long",
      "date not in range 1980-2099",
      "filename too long",
      "stream finishing",
      "invalid zip data"
      // determined by unknown compression method
    ];
    err = /* @__PURE__ */ __name2(function(ind, msg, nt2) {
      var e2 = new Error(msg || ec[ind]);
      e2.code = ind;
      if (Error.captureStackTrace)
        Error.captureStackTrace(e2, err);
      if (!nt2)
        throw e2;
      return e2;
    }, "err");
    inflt = /* @__PURE__ */ __name2(function(dat, st2, buf, dict) {
      var sl = dat.length, dl = dict ? dict.length : 0;
      if (!sl || st2.f && !st2.l)
        return buf || new u8(0);
      var noBuf = !buf;
      var resize = noBuf || st2.i != 2;
      var noSt = st2.i;
      if (noBuf)
        buf = new u8(sl * 3);
      var cbuf = /* @__PURE__ */ __name2(function(l4) {
        var bl = buf.length;
        if (l4 > bl) {
          var nbuf = new u8(Math.max(bl * 2, l4));
          nbuf.set(buf);
          buf = nbuf;
        }
      }, "cbuf");
      var final = st2.f || 0, pos = st2.p || 0, bt2 = st2.b || 0, lm = st2.l, dm = st2.d, lbt = st2.m, dbt = st2.n;
      var tbts = sl * 8;
      do {
        if (!lm) {
          final = bits(dat, pos, 1);
          var type = bits(dat, pos + 1, 3);
          pos += 3;
          if (!type) {
            var s3 = shft(pos) + 4, l3 = dat[s3 - 4] | dat[s3 - 3] << 8, t3 = s3 + l3;
            if (t3 > sl) {
              if (noSt)
                err(0);
              break;
            }
            if (resize)
              cbuf(bt2 + l3);
            buf.set(dat.subarray(s3, t3), bt2);
            st2.b = bt2 += l3, st2.p = pos = t3 * 8, st2.f = final;
            continue;
          } else if (type == 1)
            lm = flrm, dm = fdrm, lbt = 9, dbt = 5;
          else if (type == 2) {
            var hLit = bits(dat, pos, 31) + 257, hcLen = bits(dat, pos + 10, 15) + 4;
            var tl = hLit + bits(dat, pos + 5, 31) + 1;
            pos += 14;
            var ldt = new u8(tl);
            var clt = new u8(19);
            for (var i33 = 0; i33 < hcLen; ++i33) {
              clt[clim[i33]] = bits(dat, pos + i33 * 3, 7);
            }
            pos += hcLen * 3;
            var clb = max(clt), clbmsk = (1 << clb) - 1;
            var clm = hMap(clt, clb, 1);
            for (var i33 = 0; i33 < tl; ) {
              var r2 = clm[bits(dat, pos, clbmsk)];
              pos += r2 & 15;
              var s3 = r2 >> 4;
              if (s3 < 16) {
                ldt[i33++] = s3;
              } else {
                var c4 = 0, n3 = 0;
                if (s3 == 16)
                  n3 = 3 + bits(dat, pos, 3), pos += 2, c4 = ldt[i33 - 1];
                else if (s3 == 17)
                  n3 = 3 + bits(dat, pos, 7), pos += 3;
                else if (s3 == 18)
                  n3 = 11 + bits(dat, pos, 127), pos += 7;
                while (n3--)
                  ldt[i33++] = c4;
              }
            }
            var lt3 = ldt.subarray(0, hLit), dt2 = ldt.subarray(hLit);
            lbt = max(lt3);
            dbt = max(dt2);
            lm = hMap(lt3, lbt, 1);
            dm = hMap(dt2, dbt, 1);
          } else
            err(1);
          if (pos > tbts) {
            if (noSt)
              err(0);
            break;
          }
        }
        if (resize)
          cbuf(bt2 + 131072);
        var lms = (1 << lbt) - 1, dms = (1 << dbt) - 1;
        var lpos = pos;
        for (; ; lpos = pos) {
          var c4 = lm[bits16(dat, pos) & lms], sym = c4 >> 4;
          pos += c4 & 15;
          if (pos > tbts) {
            if (noSt)
              err(0);
            break;
          }
          if (!c4)
            err(2);
          if (sym < 256)
            buf[bt2++] = sym;
          else if (sym == 256) {
            lpos = pos, lm = null;
            break;
          } else {
            var add = sym - 254;
            if (sym > 264) {
              var i33 = sym - 257, b2 = fleb[i33];
              add = bits(dat, pos, (1 << b2) - 1) + fl[i33];
              pos += b2;
            }
            var d2 = dm[bits16(dat, pos) & dms], dsym = d2 >> 4;
            if (!d2)
              err(3);
            pos += d2 & 15;
            var dt2 = fd[dsym];
            if (dsym > 3) {
              var b2 = fdeb[dsym];
              dt2 += bits16(dat, pos) & (1 << b2) - 1, pos += b2;
            }
            if (pos > tbts) {
              if (noSt)
                err(0);
              break;
            }
            if (resize)
              cbuf(bt2 + 131072);
            var end = bt2 + add;
            if (bt2 < dt2) {
              var shift = dl - dt2, dend = Math.min(dt2, end);
              if (shift + bt2 < 0)
                err(3);
              for (; bt2 < dend; ++bt2)
                buf[bt2] = dict[shift + bt2];
            }
            for (; bt2 < end; ++bt2)
              buf[bt2] = buf[bt2 - dt2];
          }
        }
        st2.l = lm, st2.p = lpos, st2.b = bt2, st2.f = final;
        if (lm)
          final = 1, st2.m = lbt, st2.d = dm, st2.n = dbt;
      } while (!final);
      return bt2 != buf.length && noBuf ? slc(buf, 0, bt2) : buf.subarray(0, bt2);
    }, "inflt");
    wbits = /* @__PURE__ */ __name2(function(d2, p3, v3) {
      v3 <<= p3 & 7;
      var o3 = p3 / 8 | 0;
      d2[o3] |= v3;
      d2[o3 + 1] |= v3 >> 8;
    }, "wbits");
    wbits16 = /* @__PURE__ */ __name2(function(d2, p3, v3) {
      v3 <<= p3 & 7;
      var o3 = p3 / 8 | 0;
      d2[o3] |= v3;
      d2[o3 + 1] |= v3 >> 8;
      d2[o3 + 2] |= v3 >> 16;
    }, "wbits16");
    hTree = /* @__PURE__ */ __name2(function(d2, mb) {
      var t3 = [];
      for (var i33 = 0; i33 < d2.length; ++i33) {
        if (d2[i33])
          t3.push({ s: i33, f: d2[i33] });
      }
      var s3 = t3.length;
      var t22 = t3.slice();
      if (!s3)
        return { t: et, l: 0 };
      if (s3 == 1) {
        var v3 = new u8(t3[0].s + 1);
        v3[t3[0].s] = 1;
        return { t: v3, l: 1 };
      }
      t3.sort(function(a3, b2) {
        return a3.f - b2.f;
      });
      t3.push({ s: -1, f: 25001 });
      var l3 = t3[0], r2 = t3[1], i0 = 0, i1 = 1, i22 = 2;
      t3[0] = { s: -1, f: l3.f + r2.f, l: l3, r: r2 };
      while (i1 != s3 - 1) {
        l3 = t3[t3[i0].f < t3[i22].f ? i0++ : i22++];
        r2 = t3[i0 != i1 && t3[i0].f < t3[i22].f ? i0++ : i22++];
        t3[i1++] = { s: -1, f: l3.f + r2.f, l: l3, r: r2 };
      }
      var maxSym = t22[0].s;
      for (var i33 = 1; i33 < s3; ++i33) {
        if (t22[i33].s > maxSym)
          maxSym = t22[i33].s;
      }
      var tr = new u16(maxSym + 1);
      var mbt = ln(t3[i1 - 1], tr, 0);
      if (mbt > mb) {
        var i33 = 0, dt2 = 0;
        var lft = mbt - mb, cst = 1 << lft;
        t22.sort(function(a3, b2) {
          return tr[b2.s] - tr[a3.s] || a3.f - b2.f;
        });
        for (; i33 < s3; ++i33) {
          var i2_1 = t22[i33].s;
          if (tr[i2_1] > mb) {
            dt2 += cst - (1 << mbt - tr[i2_1]);
            tr[i2_1] = mb;
          } else
            break;
        }
        dt2 >>= lft;
        while (dt2 > 0) {
          var i2_2 = t22[i33].s;
          if (tr[i2_2] < mb)
            dt2 -= 1 << mb - tr[i2_2]++ - 1;
          else
            ++i33;
        }
        for (; i33 >= 0 && dt2; --i33) {
          var i2_3 = t22[i33].s;
          if (tr[i2_3] == mb) {
            --tr[i2_3];
            ++dt2;
          }
        }
        mbt = mb;
      }
      return { t: new u8(tr), l: mbt };
    }, "hTree");
    ln = /* @__PURE__ */ __name2(function(n3, l3, d2) {
      return n3.s == -1 ? Math.max(ln(n3.l, l3, d2 + 1), ln(n3.r, l3, d2 + 1)) : l3[n3.s] = d2;
    }, "ln");
    lc = /* @__PURE__ */ __name2(function(c4) {
      var s3 = c4.length;
      while (s3 && !c4[--s3])
        ;
      var cl = new u16(++s3);
      var cli = 0, cln = c4[0], cls = 1;
      var w2 = /* @__PURE__ */ __name2(function(v3) {
        cl[cli++] = v3;
      }, "w");
      for (var i33 = 1; i33 <= s3; ++i33) {
        if (c4[i33] == cln && i33 != s3)
          ++cls;
        else {
          if (!cln && cls > 2) {
            for (; cls > 138; cls -= 138)
              w2(32754);
            if (cls > 2) {
              w2(cls > 10 ? cls - 11 << 5 | 28690 : cls - 3 << 5 | 12305);
              cls = 0;
            }
          } else if (cls > 3) {
            w2(cln), --cls;
            for (; cls > 6; cls -= 6)
              w2(8304);
            if (cls > 2)
              w2(cls - 3 << 5 | 8208), cls = 0;
          }
          while (cls--)
            w2(cln);
          cls = 1;
          cln = c4[i33];
        }
      }
      return { c: cl.subarray(0, cli), n: s3 };
    }, "lc");
    clen = /* @__PURE__ */ __name2(function(cf, cl) {
      var l3 = 0;
      for (var i33 = 0; i33 < cl.length; ++i33)
        l3 += cf[i33] * cl[i33];
      return l3;
    }, "clen");
    wfblk = /* @__PURE__ */ __name2(function(out, pos, dat) {
      var s3 = dat.length;
      var o3 = shft(pos + 2);
      out[o3] = s3 & 255;
      out[o3 + 1] = s3 >> 8;
      out[o3 + 2] = out[o3] ^ 255;
      out[o3 + 3] = out[o3 + 1] ^ 255;
      for (var i33 = 0; i33 < s3; ++i33)
        out[o3 + i33 + 4] = dat[i33];
      return (o3 + 4 + s3) * 8;
    }, "wfblk");
    wblk = /* @__PURE__ */ __name2(function(dat, out, final, syms, lf, df, eb, li, bs, bl, p3) {
      wbits(out, p3++, final);
      ++lf[256];
      var _a2 = hTree(lf, 15), dlt = _a2.t, mlb = _a2.l;
      var _b2 = hTree(df, 15), ddt = _b2.t, mdb = _b2.l;
      var _c = lc(dlt), lclt = _c.c, nlc = _c.n;
      var _d = lc(ddt), lcdt = _d.c, ndc = _d.n;
      var lcfreq = new u16(19);
      for (var i33 = 0; i33 < lclt.length; ++i33)
        ++lcfreq[lclt[i33] & 31];
      for (var i33 = 0; i33 < lcdt.length; ++i33)
        ++lcfreq[lcdt[i33] & 31];
      var _e = hTree(lcfreq, 7), lct = _e.t, mlcb = _e.l;
      var nlcc = 19;
      for (; nlcc > 4 && !lct[clim[nlcc - 1]]; --nlcc)
        ;
      var flen = bl + 5 << 3;
      var ftlen = clen(lf, flt) + clen(df, fdt) + eb;
      var dtlen = clen(lf, dlt) + clen(df, ddt) + eb + 14 + 3 * nlcc + clen(lcfreq, lct) + 2 * lcfreq[16] + 3 * lcfreq[17] + 7 * lcfreq[18];
      if (bs >= 0 && flen <= ftlen && flen <= dtlen)
        return wfblk(out, p3, dat.subarray(bs, bs + bl));
      var lm, ll, dm, dl;
      wbits(out, p3, 1 + (dtlen < ftlen)), p3 += 2;
      if (dtlen < ftlen) {
        lm = hMap(dlt, mlb, 0), ll = dlt, dm = hMap(ddt, mdb, 0), dl = ddt;
        var llm = hMap(lct, mlcb, 0);
        wbits(out, p3, nlc - 257);
        wbits(out, p3 + 5, ndc - 1);
        wbits(out, p3 + 10, nlcc - 4);
        p3 += 14;
        for (var i33 = 0; i33 < nlcc; ++i33)
          wbits(out, p3 + 3 * i33, lct[clim[i33]]);
        p3 += 3 * nlcc;
        var lcts = [lclt, lcdt];
        for (var it2 = 0; it2 < 2; ++it2) {
          var clct = lcts[it2];
          for (var i33 = 0; i33 < clct.length; ++i33) {
            var len = clct[i33] & 31;
            wbits(out, p3, llm[len]), p3 += lct[len];
            if (len > 15)
              wbits(out, p3, clct[i33] >> 5 & 127), p3 += clct[i33] >> 12;
          }
        }
      } else {
        lm = flm, ll = flt, dm = fdm, dl = fdt;
      }
      for (var i33 = 0; i33 < li; ++i33) {
        var sym = syms[i33];
        if (sym > 255) {
          var len = sym >> 18 & 31;
          wbits16(out, p3, lm[len + 257]), p3 += ll[len + 257];
          if (len > 7)
            wbits(out, p3, sym >> 23 & 31), p3 += fleb[len];
          var dst = sym & 31;
          wbits16(out, p3, dm[dst]), p3 += dl[dst];
          if (dst > 3)
            wbits16(out, p3, sym >> 5 & 8191), p3 += fdeb[dst];
        } else {
          wbits16(out, p3, lm[sym]), p3 += ll[sym];
        }
      }
      wbits16(out, p3, lm[256]);
      return p3 + ll[256];
    }, "wblk");
    deo = /* @__PURE__ */ new i32([65540, 131080, 131088, 131104, 262176, 1048704, 1048832, 2114560, 2117632]);
    et = /* @__PURE__ */ new u8(0);
    dflt = /* @__PURE__ */ __name2(function(dat, lvl, plvl, pre, post, st2) {
      var s3 = st2.z || dat.length;
      var o3 = new u8(pre + s3 + 5 * (1 + Math.ceil(s3 / 7e3)) + post);
      var w2 = o3.subarray(pre, o3.length - post);
      var lst = st2.l;
      var pos = (st2.r || 0) & 7;
      if (lvl) {
        if (pos)
          w2[0] = st2.r >> 3;
        var opt = deo[lvl - 1];
        var n3 = opt >> 13, c4 = opt & 8191;
        var msk_1 = (1 << plvl) - 1;
        var prev = st2.p || new u16(32768), head = st2.h || new u16(msk_1 + 1);
        var bs1_1 = Math.ceil(plvl / 3), bs2_1 = 2 * bs1_1;
        var hsh = /* @__PURE__ */ __name2(function(i4) {
          return (dat[i4] ^ dat[i4 + 1] << bs1_1 ^ dat[i4 + 2] << bs2_1) & msk_1;
        }, "hsh");
        var syms = new i32(25e3);
        var lf = new u16(288), df = new u16(32);
        var lc_1 = 0, eb = 0, i33 = st2.i || 0, li = 0, wi = st2.w || 0, bs = 0;
        for (; i33 + 2 < s3; ++i33) {
          var hv = hsh(i33);
          var imod = i33 & 32767, pimod = head[hv];
          prev[imod] = pimod;
          head[hv] = imod;
          if (wi <= i33) {
            var rem = s3 - i33;
            if ((lc_1 > 7e3 || li > 24576) && (rem > 423 || !lst)) {
              pos = wblk(dat, w2, 0, syms, lf, df, eb, li, bs, i33 - bs, pos);
              li = lc_1 = eb = 0, bs = i33;
              for (var j2 = 0; j2 < 286; ++j2)
                lf[j2] = 0;
              for (var j2 = 0; j2 < 30; ++j2)
                df[j2] = 0;
            }
            var l3 = 2, d2 = 0, ch_1 = c4, dif = imod - pimod & 32767;
            if (rem > 2 && hv == hsh(i33 - dif)) {
              var maxn = Math.min(n3, rem) - 1;
              var maxd = Math.min(32767, i33);
              var ml = Math.min(258, rem);
              while (dif <= maxd && --ch_1 && imod != pimod) {
                if (dat[i33 + l3] == dat[i33 + l3 - dif]) {
                  var nl = 0;
                  for (; nl < ml && dat[i33 + nl] == dat[i33 + nl - dif]; ++nl)
                    ;
                  if (nl > l3) {
                    l3 = nl, d2 = dif;
                    if (nl > maxn)
                      break;
                    var mmd = Math.min(dif, nl - 2);
                    var md = 0;
                    for (var j2 = 0; j2 < mmd; ++j2) {
                      var ti = i33 - dif + j2 & 32767;
                      var pti = prev[ti];
                      var cd = ti - pti & 32767;
                      if (cd > md)
                        md = cd, pimod = ti;
                    }
                  }
                }
                imod = pimod, pimod = prev[imod];
                dif += imod - pimod & 32767;
              }
            }
            if (d2) {
              syms[li++] = 268435456 | revfl[l3] << 18 | revfd[d2];
              var lin = revfl[l3] & 31, din = revfd[d2] & 31;
              eb += fleb[lin] + fdeb[din];
              ++lf[257 + lin];
              ++df[din];
              wi = i33 + l3;
              ++lc_1;
            } else {
              syms[li++] = dat[i33];
              ++lf[dat[i33]];
            }
          }
        }
        for (i33 = Math.max(i33, wi); i33 < s3; ++i33) {
          syms[li++] = dat[i33];
          ++lf[dat[i33]];
        }
        pos = wblk(dat, w2, lst, syms, lf, df, eb, li, bs, i33 - bs, pos);
        if (!lst) {
          st2.r = pos & 7 | w2[pos / 8 | 0] << 3;
          pos -= 7;
          st2.h = head, st2.p = prev, st2.i = i33, st2.w = wi;
        }
      } else {
        for (var i33 = st2.w || 0; i33 < s3 + lst; i33 += 65535) {
          var e2 = i33 + 65535;
          if (e2 >= s3) {
            w2[pos / 8 | 0] = lst;
            e2 = s3;
          }
          pos = wfblk(w2, pos + 1, dat.subarray(i33, e2));
        }
        st2.i = s3;
      }
      return slc(o3, 0, pre + shft(pos) + post);
    }, "dflt");
    adler = /* @__PURE__ */ __name2(function() {
      var a3 = 1, b2 = 0;
      return {
        p: /* @__PURE__ */ __name2(function(d2) {
          var n3 = a3, m4 = b2;
          var l3 = d2.length | 0;
          for (var i33 = 0; i33 != l3; ) {
            var e2 = Math.min(i33 + 2655, l3);
            for (; i33 < e2; ++i33)
              m4 += n3 += d2[i33];
            n3 = (n3 & 65535) + 15 * (n3 >> 16), m4 = (m4 & 65535) + 15 * (m4 >> 16);
          }
          a3 = n3, b2 = m4;
        }, "p"),
        d: /* @__PURE__ */ __name2(function() {
          a3 %= 65521, b2 %= 65521;
          return (a3 & 255) << 24 | (a3 & 65280) << 8 | (b2 & 255) << 8 | b2 >> 8;
        }, "d")
      };
    }, "adler");
    dopt = /* @__PURE__ */ __name2(function(dat, opt, pre, post, st2) {
      if (!st2) {
        st2 = { l: 1 };
        if (opt.dictionary) {
          var dict = opt.dictionary.subarray(-32768);
          var newDat = new u8(dict.length + dat.length);
          newDat.set(dict);
          newDat.set(dat, dict.length);
          dat = newDat;
          st2.w = dict.length;
        }
      }
      return dflt(dat, opt.level == null ? 6 : opt.level, opt.mem == null ? st2.l ? Math.ceil(Math.max(8, Math.min(13, Math.log(dat.length))) * 1.5) : 20 : 12 + opt.mem, pre, post, st2);
    }, "dopt");
    wbytes = /* @__PURE__ */ __name2(function(d2, b2, v3) {
      for (; v3; ++b2)
        d2[b2] = v3, v3 >>>= 8;
    }, "wbytes");
    zlh = /* @__PURE__ */ __name2(function(c4, o3) {
      var lv = o3.level, fl2 = lv == 0 ? 0 : lv < 6 ? 1 : lv == 9 ? 3 : 2;
      c4[0] = 120, c4[1] = fl2 << 6 | (o3.dictionary && 32);
      c4[1] |= 31 - (c4[0] << 8 | c4[1]) % 31;
      if (o3.dictionary) {
        var h3 = adler();
        h3.p(o3.dictionary);
        wbytes(c4, 2, h3.d());
      }
    }, "zlh");
    zls = /* @__PURE__ */ __name2(function(d2, dict) {
      if ((d2[0] & 15) != 8 || d2[0] >> 4 > 7 || (d2[0] << 8 | d2[1]) % 31)
        err(6, "invalid zlib data");
      if ((d2[1] >> 5 & 1) == +!dict)
        err(6, "invalid zlib data: " + (d2[1] & 32 ? "need" : "unexpected") + " dictionary");
      return (d2[1] >> 3 & 4) + 2;
    }, "zls");
    __name2(zlibSync, "zlibSync");
    __name2(unzlibSync, "unzlibSync");
    td = typeof TextDecoder != "undefined" && /* @__PURE__ */ new TextDecoder();
    tds = 0;
    try {
      td.decode(et, { stream: true });
      tds = 1;
    } catch (e2) {
    }
  }
});
var require_html2canvas = __commonJS({
  "../node_modules/html2canvas/dist/html2canvas.js"(exports, module) {
    init_functionsRoutes_0_8044054200943971();
    (function(global2, factory) {
      typeof exports === "object" && typeof module !== "undefined" ? module.exports = factory() : typeof define === "function" && define.amd ? define(factory) : (global2 = typeof globalThis !== "undefined" ? globalThis : global2 || self, global2.html2canvas = factory());
    })(exports, function() {
      "use strict";
      var extendStatics = /* @__PURE__ */ __name2(function(d2, b2) {
        extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d3, b3) {
          d3.__proto__ = b3;
        } || function(d3, b3) {
          for (var p3 in b3) if (Object.prototype.hasOwnProperty.call(b3, p3)) d3[p3] = b3[p3];
        };
        return extendStatics(d2, b2);
      }, "extendStatics");
      function __extends(d2, b2) {
        if (typeof b2 !== "function" && b2 !== null)
          throw new TypeError("Class extends value " + String(b2) + " is not a constructor or null");
        extendStatics(d2, b2);
        function __() {
          this.constructor = d2;
        }
        __name(__, "__");
        __name2(__, "__");
        d2.prototype = b2 === null ? Object.create(b2) : (__.prototype = b2.prototype, new __());
      }
      __name(__extends, "__extends");
      __name2(__extends, "__extends");
      var __assign = /* @__PURE__ */ __name2(function() {
        __assign = Object.assign || /* @__PURE__ */ __name2(/* @__PURE__ */ __name(function __assign2(t3) {
          for (var s3, i4 = 1, n3 = arguments.length; i4 < n3; i4++) {
            s3 = arguments[i4];
            for (var p3 in s3) if (Object.prototype.hasOwnProperty.call(s3, p3)) t3[p3] = s3[p3];
          }
          return t3;
        }, "__assign2"), "__assign");
        return __assign.apply(this, arguments);
      }, "__assign");
      function __awaiter(thisArg, _arguments, P2, generator) {
        function adopt(value) {
          return value instanceof P2 ? value : new P2(function(resolve) {
            resolve(value);
          });
        }
        __name(adopt, "adopt");
        __name2(adopt, "adopt");
        return new (P2 || (P2 = Promise))(function(resolve, reject) {
          function fulfilled(value) {
            try {
              step(generator.next(value));
            } catch (e3) {
              reject(e3);
            }
          }
          __name(fulfilled, "fulfilled");
          __name2(fulfilled, "fulfilled");
          function rejected(value) {
            try {
              step(generator["throw"](value));
            } catch (e3) {
              reject(e3);
            }
          }
          __name(rejected, "rejected");
          __name2(rejected, "rejected");
          function step(result) {
            result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
          }
          __name(step, "step");
          __name2(step, "step");
          step((generator = generator.apply(thisArg, _arguments || [])).next());
        });
      }
      __name(__awaiter, "__awaiter");
      __name2(__awaiter, "__awaiter");
      function __generator(thisArg, body) {
        var _3 = { label: 0, sent: /* @__PURE__ */ __name2(function() {
          if (t3[0] & 1) throw t3[1];
          return t3[1];
        }, "sent"), trys: [], ops: [] }, f4, y3, t3, g2;
        return g2 = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g2[Symbol.iterator] = function() {
          return this;
        }), g2;
        function verb(n3) {
          return function(v3) {
            return step([n3, v3]);
          };
        }
        __name(verb, "verb");
        __name2(verb, "verb");
        function step(op) {
          if (f4) throw new TypeError("Generator is already executing.");
          while (_3) try {
            if (f4 = 1, y3 && (t3 = op[0] & 2 ? y3["return"] : op[0] ? y3["throw"] || ((t3 = y3["return"]) && t3.call(y3), 0) : y3.next) && !(t3 = t3.call(y3, op[1])).done) return t3;
            if (y3 = 0, t3) op = [op[0] & 2, t3.value];
            switch (op[0]) {
              case 0:
              case 1:
                t3 = op;
                break;
              case 4:
                _3.label++;
                return { value: op[1], done: false };
              case 5:
                _3.label++;
                y3 = op[1];
                op = [0];
                continue;
              case 7:
                op = _3.ops.pop();
                _3.trys.pop();
                continue;
              default:
                if (!(t3 = _3.trys, t3 = t3.length > 0 && t3[t3.length - 1]) && (op[0] === 6 || op[0] === 2)) {
                  _3 = 0;
                  continue;
                }
                if (op[0] === 3 && (!t3 || op[1] > t3[0] && op[1] < t3[3])) {
                  _3.label = op[1];
                  break;
                }
                if (op[0] === 6 && _3.label < t3[1]) {
                  _3.label = t3[1];
                  t3 = op;
                  break;
                }
                if (t3 && _3.label < t3[2]) {
                  _3.label = t3[2];
                  _3.ops.push(op);
                  break;
                }
                if (t3[2]) _3.ops.pop();
                _3.trys.pop();
                continue;
            }
            op = body.call(thisArg, _3);
          } catch (e3) {
            op = [6, e3];
            y3 = 0;
          } finally {
            f4 = t3 = 0;
          }
          if (op[0] & 5) throw op[1];
          return { value: op[0] ? op[1] : void 0, done: true };
        }
        __name(step, "step");
        __name2(step, "step");
      }
      __name(__generator, "__generator");
      __name2(__generator, "__generator");
      function __spreadArray(to, from, pack2) {
        if (pack2 || arguments.length === 2) for (var i4 = 0, l3 = from.length, ar; i4 < l3; i4++) {
          if (ar || !(i4 in from)) {
            if (!ar) ar = Array.prototype.slice.call(from, 0, i4);
            ar[i4] = from[i4];
          }
        }
        return to.concat(ar || from);
      }
      __name(__spreadArray, "__spreadArray");
      __name2(__spreadArray, "__spreadArray");
      var Bounds = (
        /** @class */
        function() {
          function Bounds2(left, top, width, height) {
            this.left = left;
            this.top = top;
            this.width = width;
            this.height = height;
          }
          __name(Bounds2, "Bounds2");
          __name2(Bounds2, "Bounds");
          Bounds2.prototype.add = function(x22, y3, w2, h3) {
            return new Bounds2(this.left + x22, this.top + y3, this.width + w2, this.height + h3);
          };
          Bounds2.fromClientRect = function(context, clientRect) {
            return new Bounds2(clientRect.left + context.windowBounds.left, clientRect.top + context.windowBounds.top, clientRect.width, clientRect.height);
          };
          Bounds2.fromDOMRectList = function(context, domRectList) {
            var domRect = Array.from(domRectList).find(function(rect) {
              return rect.width !== 0;
            });
            return domRect ? new Bounds2(domRect.left + context.windowBounds.left, domRect.top + context.windowBounds.top, domRect.width, domRect.height) : Bounds2.EMPTY;
          };
          Bounds2.EMPTY = new Bounds2(0, 0, 0, 0);
          return Bounds2;
        }()
      );
      var parseBounds = /* @__PURE__ */ __name2(function(context, node2) {
        return Bounds.fromClientRect(context, node2.getBoundingClientRect());
      }, "parseBounds");
      var parseDocumentSize = /* @__PURE__ */ __name2(function(document2) {
        var body = document2.body;
        var documentElement = document2.documentElement;
        if (!body || !documentElement) {
          throw new Error("Unable to get document size");
        }
        var width = Math.max(Math.max(body.scrollWidth, documentElement.scrollWidth), Math.max(body.offsetWidth, documentElement.offsetWidth), Math.max(body.clientWidth, documentElement.clientWidth));
        var height = Math.max(Math.max(body.scrollHeight, documentElement.scrollHeight), Math.max(body.offsetHeight, documentElement.offsetHeight), Math.max(body.clientHeight, documentElement.clientHeight));
        return new Bounds(0, 0, width, height);
      }, "parseDocumentSize");
      var toCodePoints$1 = /* @__PURE__ */ __name2(function(str) {
        var codePoints = [];
        var i4 = 0;
        var length = str.length;
        while (i4 < length) {
          var value = str.charCodeAt(i4++);
          if (value >= 55296 && value <= 56319 && i4 < length) {
            var extra = str.charCodeAt(i4++);
            if ((extra & 64512) === 56320) {
              codePoints.push(((value & 1023) << 10) + (extra & 1023) + 65536);
            } else {
              codePoints.push(value);
              i4--;
            }
          } else {
            codePoints.push(value);
          }
        }
        return codePoints;
      }, "toCodePoints$1");
      var fromCodePoint$1 = /* @__PURE__ */ __name2(function() {
        var codePoints = [];
        for (var _i = 0; _i < arguments.length; _i++) {
          codePoints[_i] = arguments[_i];
        }
        if (String.fromCodePoint) {
          return String.fromCodePoint.apply(String, codePoints);
        }
        var length = codePoints.length;
        if (!length) {
          return "";
        }
        var codeUnits = [];
        var index2 = -1;
        var result = "";
        while (++index2 < length) {
          var codePoint = codePoints[index2];
          if (codePoint <= 65535) {
            codeUnits.push(codePoint);
          } else {
            codePoint -= 65536;
            codeUnits.push((codePoint >> 10) + 55296, codePoint % 1024 + 56320);
          }
          if (index2 + 1 === length || codeUnits.length > 16384) {
            result += String.fromCharCode.apply(String, codeUnits);
            codeUnits.length = 0;
          }
        }
        return result;
      }, "fromCodePoint$1");
      var chars$2 = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";
      var lookup$2 = typeof Uint8Array === "undefined" ? [] : new Uint8Array(256);
      for (var i$2 = 0; i$2 < chars$2.length; i$2++) {
        lookup$2[chars$2.charCodeAt(i$2)] = i$2;
      }
      var chars$1$1 = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";
      var lookup$1$1 = typeof Uint8Array === "undefined" ? [] : new Uint8Array(256);
      for (var i$1$1 = 0; i$1$1 < chars$1$1.length; i$1$1++) {
        lookup$1$1[chars$1$1.charCodeAt(i$1$1)] = i$1$1;
      }
      var decode$1 = /* @__PURE__ */ __name2(function(base642) {
        var bufferLength = base642.length * 0.75, len = base642.length, i4, p3 = 0, encoded1, encoded2, encoded3, encoded4;
        if (base642[base642.length - 1] === "=") {
          bufferLength--;
          if (base642[base642.length - 2] === "=") {
            bufferLength--;
          }
        }
        var buffer = typeof ArrayBuffer !== "undefined" && typeof Uint8Array !== "undefined" && typeof Uint8Array.prototype.slice !== "undefined" ? new ArrayBuffer(bufferLength) : new Array(bufferLength);
        var bytes = Array.isArray(buffer) ? buffer : new Uint8Array(buffer);
        for (i4 = 0; i4 < len; i4 += 4) {
          encoded1 = lookup$1$1[base642.charCodeAt(i4)];
          encoded2 = lookup$1$1[base642.charCodeAt(i4 + 1)];
          encoded3 = lookup$1$1[base642.charCodeAt(i4 + 2)];
          encoded4 = lookup$1$1[base642.charCodeAt(i4 + 3)];
          bytes[p3++] = encoded1 << 2 | encoded2 >> 4;
          bytes[p3++] = (encoded2 & 15) << 4 | encoded3 >> 2;
          bytes[p3++] = (encoded3 & 3) << 6 | encoded4 & 63;
        }
        return buffer;
      }, "decode$1");
      var polyUint16Array$1 = /* @__PURE__ */ __name2(function(buffer) {
        var length = buffer.length;
        var bytes = [];
        for (var i4 = 0; i4 < length; i4 += 2) {
          bytes.push(buffer[i4 + 1] << 8 | buffer[i4]);
        }
        return bytes;
      }, "polyUint16Array$1");
      var polyUint32Array$1 = /* @__PURE__ */ __name2(function(buffer) {
        var length = buffer.length;
        var bytes = [];
        for (var i4 = 0; i4 < length; i4 += 4) {
          bytes.push(buffer[i4 + 3] << 24 | buffer[i4 + 2] << 16 | buffer[i4 + 1] << 8 | buffer[i4]);
        }
        return bytes;
      }, "polyUint32Array$1");
      var UTRIE2_SHIFT_2$1 = 5;
      var UTRIE2_SHIFT_1$1 = 6 + 5;
      var UTRIE2_INDEX_SHIFT$1 = 2;
      var UTRIE2_SHIFT_1_2$1 = UTRIE2_SHIFT_1$1 - UTRIE2_SHIFT_2$1;
      var UTRIE2_LSCP_INDEX_2_OFFSET$1 = 65536 >> UTRIE2_SHIFT_2$1;
      var UTRIE2_DATA_BLOCK_LENGTH$1 = 1 << UTRIE2_SHIFT_2$1;
      var UTRIE2_DATA_MASK$1 = UTRIE2_DATA_BLOCK_LENGTH$1 - 1;
      var UTRIE2_LSCP_INDEX_2_LENGTH$1 = 1024 >> UTRIE2_SHIFT_2$1;
      var UTRIE2_INDEX_2_BMP_LENGTH$1 = UTRIE2_LSCP_INDEX_2_OFFSET$1 + UTRIE2_LSCP_INDEX_2_LENGTH$1;
      var UTRIE2_UTF8_2B_INDEX_2_OFFSET$1 = UTRIE2_INDEX_2_BMP_LENGTH$1;
      var UTRIE2_UTF8_2B_INDEX_2_LENGTH$1 = 2048 >> 6;
      var UTRIE2_INDEX_1_OFFSET$1 = UTRIE2_UTF8_2B_INDEX_2_OFFSET$1 + UTRIE2_UTF8_2B_INDEX_2_LENGTH$1;
      var UTRIE2_OMITTED_BMP_INDEX_1_LENGTH$1 = 65536 >> UTRIE2_SHIFT_1$1;
      var UTRIE2_INDEX_2_BLOCK_LENGTH$1 = 1 << UTRIE2_SHIFT_1_2$1;
      var UTRIE2_INDEX_2_MASK$1 = UTRIE2_INDEX_2_BLOCK_LENGTH$1 - 1;
      var slice16$1 = /* @__PURE__ */ __name2(function(view, start, end) {
        if (view.slice) {
          return view.slice(start, end);
        }
        return new Uint16Array(Array.prototype.slice.call(view, start, end));
      }, "slice16$1");
      var slice32$1 = /* @__PURE__ */ __name2(function(view, start, end) {
        if (view.slice) {
          return view.slice(start, end);
        }
        return new Uint32Array(Array.prototype.slice.call(view, start, end));
      }, "slice32$1");
      var createTrieFromBase64$1 = /* @__PURE__ */ __name2(function(base642, _byteLength) {
        var buffer = decode$1(base642);
        var view32 = Array.isArray(buffer) ? polyUint32Array$1(buffer) : new Uint32Array(buffer);
        var view16 = Array.isArray(buffer) ? polyUint16Array$1(buffer) : new Uint16Array(buffer);
        var headerLength = 24;
        var index2 = slice16$1(view16, headerLength / 2, view32[4] / 2);
        var data = view32[5] === 2 ? slice16$1(view16, (headerLength + view32[4]) / 2) : slice32$1(view32, Math.ceil((headerLength + view32[4]) / 4));
        return new Trie$1(view32[0], view32[1], view32[2], view32[3], index2, data);
      }, "createTrieFromBase64$1");
      var Trie$1 = (
        /** @class */
        function() {
          function Trie2(initialValue, errorValue, highStart, highValueIndex, index2, data) {
            this.initialValue = initialValue;
            this.errorValue = errorValue;
            this.highStart = highStart;
            this.highValueIndex = highValueIndex;
            this.index = index2;
            this.data = data;
          }
          __name(Trie2, "Trie2");
          __name2(Trie2, "Trie");
          Trie2.prototype.get = function(codePoint) {
            var ix;
            if (codePoint >= 0) {
              if (codePoint < 55296 || codePoint > 56319 && codePoint <= 65535) {
                ix = this.index[codePoint >> UTRIE2_SHIFT_2$1];
                ix = (ix << UTRIE2_INDEX_SHIFT$1) + (codePoint & UTRIE2_DATA_MASK$1);
                return this.data[ix];
              }
              if (codePoint <= 65535) {
                ix = this.index[UTRIE2_LSCP_INDEX_2_OFFSET$1 + (codePoint - 55296 >> UTRIE2_SHIFT_2$1)];
                ix = (ix << UTRIE2_INDEX_SHIFT$1) + (codePoint & UTRIE2_DATA_MASK$1);
                return this.data[ix];
              }
              if (codePoint < this.highStart) {
                ix = UTRIE2_INDEX_1_OFFSET$1 - UTRIE2_OMITTED_BMP_INDEX_1_LENGTH$1 + (codePoint >> UTRIE2_SHIFT_1$1);
                ix = this.index[ix];
                ix += codePoint >> UTRIE2_SHIFT_2$1 & UTRIE2_INDEX_2_MASK$1;
                ix = this.index[ix];
                ix = (ix << UTRIE2_INDEX_SHIFT$1) + (codePoint & UTRIE2_DATA_MASK$1);
                return this.data[ix];
              }
              if (codePoint <= 1114111) {
                return this.data[this.highValueIndex];
              }
            }
            return this.errorValue;
          };
          return Trie2;
        }()
      );
      var chars$3 = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";
      var lookup$3 = typeof Uint8Array === "undefined" ? [] : new Uint8Array(256);
      for (var i$3 = 0; i$3 < chars$3.length; i$3++) {
        lookup$3[chars$3.charCodeAt(i$3)] = i$3;
      }
      var base64$1 = "KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==";
      var LETTER_NUMBER_MODIFIER = 50;
      var BK = 1;
      var CR$1 = 2;
      var LF$1 = 3;
      var CM = 4;
      var NL = 5;
      var WJ = 7;
      var ZW = 8;
      var GL = 9;
      var SP = 10;
      var ZWJ$1 = 11;
      var B2 = 12;
      var BA = 13;
      var BB = 14;
      var HY = 15;
      var CB = 16;
      var CL = 17;
      var CP = 18;
      var EX = 19;
      var IN = 20;
      var NS = 21;
      var OP = 22;
      var QU = 23;
      var IS = 24;
      var NU = 25;
      var PO = 26;
      var PR = 27;
      var SY = 28;
      var AI = 29;
      var AL = 30;
      var CJ = 31;
      var EB = 32;
      var EM = 33;
      var H2 = 34;
      var H3 = 35;
      var HL = 36;
      var ID = 37;
      var JL = 38;
      var JV = 39;
      var JT = 40;
      var RI$1 = 41;
      var SA = 42;
      var XX = 43;
      var ea_OP = [9001, 65288];
      var BREAK_MANDATORY = "!";
      var BREAK_NOT_ALLOWED$1 = "\xD7";
      var BREAK_ALLOWED$1 = "\xF7";
      var UnicodeTrie$1 = createTrieFromBase64$1(base64$1);
      var ALPHABETICS = [AL, HL];
      var HARD_LINE_BREAKS = [BK, CR$1, LF$1, NL];
      var SPACE$1 = [SP, ZW];
      var PREFIX_POSTFIX = [PR, PO];
      var LINE_BREAKS = HARD_LINE_BREAKS.concat(SPACE$1);
      var KOREAN_SYLLABLE_BLOCK = [JL, JV, JT, H2, H3];
      var HYPHEN = [HY, BA];
      var codePointsToCharacterClasses = /* @__PURE__ */ __name2(function(codePoints, lineBreak2) {
        if (lineBreak2 === void 0) {
          lineBreak2 = "strict";
        }
        var types = [];
        var indices = [];
        var categories = [];
        codePoints.forEach(function(codePoint, index2) {
          var classType = UnicodeTrie$1.get(codePoint);
          if (classType > LETTER_NUMBER_MODIFIER) {
            categories.push(true);
            classType -= LETTER_NUMBER_MODIFIER;
          } else {
            categories.push(false);
          }
          if (["normal", "auto", "loose"].indexOf(lineBreak2) !== -1) {
            if ([8208, 8211, 12316, 12448].indexOf(codePoint) !== -1) {
              indices.push(index2);
              return types.push(CB);
            }
          }
          if (classType === CM || classType === ZWJ$1) {
            if (index2 === 0) {
              indices.push(index2);
              return types.push(AL);
            }
            var prev = types[index2 - 1];
            if (LINE_BREAKS.indexOf(prev) === -1) {
              indices.push(indices[index2 - 1]);
              return types.push(prev);
            }
            indices.push(index2);
            return types.push(AL);
          }
          indices.push(index2);
          if (classType === CJ) {
            return types.push(lineBreak2 === "strict" ? NS : ID);
          }
          if (classType === SA) {
            return types.push(AL);
          }
          if (classType === AI) {
            return types.push(AL);
          }
          if (classType === XX) {
            if (codePoint >= 131072 && codePoint <= 196605 || codePoint >= 196608 && codePoint <= 262141) {
              return types.push(ID);
            } else {
              return types.push(AL);
            }
          }
          types.push(classType);
        });
        return [indices, types, categories];
      }, "codePointsToCharacterClasses");
      var isAdjacentWithSpaceIgnored = /* @__PURE__ */ __name2(function(a4, b2, currentIndex, classTypes) {
        var current = classTypes[currentIndex];
        if (Array.isArray(a4) ? a4.indexOf(current) !== -1 : a4 === current) {
          var i4 = currentIndex;
          while (i4 <= classTypes.length) {
            i4++;
            var next = classTypes[i4];
            if (next === b2) {
              return true;
            }
            if (next !== SP) {
              break;
            }
          }
        }
        if (current === SP) {
          var i4 = currentIndex;
          while (i4 > 0) {
            i4--;
            var prev = classTypes[i4];
            if (Array.isArray(a4) ? a4.indexOf(prev) !== -1 : a4 === prev) {
              var n3 = currentIndex;
              while (n3 <= classTypes.length) {
                n3++;
                var next = classTypes[n3];
                if (next === b2) {
                  return true;
                }
                if (next !== SP) {
                  break;
                }
              }
            }
            if (prev !== SP) {
              break;
            }
          }
        }
        return false;
      }, "isAdjacentWithSpaceIgnored");
      var previousNonSpaceClassType = /* @__PURE__ */ __name2(function(currentIndex, classTypes) {
        var i4 = currentIndex;
        while (i4 >= 0) {
          var type = classTypes[i4];
          if (type === SP) {
            i4--;
          } else {
            return type;
          }
        }
        return 0;
      }, "previousNonSpaceClassType");
      var _lineBreakAtIndex = /* @__PURE__ */ __name2(function(codePoints, classTypes, indicies, index2, forbiddenBreaks) {
        if (indicies[index2] === 0) {
          return BREAK_NOT_ALLOWED$1;
        }
        var currentIndex = index2 - 1;
        if (Array.isArray(forbiddenBreaks) && forbiddenBreaks[currentIndex] === true) {
          return BREAK_NOT_ALLOWED$1;
        }
        var beforeIndex = currentIndex - 1;
        var afterIndex = currentIndex + 1;
        var current = classTypes[currentIndex];
        var before = beforeIndex >= 0 ? classTypes[beforeIndex] : 0;
        var next = classTypes[afterIndex];
        if (current === CR$1 && next === LF$1) {
          return BREAK_NOT_ALLOWED$1;
        }
        if (HARD_LINE_BREAKS.indexOf(current) !== -1) {
          return BREAK_MANDATORY;
        }
        if (HARD_LINE_BREAKS.indexOf(next) !== -1) {
          return BREAK_NOT_ALLOWED$1;
        }
        if (SPACE$1.indexOf(next) !== -1) {
          return BREAK_NOT_ALLOWED$1;
        }
        if (previousNonSpaceClassType(currentIndex, classTypes) === ZW) {
          return BREAK_ALLOWED$1;
        }
        if (UnicodeTrie$1.get(codePoints[currentIndex]) === ZWJ$1) {
          return BREAK_NOT_ALLOWED$1;
        }
        if ((current === EB || current === EM) && UnicodeTrie$1.get(codePoints[afterIndex]) === ZWJ$1) {
          return BREAK_NOT_ALLOWED$1;
        }
        if (current === WJ || next === WJ) {
          return BREAK_NOT_ALLOWED$1;
        }
        if (current === GL) {
          return BREAK_NOT_ALLOWED$1;
        }
        if ([SP, BA, HY].indexOf(current) === -1 && next === GL) {
          return BREAK_NOT_ALLOWED$1;
        }
        if ([CL, CP, EX, IS, SY].indexOf(next) !== -1) {
          return BREAK_NOT_ALLOWED$1;
        }
        if (previousNonSpaceClassType(currentIndex, classTypes) === OP) {
          return BREAK_NOT_ALLOWED$1;
        }
        if (isAdjacentWithSpaceIgnored(QU, OP, currentIndex, classTypes)) {
          return BREAK_NOT_ALLOWED$1;
        }
        if (isAdjacentWithSpaceIgnored([CL, CP], NS, currentIndex, classTypes)) {
          return BREAK_NOT_ALLOWED$1;
        }
        if (isAdjacentWithSpaceIgnored(B2, B2, currentIndex, classTypes)) {
          return BREAK_NOT_ALLOWED$1;
        }
        if (current === SP) {
          return BREAK_ALLOWED$1;
        }
        if (current === QU || next === QU) {
          return BREAK_NOT_ALLOWED$1;
        }
        if (next === CB || current === CB) {
          return BREAK_ALLOWED$1;
        }
        if ([BA, HY, NS].indexOf(next) !== -1 || current === BB) {
          return BREAK_NOT_ALLOWED$1;
        }
        if (before === HL && HYPHEN.indexOf(current) !== -1) {
          return BREAK_NOT_ALLOWED$1;
        }
        if (current === SY && next === HL) {
          return BREAK_NOT_ALLOWED$1;
        }
        if (next === IN) {
          return BREAK_NOT_ALLOWED$1;
        }
        if (ALPHABETICS.indexOf(next) !== -1 && current === NU || ALPHABETICS.indexOf(current) !== -1 && next === NU) {
          return BREAK_NOT_ALLOWED$1;
        }
        if (current === PR && [ID, EB, EM].indexOf(next) !== -1 || [ID, EB, EM].indexOf(current) !== -1 && next === PO) {
          return BREAK_NOT_ALLOWED$1;
        }
        if (ALPHABETICS.indexOf(current) !== -1 && PREFIX_POSTFIX.indexOf(next) !== -1 || PREFIX_POSTFIX.indexOf(current) !== -1 && ALPHABETICS.indexOf(next) !== -1) {
          return BREAK_NOT_ALLOWED$1;
        }
        if (
          // (PR | PO)  ( OP | HY )? NU
          [PR, PO].indexOf(current) !== -1 && (next === NU || [OP, HY].indexOf(next) !== -1 && classTypes[afterIndex + 1] === NU) || // ( OP | HY )  NU
          [OP, HY].indexOf(current) !== -1 && next === NU || // NU 	(NU | SY | IS)
          current === NU && [NU, SY, IS].indexOf(next) !== -1
        ) {
          return BREAK_NOT_ALLOWED$1;
        }
        if ([NU, SY, IS, CL, CP].indexOf(next) !== -1) {
          var prevIndex = currentIndex;
          while (prevIndex >= 0) {
            var type = classTypes[prevIndex];
            if (type === NU) {
              return BREAK_NOT_ALLOWED$1;
            } else if ([SY, IS].indexOf(type) !== -1) {
              prevIndex--;
            } else {
              break;
            }
          }
        }
        if ([PR, PO].indexOf(next) !== -1) {
          var prevIndex = [CL, CP].indexOf(current) !== -1 ? beforeIndex : currentIndex;
          while (prevIndex >= 0) {
            var type = classTypes[prevIndex];
            if (type === NU) {
              return BREAK_NOT_ALLOWED$1;
            } else if ([SY, IS].indexOf(type) !== -1) {
              prevIndex--;
            } else {
              break;
            }
          }
        }
        if (JL === current && [JL, JV, H2, H3].indexOf(next) !== -1 || [JV, H2].indexOf(current) !== -1 && [JV, JT].indexOf(next) !== -1 || [JT, H3].indexOf(current) !== -1 && next === JT) {
          return BREAK_NOT_ALLOWED$1;
        }
        if (KOREAN_SYLLABLE_BLOCK.indexOf(current) !== -1 && [IN, PO].indexOf(next) !== -1 || KOREAN_SYLLABLE_BLOCK.indexOf(next) !== -1 && current === PR) {
          return BREAK_NOT_ALLOWED$1;
        }
        if (ALPHABETICS.indexOf(current) !== -1 && ALPHABETICS.indexOf(next) !== -1) {
          return BREAK_NOT_ALLOWED$1;
        }
        if (current === IS && ALPHABETICS.indexOf(next) !== -1) {
          return BREAK_NOT_ALLOWED$1;
        }
        if (ALPHABETICS.concat(NU).indexOf(current) !== -1 && next === OP && ea_OP.indexOf(codePoints[afterIndex]) === -1 || ALPHABETICS.concat(NU).indexOf(next) !== -1 && current === CP) {
          return BREAK_NOT_ALLOWED$1;
        }
        if (current === RI$1 && next === RI$1) {
          var i4 = indicies[currentIndex];
          var count2 = 1;
          while (i4 > 0) {
            i4--;
            if (classTypes[i4] === RI$1) {
              count2++;
            } else {
              break;
            }
          }
          if (count2 % 2 !== 0) {
            return BREAK_NOT_ALLOWED$1;
          }
        }
        if (current === EB && next === EM) {
          return BREAK_NOT_ALLOWED$1;
        }
        return BREAK_ALLOWED$1;
      }, "_lineBreakAtIndex");
      var cssFormattedClasses = /* @__PURE__ */ __name2(function(codePoints, options) {
        if (!options) {
          options = { lineBreak: "normal", wordBreak: "normal" };
        }
        var _a2 = codePointsToCharacterClasses(codePoints, options.lineBreak), indicies = _a2[0], classTypes = _a2[1], isLetterNumber = _a2[2];
        if (options.wordBreak === "break-all" || options.wordBreak === "break-word") {
          classTypes = classTypes.map(function(type) {
            return [NU, AL, SA].indexOf(type) !== -1 ? ID : type;
          });
        }
        var forbiddenBreakpoints = options.wordBreak === "keep-all" ? isLetterNumber.map(function(letterNumber, i4) {
          return letterNumber && codePoints[i4] >= 19968 && codePoints[i4] <= 40959;
        }) : void 0;
        return [indicies, classTypes, forbiddenBreakpoints];
      }, "cssFormattedClasses");
      var Break = (
        /** @class */
        function() {
          function Break2(codePoints, lineBreak2, start, end) {
            this.codePoints = codePoints;
            this.required = lineBreak2 === BREAK_MANDATORY;
            this.start = start;
            this.end = end;
          }
          __name(Break2, "Break2");
          __name2(Break2, "Break");
          Break2.prototype.slice = function() {
            return fromCodePoint$1.apply(void 0, this.codePoints.slice(this.start, this.end));
          };
          return Break2;
        }()
      );
      var LineBreaker = /* @__PURE__ */ __name2(function(str, options) {
        var codePoints = toCodePoints$1(str);
        var _a2 = cssFormattedClasses(codePoints, options), indicies = _a2[0], classTypes = _a2[1], forbiddenBreakpoints = _a2[2];
        var length = codePoints.length;
        var lastEnd = 0;
        var nextIndex = 0;
        return {
          next: /* @__PURE__ */ __name2(function() {
            if (nextIndex >= length) {
              return { done: true, value: null };
            }
            var lineBreak2 = BREAK_NOT_ALLOWED$1;
            while (nextIndex < length && (lineBreak2 = _lineBreakAtIndex(codePoints, classTypes, indicies, ++nextIndex, forbiddenBreakpoints)) === BREAK_NOT_ALLOWED$1) {
            }
            if (lineBreak2 !== BREAK_NOT_ALLOWED$1 || nextIndex === length) {
              var value = new Break(codePoints, lineBreak2, lastEnd, nextIndex);
              lastEnd = nextIndex;
              return { value, done: false };
            }
            return { done: true, value: null };
          }, "next")
        };
      }, "LineBreaker");
      var FLAG_UNRESTRICTED = 1 << 0;
      var FLAG_ID = 1 << 1;
      var FLAG_INTEGER = 1 << 2;
      var FLAG_NUMBER = 1 << 3;
      var LINE_FEED = 10;
      var SOLIDUS = 47;
      var REVERSE_SOLIDUS = 92;
      var CHARACTER_TABULATION = 9;
      var SPACE = 32;
      var QUOTATION_MARK = 34;
      var EQUALS_SIGN = 61;
      var NUMBER_SIGN = 35;
      var DOLLAR_SIGN = 36;
      var PERCENTAGE_SIGN = 37;
      var APOSTROPHE = 39;
      var LEFT_PARENTHESIS = 40;
      var RIGHT_PARENTHESIS = 41;
      var LOW_LINE = 95;
      var HYPHEN_MINUS = 45;
      var EXCLAMATION_MARK = 33;
      var LESS_THAN_SIGN = 60;
      var GREATER_THAN_SIGN = 62;
      var COMMERCIAL_AT = 64;
      var LEFT_SQUARE_BRACKET = 91;
      var RIGHT_SQUARE_BRACKET = 93;
      var CIRCUMFLEX_ACCENT = 61;
      var LEFT_CURLY_BRACKET = 123;
      var QUESTION_MARK = 63;
      var RIGHT_CURLY_BRACKET = 125;
      var VERTICAL_LINE = 124;
      var TILDE = 126;
      var CONTROL = 128;
      var REPLACEMENT_CHARACTER = 65533;
      var ASTERISK = 42;
      var PLUS_SIGN = 43;
      var COMMA = 44;
      var COLON = 58;
      var SEMICOLON = 59;
      var FULL_STOP = 46;
      var NULL = 0;
      var BACKSPACE = 8;
      var LINE_TABULATION = 11;
      var SHIFT_OUT = 14;
      var INFORMATION_SEPARATOR_ONE = 31;
      var DELETE = 127;
      var EOF = -1;
      var ZERO = 48;
      var a3 = 97;
      var e2 = 101;
      var f3 = 102;
      var u3 = 117;
      var z3 = 122;
      var A2 = 65;
      var E2 = 69;
      var F2 = 70;
      var U2 = 85;
      var Z2 = 90;
      var isDigit = /* @__PURE__ */ __name2(function(codePoint) {
        return codePoint >= ZERO && codePoint <= 57;
      }, "isDigit");
      var isSurrogateCodePoint = /* @__PURE__ */ __name2(function(codePoint) {
        return codePoint >= 55296 && codePoint <= 57343;
      }, "isSurrogateCodePoint");
      var isHex = /* @__PURE__ */ __name2(function(codePoint) {
        return isDigit(codePoint) || codePoint >= A2 && codePoint <= F2 || codePoint >= a3 && codePoint <= f3;
      }, "isHex");
      var isLowerCaseLetter = /* @__PURE__ */ __name2(function(codePoint) {
        return codePoint >= a3 && codePoint <= z3;
      }, "isLowerCaseLetter");
      var isUpperCaseLetter = /* @__PURE__ */ __name2(function(codePoint) {
        return codePoint >= A2 && codePoint <= Z2;
      }, "isUpperCaseLetter");
      var isLetter = /* @__PURE__ */ __name2(function(codePoint) {
        return isLowerCaseLetter(codePoint) || isUpperCaseLetter(codePoint);
      }, "isLetter");
      var isNonASCIICodePoint = /* @__PURE__ */ __name2(function(codePoint) {
        return codePoint >= CONTROL;
      }, "isNonASCIICodePoint");
      var isWhiteSpace = /* @__PURE__ */ __name2(function(codePoint) {
        return codePoint === LINE_FEED || codePoint === CHARACTER_TABULATION || codePoint === SPACE;
      }, "isWhiteSpace");
      var isNameStartCodePoint = /* @__PURE__ */ __name2(function(codePoint) {
        return isLetter(codePoint) || isNonASCIICodePoint(codePoint) || codePoint === LOW_LINE;
      }, "isNameStartCodePoint");
      var isNameCodePoint = /* @__PURE__ */ __name2(function(codePoint) {
        return isNameStartCodePoint(codePoint) || isDigit(codePoint) || codePoint === HYPHEN_MINUS;
      }, "isNameCodePoint");
      var isNonPrintableCodePoint = /* @__PURE__ */ __name2(function(codePoint) {
        return codePoint >= NULL && codePoint <= BACKSPACE || codePoint === LINE_TABULATION || codePoint >= SHIFT_OUT && codePoint <= INFORMATION_SEPARATOR_ONE || codePoint === DELETE;
      }, "isNonPrintableCodePoint");
      var isValidEscape = /* @__PURE__ */ __name2(function(c1, c22) {
        if (c1 !== REVERSE_SOLIDUS) {
          return false;
        }
        return c22 !== LINE_FEED;
      }, "isValidEscape");
      var isIdentifierStart = /* @__PURE__ */ __name2(function(c1, c22, c32) {
        if (c1 === HYPHEN_MINUS) {
          return isNameStartCodePoint(c22) || isValidEscape(c22, c32);
        } else if (isNameStartCodePoint(c1)) {
          return true;
        } else if (c1 === REVERSE_SOLIDUS && isValidEscape(c1, c22)) {
          return true;
        }
        return false;
      }, "isIdentifierStart");
      var isNumberStart = /* @__PURE__ */ __name2(function(c1, c22, c32) {
        if (c1 === PLUS_SIGN || c1 === HYPHEN_MINUS) {
          if (isDigit(c22)) {
            return true;
          }
          return c22 === FULL_STOP && isDigit(c32);
        }
        if (c1 === FULL_STOP) {
          return isDigit(c22);
        }
        return isDigit(c1);
      }, "isNumberStart");
      var stringToNumber = /* @__PURE__ */ __name2(function(codePoints) {
        var c4 = 0;
        var sign = 1;
        if (codePoints[c4] === PLUS_SIGN || codePoints[c4] === HYPHEN_MINUS) {
          if (codePoints[c4] === HYPHEN_MINUS) {
            sign = -1;
          }
          c4++;
        }
        var integers = [];
        while (isDigit(codePoints[c4])) {
          integers.push(codePoints[c4++]);
        }
        var int = integers.length ? parseInt(fromCodePoint$1.apply(void 0, integers), 10) : 0;
        if (codePoints[c4] === FULL_STOP) {
          c4++;
        }
        var fraction = [];
        while (isDigit(codePoints[c4])) {
          fraction.push(codePoints[c4++]);
        }
        var fracd = fraction.length;
        var frac = fracd ? parseInt(fromCodePoint$1.apply(void 0, fraction), 10) : 0;
        if (codePoints[c4] === E2 || codePoints[c4] === e2) {
          c4++;
        }
        var expsign = 1;
        if (codePoints[c4] === PLUS_SIGN || codePoints[c4] === HYPHEN_MINUS) {
          if (codePoints[c4] === HYPHEN_MINUS) {
            expsign = -1;
          }
          c4++;
        }
        var exponent = [];
        while (isDigit(codePoints[c4])) {
          exponent.push(codePoints[c4++]);
        }
        var exp = exponent.length ? parseInt(fromCodePoint$1.apply(void 0, exponent), 10) : 0;
        return sign * (int + frac * Math.pow(10, -fracd)) * Math.pow(10, expsign * exp);
      }, "stringToNumber");
      var LEFT_PARENTHESIS_TOKEN = {
        type: 2
        /* LEFT_PARENTHESIS_TOKEN */
      };
      var RIGHT_PARENTHESIS_TOKEN = {
        type: 3
        /* RIGHT_PARENTHESIS_TOKEN */
      };
      var COMMA_TOKEN = {
        type: 4
        /* COMMA_TOKEN */
      };
      var SUFFIX_MATCH_TOKEN = {
        type: 13
        /* SUFFIX_MATCH_TOKEN */
      };
      var PREFIX_MATCH_TOKEN = {
        type: 8
        /* PREFIX_MATCH_TOKEN */
      };
      var COLUMN_TOKEN = {
        type: 21
        /* COLUMN_TOKEN */
      };
      var DASH_MATCH_TOKEN = {
        type: 9
        /* DASH_MATCH_TOKEN */
      };
      var INCLUDE_MATCH_TOKEN = {
        type: 10
        /* INCLUDE_MATCH_TOKEN */
      };
      var LEFT_CURLY_BRACKET_TOKEN = {
        type: 11
        /* LEFT_CURLY_BRACKET_TOKEN */
      };
      var RIGHT_CURLY_BRACKET_TOKEN = {
        type: 12
        /* RIGHT_CURLY_BRACKET_TOKEN */
      };
      var SUBSTRING_MATCH_TOKEN = {
        type: 14
        /* SUBSTRING_MATCH_TOKEN */
      };
      var BAD_URL_TOKEN = {
        type: 23
        /* BAD_URL_TOKEN */
      };
      var BAD_STRING_TOKEN = {
        type: 1
        /* BAD_STRING_TOKEN */
      };
      var CDO_TOKEN = {
        type: 25
        /* CDO_TOKEN */
      };
      var CDC_TOKEN = {
        type: 24
        /* CDC_TOKEN */
      };
      var COLON_TOKEN = {
        type: 26
        /* COLON_TOKEN */
      };
      var SEMICOLON_TOKEN = {
        type: 27
        /* SEMICOLON_TOKEN */
      };
      var LEFT_SQUARE_BRACKET_TOKEN = {
        type: 28
        /* LEFT_SQUARE_BRACKET_TOKEN */
      };
      var RIGHT_SQUARE_BRACKET_TOKEN = {
        type: 29
        /* RIGHT_SQUARE_BRACKET_TOKEN */
      };
      var WHITESPACE_TOKEN = {
        type: 31
        /* WHITESPACE_TOKEN */
      };
      var EOF_TOKEN = {
        type: 32
        /* EOF_TOKEN */
      };
      var Tokenizer = (
        /** @class */
        function() {
          function Tokenizer2() {
            this._value = [];
          }
          __name(Tokenizer2, "Tokenizer2");
          __name2(Tokenizer2, "Tokenizer");
          Tokenizer2.prototype.write = function(chunk) {
            this._value = this._value.concat(toCodePoints$1(chunk));
          };
          Tokenizer2.prototype.read = function() {
            var tokens = [];
            var token = this.consumeToken();
            while (token !== EOF_TOKEN) {
              tokens.push(token);
              token = this.consumeToken();
            }
            return tokens;
          };
          Tokenizer2.prototype.consumeToken = function() {
            var codePoint = this.consumeCodePoint();
            switch (codePoint) {
              case QUOTATION_MARK:
                return this.consumeStringToken(QUOTATION_MARK);
              case NUMBER_SIGN:
                var c1 = this.peekCodePoint(0);
                var c22 = this.peekCodePoint(1);
                var c32 = this.peekCodePoint(2);
                if (isNameCodePoint(c1) || isValidEscape(c22, c32)) {
                  var flags2 = isIdentifierStart(c1, c22, c32) ? FLAG_ID : FLAG_UNRESTRICTED;
                  var value = this.consumeName();
                  return { type: 5, value, flags: flags2 };
                }
                break;
              case DOLLAR_SIGN:
                if (this.peekCodePoint(0) === EQUALS_SIGN) {
                  this.consumeCodePoint();
                  return SUFFIX_MATCH_TOKEN;
                }
                break;
              case APOSTROPHE:
                return this.consumeStringToken(APOSTROPHE);
              case LEFT_PARENTHESIS:
                return LEFT_PARENTHESIS_TOKEN;
              case RIGHT_PARENTHESIS:
                return RIGHT_PARENTHESIS_TOKEN;
              case ASTERISK:
                if (this.peekCodePoint(0) === EQUALS_SIGN) {
                  this.consumeCodePoint();
                  return SUBSTRING_MATCH_TOKEN;
                }
                break;
              case PLUS_SIGN:
                if (isNumberStart(codePoint, this.peekCodePoint(0), this.peekCodePoint(1))) {
                  this.reconsumeCodePoint(codePoint);
                  return this.consumeNumericToken();
                }
                break;
              case COMMA:
                return COMMA_TOKEN;
              case HYPHEN_MINUS:
                var e1 = codePoint;
                var e22 = this.peekCodePoint(0);
                var e3 = this.peekCodePoint(1);
                if (isNumberStart(e1, e22, e3)) {
                  this.reconsumeCodePoint(codePoint);
                  return this.consumeNumericToken();
                }
                if (isIdentifierStart(e1, e22, e3)) {
                  this.reconsumeCodePoint(codePoint);
                  return this.consumeIdentLikeToken();
                }
                if (e22 === HYPHEN_MINUS && e3 === GREATER_THAN_SIGN) {
                  this.consumeCodePoint();
                  this.consumeCodePoint();
                  return CDC_TOKEN;
                }
                break;
              case FULL_STOP:
                if (isNumberStart(codePoint, this.peekCodePoint(0), this.peekCodePoint(1))) {
                  this.reconsumeCodePoint(codePoint);
                  return this.consumeNumericToken();
                }
                break;
              case SOLIDUS:
                if (this.peekCodePoint(0) === ASTERISK) {
                  this.consumeCodePoint();
                  while (true) {
                    var c4 = this.consumeCodePoint();
                    if (c4 === ASTERISK) {
                      c4 = this.consumeCodePoint();
                      if (c4 === SOLIDUS) {
                        return this.consumeToken();
                      }
                    }
                    if (c4 === EOF) {
                      return this.consumeToken();
                    }
                  }
                }
                break;
              case COLON:
                return COLON_TOKEN;
              case SEMICOLON:
                return SEMICOLON_TOKEN;
              case LESS_THAN_SIGN:
                if (this.peekCodePoint(0) === EXCLAMATION_MARK && this.peekCodePoint(1) === HYPHEN_MINUS && this.peekCodePoint(2) === HYPHEN_MINUS) {
                  this.consumeCodePoint();
                  this.consumeCodePoint();
                  return CDO_TOKEN;
                }
                break;
              case COMMERCIAL_AT:
                var a1 = this.peekCodePoint(0);
                var a22 = this.peekCodePoint(1);
                var a32 = this.peekCodePoint(2);
                if (isIdentifierStart(a1, a22, a32)) {
                  var value = this.consumeName();
                  return { type: 7, value };
                }
                break;
              case LEFT_SQUARE_BRACKET:
                return LEFT_SQUARE_BRACKET_TOKEN;
              case REVERSE_SOLIDUS:
                if (isValidEscape(codePoint, this.peekCodePoint(0))) {
                  this.reconsumeCodePoint(codePoint);
                  return this.consumeIdentLikeToken();
                }
                break;
              case RIGHT_SQUARE_BRACKET:
                return RIGHT_SQUARE_BRACKET_TOKEN;
              case CIRCUMFLEX_ACCENT:
                if (this.peekCodePoint(0) === EQUALS_SIGN) {
                  this.consumeCodePoint();
                  return PREFIX_MATCH_TOKEN;
                }
                break;
              case LEFT_CURLY_BRACKET:
                return LEFT_CURLY_BRACKET_TOKEN;
              case RIGHT_CURLY_BRACKET:
                return RIGHT_CURLY_BRACKET_TOKEN;
              case u3:
              case U2:
                var u1 = this.peekCodePoint(0);
                var u22 = this.peekCodePoint(1);
                if (u1 === PLUS_SIGN && (isHex(u22) || u22 === QUESTION_MARK)) {
                  this.consumeCodePoint();
                  this.consumeUnicodeRangeToken();
                }
                this.reconsumeCodePoint(codePoint);
                return this.consumeIdentLikeToken();
              case VERTICAL_LINE:
                if (this.peekCodePoint(0) === EQUALS_SIGN) {
                  this.consumeCodePoint();
                  return DASH_MATCH_TOKEN;
                }
                if (this.peekCodePoint(0) === VERTICAL_LINE) {
                  this.consumeCodePoint();
                  return COLUMN_TOKEN;
                }
                break;
              case TILDE:
                if (this.peekCodePoint(0) === EQUALS_SIGN) {
                  this.consumeCodePoint();
                  return INCLUDE_MATCH_TOKEN;
                }
                break;
              case EOF:
                return EOF_TOKEN;
            }
            if (isWhiteSpace(codePoint)) {
              this.consumeWhiteSpace();
              return WHITESPACE_TOKEN;
            }
            if (isDigit(codePoint)) {
              this.reconsumeCodePoint(codePoint);
              return this.consumeNumericToken();
            }
            if (isNameStartCodePoint(codePoint)) {
              this.reconsumeCodePoint(codePoint);
              return this.consumeIdentLikeToken();
            }
            return { type: 6, value: fromCodePoint$1(codePoint) };
          };
          Tokenizer2.prototype.consumeCodePoint = function() {
            var value = this._value.shift();
            return typeof value === "undefined" ? -1 : value;
          };
          Tokenizer2.prototype.reconsumeCodePoint = function(codePoint) {
            this._value.unshift(codePoint);
          };
          Tokenizer2.prototype.peekCodePoint = function(delta) {
            if (delta >= this._value.length) {
              return -1;
            }
            return this._value[delta];
          };
          Tokenizer2.prototype.consumeUnicodeRangeToken = function() {
            var digits = [];
            var codePoint = this.consumeCodePoint();
            while (isHex(codePoint) && digits.length < 6) {
              digits.push(codePoint);
              codePoint = this.consumeCodePoint();
            }
            var questionMarks = false;
            while (codePoint === QUESTION_MARK && digits.length < 6) {
              digits.push(codePoint);
              codePoint = this.consumeCodePoint();
              questionMarks = true;
            }
            if (questionMarks) {
              var start_1 = parseInt(fromCodePoint$1.apply(void 0, digits.map(function(digit) {
                return digit === QUESTION_MARK ? ZERO : digit;
              })), 16);
              var end = parseInt(fromCodePoint$1.apply(void 0, digits.map(function(digit) {
                return digit === QUESTION_MARK ? F2 : digit;
              })), 16);
              return { type: 30, start: start_1, end };
            }
            var start = parseInt(fromCodePoint$1.apply(void 0, digits), 16);
            if (this.peekCodePoint(0) === HYPHEN_MINUS && isHex(this.peekCodePoint(1))) {
              this.consumeCodePoint();
              codePoint = this.consumeCodePoint();
              var endDigits = [];
              while (isHex(codePoint) && endDigits.length < 6) {
                endDigits.push(codePoint);
                codePoint = this.consumeCodePoint();
              }
              var end = parseInt(fromCodePoint$1.apply(void 0, endDigits), 16);
              return { type: 30, start, end };
            } else {
              return { type: 30, start, end: start };
            }
          };
          Tokenizer2.prototype.consumeIdentLikeToken = function() {
            var value = this.consumeName();
            if (value.toLowerCase() === "url" && this.peekCodePoint(0) === LEFT_PARENTHESIS) {
              this.consumeCodePoint();
              return this.consumeUrlToken();
            } else if (this.peekCodePoint(0) === LEFT_PARENTHESIS) {
              this.consumeCodePoint();
              return { type: 19, value };
            }
            return { type: 20, value };
          };
          Tokenizer2.prototype.consumeUrlToken = function() {
            var value = [];
            this.consumeWhiteSpace();
            if (this.peekCodePoint(0) === EOF) {
              return { type: 22, value: "" };
            }
            var next = this.peekCodePoint(0);
            if (next === APOSTROPHE || next === QUOTATION_MARK) {
              var stringToken = this.consumeStringToken(this.consumeCodePoint());
              if (stringToken.type === 0) {
                this.consumeWhiteSpace();
                if (this.peekCodePoint(0) === EOF || this.peekCodePoint(0) === RIGHT_PARENTHESIS) {
                  this.consumeCodePoint();
                  return { type: 22, value: stringToken.value };
                }
              }
              this.consumeBadUrlRemnants();
              return BAD_URL_TOKEN;
            }
            while (true) {
              var codePoint = this.consumeCodePoint();
              if (codePoint === EOF || codePoint === RIGHT_PARENTHESIS) {
                return { type: 22, value: fromCodePoint$1.apply(void 0, value) };
              } else if (isWhiteSpace(codePoint)) {
                this.consumeWhiteSpace();
                if (this.peekCodePoint(0) === EOF || this.peekCodePoint(0) === RIGHT_PARENTHESIS) {
                  this.consumeCodePoint();
                  return { type: 22, value: fromCodePoint$1.apply(void 0, value) };
                }
                this.consumeBadUrlRemnants();
                return BAD_URL_TOKEN;
              } else if (codePoint === QUOTATION_MARK || codePoint === APOSTROPHE || codePoint === LEFT_PARENTHESIS || isNonPrintableCodePoint(codePoint)) {
                this.consumeBadUrlRemnants();
                return BAD_URL_TOKEN;
              } else if (codePoint === REVERSE_SOLIDUS) {
                if (isValidEscape(codePoint, this.peekCodePoint(0))) {
                  value.push(this.consumeEscapedCodePoint());
                } else {
                  this.consumeBadUrlRemnants();
                  return BAD_URL_TOKEN;
                }
              } else {
                value.push(codePoint);
              }
            }
          };
          Tokenizer2.prototype.consumeWhiteSpace = function() {
            while (isWhiteSpace(this.peekCodePoint(0))) {
              this.consumeCodePoint();
            }
          };
          Tokenizer2.prototype.consumeBadUrlRemnants = function() {
            while (true) {
              var codePoint = this.consumeCodePoint();
              if (codePoint === RIGHT_PARENTHESIS || codePoint === EOF) {
                return;
              }
              if (isValidEscape(codePoint, this.peekCodePoint(0))) {
                this.consumeEscapedCodePoint();
              }
            }
          };
          Tokenizer2.prototype.consumeStringSlice = function(count2) {
            var SLICE_STACK_SIZE = 5e4;
            var value = "";
            while (count2 > 0) {
              var amount = Math.min(SLICE_STACK_SIZE, count2);
              value += fromCodePoint$1.apply(void 0, this._value.splice(0, amount));
              count2 -= amount;
            }
            this._value.shift();
            return value;
          };
          Tokenizer2.prototype.consumeStringToken = function(endingCodePoint) {
            var value = "";
            var i4 = 0;
            do {
              var codePoint = this._value[i4];
              if (codePoint === EOF || codePoint === void 0 || codePoint === endingCodePoint) {
                value += this.consumeStringSlice(i4);
                return { type: 0, value };
              }
              if (codePoint === LINE_FEED) {
                this._value.splice(0, i4);
                return BAD_STRING_TOKEN;
              }
              if (codePoint === REVERSE_SOLIDUS) {
                var next = this._value[i4 + 1];
                if (next !== EOF && next !== void 0) {
                  if (next === LINE_FEED) {
                    value += this.consumeStringSlice(i4);
                    i4 = -1;
                    this._value.shift();
                  } else if (isValidEscape(codePoint, next)) {
                    value += this.consumeStringSlice(i4);
                    value += fromCodePoint$1(this.consumeEscapedCodePoint());
                    i4 = -1;
                  }
                }
              }
              i4++;
            } while (true);
          };
          Tokenizer2.prototype.consumeNumber = function() {
            var repr = [];
            var type = FLAG_INTEGER;
            var c1 = this.peekCodePoint(0);
            if (c1 === PLUS_SIGN || c1 === HYPHEN_MINUS) {
              repr.push(this.consumeCodePoint());
            }
            while (isDigit(this.peekCodePoint(0))) {
              repr.push(this.consumeCodePoint());
            }
            c1 = this.peekCodePoint(0);
            var c22 = this.peekCodePoint(1);
            if (c1 === FULL_STOP && isDigit(c22)) {
              repr.push(this.consumeCodePoint(), this.consumeCodePoint());
              type = FLAG_NUMBER;
              while (isDigit(this.peekCodePoint(0))) {
                repr.push(this.consumeCodePoint());
              }
            }
            c1 = this.peekCodePoint(0);
            c22 = this.peekCodePoint(1);
            var c32 = this.peekCodePoint(2);
            if ((c1 === E2 || c1 === e2) && ((c22 === PLUS_SIGN || c22 === HYPHEN_MINUS) && isDigit(c32) || isDigit(c22))) {
              repr.push(this.consumeCodePoint(), this.consumeCodePoint());
              type = FLAG_NUMBER;
              while (isDigit(this.peekCodePoint(0))) {
                repr.push(this.consumeCodePoint());
              }
            }
            return [stringToNumber(repr), type];
          };
          Tokenizer2.prototype.consumeNumericToken = function() {
            var _a2 = this.consumeNumber(), number = _a2[0], flags2 = _a2[1];
            var c1 = this.peekCodePoint(0);
            var c22 = this.peekCodePoint(1);
            var c32 = this.peekCodePoint(2);
            if (isIdentifierStart(c1, c22, c32)) {
              var unit = this.consumeName();
              return { type: 15, number, flags: flags2, unit };
            }
            if (c1 === PERCENTAGE_SIGN) {
              this.consumeCodePoint();
              return { type: 16, number, flags: flags2 };
            }
            return { type: 17, number, flags: flags2 };
          };
          Tokenizer2.prototype.consumeEscapedCodePoint = function() {
            var codePoint = this.consumeCodePoint();
            if (isHex(codePoint)) {
              var hex = fromCodePoint$1(codePoint);
              while (isHex(this.peekCodePoint(0)) && hex.length < 6) {
                hex += fromCodePoint$1(this.consumeCodePoint());
              }
              if (isWhiteSpace(this.peekCodePoint(0))) {
                this.consumeCodePoint();
              }
              var hexCodePoint = parseInt(hex, 16);
              if (hexCodePoint === 0 || isSurrogateCodePoint(hexCodePoint) || hexCodePoint > 1114111) {
                return REPLACEMENT_CHARACTER;
              }
              return hexCodePoint;
            }
            if (codePoint === EOF) {
              return REPLACEMENT_CHARACTER;
            }
            return codePoint;
          };
          Tokenizer2.prototype.consumeName = function() {
            var result = "";
            while (true) {
              var codePoint = this.consumeCodePoint();
              if (isNameCodePoint(codePoint)) {
                result += fromCodePoint$1(codePoint);
              } else if (isValidEscape(codePoint, this.peekCodePoint(0))) {
                result += fromCodePoint$1(this.consumeEscapedCodePoint());
              } else {
                this.reconsumeCodePoint(codePoint);
                return result;
              }
            }
          };
          return Tokenizer2;
        }()
      );
      var Parser2 = (
        /** @class */
        function() {
          function Parser3(tokens) {
            this._tokens = tokens;
          }
          __name(Parser3, "Parser3");
          __name2(Parser3, "Parser");
          Parser3.create = function(value) {
            var tokenizer = new Tokenizer();
            tokenizer.write(value);
            return new Parser3(tokenizer.read());
          };
          Parser3.parseValue = function(value) {
            return Parser3.create(value).parseComponentValue();
          };
          Parser3.parseValues = function(value) {
            return Parser3.create(value).parseComponentValues();
          };
          Parser3.prototype.parseComponentValue = function() {
            var token = this.consumeToken();
            while (token.type === 31) {
              token = this.consumeToken();
            }
            if (token.type === 32) {
              throw new SyntaxError("Error parsing CSS component value, unexpected EOF");
            }
            this.reconsumeToken(token);
            var value = this.consumeComponentValue();
            do {
              token = this.consumeToken();
            } while (token.type === 31);
            if (token.type === 32) {
              return value;
            }
            throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one");
          };
          Parser3.prototype.parseComponentValues = function() {
            var values = [];
            while (true) {
              var value = this.consumeComponentValue();
              if (value.type === 32) {
                return values;
              }
              values.push(value);
              values.push();
            }
          };
          Parser3.prototype.consumeComponentValue = function() {
            var token = this.consumeToken();
            switch (token.type) {
              case 11:
              case 28:
              case 2:
                return this.consumeSimpleBlock(token.type);
              case 19:
                return this.consumeFunction(token);
            }
            return token;
          };
          Parser3.prototype.consumeSimpleBlock = function(type) {
            var block = { type, values: [] };
            var token = this.consumeToken();
            while (true) {
              if (token.type === 32 || isEndingTokenFor(token, type)) {
                return block;
              }
              this.reconsumeToken(token);
              block.values.push(this.consumeComponentValue());
              token = this.consumeToken();
            }
          };
          Parser3.prototype.consumeFunction = function(functionToken) {
            var cssFunction = {
              name: functionToken.value,
              values: [],
              type: 18
              /* FUNCTION */
            };
            while (true) {
              var token = this.consumeToken();
              if (token.type === 32 || token.type === 3) {
                return cssFunction;
              }
              this.reconsumeToken(token);
              cssFunction.values.push(this.consumeComponentValue());
            }
          };
          Parser3.prototype.consumeToken = function() {
            var token = this._tokens.shift();
            return typeof token === "undefined" ? EOF_TOKEN : token;
          };
          Parser3.prototype.reconsumeToken = function(token) {
            this._tokens.unshift(token);
          };
          return Parser3;
        }()
      );
      var isDimensionToken = /* @__PURE__ */ __name2(function(token) {
        return token.type === 15;
      }, "isDimensionToken");
      var isNumberToken = /* @__PURE__ */ __name2(function(token) {
        return token.type === 17;
      }, "isNumberToken");
      var isIdentToken = /* @__PURE__ */ __name2(function(token) {
        return token.type === 20;
      }, "isIdentToken");
      var isStringToken = /* @__PURE__ */ __name2(function(token) {
        return token.type === 0;
      }, "isStringToken");
      var isIdentWithValue = /* @__PURE__ */ __name2(function(token, value) {
        return isIdentToken(token) && token.value === value;
      }, "isIdentWithValue");
      var nonWhiteSpace = /* @__PURE__ */ __name2(function(token) {
        return token.type !== 31;
      }, "nonWhiteSpace");
      var nonFunctionArgSeparator = /* @__PURE__ */ __name2(function(token) {
        return token.type !== 31 && token.type !== 4;
      }, "nonFunctionArgSeparator");
      var parseFunctionArgs = /* @__PURE__ */ __name2(function(tokens) {
        var args = [];
        var arg = [];
        tokens.forEach(function(token) {
          if (token.type === 4) {
            if (arg.length === 0) {
              throw new Error("Error parsing function args, zero tokens for arg");
            }
            args.push(arg);
            arg = [];
            return;
          }
          if (token.type !== 31) {
            arg.push(token);
          }
        });
        if (arg.length) {
          args.push(arg);
        }
        return args;
      }, "parseFunctionArgs");
      var isEndingTokenFor = /* @__PURE__ */ __name2(function(token, type) {
        if (type === 11 && token.type === 12) {
          return true;
        }
        if (type === 28 && token.type === 29) {
          return true;
        }
        return type === 2 && token.type === 3;
      }, "isEndingTokenFor");
      var isLength = /* @__PURE__ */ __name2(function(token) {
        return token.type === 17 || token.type === 15;
      }, "isLength");
      var isLengthPercentage = /* @__PURE__ */ __name2(function(token) {
        return token.type === 16 || isLength(token);
      }, "isLengthPercentage");
      var parseLengthPercentageTuple = /* @__PURE__ */ __name2(function(tokens) {
        return tokens.length > 1 ? [tokens[0], tokens[1]] : [tokens[0]];
      }, "parseLengthPercentageTuple");
      var ZERO_LENGTH = {
        type: 17,
        number: 0,
        flags: FLAG_INTEGER
      };
      var FIFTY_PERCENT = {
        type: 16,
        number: 50,
        flags: FLAG_INTEGER
      };
      var HUNDRED_PERCENT = {
        type: 16,
        number: 100,
        flags: FLAG_INTEGER
      };
      var getAbsoluteValueForTuple = /* @__PURE__ */ __name2(function(tuple, width, height) {
        var x22 = tuple[0], y3 = tuple[1];
        return [getAbsoluteValue(x22, width), getAbsoluteValue(typeof y3 !== "undefined" ? y3 : x22, height)];
      }, "getAbsoluteValueForTuple");
      var getAbsoluteValue = /* @__PURE__ */ __name2(function(token, parent) {
        if (token.type === 16) {
          return token.number / 100 * parent;
        }
        if (isDimensionToken(token)) {
          switch (token.unit) {
            case "rem":
            case "em":
              return 16 * token.number;
            // TODO use correct font-size
            case "px":
            default:
              return token.number;
          }
        }
        return token.number;
      }, "getAbsoluteValue");
      var DEG = "deg";
      var GRAD = "grad";
      var RAD = "rad";
      var TURN = "turn";
      var angle = {
        name: "angle",
        parse: /* @__PURE__ */ __name2(function(_context, value) {
          if (value.type === 15) {
            switch (value.unit) {
              case DEG:
                return Math.PI * value.number / 180;
              case GRAD:
                return Math.PI / 200 * value.number;
              case RAD:
                return value.number;
              case TURN:
                return Math.PI * 2 * value.number;
            }
          }
          throw new Error("Unsupported angle type");
        }, "parse")
      };
      var isAngle = /* @__PURE__ */ __name2(function(value) {
        if (value.type === 15) {
          if (value.unit === DEG || value.unit === GRAD || value.unit === RAD || value.unit === TURN) {
            return true;
          }
        }
        return false;
      }, "isAngle");
      var parseNamedSide = /* @__PURE__ */ __name2(function(tokens) {
        var sideOrCorner = tokens.filter(isIdentToken).map(function(ident) {
          return ident.value;
        }).join(" ");
        switch (sideOrCorner) {
          case "to bottom right":
          case "to right bottom":
          case "left top":
          case "top left":
            return [ZERO_LENGTH, ZERO_LENGTH];
          case "to top":
          case "bottom":
            return deg(0);
          case "to bottom left":
          case "to left bottom":
          case "right top":
          case "top right":
            return [ZERO_LENGTH, HUNDRED_PERCENT];
          case "to right":
          case "left":
            return deg(90);
          case "to top left":
          case "to left top":
          case "right bottom":
          case "bottom right":
            return [HUNDRED_PERCENT, HUNDRED_PERCENT];
          case "to bottom":
          case "top":
            return deg(180);
          case "to top right":
          case "to right top":
          case "left bottom":
          case "bottom left":
            return [HUNDRED_PERCENT, ZERO_LENGTH];
          case "to left":
          case "right":
            return deg(270);
        }
        return 0;
      }, "parseNamedSide");
      var deg = /* @__PURE__ */ __name2(function(deg2) {
        return Math.PI * deg2 / 180;
      }, "deg");
      var color$1 = {
        name: "color",
        parse: /* @__PURE__ */ __name2(function(context, value) {
          if (value.type === 18) {
            var colorFunction = SUPPORTED_COLOR_FUNCTIONS[value.name];
            if (typeof colorFunction === "undefined") {
              throw new Error('Attempting to parse an unsupported color function "' + value.name + '"');
            }
            return colorFunction(context, value.values);
          }
          if (value.type === 5) {
            if (value.value.length === 3) {
              var r2 = value.value.substring(0, 1);
              var g2 = value.value.substring(1, 2);
              var b2 = value.value.substring(2, 3);
              return pack(parseInt(r2 + r2, 16), parseInt(g2 + g2, 16), parseInt(b2 + b2, 16), 1);
            }
            if (value.value.length === 4) {
              var r2 = value.value.substring(0, 1);
              var g2 = value.value.substring(1, 2);
              var b2 = value.value.substring(2, 3);
              var a4 = value.value.substring(3, 4);
              return pack(parseInt(r2 + r2, 16), parseInt(g2 + g2, 16), parseInt(b2 + b2, 16), parseInt(a4 + a4, 16) / 255);
            }
            if (value.value.length === 6) {
              var r2 = value.value.substring(0, 2);
              var g2 = value.value.substring(2, 4);
              var b2 = value.value.substring(4, 6);
              return pack(parseInt(r2, 16), parseInt(g2, 16), parseInt(b2, 16), 1);
            }
            if (value.value.length === 8) {
              var r2 = value.value.substring(0, 2);
              var g2 = value.value.substring(2, 4);
              var b2 = value.value.substring(4, 6);
              var a4 = value.value.substring(6, 8);
              return pack(parseInt(r2, 16), parseInt(g2, 16), parseInt(b2, 16), parseInt(a4, 16) / 255);
            }
          }
          if (value.type === 20) {
            var namedColor = COLORS[value.value.toUpperCase()];
            if (typeof namedColor !== "undefined") {
              return namedColor;
            }
          }
          return COLORS.TRANSPARENT;
        }, "parse")
      };
      var isTransparent = /* @__PURE__ */ __name2(function(color2) {
        return (255 & color2) === 0;
      }, "isTransparent");
      var asString = /* @__PURE__ */ __name2(function(color2) {
        var alpha = 255 & color2;
        var blue = 255 & color2 >> 8;
        var green = 255 & color2 >> 16;
        var red = 255 & color2 >> 24;
        return alpha < 255 ? "rgba(" + red + "," + green + "," + blue + "," + alpha / 255 + ")" : "rgb(" + red + "," + green + "," + blue + ")";
      }, "asString");
      var pack = /* @__PURE__ */ __name2(function(r2, g2, b2, a4) {
        return (r2 << 24 | g2 << 16 | b2 << 8 | Math.round(a4 * 255) << 0) >>> 0;
      }, "pack");
      var getTokenColorValue = /* @__PURE__ */ __name2(function(token, i4) {
        if (token.type === 17) {
          return token.number;
        }
        if (token.type === 16) {
          var max2 = i4 === 3 ? 1 : 255;
          return i4 === 3 ? token.number / 100 * max2 : Math.round(token.number / 100 * max2);
        }
        return 0;
      }, "getTokenColorValue");
      var rgb = /* @__PURE__ */ __name2(function(_context, args) {
        var tokens = args.filter(nonFunctionArgSeparator);
        if (tokens.length === 3) {
          var _a2 = tokens.map(getTokenColorValue), r2 = _a2[0], g2 = _a2[1], b2 = _a2[2];
          return pack(r2, g2, b2, 1);
        }
        if (tokens.length === 4) {
          var _b2 = tokens.map(getTokenColorValue), r2 = _b2[0], g2 = _b2[1], b2 = _b2[2], a4 = _b2[3];
          return pack(r2, g2, b2, a4);
        }
        return 0;
      }, "rgb");
      function hue2rgb(t1, t22, hue) {
        if (hue < 0) {
          hue += 1;
        }
        if (hue >= 1) {
          hue -= 1;
        }
        if (hue < 1 / 6) {
          return (t22 - t1) * hue * 6 + t1;
        } else if (hue < 1 / 2) {
          return t22;
        } else if (hue < 2 / 3) {
          return (t22 - t1) * 6 * (2 / 3 - hue) + t1;
        } else {
          return t1;
        }
      }
      __name(hue2rgb, "hue2rgb");
      __name2(hue2rgb, "hue2rgb");
      var hsl = /* @__PURE__ */ __name2(function(context, args) {
        var tokens = args.filter(nonFunctionArgSeparator);
        var hue = tokens[0], saturation = tokens[1], lightness = tokens[2], alpha = tokens[3];
        var h3 = (hue.type === 17 ? deg(hue.number) : angle.parse(context, hue)) / (Math.PI * 2);
        var s3 = isLengthPercentage(saturation) ? saturation.number / 100 : 0;
        var l3 = isLengthPercentage(lightness) ? lightness.number / 100 : 0;
        var a4 = typeof alpha !== "undefined" && isLengthPercentage(alpha) ? getAbsoluteValue(alpha, 1) : 1;
        if (s3 === 0) {
          return pack(l3 * 255, l3 * 255, l3 * 255, 1);
        }
        var t22 = l3 <= 0.5 ? l3 * (s3 + 1) : l3 + s3 - l3 * s3;
        var t1 = l3 * 2 - t22;
        var r2 = hue2rgb(t1, t22, h3 + 1 / 3);
        var g2 = hue2rgb(t1, t22, h3);
        var b2 = hue2rgb(t1, t22, h3 - 1 / 3);
        return pack(r2 * 255, g2 * 255, b2 * 255, a4);
      }, "hsl");
      var SUPPORTED_COLOR_FUNCTIONS = {
        hsl,
        hsla: hsl,
        rgb,
        rgba: rgb
      };
      var parseColor = /* @__PURE__ */ __name2(function(context, value) {
        return color$1.parse(context, Parser2.create(value).parseComponentValue());
      }, "parseColor");
      var COLORS = {
        ALICEBLUE: 4042850303,
        ANTIQUEWHITE: 4209760255,
        AQUA: 16777215,
        AQUAMARINE: 2147472639,
        AZURE: 4043309055,
        BEIGE: 4126530815,
        BISQUE: 4293182719,
        BLACK: 255,
        BLANCHEDALMOND: 4293643775,
        BLUE: 65535,
        BLUEVIOLET: 2318131967,
        BROWN: 2771004159,
        BURLYWOOD: 3736635391,
        CADETBLUE: 1604231423,
        CHARTREUSE: 2147418367,
        CHOCOLATE: 3530104575,
        CORAL: 4286533887,
        CORNFLOWERBLUE: 1687547391,
        CORNSILK: 4294499583,
        CRIMSON: 3692313855,
        CYAN: 16777215,
        DARKBLUE: 35839,
        DARKCYAN: 9145343,
        DARKGOLDENROD: 3095837695,
        DARKGRAY: 2846468607,
        DARKGREEN: 6553855,
        DARKGREY: 2846468607,
        DARKKHAKI: 3182914559,
        DARKMAGENTA: 2332068863,
        DARKOLIVEGREEN: 1433087999,
        DARKORANGE: 4287365375,
        DARKORCHID: 2570243327,
        DARKRED: 2332033279,
        DARKSALMON: 3918953215,
        DARKSEAGREEN: 2411499519,
        DARKSLATEBLUE: 1211993087,
        DARKSLATEGRAY: 793726975,
        DARKSLATEGREY: 793726975,
        DARKTURQUOISE: 13554175,
        DARKVIOLET: 2483082239,
        DEEPPINK: 4279538687,
        DEEPSKYBLUE: 12582911,
        DIMGRAY: 1768516095,
        DIMGREY: 1768516095,
        DODGERBLUE: 512819199,
        FIREBRICK: 2988581631,
        FLORALWHITE: 4294635775,
        FORESTGREEN: 579543807,
        FUCHSIA: 4278255615,
        GAINSBORO: 3705462015,
        GHOSTWHITE: 4177068031,
        GOLD: 4292280575,
        GOLDENROD: 3668254975,
        GRAY: 2155905279,
        GREEN: 8388863,
        GREENYELLOW: 2919182335,
        GREY: 2155905279,
        HONEYDEW: 4043305215,
        HOTPINK: 4285117695,
        INDIANRED: 3445382399,
        INDIGO: 1258324735,
        IVORY: 4294963455,
        KHAKI: 4041641215,
        LAVENDER: 3873897215,
        LAVENDERBLUSH: 4293981695,
        LAWNGREEN: 2096890111,
        LEMONCHIFFON: 4294626815,
        LIGHTBLUE: 2916673279,
        LIGHTCORAL: 4034953471,
        LIGHTCYAN: 3774873599,
        LIGHTGOLDENRODYELLOW: 4210742015,
        LIGHTGRAY: 3553874943,
        LIGHTGREEN: 2431553791,
        LIGHTGREY: 3553874943,
        LIGHTPINK: 4290167295,
        LIGHTSALMON: 4288707327,
        LIGHTSEAGREEN: 548580095,
        LIGHTSKYBLUE: 2278488831,
        LIGHTSLATEGRAY: 2005441023,
        LIGHTSLATEGREY: 2005441023,
        LIGHTSTEELBLUE: 2965692159,
        LIGHTYELLOW: 4294959359,
        LIME: 16711935,
        LIMEGREEN: 852308735,
        LINEN: 4210091775,
        MAGENTA: 4278255615,
        MAROON: 2147483903,
        MEDIUMAQUAMARINE: 1724754687,
        MEDIUMBLUE: 52735,
        MEDIUMORCHID: 3126187007,
        MEDIUMPURPLE: 2473647103,
        MEDIUMSEAGREEN: 1018393087,
        MEDIUMSLATEBLUE: 2070474495,
        MEDIUMSPRINGGREEN: 16423679,
        MEDIUMTURQUOISE: 1221709055,
        MEDIUMVIOLETRED: 3340076543,
        MIDNIGHTBLUE: 421097727,
        MINTCREAM: 4127193855,
        MISTYROSE: 4293190143,
        MOCCASIN: 4293178879,
        NAVAJOWHITE: 4292783615,
        NAVY: 33023,
        OLDLACE: 4260751103,
        OLIVE: 2155872511,
        OLIVEDRAB: 1804477439,
        ORANGE: 4289003775,
        ORANGERED: 4282712319,
        ORCHID: 3664828159,
        PALEGOLDENROD: 4008225535,
        PALEGREEN: 2566625535,
        PALETURQUOISE: 2951671551,
        PALEVIOLETRED: 3681588223,
        PAPAYAWHIP: 4293907967,
        PEACHPUFF: 4292524543,
        PERU: 3448061951,
        PINK: 4290825215,
        PLUM: 3718307327,
        POWDERBLUE: 2967529215,
        PURPLE: 2147516671,
        REBECCAPURPLE: 1714657791,
        RED: 4278190335,
        ROSYBROWN: 3163525119,
        ROYALBLUE: 1097458175,
        SADDLEBROWN: 2336560127,
        SALMON: 4202722047,
        SANDYBROWN: 4104413439,
        SEAGREEN: 780883967,
        SEASHELL: 4294307583,
        SIENNA: 2689740287,
        SILVER: 3233857791,
        SKYBLUE: 2278484991,
        SLATEBLUE: 1784335871,
        SLATEGRAY: 1887473919,
        SLATEGREY: 1887473919,
        SNOW: 4294638335,
        SPRINGGREEN: 16744447,
        STEELBLUE: 1182971135,
        TAN: 3535047935,
        TEAL: 8421631,
        THISTLE: 3636451583,
        TOMATO: 4284696575,
        TRANSPARENT: 0,
        TURQUOISE: 1088475391,
        VIOLET: 4001558271,
        WHEAT: 4125012991,
        WHITE: 4294967295,
        WHITESMOKE: 4126537215,
        YELLOW: 4294902015,
        YELLOWGREEN: 2597139199
      };
      var backgroundClip = {
        name: "background-clip",
        initialValue: "border-box",
        prefix: false,
        type: 1,
        parse: /* @__PURE__ */ __name2(function(_context, tokens) {
          return tokens.map(function(token) {
            if (isIdentToken(token)) {
              switch (token.value) {
                case "padding-box":
                  return 1;
                case "content-box":
                  return 2;
              }
            }
            return 0;
          });
        }, "parse")
      };
      var backgroundColor = {
        name: "background-color",
        initialValue: "transparent",
        prefix: false,
        type: 3,
        format: "color"
      };
      var parseColorStop = /* @__PURE__ */ __name2(function(context, args) {
        var color2 = color$1.parse(context, args[0]);
        var stop = args[1];
        return stop && isLengthPercentage(stop) ? { color: color2, stop } : { color: color2, stop: null };
      }, "parseColorStop");
      var processColorStops = /* @__PURE__ */ __name2(function(stops, lineLength) {
        var first = stops[0];
        var last = stops[stops.length - 1];
        if (first.stop === null) {
          first.stop = ZERO_LENGTH;
        }
        if (last.stop === null) {
          last.stop = HUNDRED_PERCENT;
        }
        var processStops = [];
        var previous = 0;
        for (var i4 = 0; i4 < stops.length; i4++) {
          var stop_1 = stops[i4].stop;
          if (stop_1 !== null) {
            var absoluteValue = getAbsoluteValue(stop_1, lineLength);
            if (absoluteValue > previous) {
              processStops.push(absoluteValue);
            } else {
              processStops.push(previous);
            }
            previous = absoluteValue;
          } else {
            processStops.push(null);
          }
        }
        var gapBegin = null;
        for (var i4 = 0; i4 < processStops.length; i4++) {
          var stop_2 = processStops[i4];
          if (stop_2 === null) {
            if (gapBegin === null) {
              gapBegin = i4;
            }
          } else if (gapBegin !== null) {
            var gapLength = i4 - gapBegin;
            var beforeGap = processStops[gapBegin - 1];
            var gapValue = (stop_2 - beforeGap) / (gapLength + 1);
            for (var g2 = 1; g2 <= gapLength; g2++) {
              processStops[gapBegin + g2 - 1] = gapValue * g2;
            }
            gapBegin = null;
          }
        }
        return stops.map(function(_a2, i5) {
          var color2 = _a2.color;
          return { color: color2, stop: Math.max(Math.min(1, processStops[i5] / lineLength), 0) };
        });
      }, "processColorStops");
      var getAngleFromCorner = /* @__PURE__ */ __name2(function(corner, width, height) {
        var centerX = width / 2;
        var centerY = height / 2;
        var x22 = getAbsoluteValue(corner[0], width) - centerX;
        var y3 = centerY - getAbsoluteValue(corner[1], height);
        return (Math.atan2(y3, x22) + Math.PI * 2) % (Math.PI * 2);
      }, "getAngleFromCorner");
      var calculateGradientDirection = /* @__PURE__ */ __name2(function(angle2, width, height) {
        var radian = typeof angle2 === "number" ? angle2 : getAngleFromCorner(angle2, width, height);
        var lineLength = Math.abs(width * Math.sin(radian)) + Math.abs(height * Math.cos(radian));
        var halfWidth = width / 2;
        var halfHeight = height / 2;
        var halfLineLength = lineLength / 2;
        var yDiff = Math.sin(radian - Math.PI / 2) * halfLineLength;
        var xDiff = Math.cos(radian - Math.PI / 2) * halfLineLength;
        return [lineLength, halfWidth - xDiff, halfWidth + xDiff, halfHeight - yDiff, halfHeight + yDiff];
      }, "calculateGradientDirection");
      var distance = /* @__PURE__ */ __name2(function(a4, b2) {
        return Math.sqrt(a4 * a4 + b2 * b2);
      }, "distance");
      var findCorner = /* @__PURE__ */ __name2(function(width, height, x22, y3, closest) {
        var corners = [
          [0, 0],
          [0, height],
          [width, 0],
          [width, height]
        ];
        return corners.reduce(function(stat, corner) {
          var cx = corner[0], cy = corner[1];
          var d2 = distance(x22 - cx, y3 - cy);
          if (closest ? d2 < stat.optimumDistance : d2 > stat.optimumDistance) {
            return {
              optimumCorner: corner,
              optimumDistance: d2
            };
          }
          return stat;
        }, {
          optimumDistance: closest ? Infinity : -Infinity,
          optimumCorner: null
        }).optimumCorner;
      }, "findCorner");
      var calculateRadius = /* @__PURE__ */ __name2(function(gradient, x22, y3, width, height) {
        var rx = 0;
        var ry = 0;
        switch (gradient.size) {
          case 0:
            if (gradient.shape === 0) {
              rx = ry = Math.min(Math.abs(x22), Math.abs(x22 - width), Math.abs(y3), Math.abs(y3 - height));
            } else if (gradient.shape === 1) {
              rx = Math.min(Math.abs(x22), Math.abs(x22 - width));
              ry = Math.min(Math.abs(y3), Math.abs(y3 - height));
            }
            break;
          case 2:
            if (gradient.shape === 0) {
              rx = ry = Math.min(distance(x22, y3), distance(x22, y3 - height), distance(x22 - width, y3), distance(x22 - width, y3 - height));
            } else if (gradient.shape === 1) {
              var c4 = Math.min(Math.abs(y3), Math.abs(y3 - height)) / Math.min(Math.abs(x22), Math.abs(x22 - width));
              var _a2 = findCorner(width, height, x22, y3, true), cx = _a2[0], cy = _a2[1];
              rx = distance(cx - x22, (cy - y3) / c4);
              ry = c4 * rx;
            }
            break;
          case 1:
            if (gradient.shape === 0) {
              rx = ry = Math.max(Math.abs(x22), Math.abs(x22 - width), Math.abs(y3), Math.abs(y3 - height));
            } else if (gradient.shape === 1) {
              rx = Math.max(Math.abs(x22), Math.abs(x22 - width));
              ry = Math.max(Math.abs(y3), Math.abs(y3 - height));
            }
            break;
          case 3:
            if (gradient.shape === 0) {
              rx = ry = Math.max(distance(x22, y3), distance(x22, y3 - height), distance(x22 - width, y3), distance(x22 - width, y3 - height));
            } else if (gradient.shape === 1) {
              var c4 = Math.max(Math.abs(y3), Math.abs(y3 - height)) / Math.max(Math.abs(x22), Math.abs(x22 - width));
              var _b2 = findCorner(width, height, x22, y3, false), cx = _b2[0], cy = _b2[1];
              rx = distance(cx - x22, (cy - y3) / c4);
              ry = c4 * rx;
            }
            break;
        }
        if (Array.isArray(gradient.size)) {
          rx = getAbsoluteValue(gradient.size[0], width);
          ry = gradient.size.length === 2 ? getAbsoluteValue(gradient.size[1], height) : rx;
        }
        return [rx, ry];
      }, "calculateRadius");
      var linearGradient = /* @__PURE__ */ __name2(function(context, tokens) {
        var angle$1 = deg(180);
        var stops = [];
        parseFunctionArgs(tokens).forEach(function(arg, i4) {
          if (i4 === 0) {
            var firstToken = arg[0];
            if (firstToken.type === 20 && firstToken.value === "to") {
              angle$1 = parseNamedSide(arg);
              return;
            } else if (isAngle(firstToken)) {
              angle$1 = angle.parse(context, firstToken);
              return;
            }
          }
          var colorStop = parseColorStop(context, arg);
          stops.push(colorStop);
        });
        return {
          angle: angle$1,
          stops,
          type: 1
          /* LINEAR_GRADIENT */
        };
      }, "linearGradient");
      var prefixLinearGradient = /* @__PURE__ */ __name2(function(context, tokens) {
        var angle$1 = deg(180);
        var stops = [];
        parseFunctionArgs(tokens).forEach(function(arg, i4) {
          if (i4 === 0) {
            var firstToken = arg[0];
            if (firstToken.type === 20 && ["top", "left", "right", "bottom"].indexOf(firstToken.value) !== -1) {
              angle$1 = parseNamedSide(arg);
              return;
            } else if (isAngle(firstToken)) {
              angle$1 = (angle.parse(context, firstToken) + deg(270)) % deg(360);
              return;
            }
          }
          var colorStop = parseColorStop(context, arg);
          stops.push(colorStop);
        });
        return {
          angle: angle$1,
          stops,
          type: 1
          /* LINEAR_GRADIENT */
        };
      }, "prefixLinearGradient");
      var webkitGradient = /* @__PURE__ */ __name2(function(context, tokens) {
        var angle2 = deg(180);
        var stops = [];
        var type = 1;
        var shape = 0;
        var size = 3;
        var position2 = [];
        parseFunctionArgs(tokens).forEach(function(arg, i4) {
          var firstToken = arg[0];
          if (i4 === 0) {
            if (isIdentToken(firstToken) && firstToken.value === "linear") {
              type = 1;
              return;
            } else if (isIdentToken(firstToken) && firstToken.value === "radial") {
              type = 2;
              return;
            }
          }
          if (firstToken.type === 18) {
            if (firstToken.name === "from") {
              var color2 = color$1.parse(context, firstToken.values[0]);
              stops.push({ stop: ZERO_LENGTH, color: color2 });
            } else if (firstToken.name === "to") {
              var color2 = color$1.parse(context, firstToken.values[0]);
              stops.push({ stop: HUNDRED_PERCENT, color: color2 });
            } else if (firstToken.name === "color-stop") {
              var values = firstToken.values.filter(nonFunctionArgSeparator);
              if (values.length === 2) {
                var color2 = color$1.parse(context, values[1]);
                var stop_1 = values[0];
                if (isNumberToken(stop_1)) {
                  stops.push({
                    stop: { type: 16, number: stop_1.number * 100, flags: stop_1.flags },
                    color: color2
                  });
                }
              }
            }
          }
        });
        return type === 1 ? {
          angle: (angle2 + deg(180)) % deg(360),
          stops,
          type
        } : { size, shape, stops, position: position2, type };
      }, "webkitGradient");
      var CLOSEST_SIDE = "closest-side";
      var FARTHEST_SIDE = "farthest-side";
      var CLOSEST_CORNER = "closest-corner";
      var FARTHEST_CORNER = "farthest-corner";
      var CIRCLE = "circle";
      var ELLIPSE = "ellipse";
      var COVER = "cover";
      var CONTAIN = "contain";
      var radialGradient = /* @__PURE__ */ __name2(function(context, tokens) {
        var shape = 0;
        var size = 3;
        var stops = [];
        var position2 = [];
        parseFunctionArgs(tokens).forEach(function(arg, i4) {
          var isColorStop = true;
          if (i4 === 0) {
            var isAtPosition_1 = false;
            isColorStop = arg.reduce(function(acc, token) {
              if (isAtPosition_1) {
                if (isIdentToken(token)) {
                  switch (token.value) {
                    case "center":
                      position2.push(FIFTY_PERCENT);
                      return acc;
                    case "top":
                    case "left":
                      position2.push(ZERO_LENGTH);
                      return acc;
                    case "right":
                    case "bottom":
                      position2.push(HUNDRED_PERCENT);
                      return acc;
                  }
                } else if (isLengthPercentage(token) || isLength(token)) {
                  position2.push(token);
                }
              } else if (isIdentToken(token)) {
                switch (token.value) {
                  case CIRCLE:
                    shape = 0;
                    return false;
                  case ELLIPSE:
                    shape = 1;
                    return false;
                  case "at":
                    isAtPosition_1 = true;
                    return false;
                  case CLOSEST_SIDE:
                    size = 0;
                    return false;
                  case COVER:
                  case FARTHEST_SIDE:
                    size = 1;
                    return false;
                  case CONTAIN:
                  case CLOSEST_CORNER:
                    size = 2;
                    return false;
                  case FARTHEST_CORNER:
                    size = 3;
                    return false;
                }
              } else if (isLength(token) || isLengthPercentage(token)) {
                if (!Array.isArray(size)) {
                  size = [];
                }
                size.push(token);
                return false;
              }
              return acc;
            }, isColorStop);
          }
          if (isColorStop) {
            var colorStop = parseColorStop(context, arg);
            stops.push(colorStop);
          }
        });
        return {
          size,
          shape,
          stops,
          position: position2,
          type: 2
          /* RADIAL_GRADIENT */
        };
      }, "radialGradient");
      var prefixRadialGradient = /* @__PURE__ */ __name2(function(context, tokens) {
        var shape = 0;
        var size = 3;
        var stops = [];
        var position2 = [];
        parseFunctionArgs(tokens).forEach(function(arg, i4) {
          var isColorStop = true;
          if (i4 === 0) {
            isColorStop = arg.reduce(function(acc, token) {
              if (isIdentToken(token)) {
                switch (token.value) {
                  case "center":
                    position2.push(FIFTY_PERCENT);
                    return false;
                  case "top":
                  case "left":
                    position2.push(ZERO_LENGTH);
                    return false;
                  case "right":
                  case "bottom":
                    position2.push(HUNDRED_PERCENT);
                    return false;
                }
              } else if (isLengthPercentage(token) || isLength(token)) {
                position2.push(token);
                return false;
              }
              return acc;
            }, isColorStop);
          } else if (i4 === 1) {
            isColorStop = arg.reduce(function(acc, token) {
              if (isIdentToken(token)) {
                switch (token.value) {
                  case CIRCLE:
                    shape = 0;
                    return false;
                  case ELLIPSE:
                    shape = 1;
                    return false;
                  case CONTAIN:
                  case CLOSEST_SIDE:
                    size = 0;
                    return false;
                  case FARTHEST_SIDE:
                    size = 1;
                    return false;
                  case CLOSEST_CORNER:
                    size = 2;
                    return false;
                  case COVER:
                  case FARTHEST_CORNER:
                    size = 3;
                    return false;
                }
              } else if (isLength(token) || isLengthPercentage(token)) {
                if (!Array.isArray(size)) {
                  size = [];
                }
                size.push(token);
                return false;
              }
              return acc;
            }, isColorStop);
          }
          if (isColorStop) {
            var colorStop = parseColorStop(context, arg);
            stops.push(colorStop);
          }
        });
        return {
          size,
          shape,
          stops,
          position: position2,
          type: 2
          /* RADIAL_GRADIENT */
        };
      }, "prefixRadialGradient");
      var isLinearGradient = /* @__PURE__ */ __name2(function(background) {
        return background.type === 1;
      }, "isLinearGradient");
      var isRadialGradient = /* @__PURE__ */ __name2(function(background) {
        return background.type === 2;
      }, "isRadialGradient");
      var image = {
        name: "image",
        parse: /* @__PURE__ */ __name2(function(context, value) {
          if (value.type === 22) {
            var image_1 = {
              url: value.value,
              type: 0
              /* URL */
            };
            context.cache.addImage(value.value);
            return image_1;
          }
          if (value.type === 18) {
            var imageFunction = SUPPORTED_IMAGE_FUNCTIONS[value.name];
            if (typeof imageFunction === "undefined") {
              throw new Error('Attempting to parse an unsupported image function "' + value.name + '"');
            }
            return imageFunction(context, value.values);
          }
          throw new Error("Unsupported image type " + value.type);
        }, "parse")
      };
      function isSupportedImage(value) {
        return !(value.type === 20 && value.value === "none") && (value.type !== 18 || !!SUPPORTED_IMAGE_FUNCTIONS[value.name]);
      }
      __name(isSupportedImage, "isSupportedImage");
      __name2(isSupportedImage, "isSupportedImage");
      var SUPPORTED_IMAGE_FUNCTIONS = {
        "linear-gradient": linearGradient,
        "-moz-linear-gradient": prefixLinearGradient,
        "-ms-linear-gradient": prefixLinearGradient,
        "-o-linear-gradient": prefixLinearGradient,
        "-webkit-linear-gradient": prefixLinearGradient,
        "radial-gradient": radialGradient,
        "-moz-radial-gradient": prefixRadialGradient,
        "-ms-radial-gradient": prefixRadialGradient,
        "-o-radial-gradient": prefixRadialGradient,
        "-webkit-radial-gradient": prefixRadialGradient,
        "-webkit-gradient": webkitGradient
      };
      var backgroundImage = {
        name: "background-image",
        initialValue: "none",
        type: 1,
        prefix: false,
        parse: /* @__PURE__ */ __name2(function(context, tokens) {
          if (tokens.length === 0) {
            return [];
          }
          var first = tokens[0];
          if (first.type === 20 && first.value === "none") {
            return [];
          }
          return tokens.filter(function(value) {
            return nonFunctionArgSeparator(value) && isSupportedImage(value);
          }).map(function(value) {
            return image.parse(context, value);
          });
        }, "parse")
      };
      var backgroundOrigin = {
        name: "background-origin",
        initialValue: "border-box",
        prefix: false,
        type: 1,
        parse: /* @__PURE__ */ __name2(function(_context, tokens) {
          return tokens.map(function(token) {
            if (isIdentToken(token)) {
              switch (token.value) {
                case "padding-box":
                  return 1;
                case "content-box":
                  return 2;
              }
            }
            return 0;
          });
        }, "parse")
      };
      var backgroundPosition = {
        name: "background-position",
        initialValue: "0% 0%",
        type: 1,
        prefix: false,
        parse: /* @__PURE__ */ __name2(function(_context, tokens) {
          return parseFunctionArgs(tokens).map(function(values) {
            return values.filter(isLengthPercentage);
          }).map(parseLengthPercentageTuple);
        }, "parse")
      };
      var backgroundRepeat = {
        name: "background-repeat",
        initialValue: "repeat",
        prefix: false,
        type: 1,
        parse: /* @__PURE__ */ __name2(function(_context, tokens) {
          return parseFunctionArgs(tokens).map(function(values) {
            return values.filter(isIdentToken).map(function(token) {
              return token.value;
            }).join(" ");
          }).map(parseBackgroundRepeat);
        }, "parse")
      };
      var parseBackgroundRepeat = /* @__PURE__ */ __name2(function(value) {
        switch (value) {
          case "no-repeat":
            return 1;
          case "repeat-x":
          case "repeat no-repeat":
            return 2;
          case "repeat-y":
          case "no-repeat repeat":
            return 3;
          case "repeat":
          default:
            return 0;
        }
      }, "parseBackgroundRepeat");
      var BACKGROUND_SIZE;
      (function(BACKGROUND_SIZE2) {
        BACKGROUND_SIZE2["AUTO"] = "auto";
        BACKGROUND_SIZE2["CONTAIN"] = "contain";
        BACKGROUND_SIZE2["COVER"] = "cover";
      })(BACKGROUND_SIZE || (BACKGROUND_SIZE = {}));
      var backgroundSize = {
        name: "background-size",
        initialValue: "0",
        prefix: false,
        type: 1,
        parse: /* @__PURE__ */ __name2(function(_context, tokens) {
          return parseFunctionArgs(tokens).map(function(values) {
            return values.filter(isBackgroundSizeInfoToken);
          });
        }, "parse")
      };
      var isBackgroundSizeInfoToken = /* @__PURE__ */ __name2(function(value) {
        return isIdentToken(value) || isLengthPercentage(value);
      }, "isBackgroundSizeInfoToken");
      var borderColorForSide = /* @__PURE__ */ __name2(function(side) {
        return {
          name: "border-" + side + "-color",
          initialValue: "transparent",
          prefix: false,
          type: 3,
          format: "color"
        };
      }, "borderColorForSide");
      var borderTopColor = borderColorForSide("top");
      var borderRightColor = borderColorForSide("right");
      var borderBottomColor = borderColorForSide("bottom");
      var borderLeftColor = borderColorForSide("left");
      var borderRadiusForSide = /* @__PURE__ */ __name2(function(side) {
        return {
          name: "border-radius-" + side,
          initialValue: "0 0",
          prefix: false,
          type: 1,
          parse: /* @__PURE__ */ __name2(function(_context, tokens) {
            return parseLengthPercentageTuple(tokens.filter(isLengthPercentage));
          }, "parse")
        };
      }, "borderRadiusForSide");
      var borderTopLeftRadius = borderRadiusForSide("top-left");
      var borderTopRightRadius = borderRadiusForSide("top-right");
      var borderBottomRightRadius = borderRadiusForSide("bottom-right");
      var borderBottomLeftRadius = borderRadiusForSide("bottom-left");
      var borderStyleForSide = /* @__PURE__ */ __name2(function(side) {
        return {
          name: "border-" + side + "-style",
          initialValue: "solid",
          prefix: false,
          type: 2,
          parse: /* @__PURE__ */ __name2(function(_context, style) {
            switch (style) {
              case "none":
                return 0;
              case "dashed":
                return 2;
              case "dotted":
                return 3;
              case "double":
                return 4;
            }
            return 1;
          }, "parse")
        };
      }, "borderStyleForSide");
      var borderTopStyle = borderStyleForSide("top");
      var borderRightStyle = borderStyleForSide("right");
      var borderBottomStyle = borderStyleForSide("bottom");
      var borderLeftStyle = borderStyleForSide("left");
      var borderWidthForSide = /* @__PURE__ */ __name2(function(side) {
        return {
          name: "border-" + side + "-width",
          initialValue: "0",
          type: 0,
          prefix: false,
          parse: /* @__PURE__ */ __name2(function(_context, token) {
            if (isDimensionToken(token)) {
              return token.number;
            }
            return 0;
          }, "parse")
        };
      }, "borderWidthForSide");
      var borderTopWidth = borderWidthForSide("top");
      var borderRightWidth = borderWidthForSide("right");
      var borderBottomWidth = borderWidthForSide("bottom");
      var borderLeftWidth = borderWidthForSide("left");
      var color = {
        name: "color",
        initialValue: "transparent",
        prefix: false,
        type: 3,
        format: "color"
      };
      var direction = {
        name: "direction",
        initialValue: "ltr",
        prefix: false,
        type: 2,
        parse: /* @__PURE__ */ __name2(function(_context, direction2) {
          switch (direction2) {
            case "rtl":
              return 1;
            case "ltr":
            default:
              return 0;
          }
        }, "parse")
      };
      var display = {
        name: "display",
        initialValue: "inline-block",
        prefix: false,
        type: 1,
        parse: /* @__PURE__ */ __name2(function(_context, tokens) {
          return tokens.filter(isIdentToken).reduce(
            function(bit, token) {
              return bit | parseDisplayValue(token.value);
            },
            0
            /* NONE */
          );
        }, "parse")
      };
      var parseDisplayValue = /* @__PURE__ */ __name2(function(display2) {
        switch (display2) {
          case "block":
          case "-webkit-box":
            return 2;
          case "inline":
            return 4;
          case "run-in":
            return 8;
          case "flow":
            return 16;
          case "flow-root":
            return 32;
          case "table":
            return 64;
          case "flex":
          case "-webkit-flex":
            return 128;
          case "grid":
          case "-ms-grid":
            return 256;
          case "ruby":
            return 512;
          case "subgrid":
            return 1024;
          case "list-item":
            return 2048;
          case "table-row-group":
            return 4096;
          case "table-header-group":
            return 8192;
          case "table-footer-group":
            return 16384;
          case "table-row":
            return 32768;
          case "table-cell":
            return 65536;
          case "table-column-group":
            return 131072;
          case "table-column":
            return 262144;
          case "table-caption":
            return 524288;
          case "ruby-base":
            return 1048576;
          case "ruby-text":
            return 2097152;
          case "ruby-base-container":
            return 4194304;
          case "ruby-text-container":
            return 8388608;
          case "contents":
            return 16777216;
          case "inline-block":
            return 33554432;
          case "inline-list-item":
            return 67108864;
          case "inline-table":
            return 134217728;
          case "inline-flex":
            return 268435456;
          case "inline-grid":
            return 536870912;
        }
        return 0;
      }, "parseDisplayValue");
      var float = {
        name: "float",
        initialValue: "none",
        prefix: false,
        type: 2,
        parse: /* @__PURE__ */ __name2(function(_context, float2) {
          switch (float2) {
            case "left":
              return 1;
            case "right":
              return 2;
            case "inline-start":
              return 3;
            case "inline-end":
              return 4;
          }
          return 0;
        }, "parse")
      };
      var letterSpacing = {
        name: "letter-spacing",
        initialValue: "0",
        prefix: false,
        type: 0,
        parse: /* @__PURE__ */ __name2(function(_context, token) {
          if (token.type === 20 && token.value === "normal") {
            return 0;
          }
          if (token.type === 17) {
            return token.number;
          }
          if (token.type === 15) {
            return token.number;
          }
          return 0;
        }, "parse")
      };
      var LINE_BREAK;
      (function(LINE_BREAK2) {
        LINE_BREAK2["NORMAL"] = "normal";
        LINE_BREAK2["STRICT"] = "strict";
      })(LINE_BREAK || (LINE_BREAK = {}));
      var lineBreak = {
        name: "line-break",
        initialValue: "normal",
        prefix: false,
        type: 2,
        parse: /* @__PURE__ */ __name2(function(_context, lineBreak2) {
          switch (lineBreak2) {
            case "strict":
              return LINE_BREAK.STRICT;
            case "normal":
            default:
              return LINE_BREAK.NORMAL;
          }
        }, "parse")
      };
      var lineHeight = {
        name: "line-height",
        initialValue: "normal",
        prefix: false,
        type: 4
        /* TOKEN_VALUE */
      };
      var computeLineHeight = /* @__PURE__ */ __name2(function(token, fontSize2) {
        if (isIdentToken(token) && token.value === "normal") {
          return 1.2 * fontSize2;
        } else if (token.type === 17) {
          return fontSize2 * token.number;
        } else if (isLengthPercentage(token)) {
          return getAbsoluteValue(token, fontSize2);
        }
        return fontSize2;
      }, "computeLineHeight");
      var listStyleImage = {
        name: "list-style-image",
        initialValue: "none",
        type: 0,
        prefix: false,
        parse: /* @__PURE__ */ __name2(function(context, token) {
          if (token.type === 20 && token.value === "none") {
            return null;
          }
          return image.parse(context, token);
        }, "parse")
      };
      var listStylePosition = {
        name: "list-style-position",
        initialValue: "outside",
        prefix: false,
        type: 2,
        parse: /* @__PURE__ */ __name2(function(_context, position2) {
          switch (position2) {
            case "inside":
              return 0;
            case "outside":
            default:
              return 1;
          }
        }, "parse")
      };
      var listStyleType = {
        name: "list-style-type",
        initialValue: "none",
        prefix: false,
        type: 2,
        parse: /* @__PURE__ */ __name2(function(_context, type) {
          switch (type) {
            case "disc":
              return 0;
            case "circle":
              return 1;
            case "square":
              return 2;
            case "decimal":
              return 3;
            case "cjk-decimal":
              return 4;
            case "decimal-leading-zero":
              return 5;
            case "lower-roman":
              return 6;
            case "upper-roman":
              return 7;
            case "lower-greek":
              return 8;
            case "lower-alpha":
              return 9;
            case "upper-alpha":
              return 10;
            case "arabic-indic":
              return 11;
            case "armenian":
              return 12;
            case "bengali":
              return 13;
            case "cambodian":
              return 14;
            case "cjk-earthly-branch":
              return 15;
            case "cjk-heavenly-stem":
              return 16;
            case "cjk-ideographic":
              return 17;
            case "devanagari":
              return 18;
            case "ethiopic-numeric":
              return 19;
            case "georgian":
              return 20;
            case "gujarati":
              return 21;
            case "gurmukhi":
              return 22;
            case "hebrew":
              return 22;
            case "hiragana":
              return 23;
            case "hiragana-iroha":
              return 24;
            case "japanese-formal":
              return 25;
            case "japanese-informal":
              return 26;
            case "kannada":
              return 27;
            case "katakana":
              return 28;
            case "katakana-iroha":
              return 29;
            case "khmer":
              return 30;
            case "korean-hangul-formal":
              return 31;
            case "korean-hanja-formal":
              return 32;
            case "korean-hanja-informal":
              return 33;
            case "lao":
              return 34;
            case "lower-armenian":
              return 35;
            case "malayalam":
              return 36;
            case "mongolian":
              return 37;
            case "myanmar":
              return 38;
            case "oriya":
              return 39;
            case "persian":
              return 40;
            case "simp-chinese-formal":
              return 41;
            case "simp-chinese-informal":
              return 42;
            case "tamil":
              return 43;
            case "telugu":
              return 44;
            case "thai":
              return 45;
            case "tibetan":
              return 46;
            case "trad-chinese-formal":
              return 47;
            case "trad-chinese-informal":
              return 48;
            case "upper-armenian":
              return 49;
            case "disclosure-open":
              return 50;
            case "disclosure-closed":
              return 51;
            case "none":
            default:
              return -1;
          }
        }, "parse")
      };
      var marginForSide = /* @__PURE__ */ __name2(function(side) {
        return {
          name: "margin-" + side,
          initialValue: "0",
          prefix: false,
          type: 4
          /* TOKEN_VALUE */
        };
      }, "marginForSide");
      var marginTop = marginForSide("top");
      var marginRight = marginForSide("right");
      var marginBottom = marginForSide("bottom");
      var marginLeft = marginForSide("left");
      var overflow = {
        name: "overflow",
        initialValue: "visible",
        prefix: false,
        type: 1,
        parse: /* @__PURE__ */ __name2(function(_context, tokens) {
          return tokens.filter(isIdentToken).map(function(overflow2) {
            switch (overflow2.value) {
              case "hidden":
                return 1;
              case "scroll":
                return 2;
              case "clip":
                return 3;
              case "auto":
                return 4;
              case "visible":
              default:
                return 0;
            }
          });
        }, "parse")
      };
      var overflowWrap = {
        name: "overflow-wrap",
        initialValue: "normal",
        prefix: false,
        type: 2,
        parse: /* @__PURE__ */ __name2(function(_context, overflow2) {
          switch (overflow2) {
            case "break-word":
              return "break-word";
            case "normal":
            default:
              return "normal";
          }
        }, "parse")
      };
      var paddingForSide = /* @__PURE__ */ __name2(function(side) {
        return {
          name: "padding-" + side,
          initialValue: "0",
          prefix: false,
          type: 3,
          format: "length-percentage"
        };
      }, "paddingForSide");
      var paddingTop = paddingForSide("top");
      var paddingRight = paddingForSide("right");
      var paddingBottom = paddingForSide("bottom");
      var paddingLeft = paddingForSide("left");
      var textAlign = {
        name: "text-align",
        initialValue: "left",
        prefix: false,
        type: 2,
        parse: /* @__PURE__ */ __name2(function(_context, textAlign2) {
          switch (textAlign2) {
            case "right":
              return 2;
            case "center":
            case "justify":
              return 1;
            case "left":
            default:
              return 0;
          }
        }, "parse")
      };
      var position = {
        name: "position",
        initialValue: "static",
        prefix: false,
        type: 2,
        parse: /* @__PURE__ */ __name2(function(_context, position2) {
          switch (position2) {
            case "relative":
              return 1;
            case "absolute":
              return 2;
            case "fixed":
              return 3;
            case "sticky":
              return 4;
          }
          return 0;
        }, "parse")
      };
      var textShadow = {
        name: "text-shadow",
        initialValue: "none",
        type: 1,
        prefix: false,
        parse: /* @__PURE__ */ __name2(function(context, tokens) {
          if (tokens.length === 1 && isIdentWithValue(tokens[0], "none")) {
            return [];
          }
          return parseFunctionArgs(tokens).map(function(values) {
            var shadow = {
              color: COLORS.TRANSPARENT,
              offsetX: ZERO_LENGTH,
              offsetY: ZERO_LENGTH,
              blur: ZERO_LENGTH
            };
            var c4 = 0;
            for (var i4 = 0; i4 < values.length; i4++) {
              var token = values[i4];
              if (isLength(token)) {
                if (c4 === 0) {
                  shadow.offsetX = token;
                } else if (c4 === 1) {
                  shadow.offsetY = token;
                } else {
                  shadow.blur = token;
                }
                c4++;
              } else {
                shadow.color = color$1.parse(context, token);
              }
            }
            return shadow;
          });
        }, "parse")
      };
      var textTransform = {
        name: "text-transform",
        initialValue: "none",
        prefix: false,
        type: 2,
        parse: /* @__PURE__ */ __name2(function(_context, textTransform2) {
          switch (textTransform2) {
            case "uppercase":
              return 2;
            case "lowercase":
              return 1;
            case "capitalize":
              return 3;
          }
          return 0;
        }, "parse")
      };
      var transform$1 = {
        name: "transform",
        initialValue: "none",
        prefix: true,
        type: 0,
        parse: /* @__PURE__ */ __name2(function(_context, token) {
          if (token.type === 20 && token.value === "none") {
            return null;
          }
          if (token.type === 18) {
            var transformFunction = SUPPORTED_TRANSFORM_FUNCTIONS[token.name];
            if (typeof transformFunction === "undefined") {
              throw new Error('Attempting to parse an unsupported transform function "' + token.name + '"');
            }
            return transformFunction(token.values);
          }
          return null;
        }, "parse")
      };
      var matrix = /* @__PURE__ */ __name2(function(args) {
        var values = args.filter(function(arg) {
          return arg.type === 17;
        }).map(function(arg) {
          return arg.number;
        });
        return values.length === 6 ? values : null;
      }, "matrix");
      var matrix3d = /* @__PURE__ */ __name2(function(args) {
        var values = args.filter(function(arg) {
          return arg.type === 17;
        }).map(function(arg) {
          return arg.number;
        });
        var a1 = values[0], b1 = values[1];
        values[2];
        values[3];
        var a22 = values[4], b2 = values[5];
        values[6];
        values[7];
        values[8];
        values[9];
        values[10];
        values[11];
        var a4 = values[12], b4 = values[13];
        values[14];
        values[15];
        return values.length === 16 ? [a1, b1, a22, b2, a4, b4] : null;
      }, "matrix3d");
      var SUPPORTED_TRANSFORM_FUNCTIONS = {
        matrix,
        matrix3d
      };
      var DEFAULT_VALUE = {
        type: 16,
        number: 50,
        flags: FLAG_INTEGER
      };
      var DEFAULT = [DEFAULT_VALUE, DEFAULT_VALUE];
      var transformOrigin = {
        name: "transform-origin",
        initialValue: "50% 50%",
        prefix: true,
        type: 1,
        parse: /* @__PURE__ */ __name2(function(_context, tokens) {
          var origins = tokens.filter(isLengthPercentage);
          if (origins.length !== 2) {
            return DEFAULT;
          }
          return [origins[0], origins[1]];
        }, "parse")
      };
      var visibility = {
        name: "visible",
        initialValue: "none",
        prefix: false,
        type: 2,
        parse: /* @__PURE__ */ __name2(function(_context, visibility2) {
          switch (visibility2) {
            case "hidden":
              return 1;
            case "collapse":
              return 2;
            case "visible":
            default:
              return 0;
          }
        }, "parse")
      };
      var WORD_BREAK;
      (function(WORD_BREAK2) {
        WORD_BREAK2["NORMAL"] = "normal";
        WORD_BREAK2["BREAK_ALL"] = "break-all";
        WORD_BREAK2["KEEP_ALL"] = "keep-all";
      })(WORD_BREAK || (WORD_BREAK = {}));
      var wordBreak = {
        name: "word-break",
        initialValue: "normal",
        prefix: false,
        type: 2,
        parse: /* @__PURE__ */ __name2(function(_context, wordBreak2) {
          switch (wordBreak2) {
            case "break-all":
              return WORD_BREAK.BREAK_ALL;
            case "keep-all":
              return WORD_BREAK.KEEP_ALL;
            case "normal":
            default:
              return WORD_BREAK.NORMAL;
          }
        }, "parse")
      };
      var zIndex = {
        name: "z-index",
        initialValue: "auto",
        prefix: false,
        type: 0,
        parse: /* @__PURE__ */ __name2(function(_context, token) {
          if (token.type === 20) {
            return { auto: true, order: 0 };
          }
          if (isNumberToken(token)) {
            return { auto: false, order: token.number };
          }
          throw new Error("Invalid z-index number parsed");
        }, "parse")
      };
      var time = {
        name: "time",
        parse: /* @__PURE__ */ __name2(function(_context, value) {
          if (value.type === 15) {
            switch (value.unit.toLowerCase()) {
              case "s":
                return 1e3 * value.number;
              case "ms":
                return value.number;
            }
          }
          throw new Error("Unsupported time type");
        }, "parse")
      };
      var opacity = {
        name: "opacity",
        initialValue: "1",
        type: 0,
        prefix: false,
        parse: /* @__PURE__ */ __name2(function(_context, token) {
          if (isNumberToken(token)) {
            return token.number;
          }
          return 1;
        }, "parse")
      };
      var textDecorationColor = {
        name: "text-decoration-color",
        initialValue: "transparent",
        prefix: false,
        type: 3,
        format: "color"
      };
      var textDecorationLine = {
        name: "text-decoration-line",
        initialValue: "none",
        prefix: false,
        type: 1,
        parse: /* @__PURE__ */ __name2(function(_context, tokens) {
          return tokens.filter(isIdentToken).map(function(token) {
            switch (token.value) {
              case "underline":
                return 1;
              case "overline":
                return 2;
              case "line-through":
                return 3;
              case "none":
                return 4;
            }
            return 0;
          }).filter(function(line) {
            return line !== 0;
          });
        }, "parse")
      };
      var fontFamily = {
        name: "font-family",
        initialValue: "",
        prefix: false,
        type: 1,
        parse: /* @__PURE__ */ __name2(function(_context, tokens) {
          var accumulator = [];
          var results = [];
          tokens.forEach(function(token) {
            switch (token.type) {
              case 20:
              case 0:
                accumulator.push(token.value);
                break;
              case 17:
                accumulator.push(token.number.toString());
                break;
              case 4:
                results.push(accumulator.join(" "));
                accumulator.length = 0;
                break;
            }
          });
          if (accumulator.length) {
            results.push(accumulator.join(" "));
          }
          return results.map(function(result) {
            return result.indexOf(" ") === -1 ? result : "'" + result + "'";
          });
        }, "parse")
      };
      var fontSize = {
        name: "font-size",
        initialValue: "0",
        prefix: false,
        type: 3,
        format: "length"
      };
      var fontWeight = {
        name: "font-weight",
        initialValue: "normal",
        type: 0,
        prefix: false,
        parse: /* @__PURE__ */ __name2(function(_context, token) {
          if (isNumberToken(token)) {
            return token.number;
          }
          if (isIdentToken(token)) {
            switch (token.value) {
              case "bold":
                return 700;
              case "normal":
              default:
                return 400;
            }
          }
          return 400;
        }, "parse")
      };
      var fontVariant = {
        name: "font-variant",
        initialValue: "none",
        type: 1,
        prefix: false,
        parse: /* @__PURE__ */ __name2(function(_context, tokens) {
          return tokens.filter(isIdentToken).map(function(token) {
            return token.value;
          });
        }, "parse")
      };
      var fontStyle = {
        name: "font-style",
        initialValue: "normal",
        prefix: false,
        type: 2,
        parse: /* @__PURE__ */ __name2(function(_context, overflow2) {
          switch (overflow2) {
            case "oblique":
              return "oblique";
            case "italic":
              return "italic";
            case "normal":
            default:
              return "normal";
          }
        }, "parse")
      };
      var contains = /* @__PURE__ */ __name2(function(bit, value) {
        return (bit & value) !== 0;
      }, "contains");
      var content = {
        name: "content",
        initialValue: "none",
        type: 1,
        prefix: false,
        parse: /* @__PURE__ */ __name2(function(_context, tokens) {
          if (tokens.length === 0) {
            return [];
          }
          var first = tokens[0];
          if (first.type === 20 && first.value === "none") {
            return [];
          }
          return tokens;
        }, "parse")
      };
      var counterIncrement = {
        name: "counter-increment",
        initialValue: "none",
        prefix: true,
        type: 1,
        parse: /* @__PURE__ */ __name2(function(_context, tokens) {
          if (tokens.length === 0) {
            return null;
          }
          var first = tokens[0];
          if (first.type === 20 && first.value === "none") {
            return null;
          }
          var increments = [];
          var filtered = tokens.filter(nonWhiteSpace);
          for (var i4 = 0; i4 < filtered.length; i4++) {
            var counter = filtered[i4];
            var next = filtered[i4 + 1];
            if (counter.type === 20) {
              var increment = next && isNumberToken(next) ? next.number : 1;
              increments.push({ counter: counter.value, increment });
            }
          }
          return increments;
        }, "parse")
      };
      var counterReset = {
        name: "counter-reset",
        initialValue: "none",
        prefix: true,
        type: 1,
        parse: /* @__PURE__ */ __name2(function(_context, tokens) {
          if (tokens.length === 0) {
            return [];
          }
          var resets = [];
          var filtered = tokens.filter(nonWhiteSpace);
          for (var i4 = 0; i4 < filtered.length; i4++) {
            var counter = filtered[i4];
            var next = filtered[i4 + 1];
            if (isIdentToken(counter) && counter.value !== "none") {
              var reset = next && isNumberToken(next) ? next.number : 0;
              resets.push({ counter: counter.value, reset });
            }
          }
          return resets;
        }, "parse")
      };
      var duration = {
        name: "duration",
        initialValue: "0s",
        prefix: false,
        type: 1,
        parse: /* @__PURE__ */ __name2(function(context, tokens) {
          return tokens.filter(isDimensionToken).map(function(token) {
            return time.parse(context, token);
          });
        }, "parse")
      };
      var quotes = {
        name: "quotes",
        initialValue: "none",
        prefix: true,
        type: 1,
        parse: /* @__PURE__ */ __name2(function(_context, tokens) {
          if (tokens.length === 0) {
            return null;
          }
          var first = tokens[0];
          if (first.type === 20 && first.value === "none") {
            return null;
          }
          var quotes2 = [];
          var filtered = tokens.filter(isStringToken);
          if (filtered.length % 2 !== 0) {
            return null;
          }
          for (var i4 = 0; i4 < filtered.length; i4 += 2) {
            var open_1 = filtered[i4].value;
            var close_1 = filtered[i4 + 1].value;
            quotes2.push({ open: open_1, close: close_1 });
          }
          return quotes2;
        }, "parse")
      };
      var getQuote = /* @__PURE__ */ __name2(function(quotes2, depth, open2) {
        if (!quotes2) {
          return "";
        }
        var quote = quotes2[Math.min(depth, quotes2.length - 1)];
        if (!quote) {
          return "";
        }
        return open2 ? quote.open : quote.close;
      }, "getQuote");
      var boxShadow = {
        name: "box-shadow",
        initialValue: "none",
        type: 1,
        prefix: false,
        parse: /* @__PURE__ */ __name2(function(context, tokens) {
          if (tokens.length === 1 && isIdentWithValue(tokens[0], "none")) {
            return [];
          }
          return parseFunctionArgs(tokens).map(function(values) {
            var shadow = {
              color: 255,
              offsetX: ZERO_LENGTH,
              offsetY: ZERO_LENGTH,
              blur: ZERO_LENGTH,
              spread: ZERO_LENGTH,
              inset: false
            };
            var c4 = 0;
            for (var i4 = 0; i4 < values.length; i4++) {
              var token = values[i4];
              if (isIdentWithValue(token, "inset")) {
                shadow.inset = true;
              } else if (isLength(token)) {
                if (c4 === 0) {
                  shadow.offsetX = token;
                } else if (c4 === 1) {
                  shadow.offsetY = token;
                } else if (c4 === 2) {
                  shadow.blur = token;
                } else {
                  shadow.spread = token;
                }
                c4++;
              } else {
                shadow.color = color$1.parse(context, token);
              }
            }
            return shadow;
          });
        }, "parse")
      };
      var paintOrder = {
        name: "paint-order",
        initialValue: "normal",
        prefix: false,
        type: 1,
        parse: /* @__PURE__ */ __name2(function(_context, tokens) {
          var DEFAULT_VALUE2 = [
            0,
            1,
            2
            /* MARKERS */
          ];
          var layers = [];
          tokens.filter(isIdentToken).forEach(function(token) {
            switch (token.value) {
              case "stroke":
                layers.push(
                  1
                  /* STROKE */
                );
                break;
              case "fill":
                layers.push(
                  0
                  /* FILL */
                );
                break;
              case "markers":
                layers.push(
                  2
                  /* MARKERS */
                );
                break;
            }
          });
          DEFAULT_VALUE2.forEach(function(value) {
            if (layers.indexOf(value) === -1) {
              layers.push(value);
            }
          });
          return layers;
        }, "parse")
      };
      var webkitTextStrokeColor = {
        name: "-webkit-text-stroke-color",
        initialValue: "currentcolor",
        prefix: false,
        type: 3,
        format: "color"
      };
      var webkitTextStrokeWidth = {
        name: "-webkit-text-stroke-width",
        initialValue: "0",
        type: 0,
        prefix: false,
        parse: /* @__PURE__ */ __name2(function(_context, token) {
          if (isDimensionToken(token)) {
            return token.number;
          }
          return 0;
        }, "parse")
      };
      var CSSParsedDeclaration = (
        /** @class */
        function() {
          function CSSParsedDeclaration2(context, declaration) {
            var _a2, _b2;
            this.animationDuration = parse2(context, duration, declaration.animationDuration);
            this.backgroundClip = parse2(context, backgroundClip, declaration.backgroundClip);
            this.backgroundColor = parse2(context, backgroundColor, declaration.backgroundColor);
            this.backgroundImage = parse2(context, backgroundImage, declaration.backgroundImage);
            this.backgroundOrigin = parse2(context, backgroundOrigin, declaration.backgroundOrigin);
            this.backgroundPosition = parse2(context, backgroundPosition, declaration.backgroundPosition);
            this.backgroundRepeat = parse2(context, backgroundRepeat, declaration.backgroundRepeat);
            this.backgroundSize = parse2(context, backgroundSize, declaration.backgroundSize);
            this.borderTopColor = parse2(context, borderTopColor, declaration.borderTopColor);
            this.borderRightColor = parse2(context, borderRightColor, declaration.borderRightColor);
            this.borderBottomColor = parse2(context, borderBottomColor, declaration.borderBottomColor);
            this.borderLeftColor = parse2(context, borderLeftColor, declaration.borderLeftColor);
            this.borderTopLeftRadius = parse2(context, borderTopLeftRadius, declaration.borderTopLeftRadius);
            this.borderTopRightRadius = parse2(context, borderTopRightRadius, declaration.borderTopRightRadius);
            this.borderBottomRightRadius = parse2(context, borderBottomRightRadius, declaration.borderBottomRightRadius);
            this.borderBottomLeftRadius = parse2(context, borderBottomLeftRadius, declaration.borderBottomLeftRadius);
            this.borderTopStyle = parse2(context, borderTopStyle, declaration.borderTopStyle);
            this.borderRightStyle = parse2(context, borderRightStyle, declaration.borderRightStyle);
            this.borderBottomStyle = parse2(context, borderBottomStyle, declaration.borderBottomStyle);
            this.borderLeftStyle = parse2(context, borderLeftStyle, declaration.borderLeftStyle);
            this.borderTopWidth = parse2(context, borderTopWidth, declaration.borderTopWidth);
            this.borderRightWidth = parse2(context, borderRightWidth, declaration.borderRightWidth);
            this.borderBottomWidth = parse2(context, borderBottomWidth, declaration.borderBottomWidth);
            this.borderLeftWidth = parse2(context, borderLeftWidth, declaration.borderLeftWidth);
            this.boxShadow = parse2(context, boxShadow, declaration.boxShadow);
            this.color = parse2(context, color, declaration.color);
            this.direction = parse2(context, direction, declaration.direction);
            this.display = parse2(context, display, declaration.display);
            this.float = parse2(context, float, declaration.cssFloat);
            this.fontFamily = parse2(context, fontFamily, declaration.fontFamily);
            this.fontSize = parse2(context, fontSize, declaration.fontSize);
            this.fontStyle = parse2(context, fontStyle, declaration.fontStyle);
            this.fontVariant = parse2(context, fontVariant, declaration.fontVariant);
            this.fontWeight = parse2(context, fontWeight, declaration.fontWeight);
            this.letterSpacing = parse2(context, letterSpacing, declaration.letterSpacing);
            this.lineBreak = parse2(context, lineBreak, declaration.lineBreak);
            this.lineHeight = parse2(context, lineHeight, declaration.lineHeight);
            this.listStyleImage = parse2(context, listStyleImage, declaration.listStyleImage);
            this.listStylePosition = parse2(context, listStylePosition, declaration.listStylePosition);
            this.listStyleType = parse2(context, listStyleType, declaration.listStyleType);
            this.marginTop = parse2(context, marginTop, declaration.marginTop);
            this.marginRight = parse2(context, marginRight, declaration.marginRight);
            this.marginBottom = parse2(context, marginBottom, declaration.marginBottom);
            this.marginLeft = parse2(context, marginLeft, declaration.marginLeft);
            this.opacity = parse2(context, opacity, declaration.opacity);
            var overflowTuple = parse2(context, overflow, declaration.overflow);
            this.overflowX = overflowTuple[0];
            this.overflowY = overflowTuple[overflowTuple.length > 1 ? 1 : 0];
            this.overflowWrap = parse2(context, overflowWrap, declaration.overflowWrap);
            this.paddingTop = parse2(context, paddingTop, declaration.paddingTop);
            this.paddingRight = parse2(context, paddingRight, declaration.paddingRight);
            this.paddingBottom = parse2(context, paddingBottom, declaration.paddingBottom);
            this.paddingLeft = parse2(context, paddingLeft, declaration.paddingLeft);
            this.paintOrder = parse2(context, paintOrder, declaration.paintOrder);
            this.position = parse2(context, position, declaration.position);
            this.textAlign = parse2(context, textAlign, declaration.textAlign);
            this.textDecorationColor = parse2(context, textDecorationColor, (_a2 = declaration.textDecorationColor) !== null && _a2 !== void 0 ? _a2 : declaration.color);
            this.textDecorationLine = parse2(context, textDecorationLine, (_b2 = declaration.textDecorationLine) !== null && _b2 !== void 0 ? _b2 : declaration.textDecoration);
            this.textShadow = parse2(context, textShadow, declaration.textShadow);
            this.textTransform = parse2(context, textTransform, declaration.textTransform);
            this.transform = parse2(context, transform$1, declaration.transform);
            this.transformOrigin = parse2(context, transformOrigin, declaration.transformOrigin);
            this.visibility = parse2(context, visibility, declaration.visibility);
            this.webkitTextStrokeColor = parse2(context, webkitTextStrokeColor, declaration.webkitTextStrokeColor);
            this.webkitTextStrokeWidth = parse2(context, webkitTextStrokeWidth, declaration.webkitTextStrokeWidth);
            this.wordBreak = parse2(context, wordBreak, declaration.wordBreak);
            this.zIndex = parse2(context, zIndex, declaration.zIndex);
          }
          __name(CSSParsedDeclaration2, "CSSParsedDeclaration2");
          __name2(CSSParsedDeclaration2, "CSSParsedDeclaration");
          CSSParsedDeclaration2.prototype.isVisible = function() {
            return this.display > 0 && this.opacity > 0 && this.visibility === 0;
          };
          CSSParsedDeclaration2.prototype.isTransparent = function() {
            return isTransparent(this.backgroundColor);
          };
          CSSParsedDeclaration2.prototype.isTransformed = function() {
            return this.transform !== null;
          };
          CSSParsedDeclaration2.prototype.isPositioned = function() {
            return this.position !== 0;
          };
          CSSParsedDeclaration2.prototype.isPositionedWithZIndex = function() {
            return this.isPositioned() && !this.zIndex.auto;
          };
          CSSParsedDeclaration2.prototype.isFloating = function() {
            return this.float !== 0;
          };
          CSSParsedDeclaration2.prototype.isInlineLevel = function() {
            return contains(
              this.display,
              4
              /* INLINE */
            ) || contains(
              this.display,
              33554432
              /* INLINE_BLOCK */
            ) || contains(
              this.display,
              268435456
              /* INLINE_FLEX */
            ) || contains(
              this.display,
              536870912
              /* INLINE_GRID */
            ) || contains(
              this.display,
              67108864
              /* INLINE_LIST_ITEM */
            ) || contains(
              this.display,
              134217728
              /* INLINE_TABLE */
            );
          };
          return CSSParsedDeclaration2;
        }()
      );
      var CSSParsedPseudoDeclaration = (
        /** @class */
        /* @__PURE__ */ function() {
          function CSSParsedPseudoDeclaration2(context, declaration) {
            this.content = parse2(context, content, declaration.content);
            this.quotes = parse2(context, quotes, declaration.quotes);
          }
          __name(CSSParsedPseudoDeclaration2, "CSSParsedPseudoDeclaration2");
          __name2(CSSParsedPseudoDeclaration2, "CSSParsedPseudoDeclaration");
          return CSSParsedPseudoDeclaration2;
        }()
      );
      var CSSParsedCounterDeclaration = (
        /** @class */
        /* @__PURE__ */ function() {
          function CSSParsedCounterDeclaration2(context, declaration) {
            this.counterIncrement = parse2(context, counterIncrement, declaration.counterIncrement);
            this.counterReset = parse2(context, counterReset, declaration.counterReset);
          }
          __name(CSSParsedCounterDeclaration2, "CSSParsedCounterDeclaration2");
          __name2(CSSParsedCounterDeclaration2, "CSSParsedCounterDeclaration");
          return CSSParsedCounterDeclaration2;
        }()
      );
      var parse2 = /* @__PURE__ */ __name2(function(context, descriptor, style) {
        var tokenizer = new Tokenizer();
        var value = style !== null && typeof style !== "undefined" ? style.toString() : descriptor.initialValue;
        tokenizer.write(value);
        var parser = new Parser2(tokenizer.read());
        switch (descriptor.type) {
          case 2:
            var token = parser.parseComponentValue();
            return descriptor.parse(context, isIdentToken(token) ? token.value : descriptor.initialValue);
          case 0:
            return descriptor.parse(context, parser.parseComponentValue());
          case 1:
            return descriptor.parse(context, parser.parseComponentValues());
          case 4:
            return parser.parseComponentValue();
          case 3:
            switch (descriptor.format) {
              case "angle":
                return angle.parse(context, parser.parseComponentValue());
              case "color":
                return color$1.parse(context, parser.parseComponentValue());
              case "image":
                return image.parse(context, parser.parseComponentValue());
              case "length":
                var length_1 = parser.parseComponentValue();
                return isLength(length_1) ? length_1 : ZERO_LENGTH;
              case "length-percentage":
                var value_1 = parser.parseComponentValue();
                return isLengthPercentage(value_1) ? value_1 : ZERO_LENGTH;
              case "time":
                return time.parse(context, parser.parseComponentValue());
            }
            break;
        }
      }, "parse");
      var elementDebuggerAttribute = "data-html2canvas-debug";
      var getElementDebugType = /* @__PURE__ */ __name2(function(element) {
        var attribute = element.getAttribute(elementDebuggerAttribute);
        switch (attribute) {
          case "all":
            return 1;
          case "clone":
            return 2;
          case "parse":
            return 3;
          case "render":
            return 4;
          default:
            return 0;
        }
      }, "getElementDebugType");
      var isDebugging = /* @__PURE__ */ __name2(function(element, type) {
        var elementType = getElementDebugType(element);
        return elementType === 1 || type === elementType;
      }, "isDebugging");
      var ElementContainer = (
        /** @class */
        /* @__PURE__ */ function() {
          function ElementContainer2(context, element) {
            this.context = context;
            this.textNodes = [];
            this.elements = [];
            this.flags = 0;
            if (isDebugging(
              element,
              3
              /* PARSE */
            )) {
              debugger;
            }
            this.styles = new CSSParsedDeclaration(context, window.getComputedStyle(element, null));
            if (isHTMLElementNode(element)) {
              if (this.styles.animationDuration.some(function(duration2) {
                return duration2 > 0;
              })) {
                element.style.animationDuration = "0s";
              }
              if (this.styles.transform !== null) {
                element.style.transform = "none";
              }
            }
            this.bounds = parseBounds(this.context, element);
            if (isDebugging(
              element,
              4
              /* RENDER */
            )) {
              this.flags |= 16;
            }
          }
          __name(ElementContainer2, "ElementContainer2");
          __name2(ElementContainer2, "ElementContainer");
          return ElementContainer2;
        }()
      );
      var base64 = "AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=";
      var chars$1 = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";
      var lookup$1 = typeof Uint8Array === "undefined" ? [] : new Uint8Array(256);
      for (var i$1 = 0; i$1 < chars$1.length; i$1++) {
        lookup$1[chars$1.charCodeAt(i$1)] = i$1;
      }
      var decode = /* @__PURE__ */ __name2(function(base642) {
        var bufferLength = base642.length * 0.75, len = base642.length, i4, p3 = 0, encoded1, encoded2, encoded3, encoded4;
        if (base642[base642.length - 1] === "=") {
          bufferLength--;
          if (base642[base642.length - 2] === "=") {
            bufferLength--;
          }
        }
        var buffer = typeof ArrayBuffer !== "undefined" && typeof Uint8Array !== "undefined" && typeof Uint8Array.prototype.slice !== "undefined" ? new ArrayBuffer(bufferLength) : new Array(bufferLength);
        var bytes = Array.isArray(buffer) ? buffer : new Uint8Array(buffer);
        for (i4 = 0; i4 < len; i4 += 4) {
          encoded1 = lookup$1[base642.charCodeAt(i4)];
          encoded2 = lookup$1[base642.charCodeAt(i4 + 1)];
          encoded3 = lookup$1[base642.charCodeAt(i4 + 2)];
          encoded4 = lookup$1[base642.charCodeAt(i4 + 3)];
          bytes[p3++] = encoded1 << 2 | encoded2 >> 4;
          bytes[p3++] = (encoded2 & 15) << 4 | encoded3 >> 2;
          bytes[p3++] = (encoded3 & 3) << 6 | encoded4 & 63;
        }
        return buffer;
      }, "decode");
      var polyUint16Array = /* @__PURE__ */ __name2(function(buffer) {
        var length = buffer.length;
        var bytes = [];
        for (var i4 = 0; i4 < length; i4 += 2) {
          bytes.push(buffer[i4 + 1] << 8 | buffer[i4]);
        }
        return bytes;
      }, "polyUint16Array");
      var polyUint32Array = /* @__PURE__ */ __name2(function(buffer) {
        var length = buffer.length;
        var bytes = [];
        for (var i4 = 0; i4 < length; i4 += 4) {
          bytes.push(buffer[i4 + 3] << 24 | buffer[i4 + 2] << 16 | buffer[i4 + 1] << 8 | buffer[i4]);
        }
        return bytes;
      }, "polyUint32Array");
      var UTRIE2_SHIFT_2 = 5;
      var UTRIE2_SHIFT_1 = 6 + 5;
      var UTRIE2_INDEX_SHIFT = 2;
      var UTRIE2_SHIFT_1_2 = UTRIE2_SHIFT_1 - UTRIE2_SHIFT_2;
      var UTRIE2_LSCP_INDEX_2_OFFSET = 65536 >> UTRIE2_SHIFT_2;
      var UTRIE2_DATA_BLOCK_LENGTH = 1 << UTRIE2_SHIFT_2;
      var UTRIE2_DATA_MASK = UTRIE2_DATA_BLOCK_LENGTH - 1;
      var UTRIE2_LSCP_INDEX_2_LENGTH = 1024 >> UTRIE2_SHIFT_2;
      var UTRIE2_INDEX_2_BMP_LENGTH = UTRIE2_LSCP_INDEX_2_OFFSET + UTRIE2_LSCP_INDEX_2_LENGTH;
      var UTRIE2_UTF8_2B_INDEX_2_OFFSET = UTRIE2_INDEX_2_BMP_LENGTH;
      var UTRIE2_UTF8_2B_INDEX_2_LENGTH = 2048 >> 6;
      var UTRIE2_INDEX_1_OFFSET = UTRIE2_UTF8_2B_INDEX_2_OFFSET + UTRIE2_UTF8_2B_INDEX_2_LENGTH;
      var UTRIE2_OMITTED_BMP_INDEX_1_LENGTH = 65536 >> UTRIE2_SHIFT_1;
      var UTRIE2_INDEX_2_BLOCK_LENGTH = 1 << UTRIE2_SHIFT_1_2;
      var UTRIE2_INDEX_2_MASK = UTRIE2_INDEX_2_BLOCK_LENGTH - 1;
      var slice16 = /* @__PURE__ */ __name2(function(view, start, end) {
        if (view.slice) {
          return view.slice(start, end);
        }
        return new Uint16Array(Array.prototype.slice.call(view, start, end));
      }, "slice16");
      var slice32 = /* @__PURE__ */ __name2(function(view, start, end) {
        if (view.slice) {
          return view.slice(start, end);
        }
        return new Uint32Array(Array.prototype.slice.call(view, start, end));
      }, "slice32");
      var createTrieFromBase64 = /* @__PURE__ */ __name2(function(base642, _byteLength) {
        var buffer = decode(base642);
        var view32 = Array.isArray(buffer) ? polyUint32Array(buffer) : new Uint32Array(buffer);
        var view16 = Array.isArray(buffer) ? polyUint16Array(buffer) : new Uint16Array(buffer);
        var headerLength = 24;
        var index2 = slice16(view16, headerLength / 2, view32[4] / 2);
        var data = view32[5] === 2 ? slice16(view16, (headerLength + view32[4]) / 2) : slice32(view32, Math.ceil((headerLength + view32[4]) / 4));
        return new Trie(view32[0], view32[1], view32[2], view32[3], index2, data);
      }, "createTrieFromBase64");
      var Trie = (
        /** @class */
        function() {
          function Trie2(initialValue, errorValue, highStart, highValueIndex, index2, data) {
            this.initialValue = initialValue;
            this.errorValue = errorValue;
            this.highStart = highStart;
            this.highValueIndex = highValueIndex;
            this.index = index2;
            this.data = data;
          }
          __name(Trie2, "Trie2");
          __name2(Trie2, "Trie");
          Trie2.prototype.get = function(codePoint) {
            var ix;
            if (codePoint >= 0) {
              if (codePoint < 55296 || codePoint > 56319 && codePoint <= 65535) {
                ix = this.index[codePoint >> UTRIE2_SHIFT_2];
                ix = (ix << UTRIE2_INDEX_SHIFT) + (codePoint & UTRIE2_DATA_MASK);
                return this.data[ix];
              }
              if (codePoint <= 65535) {
                ix = this.index[UTRIE2_LSCP_INDEX_2_OFFSET + (codePoint - 55296 >> UTRIE2_SHIFT_2)];
                ix = (ix << UTRIE2_INDEX_SHIFT) + (codePoint & UTRIE2_DATA_MASK);
                return this.data[ix];
              }
              if (codePoint < this.highStart) {
                ix = UTRIE2_INDEX_1_OFFSET - UTRIE2_OMITTED_BMP_INDEX_1_LENGTH + (codePoint >> UTRIE2_SHIFT_1);
                ix = this.index[ix];
                ix += codePoint >> UTRIE2_SHIFT_2 & UTRIE2_INDEX_2_MASK;
                ix = this.index[ix];
                ix = (ix << UTRIE2_INDEX_SHIFT) + (codePoint & UTRIE2_DATA_MASK);
                return this.data[ix];
              }
              if (codePoint <= 1114111) {
                return this.data[this.highValueIndex];
              }
            }
            return this.errorValue;
          };
          return Trie2;
        }()
      );
      var chars = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";
      var lookup = typeof Uint8Array === "undefined" ? [] : new Uint8Array(256);
      for (var i33 = 0; i33 < chars.length; i33++) {
        lookup[chars.charCodeAt(i33)] = i33;
      }
      var Prepend = 1;
      var CR = 2;
      var LF = 3;
      var Control = 4;
      var Extend = 5;
      var SpacingMark = 7;
      var L2 = 8;
      var V3 = 9;
      var T3 = 10;
      var LV = 11;
      var LVT = 12;
      var ZWJ = 13;
      var Extended_Pictographic = 14;
      var RI = 15;
      var toCodePoints = /* @__PURE__ */ __name2(function(str) {
        var codePoints = [];
        var i4 = 0;
        var length = str.length;
        while (i4 < length) {
          var value = str.charCodeAt(i4++);
          if (value >= 55296 && value <= 56319 && i4 < length) {
            var extra = str.charCodeAt(i4++);
            if ((extra & 64512) === 56320) {
              codePoints.push(((value & 1023) << 10) + (extra & 1023) + 65536);
            } else {
              codePoints.push(value);
              i4--;
            }
          } else {
            codePoints.push(value);
          }
        }
        return codePoints;
      }, "toCodePoints");
      var fromCodePoint = /* @__PURE__ */ __name2(function() {
        var codePoints = [];
        for (var _i = 0; _i < arguments.length; _i++) {
          codePoints[_i] = arguments[_i];
        }
        if (String.fromCodePoint) {
          return String.fromCodePoint.apply(String, codePoints);
        }
        var length = codePoints.length;
        if (!length) {
          return "";
        }
        var codeUnits = [];
        var index2 = -1;
        var result = "";
        while (++index2 < length) {
          var codePoint = codePoints[index2];
          if (codePoint <= 65535) {
            codeUnits.push(codePoint);
          } else {
            codePoint -= 65536;
            codeUnits.push((codePoint >> 10) + 55296, codePoint % 1024 + 56320);
          }
          if (index2 + 1 === length || codeUnits.length > 16384) {
            result += String.fromCharCode.apply(String, codeUnits);
            codeUnits.length = 0;
          }
        }
        return result;
      }, "fromCodePoint");
      var UnicodeTrie = createTrieFromBase64(base64);
      var BREAK_NOT_ALLOWED = "\xD7";
      var BREAK_ALLOWED = "\xF7";
      var codePointToClass = /* @__PURE__ */ __name2(function(codePoint) {
        return UnicodeTrie.get(codePoint);
      }, "codePointToClass");
      var _graphemeBreakAtIndex = /* @__PURE__ */ __name2(function(_codePoints, classTypes, index2) {
        var prevIndex = index2 - 2;
        var prev = classTypes[prevIndex];
        var current = classTypes[index2 - 1];
        var next = classTypes[index2];
        if (current === CR && next === LF) {
          return BREAK_NOT_ALLOWED;
        }
        if (current === CR || current === LF || current === Control) {
          return BREAK_ALLOWED;
        }
        if (next === CR || next === LF || next === Control) {
          return BREAK_ALLOWED;
        }
        if (current === L2 && [L2, V3, LV, LVT].indexOf(next) !== -1) {
          return BREAK_NOT_ALLOWED;
        }
        if ((current === LV || current === V3) && (next === V3 || next === T3)) {
          return BREAK_NOT_ALLOWED;
        }
        if ((current === LVT || current === T3) && next === T3) {
          return BREAK_NOT_ALLOWED;
        }
        if (next === ZWJ || next === Extend) {
          return BREAK_NOT_ALLOWED;
        }
        if (next === SpacingMark) {
          return BREAK_NOT_ALLOWED;
        }
        if (current === Prepend) {
          return BREAK_NOT_ALLOWED;
        }
        if (current === ZWJ && next === Extended_Pictographic) {
          while (prev === Extend) {
            prev = classTypes[--prevIndex];
          }
          if (prev === Extended_Pictographic) {
            return BREAK_NOT_ALLOWED;
          }
        }
        if (current === RI && next === RI) {
          var countRI = 0;
          while (prev === RI) {
            countRI++;
            prev = classTypes[--prevIndex];
          }
          if (countRI % 2 === 0) {
            return BREAK_NOT_ALLOWED;
          }
        }
        return BREAK_ALLOWED;
      }, "_graphemeBreakAtIndex");
      var GraphemeBreaker = /* @__PURE__ */ __name2(function(str) {
        var codePoints = toCodePoints(str);
        var length = codePoints.length;
        var index2 = 0;
        var lastEnd = 0;
        var classTypes = codePoints.map(codePointToClass);
        return {
          next: /* @__PURE__ */ __name2(function() {
            if (index2 >= length) {
              return { done: true, value: null };
            }
            var graphemeBreak = BREAK_NOT_ALLOWED;
            while (index2 < length && (graphemeBreak = _graphemeBreakAtIndex(codePoints, classTypes, ++index2)) === BREAK_NOT_ALLOWED) {
            }
            if (graphemeBreak !== BREAK_NOT_ALLOWED || index2 === length) {
              var value = fromCodePoint.apply(null, codePoints.slice(lastEnd, index2));
              lastEnd = index2;
              return { value, done: false };
            }
            return { done: true, value: null };
          }, "next")
        };
      }, "GraphemeBreaker");
      var splitGraphemes = /* @__PURE__ */ __name2(function(str) {
        var breaker = GraphemeBreaker(str);
        var graphemes = [];
        var bk;
        while (!(bk = breaker.next()).done) {
          if (bk.value) {
            graphemes.push(bk.value.slice());
          }
        }
        return graphemes;
      }, "splitGraphemes");
      var testRangeBounds = /* @__PURE__ */ __name2(function(document2) {
        var TEST_HEIGHT = 123;
        if (document2.createRange) {
          var range = document2.createRange();
          if (range.getBoundingClientRect) {
            var testElement = document2.createElement("boundtest");
            testElement.style.height = TEST_HEIGHT + "px";
            testElement.style.display = "block";
            document2.body.appendChild(testElement);
            range.selectNode(testElement);
            var rangeBounds = range.getBoundingClientRect();
            var rangeHeight = Math.round(rangeBounds.height);
            document2.body.removeChild(testElement);
            if (rangeHeight === TEST_HEIGHT) {
              return true;
            }
          }
        }
        return false;
      }, "testRangeBounds");
      var testIOSLineBreak = /* @__PURE__ */ __name2(function(document2) {
        var testElement = document2.createElement("boundtest");
        testElement.style.width = "50px";
        testElement.style.display = "block";
        testElement.style.fontSize = "12px";
        testElement.style.letterSpacing = "0px";
        testElement.style.wordSpacing = "0px";
        document2.body.appendChild(testElement);
        var range = document2.createRange();
        testElement.innerHTML = typeof "".repeat === "function" ? "&#128104;".repeat(10) : "";
        var node2 = testElement.firstChild;
        var textList = toCodePoints$1(node2.data).map(function(i4) {
          return fromCodePoint$1(i4);
        });
        var offset = 0;
        var prev = {};
        var supports = textList.every(function(text3, i4) {
          range.setStart(node2, offset);
          range.setEnd(node2, offset + text3.length);
          var rect = range.getBoundingClientRect();
          offset += text3.length;
          var boundAhead = rect.x > prev.x || rect.y > prev.y;
          prev = rect;
          if (i4 === 0) {
            return true;
          }
          return boundAhead;
        });
        document2.body.removeChild(testElement);
        return supports;
      }, "testIOSLineBreak");
      var testCORS = /* @__PURE__ */ __name2(function() {
        return typeof new Image().crossOrigin !== "undefined";
      }, "testCORS");
      var testResponseType = /* @__PURE__ */ __name2(function() {
        return typeof new XMLHttpRequest().responseType === "string";
      }, "testResponseType");
      var testSVG = /* @__PURE__ */ __name2(function(document2) {
        var img = new Image();
        var canvas = document2.createElement("canvas");
        var ctx = canvas.getContext("2d");
        if (!ctx) {
          return false;
        }
        img.src = "data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";
        try {
          ctx.drawImage(img, 0, 0);
          canvas.toDataURL();
        } catch (e3) {
          return false;
        }
        return true;
      }, "testSVG");
      var isGreenPixel = /* @__PURE__ */ __name2(function(data) {
        return data[0] === 0 && data[1] === 255 && data[2] === 0 && data[3] === 255;
      }, "isGreenPixel");
      var testForeignObject = /* @__PURE__ */ __name2(function(document2) {
        var canvas = document2.createElement("canvas");
        var size = 100;
        canvas.width = size;
        canvas.height = size;
        var ctx = canvas.getContext("2d");
        if (!ctx) {
          return Promise.reject(false);
        }
        ctx.fillStyle = "rgb(0, 255, 0)";
        ctx.fillRect(0, 0, size, size);
        var img = new Image();
        var greenImageSrc = canvas.toDataURL();
        img.src = greenImageSrc;
        var svg2 = createForeignObjectSVG(size, size, 0, 0, img);
        ctx.fillStyle = "red";
        ctx.fillRect(0, 0, size, size);
        return loadSerializedSVG$1(svg2).then(function(img2) {
          ctx.drawImage(img2, 0, 0);
          var data = ctx.getImageData(0, 0, size, size).data;
          ctx.fillStyle = "red";
          ctx.fillRect(0, 0, size, size);
          var node2 = document2.createElement("div");
          node2.style.backgroundImage = "url(" + greenImageSrc + ")";
          node2.style.height = size + "px";
          return isGreenPixel(data) ? loadSerializedSVG$1(createForeignObjectSVG(size, size, 0, 0, node2)) : Promise.reject(false);
        }).then(function(img2) {
          ctx.drawImage(img2, 0, 0);
          return isGreenPixel(ctx.getImageData(0, 0, size, size).data);
        }).catch(function() {
          return false;
        });
      }, "testForeignObject");
      var createForeignObjectSVG = /* @__PURE__ */ __name2(function(width, height, x22, y3, node2) {
        var xmlns = "http://www.w3.org/2000/svg";
        var svg2 = document.createElementNS(xmlns, "svg");
        var foreignObject = document.createElementNS(xmlns, "foreignObject");
        svg2.setAttributeNS(null, "width", width.toString());
        svg2.setAttributeNS(null, "height", height.toString());
        foreignObject.setAttributeNS(null, "width", "100%");
        foreignObject.setAttributeNS(null, "height", "100%");
        foreignObject.setAttributeNS(null, "x", x22.toString());
        foreignObject.setAttributeNS(null, "y", y3.toString());
        foreignObject.setAttributeNS(null, "externalResourcesRequired", "true");
        svg2.appendChild(foreignObject);
        foreignObject.appendChild(node2);
        return svg2;
      }, "createForeignObjectSVG");
      var loadSerializedSVG$1 = /* @__PURE__ */ __name2(function(svg2) {
        return new Promise(function(resolve, reject) {
          var img = new Image();
          img.onload = function() {
            return resolve(img);
          };
          img.onerror = reject;
          img.src = "data:image/svg+xml;charset=utf-8," + encodeURIComponent(new XMLSerializer().serializeToString(svg2));
        });
      }, "loadSerializedSVG$1");
      var FEATURES = {
        get SUPPORT_RANGE_BOUNDS() {
          var value = testRangeBounds(document);
          Object.defineProperty(FEATURES, "SUPPORT_RANGE_BOUNDS", { value });
          return value;
        },
        get SUPPORT_WORD_BREAKING() {
          var value = FEATURES.SUPPORT_RANGE_BOUNDS && testIOSLineBreak(document);
          Object.defineProperty(FEATURES, "SUPPORT_WORD_BREAKING", { value });
          return value;
        },
        get SUPPORT_SVG_DRAWING() {
          var value = testSVG(document);
          Object.defineProperty(FEATURES, "SUPPORT_SVG_DRAWING", { value });
          return value;
        },
        get SUPPORT_FOREIGNOBJECT_DRAWING() {
          var value = typeof Array.from === "function" && typeof window.fetch === "function" ? testForeignObject(document) : Promise.resolve(false);
          Object.defineProperty(FEATURES, "SUPPORT_FOREIGNOBJECT_DRAWING", { value });
          return value;
        },
        get SUPPORT_CORS_IMAGES() {
          var value = testCORS();
          Object.defineProperty(FEATURES, "SUPPORT_CORS_IMAGES", { value });
          return value;
        },
        get SUPPORT_RESPONSE_TYPE() {
          var value = testResponseType();
          Object.defineProperty(FEATURES, "SUPPORT_RESPONSE_TYPE", { value });
          return value;
        },
        get SUPPORT_CORS_XHR() {
          var value = "withCredentials" in new XMLHttpRequest();
          Object.defineProperty(FEATURES, "SUPPORT_CORS_XHR", { value });
          return value;
        },
        get SUPPORT_NATIVE_TEXT_SEGMENTATION() {
          var value = !!(typeof Intl !== "undefined" && Intl.Segmenter);
          Object.defineProperty(FEATURES, "SUPPORT_NATIVE_TEXT_SEGMENTATION", { value });
          return value;
        }
      };
      var TextBounds = (
        /** @class */
        /* @__PURE__ */ function() {
          function TextBounds2(text3, bounds) {
            this.text = text3;
            this.bounds = bounds;
          }
          __name(TextBounds2, "TextBounds2");
          __name2(TextBounds2, "TextBounds");
          return TextBounds2;
        }()
      );
      var parseTextBounds = /* @__PURE__ */ __name2(function(context, value, styles, node2) {
        var textList = breakText(value, styles);
        var textBounds = [];
        var offset = 0;
        textList.forEach(function(text3) {
          if (styles.textDecorationLine.length || text3.trim().length > 0) {
            if (FEATURES.SUPPORT_RANGE_BOUNDS) {
              var clientRects = createRange(node2, offset, text3.length).getClientRects();
              if (clientRects.length > 1) {
                var subSegments = segmentGraphemes(text3);
                var subOffset_1 = 0;
                subSegments.forEach(function(subSegment) {
                  textBounds.push(new TextBounds(subSegment, Bounds.fromDOMRectList(context, createRange(node2, subOffset_1 + offset, subSegment.length).getClientRects())));
                  subOffset_1 += subSegment.length;
                });
              } else {
                textBounds.push(new TextBounds(text3, Bounds.fromDOMRectList(context, clientRects)));
              }
            } else {
              var replacementNode = node2.splitText(text3.length);
              textBounds.push(new TextBounds(text3, getWrapperBounds(context, node2)));
              node2 = replacementNode;
            }
          } else if (!FEATURES.SUPPORT_RANGE_BOUNDS) {
            node2 = node2.splitText(text3.length);
          }
          offset += text3.length;
        });
        return textBounds;
      }, "parseTextBounds");
      var getWrapperBounds = /* @__PURE__ */ __name2(function(context, node2) {
        var ownerDocument = node2.ownerDocument;
        if (ownerDocument) {
          var wrapper = ownerDocument.createElement("html2canvaswrapper");
          wrapper.appendChild(node2.cloneNode(true));
          var parentNode = node2.parentNode;
          if (parentNode) {
            parentNode.replaceChild(wrapper, node2);
            var bounds = parseBounds(context, wrapper);
            if (wrapper.firstChild) {
              parentNode.replaceChild(wrapper.firstChild, wrapper);
            }
            return bounds;
          }
        }
        return Bounds.EMPTY;
      }, "getWrapperBounds");
      var createRange = /* @__PURE__ */ __name2(function(node2, offset, length) {
        var ownerDocument = node2.ownerDocument;
        if (!ownerDocument) {
          throw new Error("Node has no owner document");
        }
        var range = ownerDocument.createRange();
        range.setStart(node2, offset);
        range.setEnd(node2, offset + length);
        return range;
      }, "createRange");
      var segmentGraphemes = /* @__PURE__ */ __name2(function(value) {
        if (FEATURES.SUPPORT_NATIVE_TEXT_SEGMENTATION) {
          var segmenter = new Intl.Segmenter(void 0, { granularity: "grapheme" });
          return Array.from(segmenter.segment(value)).map(function(segment) {
            return segment.segment;
          });
        }
        return splitGraphemes(value);
      }, "segmentGraphemes");
      var segmentWords = /* @__PURE__ */ __name2(function(value, styles) {
        if (FEATURES.SUPPORT_NATIVE_TEXT_SEGMENTATION) {
          var segmenter = new Intl.Segmenter(void 0, {
            granularity: "word"
          });
          return Array.from(segmenter.segment(value)).map(function(segment) {
            return segment.segment;
          });
        }
        return breakWords(value, styles);
      }, "segmentWords");
      var breakText = /* @__PURE__ */ __name2(function(value, styles) {
        return styles.letterSpacing !== 0 ? segmentGraphemes(value) : segmentWords(value, styles);
      }, "breakText");
      var wordSeparators = [32, 160, 4961, 65792, 65793, 4153, 4241];
      var breakWords = /* @__PURE__ */ __name2(function(str, styles) {
        var breaker = LineBreaker(str, {
          lineBreak: styles.lineBreak,
          wordBreak: styles.overflowWrap === "break-word" ? "break-word" : styles.wordBreak
        });
        var words = [];
        var bk;
        var _loop_1 = /* @__PURE__ */ __name2(function() {
          if (bk.value) {
            var value = bk.value.slice();
            var codePoints = toCodePoints$1(value);
            var word_1 = "";
            codePoints.forEach(function(codePoint) {
              if (wordSeparators.indexOf(codePoint) === -1) {
                word_1 += fromCodePoint$1(codePoint);
              } else {
                if (word_1.length) {
                  words.push(word_1);
                }
                words.push(fromCodePoint$1(codePoint));
                word_1 = "";
              }
            });
            if (word_1.length) {
              words.push(word_1);
            }
          }
        }, "_loop_1");
        while (!(bk = breaker.next()).done) {
          _loop_1();
        }
        return words;
      }, "breakWords");
      var TextContainer = (
        /** @class */
        /* @__PURE__ */ function() {
          function TextContainer2(context, node2, styles) {
            this.text = transform(node2.data, styles.textTransform);
            this.textBounds = parseTextBounds(context, this.text, styles, node2);
          }
          __name(TextContainer2, "TextContainer2");
          __name2(TextContainer2, "TextContainer");
          return TextContainer2;
        }()
      );
      var transform = /* @__PURE__ */ __name2(function(text3, transform2) {
        switch (transform2) {
          case 1:
            return text3.toLowerCase();
          case 3:
            return text3.replace(CAPITALIZE, capitalize);
          case 2:
            return text3.toUpperCase();
          default:
            return text3;
        }
      }, "transform");
      var CAPITALIZE = /(^|\s|:|-|\(|\))([a-z])/g;
      var capitalize = /* @__PURE__ */ __name2(function(m4, p1, p22) {
        if (m4.length > 0) {
          return p1 + p22.toUpperCase();
        }
        return m4;
      }, "capitalize");
      var ImageElementContainer = (
        /** @class */
        function(_super) {
          __extends(ImageElementContainer2, _super);
          function ImageElementContainer2(context, img) {
            var _this = _super.call(this, context, img) || this;
            _this.src = img.currentSrc || img.src;
            _this.intrinsicWidth = img.naturalWidth;
            _this.intrinsicHeight = img.naturalHeight;
            _this.context.cache.addImage(_this.src);
            return _this;
          }
          __name(ImageElementContainer2, "ImageElementContainer2");
          __name2(ImageElementContainer2, "ImageElementContainer");
          return ImageElementContainer2;
        }(ElementContainer)
      );
      var CanvasElementContainer = (
        /** @class */
        function(_super) {
          __extends(CanvasElementContainer2, _super);
          function CanvasElementContainer2(context, canvas) {
            var _this = _super.call(this, context, canvas) || this;
            _this.canvas = canvas;
            _this.intrinsicWidth = canvas.width;
            _this.intrinsicHeight = canvas.height;
            return _this;
          }
          __name(CanvasElementContainer2, "CanvasElementContainer2");
          __name2(CanvasElementContainer2, "CanvasElementContainer");
          return CanvasElementContainer2;
        }(ElementContainer)
      );
      var SVGElementContainer = (
        /** @class */
        function(_super) {
          __extends(SVGElementContainer2, _super);
          function SVGElementContainer2(context, img) {
            var _this = _super.call(this, context, img) || this;
            var s3 = new XMLSerializer();
            var bounds = parseBounds(context, img);
            img.setAttribute("width", bounds.width + "px");
            img.setAttribute("height", bounds.height + "px");
            _this.svg = "data:image/svg+xml," + encodeURIComponent(s3.serializeToString(img));
            _this.intrinsicWidth = img.width.baseVal.value;
            _this.intrinsicHeight = img.height.baseVal.value;
            _this.context.cache.addImage(_this.svg);
            return _this;
          }
          __name(SVGElementContainer2, "SVGElementContainer2");
          __name2(SVGElementContainer2, "SVGElementContainer");
          return SVGElementContainer2;
        }(ElementContainer)
      );
      var LIElementContainer = (
        /** @class */
        function(_super) {
          __extends(LIElementContainer2, _super);
          function LIElementContainer2(context, element) {
            var _this = _super.call(this, context, element) || this;
            _this.value = element.value;
            return _this;
          }
          __name(LIElementContainer2, "LIElementContainer2");
          __name2(LIElementContainer2, "LIElementContainer");
          return LIElementContainer2;
        }(ElementContainer)
      );
      var OLElementContainer = (
        /** @class */
        function(_super) {
          __extends(OLElementContainer2, _super);
          function OLElementContainer2(context, element) {
            var _this = _super.call(this, context, element) || this;
            _this.start = element.start;
            _this.reversed = typeof element.reversed === "boolean" && element.reversed === true;
            return _this;
          }
          __name(OLElementContainer2, "OLElementContainer2");
          __name2(OLElementContainer2, "OLElementContainer");
          return OLElementContainer2;
        }(ElementContainer)
      );
      var CHECKBOX_BORDER_RADIUS = [
        {
          type: 15,
          flags: 0,
          unit: "px",
          number: 3
        }
      ];
      var RADIO_BORDER_RADIUS = [
        {
          type: 16,
          flags: 0,
          number: 50
        }
      ];
      var reformatInputBounds = /* @__PURE__ */ __name2(function(bounds) {
        if (bounds.width > bounds.height) {
          return new Bounds(bounds.left + (bounds.width - bounds.height) / 2, bounds.top, bounds.height, bounds.height);
        } else if (bounds.width < bounds.height) {
          return new Bounds(bounds.left, bounds.top + (bounds.height - bounds.width) / 2, bounds.width, bounds.width);
        }
        return bounds;
      }, "reformatInputBounds");
      var getInputValue = /* @__PURE__ */ __name2(function(node2) {
        var value = node2.type === PASSWORD ? new Array(node2.value.length + 1).join("\u2022") : node2.value;
        return value.length === 0 ? node2.placeholder || "" : value;
      }, "getInputValue");
      var CHECKBOX = "checkbox";
      var RADIO = "radio";
      var PASSWORD = "password";
      var INPUT_COLOR = 707406591;
      var InputElementContainer = (
        /** @class */
        function(_super) {
          __extends(InputElementContainer2, _super);
          function InputElementContainer2(context, input) {
            var _this = _super.call(this, context, input) || this;
            _this.type = input.type.toLowerCase();
            _this.checked = input.checked;
            _this.value = getInputValue(input);
            if (_this.type === CHECKBOX || _this.type === RADIO) {
              _this.styles.backgroundColor = 3739148031;
              _this.styles.borderTopColor = _this.styles.borderRightColor = _this.styles.borderBottomColor = _this.styles.borderLeftColor = 2779096575;
              _this.styles.borderTopWidth = _this.styles.borderRightWidth = _this.styles.borderBottomWidth = _this.styles.borderLeftWidth = 1;
              _this.styles.borderTopStyle = _this.styles.borderRightStyle = _this.styles.borderBottomStyle = _this.styles.borderLeftStyle = 1;
              _this.styles.backgroundClip = [
                0
                /* BORDER_BOX */
              ];
              _this.styles.backgroundOrigin = [
                0
                /* BORDER_BOX */
              ];
              _this.bounds = reformatInputBounds(_this.bounds);
            }
            switch (_this.type) {
              case CHECKBOX:
                _this.styles.borderTopRightRadius = _this.styles.borderTopLeftRadius = _this.styles.borderBottomRightRadius = _this.styles.borderBottomLeftRadius = CHECKBOX_BORDER_RADIUS;
                break;
              case RADIO:
                _this.styles.borderTopRightRadius = _this.styles.borderTopLeftRadius = _this.styles.borderBottomRightRadius = _this.styles.borderBottomLeftRadius = RADIO_BORDER_RADIUS;
                break;
            }
            return _this;
          }
          __name(InputElementContainer2, "InputElementContainer2");
          __name2(InputElementContainer2, "InputElementContainer");
          return InputElementContainer2;
        }(ElementContainer)
      );
      var SelectElementContainer = (
        /** @class */
        function(_super) {
          __extends(SelectElementContainer2, _super);
          function SelectElementContainer2(context, element) {
            var _this = _super.call(this, context, element) || this;
            var option = element.options[element.selectedIndex || 0];
            _this.value = option ? option.text || "" : "";
            return _this;
          }
          __name(SelectElementContainer2, "SelectElementContainer2");
          __name2(SelectElementContainer2, "SelectElementContainer");
          return SelectElementContainer2;
        }(ElementContainer)
      );
      var TextareaElementContainer = (
        /** @class */
        function(_super) {
          __extends(TextareaElementContainer2, _super);
          function TextareaElementContainer2(context, element) {
            var _this = _super.call(this, context, element) || this;
            _this.value = element.value;
            return _this;
          }
          __name(TextareaElementContainer2, "TextareaElementContainer2");
          __name2(TextareaElementContainer2, "TextareaElementContainer");
          return TextareaElementContainer2;
        }(ElementContainer)
      );
      var IFrameElementContainer = (
        /** @class */
        function(_super) {
          __extends(IFrameElementContainer2, _super);
          function IFrameElementContainer2(context, iframe) {
            var _this = _super.call(this, context, iframe) || this;
            _this.src = iframe.src;
            _this.width = parseInt(iframe.width, 10) || 0;
            _this.height = parseInt(iframe.height, 10) || 0;
            _this.backgroundColor = _this.styles.backgroundColor;
            try {
              if (iframe.contentWindow && iframe.contentWindow.document && iframe.contentWindow.document.documentElement) {
                _this.tree = parseTree(context, iframe.contentWindow.document.documentElement);
                var documentBackgroundColor = iframe.contentWindow.document.documentElement ? parseColor(context, getComputedStyle(iframe.contentWindow.document.documentElement).backgroundColor) : COLORS.TRANSPARENT;
                var bodyBackgroundColor = iframe.contentWindow.document.body ? parseColor(context, getComputedStyle(iframe.contentWindow.document.body).backgroundColor) : COLORS.TRANSPARENT;
                _this.backgroundColor = isTransparent(documentBackgroundColor) ? isTransparent(bodyBackgroundColor) ? _this.styles.backgroundColor : bodyBackgroundColor : documentBackgroundColor;
              }
            } catch (e3) {
            }
            return _this;
          }
          __name(IFrameElementContainer2, "IFrameElementContainer2");
          __name2(IFrameElementContainer2, "IFrameElementContainer");
          return IFrameElementContainer2;
        }(ElementContainer)
      );
      var LIST_OWNERS = ["OL", "UL", "MENU"];
      var parseNodeTree = /* @__PURE__ */ __name2(function(context, node2, parent, root) {
        for (var childNode = node2.firstChild, nextNode = void 0; childNode; childNode = nextNode) {
          nextNode = childNode.nextSibling;
          if (isTextNode(childNode) && childNode.data.trim().length > 0) {
            parent.textNodes.push(new TextContainer(context, childNode, parent.styles));
          } else if (isElementNode(childNode)) {
            if (isSlotElement(childNode) && childNode.assignedNodes) {
              childNode.assignedNodes().forEach(function(childNode2) {
                return parseNodeTree(context, childNode2, parent, root);
              });
            } else {
              var container = createContainer(context, childNode);
              if (container.styles.isVisible()) {
                if (createsRealStackingContext(childNode, container, root)) {
                  container.flags |= 4;
                } else if (createsStackingContext(container.styles)) {
                  container.flags |= 2;
                }
                if (LIST_OWNERS.indexOf(childNode.tagName) !== -1) {
                  container.flags |= 8;
                }
                parent.elements.push(container);
                childNode.slot;
                if (childNode.shadowRoot) {
                  parseNodeTree(context, childNode.shadowRoot, container, root);
                } else if (!isTextareaElement(childNode) && !isSVGElement(childNode) && !isSelectElement(childNode)) {
                  parseNodeTree(context, childNode, container, root);
                }
              }
            }
          }
        }
      }, "parseNodeTree");
      var createContainer = /* @__PURE__ */ __name2(function(context, element) {
        if (isImageElement(element)) {
          return new ImageElementContainer(context, element);
        }
        if (isCanvasElement(element)) {
          return new CanvasElementContainer(context, element);
        }
        if (isSVGElement(element)) {
          return new SVGElementContainer(context, element);
        }
        if (isLIElement(element)) {
          return new LIElementContainer(context, element);
        }
        if (isOLElement(element)) {
          return new OLElementContainer(context, element);
        }
        if (isInputElement(element)) {
          return new InputElementContainer(context, element);
        }
        if (isSelectElement(element)) {
          return new SelectElementContainer(context, element);
        }
        if (isTextareaElement(element)) {
          return new TextareaElementContainer(context, element);
        }
        if (isIFrameElement(element)) {
          return new IFrameElementContainer(context, element);
        }
        return new ElementContainer(context, element);
      }, "createContainer");
      var parseTree = /* @__PURE__ */ __name2(function(context, element) {
        var container = createContainer(context, element);
        container.flags |= 4;
        parseNodeTree(context, element, container, container);
        return container;
      }, "parseTree");
      var createsRealStackingContext = /* @__PURE__ */ __name2(function(node2, container, root) {
        return container.styles.isPositionedWithZIndex() || container.styles.opacity < 1 || container.styles.isTransformed() || isBodyElement(node2) && root.styles.isTransparent();
      }, "createsRealStackingContext");
      var createsStackingContext = /* @__PURE__ */ __name2(function(styles) {
        return styles.isPositioned() || styles.isFloating();
      }, "createsStackingContext");
      var isTextNode = /* @__PURE__ */ __name2(function(node2) {
        return node2.nodeType === Node.TEXT_NODE;
      }, "isTextNode");
      var isElementNode = /* @__PURE__ */ __name2(function(node2) {
        return node2.nodeType === Node.ELEMENT_NODE;
      }, "isElementNode");
      var isHTMLElementNode = /* @__PURE__ */ __name2(function(node2) {
        return isElementNode(node2) && typeof node2.style !== "undefined" && !isSVGElementNode(node2);
      }, "isHTMLElementNode");
      var isSVGElementNode = /* @__PURE__ */ __name2(function(element) {
        return typeof element.className === "object";
      }, "isSVGElementNode");
      var isLIElement = /* @__PURE__ */ __name2(function(node2) {
        return node2.tagName === "LI";
      }, "isLIElement");
      var isOLElement = /* @__PURE__ */ __name2(function(node2) {
        return node2.tagName === "OL";
      }, "isOLElement");
      var isInputElement = /* @__PURE__ */ __name2(function(node2) {
        return node2.tagName === "INPUT";
      }, "isInputElement");
      var isHTMLElement = /* @__PURE__ */ __name2(function(node2) {
        return node2.tagName === "HTML";
      }, "isHTMLElement");
      var isSVGElement = /* @__PURE__ */ __name2(function(node2) {
        return node2.tagName === "svg";
      }, "isSVGElement");
      var isBodyElement = /* @__PURE__ */ __name2(function(node2) {
        return node2.tagName === "BODY";
      }, "isBodyElement");
      var isCanvasElement = /* @__PURE__ */ __name2(function(node2) {
        return node2.tagName === "CANVAS";
      }, "isCanvasElement");
      var isVideoElement = /* @__PURE__ */ __name2(function(node2) {
        return node2.tagName === "VIDEO";
      }, "isVideoElement");
      var isImageElement = /* @__PURE__ */ __name2(function(node2) {
        return node2.tagName === "IMG";
      }, "isImageElement");
      var isIFrameElement = /* @__PURE__ */ __name2(function(node2) {
        return node2.tagName === "IFRAME";
      }, "isIFrameElement");
      var isStyleElement = /* @__PURE__ */ __name2(function(node2) {
        return node2.tagName === "STYLE";
      }, "isStyleElement");
      var isScriptElement = /* @__PURE__ */ __name2(function(node2) {
        return node2.tagName === "SCRIPT";
      }, "isScriptElement");
      var isTextareaElement = /* @__PURE__ */ __name2(function(node2) {
        return node2.tagName === "TEXTAREA";
      }, "isTextareaElement");
      var isSelectElement = /* @__PURE__ */ __name2(function(node2) {
        return node2.tagName === "SELECT";
      }, "isSelectElement");
      var isSlotElement = /* @__PURE__ */ __name2(function(node2) {
        return node2.tagName === "SLOT";
      }, "isSlotElement");
      var isCustomElement = /* @__PURE__ */ __name2(function(node2) {
        return node2.tagName.indexOf("-") > 0;
      }, "isCustomElement");
      var CounterState = (
        /** @class */
        function() {
          function CounterState2() {
            this.counters = {};
          }
          __name(CounterState2, "CounterState2");
          __name2(CounterState2, "CounterState");
          CounterState2.prototype.getCounterValue = function(name) {
            var counter = this.counters[name];
            if (counter && counter.length) {
              return counter[counter.length - 1];
            }
            return 1;
          };
          CounterState2.prototype.getCounterValues = function(name) {
            var counter = this.counters[name];
            return counter ? counter : [];
          };
          CounterState2.prototype.pop = function(counters) {
            var _this = this;
            counters.forEach(function(counter) {
              return _this.counters[counter].pop();
            });
          };
          CounterState2.prototype.parse = function(style) {
            var _this = this;
            var counterIncrement2 = style.counterIncrement;
            var counterReset2 = style.counterReset;
            var canReset = true;
            if (counterIncrement2 !== null) {
              counterIncrement2.forEach(function(entry) {
                var counter = _this.counters[entry.counter];
                if (counter && entry.increment !== 0) {
                  canReset = false;
                  if (!counter.length) {
                    counter.push(1);
                  }
                  counter[Math.max(0, counter.length - 1)] += entry.increment;
                }
              });
            }
            var counterNames = [];
            if (canReset) {
              counterReset2.forEach(function(entry) {
                var counter = _this.counters[entry.counter];
                counterNames.push(entry.counter);
                if (!counter) {
                  counter = _this.counters[entry.counter] = [];
                }
                counter.push(entry.reset);
              });
            }
            return counterNames;
          };
          return CounterState2;
        }()
      );
      var ROMAN_UPPER = {
        integers: [1e3, 900, 500, 400, 100, 90, 50, 40, 10, 9, 5, 4, 1],
        values: ["M", "CM", "D", "CD", "C", "XC", "L", "XL", "X", "IX", "V", "IV", "I"]
      };
      var ARMENIAN = {
        integers: [
          9e3,
          8e3,
          7e3,
          6e3,
          5e3,
          4e3,
          3e3,
          2e3,
          1e3,
          900,
          800,
          700,
          600,
          500,
          400,
          300,
          200,
          100,
          90,
          80,
          70,
          60,
          50,
          40,
          30,
          20,
          10,
          9,
          8,
          7,
          6,
          5,
          4,
          3,
          2,
          1
        ],
        values: [
          "\u0554",
          "\u0553",
          "\u0552",
          "\u0551",
          "\u0550",
          "\u054F",
          "\u054E",
          "\u054D",
          "\u054C",
          "\u054B",
          "\u054A",
          "\u0549",
          "\u0548",
          "\u0547",
          "\u0546",
          "\u0545",
          "\u0544",
          "\u0543",
          "\u0542",
          "\u0541",
          "\u0540",
          "\u053F",
          "\u053E",
          "\u053D",
          "\u053C",
          "\u053B",
          "\u053A",
          "\u0539",
          "\u0538",
          "\u0537",
          "\u0536",
          "\u0535",
          "\u0534",
          "\u0533",
          "\u0532",
          "\u0531"
        ]
      };
      var HEBREW = {
        integers: [
          1e4,
          9e3,
          8e3,
          7e3,
          6e3,
          5e3,
          4e3,
          3e3,
          2e3,
          1e3,
          400,
          300,
          200,
          100,
          90,
          80,
          70,
          60,
          50,
          40,
          30,
          20,
          19,
          18,
          17,
          16,
          15,
          10,
          9,
          8,
          7,
          6,
          5,
          4,
          3,
          2,
          1
        ],
        values: [
          "\u05D9\u05F3",
          "\u05D8\u05F3",
          "\u05D7\u05F3",
          "\u05D6\u05F3",
          "\u05D5\u05F3",
          "\u05D4\u05F3",
          "\u05D3\u05F3",
          "\u05D2\u05F3",
          "\u05D1\u05F3",
          "\u05D0\u05F3",
          "\u05EA",
          "\u05E9",
          "\u05E8",
          "\u05E7",
          "\u05E6",
          "\u05E4",
          "\u05E2",
          "\u05E1",
          "\u05E0",
          "\u05DE",
          "\u05DC",
          "\u05DB",
          "\u05D9\u05D8",
          "\u05D9\u05D7",
          "\u05D9\u05D6",
          "\u05D8\u05D6",
          "\u05D8\u05D5",
          "\u05D9",
          "\u05D8",
          "\u05D7",
          "\u05D6",
          "\u05D5",
          "\u05D4",
          "\u05D3",
          "\u05D2",
          "\u05D1",
          "\u05D0"
        ]
      };
      var GEORGIAN = {
        integers: [
          1e4,
          9e3,
          8e3,
          7e3,
          6e3,
          5e3,
          4e3,
          3e3,
          2e3,
          1e3,
          900,
          800,
          700,
          600,
          500,
          400,
          300,
          200,
          100,
          90,
          80,
          70,
          60,
          50,
          40,
          30,
          20,
          10,
          9,
          8,
          7,
          6,
          5,
          4,
          3,
          2,
          1
        ],
        values: [
          "\u10F5",
          "\u10F0",
          "\u10EF",
          "\u10F4",
          "\u10EE",
          "\u10ED",
          "\u10EC",
          "\u10EB",
          "\u10EA",
          "\u10E9",
          "\u10E8",
          "\u10E7",
          "\u10E6",
          "\u10E5",
          "\u10E4",
          "\u10F3",
          "\u10E2",
          "\u10E1",
          "\u10E0",
          "\u10DF",
          "\u10DE",
          "\u10DD",
          "\u10F2",
          "\u10DC",
          "\u10DB",
          "\u10DA",
          "\u10D9",
          "\u10D8",
          "\u10D7",
          "\u10F1",
          "\u10D6",
          "\u10D5",
          "\u10D4",
          "\u10D3",
          "\u10D2",
          "\u10D1",
          "\u10D0"
        ]
      };
      var createAdditiveCounter = /* @__PURE__ */ __name2(function(value, min, max2, symbols, fallback, suffix) {
        if (value < min || value > max2) {
          return createCounterText(value, fallback, suffix.length > 0);
        }
        return symbols.integers.reduce(function(string, integer2, index2) {
          while (value >= integer2) {
            value -= integer2;
            string += symbols.values[index2];
          }
          return string;
        }, "") + suffix;
      }, "createAdditiveCounter");
      var createCounterStyleWithSymbolResolver = /* @__PURE__ */ __name2(function(value, codePointRangeLength, isNumeric, resolver) {
        var string = "";
        do {
          if (!isNumeric) {
            value--;
          }
          string = resolver(value) + string;
          value /= codePointRangeLength;
        } while (value * codePointRangeLength >= codePointRangeLength);
        return string;
      }, "createCounterStyleWithSymbolResolver");
      var createCounterStyleFromRange = /* @__PURE__ */ __name2(function(value, codePointRangeStart, codePointRangeEnd, isNumeric, suffix) {
        var codePointRangeLength = codePointRangeEnd - codePointRangeStart + 1;
        return (value < 0 ? "-" : "") + (createCounterStyleWithSymbolResolver(Math.abs(value), codePointRangeLength, isNumeric, function(codePoint) {
          return fromCodePoint$1(Math.floor(codePoint % codePointRangeLength) + codePointRangeStart);
        }) + suffix);
      }, "createCounterStyleFromRange");
      var createCounterStyleFromSymbols = /* @__PURE__ */ __name2(function(value, symbols, suffix) {
        if (suffix === void 0) {
          suffix = ". ";
        }
        var codePointRangeLength = symbols.length;
        return createCounterStyleWithSymbolResolver(Math.abs(value), codePointRangeLength, false, function(codePoint) {
          return symbols[Math.floor(codePoint % codePointRangeLength)];
        }) + suffix;
      }, "createCounterStyleFromSymbols");
      var CJK_ZEROS = 1 << 0;
      var CJK_TEN_COEFFICIENTS = 1 << 1;
      var CJK_TEN_HIGH_COEFFICIENTS = 1 << 2;
      var CJK_HUNDRED_COEFFICIENTS = 1 << 3;
      var createCJKCounter = /* @__PURE__ */ __name2(function(value, numbers, multipliers, negativeSign, suffix, flags2) {
        if (value < -9999 || value > 9999) {
          return createCounterText(value, 4, suffix.length > 0);
        }
        var tmp = Math.abs(value);
        var string = suffix;
        if (tmp === 0) {
          return numbers[0] + string;
        }
        for (var digit = 0; tmp > 0 && digit <= 4; digit++) {
          var coefficient = tmp % 10;
          if (coefficient === 0 && contains(flags2, CJK_ZEROS) && string !== "") {
            string = numbers[coefficient] + string;
          } else if (coefficient > 1 || coefficient === 1 && digit === 0 || coefficient === 1 && digit === 1 && contains(flags2, CJK_TEN_COEFFICIENTS) || coefficient === 1 && digit === 1 && contains(flags2, CJK_TEN_HIGH_COEFFICIENTS) && value > 100 || coefficient === 1 && digit > 1 && contains(flags2, CJK_HUNDRED_COEFFICIENTS)) {
            string = numbers[coefficient] + (digit > 0 ? multipliers[digit - 1] : "") + string;
          } else if (coefficient === 1 && digit > 0) {
            string = multipliers[digit - 1] + string;
          }
          tmp = Math.floor(tmp / 10);
        }
        return (value < 0 ? negativeSign : "") + string;
      }, "createCJKCounter");
      var CHINESE_INFORMAL_MULTIPLIERS = "\u5341\u767E\u5343\u842C";
      var CHINESE_FORMAL_MULTIPLIERS = "\u62FE\u4F70\u4EDF\u842C";
      var JAPANESE_NEGATIVE = "\u30DE\u30A4\u30CA\u30B9";
      var KOREAN_NEGATIVE = "\uB9C8\uC774\uB108\uC2A4";
      var createCounterText = /* @__PURE__ */ __name2(function(value, type, appendSuffix) {
        var defaultSuffix = appendSuffix ? ". " : "";
        var cjkSuffix = appendSuffix ? "\u3001" : "";
        var koreanSuffix = appendSuffix ? ", " : "";
        var spaceSuffix = appendSuffix ? " " : "";
        switch (type) {
          case 0:
            return "\u2022" + spaceSuffix;
          case 1:
            return "\u25E6" + spaceSuffix;
          case 2:
            return "\u25FE" + spaceSuffix;
          case 5:
            var string = createCounterStyleFromRange(value, 48, 57, true, defaultSuffix);
            return string.length < 4 ? "0" + string : string;
          case 4:
            return createCounterStyleFromSymbols(value, "\u3007\u4E00\u4E8C\u4E09\u56DB\u4E94\u516D\u4E03\u516B\u4E5D", cjkSuffix);
          case 6:
            return createAdditiveCounter(value, 1, 3999, ROMAN_UPPER, 3, defaultSuffix).toLowerCase();
          case 7:
            return createAdditiveCounter(value, 1, 3999, ROMAN_UPPER, 3, defaultSuffix);
          case 8:
            return createCounterStyleFromRange(value, 945, 969, false, defaultSuffix);
          case 9:
            return createCounterStyleFromRange(value, 97, 122, false, defaultSuffix);
          case 10:
            return createCounterStyleFromRange(value, 65, 90, false, defaultSuffix);
          case 11:
            return createCounterStyleFromRange(value, 1632, 1641, true, defaultSuffix);
          case 12:
          case 49:
            return createAdditiveCounter(value, 1, 9999, ARMENIAN, 3, defaultSuffix);
          case 35:
            return createAdditiveCounter(value, 1, 9999, ARMENIAN, 3, defaultSuffix).toLowerCase();
          case 13:
            return createCounterStyleFromRange(value, 2534, 2543, true, defaultSuffix);
          case 14:
          case 30:
            return createCounterStyleFromRange(value, 6112, 6121, true, defaultSuffix);
          case 15:
            return createCounterStyleFromSymbols(value, "\u5B50\u4E11\u5BC5\u536F\u8FB0\u5DF3\u5348\u672A\u7533\u9149\u620C\u4EA5", cjkSuffix);
          case 16:
            return createCounterStyleFromSymbols(value, "\u7532\u4E59\u4E19\u4E01\u620A\u5DF1\u5E9A\u8F9B\u58EC\u7678", cjkSuffix);
          case 17:
          case 48:
            return createCJKCounter(value, "\u96F6\u4E00\u4E8C\u4E09\u56DB\u4E94\u516D\u4E03\u516B\u4E5D", CHINESE_INFORMAL_MULTIPLIERS, "\u8CA0", cjkSuffix, CJK_TEN_COEFFICIENTS | CJK_TEN_HIGH_COEFFICIENTS | CJK_HUNDRED_COEFFICIENTS);
          case 47:
            return createCJKCounter(value, "\u96F6\u58F9\u8CB3\u53C3\u8086\u4F0D\u9678\u67D2\u634C\u7396", CHINESE_FORMAL_MULTIPLIERS, "\u8CA0", cjkSuffix, CJK_ZEROS | CJK_TEN_COEFFICIENTS | CJK_TEN_HIGH_COEFFICIENTS | CJK_HUNDRED_COEFFICIENTS);
          case 42:
            return createCJKCounter(value, "\u96F6\u4E00\u4E8C\u4E09\u56DB\u4E94\u516D\u4E03\u516B\u4E5D", CHINESE_INFORMAL_MULTIPLIERS, "\u8D1F", cjkSuffix, CJK_TEN_COEFFICIENTS | CJK_TEN_HIGH_COEFFICIENTS | CJK_HUNDRED_COEFFICIENTS);
          case 41:
            return createCJKCounter(value, "\u96F6\u58F9\u8D30\u53C1\u8086\u4F0D\u9646\u67D2\u634C\u7396", CHINESE_FORMAL_MULTIPLIERS, "\u8D1F", cjkSuffix, CJK_ZEROS | CJK_TEN_COEFFICIENTS | CJK_TEN_HIGH_COEFFICIENTS | CJK_HUNDRED_COEFFICIENTS);
          case 26:
            return createCJKCounter(value, "\u3007\u4E00\u4E8C\u4E09\u56DB\u4E94\u516D\u4E03\u516B\u4E5D", "\u5341\u767E\u5343\u4E07", JAPANESE_NEGATIVE, cjkSuffix, 0);
          case 25:
            return createCJKCounter(value, "\u96F6\u58F1\u5F10\u53C2\u56DB\u4F0D\u516D\u4E03\u516B\u4E5D", "\u62FE\u767E\u5343\u4E07", JAPANESE_NEGATIVE, cjkSuffix, CJK_ZEROS | CJK_TEN_COEFFICIENTS | CJK_TEN_HIGH_COEFFICIENTS);
          case 31:
            return createCJKCounter(value, "\uC601\uC77C\uC774\uC0BC\uC0AC\uC624\uC721\uCE60\uD314\uAD6C", "\uC2ED\uBC31\uCC9C\uB9CC", KOREAN_NEGATIVE, koreanSuffix, CJK_ZEROS | CJK_TEN_COEFFICIENTS | CJK_TEN_HIGH_COEFFICIENTS);
          case 33:
            return createCJKCounter(value, "\u96F6\u4E00\u4E8C\u4E09\u56DB\u4E94\u516D\u4E03\u516B\u4E5D", "\u5341\u767E\u5343\u842C", KOREAN_NEGATIVE, koreanSuffix, 0);
          case 32:
            return createCJKCounter(value, "\u96F6\u58F9\u8CB3\u53C3\u56DB\u4E94\u516D\u4E03\u516B\u4E5D", "\u62FE\u767E\u5343", KOREAN_NEGATIVE, koreanSuffix, CJK_ZEROS | CJK_TEN_COEFFICIENTS | CJK_TEN_HIGH_COEFFICIENTS);
          case 18:
            return createCounterStyleFromRange(value, 2406, 2415, true, defaultSuffix);
          case 20:
            return createAdditiveCounter(value, 1, 19999, GEORGIAN, 3, defaultSuffix);
          case 21:
            return createCounterStyleFromRange(value, 2790, 2799, true, defaultSuffix);
          case 22:
            return createCounterStyleFromRange(value, 2662, 2671, true, defaultSuffix);
          case 22:
            return createAdditiveCounter(value, 1, 10999, HEBREW, 3, defaultSuffix);
          case 23:
            return createCounterStyleFromSymbols(value, "\u3042\u3044\u3046\u3048\u304A\u304B\u304D\u304F\u3051\u3053\u3055\u3057\u3059\u305B\u305D\u305F\u3061\u3064\u3066\u3068\u306A\u306B\u306C\u306D\u306E\u306F\u3072\u3075\u3078\u307B\u307E\u307F\u3080\u3081\u3082\u3084\u3086\u3088\u3089\u308A\u308B\u308C\u308D\u308F\u3090\u3091\u3092\u3093");
          case 24:
            return createCounterStyleFromSymbols(value, "\u3044\u308D\u306F\u306B\u307B\u3078\u3068\u3061\u308A\u306C\u308B\u3092\u308F\u304B\u3088\u305F\u308C\u305D\u3064\u306D\u306A\u3089\u3080\u3046\u3090\u306E\u304A\u304F\u3084\u307E\u3051\u3075\u3053\u3048\u3066\u3042\u3055\u304D\u3086\u3081\u307F\u3057\u3091\u3072\u3082\u305B\u3059");
          case 27:
            return createCounterStyleFromRange(value, 3302, 3311, true, defaultSuffix);
          case 28:
            return createCounterStyleFromSymbols(value, "\u30A2\u30A4\u30A6\u30A8\u30AA\u30AB\u30AD\u30AF\u30B1\u30B3\u30B5\u30B7\u30B9\u30BB\u30BD\u30BF\u30C1\u30C4\u30C6\u30C8\u30CA\u30CB\u30CC\u30CD\u30CE\u30CF\u30D2\u30D5\u30D8\u30DB\u30DE\u30DF\u30E0\u30E1\u30E2\u30E4\u30E6\u30E8\u30E9\u30EA\u30EB\u30EC\u30ED\u30EF\u30F0\u30F1\u30F2\u30F3", cjkSuffix);
          case 29:
            return createCounterStyleFromSymbols(value, "\u30A4\u30ED\u30CF\u30CB\u30DB\u30D8\u30C8\u30C1\u30EA\u30CC\u30EB\u30F2\u30EF\u30AB\u30E8\u30BF\u30EC\u30BD\u30C4\u30CD\u30CA\u30E9\u30E0\u30A6\u30F0\u30CE\u30AA\u30AF\u30E4\u30DE\u30B1\u30D5\u30B3\u30A8\u30C6\u30A2\u30B5\u30AD\u30E6\u30E1\u30DF\u30B7\u30F1\u30D2\u30E2\u30BB\u30B9", cjkSuffix);
          case 34:
            return createCounterStyleFromRange(value, 3792, 3801, true, defaultSuffix);
          case 37:
            return createCounterStyleFromRange(value, 6160, 6169, true, defaultSuffix);
          case 38:
            return createCounterStyleFromRange(value, 4160, 4169, true, defaultSuffix);
          case 39:
            return createCounterStyleFromRange(value, 2918, 2927, true, defaultSuffix);
          case 40:
            return createCounterStyleFromRange(value, 1776, 1785, true, defaultSuffix);
          case 43:
            return createCounterStyleFromRange(value, 3046, 3055, true, defaultSuffix);
          case 44:
            return createCounterStyleFromRange(value, 3174, 3183, true, defaultSuffix);
          case 45:
            return createCounterStyleFromRange(value, 3664, 3673, true, defaultSuffix);
          case 46:
            return createCounterStyleFromRange(value, 3872, 3881, true, defaultSuffix);
          case 3:
          default:
            return createCounterStyleFromRange(value, 48, 57, true, defaultSuffix);
        }
      }, "createCounterText");
      var IGNORE_ATTRIBUTE = "data-html2canvas-ignore";
      var DocumentCloner = (
        /** @class */
        function() {
          function DocumentCloner2(context, element, options) {
            this.context = context;
            this.options = options;
            this.scrolledElements = [];
            this.referenceElement = element;
            this.counters = new CounterState();
            this.quoteDepth = 0;
            if (!element.ownerDocument) {
              throw new Error("Cloned element does not have an owner document");
            }
            this.documentElement = this.cloneNode(element.ownerDocument.documentElement, false);
          }
          __name(DocumentCloner2, "DocumentCloner2");
          __name2(DocumentCloner2, "DocumentCloner");
          DocumentCloner2.prototype.toIFrame = function(ownerDocument, windowSize) {
            var _this = this;
            var iframe = createIFrameContainer(ownerDocument, windowSize);
            if (!iframe.contentWindow) {
              return Promise.reject("Unable to find iframe window");
            }
            var scrollX = ownerDocument.defaultView.pageXOffset;
            var scrollY = ownerDocument.defaultView.pageYOffset;
            var cloneWindow = iframe.contentWindow;
            var documentClone = cloneWindow.document;
            var iframeLoad = iframeLoader(iframe).then(function() {
              return __awaiter(_this, void 0, void 0, function() {
                var onclone, referenceElement;
                return __generator(this, function(_a2) {
                  switch (_a2.label) {
                    case 0:
                      this.scrolledElements.forEach(restoreNodeScroll);
                      if (cloneWindow) {
                        cloneWindow.scrollTo(windowSize.left, windowSize.top);
                        if (/(iPad|iPhone|iPod)/g.test("Cloudflare-Workers") && (cloneWindow.scrollY !== windowSize.top || cloneWindow.scrollX !== windowSize.left)) {
                          this.context.logger.warn("Unable to restore scroll position for cloned document");
                          this.context.windowBounds = this.context.windowBounds.add(cloneWindow.scrollX - windowSize.left, cloneWindow.scrollY - windowSize.top, 0, 0);
                        }
                      }
                      onclone = this.options.onclone;
                      referenceElement = this.clonedReferenceElement;
                      if (typeof referenceElement === "undefined") {
                        return [2, Promise.reject("Error finding the " + this.referenceElement.nodeName + " in the cloned document")];
                      }
                      if (!(documentClone.fonts && documentClone.fonts.ready)) return [3, 2];
                      return [4, documentClone.fonts.ready];
                    case 1:
                      _a2.sent();
                      _a2.label = 2;
                    case 2:
                      if (!/(AppleWebKit)/g.test("Cloudflare-Workers")) return [3, 4];
                      return [4, imagesReady(documentClone)];
                    case 3:
                      _a2.sent();
                      _a2.label = 4;
                    case 4:
                      if (typeof onclone === "function") {
                        return [2, Promise.resolve().then(function() {
                          return onclone(documentClone, referenceElement);
                        }).then(function() {
                          return iframe;
                        })];
                      }
                      return [2, iframe];
                  }
                });
              });
            });
            documentClone.open();
            documentClone.write(serializeDoctype(document.doctype) + "<html></html>");
            restoreOwnerScroll(this.referenceElement.ownerDocument, scrollX, scrollY);
            documentClone.replaceChild(documentClone.adoptNode(this.documentElement), documentClone.documentElement);
            documentClone.close();
            return iframeLoad;
          };
          DocumentCloner2.prototype.createElementClone = function(node2) {
            if (isDebugging(
              node2,
              2
              /* CLONE */
            )) {
              debugger;
            }
            if (isCanvasElement(node2)) {
              return this.createCanvasClone(node2);
            }
            if (isVideoElement(node2)) {
              return this.createVideoClone(node2);
            }
            if (isStyleElement(node2)) {
              return this.createStyleClone(node2);
            }
            var clone2 = node2.cloneNode(false);
            if (isImageElement(clone2)) {
              if (isImageElement(node2) && node2.currentSrc && node2.currentSrc !== node2.src) {
                clone2.src = node2.currentSrc;
                clone2.srcset = "";
              }
              if (clone2.loading === "lazy") {
                clone2.loading = "eager";
              }
            }
            if (isCustomElement(clone2)) {
              return this.createCustomElementClone(clone2);
            }
            return clone2;
          };
          DocumentCloner2.prototype.createCustomElementClone = function(node2) {
            var clone2 = document.createElement("html2canvascustomelement");
            copyCSSStyles(node2.style, clone2);
            return clone2;
          };
          DocumentCloner2.prototype.createStyleClone = function(node2) {
            try {
              var sheet = node2.sheet;
              if (sheet && sheet.cssRules) {
                var css = [].slice.call(sheet.cssRules, 0).reduce(function(css2, rule) {
                  if (rule && typeof rule.cssText === "string") {
                    return css2 + rule.cssText;
                  }
                  return css2;
                }, "");
                var style = node2.cloneNode(false);
                style.textContent = css;
                return style;
              }
            } catch (e3) {
              this.context.logger.error("Unable to access cssRules property", e3);
              if (e3.name !== "SecurityError") {
                throw e3;
              }
            }
            return node2.cloneNode(false);
          };
          DocumentCloner2.prototype.createCanvasClone = function(canvas) {
            var _a2;
            if (this.options.inlineImages && canvas.ownerDocument) {
              var img = canvas.ownerDocument.createElement("img");
              try {
                img.src = canvas.toDataURL();
                return img;
              } catch (e3) {
                this.context.logger.info("Unable to inline canvas contents, canvas is tainted", canvas);
              }
            }
            var clonedCanvas = canvas.cloneNode(false);
            try {
              clonedCanvas.width = canvas.width;
              clonedCanvas.height = canvas.height;
              var ctx = canvas.getContext("2d");
              var clonedCtx = clonedCanvas.getContext("2d");
              if (clonedCtx) {
                if (!this.options.allowTaint && ctx) {
                  clonedCtx.putImageData(ctx.getImageData(0, 0, canvas.width, canvas.height), 0, 0);
                } else {
                  var gl = (_a2 = canvas.getContext("webgl2")) !== null && _a2 !== void 0 ? _a2 : canvas.getContext("webgl");
                  if (gl) {
                    var attribs = gl.getContextAttributes();
                    if ((attribs === null || attribs === void 0 ? void 0 : attribs.preserveDrawingBuffer) === false) {
                      this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false", canvas);
                    }
                  }
                  clonedCtx.drawImage(canvas, 0, 0);
                }
              }
              return clonedCanvas;
            } catch (e3) {
              this.context.logger.info("Unable to clone canvas as it is tainted", canvas);
            }
            return clonedCanvas;
          };
          DocumentCloner2.prototype.createVideoClone = function(video) {
            var canvas = video.ownerDocument.createElement("canvas");
            canvas.width = video.offsetWidth;
            canvas.height = video.offsetHeight;
            var ctx = canvas.getContext("2d");
            try {
              if (ctx) {
                ctx.drawImage(video, 0, 0, canvas.width, canvas.height);
                if (!this.options.allowTaint) {
                  ctx.getImageData(0, 0, canvas.width, canvas.height);
                }
              }
              return canvas;
            } catch (e3) {
              this.context.logger.info("Unable to clone video as it is tainted", video);
            }
            var blankCanvas = video.ownerDocument.createElement("canvas");
            blankCanvas.width = video.offsetWidth;
            blankCanvas.height = video.offsetHeight;
            return blankCanvas;
          };
          DocumentCloner2.prototype.appendChildNode = function(clone2, child, copyStyles) {
            if (!isElementNode(child) || !isScriptElement(child) && !child.hasAttribute(IGNORE_ATTRIBUTE) && (typeof this.options.ignoreElements !== "function" || !this.options.ignoreElements(child))) {
              if (!this.options.copyStyles || !isElementNode(child) || !isStyleElement(child)) {
                clone2.appendChild(this.cloneNode(child, copyStyles));
              }
            }
          };
          DocumentCloner2.prototype.cloneChildNodes = function(node2, clone2, copyStyles) {
            var _this = this;
            for (var child = node2.shadowRoot ? node2.shadowRoot.firstChild : node2.firstChild; child; child = child.nextSibling) {
              if (isElementNode(child) && isSlotElement(child) && typeof child.assignedNodes === "function") {
                var assignedNodes = child.assignedNodes();
                if (assignedNodes.length) {
                  assignedNodes.forEach(function(assignedNode) {
                    return _this.appendChildNode(clone2, assignedNode, copyStyles);
                  });
                }
              } else {
                this.appendChildNode(clone2, child, copyStyles);
              }
            }
          };
          DocumentCloner2.prototype.cloneNode = function(node2, copyStyles) {
            if (isTextNode(node2)) {
              return document.createTextNode(node2.data);
            }
            if (!node2.ownerDocument) {
              return node2.cloneNode(false);
            }
            var window2 = node2.ownerDocument.defaultView;
            if (window2 && isElementNode(node2) && (isHTMLElementNode(node2) || isSVGElementNode(node2))) {
              var clone2 = this.createElementClone(node2);
              clone2.style.transitionProperty = "none";
              var style = window2.getComputedStyle(node2);
              var styleBefore = window2.getComputedStyle(node2, ":before");
              var styleAfter = window2.getComputedStyle(node2, ":after");
              if (this.referenceElement === node2 && isHTMLElementNode(clone2)) {
                this.clonedReferenceElement = clone2;
              }
              if (isBodyElement(clone2)) {
                createPseudoHideStyles(clone2);
              }
              var counters = this.counters.parse(new CSSParsedCounterDeclaration(this.context, style));
              var before = this.resolvePseudoContent(node2, clone2, styleBefore, PseudoElementType.BEFORE);
              if (isCustomElement(node2)) {
                copyStyles = true;
              }
              if (!isVideoElement(node2)) {
                this.cloneChildNodes(node2, clone2, copyStyles);
              }
              if (before) {
                clone2.insertBefore(before, clone2.firstChild);
              }
              var after = this.resolvePseudoContent(node2, clone2, styleAfter, PseudoElementType.AFTER);
              if (after) {
                clone2.appendChild(after);
              }
              this.counters.pop(counters);
              if (style && (this.options.copyStyles || isSVGElementNode(node2)) && !isIFrameElement(node2) || copyStyles) {
                copyCSSStyles(style, clone2);
              }
              if (node2.scrollTop !== 0 || node2.scrollLeft !== 0) {
                this.scrolledElements.push([clone2, node2.scrollLeft, node2.scrollTop]);
              }
              if ((isTextareaElement(node2) || isSelectElement(node2)) && (isTextareaElement(clone2) || isSelectElement(clone2))) {
                clone2.value = node2.value;
              }
              return clone2;
            }
            return node2.cloneNode(false);
          };
          DocumentCloner2.prototype.resolvePseudoContent = function(node2, clone2, style, pseudoElt) {
            var _this = this;
            if (!style) {
              return;
            }
            var value = style.content;
            var document2 = clone2.ownerDocument;
            if (!document2 || !value || value === "none" || value === "-moz-alt-content" || style.display === "none") {
              return;
            }
            this.counters.parse(new CSSParsedCounterDeclaration(this.context, style));
            var declaration = new CSSParsedPseudoDeclaration(this.context, style);
            var anonymousReplacedElement = document2.createElement("html2canvaspseudoelement");
            copyCSSStyles(style, anonymousReplacedElement);
            declaration.content.forEach(function(token) {
              if (token.type === 0) {
                anonymousReplacedElement.appendChild(document2.createTextNode(token.value));
              } else if (token.type === 22) {
                var img = document2.createElement("img");
                img.src = token.value;
                img.style.opacity = "1";
                anonymousReplacedElement.appendChild(img);
              } else if (token.type === 18) {
                if (token.name === "attr") {
                  var attr = token.values.filter(isIdentToken);
                  if (attr.length) {
                    anonymousReplacedElement.appendChild(document2.createTextNode(node2.getAttribute(attr[0].value) || ""));
                  }
                } else if (token.name === "counter") {
                  var _a2 = token.values.filter(nonFunctionArgSeparator), counter = _a2[0], counterStyle = _a2[1];
                  if (counter && isIdentToken(counter)) {
                    var counterState = _this.counters.getCounterValue(counter.value);
                    var counterType = counterStyle && isIdentToken(counterStyle) ? listStyleType.parse(_this.context, counterStyle.value) : 3;
                    anonymousReplacedElement.appendChild(document2.createTextNode(createCounterText(counterState, counterType, false)));
                  }
                } else if (token.name === "counters") {
                  var _b2 = token.values.filter(nonFunctionArgSeparator), counter = _b2[0], delim = _b2[1], counterStyle = _b2[2];
                  if (counter && isIdentToken(counter)) {
                    var counterStates = _this.counters.getCounterValues(counter.value);
                    var counterType_1 = counterStyle && isIdentToken(counterStyle) ? listStyleType.parse(_this.context, counterStyle.value) : 3;
                    var separator = delim && delim.type === 0 ? delim.value : "";
                    var text3 = counterStates.map(function(value2) {
                      return createCounterText(value2, counterType_1, false);
                    }).join(separator);
                    anonymousReplacedElement.appendChild(document2.createTextNode(text3));
                  }
                } else ;
              } else if (token.type === 20) {
                switch (token.value) {
                  case "open-quote":
                    anonymousReplacedElement.appendChild(document2.createTextNode(getQuote(declaration.quotes, _this.quoteDepth++, true)));
                    break;
                  case "close-quote":
                    anonymousReplacedElement.appendChild(document2.createTextNode(getQuote(declaration.quotes, --_this.quoteDepth, false)));
                    break;
                  default:
                    anonymousReplacedElement.appendChild(document2.createTextNode(token.value));
                }
              }
            });
            anonymousReplacedElement.className = PSEUDO_HIDE_ELEMENT_CLASS_BEFORE + " " + PSEUDO_HIDE_ELEMENT_CLASS_AFTER;
            var newClassName = pseudoElt === PseudoElementType.BEFORE ? " " + PSEUDO_HIDE_ELEMENT_CLASS_BEFORE : " " + PSEUDO_HIDE_ELEMENT_CLASS_AFTER;
            if (isSVGElementNode(clone2)) {
              clone2.className.baseValue += newClassName;
            } else {
              clone2.className += newClassName;
            }
            return anonymousReplacedElement;
          };
          DocumentCloner2.destroy = function(container) {
            if (container.parentNode) {
              container.parentNode.removeChild(container);
              return true;
            }
            return false;
          };
          return DocumentCloner2;
        }()
      );
      var PseudoElementType;
      (function(PseudoElementType2) {
        PseudoElementType2[PseudoElementType2["BEFORE"] = 0] = "BEFORE";
        PseudoElementType2[PseudoElementType2["AFTER"] = 1] = "AFTER";
      })(PseudoElementType || (PseudoElementType = {}));
      var createIFrameContainer = /* @__PURE__ */ __name2(function(ownerDocument, bounds) {
        var cloneIframeContainer = ownerDocument.createElement("iframe");
        cloneIframeContainer.className = "html2canvas-container";
        cloneIframeContainer.style.visibility = "hidden";
        cloneIframeContainer.style.position = "fixed";
        cloneIframeContainer.style.left = "-10000px";
        cloneIframeContainer.style.top = "0px";
        cloneIframeContainer.style.border = "0";
        cloneIframeContainer.width = bounds.width.toString();
        cloneIframeContainer.height = bounds.height.toString();
        cloneIframeContainer.scrolling = "no";
        cloneIframeContainer.setAttribute(IGNORE_ATTRIBUTE, "true");
        ownerDocument.body.appendChild(cloneIframeContainer);
        return cloneIframeContainer;
      }, "createIFrameContainer");
      var imageReady = /* @__PURE__ */ __name2(function(img) {
        return new Promise(function(resolve) {
          if (img.complete) {
            resolve();
            return;
          }
          if (!img.src) {
            resolve();
            return;
          }
          img.onload = resolve;
          img.onerror = resolve;
        });
      }, "imageReady");
      var imagesReady = /* @__PURE__ */ __name2(function(document2) {
        return Promise.all([].slice.call(document2.images, 0).map(imageReady));
      }, "imagesReady");
      var iframeLoader = /* @__PURE__ */ __name2(function(iframe) {
        return new Promise(function(resolve, reject) {
          var cloneWindow = iframe.contentWindow;
          if (!cloneWindow) {
            return reject("No window assigned for iframe");
          }
          var documentClone = cloneWindow.document;
          cloneWindow.onload = iframe.onload = function() {
            cloneWindow.onload = iframe.onload = null;
            var interval = setInterval(function() {
              if (documentClone.body.childNodes.length > 0 && documentClone.readyState === "complete") {
                clearInterval(interval);
                resolve(iframe);
              }
            }, 50);
          };
        });
      }, "iframeLoader");
      var ignoredStyleProperties = [
        "all",
        "d",
        "content"
        // Safari shows pseudoelements if content is set
      ];
      var copyCSSStyles = /* @__PURE__ */ __name2(function(style, target) {
        for (var i4 = style.length - 1; i4 >= 0; i4--) {
          var property = style.item(i4);
          if (ignoredStyleProperties.indexOf(property) === -1) {
            target.style.setProperty(property, style.getPropertyValue(property));
          }
        }
        return target;
      }, "copyCSSStyles");
      var serializeDoctype = /* @__PURE__ */ __name2(function(doctype) {
        var str = "";
        if (doctype) {
          str += "<!DOCTYPE ";
          if (doctype.name) {
            str += doctype.name;
          }
          if (doctype.internalSubset) {
            str += doctype.internalSubset;
          }
          if (doctype.publicId) {
            str += '"' + doctype.publicId + '"';
          }
          if (doctype.systemId) {
            str += '"' + doctype.systemId + '"';
          }
          str += ">";
        }
        return str;
      }, "serializeDoctype");
      var restoreOwnerScroll = /* @__PURE__ */ __name2(function(ownerDocument, x22, y3) {
        if (ownerDocument && ownerDocument.defaultView && (x22 !== ownerDocument.defaultView.pageXOffset || y3 !== ownerDocument.defaultView.pageYOffset)) {
          ownerDocument.defaultView.scrollTo(x22, y3);
        }
      }, "restoreOwnerScroll");
      var restoreNodeScroll = /* @__PURE__ */ __name2(function(_a2) {
        var element = _a2[0], x22 = _a2[1], y3 = _a2[2];
        element.scrollLeft = x22;
        element.scrollTop = y3;
      }, "restoreNodeScroll");
      var PSEUDO_BEFORE = ":before";
      var PSEUDO_AFTER = ":after";
      var PSEUDO_HIDE_ELEMENT_CLASS_BEFORE = "___html2canvas___pseudoelement_before";
      var PSEUDO_HIDE_ELEMENT_CLASS_AFTER = "___html2canvas___pseudoelement_after";
      var PSEUDO_HIDE_ELEMENT_STYLE = '{\n    content: "" !important;\n    display: none !important;\n}';
      var createPseudoHideStyles = /* @__PURE__ */ __name2(function(body) {
        createStyles(body, "." + PSEUDO_HIDE_ELEMENT_CLASS_BEFORE + PSEUDO_BEFORE + PSEUDO_HIDE_ELEMENT_STYLE + "\n         ." + PSEUDO_HIDE_ELEMENT_CLASS_AFTER + PSEUDO_AFTER + PSEUDO_HIDE_ELEMENT_STYLE);
      }, "createPseudoHideStyles");
      var createStyles = /* @__PURE__ */ __name2(function(body, styles) {
        var document2 = body.ownerDocument;
        if (document2) {
          var style = document2.createElement("style");
          style.textContent = styles;
          body.appendChild(style);
        }
      }, "createStyles");
      var CacheStorage = (
        /** @class */
        function() {
          function CacheStorage2() {
          }
          __name(CacheStorage2, "CacheStorage2");
          __name2(CacheStorage2, "CacheStorage");
          CacheStorage2.getOrigin = function(url) {
            var link = CacheStorage2._link;
            if (!link) {
              return "about:blank";
            }
            link.href = url;
            link.href = link.href;
            return link.protocol + link.hostname + link.port;
          };
          CacheStorage2.isSameOrigin = function(src) {
            return CacheStorage2.getOrigin(src) === CacheStorage2._origin;
          };
          CacheStorage2.setContext = function(window2) {
            CacheStorage2._link = window2.document.createElement("a");
            CacheStorage2._origin = CacheStorage2.getOrigin(window2.location.href);
          };
          CacheStorage2._origin = "about:blank";
          return CacheStorage2;
        }()
      );
      var Cache = (
        /** @class */
        function() {
          function Cache2(context, _options) {
            this.context = context;
            this._options = _options;
            this._cache = {};
          }
          __name(Cache2, "Cache2");
          __name2(Cache2, "Cache");
          Cache2.prototype.addImage = function(src) {
            var result = Promise.resolve();
            if (this.has(src)) {
              return result;
            }
            if (isBlobImage(src) || isRenderable(src)) {
              (this._cache[src] = this.loadImage(src)).catch(function() {
              });
              return result;
            }
            return result;
          };
          Cache2.prototype.match = function(src) {
            return this._cache[src];
          };
          Cache2.prototype.loadImage = function(key) {
            return __awaiter(this, void 0, void 0, function() {
              var isSameOrigin, useCORS, useProxy, src;
              var _this = this;
              return __generator(this, function(_a2) {
                switch (_a2.label) {
                  case 0:
                    isSameOrigin = CacheStorage.isSameOrigin(key);
                    useCORS = !isInlineImage(key) && this._options.useCORS === true && FEATURES.SUPPORT_CORS_IMAGES && !isSameOrigin;
                    useProxy = !isInlineImage(key) && !isSameOrigin && !isBlobImage(key) && typeof this._options.proxy === "string" && FEATURES.SUPPORT_CORS_XHR && !useCORS;
                    if (!isSameOrigin && this._options.allowTaint === false && !isInlineImage(key) && !isBlobImage(key) && !useProxy && !useCORS) {
                      return [
                        2
                        /*return*/
                      ];
                    }
                    src = key;
                    if (!useProxy) return [3, 2];
                    return [4, this.proxy(src)];
                  case 1:
                    src = _a2.sent();
                    _a2.label = 2;
                  case 2:
                    this.context.logger.debug("Added image " + key.substring(0, 256));
                    return [4, new Promise(function(resolve, reject) {
                      var img = new Image();
                      img.onload = function() {
                        return resolve(img);
                      };
                      img.onerror = reject;
                      if (isInlineBase64Image(src) || useCORS) {
                        img.crossOrigin = "anonymous";
                      }
                      img.src = src;
                      if (img.complete === true) {
                        setTimeout(function() {
                          return resolve(img);
                        }, 500);
                      }
                      if (_this._options.imageTimeout > 0) {
                        setTimeout(function() {
                          return reject("Timed out (" + _this._options.imageTimeout + "ms) loading image");
                        }, _this._options.imageTimeout);
                      }
                    })];
                  case 3:
                    return [2, _a2.sent()];
                }
              });
            });
          };
          Cache2.prototype.has = function(key) {
            return typeof this._cache[key] !== "undefined";
          };
          Cache2.prototype.keys = function() {
            return Promise.resolve(Object.keys(this._cache));
          };
          Cache2.prototype.proxy = function(src) {
            var _this = this;
            var proxy = this._options.proxy;
            if (!proxy) {
              throw new Error("No proxy defined");
            }
            var key = src.substring(0, 256);
            return new Promise(function(resolve, reject) {
              var responseType = FEATURES.SUPPORT_RESPONSE_TYPE ? "blob" : "text";
              var xhr = new XMLHttpRequest();
              xhr.onload = function() {
                if (xhr.status === 200) {
                  if (responseType === "text") {
                    resolve(xhr.response);
                  } else {
                    var reader_1 = new FileReader();
                    reader_1.addEventListener("load", function() {
                      return resolve(reader_1.result);
                    }, false);
                    reader_1.addEventListener("error", function(e3) {
                      return reject(e3);
                    }, false);
                    reader_1.readAsDataURL(xhr.response);
                  }
                } else {
                  reject("Failed to proxy resource " + key + " with status code " + xhr.status);
                }
              };
              xhr.onerror = reject;
              var queryString = proxy.indexOf("?") > -1 ? "&" : "?";
              xhr.open("GET", "" + proxy + queryString + "url=" + encodeURIComponent(src) + "&responseType=" + responseType);
              if (responseType !== "text" && xhr instanceof XMLHttpRequest) {
                xhr.responseType = responseType;
              }
              if (_this._options.imageTimeout) {
                var timeout_1 = _this._options.imageTimeout;
                xhr.timeout = timeout_1;
                xhr.ontimeout = function() {
                  return reject("Timed out (" + timeout_1 + "ms) proxying " + key);
                };
              }
              xhr.send();
            });
          };
          return Cache2;
        }()
      );
      var INLINE_SVG = /^data:image\/svg\+xml/i;
      var INLINE_BASE64 = /^data:image\/.*;base64,/i;
      var INLINE_IMG = /^data:image\/.*/i;
      var isRenderable = /* @__PURE__ */ __name2(function(src) {
        return FEATURES.SUPPORT_SVG_DRAWING || !isSVG(src);
      }, "isRenderable");
      var isInlineImage = /* @__PURE__ */ __name2(function(src) {
        return INLINE_IMG.test(src);
      }, "isInlineImage");
      var isInlineBase64Image = /* @__PURE__ */ __name2(function(src) {
        return INLINE_BASE64.test(src);
      }, "isInlineBase64Image");
      var isBlobImage = /* @__PURE__ */ __name2(function(src) {
        return src.substr(0, 4) === "blob";
      }, "isBlobImage");
      var isSVG = /* @__PURE__ */ __name2(function(src) {
        return src.substr(-3).toLowerCase() === "svg" || INLINE_SVG.test(src);
      }, "isSVG");
      var Vector = (
        /** @class */
        function() {
          function Vector2(x22, y3) {
            this.type = 0;
            this.x = x22;
            this.y = y3;
          }
          __name(Vector2, "Vector2");
          __name2(Vector2, "Vector");
          Vector2.prototype.add = function(deltaX, deltaY) {
            return new Vector2(this.x + deltaX, this.y + deltaY);
          };
          return Vector2;
        }()
      );
      var lerp = /* @__PURE__ */ __name2(function(a4, b2, t3) {
        return new Vector(a4.x + (b2.x - a4.x) * t3, a4.y + (b2.y - a4.y) * t3);
      }, "lerp");
      var BezierCurve = (
        /** @class */
        function() {
          function BezierCurve2(start, startControl, endControl, end) {
            this.type = 1;
            this.start = start;
            this.startControl = startControl;
            this.endControl = endControl;
            this.end = end;
          }
          __name(BezierCurve2, "BezierCurve2");
          __name2(BezierCurve2, "BezierCurve");
          BezierCurve2.prototype.subdivide = function(t3, firstHalf) {
            var ab = lerp(this.start, this.startControl, t3);
            var bc = lerp(this.startControl, this.endControl, t3);
            var cd = lerp(this.endControl, this.end, t3);
            var abbc = lerp(ab, bc, t3);
            var bccd = lerp(bc, cd, t3);
            var dest = lerp(abbc, bccd, t3);
            return firstHalf ? new BezierCurve2(this.start, ab, abbc, dest) : new BezierCurve2(dest, bccd, cd, this.end);
          };
          BezierCurve2.prototype.add = function(deltaX, deltaY) {
            return new BezierCurve2(this.start.add(deltaX, deltaY), this.startControl.add(deltaX, deltaY), this.endControl.add(deltaX, deltaY), this.end.add(deltaX, deltaY));
          };
          BezierCurve2.prototype.reverse = function() {
            return new BezierCurve2(this.end, this.endControl, this.startControl, this.start);
          };
          return BezierCurve2;
        }()
      );
      var isBezierCurve = /* @__PURE__ */ __name2(function(path) {
        return path.type === 1;
      }, "isBezierCurve");
      var BoundCurves = (
        /** @class */
        /* @__PURE__ */ function() {
          function BoundCurves2(element) {
            var styles = element.styles;
            var bounds = element.bounds;
            var _a2 = getAbsoluteValueForTuple(styles.borderTopLeftRadius, bounds.width, bounds.height), tlh = _a2[0], tlv = _a2[1];
            var _b2 = getAbsoluteValueForTuple(styles.borderTopRightRadius, bounds.width, bounds.height), trh = _b2[0], trv = _b2[1];
            var _c = getAbsoluteValueForTuple(styles.borderBottomRightRadius, bounds.width, bounds.height), brh = _c[0], brv = _c[1];
            var _d = getAbsoluteValueForTuple(styles.borderBottomLeftRadius, bounds.width, bounds.height), blh = _d[0], blv = _d[1];
            var factors = [];
            factors.push((tlh + trh) / bounds.width);
            factors.push((blh + brh) / bounds.width);
            factors.push((tlv + blv) / bounds.height);
            factors.push((trv + brv) / bounds.height);
            var maxFactor = Math.max.apply(Math, factors);
            if (maxFactor > 1) {
              tlh /= maxFactor;
              tlv /= maxFactor;
              trh /= maxFactor;
              trv /= maxFactor;
              brh /= maxFactor;
              brv /= maxFactor;
              blh /= maxFactor;
              blv /= maxFactor;
            }
            var topWidth = bounds.width - trh;
            var rightHeight = bounds.height - brv;
            var bottomWidth = bounds.width - brh;
            var leftHeight = bounds.height - blv;
            var borderTopWidth2 = styles.borderTopWidth;
            var borderRightWidth2 = styles.borderRightWidth;
            var borderBottomWidth2 = styles.borderBottomWidth;
            var borderLeftWidth2 = styles.borderLeftWidth;
            var paddingTop2 = getAbsoluteValue(styles.paddingTop, element.bounds.width);
            var paddingRight2 = getAbsoluteValue(styles.paddingRight, element.bounds.width);
            var paddingBottom2 = getAbsoluteValue(styles.paddingBottom, element.bounds.width);
            var paddingLeft2 = getAbsoluteValue(styles.paddingLeft, element.bounds.width);
            this.topLeftBorderDoubleOuterBox = tlh > 0 || tlv > 0 ? getCurvePoints(bounds.left + borderLeftWidth2 / 3, bounds.top + borderTopWidth2 / 3, tlh - borderLeftWidth2 / 3, tlv - borderTopWidth2 / 3, CORNER.TOP_LEFT) : new Vector(bounds.left + borderLeftWidth2 / 3, bounds.top + borderTopWidth2 / 3);
            this.topRightBorderDoubleOuterBox = tlh > 0 || tlv > 0 ? getCurvePoints(bounds.left + topWidth, bounds.top + borderTopWidth2 / 3, trh - borderRightWidth2 / 3, trv - borderTopWidth2 / 3, CORNER.TOP_RIGHT) : new Vector(bounds.left + bounds.width - borderRightWidth2 / 3, bounds.top + borderTopWidth2 / 3);
            this.bottomRightBorderDoubleOuterBox = brh > 0 || brv > 0 ? getCurvePoints(bounds.left + bottomWidth, bounds.top + rightHeight, brh - borderRightWidth2 / 3, brv - borderBottomWidth2 / 3, CORNER.BOTTOM_RIGHT) : new Vector(bounds.left + bounds.width - borderRightWidth2 / 3, bounds.top + bounds.height - borderBottomWidth2 / 3);
            this.bottomLeftBorderDoubleOuterBox = blh > 0 || blv > 0 ? getCurvePoints(bounds.left + borderLeftWidth2 / 3, bounds.top + leftHeight, blh - borderLeftWidth2 / 3, blv - borderBottomWidth2 / 3, CORNER.BOTTOM_LEFT) : new Vector(bounds.left + borderLeftWidth2 / 3, bounds.top + bounds.height - borderBottomWidth2 / 3);
            this.topLeftBorderDoubleInnerBox = tlh > 0 || tlv > 0 ? getCurvePoints(bounds.left + borderLeftWidth2 * 2 / 3, bounds.top + borderTopWidth2 * 2 / 3, tlh - borderLeftWidth2 * 2 / 3, tlv - borderTopWidth2 * 2 / 3, CORNER.TOP_LEFT) : new Vector(bounds.left + borderLeftWidth2 * 2 / 3, bounds.top + borderTopWidth2 * 2 / 3);
            this.topRightBorderDoubleInnerBox = tlh > 0 || tlv > 0 ? getCurvePoints(bounds.left + topWidth, bounds.top + borderTopWidth2 * 2 / 3, trh - borderRightWidth2 * 2 / 3, trv - borderTopWidth2 * 2 / 3, CORNER.TOP_RIGHT) : new Vector(bounds.left + bounds.width - borderRightWidth2 * 2 / 3, bounds.top + borderTopWidth2 * 2 / 3);
            this.bottomRightBorderDoubleInnerBox = brh > 0 || brv > 0 ? getCurvePoints(bounds.left + bottomWidth, bounds.top + rightHeight, brh - borderRightWidth2 * 2 / 3, brv - borderBottomWidth2 * 2 / 3, CORNER.BOTTOM_RIGHT) : new Vector(bounds.left + bounds.width - borderRightWidth2 * 2 / 3, bounds.top + bounds.height - borderBottomWidth2 * 2 / 3);
            this.bottomLeftBorderDoubleInnerBox = blh > 0 || blv > 0 ? getCurvePoints(bounds.left + borderLeftWidth2 * 2 / 3, bounds.top + leftHeight, blh - borderLeftWidth2 * 2 / 3, blv - borderBottomWidth2 * 2 / 3, CORNER.BOTTOM_LEFT) : new Vector(bounds.left + borderLeftWidth2 * 2 / 3, bounds.top + bounds.height - borderBottomWidth2 * 2 / 3);
            this.topLeftBorderStroke = tlh > 0 || tlv > 0 ? getCurvePoints(bounds.left + borderLeftWidth2 / 2, bounds.top + borderTopWidth2 / 2, tlh - borderLeftWidth2 / 2, tlv - borderTopWidth2 / 2, CORNER.TOP_LEFT) : new Vector(bounds.left + borderLeftWidth2 / 2, bounds.top + borderTopWidth2 / 2);
            this.topRightBorderStroke = tlh > 0 || tlv > 0 ? getCurvePoints(bounds.left + topWidth, bounds.top + borderTopWidth2 / 2, trh - borderRightWidth2 / 2, trv - borderTopWidth2 / 2, CORNER.TOP_RIGHT) : new Vector(bounds.left + bounds.width - borderRightWidth2 / 2, bounds.top + borderTopWidth2 / 2);
            this.bottomRightBorderStroke = brh > 0 || brv > 0 ? getCurvePoints(bounds.left + bottomWidth, bounds.top + rightHeight, brh - borderRightWidth2 / 2, brv - borderBottomWidth2 / 2, CORNER.BOTTOM_RIGHT) : new Vector(bounds.left + bounds.width - borderRightWidth2 / 2, bounds.top + bounds.height - borderBottomWidth2 / 2);
            this.bottomLeftBorderStroke = blh > 0 || blv > 0 ? getCurvePoints(bounds.left + borderLeftWidth2 / 2, bounds.top + leftHeight, blh - borderLeftWidth2 / 2, blv - borderBottomWidth2 / 2, CORNER.BOTTOM_LEFT) : new Vector(bounds.left + borderLeftWidth2 / 2, bounds.top + bounds.height - borderBottomWidth2 / 2);
            this.topLeftBorderBox = tlh > 0 || tlv > 0 ? getCurvePoints(bounds.left, bounds.top, tlh, tlv, CORNER.TOP_LEFT) : new Vector(bounds.left, bounds.top);
            this.topRightBorderBox = trh > 0 || trv > 0 ? getCurvePoints(bounds.left + topWidth, bounds.top, trh, trv, CORNER.TOP_RIGHT) : new Vector(bounds.left + bounds.width, bounds.top);
            this.bottomRightBorderBox = brh > 0 || brv > 0 ? getCurvePoints(bounds.left + bottomWidth, bounds.top + rightHeight, brh, brv, CORNER.BOTTOM_RIGHT) : new Vector(bounds.left + bounds.width, bounds.top + bounds.height);
            this.bottomLeftBorderBox = blh > 0 || blv > 0 ? getCurvePoints(bounds.left, bounds.top + leftHeight, blh, blv, CORNER.BOTTOM_LEFT) : new Vector(bounds.left, bounds.top + bounds.height);
            this.topLeftPaddingBox = tlh > 0 || tlv > 0 ? getCurvePoints(bounds.left + borderLeftWidth2, bounds.top + borderTopWidth2, Math.max(0, tlh - borderLeftWidth2), Math.max(0, tlv - borderTopWidth2), CORNER.TOP_LEFT) : new Vector(bounds.left + borderLeftWidth2, bounds.top + borderTopWidth2);
            this.topRightPaddingBox = trh > 0 || trv > 0 ? getCurvePoints(bounds.left + Math.min(topWidth, bounds.width - borderRightWidth2), bounds.top + borderTopWidth2, topWidth > bounds.width + borderRightWidth2 ? 0 : Math.max(0, trh - borderRightWidth2), Math.max(0, trv - borderTopWidth2), CORNER.TOP_RIGHT) : new Vector(bounds.left + bounds.width - borderRightWidth2, bounds.top + borderTopWidth2);
            this.bottomRightPaddingBox = brh > 0 || brv > 0 ? getCurvePoints(bounds.left + Math.min(bottomWidth, bounds.width - borderLeftWidth2), bounds.top + Math.min(rightHeight, bounds.height - borderBottomWidth2), Math.max(0, brh - borderRightWidth2), Math.max(0, brv - borderBottomWidth2), CORNER.BOTTOM_RIGHT) : new Vector(bounds.left + bounds.width - borderRightWidth2, bounds.top + bounds.height - borderBottomWidth2);
            this.bottomLeftPaddingBox = blh > 0 || blv > 0 ? getCurvePoints(bounds.left + borderLeftWidth2, bounds.top + Math.min(leftHeight, bounds.height - borderBottomWidth2), Math.max(0, blh - borderLeftWidth2), Math.max(0, blv - borderBottomWidth2), CORNER.BOTTOM_LEFT) : new Vector(bounds.left + borderLeftWidth2, bounds.top + bounds.height - borderBottomWidth2);
            this.topLeftContentBox = tlh > 0 || tlv > 0 ? getCurvePoints(bounds.left + borderLeftWidth2 + paddingLeft2, bounds.top + borderTopWidth2 + paddingTop2, Math.max(0, tlh - (borderLeftWidth2 + paddingLeft2)), Math.max(0, tlv - (borderTopWidth2 + paddingTop2)), CORNER.TOP_LEFT) : new Vector(bounds.left + borderLeftWidth2 + paddingLeft2, bounds.top + borderTopWidth2 + paddingTop2);
            this.topRightContentBox = trh > 0 || trv > 0 ? getCurvePoints(bounds.left + Math.min(topWidth, bounds.width + borderLeftWidth2 + paddingLeft2), bounds.top + borderTopWidth2 + paddingTop2, topWidth > bounds.width + borderLeftWidth2 + paddingLeft2 ? 0 : trh - borderLeftWidth2 + paddingLeft2, trv - (borderTopWidth2 + paddingTop2), CORNER.TOP_RIGHT) : new Vector(bounds.left + bounds.width - (borderRightWidth2 + paddingRight2), bounds.top + borderTopWidth2 + paddingTop2);
            this.bottomRightContentBox = brh > 0 || brv > 0 ? getCurvePoints(bounds.left + Math.min(bottomWidth, bounds.width - (borderLeftWidth2 + paddingLeft2)), bounds.top + Math.min(rightHeight, bounds.height + borderTopWidth2 + paddingTop2), Math.max(0, brh - (borderRightWidth2 + paddingRight2)), brv - (borderBottomWidth2 + paddingBottom2), CORNER.BOTTOM_RIGHT) : new Vector(bounds.left + bounds.width - (borderRightWidth2 + paddingRight2), bounds.top + bounds.height - (borderBottomWidth2 + paddingBottom2));
            this.bottomLeftContentBox = blh > 0 || blv > 0 ? getCurvePoints(bounds.left + borderLeftWidth2 + paddingLeft2, bounds.top + leftHeight, Math.max(0, blh - (borderLeftWidth2 + paddingLeft2)), blv - (borderBottomWidth2 + paddingBottom2), CORNER.BOTTOM_LEFT) : new Vector(bounds.left + borderLeftWidth2 + paddingLeft2, bounds.top + bounds.height - (borderBottomWidth2 + paddingBottom2));
          }
          __name(BoundCurves2, "BoundCurves2");
          __name2(BoundCurves2, "BoundCurves");
          return BoundCurves2;
        }()
      );
      var CORNER;
      (function(CORNER2) {
        CORNER2[CORNER2["TOP_LEFT"] = 0] = "TOP_LEFT";
        CORNER2[CORNER2["TOP_RIGHT"] = 1] = "TOP_RIGHT";
        CORNER2[CORNER2["BOTTOM_RIGHT"] = 2] = "BOTTOM_RIGHT";
        CORNER2[CORNER2["BOTTOM_LEFT"] = 3] = "BOTTOM_LEFT";
      })(CORNER || (CORNER = {}));
      var getCurvePoints = /* @__PURE__ */ __name2(function(x22, y3, r1, r2, position2) {
        var kappa = 4 * ((Math.sqrt(2) - 1) / 3);
        var ox = r1 * kappa;
        var oy = r2 * kappa;
        var xm = x22 + r1;
        var ym = y3 + r2;
        switch (position2) {
          case CORNER.TOP_LEFT:
            return new BezierCurve(new Vector(x22, ym), new Vector(x22, ym - oy), new Vector(xm - ox, y3), new Vector(xm, y3));
          case CORNER.TOP_RIGHT:
            return new BezierCurve(new Vector(x22, y3), new Vector(x22 + ox, y3), new Vector(xm, ym - oy), new Vector(xm, ym));
          case CORNER.BOTTOM_RIGHT:
            return new BezierCurve(new Vector(xm, y3), new Vector(xm, y3 + oy), new Vector(x22 + ox, ym), new Vector(x22, ym));
          case CORNER.BOTTOM_LEFT:
          default:
            return new BezierCurve(new Vector(xm, ym), new Vector(xm - ox, ym), new Vector(x22, y3 + oy), new Vector(x22, y3));
        }
      }, "getCurvePoints");
      var calculateBorderBoxPath = /* @__PURE__ */ __name2(function(curves) {
        return [curves.topLeftBorderBox, curves.topRightBorderBox, curves.bottomRightBorderBox, curves.bottomLeftBorderBox];
      }, "calculateBorderBoxPath");
      var calculateContentBoxPath = /* @__PURE__ */ __name2(function(curves) {
        return [
          curves.topLeftContentBox,
          curves.topRightContentBox,
          curves.bottomRightContentBox,
          curves.bottomLeftContentBox
        ];
      }, "calculateContentBoxPath");
      var calculatePaddingBoxPath = /* @__PURE__ */ __name2(function(curves) {
        return [
          curves.topLeftPaddingBox,
          curves.topRightPaddingBox,
          curves.bottomRightPaddingBox,
          curves.bottomLeftPaddingBox
        ];
      }, "calculatePaddingBoxPath");
      var TransformEffect = (
        /** @class */
        /* @__PURE__ */ function() {
          function TransformEffect2(offsetX, offsetY, matrix2) {
            this.offsetX = offsetX;
            this.offsetY = offsetY;
            this.matrix = matrix2;
            this.type = 0;
            this.target = 2 | 4;
          }
          __name(TransformEffect2, "TransformEffect2");
          __name2(TransformEffect2, "TransformEffect");
          return TransformEffect2;
        }()
      );
      var ClipEffect = (
        /** @class */
        /* @__PURE__ */ function() {
          function ClipEffect2(path, target) {
            this.path = path;
            this.target = target;
            this.type = 1;
          }
          __name(ClipEffect2, "ClipEffect2");
          __name2(ClipEffect2, "ClipEffect");
          return ClipEffect2;
        }()
      );
      var OpacityEffect = (
        /** @class */
        /* @__PURE__ */ function() {
          function OpacityEffect2(opacity2) {
            this.opacity = opacity2;
            this.type = 2;
            this.target = 2 | 4;
          }
          __name(OpacityEffect2, "OpacityEffect2");
          __name2(OpacityEffect2, "OpacityEffect");
          return OpacityEffect2;
        }()
      );
      var isTransformEffect = /* @__PURE__ */ __name2(function(effect) {
        return effect.type === 0;
      }, "isTransformEffect");
      var isClipEffect = /* @__PURE__ */ __name2(function(effect) {
        return effect.type === 1;
      }, "isClipEffect");
      var isOpacityEffect = /* @__PURE__ */ __name2(function(effect) {
        return effect.type === 2;
      }, "isOpacityEffect");
      var equalPath = /* @__PURE__ */ __name2(function(a4, b2) {
        if (a4.length === b2.length) {
          return a4.some(function(v3, i4) {
            return v3 === b2[i4];
          });
        }
        return false;
      }, "equalPath");
      var transformPath = /* @__PURE__ */ __name2(function(path, deltaX, deltaY, deltaW, deltaH) {
        return path.map(function(point, index2) {
          switch (index2) {
            case 0:
              return point.add(deltaX, deltaY);
            case 1:
              return point.add(deltaX + deltaW, deltaY);
            case 2:
              return point.add(deltaX + deltaW, deltaY + deltaH);
            case 3:
              return point.add(deltaX, deltaY + deltaH);
          }
          return point;
        });
      }, "transformPath");
      var StackingContext = (
        /** @class */
        /* @__PURE__ */ function() {
          function StackingContext2(container) {
            this.element = container;
            this.inlineLevel = [];
            this.nonInlineLevel = [];
            this.negativeZIndex = [];
            this.zeroOrAutoZIndexOrTransformedOrOpacity = [];
            this.positiveZIndex = [];
            this.nonPositionedFloats = [];
            this.nonPositionedInlineLevel = [];
          }
          __name(StackingContext2, "StackingContext2");
          __name2(StackingContext2, "StackingContext");
          return StackingContext2;
        }()
      );
      var ElementPaint = (
        /** @class */
        function() {
          function ElementPaint2(container, parent) {
            this.container = container;
            this.parent = parent;
            this.effects = [];
            this.curves = new BoundCurves(this.container);
            if (this.container.styles.opacity < 1) {
              this.effects.push(new OpacityEffect(this.container.styles.opacity));
            }
            if (this.container.styles.transform !== null) {
              var offsetX = this.container.bounds.left + this.container.styles.transformOrigin[0].number;
              var offsetY = this.container.bounds.top + this.container.styles.transformOrigin[1].number;
              var matrix2 = this.container.styles.transform;
              this.effects.push(new TransformEffect(offsetX, offsetY, matrix2));
            }
            if (this.container.styles.overflowX !== 0) {
              var borderBox = calculateBorderBoxPath(this.curves);
              var paddingBox2 = calculatePaddingBoxPath(this.curves);
              if (equalPath(borderBox, paddingBox2)) {
                this.effects.push(new ClipEffect(
                  borderBox,
                  2 | 4
                  /* CONTENT */
                ));
              } else {
                this.effects.push(new ClipEffect(
                  borderBox,
                  2
                  /* BACKGROUND_BORDERS */
                ));
                this.effects.push(new ClipEffect(
                  paddingBox2,
                  4
                  /* CONTENT */
                ));
              }
            }
          }
          __name(ElementPaint2, "ElementPaint2");
          __name2(ElementPaint2, "ElementPaint");
          ElementPaint2.prototype.getEffects = function(target) {
            var inFlow = [
              2,
              3
              /* FIXED */
            ].indexOf(this.container.styles.position) === -1;
            var parent = this.parent;
            var effects = this.effects.slice(0);
            while (parent) {
              var croplessEffects = parent.effects.filter(function(effect) {
                return !isClipEffect(effect);
              });
              if (inFlow || parent.container.styles.position !== 0 || !parent.parent) {
                effects.unshift.apply(effects, croplessEffects);
                inFlow = [
                  2,
                  3
                  /* FIXED */
                ].indexOf(parent.container.styles.position) === -1;
                if (parent.container.styles.overflowX !== 0) {
                  var borderBox = calculateBorderBoxPath(parent.curves);
                  var paddingBox2 = calculatePaddingBoxPath(parent.curves);
                  if (!equalPath(borderBox, paddingBox2)) {
                    effects.unshift(new ClipEffect(
                      paddingBox2,
                      2 | 4
                      /* CONTENT */
                    ));
                  }
                }
              } else {
                effects.unshift.apply(effects, croplessEffects);
              }
              parent = parent.parent;
            }
            return effects.filter(function(effect) {
              return contains(effect.target, target);
            });
          };
          return ElementPaint2;
        }()
      );
      var parseStackTree = /* @__PURE__ */ __name2(function(parent, stackingContext, realStackingContext, listItems) {
        parent.container.elements.forEach(function(child) {
          var treatAsRealStackingContext = contains(
            child.flags,
            4
            /* CREATES_REAL_STACKING_CONTEXT */
          );
          var createsStackingContext2 = contains(
            child.flags,
            2
            /* CREATES_STACKING_CONTEXT */
          );
          var paintContainer = new ElementPaint(child, parent);
          if (contains(
            child.styles.display,
            2048
            /* LIST_ITEM */
          )) {
            listItems.push(paintContainer);
          }
          var listOwnerItems = contains(
            child.flags,
            8
            /* IS_LIST_OWNER */
          ) ? [] : listItems;
          if (treatAsRealStackingContext || createsStackingContext2) {
            var parentStack = treatAsRealStackingContext || child.styles.isPositioned() ? realStackingContext : stackingContext;
            var stack = new StackingContext(paintContainer);
            if (child.styles.isPositioned() || child.styles.opacity < 1 || child.styles.isTransformed()) {
              var order_1 = child.styles.zIndex.order;
              if (order_1 < 0) {
                var index_1 = 0;
                parentStack.negativeZIndex.some(function(current, i4) {
                  if (order_1 > current.element.container.styles.zIndex.order) {
                    index_1 = i4;
                    return false;
                  } else if (index_1 > 0) {
                    return true;
                  }
                  return false;
                });
                parentStack.negativeZIndex.splice(index_1, 0, stack);
              } else if (order_1 > 0) {
                var index_2 = 0;
                parentStack.positiveZIndex.some(function(current, i4) {
                  if (order_1 >= current.element.container.styles.zIndex.order) {
                    index_2 = i4 + 1;
                    return false;
                  } else if (index_2 > 0) {
                    return true;
                  }
                  return false;
                });
                parentStack.positiveZIndex.splice(index_2, 0, stack);
              } else {
                parentStack.zeroOrAutoZIndexOrTransformedOrOpacity.push(stack);
              }
            } else {
              if (child.styles.isFloating()) {
                parentStack.nonPositionedFloats.push(stack);
              } else {
                parentStack.nonPositionedInlineLevel.push(stack);
              }
            }
            parseStackTree(paintContainer, stack, treatAsRealStackingContext ? stack : realStackingContext, listOwnerItems);
          } else {
            if (child.styles.isInlineLevel()) {
              stackingContext.inlineLevel.push(paintContainer);
            } else {
              stackingContext.nonInlineLevel.push(paintContainer);
            }
            parseStackTree(paintContainer, stackingContext, realStackingContext, listOwnerItems);
          }
          if (contains(
            child.flags,
            8
            /* IS_LIST_OWNER */
          )) {
            processListItems(child, listOwnerItems);
          }
        });
      }, "parseStackTree");
      var processListItems = /* @__PURE__ */ __name2(function(owner, elements2) {
        var numbering = owner instanceof OLElementContainer ? owner.start : 1;
        var reversed = owner instanceof OLElementContainer ? owner.reversed : false;
        for (var i4 = 0; i4 < elements2.length; i4++) {
          var item = elements2[i4];
          if (item.container instanceof LIElementContainer && typeof item.container.value === "number" && item.container.value !== 0) {
            numbering = item.container.value;
          }
          item.listValue = createCounterText(numbering, item.container.styles.listStyleType, true);
          numbering += reversed ? -1 : 1;
        }
      }, "processListItems");
      var parseStackingContexts = /* @__PURE__ */ __name2(function(container) {
        var paintContainer = new ElementPaint(container, null);
        var root = new StackingContext(paintContainer);
        var listItems = [];
        parseStackTree(paintContainer, root, root, listItems);
        processListItems(paintContainer.container, listItems);
        return root;
      }, "parseStackingContexts");
      var parsePathForBorder = /* @__PURE__ */ __name2(function(curves, borderSide) {
        switch (borderSide) {
          case 0:
            return createPathFromCurves(curves.topLeftBorderBox, curves.topLeftPaddingBox, curves.topRightBorderBox, curves.topRightPaddingBox);
          case 1:
            return createPathFromCurves(curves.topRightBorderBox, curves.topRightPaddingBox, curves.bottomRightBorderBox, curves.bottomRightPaddingBox);
          case 2:
            return createPathFromCurves(curves.bottomRightBorderBox, curves.bottomRightPaddingBox, curves.bottomLeftBorderBox, curves.bottomLeftPaddingBox);
          case 3:
          default:
            return createPathFromCurves(curves.bottomLeftBorderBox, curves.bottomLeftPaddingBox, curves.topLeftBorderBox, curves.topLeftPaddingBox);
        }
      }, "parsePathForBorder");
      var parsePathForBorderDoubleOuter = /* @__PURE__ */ __name2(function(curves, borderSide) {
        switch (borderSide) {
          case 0:
            return createPathFromCurves(curves.topLeftBorderBox, curves.topLeftBorderDoubleOuterBox, curves.topRightBorderBox, curves.topRightBorderDoubleOuterBox);
          case 1:
            return createPathFromCurves(curves.topRightBorderBox, curves.topRightBorderDoubleOuterBox, curves.bottomRightBorderBox, curves.bottomRightBorderDoubleOuterBox);
          case 2:
            return createPathFromCurves(curves.bottomRightBorderBox, curves.bottomRightBorderDoubleOuterBox, curves.bottomLeftBorderBox, curves.bottomLeftBorderDoubleOuterBox);
          case 3:
          default:
            return createPathFromCurves(curves.bottomLeftBorderBox, curves.bottomLeftBorderDoubleOuterBox, curves.topLeftBorderBox, curves.topLeftBorderDoubleOuterBox);
        }
      }, "parsePathForBorderDoubleOuter");
      var parsePathForBorderDoubleInner = /* @__PURE__ */ __name2(function(curves, borderSide) {
        switch (borderSide) {
          case 0:
            return createPathFromCurves(curves.topLeftBorderDoubleInnerBox, curves.topLeftPaddingBox, curves.topRightBorderDoubleInnerBox, curves.topRightPaddingBox);
          case 1:
            return createPathFromCurves(curves.topRightBorderDoubleInnerBox, curves.topRightPaddingBox, curves.bottomRightBorderDoubleInnerBox, curves.bottomRightPaddingBox);
          case 2:
            return createPathFromCurves(curves.bottomRightBorderDoubleInnerBox, curves.bottomRightPaddingBox, curves.bottomLeftBorderDoubleInnerBox, curves.bottomLeftPaddingBox);
          case 3:
          default:
            return createPathFromCurves(curves.bottomLeftBorderDoubleInnerBox, curves.bottomLeftPaddingBox, curves.topLeftBorderDoubleInnerBox, curves.topLeftPaddingBox);
        }
      }, "parsePathForBorderDoubleInner");
      var parsePathForBorderStroke = /* @__PURE__ */ __name2(function(curves, borderSide) {
        switch (borderSide) {
          case 0:
            return createStrokePathFromCurves(curves.topLeftBorderStroke, curves.topRightBorderStroke);
          case 1:
            return createStrokePathFromCurves(curves.topRightBorderStroke, curves.bottomRightBorderStroke);
          case 2:
            return createStrokePathFromCurves(curves.bottomRightBorderStroke, curves.bottomLeftBorderStroke);
          case 3:
          default:
            return createStrokePathFromCurves(curves.bottomLeftBorderStroke, curves.topLeftBorderStroke);
        }
      }, "parsePathForBorderStroke");
      var createStrokePathFromCurves = /* @__PURE__ */ __name2(function(outer1, outer2) {
        var path = [];
        if (isBezierCurve(outer1)) {
          path.push(outer1.subdivide(0.5, false));
        } else {
          path.push(outer1);
        }
        if (isBezierCurve(outer2)) {
          path.push(outer2.subdivide(0.5, true));
        } else {
          path.push(outer2);
        }
        return path;
      }, "createStrokePathFromCurves");
      var createPathFromCurves = /* @__PURE__ */ __name2(function(outer1, inner1, outer2, inner2) {
        var path = [];
        if (isBezierCurve(outer1)) {
          path.push(outer1.subdivide(0.5, false));
        } else {
          path.push(outer1);
        }
        if (isBezierCurve(outer2)) {
          path.push(outer2.subdivide(0.5, true));
        } else {
          path.push(outer2);
        }
        if (isBezierCurve(inner2)) {
          path.push(inner2.subdivide(0.5, true).reverse());
        } else {
          path.push(inner2);
        }
        if (isBezierCurve(inner1)) {
          path.push(inner1.subdivide(0.5, false).reverse());
        } else {
          path.push(inner1);
        }
        return path;
      }, "createPathFromCurves");
      var paddingBox = /* @__PURE__ */ __name2(function(element) {
        var bounds = element.bounds;
        var styles = element.styles;
        return bounds.add(styles.borderLeftWidth, styles.borderTopWidth, -(styles.borderRightWidth + styles.borderLeftWidth), -(styles.borderTopWidth + styles.borderBottomWidth));
      }, "paddingBox");
      var contentBox = /* @__PURE__ */ __name2(function(element) {
        var styles = element.styles;
        var bounds = element.bounds;
        var paddingLeft2 = getAbsoluteValue(styles.paddingLeft, bounds.width);
        var paddingRight2 = getAbsoluteValue(styles.paddingRight, bounds.width);
        var paddingTop2 = getAbsoluteValue(styles.paddingTop, bounds.width);
        var paddingBottom2 = getAbsoluteValue(styles.paddingBottom, bounds.width);
        return bounds.add(paddingLeft2 + styles.borderLeftWidth, paddingTop2 + styles.borderTopWidth, -(styles.borderRightWidth + styles.borderLeftWidth + paddingLeft2 + paddingRight2), -(styles.borderTopWidth + styles.borderBottomWidth + paddingTop2 + paddingBottom2));
      }, "contentBox");
      var calculateBackgroundPositioningArea = /* @__PURE__ */ __name2(function(backgroundOrigin2, element) {
        if (backgroundOrigin2 === 0) {
          return element.bounds;
        }
        if (backgroundOrigin2 === 2) {
          return contentBox(element);
        }
        return paddingBox(element);
      }, "calculateBackgroundPositioningArea");
      var calculateBackgroundPaintingArea = /* @__PURE__ */ __name2(function(backgroundClip2, element) {
        if (backgroundClip2 === 0) {
          return element.bounds;
        }
        if (backgroundClip2 === 2) {
          return contentBox(element);
        }
        return paddingBox(element);
      }, "calculateBackgroundPaintingArea");
      var calculateBackgroundRendering = /* @__PURE__ */ __name2(function(container, index2, intrinsicSize) {
        var backgroundPositioningArea = calculateBackgroundPositioningArea(getBackgroundValueForIndex(container.styles.backgroundOrigin, index2), container);
        var backgroundPaintingArea = calculateBackgroundPaintingArea(getBackgroundValueForIndex(container.styles.backgroundClip, index2), container);
        var backgroundImageSize = calculateBackgroundSize(getBackgroundValueForIndex(container.styles.backgroundSize, index2), intrinsicSize, backgroundPositioningArea);
        var sizeWidth = backgroundImageSize[0], sizeHeight = backgroundImageSize[1];
        var position2 = getAbsoluteValueForTuple(getBackgroundValueForIndex(container.styles.backgroundPosition, index2), backgroundPositioningArea.width - sizeWidth, backgroundPositioningArea.height - sizeHeight);
        var path = calculateBackgroundRepeatPath(getBackgroundValueForIndex(container.styles.backgroundRepeat, index2), position2, backgroundImageSize, backgroundPositioningArea, backgroundPaintingArea);
        var offsetX = Math.round(backgroundPositioningArea.left + position2[0]);
        var offsetY = Math.round(backgroundPositioningArea.top + position2[1]);
        return [path, offsetX, offsetY, sizeWidth, sizeHeight];
      }, "calculateBackgroundRendering");
      var isAuto = /* @__PURE__ */ __name2(function(token) {
        return isIdentToken(token) && token.value === BACKGROUND_SIZE.AUTO;
      }, "isAuto");
      var hasIntrinsicValue = /* @__PURE__ */ __name2(function(value) {
        return typeof value === "number";
      }, "hasIntrinsicValue");
      var calculateBackgroundSize = /* @__PURE__ */ __name2(function(size, _a2, bounds) {
        var intrinsicWidth = _a2[0], intrinsicHeight = _a2[1], intrinsicProportion = _a2[2];
        var first = size[0], second = size[1];
        if (!first) {
          return [0, 0];
        }
        if (isLengthPercentage(first) && second && isLengthPercentage(second)) {
          return [getAbsoluteValue(first, bounds.width), getAbsoluteValue(second, bounds.height)];
        }
        var hasIntrinsicProportion = hasIntrinsicValue(intrinsicProportion);
        if (isIdentToken(first) && (first.value === BACKGROUND_SIZE.CONTAIN || first.value === BACKGROUND_SIZE.COVER)) {
          if (hasIntrinsicValue(intrinsicProportion)) {
            var targetRatio = bounds.width / bounds.height;
            return targetRatio < intrinsicProportion !== (first.value === BACKGROUND_SIZE.COVER) ? [bounds.width, bounds.width / intrinsicProportion] : [bounds.height * intrinsicProportion, bounds.height];
          }
          return [bounds.width, bounds.height];
        }
        var hasIntrinsicWidth = hasIntrinsicValue(intrinsicWidth);
        var hasIntrinsicHeight = hasIntrinsicValue(intrinsicHeight);
        var hasIntrinsicDimensions = hasIntrinsicWidth || hasIntrinsicHeight;
        if (isAuto(first) && (!second || isAuto(second))) {
          if (hasIntrinsicWidth && hasIntrinsicHeight) {
            return [intrinsicWidth, intrinsicHeight];
          }
          if (!hasIntrinsicProportion && !hasIntrinsicDimensions) {
            return [bounds.width, bounds.height];
          }
          if (hasIntrinsicDimensions && hasIntrinsicProportion) {
            var width_1 = hasIntrinsicWidth ? intrinsicWidth : intrinsicHeight * intrinsicProportion;
            var height_1 = hasIntrinsicHeight ? intrinsicHeight : intrinsicWidth / intrinsicProportion;
            return [width_1, height_1];
          }
          var width_2 = hasIntrinsicWidth ? intrinsicWidth : bounds.width;
          var height_2 = hasIntrinsicHeight ? intrinsicHeight : bounds.height;
          return [width_2, height_2];
        }
        if (hasIntrinsicProportion) {
          var width_3 = 0;
          var height_3 = 0;
          if (isLengthPercentage(first)) {
            width_3 = getAbsoluteValue(first, bounds.width);
          } else if (isLengthPercentage(second)) {
            height_3 = getAbsoluteValue(second, bounds.height);
          }
          if (isAuto(first)) {
            width_3 = height_3 * intrinsicProportion;
          } else if (!second || isAuto(second)) {
            height_3 = width_3 / intrinsicProportion;
          }
          return [width_3, height_3];
        }
        var width = null;
        var height = null;
        if (isLengthPercentage(first)) {
          width = getAbsoluteValue(first, bounds.width);
        } else if (second && isLengthPercentage(second)) {
          height = getAbsoluteValue(second, bounds.height);
        }
        if (width !== null && (!second || isAuto(second))) {
          height = hasIntrinsicWidth && hasIntrinsicHeight ? width / intrinsicWidth * intrinsicHeight : bounds.height;
        }
        if (height !== null && isAuto(first)) {
          width = hasIntrinsicWidth && hasIntrinsicHeight ? height / intrinsicHeight * intrinsicWidth : bounds.width;
        }
        if (width !== null && height !== null) {
          return [width, height];
        }
        throw new Error("Unable to calculate background-size for element");
      }, "calculateBackgroundSize");
      var getBackgroundValueForIndex = /* @__PURE__ */ __name2(function(values, index2) {
        var value = values[index2];
        if (typeof value === "undefined") {
          return values[0];
        }
        return value;
      }, "getBackgroundValueForIndex");
      var calculateBackgroundRepeatPath = /* @__PURE__ */ __name2(function(repeat, _a2, _b2, backgroundPositioningArea, backgroundPaintingArea) {
        var x22 = _a2[0], y3 = _a2[1];
        var width = _b2[0], height = _b2[1];
        switch (repeat) {
          case 2:
            return [
              new Vector(Math.round(backgroundPositioningArea.left), Math.round(backgroundPositioningArea.top + y3)),
              new Vector(Math.round(backgroundPositioningArea.left + backgroundPositioningArea.width), Math.round(backgroundPositioningArea.top + y3)),
              new Vector(Math.round(backgroundPositioningArea.left + backgroundPositioningArea.width), Math.round(height + backgroundPositioningArea.top + y3)),
              new Vector(Math.round(backgroundPositioningArea.left), Math.round(height + backgroundPositioningArea.top + y3))
            ];
          case 3:
            return [
              new Vector(Math.round(backgroundPositioningArea.left + x22), Math.round(backgroundPositioningArea.top)),
              new Vector(Math.round(backgroundPositioningArea.left + x22 + width), Math.round(backgroundPositioningArea.top)),
              new Vector(Math.round(backgroundPositioningArea.left + x22 + width), Math.round(backgroundPositioningArea.height + backgroundPositioningArea.top)),
              new Vector(Math.round(backgroundPositioningArea.left + x22), Math.round(backgroundPositioningArea.height + backgroundPositioningArea.top))
            ];
          case 1:
            return [
              new Vector(Math.round(backgroundPositioningArea.left + x22), Math.round(backgroundPositioningArea.top + y3)),
              new Vector(Math.round(backgroundPositioningArea.left + x22 + width), Math.round(backgroundPositioningArea.top + y3)),
              new Vector(Math.round(backgroundPositioningArea.left + x22 + width), Math.round(backgroundPositioningArea.top + y3 + height)),
              new Vector(Math.round(backgroundPositioningArea.left + x22), Math.round(backgroundPositioningArea.top + y3 + height))
            ];
          default:
            return [
              new Vector(Math.round(backgroundPaintingArea.left), Math.round(backgroundPaintingArea.top)),
              new Vector(Math.round(backgroundPaintingArea.left + backgroundPaintingArea.width), Math.round(backgroundPaintingArea.top)),
              new Vector(Math.round(backgroundPaintingArea.left + backgroundPaintingArea.width), Math.round(backgroundPaintingArea.height + backgroundPaintingArea.top)),
              new Vector(Math.round(backgroundPaintingArea.left), Math.round(backgroundPaintingArea.height + backgroundPaintingArea.top))
            ];
        }
      }, "calculateBackgroundRepeatPath");
      var SMALL_IMAGE = "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7";
      var SAMPLE_TEXT = "Hidden Text";
      var FontMetrics = (
        /** @class */
        function() {
          function FontMetrics2(document2) {
            this._data = {};
            this._document = document2;
          }
          __name(FontMetrics2, "FontMetrics2");
          __name2(FontMetrics2, "FontMetrics");
          FontMetrics2.prototype.parseMetrics = function(fontFamily2, fontSize2) {
            var container = this._document.createElement("div");
            var img = this._document.createElement("img");
            var span = this._document.createElement("span");
            var body = this._document.body;
            container.style.visibility = "hidden";
            container.style.fontFamily = fontFamily2;
            container.style.fontSize = fontSize2;
            container.style.margin = "0";
            container.style.padding = "0";
            container.style.whiteSpace = "nowrap";
            body.appendChild(container);
            img.src = SMALL_IMAGE;
            img.width = 1;
            img.height = 1;
            img.style.margin = "0";
            img.style.padding = "0";
            img.style.verticalAlign = "baseline";
            span.style.fontFamily = fontFamily2;
            span.style.fontSize = fontSize2;
            span.style.margin = "0";
            span.style.padding = "0";
            span.appendChild(this._document.createTextNode(SAMPLE_TEXT));
            container.appendChild(span);
            container.appendChild(img);
            var baseline = img.offsetTop - span.offsetTop + 2;
            container.removeChild(span);
            container.appendChild(this._document.createTextNode(SAMPLE_TEXT));
            container.style.lineHeight = "normal";
            img.style.verticalAlign = "super";
            var middle = img.offsetTop - container.offsetTop + 2;
            body.removeChild(container);
            return { baseline, middle };
          };
          FontMetrics2.prototype.getMetrics = function(fontFamily2, fontSize2) {
            var key = fontFamily2 + " " + fontSize2;
            if (typeof this._data[key] === "undefined") {
              this._data[key] = this.parseMetrics(fontFamily2, fontSize2);
            }
            return this._data[key];
          };
          return FontMetrics2;
        }()
      );
      var Renderer = (
        /** @class */
        /* @__PURE__ */ function() {
          function Renderer2(context, options) {
            this.context = context;
            this.options = options;
          }
          __name(Renderer2, "Renderer2");
          __name2(Renderer2, "Renderer");
          return Renderer2;
        }()
      );
      var MASK_OFFSET = 1e4;
      var CanvasRenderer = (
        /** @class */
        function(_super) {
          __extends(CanvasRenderer2, _super);
          function CanvasRenderer2(context, options) {
            var _this = _super.call(this, context, options) || this;
            _this._activeEffects = [];
            _this.canvas = options.canvas ? options.canvas : document.createElement("canvas");
            _this.ctx = _this.canvas.getContext("2d");
            if (!options.canvas) {
              _this.canvas.width = Math.floor(options.width * options.scale);
              _this.canvas.height = Math.floor(options.height * options.scale);
              _this.canvas.style.width = options.width + "px";
              _this.canvas.style.height = options.height + "px";
            }
            _this.fontMetrics = new FontMetrics(document);
            _this.ctx.scale(_this.options.scale, _this.options.scale);
            _this.ctx.translate(-options.x, -options.y);
            _this.ctx.textBaseline = "bottom";
            _this._activeEffects = [];
            _this.context.logger.debug("Canvas renderer initialized (" + options.width + "x" + options.height + ") with scale " + options.scale);
            return _this;
          }
          __name(CanvasRenderer2, "CanvasRenderer2");
          __name2(CanvasRenderer2, "CanvasRenderer");
          CanvasRenderer2.prototype.applyEffects = function(effects) {
            var _this = this;
            while (this._activeEffects.length) {
              this.popEffect();
            }
            effects.forEach(function(effect) {
              return _this.applyEffect(effect);
            });
          };
          CanvasRenderer2.prototype.applyEffect = function(effect) {
            this.ctx.save();
            if (isOpacityEffect(effect)) {
              this.ctx.globalAlpha = effect.opacity;
            }
            if (isTransformEffect(effect)) {
              this.ctx.translate(effect.offsetX, effect.offsetY);
              this.ctx.transform(effect.matrix[0], effect.matrix[1], effect.matrix[2], effect.matrix[3], effect.matrix[4], effect.matrix[5]);
              this.ctx.translate(-effect.offsetX, -effect.offsetY);
            }
            if (isClipEffect(effect)) {
              this.path(effect.path);
              this.ctx.clip();
            }
            this._activeEffects.push(effect);
          };
          CanvasRenderer2.prototype.popEffect = function() {
            this._activeEffects.pop();
            this.ctx.restore();
          };
          CanvasRenderer2.prototype.renderStack = function(stack) {
            return __awaiter(this, void 0, void 0, function() {
              var styles;
              return __generator(this, function(_a2) {
                switch (_a2.label) {
                  case 0:
                    styles = stack.element.container.styles;
                    if (!styles.isVisible()) return [3, 2];
                    return [4, this.renderStackContent(stack)];
                  case 1:
                    _a2.sent();
                    _a2.label = 2;
                  case 2:
                    return [
                      2
                      /*return*/
                    ];
                }
              });
            });
          };
          CanvasRenderer2.prototype.renderNode = function(paint) {
            return __awaiter(this, void 0, void 0, function() {
              return __generator(this, function(_a2) {
                switch (_a2.label) {
                  case 0:
                    if (contains(
                      paint.container.flags,
                      16
                      /* DEBUG_RENDER */
                    )) {
                      debugger;
                    }
                    if (!paint.container.styles.isVisible()) return [3, 3];
                    return [4, this.renderNodeBackgroundAndBorders(paint)];
                  case 1:
                    _a2.sent();
                    return [4, this.renderNodeContent(paint)];
                  case 2:
                    _a2.sent();
                    _a2.label = 3;
                  case 3:
                    return [
                      2
                      /*return*/
                    ];
                }
              });
            });
          };
          CanvasRenderer2.prototype.renderTextWithLetterSpacing = function(text3, letterSpacing2, baseline) {
            var _this = this;
            if (letterSpacing2 === 0) {
              this.ctx.fillText(text3.text, text3.bounds.left, text3.bounds.top + baseline);
            } else {
              var letters = segmentGraphemes(text3.text);
              letters.reduce(function(left, letter) {
                _this.ctx.fillText(letter, left, text3.bounds.top + baseline);
                return left + _this.ctx.measureText(letter).width;
              }, text3.bounds.left);
            }
          };
          CanvasRenderer2.prototype.createFontStyle = function(styles) {
            var fontVariant2 = styles.fontVariant.filter(function(variant) {
              return variant === "normal" || variant === "small-caps";
            }).join("");
            var fontFamily2 = fixIOSSystemFonts(styles.fontFamily).join(", ");
            var fontSize2 = isDimensionToken(styles.fontSize) ? "" + styles.fontSize.number + styles.fontSize.unit : styles.fontSize.number + "px";
            return [
              [styles.fontStyle, fontVariant2, styles.fontWeight, fontSize2, fontFamily2].join(" "),
              fontFamily2,
              fontSize2
            ];
          };
          CanvasRenderer2.prototype.renderTextNode = function(text3, styles) {
            return __awaiter(this, void 0, void 0, function() {
              var _a2, font, fontFamily2, fontSize2, _b2, baseline, middle, paintOrder2;
              var _this = this;
              return __generator(this, function(_c) {
                _a2 = this.createFontStyle(styles), font = _a2[0], fontFamily2 = _a2[1], fontSize2 = _a2[2];
                this.ctx.font = font;
                this.ctx.direction = styles.direction === 1 ? "rtl" : "ltr";
                this.ctx.textAlign = "left";
                this.ctx.textBaseline = "alphabetic";
                _b2 = this.fontMetrics.getMetrics(fontFamily2, fontSize2), baseline = _b2.baseline, middle = _b2.middle;
                paintOrder2 = styles.paintOrder;
                text3.textBounds.forEach(function(text4) {
                  paintOrder2.forEach(function(paintOrderLayer) {
                    switch (paintOrderLayer) {
                      case 0:
                        _this.ctx.fillStyle = asString(styles.color);
                        _this.renderTextWithLetterSpacing(text4, styles.letterSpacing, baseline);
                        var textShadows = styles.textShadow;
                        if (textShadows.length && text4.text.trim().length) {
                          textShadows.slice(0).reverse().forEach(function(textShadow2) {
                            _this.ctx.shadowColor = asString(textShadow2.color);
                            _this.ctx.shadowOffsetX = textShadow2.offsetX.number * _this.options.scale;
                            _this.ctx.shadowOffsetY = textShadow2.offsetY.number * _this.options.scale;
                            _this.ctx.shadowBlur = textShadow2.blur.number;
                            _this.renderTextWithLetterSpacing(text4, styles.letterSpacing, baseline);
                          });
                          _this.ctx.shadowColor = "";
                          _this.ctx.shadowOffsetX = 0;
                          _this.ctx.shadowOffsetY = 0;
                          _this.ctx.shadowBlur = 0;
                        }
                        if (styles.textDecorationLine.length) {
                          _this.ctx.fillStyle = asString(styles.textDecorationColor || styles.color);
                          styles.textDecorationLine.forEach(function(textDecorationLine2) {
                            switch (textDecorationLine2) {
                              case 1:
                                _this.ctx.fillRect(text4.bounds.left, Math.round(text4.bounds.top + baseline), text4.bounds.width, 1);
                                break;
                              case 2:
                                _this.ctx.fillRect(text4.bounds.left, Math.round(text4.bounds.top), text4.bounds.width, 1);
                                break;
                              case 3:
                                _this.ctx.fillRect(text4.bounds.left, Math.ceil(text4.bounds.top + middle), text4.bounds.width, 1);
                                break;
                            }
                          });
                        }
                        break;
                      case 1:
                        if (styles.webkitTextStrokeWidth && text4.text.trim().length) {
                          _this.ctx.strokeStyle = asString(styles.webkitTextStrokeColor);
                          _this.ctx.lineWidth = styles.webkitTextStrokeWidth;
                          _this.ctx.lineJoin = !!window.chrome ? "miter" : "round";
                          _this.ctx.strokeText(text4.text, text4.bounds.left, text4.bounds.top + baseline);
                        }
                        _this.ctx.strokeStyle = "";
                        _this.ctx.lineWidth = 0;
                        _this.ctx.lineJoin = "miter";
                        break;
                    }
                  });
                });
                return [
                  2
                  /*return*/
                ];
              });
            });
          };
          CanvasRenderer2.prototype.renderReplacedElement = function(container, curves, image2) {
            if (image2 && container.intrinsicWidth > 0 && container.intrinsicHeight > 0) {
              var box = contentBox(container);
              var path = calculatePaddingBoxPath(curves);
              this.path(path);
              this.ctx.save();
              this.ctx.clip();
              this.ctx.drawImage(image2, 0, 0, container.intrinsicWidth, container.intrinsicHeight, box.left, box.top, box.width, box.height);
              this.ctx.restore();
            }
          };
          CanvasRenderer2.prototype.renderNodeContent = function(paint) {
            return __awaiter(this, void 0, void 0, function() {
              var container, curves, styles, _i, _a2, child, image2, image2, iframeRenderer, canvas, size, _b2, fontFamily2, fontSize2, baseline, bounds, x22, textBounds, img, image2, url, fontFamily2, bounds;
              return __generator(this, function(_c) {
                switch (_c.label) {
                  case 0:
                    this.applyEffects(paint.getEffects(
                      4
                      /* CONTENT */
                    ));
                    container = paint.container;
                    curves = paint.curves;
                    styles = container.styles;
                    _i = 0, _a2 = container.textNodes;
                    _c.label = 1;
                  case 1:
                    if (!(_i < _a2.length)) return [3, 4];
                    child = _a2[_i];
                    return [4, this.renderTextNode(child, styles)];
                  case 2:
                    _c.sent();
                    _c.label = 3;
                  case 3:
                    _i++;
                    return [3, 1];
                  case 4:
                    if (!(container instanceof ImageElementContainer)) return [3, 8];
                    _c.label = 5;
                  case 5:
                    _c.trys.push([5, 7, , 8]);
                    return [4, this.context.cache.match(container.src)];
                  case 6:
                    image2 = _c.sent();
                    this.renderReplacedElement(container, curves, image2);
                    return [3, 8];
                  case 7:
                    _c.sent();
                    this.context.logger.error("Error loading image " + container.src);
                    return [3, 8];
                  case 8:
                    if (container instanceof CanvasElementContainer) {
                      this.renderReplacedElement(container, curves, container.canvas);
                    }
                    if (!(container instanceof SVGElementContainer)) return [3, 12];
                    _c.label = 9;
                  case 9:
                    _c.trys.push([9, 11, , 12]);
                    return [4, this.context.cache.match(container.svg)];
                  case 10:
                    image2 = _c.sent();
                    this.renderReplacedElement(container, curves, image2);
                    return [3, 12];
                  case 11:
                    _c.sent();
                    this.context.logger.error("Error loading svg " + container.svg.substring(0, 255));
                    return [3, 12];
                  case 12:
                    if (!(container instanceof IFrameElementContainer && container.tree)) return [3, 14];
                    iframeRenderer = new CanvasRenderer2(this.context, {
                      scale: this.options.scale,
                      backgroundColor: container.backgroundColor,
                      x: 0,
                      y: 0,
                      width: container.width,
                      height: container.height
                    });
                    return [4, iframeRenderer.render(container.tree)];
                  case 13:
                    canvas = _c.sent();
                    if (container.width && container.height) {
                      this.ctx.drawImage(canvas, 0, 0, container.width, container.height, container.bounds.left, container.bounds.top, container.bounds.width, container.bounds.height);
                    }
                    _c.label = 14;
                  case 14:
                    if (container instanceof InputElementContainer) {
                      size = Math.min(container.bounds.width, container.bounds.height);
                      if (container.type === CHECKBOX) {
                        if (container.checked) {
                          this.ctx.save();
                          this.path([
                            new Vector(container.bounds.left + size * 0.39363, container.bounds.top + size * 0.79),
                            new Vector(container.bounds.left + size * 0.16, container.bounds.top + size * 0.5549),
                            new Vector(container.bounds.left + size * 0.27347, container.bounds.top + size * 0.44071),
                            new Vector(container.bounds.left + size * 0.39694, container.bounds.top + size * 0.5649),
                            new Vector(container.bounds.left + size * 0.72983, container.bounds.top + size * 0.23),
                            new Vector(container.bounds.left + size * 0.84, container.bounds.top + size * 0.34085),
                            new Vector(container.bounds.left + size * 0.39363, container.bounds.top + size * 0.79)
                          ]);
                          this.ctx.fillStyle = asString(INPUT_COLOR);
                          this.ctx.fill();
                          this.ctx.restore();
                        }
                      } else if (container.type === RADIO) {
                        if (container.checked) {
                          this.ctx.save();
                          this.ctx.beginPath();
                          this.ctx.arc(container.bounds.left + size / 2, container.bounds.top + size / 2, size / 4, 0, Math.PI * 2, true);
                          this.ctx.fillStyle = asString(INPUT_COLOR);
                          this.ctx.fill();
                          this.ctx.restore();
                        }
                      }
                    }
                    if (isTextInputElement(container) && container.value.length) {
                      _b2 = this.createFontStyle(styles), fontFamily2 = _b2[0], fontSize2 = _b2[1];
                      baseline = this.fontMetrics.getMetrics(fontFamily2, fontSize2).baseline;
                      this.ctx.font = fontFamily2;
                      this.ctx.fillStyle = asString(styles.color);
                      this.ctx.textBaseline = "alphabetic";
                      this.ctx.textAlign = canvasTextAlign(container.styles.textAlign);
                      bounds = contentBox(container);
                      x22 = 0;
                      switch (container.styles.textAlign) {
                        case 1:
                          x22 += bounds.width / 2;
                          break;
                        case 2:
                          x22 += bounds.width;
                          break;
                      }
                      textBounds = bounds.add(x22, 0, 0, -bounds.height / 2 + 1);
                      this.ctx.save();
                      this.path([
                        new Vector(bounds.left, bounds.top),
                        new Vector(bounds.left + bounds.width, bounds.top),
                        new Vector(bounds.left + bounds.width, bounds.top + bounds.height),
                        new Vector(bounds.left, bounds.top + bounds.height)
                      ]);
                      this.ctx.clip();
                      this.renderTextWithLetterSpacing(new TextBounds(container.value, textBounds), styles.letterSpacing, baseline);
                      this.ctx.restore();
                      this.ctx.textBaseline = "alphabetic";
                      this.ctx.textAlign = "left";
                    }
                    if (!contains(
                      container.styles.display,
                      2048
                      /* LIST_ITEM */
                    )) return [3, 20];
                    if (!(container.styles.listStyleImage !== null)) return [3, 19];
                    img = container.styles.listStyleImage;
                    if (!(img.type === 0)) return [3, 18];
                    image2 = void 0;
                    url = img.url;
                    _c.label = 15;
                  case 15:
                    _c.trys.push([15, 17, , 18]);
                    return [4, this.context.cache.match(url)];
                  case 16:
                    image2 = _c.sent();
                    this.ctx.drawImage(image2, container.bounds.left - (image2.width + 10), container.bounds.top);
                    return [3, 18];
                  case 17:
                    _c.sent();
                    this.context.logger.error("Error loading list-style-image " + url);
                    return [3, 18];
                  case 18:
                    return [3, 20];
                  case 19:
                    if (paint.listValue && container.styles.listStyleType !== -1) {
                      fontFamily2 = this.createFontStyle(styles)[0];
                      this.ctx.font = fontFamily2;
                      this.ctx.fillStyle = asString(styles.color);
                      this.ctx.textBaseline = "middle";
                      this.ctx.textAlign = "right";
                      bounds = new Bounds(container.bounds.left, container.bounds.top + getAbsoluteValue(container.styles.paddingTop, container.bounds.width), container.bounds.width, computeLineHeight(styles.lineHeight, styles.fontSize.number) / 2 + 1);
                      this.renderTextWithLetterSpacing(new TextBounds(paint.listValue, bounds), styles.letterSpacing, computeLineHeight(styles.lineHeight, styles.fontSize.number) / 2 + 2);
                      this.ctx.textBaseline = "bottom";
                      this.ctx.textAlign = "left";
                    }
                    _c.label = 20;
                  case 20:
                    return [
                      2
                      /*return*/
                    ];
                }
              });
            });
          };
          CanvasRenderer2.prototype.renderStackContent = function(stack) {
            return __awaiter(this, void 0, void 0, function() {
              var _i, _a2, child, _b2, _c, child, _d, _e, child, _f, _g, child, _h, _j, child, _k, _l, child, _m, _o, child;
              return __generator(this, function(_p) {
                switch (_p.label) {
                  case 0:
                    if (contains(
                      stack.element.container.flags,
                      16
                      /* DEBUG_RENDER */
                    )) {
                      debugger;
                    }
                    return [4, this.renderNodeBackgroundAndBorders(stack.element)];
                  case 1:
                    _p.sent();
                    _i = 0, _a2 = stack.negativeZIndex;
                    _p.label = 2;
                  case 2:
                    if (!(_i < _a2.length)) return [3, 5];
                    child = _a2[_i];
                    return [4, this.renderStack(child)];
                  case 3:
                    _p.sent();
                    _p.label = 4;
                  case 4:
                    _i++;
                    return [3, 2];
                  case 5:
                    return [4, this.renderNodeContent(stack.element)];
                  case 6:
                    _p.sent();
                    _b2 = 0, _c = stack.nonInlineLevel;
                    _p.label = 7;
                  case 7:
                    if (!(_b2 < _c.length)) return [3, 10];
                    child = _c[_b2];
                    return [4, this.renderNode(child)];
                  case 8:
                    _p.sent();
                    _p.label = 9;
                  case 9:
                    _b2++;
                    return [3, 7];
                  case 10:
                    _d = 0, _e = stack.nonPositionedFloats;
                    _p.label = 11;
                  case 11:
                    if (!(_d < _e.length)) return [3, 14];
                    child = _e[_d];
                    return [4, this.renderStack(child)];
                  case 12:
                    _p.sent();
                    _p.label = 13;
                  case 13:
                    _d++;
                    return [3, 11];
                  case 14:
                    _f = 0, _g = stack.nonPositionedInlineLevel;
                    _p.label = 15;
                  case 15:
                    if (!(_f < _g.length)) return [3, 18];
                    child = _g[_f];
                    return [4, this.renderStack(child)];
                  case 16:
                    _p.sent();
                    _p.label = 17;
                  case 17:
                    _f++;
                    return [3, 15];
                  case 18:
                    _h = 0, _j = stack.inlineLevel;
                    _p.label = 19;
                  case 19:
                    if (!(_h < _j.length)) return [3, 22];
                    child = _j[_h];
                    return [4, this.renderNode(child)];
                  case 20:
                    _p.sent();
                    _p.label = 21;
                  case 21:
                    _h++;
                    return [3, 19];
                  case 22:
                    _k = 0, _l = stack.zeroOrAutoZIndexOrTransformedOrOpacity;
                    _p.label = 23;
                  case 23:
                    if (!(_k < _l.length)) return [3, 26];
                    child = _l[_k];
                    return [4, this.renderStack(child)];
                  case 24:
                    _p.sent();
                    _p.label = 25;
                  case 25:
                    _k++;
                    return [3, 23];
                  case 26:
                    _m = 0, _o = stack.positiveZIndex;
                    _p.label = 27;
                  case 27:
                    if (!(_m < _o.length)) return [3, 30];
                    child = _o[_m];
                    return [4, this.renderStack(child)];
                  case 28:
                    _p.sent();
                    _p.label = 29;
                  case 29:
                    _m++;
                    return [3, 27];
                  case 30:
                    return [
                      2
                      /*return*/
                    ];
                }
              });
            });
          };
          CanvasRenderer2.prototype.mask = function(paths) {
            this.ctx.beginPath();
            this.ctx.moveTo(0, 0);
            this.ctx.lineTo(this.canvas.width, 0);
            this.ctx.lineTo(this.canvas.width, this.canvas.height);
            this.ctx.lineTo(0, this.canvas.height);
            this.ctx.lineTo(0, 0);
            this.formatPath(paths.slice(0).reverse());
            this.ctx.closePath();
          };
          CanvasRenderer2.prototype.path = function(paths) {
            this.ctx.beginPath();
            this.formatPath(paths);
            this.ctx.closePath();
          };
          CanvasRenderer2.prototype.formatPath = function(paths) {
            var _this = this;
            paths.forEach(function(point, index2) {
              var start = isBezierCurve(point) ? point.start : point;
              if (index2 === 0) {
                _this.ctx.moveTo(start.x, start.y);
              } else {
                _this.ctx.lineTo(start.x, start.y);
              }
              if (isBezierCurve(point)) {
                _this.ctx.bezierCurveTo(point.startControl.x, point.startControl.y, point.endControl.x, point.endControl.y, point.end.x, point.end.y);
              }
            });
          };
          CanvasRenderer2.prototype.renderRepeat = function(path, pattern, offsetX, offsetY) {
            this.path(path);
            this.ctx.fillStyle = pattern;
            this.ctx.translate(offsetX, offsetY);
            this.ctx.fill();
            this.ctx.translate(-offsetX, -offsetY);
          };
          CanvasRenderer2.prototype.resizeImage = function(image2, width, height) {
            var _a2;
            if (image2.width === width && image2.height === height) {
              return image2;
            }
            var ownerDocument = (_a2 = this.canvas.ownerDocument) !== null && _a2 !== void 0 ? _a2 : document;
            var canvas = ownerDocument.createElement("canvas");
            canvas.width = Math.max(1, width);
            canvas.height = Math.max(1, height);
            var ctx = canvas.getContext("2d");
            ctx.drawImage(image2, 0, 0, image2.width, image2.height, 0, 0, width, height);
            return canvas;
          };
          CanvasRenderer2.prototype.renderBackgroundImage = function(container) {
            return __awaiter(this, void 0, void 0, function() {
              var index2, _loop_1, this_1, _i, _a2, backgroundImage2;
              return __generator(this, function(_b2) {
                switch (_b2.label) {
                  case 0:
                    index2 = container.styles.backgroundImage.length - 1;
                    _loop_1 = /* @__PURE__ */ __name2(function(backgroundImage3) {
                      var image2, url, _c, path, x22, y3, width, height, pattern, _d, path, x22, y3, width, height, _e, lineLength, x0, x1, y0, y1, canvas, ctx, gradient_1, pattern, _f, path, left, top_1, width, height, position2, x22, y3, _g, rx, ry, radialGradient_1, midX, midY, f4, invF;
                      return __generator(this, function(_h) {
                        switch (_h.label) {
                          case 0:
                            if (!(backgroundImage3.type === 0)) return [3, 5];
                            image2 = void 0;
                            url = backgroundImage3.url;
                            _h.label = 1;
                          case 1:
                            _h.trys.push([1, 3, , 4]);
                            return [4, this_1.context.cache.match(url)];
                          case 2:
                            image2 = _h.sent();
                            return [3, 4];
                          case 3:
                            _h.sent();
                            this_1.context.logger.error("Error loading background-image " + url);
                            return [3, 4];
                          case 4:
                            if (image2) {
                              _c = calculateBackgroundRendering(container, index2, [
                                image2.width,
                                image2.height,
                                image2.width / image2.height
                              ]), path = _c[0], x22 = _c[1], y3 = _c[2], width = _c[3], height = _c[4];
                              pattern = this_1.ctx.createPattern(this_1.resizeImage(image2, width, height), "repeat");
                              this_1.renderRepeat(path, pattern, x22, y3);
                            }
                            return [3, 6];
                          case 5:
                            if (isLinearGradient(backgroundImage3)) {
                              _d = calculateBackgroundRendering(container, index2, [null, null, null]), path = _d[0], x22 = _d[1], y3 = _d[2], width = _d[3], height = _d[4];
                              _e = calculateGradientDirection(backgroundImage3.angle, width, height), lineLength = _e[0], x0 = _e[1], x1 = _e[2], y0 = _e[3], y1 = _e[4];
                              canvas = document.createElement("canvas");
                              canvas.width = width;
                              canvas.height = height;
                              ctx = canvas.getContext("2d");
                              gradient_1 = ctx.createLinearGradient(x0, y0, x1, y1);
                              processColorStops(backgroundImage3.stops, lineLength).forEach(function(colorStop) {
                                return gradient_1.addColorStop(colorStop.stop, asString(colorStop.color));
                              });
                              ctx.fillStyle = gradient_1;
                              ctx.fillRect(0, 0, width, height);
                              if (width > 0 && height > 0) {
                                pattern = this_1.ctx.createPattern(canvas, "repeat");
                                this_1.renderRepeat(path, pattern, x22, y3);
                              }
                            } else if (isRadialGradient(backgroundImage3)) {
                              _f = calculateBackgroundRendering(container, index2, [
                                null,
                                null,
                                null
                              ]), path = _f[0], left = _f[1], top_1 = _f[2], width = _f[3], height = _f[4];
                              position2 = backgroundImage3.position.length === 0 ? [FIFTY_PERCENT] : backgroundImage3.position;
                              x22 = getAbsoluteValue(position2[0], width);
                              y3 = getAbsoluteValue(position2[position2.length - 1], height);
                              _g = calculateRadius(backgroundImage3, x22, y3, width, height), rx = _g[0], ry = _g[1];
                              if (rx > 0 && ry > 0) {
                                radialGradient_1 = this_1.ctx.createRadialGradient(left + x22, top_1 + y3, 0, left + x22, top_1 + y3, rx);
                                processColorStops(backgroundImage3.stops, rx * 2).forEach(function(colorStop) {
                                  return radialGradient_1.addColorStop(colorStop.stop, asString(colorStop.color));
                                });
                                this_1.path(path);
                                this_1.ctx.fillStyle = radialGradient_1;
                                if (rx !== ry) {
                                  midX = container.bounds.left + 0.5 * container.bounds.width;
                                  midY = container.bounds.top + 0.5 * container.bounds.height;
                                  f4 = ry / rx;
                                  invF = 1 / f4;
                                  this_1.ctx.save();
                                  this_1.ctx.translate(midX, midY);
                                  this_1.ctx.transform(1, 0, 0, f4, 0, 0);
                                  this_1.ctx.translate(-midX, -midY);
                                  this_1.ctx.fillRect(left, invF * (top_1 - midY) + midY, width, height * invF);
                                  this_1.ctx.restore();
                                } else {
                                  this_1.ctx.fill();
                                }
                              }
                            }
                            _h.label = 6;
                          case 6:
                            index2--;
                            return [
                              2
                              /*return*/
                            ];
                        }
                      });
                    }, "_loop_1");
                    this_1 = this;
                    _i = 0, _a2 = container.styles.backgroundImage.slice(0).reverse();
                    _b2.label = 1;
                  case 1:
                    if (!(_i < _a2.length)) return [3, 4];
                    backgroundImage2 = _a2[_i];
                    return [5, _loop_1(backgroundImage2)];
                  case 2:
                    _b2.sent();
                    _b2.label = 3;
                  case 3:
                    _i++;
                    return [3, 1];
                  case 4:
                    return [
                      2
                      /*return*/
                    ];
                }
              });
            });
          };
          CanvasRenderer2.prototype.renderSolidBorder = function(color2, side, curvePoints) {
            return __awaiter(this, void 0, void 0, function() {
              return __generator(this, function(_a2) {
                this.path(parsePathForBorder(curvePoints, side));
                this.ctx.fillStyle = asString(color2);
                this.ctx.fill();
                return [
                  2
                  /*return*/
                ];
              });
            });
          };
          CanvasRenderer2.prototype.renderDoubleBorder = function(color2, width, side, curvePoints) {
            return __awaiter(this, void 0, void 0, function() {
              var outerPaths, innerPaths;
              return __generator(this, function(_a2) {
                switch (_a2.label) {
                  case 0:
                    if (!(width < 3)) return [3, 2];
                    return [4, this.renderSolidBorder(color2, side, curvePoints)];
                  case 1:
                    _a2.sent();
                    return [
                      2
                      /*return*/
                    ];
                  case 2:
                    outerPaths = parsePathForBorderDoubleOuter(curvePoints, side);
                    this.path(outerPaths);
                    this.ctx.fillStyle = asString(color2);
                    this.ctx.fill();
                    innerPaths = parsePathForBorderDoubleInner(curvePoints, side);
                    this.path(innerPaths);
                    this.ctx.fill();
                    return [
                      2
                      /*return*/
                    ];
                }
              });
            });
          };
          CanvasRenderer2.prototype.renderNodeBackgroundAndBorders = function(paint) {
            return __awaiter(this, void 0, void 0, function() {
              var styles, hasBackground, borders, backgroundPaintingArea, side, _i, borders_1, border;
              var _this = this;
              return __generator(this, function(_a2) {
                switch (_a2.label) {
                  case 0:
                    this.applyEffects(paint.getEffects(
                      2
                      /* BACKGROUND_BORDERS */
                    ));
                    styles = paint.container.styles;
                    hasBackground = !isTransparent(styles.backgroundColor) || styles.backgroundImage.length;
                    borders = [
                      { style: styles.borderTopStyle, color: styles.borderTopColor, width: styles.borderTopWidth },
                      { style: styles.borderRightStyle, color: styles.borderRightColor, width: styles.borderRightWidth },
                      { style: styles.borderBottomStyle, color: styles.borderBottomColor, width: styles.borderBottomWidth },
                      { style: styles.borderLeftStyle, color: styles.borderLeftColor, width: styles.borderLeftWidth }
                    ];
                    backgroundPaintingArea = calculateBackgroundCurvedPaintingArea(getBackgroundValueForIndex(styles.backgroundClip, 0), paint.curves);
                    if (!(hasBackground || styles.boxShadow.length)) return [3, 2];
                    this.ctx.save();
                    this.path(backgroundPaintingArea);
                    this.ctx.clip();
                    if (!isTransparent(styles.backgroundColor)) {
                      this.ctx.fillStyle = asString(styles.backgroundColor);
                      this.ctx.fill();
                    }
                    return [4, this.renderBackgroundImage(paint.container)];
                  case 1:
                    _a2.sent();
                    this.ctx.restore();
                    styles.boxShadow.slice(0).reverse().forEach(function(shadow) {
                      _this.ctx.save();
                      var borderBoxArea = calculateBorderBoxPath(paint.curves);
                      var maskOffset = shadow.inset ? 0 : MASK_OFFSET;
                      var shadowPaintingArea = transformPath(borderBoxArea, -maskOffset + (shadow.inset ? 1 : -1) * shadow.spread.number, (shadow.inset ? 1 : -1) * shadow.spread.number, shadow.spread.number * (shadow.inset ? -2 : 2), shadow.spread.number * (shadow.inset ? -2 : 2));
                      if (shadow.inset) {
                        _this.path(borderBoxArea);
                        _this.ctx.clip();
                        _this.mask(shadowPaintingArea);
                      } else {
                        _this.mask(borderBoxArea);
                        _this.ctx.clip();
                        _this.path(shadowPaintingArea);
                      }
                      _this.ctx.shadowOffsetX = shadow.offsetX.number + maskOffset;
                      _this.ctx.shadowOffsetY = shadow.offsetY.number;
                      _this.ctx.shadowColor = asString(shadow.color);
                      _this.ctx.shadowBlur = shadow.blur.number;
                      _this.ctx.fillStyle = shadow.inset ? asString(shadow.color) : "rgba(0,0,0,1)";
                      _this.ctx.fill();
                      _this.ctx.restore();
                    });
                    _a2.label = 2;
                  case 2:
                    side = 0;
                    _i = 0, borders_1 = borders;
                    _a2.label = 3;
                  case 3:
                    if (!(_i < borders_1.length)) return [3, 13];
                    border = borders_1[_i];
                    if (!(border.style !== 0 && !isTransparent(border.color) && border.width > 0)) return [3, 11];
                    if (!(border.style === 2)) return [3, 5];
                    return [4, this.renderDashedDottedBorder(
                      border.color,
                      border.width,
                      side,
                      paint.curves,
                      2
                      /* DASHED */
                    )];
                  case 4:
                    _a2.sent();
                    return [3, 11];
                  case 5:
                    if (!(border.style === 3)) return [3, 7];
                    return [4, this.renderDashedDottedBorder(
                      border.color,
                      border.width,
                      side,
                      paint.curves,
                      3
                      /* DOTTED */
                    )];
                  case 6:
                    _a2.sent();
                    return [3, 11];
                  case 7:
                    if (!(border.style === 4)) return [3, 9];
                    return [4, this.renderDoubleBorder(border.color, border.width, side, paint.curves)];
                  case 8:
                    _a2.sent();
                    return [3, 11];
                  case 9:
                    return [4, this.renderSolidBorder(border.color, side, paint.curves)];
                  case 10:
                    _a2.sent();
                    _a2.label = 11;
                  case 11:
                    side++;
                    _a2.label = 12;
                  case 12:
                    _i++;
                    return [3, 3];
                  case 13:
                    return [
                      2
                      /*return*/
                    ];
                }
              });
            });
          };
          CanvasRenderer2.prototype.renderDashedDottedBorder = function(color2, width, side, curvePoints, style) {
            return __awaiter(this, void 0, void 0, function() {
              var strokePaths, boxPaths, startX, startY, endX, endY, length, dashLength, spaceLength, useLineDash, multiplier, numberOfDashes, minSpace, maxSpace, path1, path2, path1, path2;
              return __generator(this, function(_a2) {
                this.ctx.save();
                strokePaths = parsePathForBorderStroke(curvePoints, side);
                boxPaths = parsePathForBorder(curvePoints, side);
                if (style === 2) {
                  this.path(boxPaths);
                  this.ctx.clip();
                }
                if (isBezierCurve(boxPaths[0])) {
                  startX = boxPaths[0].start.x;
                  startY = boxPaths[0].start.y;
                } else {
                  startX = boxPaths[0].x;
                  startY = boxPaths[0].y;
                }
                if (isBezierCurve(boxPaths[1])) {
                  endX = boxPaths[1].end.x;
                  endY = boxPaths[1].end.y;
                } else {
                  endX = boxPaths[1].x;
                  endY = boxPaths[1].y;
                }
                if (side === 0 || side === 2) {
                  length = Math.abs(startX - endX);
                } else {
                  length = Math.abs(startY - endY);
                }
                this.ctx.beginPath();
                if (style === 3) {
                  this.formatPath(strokePaths);
                } else {
                  this.formatPath(boxPaths.slice(0, 2));
                }
                dashLength = width < 3 ? width * 3 : width * 2;
                spaceLength = width < 3 ? width * 2 : width;
                if (style === 3) {
                  dashLength = width;
                  spaceLength = width;
                }
                useLineDash = true;
                if (length <= dashLength * 2) {
                  useLineDash = false;
                } else if (length <= dashLength * 2 + spaceLength) {
                  multiplier = length / (2 * dashLength + spaceLength);
                  dashLength *= multiplier;
                  spaceLength *= multiplier;
                } else {
                  numberOfDashes = Math.floor((length + spaceLength) / (dashLength + spaceLength));
                  minSpace = (length - numberOfDashes * dashLength) / (numberOfDashes - 1);
                  maxSpace = (length - (numberOfDashes + 1) * dashLength) / numberOfDashes;
                  spaceLength = maxSpace <= 0 || Math.abs(spaceLength - minSpace) < Math.abs(spaceLength - maxSpace) ? minSpace : maxSpace;
                }
                if (useLineDash) {
                  if (style === 3) {
                    this.ctx.setLineDash([0, dashLength + spaceLength]);
                  } else {
                    this.ctx.setLineDash([dashLength, spaceLength]);
                  }
                }
                if (style === 3) {
                  this.ctx.lineCap = "round";
                  this.ctx.lineWidth = width;
                } else {
                  this.ctx.lineWidth = width * 2 + 1.1;
                }
                this.ctx.strokeStyle = asString(color2);
                this.ctx.stroke();
                this.ctx.setLineDash([]);
                if (style === 2) {
                  if (isBezierCurve(boxPaths[0])) {
                    path1 = boxPaths[3];
                    path2 = boxPaths[0];
                    this.ctx.beginPath();
                    this.formatPath([new Vector(path1.end.x, path1.end.y), new Vector(path2.start.x, path2.start.y)]);
                    this.ctx.stroke();
                  }
                  if (isBezierCurve(boxPaths[1])) {
                    path1 = boxPaths[1];
                    path2 = boxPaths[2];
                    this.ctx.beginPath();
                    this.formatPath([new Vector(path1.end.x, path1.end.y), new Vector(path2.start.x, path2.start.y)]);
                    this.ctx.stroke();
                  }
                }
                this.ctx.restore();
                return [
                  2
                  /*return*/
                ];
              });
            });
          };
          CanvasRenderer2.prototype.render = function(element) {
            return __awaiter(this, void 0, void 0, function() {
              var stack;
              return __generator(this, function(_a2) {
                switch (_a2.label) {
                  case 0:
                    if (this.options.backgroundColor) {
                      this.ctx.fillStyle = asString(this.options.backgroundColor);
                      this.ctx.fillRect(this.options.x, this.options.y, this.options.width, this.options.height);
                    }
                    stack = parseStackingContexts(element);
                    return [4, this.renderStack(stack)];
                  case 1:
                    _a2.sent();
                    this.applyEffects([]);
                    return [2, this.canvas];
                }
              });
            });
          };
          return CanvasRenderer2;
        }(Renderer)
      );
      var isTextInputElement = /* @__PURE__ */ __name2(function(container) {
        if (container instanceof TextareaElementContainer) {
          return true;
        } else if (container instanceof SelectElementContainer) {
          return true;
        } else if (container instanceof InputElementContainer && container.type !== RADIO && container.type !== CHECKBOX) {
          return true;
        }
        return false;
      }, "isTextInputElement");
      var calculateBackgroundCurvedPaintingArea = /* @__PURE__ */ __name2(function(clip, curves) {
        switch (clip) {
          case 0:
            return calculateBorderBoxPath(curves);
          case 2:
            return calculateContentBoxPath(curves);
          case 1:
          default:
            return calculatePaddingBoxPath(curves);
        }
      }, "calculateBackgroundCurvedPaintingArea");
      var canvasTextAlign = /* @__PURE__ */ __name2(function(textAlign2) {
        switch (textAlign2) {
          case 1:
            return "center";
          case 2:
            return "right";
          case 0:
          default:
            return "left";
        }
      }, "canvasTextAlign");
      var iOSBrokenFonts = ["-apple-system", "system-ui"];
      var fixIOSSystemFonts = /* @__PURE__ */ __name2(function(fontFamilies) {
        return /iPhone OS 15_(0|1)/.test(window.navigator.userAgent) ? fontFamilies.filter(function(fontFamily2) {
          return iOSBrokenFonts.indexOf(fontFamily2) === -1;
        }) : fontFamilies;
      }, "fixIOSSystemFonts");
      var ForeignObjectRenderer = (
        /** @class */
        function(_super) {
          __extends(ForeignObjectRenderer2, _super);
          function ForeignObjectRenderer2(context, options) {
            var _this = _super.call(this, context, options) || this;
            _this.canvas = options.canvas ? options.canvas : document.createElement("canvas");
            _this.ctx = _this.canvas.getContext("2d");
            _this.options = options;
            _this.canvas.width = Math.floor(options.width * options.scale);
            _this.canvas.height = Math.floor(options.height * options.scale);
            _this.canvas.style.width = options.width + "px";
            _this.canvas.style.height = options.height + "px";
            _this.ctx.scale(_this.options.scale, _this.options.scale);
            _this.ctx.translate(-options.x, -options.y);
            _this.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized (" + options.width + "x" + options.height + " at " + options.x + "," + options.y + ") with scale " + options.scale);
            return _this;
          }
          __name(ForeignObjectRenderer2, "ForeignObjectRenderer2");
          __name2(ForeignObjectRenderer2, "ForeignObjectRenderer");
          ForeignObjectRenderer2.prototype.render = function(element) {
            return __awaiter(this, void 0, void 0, function() {
              var svg2, img;
              return __generator(this, function(_a2) {
                switch (_a2.label) {
                  case 0:
                    svg2 = createForeignObjectSVG(this.options.width * this.options.scale, this.options.height * this.options.scale, this.options.scale, this.options.scale, element);
                    return [4, loadSerializedSVG(svg2)];
                  case 1:
                    img = _a2.sent();
                    if (this.options.backgroundColor) {
                      this.ctx.fillStyle = asString(this.options.backgroundColor);
                      this.ctx.fillRect(0, 0, this.options.width * this.options.scale, this.options.height * this.options.scale);
                    }
                    this.ctx.drawImage(img, -this.options.x * this.options.scale, -this.options.y * this.options.scale);
                    return [2, this.canvas];
                }
              });
            });
          };
          return ForeignObjectRenderer2;
        }(Renderer)
      );
      var loadSerializedSVG = /* @__PURE__ */ __name2(function(svg2) {
        return new Promise(function(resolve, reject) {
          var img = new Image();
          img.onload = function() {
            resolve(img);
          };
          img.onerror = reject;
          img.src = "data:image/svg+xml;charset=utf-8," + encodeURIComponent(new XMLSerializer().serializeToString(svg2));
        });
      }, "loadSerializedSVG");
      var Logger = (
        /** @class */
        function() {
          function Logger2(_a2) {
            var id = _a2.id, enabled = _a2.enabled;
            this.id = id;
            this.enabled = enabled;
            this.start = Date.now();
          }
          __name(Logger2, "Logger2");
          __name2(Logger2, "Logger");
          Logger2.prototype.debug = function() {
            var args = [];
            for (var _i = 0; _i < arguments.length; _i++) {
              args[_i] = arguments[_i];
            }
            if (this.enabled) {
              if (typeof window !== "undefined" && window.console && typeof console.debug === "function") {
                console.debug.apply(console, __spreadArray([this.id, this.getTime() + "ms"], args));
              } else {
                this.info.apply(this, args);
              }
            }
          };
          Logger2.prototype.getTime = function() {
            return Date.now() - this.start;
          };
          Logger2.prototype.info = function() {
            var args = [];
            for (var _i = 0; _i < arguments.length; _i++) {
              args[_i] = arguments[_i];
            }
            if (this.enabled) {
              if (typeof window !== "undefined" && window.console && typeof console.info === "function") {
                console.info.apply(console, __spreadArray([this.id, this.getTime() + "ms"], args));
              }
            }
          };
          Logger2.prototype.warn = function() {
            var args = [];
            for (var _i = 0; _i < arguments.length; _i++) {
              args[_i] = arguments[_i];
            }
            if (this.enabled) {
              if (typeof window !== "undefined" && window.console && typeof console.warn === "function") {
                console.warn.apply(console, __spreadArray([this.id, this.getTime() + "ms"], args));
              } else {
                this.info.apply(this, args);
              }
            }
          };
          Logger2.prototype.error = function() {
            var args = [];
            for (var _i = 0; _i < arguments.length; _i++) {
              args[_i] = arguments[_i];
            }
            if (this.enabled) {
              if (typeof window !== "undefined" && window.console && typeof console.error === "function") {
                console.error.apply(console, __spreadArray([this.id, this.getTime() + "ms"], args));
              } else {
                this.info.apply(this, args);
              }
            }
          };
          Logger2.instances = {};
          return Logger2;
        }()
      );
      var Context = (
        /** @class */
        function() {
          function Context2(options, windowBounds) {
            var _a2;
            this.windowBounds = windowBounds;
            this.instanceName = "#" + Context2.instanceCount++;
            this.logger = new Logger({ id: this.instanceName, enabled: options.logging });
            this.cache = (_a2 = options.cache) !== null && _a2 !== void 0 ? _a2 : new Cache(this, options);
          }
          __name(Context2, "Context2");
          __name2(Context2, "Context");
          Context2.instanceCount = 1;
          return Context2;
        }()
      );
      var html2canvas = /* @__PURE__ */ __name2(function(element, options) {
        if (options === void 0) {
          options = {};
        }
        return renderElement(element, options);
      }, "html2canvas");
      if (typeof window !== "undefined") {
        CacheStorage.setContext(window);
      }
      var renderElement = /* @__PURE__ */ __name2(function(element, opts) {
        return __awaiter(void 0, void 0, void 0, function() {
          var ownerDocument, defaultView, resourceOptions, contextOptions, windowOptions, windowBounds, context, foreignObjectRendering, cloneOptions, documentCloner, clonedElement, container, _a2, width, height, left, top, backgroundColor2, renderOptions, canvas, renderer, root, renderer;
          var _b2, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q, _r, _s, _t2;
          return __generator(this, function(_u) {
            switch (_u.label) {
              case 0:
                if (!element || typeof element !== "object") {
                  return [2, Promise.reject("Invalid element provided as first argument")];
                }
                ownerDocument = element.ownerDocument;
                if (!ownerDocument) {
                  throw new Error("Element is not attached to a Document");
                }
                defaultView = ownerDocument.defaultView;
                if (!defaultView) {
                  throw new Error("Document is not attached to a Window");
                }
                resourceOptions = {
                  allowTaint: (_b2 = opts.allowTaint) !== null && _b2 !== void 0 ? _b2 : false,
                  imageTimeout: (_c = opts.imageTimeout) !== null && _c !== void 0 ? _c : 15e3,
                  proxy: opts.proxy,
                  useCORS: (_d = opts.useCORS) !== null && _d !== void 0 ? _d : false
                };
                contextOptions = __assign({ logging: (_e = opts.logging) !== null && _e !== void 0 ? _e : true, cache: opts.cache }, resourceOptions);
                windowOptions = {
                  windowWidth: (_f = opts.windowWidth) !== null && _f !== void 0 ? _f : defaultView.innerWidth,
                  windowHeight: (_g = opts.windowHeight) !== null && _g !== void 0 ? _g : defaultView.innerHeight,
                  scrollX: (_h = opts.scrollX) !== null && _h !== void 0 ? _h : defaultView.pageXOffset,
                  scrollY: (_j = opts.scrollY) !== null && _j !== void 0 ? _j : defaultView.pageYOffset
                };
                windowBounds = new Bounds(windowOptions.scrollX, windowOptions.scrollY, windowOptions.windowWidth, windowOptions.windowHeight);
                context = new Context(contextOptions, windowBounds);
                foreignObjectRendering = (_k = opts.foreignObjectRendering) !== null && _k !== void 0 ? _k : false;
                cloneOptions = {
                  allowTaint: (_l = opts.allowTaint) !== null && _l !== void 0 ? _l : false,
                  onclone: opts.onclone,
                  ignoreElements: opts.ignoreElements,
                  inlineImages: foreignObjectRendering,
                  copyStyles: foreignObjectRendering
                };
                context.logger.debug("Starting document clone with size " + windowBounds.width + "x" + windowBounds.height + " scrolled to " + -windowBounds.left + "," + -windowBounds.top);
                documentCloner = new DocumentCloner(context, element, cloneOptions);
                clonedElement = documentCloner.clonedReferenceElement;
                if (!clonedElement) {
                  return [2, Promise.reject("Unable to find element in cloned iframe")];
                }
                return [4, documentCloner.toIFrame(ownerDocument, windowBounds)];
              case 1:
                container = _u.sent();
                _a2 = isBodyElement(clonedElement) || isHTMLElement(clonedElement) ? parseDocumentSize(clonedElement.ownerDocument) : parseBounds(context, clonedElement), width = _a2.width, height = _a2.height, left = _a2.left, top = _a2.top;
                backgroundColor2 = parseBackgroundColor(context, clonedElement, opts.backgroundColor);
                renderOptions = {
                  canvas: opts.canvas,
                  backgroundColor: backgroundColor2,
                  scale: (_o = (_m = opts.scale) !== null && _m !== void 0 ? _m : defaultView.devicePixelRatio) !== null && _o !== void 0 ? _o : 1,
                  x: ((_p = opts.x) !== null && _p !== void 0 ? _p : 0) + left,
                  y: ((_q = opts.y) !== null && _q !== void 0 ? _q : 0) + top,
                  width: (_r = opts.width) !== null && _r !== void 0 ? _r : Math.ceil(width),
                  height: (_s = opts.height) !== null && _s !== void 0 ? _s : Math.ceil(height)
                };
                if (!foreignObjectRendering) return [3, 3];
                context.logger.debug("Document cloned, using foreign object rendering");
                renderer = new ForeignObjectRenderer(context, renderOptions);
                return [4, renderer.render(clonedElement)];
              case 2:
                canvas = _u.sent();
                return [3, 5];
              case 3:
                context.logger.debug("Document cloned, element located at " + left + "," + top + " with size " + width + "x" + height + " using computed rendering");
                context.logger.debug("Starting DOM parsing");
                root = parseTree(context, clonedElement);
                if (backgroundColor2 === root.styles.backgroundColor) {
                  root.styles.backgroundColor = COLORS.TRANSPARENT;
                }
                context.logger.debug("Starting renderer for element at " + renderOptions.x + "," + renderOptions.y + " with size " + renderOptions.width + "x" + renderOptions.height);
                renderer = new CanvasRenderer(context, renderOptions);
                return [4, renderer.render(root)];
              case 4:
                canvas = _u.sent();
                _u.label = 5;
              case 5:
                if ((_t2 = opts.removeContainer) !== null && _t2 !== void 0 ? _t2 : true) {
                  if (!DocumentCloner.destroy(container)) {
                    context.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore");
                  }
                }
                context.logger.debug("Finished rendering");
                return [2, canvas];
            }
          });
        });
      }, "renderElement");
      var parseBackgroundColor = /* @__PURE__ */ __name2(function(context, element, backgroundColorOverride) {
        var ownerDocument = element.ownerDocument;
        var documentBackgroundColor = ownerDocument.documentElement ? parseColor(context, getComputedStyle(ownerDocument.documentElement).backgroundColor) : COLORS.TRANSPARENT;
        var bodyBackgroundColor = ownerDocument.body ? parseColor(context, getComputedStyle(ownerDocument.body).backgroundColor) : COLORS.TRANSPARENT;
        var defaultBackgroundColor = typeof backgroundColorOverride === "string" ? parseColor(context, backgroundColorOverride) : backgroundColorOverride === null ? COLORS.TRANSPARENT : 4294967295;
        return element === ownerDocument.documentElement ? isTransparent(documentBackgroundColor) ? isTransparent(bodyBackgroundColor) ? defaultBackgroundColor : bodyBackgroundColor : documentBackgroundColor : defaultBackgroundColor;
      }, "parseBackgroundColor");
      return html2canvas;
    });
  }
});
var purify_es_exports = {};
__export(purify_es_exports, {
  default: /* @__PURE__ */ __name(() => purify, "default")
});
function unapply(func) {
  return function(thisArg) {
    if (thisArg instanceof RegExp) {
      thisArg.lastIndex = 0;
    }
    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key2 = 1; _key2 < _len; _key2++) {
      args[_key2 - 1] = arguments[_key2];
    }
    return apply(func, thisArg, args);
  };
}
__name(unapply, "unapply");
function unconstruct(func) {
  return function() {
    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {
      args[_key2] = arguments[_key2];
    }
    return construct(func, args);
  };
}
__name(unconstruct, "unconstruct");
function addToSet(set, array) {
  let transformCaseFunc = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : stringToLowerCase;
  if (setPrototypeOf) {
    setPrototypeOf(set, null);
  }
  let l3 = array.length;
  while (l3--) {
    let element = array[l3];
    if (typeof element === "string") {
      const lcElement = transformCaseFunc(element);
      if (lcElement !== element) {
        if (!isFrozen(array)) {
          array[l3] = lcElement;
        }
        element = lcElement;
      }
    }
    set[element] = true;
  }
  return set;
}
__name(addToSet, "addToSet");
function cleanArray(array) {
  for (let index2 = 0; index2 < array.length; index2++) {
    const isPropertyExist = objectHasOwnProperty(array, index2);
    if (!isPropertyExist) {
      array[index2] = null;
    }
  }
  return array;
}
__name(cleanArray, "cleanArray");
function clone(object) {
  const newObject = create(null);
  for (const [property, value] of entries(object)) {
    const isPropertyExist = objectHasOwnProperty(object, property);
    if (isPropertyExist) {
      if (Array.isArray(value)) {
        newObject[property] = cleanArray(value);
      } else if (value && typeof value === "object" && value.constructor === Object) {
        newObject[property] = clone(value);
      } else {
        newObject[property] = value;
      }
    }
  }
  return newObject;
}
__name(clone, "clone");
function lookupGetter(object, prop) {
  while (object !== null) {
    const desc2 = getOwnPropertyDescriptor(object, prop);
    if (desc2) {
      if (desc2.get) {
        return unapply(desc2.get);
      }
      if (typeof desc2.value === "function") {
        return unapply(desc2.value);
      }
    }
    object = getPrototypeOf(object);
  }
  function fallbackValue() {
    return null;
  }
  __name(fallbackValue, "fallbackValue");
  __name2(fallbackValue, "fallbackValue");
  return fallbackValue;
}
__name(lookupGetter, "lookupGetter");
function createDOMPurify() {
  let window2 = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : getGlobal();
  const DOMPurify = /* @__PURE__ */ __name2((root) => createDOMPurify(root), "DOMPurify");
  DOMPurify.version = "3.2.6";
  DOMPurify.removed = [];
  if (!window2 || !window2.document || window2.document.nodeType !== NODE_TYPE.document || !window2.Element) {
    DOMPurify.isSupported = false;
    return DOMPurify;
  }
  let {
    document: document2
  } = window2;
  const originalDocument = document2;
  const currentScript = originalDocument.currentScript;
  const {
    DocumentFragment,
    HTMLTemplateElement,
    Node: Node2,
    Element: Element2,
    NodeFilter,
    NamedNodeMap = window2.NamedNodeMap || window2.MozNamedAttrMap,
    HTMLFormElement,
    DOMParser: DOMParser2,
    trustedTypes
  } = window2;
  const ElementPrototype = Element2.prototype;
  const cloneNode = lookupGetter(ElementPrototype, "cloneNode");
  const remove = lookupGetter(ElementPrototype, "remove");
  const getNextSibling = lookupGetter(ElementPrototype, "nextSibling");
  const getChildNodes = lookupGetter(ElementPrototype, "childNodes");
  const getParentNode = lookupGetter(ElementPrototype, "parentNode");
  if (typeof HTMLTemplateElement === "function") {
    const template = document2.createElement("template");
    if (template.content && template.content.ownerDocument) {
      document2 = template.content.ownerDocument;
    }
  }
  let trustedTypesPolicy;
  let emptyHTML = "";
  const {
    implementation,
    createNodeIterator,
    createDocumentFragment,
    getElementsByTagName
  } = document2;
  const {
    importNode
  } = originalDocument;
  let hooks = _createHooksMap();
  DOMPurify.isSupported = typeof entries === "function" && typeof getParentNode === "function" && implementation && implementation.createHTMLDocument !== void 0;
  const {
    MUSTACHE_EXPR: MUSTACHE_EXPR2,
    ERB_EXPR: ERB_EXPR2,
    TMPLIT_EXPR: TMPLIT_EXPR2,
    DATA_ATTR: DATA_ATTR2,
    ARIA_ATTR: ARIA_ATTR2,
    IS_SCRIPT_OR_DATA: IS_SCRIPT_OR_DATA2,
    ATTR_WHITESPACE: ATTR_WHITESPACE2,
    CUSTOM_ELEMENT: CUSTOM_ELEMENT2
  } = EXPRESSIONS;
  let {
    IS_ALLOWED_URI: IS_ALLOWED_URI$1
  } = EXPRESSIONS;
  let ALLOWED_TAGS = null;
  const DEFAULT_ALLOWED_TAGS = addToSet({}, [...html$1, ...svg$1, ...svgFilters, ...mathMl$1, ...text]);
  let ALLOWED_ATTR = null;
  const DEFAULT_ALLOWED_ATTR = addToSet({}, [...html, ...svg, ...mathMl, ...xml]);
  let CUSTOM_ELEMENT_HANDLING = Object.seal(create(null, {
    tagNameCheck: {
      writable: true,
      configurable: false,
      enumerable: true,
      value: null
    },
    attributeNameCheck: {
      writable: true,
      configurable: false,
      enumerable: true,
      value: null
    },
    allowCustomizedBuiltInElements: {
      writable: true,
      configurable: false,
      enumerable: true,
      value: false
    }
  }));
  let FORBID_TAGS = null;
  let FORBID_ATTR = null;
  let ALLOW_ARIA_ATTR = true;
  let ALLOW_DATA_ATTR = true;
  let ALLOW_UNKNOWN_PROTOCOLS = false;
  let ALLOW_SELF_CLOSE_IN_ATTR = true;
  let SAFE_FOR_TEMPLATES = false;
  let SAFE_FOR_XML = true;
  let WHOLE_DOCUMENT = false;
  let SET_CONFIG = false;
  let FORCE_BODY = false;
  let RETURN_DOM = false;
  let RETURN_DOM_FRAGMENT = false;
  let RETURN_TRUSTED_TYPE = false;
  let SANITIZE_DOM = true;
  let SANITIZE_NAMED_PROPS = false;
  const SANITIZE_NAMED_PROPS_PREFIX = "user-content-";
  let KEEP_CONTENT = true;
  let IN_PLACE = false;
  let USE_PROFILES = {};
  let FORBID_CONTENTS = null;
  const DEFAULT_FORBID_CONTENTS = addToSet({}, ["annotation-xml", "audio", "colgroup", "desc", "foreignobject", "head", "iframe", "math", "mi", "mn", "mo", "ms", "mtext", "noembed", "noframes", "noscript", "plaintext", "script", "style", "svg", "template", "thead", "title", "video", "xmp"]);
  let DATA_URI_TAGS = null;
  const DEFAULT_DATA_URI_TAGS = addToSet({}, ["audio", "video", "img", "source", "image", "track"]);
  let URI_SAFE_ATTRIBUTES = null;
  const DEFAULT_URI_SAFE_ATTRIBUTES = addToSet({}, ["alt", "class", "for", "id", "label", "name", "pattern", "placeholder", "role", "summary", "title", "value", "style", "xmlns"]);
  const MATHML_NAMESPACE = "http://www.w3.org/1998/Math/MathML";
  const SVG_NAMESPACE = "http://www.w3.org/2000/svg";
  const HTML_NAMESPACE = "http://www.w3.org/1999/xhtml";
  let NAMESPACE = HTML_NAMESPACE;
  let IS_EMPTY_INPUT = false;
  let ALLOWED_NAMESPACES = null;
  const DEFAULT_ALLOWED_NAMESPACES = addToSet({}, [MATHML_NAMESPACE, SVG_NAMESPACE, HTML_NAMESPACE], stringToString);
  let MATHML_TEXT_INTEGRATION_POINTS = addToSet({}, ["mi", "mo", "mn", "ms", "mtext"]);
  let HTML_INTEGRATION_POINTS = addToSet({}, ["annotation-xml"]);
  const COMMON_SVG_AND_HTML_ELEMENTS = addToSet({}, ["title", "style", "font", "a", "script"]);
  let PARSER_MEDIA_TYPE = null;
  const SUPPORTED_PARSER_MEDIA_TYPES = ["application/xhtml+xml", "text/html"];
  const DEFAULT_PARSER_MEDIA_TYPE = "text/html";
  let transformCaseFunc = null;
  let CONFIG = null;
  const formElement = document2.createElement("form");
  const isRegexOrFunction = /* @__PURE__ */ __name2(/* @__PURE__ */ __name(function isRegexOrFunction2(testValue) {
    return testValue instanceof RegExp || testValue instanceof Function;
  }, "isRegexOrFunction2"), "isRegexOrFunction");
  const _parseConfig = /* @__PURE__ */ __name2(/* @__PURE__ */ __name(function _parseConfig2() {
    let cfg = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
    if (CONFIG && CONFIG === cfg) {
      return;
    }
    if (!cfg || typeof cfg !== "object") {
      cfg = {};
    }
    cfg = clone(cfg);
    PARSER_MEDIA_TYPE = // eslint-disable-next-line unicorn/prefer-includes
    SUPPORTED_PARSER_MEDIA_TYPES.indexOf(cfg.PARSER_MEDIA_TYPE) === -1 ? DEFAULT_PARSER_MEDIA_TYPE : cfg.PARSER_MEDIA_TYPE;
    transformCaseFunc = PARSER_MEDIA_TYPE === "application/xhtml+xml" ? stringToString : stringToLowerCase;
    ALLOWED_TAGS = objectHasOwnProperty(cfg, "ALLOWED_TAGS") ? addToSet({}, cfg.ALLOWED_TAGS, transformCaseFunc) : DEFAULT_ALLOWED_TAGS;
    ALLOWED_ATTR = objectHasOwnProperty(cfg, "ALLOWED_ATTR") ? addToSet({}, cfg.ALLOWED_ATTR, transformCaseFunc) : DEFAULT_ALLOWED_ATTR;
    ALLOWED_NAMESPACES = objectHasOwnProperty(cfg, "ALLOWED_NAMESPACES") ? addToSet({}, cfg.ALLOWED_NAMESPACES, stringToString) : DEFAULT_ALLOWED_NAMESPACES;
    URI_SAFE_ATTRIBUTES = objectHasOwnProperty(cfg, "ADD_URI_SAFE_ATTR") ? addToSet(clone(DEFAULT_URI_SAFE_ATTRIBUTES), cfg.ADD_URI_SAFE_ATTR, transformCaseFunc) : DEFAULT_URI_SAFE_ATTRIBUTES;
    DATA_URI_TAGS = objectHasOwnProperty(cfg, "ADD_DATA_URI_TAGS") ? addToSet(clone(DEFAULT_DATA_URI_TAGS), cfg.ADD_DATA_URI_TAGS, transformCaseFunc) : DEFAULT_DATA_URI_TAGS;
    FORBID_CONTENTS = objectHasOwnProperty(cfg, "FORBID_CONTENTS") ? addToSet({}, cfg.FORBID_CONTENTS, transformCaseFunc) : DEFAULT_FORBID_CONTENTS;
    FORBID_TAGS = objectHasOwnProperty(cfg, "FORBID_TAGS") ? addToSet({}, cfg.FORBID_TAGS, transformCaseFunc) : clone({});
    FORBID_ATTR = objectHasOwnProperty(cfg, "FORBID_ATTR") ? addToSet({}, cfg.FORBID_ATTR, transformCaseFunc) : clone({});
    USE_PROFILES = objectHasOwnProperty(cfg, "USE_PROFILES") ? cfg.USE_PROFILES : false;
    ALLOW_ARIA_ATTR = cfg.ALLOW_ARIA_ATTR !== false;
    ALLOW_DATA_ATTR = cfg.ALLOW_DATA_ATTR !== false;
    ALLOW_UNKNOWN_PROTOCOLS = cfg.ALLOW_UNKNOWN_PROTOCOLS || false;
    ALLOW_SELF_CLOSE_IN_ATTR = cfg.ALLOW_SELF_CLOSE_IN_ATTR !== false;
    SAFE_FOR_TEMPLATES = cfg.SAFE_FOR_TEMPLATES || false;
    SAFE_FOR_XML = cfg.SAFE_FOR_XML !== false;
    WHOLE_DOCUMENT = cfg.WHOLE_DOCUMENT || false;
    RETURN_DOM = cfg.RETURN_DOM || false;
    RETURN_DOM_FRAGMENT = cfg.RETURN_DOM_FRAGMENT || false;
    RETURN_TRUSTED_TYPE = cfg.RETURN_TRUSTED_TYPE || false;
    FORCE_BODY = cfg.FORCE_BODY || false;
    SANITIZE_DOM = cfg.SANITIZE_DOM !== false;
    SANITIZE_NAMED_PROPS = cfg.SANITIZE_NAMED_PROPS || false;
    KEEP_CONTENT = cfg.KEEP_CONTENT !== false;
    IN_PLACE = cfg.IN_PLACE || false;
    IS_ALLOWED_URI$1 = cfg.ALLOWED_URI_REGEXP || IS_ALLOWED_URI;
    NAMESPACE = cfg.NAMESPACE || HTML_NAMESPACE;
    MATHML_TEXT_INTEGRATION_POINTS = cfg.MATHML_TEXT_INTEGRATION_POINTS || MATHML_TEXT_INTEGRATION_POINTS;
    HTML_INTEGRATION_POINTS = cfg.HTML_INTEGRATION_POINTS || HTML_INTEGRATION_POINTS;
    CUSTOM_ELEMENT_HANDLING = cfg.CUSTOM_ELEMENT_HANDLING || {};
    if (cfg.CUSTOM_ELEMENT_HANDLING && isRegexOrFunction(cfg.CUSTOM_ELEMENT_HANDLING.tagNameCheck)) {
      CUSTOM_ELEMENT_HANDLING.tagNameCheck = cfg.CUSTOM_ELEMENT_HANDLING.tagNameCheck;
    }
    if (cfg.CUSTOM_ELEMENT_HANDLING && isRegexOrFunction(cfg.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)) {
      CUSTOM_ELEMENT_HANDLING.attributeNameCheck = cfg.CUSTOM_ELEMENT_HANDLING.attributeNameCheck;
    }
    if (cfg.CUSTOM_ELEMENT_HANDLING && typeof cfg.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements === "boolean") {
      CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements = cfg.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements;
    }
    if (SAFE_FOR_TEMPLATES) {
      ALLOW_DATA_ATTR = false;
    }
    if (RETURN_DOM_FRAGMENT) {
      RETURN_DOM = true;
    }
    if (USE_PROFILES) {
      ALLOWED_TAGS = addToSet({}, text);
      ALLOWED_ATTR = [];
      if (USE_PROFILES.html === true) {
        addToSet(ALLOWED_TAGS, html$1);
        addToSet(ALLOWED_ATTR, html);
      }
      if (USE_PROFILES.svg === true) {
        addToSet(ALLOWED_TAGS, svg$1);
        addToSet(ALLOWED_ATTR, svg);
        addToSet(ALLOWED_ATTR, xml);
      }
      if (USE_PROFILES.svgFilters === true) {
        addToSet(ALLOWED_TAGS, svgFilters);
        addToSet(ALLOWED_ATTR, svg);
        addToSet(ALLOWED_ATTR, xml);
      }
      if (USE_PROFILES.mathMl === true) {
        addToSet(ALLOWED_TAGS, mathMl$1);
        addToSet(ALLOWED_ATTR, mathMl);
        addToSet(ALLOWED_ATTR, xml);
      }
    }
    if (cfg.ADD_TAGS) {
      if (ALLOWED_TAGS === DEFAULT_ALLOWED_TAGS) {
        ALLOWED_TAGS = clone(ALLOWED_TAGS);
      }
      addToSet(ALLOWED_TAGS, cfg.ADD_TAGS, transformCaseFunc);
    }
    if (cfg.ADD_ATTR) {
      if (ALLOWED_ATTR === DEFAULT_ALLOWED_ATTR) {
        ALLOWED_ATTR = clone(ALLOWED_ATTR);
      }
      addToSet(ALLOWED_ATTR, cfg.ADD_ATTR, transformCaseFunc);
    }
    if (cfg.ADD_URI_SAFE_ATTR) {
      addToSet(URI_SAFE_ATTRIBUTES, cfg.ADD_URI_SAFE_ATTR, transformCaseFunc);
    }
    if (cfg.FORBID_CONTENTS) {
      if (FORBID_CONTENTS === DEFAULT_FORBID_CONTENTS) {
        FORBID_CONTENTS = clone(FORBID_CONTENTS);
      }
      addToSet(FORBID_CONTENTS, cfg.FORBID_CONTENTS, transformCaseFunc);
    }
    if (KEEP_CONTENT) {
      ALLOWED_TAGS["#text"] = true;
    }
    if (WHOLE_DOCUMENT) {
      addToSet(ALLOWED_TAGS, ["html", "head", "body"]);
    }
    if (ALLOWED_TAGS.table) {
      addToSet(ALLOWED_TAGS, ["tbody"]);
      delete FORBID_TAGS.tbody;
    }
    if (cfg.TRUSTED_TYPES_POLICY) {
      if (typeof cfg.TRUSTED_TYPES_POLICY.createHTML !== "function") {
        throw typeErrorCreate('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');
      }
      if (typeof cfg.TRUSTED_TYPES_POLICY.createScriptURL !== "function") {
        throw typeErrorCreate('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');
      }
      trustedTypesPolicy = cfg.TRUSTED_TYPES_POLICY;
      emptyHTML = trustedTypesPolicy.createHTML("");
    } else {
      if (trustedTypesPolicy === void 0) {
        trustedTypesPolicy = _createTrustedTypesPolicy(trustedTypes, currentScript);
      }
      if (trustedTypesPolicy !== null && typeof emptyHTML === "string") {
        emptyHTML = trustedTypesPolicy.createHTML("");
      }
    }
    if (freeze) {
      freeze(cfg);
    }
    CONFIG = cfg;
  }, "_parseConfig2"), "_parseConfig");
  const ALL_SVG_TAGS = addToSet({}, [...svg$1, ...svgFilters, ...svgDisallowed]);
  const ALL_MATHML_TAGS = addToSet({}, [...mathMl$1, ...mathMlDisallowed]);
  const _checkValidNamespace = /* @__PURE__ */ __name2(/* @__PURE__ */ __name(function _checkValidNamespace2(element) {
    let parent = getParentNode(element);
    if (!parent || !parent.tagName) {
      parent = {
        namespaceURI: NAMESPACE,
        tagName: "template"
      };
    }
    const tagName = stringToLowerCase(element.tagName);
    const parentTagName = stringToLowerCase(parent.tagName);
    if (!ALLOWED_NAMESPACES[element.namespaceURI]) {
      return false;
    }
    if (element.namespaceURI === SVG_NAMESPACE) {
      if (parent.namespaceURI === HTML_NAMESPACE) {
        return tagName === "svg";
      }
      if (parent.namespaceURI === MATHML_NAMESPACE) {
        return tagName === "svg" && (parentTagName === "annotation-xml" || MATHML_TEXT_INTEGRATION_POINTS[parentTagName]);
      }
      return Boolean(ALL_SVG_TAGS[tagName]);
    }
    if (element.namespaceURI === MATHML_NAMESPACE) {
      if (parent.namespaceURI === HTML_NAMESPACE) {
        return tagName === "math";
      }
      if (parent.namespaceURI === SVG_NAMESPACE) {
        return tagName === "math" && HTML_INTEGRATION_POINTS[parentTagName];
      }
      return Boolean(ALL_MATHML_TAGS[tagName]);
    }
    if (element.namespaceURI === HTML_NAMESPACE) {
      if (parent.namespaceURI === SVG_NAMESPACE && !HTML_INTEGRATION_POINTS[parentTagName]) {
        return false;
      }
      if (parent.namespaceURI === MATHML_NAMESPACE && !MATHML_TEXT_INTEGRATION_POINTS[parentTagName]) {
        return false;
      }
      return !ALL_MATHML_TAGS[tagName] && (COMMON_SVG_AND_HTML_ELEMENTS[tagName] || !ALL_SVG_TAGS[tagName]);
    }
    if (PARSER_MEDIA_TYPE === "application/xhtml+xml" && ALLOWED_NAMESPACES[element.namespaceURI]) {
      return true;
    }
    return false;
  }, "_checkValidNamespace2"), "_checkValidNamespace");
  const _forceRemove = /* @__PURE__ */ __name2(/* @__PURE__ */ __name(function _forceRemove2(node2) {
    arrayPush(DOMPurify.removed, {
      element: node2
    });
    try {
      getParentNode(node2).removeChild(node2);
    } catch (_3) {
      remove(node2);
    }
  }, "_forceRemove2"), "_forceRemove");
  const _removeAttribute = /* @__PURE__ */ __name2(/* @__PURE__ */ __name(function _removeAttribute2(name, element) {
    try {
      arrayPush(DOMPurify.removed, {
        attribute: element.getAttributeNode(name),
        from: element
      });
    } catch (_3) {
      arrayPush(DOMPurify.removed, {
        attribute: null,
        from: element
      });
    }
    element.removeAttribute(name);
    if (name === "is") {
      if (RETURN_DOM || RETURN_DOM_FRAGMENT) {
        try {
          _forceRemove(element);
        } catch (_3) {
        }
      } else {
        try {
          element.setAttribute(name, "");
        } catch (_3) {
        }
      }
    }
  }, "_removeAttribute2"), "_removeAttribute");
  const _initDocument = /* @__PURE__ */ __name2(/* @__PURE__ */ __name(function _initDocument2(dirty) {
    let doc = null;
    let leadingWhitespace = null;
    if (FORCE_BODY) {
      dirty = "<remove></remove>" + dirty;
    } else {
      const matches = stringMatch(dirty, /^[\r\n\t ]+/);
      leadingWhitespace = matches && matches[0];
    }
    if (PARSER_MEDIA_TYPE === "application/xhtml+xml" && NAMESPACE === HTML_NAMESPACE) {
      dirty = '<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>' + dirty + "</body></html>";
    }
    const dirtyPayload = trustedTypesPolicy ? trustedTypesPolicy.createHTML(dirty) : dirty;
    if (NAMESPACE === HTML_NAMESPACE) {
      try {
        doc = new DOMParser2().parseFromString(dirtyPayload, PARSER_MEDIA_TYPE);
      } catch (_3) {
      }
    }
    if (!doc || !doc.documentElement) {
      doc = implementation.createDocument(NAMESPACE, "template", null);
      try {
        doc.documentElement.innerHTML = IS_EMPTY_INPUT ? emptyHTML : dirtyPayload;
      } catch (_3) {
      }
    }
    const body = doc.body || doc.documentElement;
    if (dirty && leadingWhitespace) {
      body.insertBefore(document2.createTextNode(leadingWhitespace), body.childNodes[0] || null);
    }
    if (NAMESPACE === HTML_NAMESPACE) {
      return getElementsByTagName.call(doc, WHOLE_DOCUMENT ? "html" : "body")[0];
    }
    return WHOLE_DOCUMENT ? doc.documentElement : body;
  }, "_initDocument2"), "_initDocument");
  const _createNodeIterator = /* @__PURE__ */ __name2(/* @__PURE__ */ __name(function _createNodeIterator2(root) {
    return createNodeIterator.call(
      root.ownerDocument || root,
      root,
      // eslint-disable-next-line no-bitwise
      NodeFilter.SHOW_ELEMENT | NodeFilter.SHOW_COMMENT | NodeFilter.SHOW_TEXT | NodeFilter.SHOW_PROCESSING_INSTRUCTION | NodeFilter.SHOW_CDATA_SECTION,
      null
    );
  }, "_createNodeIterator2"), "_createNodeIterator");
  const _isClobbered = /* @__PURE__ */ __name2(/* @__PURE__ */ __name(function _isClobbered2(element) {
    return element instanceof HTMLFormElement && (typeof element.nodeName !== "string" || typeof element.textContent !== "string" || typeof element.removeChild !== "function" || !(element.attributes instanceof NamedNodeMap) || typeof element.removeAttribute !== "function" || typeof element.setAttribute !== "function" || typeof element.namespaceURI !== "string" || typeof element.insertBefore !== "function" || typeof element.hasChildNodes !== "function");
  }, "_isClobbered2"), "_isClobbered");
  const _isNode = /* @__PURE__ */ __name2(/* @__PURE__ */ __name(function _isNode2(value) {
    return typeof Node2 === "function" && value instanceof Node2;
  }, "_isNode2"), "_isNode");
  function _executeHooks(hooks2, currentNode, data) {
    arrayForEach(hooks2, (hook) => {
      hook.call(DOMPurify, currentNode, data, CONFIG);
    });
  }
  __name(_executeHooks, "_executeHooks");
  __name2(_executeHooks, "_executeHooks");
  const _sanitizeElements = /* @__PURE__ */ __name2(/* @__PURE__ */ __name(function _sanitizeElements2(currentNode) {
    let content = null;
    _executeHooks(hooks.beforeSanitizeElements, currentNode, null);
    if (_isClobbered(currentNode)) {
      _forceRemove(currentNode);
      return true;
    }
    const tagName = transformCaseFunc(currentNode.nodeName);
    _executeHooks(hooks.uponSanitizeElement, currentNode, {
      tagName,
      allowedTags: ALLOWED_TAGS
    });
    if (SAFE_FOR_XML && currentNode.hasChildNodes() && !_isNode(currentNode.firstElementChild) && regExpTest(/<[/\w!]/g, currentNode.innerHTML) && regExpTest(/<[/\w!]/g, currentNode.textContent)) {
      _forceRemove(currentNode);
      return true;
    }
    if (currentNode.nodeType === NODE_TYPE.progressingInstruction) {
      _forceRemove(currentNode);
      return true;
    }
    if (SAFE_FOR_XML && currentNode.nodeType === NODE_TYPE.comment && regExpTest(/<[/\w]/g, currentNode.data)) {
      _forceRemove(currentNode);
      return true;
    }
    if (!ALLOWED_TAGS[tagName] || FORBID_TAGS[tagName]) {
      if (!FORBID_TAGS[tagName] && _isBasicCustomElement(tagName)) {
        if (CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof RegExp && regExpTest(CUSTOM_ELEMENT_HANDLING.tagNameCheck, tagName)) {
          return false;
        }
        if (CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof Function && CUSTOM_ELEMENT_HANDLING.tagNameCheck(tagName)) {
          return false;
        }
      }
      if (KEEP_CONTENT && !FORBID_CONTENTS[tagName]) {
        const parentNode = getParentNode(currentNode) || currentNode.parentNode;
        const childNodes = getChildNodes(currentNode) || currentNode.childNodes;
        if (childNodes && parentNode) {
          const childCount = childNodes.length;
          for (let i33 = childCount - 1; i33 >= 0; --i33) {
            const childClone = cloneNode(childNodes[i33], true);
            childClone.__removalCount = (currentNode.__removalCount || 0) + 1;
            parentNode.insertBefore(childClone, getNextSibling(currentNode));
          }
        }
      }
      _forceRemove(currentNode);
      return true;
    }
    if (currentNode instanceof Element2 && !_checkValidNamespace(currentNode)) {
      _forceRemove(currentNode);
      return true;
    }
    if ((tagName === "noscript" || tagName === "noembed" || tagName === "noframes") && regExpTest(/<\/no(script|embed|frames)/i, currentNode.innerHTML)) {
      _forceRemove(currentNode);
      return true;
    }
    if (SAFE_FOR_TEMPLATES && currentNode.nodeType === NODE_TYPE.text) {
      content = currentNode.textContent;
      arrayForEach([MUSTACHE_EXPR2, ERB_EXPR2, TMPLIT_EXPR2], (expr) => {
        content = stringReplace(content, expr, " ");
      });
      if (currentNode.textContent !== content) {
        arrayPush(DOMPurify.removed, {
          element: currentNode.cloneNode()
        });
        currentNode.textContent = content;
      }
    }
    _executeHooks(hooks.afterSanitizeElements, currentNode, null);
    return false;
  }, "_sanitizeElements2"), "_sanitizeElements");
  const _isValidAttribute = /* @__PURE__ */ __name2(/* @__PURE__ */ __name(function _isValidAttribute2(lcTag, lcName, value) {
    if (SANITIZE_DOM && (lcName === "id" || lcName === "name") && (value in document2 || value in formElement)) {
      return false;
    }
    if (ALLOW_DATA_ATTR && !FORBID_ATTR[lcName] && regExpTest(DATA_ATTR2, lcName)) ;
    else if (ALLOW_ARIA_ATTR && regExpTest(ARIA_ATTR2, lcName)) ;
    else if (!ALLOWED_ATTR[lcName] || FORBID_ATTR[lcName]) {
      if (
        // First condition does a very basic check if a) it's basically a valid custom element tagname AND
        // b) if the tagName passes whatever the user has configured for CUSTOM_ELEMENT_HANDLING.tagNameCheck
        // and c) if the attribute name passes whatever the user has configured for CUSTOM_ELEMENT_HANDLING.attributeNameCheck
        _isBasicCustomElement(lcTag) && (CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof RegExp && regExpTest(CUSTOM_ELEMENT_HANDLING.tagNameCheck, lcTag) || CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof Function && CUSTOM_ELEMENT_HANDLING.tagNameCheck(lcTag)) && (CUSTOM_ELEMENT_HANDLING.attributeNameCheck instanceof RegExp && regExpTest(CUSTOM_ELEMENT_HANDLING.attributeNameCheck, lcName) || CUSTOM_ELEMENT_HANDLING.attributeNameCheck instanceof Function && CUSTOM_ELEMENT_HANDLING.attributeNameCheck(lcName)) || // Alternative, second condition checks if it's an `is`-attribute, AND
        // the value passes whatever the user has configured for CUSTOM_ELEMENT_HANDLING.tagNameCheck
        lcName === "is" && CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements && (CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof RegExp && regExpTest(CUSTOM_ELEMENT_HANDLING.tagNameCheck, value) || CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof Function && CUSTOM_ELEMENT_HANDLING.tagNameCheck(value))
      ) ;
      else {
        return false;
      }
    } else if (URI_SAFE_ATTRIBUTES[lcName]) ;
    else if (regExpTest(IS_ALLOWED_URI$1, stringReplace(value, ATTR_WHITESPACE2, ""))) ;
    else if ((lcName === "src" || lcName === "xlink:href" || lcName === "href") && lcTag !== "script" && stringIndexOf(value, "data:") === 0 && DATA_URI_TAGS[lcTag]) ;
    else if (ALLOW_UNKNOWN_PROTOCOLS && !regExpTest(IS_SCRIPT_OR_DATA2, stringReplace(value, ATTR_WHITESPACE2, ""))) ;
    else if (value) {
      return false;
    } else ;
    return true;
  }, "_isValidAttribute2"), "_isValidAttribute");
  const _isBasicCustomElement = /* @__PURE__ */ __name2(/* @__PURE__ */ __name(function _isBasicCustomElement2(tagName) {
    return tagName !== "annotation-xml" && stringMatch(tagName, CUSTOM_ELEMENT2);
  }, "_isBasicCustomElement2"), "_isBasicCustomElement");
  const _sanitizeAttributes = /* @__PURE__ */ __name2(/* @__PURE__ */ __name(function _sanitizeAttributes2(currentNode) {
    _executeHooks(hooks.beforeSanitizeAttributes, currentNode, null);
    const {
      attributes
    } = currentNode;
    if (!attributes || _isClobbered(currentNode)) {
      return;
    }
    const hookEvent = {
      attrName: "",
      attrValue: "",
      keepAttr: true,
      allowedAttributes: ALLOWED_ATTR,
      forceKeepAttr: void 0
    };
    let l3 = attributes.length;
    while (l3--) {
      const attr = attributes[l3];
      const {
        name,
        namespaceURI,
        value: attrValue
      } = attr;
      const lcName = transformCaseFunc(name);
      const initValue = attrValue;
      let value = name === "value" ? initValue : stringTrim(initValue);
      hookEvent.attrName = lcName;
      hookEvent.attrValue = value;
      hookEvent.keepAttr = true;
      hookEvent.forceKeepAttr = void 0;
      _executeHooks(hooks.uponSanitizeAttribute, currentNode, hookEvent);
      value = hookEvent.attrValue;
      if (SANITIZE_NAMED_PROPS && (lcName === "id" || lcName === "name")) {
        _removeAttribute(name, currentNode);
        value = SANITIZE_NAMED_PROPS_PREFIX + value;
      }
      if (SAFE_FOR_XML && regExpTest(/((--!?|])>)|<\/(style|title)/i, value)) {
        _removeAttribute(name, currentNode);
        continue;
      }
      if (hookEvent.forceKeepAttr) {
        continue;
      }
      if (!hookEvent.keepAttr) {
        _removeAttribute(name, currentNode);
        continue;
      }
      if (!ALLOW_SELF_CLOSE_IN_ATTR && regExpTest(/\/>/i, value)) {
        _removeAttribute(name, currentNode);
        continue;
      }
      if (SAFE_FOR_TEMPLATES) {
        arrayForEach([MUSTACHE_EXPR2, ERB_EXPR2, TMPLIT_EXPR2], (expr) => {
          value = stringReplace(value, expr, " ");
        });
      }
      const lcTag = transformCaseFunc(currentNode.nodeName);
      if (!_isValidAttribute(lcTag, lcName, value)) {
        _removeAttribute(name, currentNode);
        continue;
      }
      if (trustedTypesPolicy && typeof trustedTypes === "object" && typeof trustedTypes.getAttributeType === "function") {
        if (namespaceURI) ;
        else {
          switch (trustedTypes.getAttributeType(lcTag, lcName)) {
            case "TrustedHTML": {
              value = trustedTypesPolicy.createHTML(value);
              break;
            }
            case "TrustedScriptURL": {
              value = trustedTypesPolicy.createScriptURL(value);
              break;
            }
          }
        }
      }
      if (value !== initValue) {
        try {
          if (namespaceURI) {
            currentNode.setAttributeNS(namespaceURI, name, value);
          } else {
            currentNode.setAttribute(name, value);
          }
          if (_isClobbered(currentNode)) {
            _forceRemove(currentNode);
          } else {
            arrayPop(DOMPurify.removed);
          }
        } catch (_3) {
          _removeAttribute(name, currentNode);
        }
      }
    }
    _executeHooks(hooks.afterSanitizeAttributes, currentNode, null);
  }, "_sanitizeAttributes2"), "_sanitizeAttributes");
  const _sanitizeShadowDOM = /* @__PURE__ */ __name2(/* @__PURE__ */ __name(function _sanitizeShadowDOM2(fragment) {
    let shadowNode = null;
    const shadowIterator = _createNodeIterator(fragment);
    _executeHooks(hooks.beforeSanitizeShadowDOM, fragment, null);
    while (shadowNode = shadowIterator.nextNode()) {
      _executeHooks(hooks.uponSanitizeShadowNode, shadowNode, null);
      _sanitizeElements(shadowNode);
      _sanitizeAttributes(shadowNode);
      if (shadowNode.content instanceof DocumentFragment) {
        _sanitizeShadowDOM2(shadowNode.content);
      }
    }
    _executeHooks(hooks.afterSanitizeShadowDOM, fragment, null);
  }, "_sanitizeShadowDOM2"), "_sanitizeShadowDOM");
  DOMPurify.sanitize = function(dirty) {
    let cfg = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
    let body = null;
    let importedNode = null;
    let currentNode = null;
    let returnNode = null;
    IS_EMPTY_INPUT = !dirty;
    if (IS_EMPTY_INPUT) {
      dirty = "<!-->";
    }
    if (typeof dirty !== "string" && !_isNode(dirty)) {
      if (typeof dirty.toString === "function") {
        dirty = dirty.toString();
        if (typeof dirty !== "string") {
          throw typeErrorCreate("dirty is not a string, aborting");
        }
      } else {
        throw typeErrorCreate("toString is not a function");
      }
    }
    if (!DOMPurify.isSupported) {
      return dirty;
    }
    if (!SET_CONFIG) {
      _parseConfig(cfg);
    }
    DOMPurify.removed = [];
    if (typeof dirty === "string") {
      IN_PLACE = false;
    }
    if (IN_PLACE) {
      if (dirty.nodeName) {
        const tagName = transformCaseFunc(dirty.nodeName);
        if (!ALLOWED_TAGS[tagName] || FORBID_TAGS[tagName]) {
          throw typeErrorCreate("root node is forbidden and cannot be sanitized in-place");
        }
      }
    } else if (dirty instanceof Node2) {
      body = _initDocument("<!---->");
      importedNode = body.ownerDocument.importNode(dirty, true);
      if (importedNode.nodeType === NODE_TYPE.element && importedNode.nodeName === "BODY") {
        body = importedNode;
      } else if (importedNode.nodeName === "HTML") {
        body = importedNode;
      } else {
        body.appendChild(importedNode);
      }
    } else {
      if (!RETURN_DOM && !SAFE_FOR_TEMPLATES && !WHOLE_DOCUMENT && // eslint-disable-next-line unicorn/prefer-includes
      dirty.indexOf("<") === -1) {
        return trustedTypesPolicy && RETURN_TRUSTED_TYPE ? trustedTypesPolicy.createHTML(dirty) : dirty;
      }
      body = _initDocument(dirty);
      if (!body) {
        return RETURN_DOM ? null : RETURN_TRUSTED_TYPE ? emptyHTML : "";
      }
    }
    if (body && FORCE_BODY) {
      _forceRemove(body.firstChild);
    }
    const nodeIterator = _createNodeIterator(IN_PLACE ? dirty : body);
    while (currentNode = nodeIterator.nextNode()) {
      _sanitizeElements(currentNode);
      _sanitizeAttributes(currentNode);
      if (currentNode.content instanceof DocumentFragment) {
        _sanitizeShadowDOM(currentNode.content);
      }
    }
    if (IN_PLACE) {
      return dirty;
    }
    if (RETURN_DOM) {
      if (RETURN_DOM_FRAGMENT) {
        returnNode = createDocumentFragment.call(body.ownerDocument);
        while (body.firstChild) {
          returnNode.appendChild(body.firstChild);
        }
      } else {
        returnNode = body;
      }
      if (ALLOWED_ATTR.shadowroot || ALLOWED_ATTR.shadowrootmode) {
        returnNode = importNode.call(originalDocument, returnNode, true);
      }
      return returnNode;
    }
    let serializedHTML = WHOLE_DOCUMENT ? body.outerHTML : body.innerHTML;
    if (WHOLE_DOCUMENT && ALLOWED_TAGS["!doctype"] && body.ownerDocument && body.ownerDocument.doctype && body.ownerDocument.doctype.name && regExpTest(DOCTYPE_NAME, body.ownerDocument.doctype.name)) {
      serializedHTML = "<!DOCTYPE " + body.ownerDocument.doctype.name + ">\n" + serializedHTML;
    }
    if (SAFE_FOR_TEMPLATES) {
      arrayForEach([MUSTACHE_EXPR2, ERB_EXPR2, TMPLIT_EXPR2], (expr) => {
        serializedHTML = stringReplace(serializedHTML, expr, " ");
      });
    }
    return trustedTypesPolicy && RETURN_TRUSTED_TYPE ? trustedTypesPolicy.createHTML(serializedHTML) : serializedHTML;
  };
  DOMPurify.setConfig = function() {
    let cfg = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
    _parseConfig(cfg);
    SET_CONFIG = true;
  };
  DOMPurify.clearConfig = function() {
    CONFIG = null;
    SET_CONFIG = false;
  };
  DOMPurify.isValidAttribute = function(tag, attr, value) {
    if (!CONFIG) {
      _parseConfig({});
    }
    const lcTag = transformCaseFunc(tag);
    const lcName = transformCaseFunc(attr);
    return _isValidAttribute(lcTag, lcName, value);
  };
  DOMPurify.addHook = function(entryPoint, hookFunction) {
    if (typeof hookFunction !== "function") {
      return;
    }
    arrayPush(hooks[entryPoint], hookFunction);
  };
  DOMPurify.removeHook = function(entryPoint, hookFunction) {
    if (hookFunction !== void 0) {
      const index2 = arrayLastIndexOf(hooks[entryPoint], hookFunction);
      return index2 === -1 ? void 0 : arraySplice(hooks[entryPoint], index2, 1)[0];
    }
    return arrayPop(hooks[entryPoint]);
  };
  DOMPurify.removeHooks = function(entryPoint) {
    hooks[entryPoint] = [];
  };
  DOMPurify.removeAllHooks = function() {
    hooks = _createHooksMap();
  };
  return DOMPurify;
}
__name(createDOMPurify, "createDOMPurify");
var entries;
var setPrototypeOf;
var isFrozen;
var getPrototypeOf;
var getOwnPropertyDescriptor;
var freeze;
var seal;
var create;
var apply;
var construct;
var arrayForEach;
var arrayLastIndexOf;
var arrayPop;
var arrayPush;
var arraySplice;
var stringToLowerCase;
var stringToString;
var stringMatch;
var stringReplace;
var stringIndexOf;
var stringTrim;
var objectHasOwnProperty;
var regExpTest;
var typeErrorCreate;
var html$1;
var svg$1;
var svgFilters;
var svgDisallowed;
var mathMl$1;
var mathMlDisallowed;
var text;
var html;
var svg;
var mathMl;
var xml;
var MUSTACHE_EXPR;
var ERB_EXPR;
var TMPLIT_EXPR;
var DATA_ATTR;
var ARIA_ATTR;
var IS_ALLOWED_URI;
var IS_SCRIPT_OR_DATA;
var ATTR_WHITESPACE;
var DOCTYPE_NAME;
var CUSTOM_ELEMENT;
var EXPRESSIONS;
var NODE_TYPE;
var getGlobal;
var _createTrustedTypesPolicy;
var _createHooksMap;
var purify;
var init_purify_es = __esm({
  "../node_modules/dompurify/dist/purify.es.mjs"() {
    init_functionsRoutes_0_8044054200943971();
    ({
      entries,
      setPrototypeOf,
      isFrozen,
      getPrototypeOf,
      getOwnPropertyDescriptor
    } = Object);
    ({
      freeze,
      seal,
      create
    } = Object);
    ({
      apply,
      construct
    } = typeof Reflect !== "undefined" && Reflect);
    if (!freeze) {
      freeze = /* @__PURE__ */ __name2(/* @__PURE__ */ __name(function freeze2(x22) {
        return x22;
      }, "freeze2"), "freeze");
    }
    if (!seal) {
      seal = /* @__PURE__ */ __name2(/* @__PURE__ */ __name(function seal2(x22) {
        return x22;
      }, "seal2"), "seal");
    }
    if (!apply) {
      apply = /* @__PURE__ */ __name2(/* @__PURE__ */ __name(function apply2(fun, thisValue, args) {
        return fun.apply(thisValue, args);
      }, "apply2"), "apply");
    }
    if (!construct) {
      construct = /* @__PURE__ */ __name2(/* @__PURE__ */ __name(function construct2(Func, args) {
        return new Func(...args);
      }, "construct2"), "construct");
    }
    arrayForEach = unapply(Array.prototype.forEach);
    arrayLastIndexOf = unapply(Array.prototype.lastIndexOf);
    arrayPop = unapply(Array.prototype.pop);
    arrayPush = unapply(Array.prototype.push);
    arraySplice = unapply(Array.prototype.splice);
    stringToLowerCase = unapply(String.prototype.toLowerCase);
    stringToString = unapply(String.prototype.toString);
    stringMatch = unapply(String.prototype.match);
    stringReplace = unapply(String.prototype.replace);
    stringIndexOf = unapply(String.prototype.indexOf);
    stringTrim = unapply(String.prototype.trim);
    objectHasOwnProperty = unapply(Object.prototype.hasOwnProperty);
    regExpTest = unapply(RegExp.prototype.test);
    typeErrorCreate = unconstruct(TypeError);
    __name2(unapply, "unapply");
    __name2(unconstruct, "unconstruct");
    __name2(addToSet, "addToSet");
    __name2(cleanArray, "cleanArray");
    __name2(clone, "clone");
    __name2(lookupGetter, "lookupGetter");
    html$1 = freeze(["a", "abbr", "acronym", "address", "area", "article", "aside", "audio", "b", "bdi", "bdo", "big", "blink", "blockquote", "body", "br", "button", "canvas", "caption", "center", "cite", "code", "col", "colgroup", "content", "data", "datalist", "dd", "decorator", "del", "details", "dfn", "dialog", "dir", "div", "dl", "dt", "element", "em", "fieldset", "figcaption", "figure", "font", "footer", "form", "h1", "h2", "h3", "h4", "h5", "h6", "head", "header", "hgroup", "hr", "html", "i", "img", "input", "ins", "kbd", "label", "legend", "li", "main", "map", "mark", "marquee", "menu", "menuitem", "meter", "nav", "nobr", "ol", "optgroup", "option", "output", "p", "picture", "pre", "progress", "q", "rp", "rt", "ruby", "s", "samp", "section", "select", "shadow", "small", "source", "spacer", "span", "strike", "strong", "style", "sub", "summary", "sup", "table", "tbody", "td", "template", "textarea", "tfoot", "th", "thead", "time", "tr", "track", "tt", "u", "ul", "var", "video", "wbr"]);
    svg$1 = freeze(["svg", "a", "altglyph", "altglyphdef", "altglyphitem", "animatecolor", "animatemotion", "animatetransform", "circle", "clippath", "defs", "desc", "ellipse", "filter", "font", "g", "glyph", "glyphref", "hkern", "image", "line", "lineargradient", "marker", "mask", "metadata", "mpath", "path", "pattern", "polygon", "polyline", "radialgradient", "rect", "stop", "style", "switch", "symbol", "text", "textpath", "title", "tref", "tspan", "view", "vkern"]);
    svgFilters = freeze(["feBlend", "feColorMatrix", "feComponentTransfer", "feComposite", "feConvolveMatrix", "feDiffuseLighting", "feDisplacementMap", "feDistantLight", "feDropShadow", "feFlood", "feFuncA", "feFuncB", "feFuncG", "feFuncR", "feGaussianBlur", "feImage", "feMerge", "feMergeNode", "feMorphology", "feOffset", "fePointLight", "feSpecularLighting", "feSpotLight", "feTile", "feTurbulence"]);
    svgDisallowed = freeze(["animate", "color-profile", "cursor", "discard", "font-face", "font-face-format", "font-face-name", "font-face-src", "font-face-uri", "foreignobject", "hatch", "hatchpath", "mesh", "meshgradient", "meshpatch", "meshrow", "missing-glyph", "script", "set", "solidcolor", "unknown", "use"]);
    mathMl$1 = freeze(["math", "menclose", "merror", "mfenced", "mfrac", "mglyph", "mi", "mlabeledtr", "mmultiscripts", "mn", "mo", "mover", "mpadded", "mphantom", "mroot", "mrow", "ms", "mspace", "msqrt", "mstyle", "msub", "msup", "msubsup", "mtable", "mtd", "mtext", "mtr", "munder", "munderover", "mprescripts"]);
    mathMlDisallowed = freeze(["maction", "maligngroup", "malignmark", "mlongdiv", "mscarries", "mscarry", "msgroup", "mstack", "msline", "msrow", "semantics", "annotation", "annotation-xml", "mprescripts", "none"]);
    text = freeze(["#text"]);
    html = freeze(["accept", "action", "align", "alt", "autocapitalize", "autocomplete", "autopictureinpicture", "autoplay", "background", "bgcolor", "border", "capture", "cellpadding", "cellspacing", "checked", "cite", "class", "clear", "color", "cols", "colspan", "controls", "controlslist", "coords", "crossorigin", "datetime", "decoding", "default", "dir", "disabled", "disablepictureinpicture", "disableremoteplayback", "download", "draggable", "enctype", "enterkeyhint", "face", "for", "headers", "height", "hidden", "high", "href", "hreflang", "id", "inputmode", "integrity", "ismap", "kind", "label", "lang", "list", "loading", "loop", "low", "max", "maxlength", "media", "method", "min", "minlength", "multiple", "muted", "name", "nonce", "noshade", "novalidate", "nowrap", "open", "optimum", "pattern", "placeholder", "playsinline", "popover", "popovertarget", "popovertargetaction", "poster", "preload", "pubdate", "radiogroup", "readonly", "rel", "required", "rev", "reversed", "role", "rows", "rowspan", "spellcheck", "scope", "selected", "shape", "size", "sizes", "span", "srclang", "start", "src", "srcset", "step", "style", "summary", "tabindex", "title", "translate", "type", "usemap", "valign", "value", "width", "wrap", "xmlns", "slot"]);
    svg = freeze(["accent-height", "accumulate", "additive", "alignment-baseline", "amplitude", "ascent", "attributename", "attributetype", "azimuth", "basefrequency", "baseline-shift", "begin", "bias", "by", "class", "clip", "clippathunits", "clip-path", "clip-rule", "color", "color-interpolation", "color-interpolation-filters", "color-profile", "color-rendering", "cx", "cy", "d", "dx", "dy", "diffuseconstant", "direction", "display", "divisor", "dur", "edgemode", "elevation", "end", "exponent", "fill", "fill-opacity", "fill-rule", "filter", "filterunits", "flood-color", "flood-opacity", "font-family", "font-size", "font-size-adjust", "font-stretch", "font-style", "font-variant", "font-weight", "fx", "fy", "g1", "g2", "glyph-name", "glyphref", "gradientunits", "gradienttransform", "height", "href", "id", "image-rendering", "in", "in2", "intercept", "k", "k1", "k2", "k3", "k4", "kerning", "keypoints", "keysplines", "keytimes", "lang", "lengthadjust", "letter-spacing", "kernelmatrix", "kernelunitlength", "lighting-color", "local", "marker-end", "marker-mid", "marker-start", "markerheight", "markerunits", "markerwidth", "maskcontentunits", "maskunits", "max", "mask", "media", "method", "mode", "min", "name", "numoctaves", "offset", "operator", "opacity", "order", "orient", "orientation", "origin", "overflow", "paint-order", "path", "pathlength", "patterncontentunits", "patterntransform", "patternunits", "points", "preservealpha", "preserveaspectratio", "primitiveunits", "r", "rx", "ry", "radius", "refx", "refy", "repeatcount", "repeatdur", "restart", "result", "rotate", "scale", "seed", "shape-rendering", "slope", "specularconstant", "specularexponent", "spreadmethod", "startoffset", "stddeviation", "stitchtiles", "stop-color", "stop-opacity", "stroke-dasharray", "stroke-dashoffset", "stroke-linecap", "stroke-linejoin", "stroke-miterlimit", "stroke-opacity", "stroke", "stroke-width", "style", "surfacescale", "systemlanguage", "tabindex", "tablevalues", "targetx", "targety", "transform", "transform-origin", "text-anchor", "text-decoration", "text-rendering", "textlength", "type", "u1", "u2", "unicode", "values", "viewbox", "visibility", "version", "vert-adv-y", "vert-origin-x", "vert-origin-y", "width", "word-spacing", "wrap", "writing-mode", "xchannelselector", "ychannelselector", "x", "x1", "x2", "xmlns", "y", "y1", "y2", "z", "zoomandpan"]);
    mathMl = freeze(["accent", "accentunder", "align", "bevelled", "close", "columnsalign", "columnlines", "columnspan", "denomalign", "depth", "dir", "display", "displaystyle", "encoding", "fence", "frame", "height", "href", "id", "largeop", "length", "linethickness", "lspace", "lquote", "mathbackground", "mathcolor", "mathsize", "mathvariant", "maxsize", "minsize", "movablelimits", "notation", "numalign", "open", "rowalign", "rowlines", "rowspacing", "rowspan", "rspace", "rquote", "scriptlevel", "scriptminsize", "scriptsizemultiplier", "selection", "separator", "separators", "stretchy", "subscriptshift", "supscriptshift", "symmetric", "voffset", "width", "xmlns"]);
    xml = freeze(["xlink:href", "xml:id", "xlink:title", "xml:space", "xmlns:xlink"]);
    MUSTACHE_EXPR = seal(/\{\{[\w\W]*|[\w\W]*\}\}/gm);
    ERB_EXPR = seal(/<%[\w\W]*|[\w\W]*%>/gm);
    TMPLIT_EXPR = seal(/\$\{[\w\W]*/gm);
    DATA_ATTR = seal(/^data-[\-\w.\u00B7-\uFFFF]+$/);
    ARIA_ATTR = seal(/^aria-[\-\w]+$/);
    IS_ALLOWED_URI = seal(
      /^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i
      // eslint-disable-line no-useless-escape
    );
    IS_SCRIPT_OR_DATA = seal(/^(?:\w+script|data):/i);
    ATTR_WHITESPACE = seal(
      /[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g
      // eslint-disable-line no-control-regex
    );
    DOCTYPE_NAME = seal(/^html$/i);
    CUSTOM_ELEMENT = seal(/^[a-z][.\w]*(-[.\w]+)+$/i);
    EXPRESSIONS = /* @__PURE__ */ Object.freeze({
      __proto__: null,
      ARIA_ATTR,
      ATTR_WHITESPACE,
      CUSTOM_ELEMENT,
      DATA_ATTR,
      DOCTYPE_NAME,
      ERB_EXPR,
      IS_ALLOWED_URI,
      IS_SCRIPT_OR_DATA,
      MUSTACHE_EXPR,
      TMPLIT_EXPR
    });
    NODE_TYPE = {
      element: 1,
      attribute: 2,
      text: 3,
      cdataSection: 4,
      entityReference: 5,
      // Deprecated
      entityNode: 6,
      // Deprecated
      progressingInstruction: 7,
      comment: 8,
      document: 9,
      documentType: 10,
      documentFragment: 11,
      notation: 12
      // Deprecated
    };
    getGlobal = /* @__PURE__ */ __name2(/* @__PURE__ */ __name(function getGlobal2() {
      return typeof window === "undefined" ? null : window;
    }, "getGlobal2"), "getGlobal");
    _createTrustedTypesPolicy = /* @__PURE__ */ __name2(/* @__PURE__ */ __name(function _createTrustedTypesPolicy2(trustedTypes, purifyHostElement) {
      if (typeof trustedTypes !== "object" || typeof trustedTypes.createPolicy !== "function") {
        return null;
      }
      let suffix = null;
      const ATTR_NAME = "data-tt-policy-suffix";
      if (purifyHostElement && purifyHostElement.hasAttribute(ATTR_NAME)) {
        suffix = purifyHostElement.getAttribute(ATTR_NAME);
      }
      const policyName = "dompurify" + (suffix ? "#" + suffix : "");
      try {
        return trustedTypes.createPolicy(policyName, {
          createHTML(html2) {
            return html2;
          },
          createScriptURL(scriptUrl) {
            return scriptUrl;
          }
        });
      } catch (_3) {
        console.warn("TrustedTypes policy " + policyName + " could not be created.");
        return null;
      }
    }, "_createTrustedTypesPolicy2"), "_createTrustedTypesPolicy");
    _createHooksMap = /* @__PURE__ */ __name2(/* @__PURE__ */ __name(function _createHooksMap2() {
      return {
        afterSanitizeAttributes: [],
        afterSanitizeElements: [],
        afterSanitizeShadowDOM: [],
        beforeSanitizeAttributes: [],
        beforeSanitizeElements: [],
        beforeSanitizeShadowDOM: [],
        uponSanitizeAttribute: [],
        uponSanitizeElement: [],
        uponSanitizeShadowNode: []
      };
    }, "_createHooksMap2"), "_createHooksMap");
    __name2(createDOMPurify, "createDOMPurify");
    purify = createDOMPurify();
  }
});
var require_global_this = __commonJS({
  "../node_modules/core-js/internals/global-this.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var check = /* @__PURE__ */ __name2(function(it2) {
      return it2 && it2.Math === Math && it2;
    }, "check");
    module.exports = // eslint-disable-next-line es/no-global-this -- safe
    check(typeof globalThis == "object" && globalThis) || check(typeof window == "object" && window) || // eslint-disable-next-line no-restricted-globals -- safe
    check(typeof self == "object" && self) || check(typeof global == "object" && global) || check(typeof exports == "object" && exports) || // eslint-disable-next-line no-new-func -- fallback
    /* @__PURE__ */ function() {
      return this;
    }() || Function("return this")();
  }
});
var require_fails = __commonJS({
  "../node_modules/core-js/internals/fails.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    module.exports = function(exec) {
      try {
        return !!exec();
      } catch (error) {
        return true;
      }
    };
  }
});
var require_descriptors = __commonJS({
  "../node_modules/core-js/internals/descriptors.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var fails = require_fails();
    module.exports = !fails(function() {
      return Object.defineProperty({}, 1, { get: /* @__PURE__ */ __name2(function() {
        return 7;
      }, "get") })[1] !== 7;
    });
  }
});
var require_function_bind_native = __commonJS({
  "../node_modules/core-js/internals/function-bind-native.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var fails = require_fails();
    module.exports = !fails(function() {
      var test = function() {
      }.bind();
      return typeof test != "function" || test.hasOwnProperty("prototype");
    });
  }
});
var require_function_call = __commonJS({
  "../node_modules/core-js/internals/function-call.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var NATIVE_BIND = require_function_bind_native();
    var call = Function.prototype.call;
    module.exports = NATIVE_BIND ? call.bind(call) : function() {
      return call.apply(call, arguments);
    };
  }
});
var require_object_property_is_enumerable = __commonJS({
  "../node_modules/core-js/internals/object-property-is-enumerable.js"(exports) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var $propertyIsEnumerable = {}.propertyIsEnumerable;
    var getOwnPropertyDescriptor2 = Object.getOwnPropertyDescriptor;
    var NASHORN_BUG = getOwnPropertyDescriptor2 && !$propertyIsEnumerable.call({ 1: 2 }, 1);
    exports.f = NASHORN_BUG ? /* @__PURE__ */ __name2(/* @__PURE__ */ __name(function propertyIsEnumerable(V3) {
      var descriptor = getOwnPropertyDescriptor2(this, V3);
      return !!descriptor && descriptor.enumerable;
    }, "propertyIsEnumerable"), "propertyIsEnumerable") : $propertyIsEnumerable;
  }
});
var require_create_property_descriptor = __commonJS({
  "../node_modules/core-js/internals/create-property-descriptor.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    module.exports = function(bitmap, value) {
      return {
        enumerable: !(bitmap & 1),
        configurable: !(bitmap & 2),
        writable: !(bitmap & 4),
        value
      };
    };
  }
});
var require_function_uncurry_this = __commonJS({
  "../node_modules/core-js/internals/function-uncurry-this.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var NATIVE_BIND = require_function_bind_native();
    var FunctionPrototype = Function.prototype;
    var call = FunctionPrototype.call;
    var uncurryThisWithBind = NATIVE_BIND && FunctionPrototype.bind.bind(call, call);
    module.exports = NATIVE_BIND ? uncurryThisWithBind : function(fn) {
      return function() {
        return call.apply(fn, arguments);
      };
    };
  }
});
var require_classof_raw = __commonJS({
  "../node_modules/core-js/internals/classof-raw.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var uncurryThis = require_function_uncurry_this();
    var toString = uncurryThis({}.toString);
    var stringSlice = uncurryThis("".slice);
    module.exports = function(it2) {
      return stringSlice(toString(it2), 8, -1);
    };
  }
});
var require_indexed_object = __commonJS({
  "../node_modules/core-js/internals/indexed-object.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var uncurryThis = require_function_uncurry_this();
    var fails = require_fails();
    var classof = require_classof_raw();
    var $Object = Object;
    var split = uncurryThis("".split);
    module.exports = fails(function() {
      return !$Object("z").propertyIsEnumerable(0);
    }) ? function(it2) {
      return classof(it2) === "String" ? split(it2, "") : $Object(it2);
    } : $Object;
  }
});
var require_is_null_or_undefined = __commonJS({
  "../node_modules/core-js/internals/is-null-or-undefined.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    module.exports = function(it2) {
      return it2 === null || it2 === void 0;
    };
  }
});
var require_require_object_coercible = __commonJS({
  "../node_modules/core-js/internals/require-object-coercible.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var isNullOrUndefined = require_is_null_or_undefined();
    var $TypeError = TypeError;
    module.exports = function(it2) {
      if (isNullOrUndefined(it2)) throw new $TypeError("Can't call method on " + it2);
      return it2;
    };
  }
});
var require_to_indexed_object = __commonJS({
  "../node_modules/core-js/internals/to-indexed-object.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var IndexedObject = require_indexed_object();
    var requireObjectCoercible = require_require_object_coercible();
    module.exports = function(it2) {
      return IndexedObject(requireObjectCoercible(it2));
    };
  }
});
var require_is_callable = __commonJS({
  "../node_modules/core-js/internals/is-callable.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var documentAll = typeof document == "object" && document.all;
    module.exports = typeof documentAll == "undefined" && documentAll !== void 0 ? function(argument) {
      return typeof argument == "function" || argument === documentAll;
    } : function(argument) {
      return typeof argument == "function";
    };
  }
});
var require_is_object = __commonJS({
  "../node_modules/core-js/internals/is-object.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var isCallable = require_is_callable();
    module.exports = function(it2) {
      return typeof it2 == "object" ? it2 !== null : isCallable(it2);
    };
  }
});
var require_get_built_in = __commonJS({
  "../node_modules/core-js/internals/get-built-in.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var globalThis2 = require_global_this();
    var isCallable = require_is_callable();
    var aFunction = /* @__PURE__ */ __name2(function(argument) {
      return isCallable(argument) ? argument : void 0;
    }, "aFunction");
    module.exports = function(namespace, method) {
      return arguments.length < 2 ? aFunction(globalThis2[namespace]) : globalThis2[namespace] && globalThis2[namespace][method];
    };
  }
});
var require_object_is_prototype_of = __commonJS({
  "../node_modules/core-js/internals/object-is-prototype-of.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var uncurryThis = require_function_uncurry_this();
    module.exports = uncurryThis({}.isPrototypeOf);
  }
});
var require_environment_user_agent = __commonJS({
  "../node_modules/core-js/internals/environment-user-agent.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var globalThis2 = require_global_this();
    var navigator2 = globalThis2.navigator;
    var userAgent = navigator2 && navigator2.userAgent;
    module.exports = userAgent ? String(userAgent) : "";
  }
});
var require_environment_v8_version = __commonJS({
  "../node_modules/core-js/internals/environment-v8-version.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var globalThis2 = require_global_this();
    var userAgent = require_environment_user_agent();
    var process2 = globalThis2.process;
    var Deno2 = globalThis2.Deno;
    var versions = process2 && process2.versions || Deno2 && Deno2.version;
    var v8 = versions && versions.v8;
    var match2;
    var version2;
    if (v8) {
      match2 = v8.split(".");
      version2 = match2[0] > 0 && match2[0] < 4 ? 1 : +(match2[0] + match2[1]);
    }
    if (!version2 && userAgent) {
      match2 = userAgent.match(/Edge\/(\d+)/);
      if (!match2 || match2[1] >= 74) {
        match2 = userAgent.match(/Chrome\/(\d+)/);
        if (match2) version2 = +match2[1];
      }
    }
    module.exports = version2;
  }
});
var require_symbol_constructor_detection = __commonJS({
  "../node_modules/core-js/internals/symbol-constructor-detection.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var V8_VERSION = require_environment_v8_version();
    var fails = require_fails();
    var globalThis2 = require_global_this();
    var $String = globalThis2.String;
    module.exports = !!Object.getOwnPropertySymbols && !fails(function() {
      var symbol = Symbol("symbol detection");
      return !$String(symbol) || !(Object(symbol) instanceof Symbol) || // Chrome 38-40 symbols are not inherited from DOM collections prototypes to instances
      !Symbol.sham && V8_VERSION && V8_VERSION < 41;
    });
  }
});
var require_use_symbol_as_uid = __commonJS({
  "../node_modules/core-js/internals/use-symbol-as-uid.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var NATIVE_SYMBOL = require_symbol_constructor_detection();
    module.exports = NATIVE_SYMBOL && !Symbol.sham && typeof Symbol.iterator == "symbol";
  }
});
var require_is_symbol = __commonJS({
  "../node_modules/core-js/internals/is-symbol.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var getBuiltIn = require_get_built_in();
    var isCallable = require_is_callable();
    var isPrototypeOf = require_object_is_prototype_of();
    var USE_SYMBOL_AS_UID = require_use_symbol_as_uid();
    var $Object = Object;
    module.exports = USE_SYMBOL_AS_UID ? function(it2) {
      return typeof it2 == "symbol";
    } : function(it2) {
      var $Symbol = getBuiltIn("Symbol");
      return isCallable($Symbol) && isPrototypeOf($Symbol.prototype, $Object(it2));
    };
  }
});
var require_try_to_string = __commonJS({
  "../node_modules/core-js/internals/try-to-string.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var $String = String;
    module.exports = function(argument) {
      try {
        return $String(argument);
      } catch (error) {
        return "Object";
      }
    };
  }
});
var require_a_callable = __commonJS({
  "../node_modules/core-js/internals/a-callable.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var isCallable = require_is_callable();
    var tryToString = require_try_to_string();
    var $TypeError = TypeError;
    module.exports = function(argument) {
      if (isCallable(argument)) return argument;
      throw new $TypeError(tryToString(argument) + " is not a function");
    };
  }
});
var require_get_method = __commonJS({
  "../node_modules/core-js/internals/get-method.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var aCallable = require_a_callable();
    var isNullOrUndefined = require_is_null_or_undefined();
    module.exports = function(V3, P2) {
      var func = V3[P2];
      return isNullOrUndefined(func) ? void 0 : aCallable(func);
    };
  }
});
var require_ordinary_to_primitive = __commonJS({
  "../node_modules/core-js/internals/ordinary-to-primitive.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var call = require_function_call();
    var isCallable = require_is_callable();
    var isObject2 = require_is_object();
    var $TypeError = TypeError;
    module.exports = function(input, pref) {
      var fn, val;
      if (pref === "string" && isCallable(fn = input.toString) && !isObject2(val = call(fn, input))) return val;
      if (isCallable(fn = input.valueOf) && !isObject2(val = call(fn, input))) return val;
      if (pref !== "string" && isCallable(fn = input.toString) && !isObject2(val = call(fn, input))) return val;
      throw new $TypeError("Can't convert object to primitive value");
    };
  }
});
var require_is_pure = __commonJS({
  "../node_modules/core-js/internals/is-pure.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    module.exports = false;
  }
});
var require_define_global_property = __commonJS({
  "../node_modules/core-js/internals/define-global-property.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var globalThis2 = require_global_this();
    var defineProperty = Object.defineProperty;
    module.exports = function(key, value) {
      try {
        defineProperty(globalThis2, key, { value, configurable: true, writable: true });
      } catch (error) {
        globalThis2[key] = value;
      }
      return value;
    };
  }
});
var require_shared_store = __commonJS({
  "../node_modules/core-js/internals/shared-store.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var IS_PURE = require_is_pure();
    var globalThis2 = require_global_this();
    var defineGlobalProperty = require_define_global_property();
    var SHARED = "__core-js_shared__";
    var store = module.exports = globalThis2[SHARED] || defineGlobalProperty(SHARED, {});
    (store.versions || (store.versions = [])).push({
      version: "3.45.1",
      mode: IS_PURE ? "pure" : "global",
      copyright: "\xA9 2014-2025 Denis Pushkarev (zloirock.ru)",
      license: "https://github.com/zloirock/core-js/blob/v3.45.1/LICENSE",
      source: "https://github.com/zloirock/core-js"
    });
  }
});
var require_shared = __commonJS({
  "../node_modules/core-js/internals/shared.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var store = require_shared_store();
    module.exports = function(key, value) {
      return store[key] || (store[key] = value || {});
    };
  }
});
var require_to_object = __commonJS({
  "../node_modules/core-js/internals/to-object.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var requireObjectCoercible = require_require_object_coercible();
    var $Object = Object;
    module.exports = function(argument) {
      return $Object(requireObjectCoercible(argument));
    };
  }
});
var require_has_own_property = __commonJS({
  "../node_modules/core-js/internals/has-own-property.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var uncurryThis = require_function_uncurry_this();
    var toObject = require_to_object();
    var hasOwnProperty = uncurryThis({}.hasOwnProperty);
    module.exports = Object.hasOwn || /* @__PURE__ */ __name2(/* @__PURE__ */ __name(function hasOwn(it2, key) {
      return hasOwnProperty(toObject(it2), key);
    }, "hasOwn"), "hasOwn");
  }
});
var require_uid = __commonJS({
  "../node_modules/core-js/internals/uid.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var uncurryThis = require_function_uncurry_this();
    var id = 0;
    var postfix = Math.random();
    var toString = uncurryThis(1.1.toString);
    module.exports = function(key) {
      return "Symbol(" + (key === void 0 ? "" : key) + ")_" + toString(++id + postfix, 36);
    };
  }
});
var require_well_known_symbol = __commonJS({
  "../node_modules/core-js/internals/well-known-symbol.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var globalThis2 = require_global_this();
    var shared = require_shared();
    var hasOwn = require_has_own_property();
    var uid = require_uid();
    var NATIVE_SYMBOL = require_symbol_constructor_detection();
    var USE_SYMBOL_AS_UID = require_use_symbol_as_uid();
    var Symbol2 = globalThis2.Symbol;
    var WellKnownSymbolsStore = shared("wks");
    var createWellKnownSymbol = USE_SYMBOL_AS_UID ? Symbol2["for"] || Symbol2 : Symbol2 && Symbol2.withoutSetter || uid;
    module.exports = function(name) {
      if (!hasOwn(WellKnownSymbolsStore, name)) {
        WellKnownSymbolsStore[name] = NATIVE_SYMBOL && hasOwn(Symbol2, name) ? Symbol2[name] : createWellKnownSymbol("Symbol." + name);
      }
      return WellKnownSymbolsStore[name];
    };
  }
});
var require_to_primitive = __commonJS({
  "../node_modules/core-js/internals/to-primitive.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var call = require_function_call();
    var isObject2 = require_is_object();
    var isSymbol = require_is_symbol();
    var getMethod = require_get_method();
    var ordinaryToPrimitive = require_ordinary_to_primitive();
    var wellKnownSymbol = require_well_known_symbol();
    var $TypeError = TypeError;
    var TO_PRIMITIVE = wellKnownSymbol("toPrimitive");
    module.exports = function(input, pref) {
      if (!isObject2(input) || isSymbol(input)) return input;
      var exoticToPrim = getMethod(input, TO_PRIMITIVE);
      var result;
      if (exoticToPrim) {
        if (pref === void 0) pref = "default";
        result = call(exoticToPrim, input, pref);
        if (!isObject2(result) || isSymbol(result)) return result;
        throw new $TypeError("Can't convert object to primitive value");
      }
      if (pref === void 0) pref = "number";
      return ordinaryToPrimitive(input, pref);
    };
  }
});
var require_to_property_key = __commonJS({
  "../node_modules/core-js/internals/to-property-key.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var toPrimitive2 = require_to_primitive();
    var isSymbol = require_is_symbol();
    module.exports = function(argument) {
      var key = toPrimitive2(argument, "string");
      return isSymbol(key) ? key : key + "";
    };
  }
});
var require_document_create_element = __commonJS({
  "../node_modules/core-js/internals/document-create-element.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var globalThis2 = require_global_this();
    var isObject2 = require_is_object();
    var document2 = globalThis2.document;
    var EXISTS = isObject2(document2) && isObject2(document2.createElement);
    module.exports = function(it2) {
      return EXISTS ? document2.createElement(it2) : {};
    };
  }
});
var require_ie8_dom_define = __commonJS({
  "../node_modules/core-js/internals/ie8-dom-define.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var DESCRIPTORS = require_descriptors();
    var fails = require_fails();
    var createElement = require_document_create_element();
    module.exports = !DESCRIPTORS && !fails(function() {
      return Object.defineProperty(createElement("div"), "a", {
        get: /* @__PURE__ */ __name2(function() {
          return 7;
        }, "get")
      }).a !== 7;
    });
  }
});
var require_object_get_own_property_descriptor = __commonJS({
  "../node_modules/core-js/internals/object-get-own-property-descriptor.js"(exports) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var DESCRIPTORS = require_descriptors();
    var call = require_function_call();
    var propertyIsEnumerableModule = require_object_property_is_enumerable();
    var createPropertyDescriptor = require_create_property_descriptor();
    var toIndexedObject = require_to_indexed_object();
    var toPropertyKey2 = require_to_property_key();
    var hasOwn = require_has_own_property();
    var IE8_DOM_DEFINE = require_ie8_dom_define();
    var $getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;
    exports.f = DESCRIPTORS ? $getOwnPropertyDescriptor : /* @__PURE__ */ __name2(/* @__PURE__ */ __name(function getOwnPropertyDescriptor2(O3, P2) {
      O3 = toIndexedObject(O3);
      P2 = toPropertyKey2(P2);
      if (IE8_DOM_DEFINE) try {
        return $getOwnPropertyDescriptor(O3, P2);
      } catch (error) {
      }
      if (hasOwn(O3, P2)) return createPropertyDescriptor(!call(propertyIsEnumerableModule.f, O3, P2), O3[P2]);
    }, "getOwnPropertyDescriptor2"), "getOwnPropertyDescriptor");
  }
});
var require_v8_prototype_define_bug = __commonJS({
  "../node_modules/core-js/internals/v8-prototype-define-bug.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var DESCRIPTORS = require_descriptors();
    var fails = require_fails();
    module.exports = DESCRIPTORS && fails(function() {
      return Object.defineProperty(function() {
      }, "prototype", {
        value: 42,
        writable: false
      }).prototype !== 42;
    });
  }
});
var require_an_object = __commonJS({
  "../node_modules/core-js/internals/an-object.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var isObject2 = require_is_object();
    var $String = String;
    var $TypeError = TypeError;
    module.exports = function(argument) {
      if (isObject2(argument)) return argument;
      throw new $TypeError($String(argument) + " is not an object");
    };
  }
});
var require_object_define_property = __commonJS({
  "../node_modules/core-js/internals/object-define-property.js"(exports) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var DESCRIPTORS = require_descriptors();
    var IE8_DOM_DEFINE = require_ie8_dom_define();
    var V8_PROTOTYPE_DEFINE_BUG = require_v8_prototype_define_bug();
    var anObject = require_an_object();
    var toPropertyKey2 = require_to_property_key();
    var $TypeError = TypeError;
    var $defineProperty = Object.defineProperty;
    var $getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;
    var ENUMERABLE = "enumerable";
    var CONFIGURABLE = "configurable";
    var WRITABLE = "writable";
    exports.f = DESCRIPTORS ? V8_PROTOTYPE_DEFINE_BUG ? /* @__PURE__ */ __name2(/* @__PURE__ */ __name(function defineProperty(O3, P2, Attributes) {
      anObject(O3);
      P2 = toPropertyKey2(P2);
      anObject(Attributes);
      if (typeof O3 === "function" && P2 === "prototype" && "value" in Attributes && WRITABLE in Attributes && !Attributes[WRITABLE]) {
        var current = $getOwnPropertyDescriptor(O3, P2);
        if (current && current[WRITABLE]) {
          O3[P2] = Attributes.value;
          Attributes = {
            configurable: CONFIGURABLE in Attributes ? Attributes[CONFIGURABLE] : current[CONFIGURABLE],
            enumerable: ENUMERABLE in Attributes ? Attributes[ENUMERABLE] : current[ENUMERABLE],
            writable: false
          };
        }
      }
      return $defineProperty(O3, P2, Attributes);
    }, "defineProperty"), "defineProperty") : $defineProperty : /* @__PURE__ */ __name2(/* @__PURE__ */ __name(function defineProperty(O3, P2, Attributes) {
      anObject(O3);
      P2 = toPropertyKey2(P2);
      anObject(Attributes);
      if (IE8_DOM_DEFINE) try {
        return $defineProperty(O3, P2, Attributes);
      } catch (error) {
      }
      if ("get" in Attributes || "set" in Attributes) throw new $TypeError("Accessors not supported");
      if ("value" in Attributes) O3[P2] = Attributes.value;
      return O3;
    }, "defineProperty"), "defineProperty");
  }
});
var require_create_non_enumerable_property = __commonJS({
  "../node_modules/core-js/internals/create-non-enumerable-property.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var DESCRIPTORS = require_descriptors();
    var definePropertyModule = require_object_define_property();
    var createPropertyDescriptor = require_create_property_descriptor();
    module.exports = DESCRIPTORS ? function(object, key, value) {
      return definePropertyModule.f(object, key, createPropertyDescriptor(1, value));
    } : function(object, key, value) {
      object[key] = value;
      return object;
    };
  }
});
var require_function_name = __commonJS({
  "../node_modules/core-js/internals/function-name.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var DESCRIPTORS = require_descriptors();
    var hasOwn = require_has_own_property();
    var FunctionPrototype = Function.prototype;
    var getDescriptor = DESCRIPTORS && Object.getOwnPropertyDescriptor;
    var EXISTS = hasOwn(FunctionPrototype, "name");
    var PROPER = EXISTS && (/* @__PURE__ */ __name2(/* @__PURE__ */ __name(function something() {
    }, "something"), "something")).name === "something";
    var CONFIGURABLE = EXISTS && (!DESCRIPTORS || DESCRIPTORS && getDescriptor(FunctionPrototype, "name").configurable);
    module.exports = {
      EXISTS,
      PROPER,
      CONFIGURABLE
    };
  }
});
var require_inspect_source = __commonJS({
  "../node_modules/core-js/internals/inspect-source.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var uncurryThis = require_function_uncurry_this();
    var isCallable = require_is_callable();
    var store = require_shared_store();
    var functionToString = uncurryThis(Function.toString);
    if (!isCallable(store.inspectSource)) {
      store.inspectSource = function(it2) {
        return functionToString(it2);
      };
    }
    module.exports = store.inspectSource;
  }
});
var require_weak_map_basic_detection = __commonJS({
  "../node_modules/core-js/internals/weak-map-basic-detection.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var globalThis2 = require_global_this();
    var isCallable = require_is_callable();
    var WeakMap2 = globalThis2.WeakMap;
    module.exports = isCallable(WeakMap2) && /native code/.test(String(WeakMap2));
  }
});
var require_shared_key = __commonJS({
  "../node_modules/core-js/internals/shared-key.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var shared = require_shared();
    var uid = require_uid();
    var keys = shared("keys");
    module.exports = function(key) {
      return keys[key] || (keys[key] = uid(key));
    };
  }
});
var require_hidden_keys = __commonJS({
  "../node_modules/core-js/internals/hidden-keys.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    module.exports = {};
  }
});
var require_internal_state = __commonJS({
  "../node_modules/core-js/internals/internal-state.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var NATIVE_WEAK_MAP = require_weak_map_basic_detection();
    var globalThis2 = require_global_this();
    var isObject2 = require_is_object();
    var createNonEnumerableProperty = require_create_non_enumerable_property();
    var hasOwn = require_has_own_property();
    var shared = require_shared_store();
    var sharedKey = require_shared_key();
    var hiddenKeys = require_hidden_keys();
    var OBJECT_ALREADY_INITIALIZED = "Object already initialized";
    var TypeError2 = globalThis2.TypeError;
    var WeakMap2 = globalThis2.WeakMap;
    var set;
    var get;
    var has;
    var enforce = /* @__PURE__ */ __name2(function(it2) {
      return has(it2) ? get(it2) : set(it2, {});
    }, "enforce");
    var getterFor = /* @__PURE__ */ __name2(function(TYPE) {
      return function(it2) {
        var state;
        if (!isObject2(it2) || (state = get(it2)).type !== TYPE) {
          throw new TypeError2("Incompatible receiver, " + TYPE + " required");
        }
        return state;
      };
    }, "getterFor");
    if (NATIVE_WEAK_MAP || shared.state) {
      store = shared.state || (shared.state = new WeakMap2());
      store.get = store.get;
      store.has = store.has;
      store.set = store.set;
      set = /* @__PURE__ */ __name2(function(it2, metadata) {
        if (store.has(it2)) throw new TypeError2(OBJECT_ALREADY_INITIALIZED);
        metadata.facade = it2;
        store.set(it2, metadata);
        return metadata;
      }, "set");
      get = /* @__PURE__ */ __name2(function(it2) {
        return store.get(it2) || {};
      }, "get");
      has = /* @__PURE__ */ __name2(function(it2) {
        return store.has(it2);
      }, "has");
    } else {
      STATE = sharedKey("state");
      hiddenKeys[STATE] = true;
      set = /* @__PURE__ */ __name2(function(it2, metadata) {
        if (hasOwn(it2, STATE)) throw new TypeError2(OBJECT_ALREADY_INITIALIZED);
        metadata.facade = it2;
        createNonEnumerableProperty(it2, STATE, metadata);
        return metadata;
      }, "set");
      get = /* @__PURE__ */ __name2(function(it2) {
        return hasOwn(it2, STATE) ? it2[STATE] : {};
      }, "get");
      has = /* @__PURE__ */ __name2(function(it2) {
        return hasOwn(it2, STATE);
      }, "has");
    }
    var store;
    var STATE;
    module.exports = {
      set,
      get,
      has,
      enforce,
      getterFor
    };
  }
});
var require_make_built_in = __commonJS({
  "../node_modules/core-js/internals/make-built-in.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var uncurryThis = require_function_uncurry_this();
    var fails = require_fails();
    var isCallable = require_is_callable();
    var hasOwn = require_has_own_property();
    var DESCRIPTORS = require_descriptors();
    var CONFIGURABLE_FUNCTION_NAME = require_function_name().CONFIGURABLE;
    var inspectSource = require_inspect_source();
    var InternalStateModule = require_internal_state();
    var enforceInternalState = InternalStateModule.enforce;
    var getInternalState = InternalStateModule.get;
    var $String = String;
    var defineProperty = Object.defineProperty;
    var stringSlice = uncurryThis("".slice);
    var replace = uncurryThis("".replace);
    var join = uncurryThis([].join);
    var CONFIGURABLE_LENGTH = DESCRIPTORS && !fails(function() {
      return defineProperty(function() {
      }, "length", { value: 8 }).length !== 8;
    });
    var TEMPLATE = String(String).split("String");
    var makeBuiltIn = module.exports = function(value, name, options) {
      if (stringSlice($String(name), 0, 7) === "Symbol(") {
        name = "[" + replace($String(name), /^Symbol\(([^)]*)\).*$/, "$1") + "]";
      }
      if (options && options.getter) name = "get " + name;
      if (options && options.setter) name = "set " + name;
      if (!hasOwn(value, "name") || CONFIGURABLE_FUNCTION_NAME && value.name !== name) {
        if (DESCRIPTORS) defineProperty(value, "name", { value: name, configurable: true });
        else value.name = name;
      }
      if (CONFIGURABLE_LENGTH && options && hasOwn(options, "arity") && value.length !== options.arity) {
        defineProperty(value, "length", { value: options.arity });
      }
      try {
        if (options && hasOwn(options, "constructor") && options.constructor) {
          if (DESCRIPTORS) defineProperty(value, "prototype", { writable: false });
        } else if (value.prototype) value.prototype = void 0;
      } catch (error) {
      }
      var state = enforceInternalState(value);
      if (!hasOwn(state, "source")) {
        state.source = join(TEMPLATE, typeof name == "string" ? name : "");
      }
      return value;
    };
    Function.prototype.toString = makeBuiltIn(/* @__PURE__ */ __name2(/* @__PURE__ */ __name(function toString() {
      return isCallable(this) && getInternalState(this).source || inspectSource(this);
    }, "toString"), "toString"), "toString");
  }
});
var require_define_built_in = __commonJS({
  "../node_modules/core-js/internals/define-built-in.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var isCallable = require_is_callable();
    var definePropertyModule = require_object_define_property();
    var makeBuiltIn = require_make_built_in();
    var defineGlobalProperty = require_define_global_property();
    module.exports = function(O3, key, value, options) {
      if (!options) options = {};
      var simple = options.enumerable;
      var name = options.name !== void 0 ? options.name : key;
      if (isCallable(value)) makeBuiltIn(value, name, options);
      if (options.global) {
        if (simple) O3[key] = value;
        else defineGlobalProperty(key, value);
      } else {
        try {
          if (!options.unsafe) delete O3[key];
          else if (O3[key]) simple = true;
        } catch (error) {
        }
        if (simple) O3[key] = value;
        else definePropertyModule.f(O3, key, {
          value,
          enumerable: false,
          configurable: !options.nonConfigurable,
          writable: !options.nonWritable
        });
      }
      return O3;
    };
  }
});
var require_math_trunc = __commonJS({
  "../node_modules/core-js/internals/math-trunc.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var ceil = Math.ceil;
    var floor = Math.floor;
    module.exports = Math.trunc || /* @__PURE__ */ __name2(/* @__PURE__ */ __name(function trunc(x22) {
      var n3 = +x22;
      return (n3 > 0 ? floor : ceil)(n3);
    }, "trunc"), "trunc");
  }
});
var require_to_integer_or_infinity = __commonJS({
  "../node_modules/core-js/internals/to-integer-or-infinity.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var trunc = require_math_trunc();
    module.exports = function(argument) {
      var number = +argument;
      return number !== number || number === 0 ? 0 : trunc(number);
    };
  }
});
var require_to_absolute_index = __commonJS({
  "../node_modules/core-js/internals/to-absolute-index.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var toIntegerOrInfinity = require_to_integer_or_infinity();
    var max2 = Math.max;
    var min = Math.min;
    module.exports = function(index2, length) {
      var integer2 = toIntegerOrInfinity(index2);
      return integer2 < 0 ? max2(integer2 + length, 0) : min(integer2, length);
    };
  }
});
var require_to_length = __commonJS({
  "../node_modules/core-js/internals/to-length.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var toIntegerOrInfinity = require_to_integer_or_infinity();
    var min = Math.min;
    module.exports = function(argument) {
      var len = toIntegerOrInfinity(argument);
      return len > 0 ? min(len, 9007199254740991) : 0;
    };
  }
});
var require_length_of_array_like = __commonJS({
  "../node_modules/core-js/internals/length-of-array-like.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var toLength = require_to_length();
    module.exports = function(obj) {
      return toLength(obj.length);
    };
  }
});
var require_array_includes = __commonJS({
  "../node_modules/core-js/internals/array-includes.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var toIndexedObject = require_to_indexed_object();
    var toAbsoluteIndex = require_to_absolute_index();
    var lengthOfArrayLike = require_length_of_array_like();
    var createMethod = /* @__PURE__ */ __name2(function(IS_INCLUDES) {
      return function($this, el, fromIndex) {
        var O3 = toIndexedObject($this);
        var length = lengthOfArrayLike(O3);
        if (length === 0) return !IS_INCLUDES && -1;
        var index2 = toAbsoluteIndex(fromIndex, length);
        var value;
        if (IS_INCLUDES && el !== el) while (length > index2) {
          value = O3[index2++];
          if (value !== value) return true;
        }
        else for (; length > index2; index2++) {
          if ((IS_INCLUDES || index2 in O3) && O3[index2] === el) return IS_INCLUDES || index2 || 0;
        }
        return !IS_INCLUDES && -1;
      };
    }, "createMethod");
    module.exports = {
      // `Array.prototype.includes` method
      // https://tc39.es/ecma262/#sec-array.prototype.includes
      includes: createMethod(true),
      // `Array.prototype.indexOf` method
      // https://tc39.es/ecma262/#sec-array.prototype.indexof
      indexOf: createMethod(false)
    };
  }
});
var require_object_keys_internal = __commonJS({
  "../node_modules/core-js/internals/object-keys-internal.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var uncurryThis = require_function_uncurry_this();
    var hasOwn = require_has_own_property();
    var toIndexedObject = require_to_indexed_object();
    var indexOf = require_array_includes().indexOf;
    var hiddenKeys = require_hidden_keys();
    var push = uncurryThis([].push);
    module.exports = function(object, names) {
      var O3 = toIndexedObject(object);
      var i33 = 0;
      var result = [];
      var key;
      for (key in O3) !hasOwn(hiddenKeys, key) && hasOwn(O3, key) && push(result, key);
      while (names.length > i33) if (hasOwn(O3, key = names[i33++])) {
        ~indexOf(result, key) || push(result, key);
      }
      return result;
    };
  }
});
var require_enum_bug_keys = __commonJS({
  "../node_modules/core-js/internals/enum-bug-keys.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    module.exports = [
      "constructor",
      "hasOwnProperty",
      "isPrototypeOf",
      "propertyIsEnumerable",
      "toLocaleString",
      "toString",
      "valueOf"
    ];
  }
});
var require_object_get_own_property_names = __commonJS({
  "../node_modules/core-js/internals/object-get-own-property-names.js"(exports) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var internalObjectKeys = require_object_keys_internal();
    var enumBugKeys = require_enum_bug_keys();
    var hiddenKeys = enumBugKeys.concat("length", "prototype");
    exports.f = Object.getOwnPropertyNames || /* @__PURE__ */ __name2(/* @__PURE__ */ __name(function getOwnPropertyNames(O3) {
      return internalObjectKeys(O3, hiddenKeys);
    }, "getOwnPropertyNames"), "getOwnPropertyNames");
  }
});
var require_object_get_own_property_symbols = __commonJS({
  "../node_modules/core-js/internals/object-get-own-property-symbols.js"(exports) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    exports.f = Object.getOwnPropertySymbols;
  }
});
var require_own_keys = __commonJS({
  "../node_modules/core-js/internals/own-keys.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var getBuiltIn = require_get_built_in();
    var uncurryThis = require_function_uncurry_this();
    var getOwnPropertyNamesModule = require_object_get_own_property_names();
    var getOwnPropertySymbolsModule = require_object_get_own_property_symbols();
    var anObject = require_an_object();
    var concat = uncurryThis([].concat);
    module.exports = getBuiltIn("Reflect", "ownKeys") || /* @__PURE__ */ __name2(/* @__PURE__ */ __name(function ownKeys2(it2) {
      var keys = getOwnPropertyNamesModule.f(anObject(it2));
      var getOwnPropertySymbols = getOwnPropertySymbolsModule.f;
      return getOwnPropertySymbols ? concat(keys, getOwnPropertySymbols(it2)) : keys;
    }, "ownKeys2"), "ownKeys");
  }
});
var require_copy_constructor_properties = __commonJS({
  "../node_modules/core-js/internals/copy-constructor-properties.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var hasOwn = require_has_own_property();
    var ownKeys2 = require_own_keys();
    var getOwnPropertyDescriptorModule = require_object_get_own_property_descriptor();
    var definePropertyModule = require_object_define_property();
    module.exports = function(target, source, exceptions) {
      var keys = ownKeys2(source);
      var defineProperty = definePropertyModule.f;
      var getOwnPropertyDescriptor2 = getOwnPropertyDescriptorModule.f;
      for (var i33 = 0; i33 < keys.length; i33++) {
        var key = keys[i33];
        if (!hasOwn(target, key) && !(exceptions && hasOwn(exceptions, key))) {
          defineProperty(target, key, getOwnPropertyDescriptor2(source, key));
        }
      }
    };
  }
});
var require_is_forced = __commonJS({
  "../node_modules/core-js/internals/is-forced.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var fails = require_fails();
    var isCallable = require_is_callable();
    var replacement = /#|\.prototype\./;
    var isForced = /* @__PURE__ */ __name2(function(feature, detection) {
      var value = data[normalize(feature)];
      return value === POLYFILL ? true : value === NATIVE ? false : isCallable(detection) ? fails(detection) : !!detection;
    }, "isForced");
    var normalize = isForced.normalize = function(string) {
      return String(string).replace(replacement, ".").toLowerCase();
    };
    var data = isForced.data = {};
    var NATIVE = isForced.NATIVE = "N";
    var POLYFILL = isForced.POLYFILL = "P";
    module.exports = isForced;
  }
});
var require_export = __commonJS({
  "../node_modules/core-js/internals/export.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var globalThis2 = require_global_this();
    var getOwnPropertyDescriptor2 = require_object_get_own_property_descriptor().f;
    var createNonEnumerableProperty = require_create_non_enumerable_property();
    var defineBuiltIn = require_define_built_in();
    var defineGlobalProperty = require_define_global_property();
    var copyConstructorProperties = require_copy_constructor_properties();
    var isForced = require_is_forced();
    module.exports = function(options, source) {
      var TARGET = options.target;
      var GLOBAL = options.global;
      var STATIC = options.stat;
      var FORCED, target, key, targetProperty, sourceProperty, descriptor;
      if (GLOBAL) {
        target = globalThis2;
      } else if (STATIC) {
        target = globalThis2[TARGET] || defineGlobalProperty(TARGET, {});
      } else {
        target = globalThis2[TARGET] && globalThis2[TARGET].prototype;
      }
      if (target) for (key in source) {
        sourceProperty = source[key];
        if (options.dontCallGetSet) {
          descriptor = getOwnPropertyDescriptor2(target, key);
          targetProperty = descriptor && descriptor.value;
        } else targetProperty = target[key];
        FORCED = isForced(GLOBAL ? key : TARGET + (STATIC ? "." : "#") + key, options.forced);
        if (!FORCED && targetProperty !== void 0) {
          if (typeof sourceProperty == typeof targetProperty) continue;
          copyConstructorProperties(sourceProperty, targetProperty);
        }
        if (options.sham || targetProperty && targetProperty.sham) {
          createNonEnumerableProperty(sourceProperty, "sham", true);
        }
        defineBuiltIn(target, key, sourceProperty, options);
      }
    };
  }
});
var require_environment = __commonJS({
  "../node_modules/core-js/internals/environment.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var globalThis2 = require_global_this();
    var userAgent = require_environment_user_agent();
    var classof = require_classof_raw();
    var userAgentStartsWith = /* @__PURE__ */ __name2(function(string) {
      return userAgent.slice(0, string.length) === string;
    }, "userAgentStartsWith");
    module.exports = function() {
      if (userAgentStartsWith("Bun/")) return "BUN";
      if (userAgentStartsWith("Cloudflare-Workers")) return "CLOUDFLARE";
      if (userAgentStartsWith("Deno/")) return "DENO";
      if (userAgentStartsWith("Node.js/")) return "NODE";
      if (globalThis2.Bun && typeof Bun.version == "string") return "BUN";
      if (globalThis2.Deno && typeof Deno.version == "object") return "DENO";
      if (classof(globalThis2.process) === "process") return "NODE";
      if (globalThis2.window && globalThis2.document) return "BROWSER";
      return "REST";
    }();
  }
});
var require_environment_is_node = __commonJS({
  "../node_modules/core-js/internals/environment-is-node.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var ENVIRONMENT = require_environment();
    module.exports = ENVIRONMENT === "NODE";
  }
});
var require_path = __commonJS({
  "../node_modules/core-js/internals/path.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var globalThis2 = require_global_this();
    module.exports = globalThis2;
  }
});
var require_function_uncurry_this_accessor = __commonJS({
  "../node_modules/core-js/internals/function-uncurry-this-accessor.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var uncurryThis = require_function_uncurry_this();
    var aCallable = require_a_callable();
    module.exports = function(object, key, method) {
      try {
        return uncurryThis(aCallable(Object.getOwnPropertyDescriptor(object, key)[method]));
      } catch (error) {
      }
    };
  }
});
var require_is_possible_prototype = __commonJS({
  "../node_modules/core-js/internals/is-possible-prototype.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var isObject2 = require_is_object();
    module.exports = function(argument) {
      return isObject2(argument) || argument === null;
    };
  }
});
var require_a_possible_prototype = __commonJS({
  "../node_modules/core-js/internals/a-possible-prototype.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var isPossiblePrototype = require_is_possible_prototype();
    var $String = String;
    var $TypeError = TypeError;
    module.exports = function(argument) {
      if (isPossiblePrototype(argument)) return argument;
      throw new $TypeError("Can't set " + $String(argument) + " as a prototype");
    };
  }
});
var require_object_set_prototype_of = __commonJS({
  "../node_modules/core-js/internals/object-set-prototype-of.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var uncurryThisAccessor = require_function_uncurry_this_accessor();
    var isObject2 = require_is_object();
    var requireObjectCoercible = require_require_object_coercible();
    var aPossiblePrototype = require_a_possible_prototype();
    module.exports = Object.setPrototypeOf || ("__proto__" in {} ? function() {
      var CORRECT_SETTER = false;
      var test = {};
      var setter;
      try {
        setter = uncurryThisAccessor(Object.prototype, "__proto__", "set");
        setter(test, []);
        CORRECT_SETTER = test instanceof Array;
      } catch (error) {
      }
      return /* @__PURE__ */ __name2(/* @__PURE__ */ __name(function setPrototypeOf2(O3, proto) {
        requireObjectCoercible(O3);
        aPossiblePrototype(proto);
        if (!isObject2(O3)) return O3;
        if (CORRECT_SETTER) setter(O3, proto);
        else O3.__proto__ = proto;
        return O3;
      }, "setPrototypeOf2"), "setPrototypeOf");
    }() : void 0);
  }
});
var require_set_to_string_tag = __commonJS({
  "../node_modules/core-js/internals/set-to-string-tag.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var defineProperty = require_object_define_property().f;
    var hasOwn = require_has_own_property();
    var wellKnownSymbol = require_well_known_symbol();
    var TO_STRING_TAG = wellKnownSymbol("toStringTag");
    module.exports = function(target, TAG, STATIC) {
      if (target && !STATIC) target = target.prototype;
      if (target && !hasOwn(target, TO_STRING_TAG)) {
        defineProperty(target, TO_STRING_TAG, { configurable: true, value: TAG });
      }
    };
  }
});
var require_define_built_in_accessor = __commonJS({
  "../node_modules/core-js/internals/define-built-in-accessor.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var makeBuiltIn = require_make_built_in();
    var defineProperty = require_object_define_property();
    module.exports = function(target, name, descriptor) {
      if (descriptor.get) makeBuiltIn(descriptor.get, name, { getter: true });
      if (descriptor.set) makeBuiltIn(descriptor.set, name, { setter: true });
      return defineProperty.f(target, name, descriptor);
    };
  }
});
var require_set_species = __commonJS({
  "../node_modules/core-js/internals/set-species.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var getBuiltIn = require_get_built_in();
    var defineBuiltInAccessor = require_define_built_in_accessor();
    var wellKnownSymbol = require_well_known_symbol();
    var DESCRIPTORS = require_descriptors();
    var SPECIES = wellKnownSymbol("species");
    module.exports = function(CONSTRUCTOR_NAME) {
      var Constructor = getBuiltIn(CONSTRUCTOR_NAME);
      if (DESCRIPTORS && Constructor && !Constructor[SPECIES]) {
        defineBuiltInAccessor(Constructor, SPECIES, {
          configurable: true,
          get: /* @__PURE__ */ __name2(function() {
            return this;
          }, "get")
        });
      }
    };
  }
});
var require_an_instance = __commonJS({
  "../node_modules/core-js/internals/an-instance.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var isPrototypeOf = require_object_is_prototype_of();
    var $TypeError = TypeError;
    module.exports = function(it2, Prototype) {
      if (isPrototypeOf(Prototype, it2)) return it2;
      throw new $TypeError("Incorrect invocation");
    };
  }
});
var require_to_string_tag_support = __commonJS({
  "../node_modules/core-js/internals/to-string-tag-support.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var wellKnownSymbol = require_well_known_symbol();
    var TO_STRING_TAG = wellKnownSymbol("toStringTag");
    var test = {};
    test[TO_STRING_TAG] = "z";
    module.exports = String(test) === "[object z]";
  }
});
var require_classof = __commonJS({
  "../node_modules/core-js/internals/classof.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var TO_STRING_TAG_SUPPORT = require_to_string_tag_support();
    var isCallable = require_is_callable();
    var classofRaw = require_classof_raw();
    var wellKnownSymbol = require_well_known_symbol();
    var TO_STRING_TAG = wellKnownSymbol("toStringTag");
    var $Object = Object;
    var CORRECT_ARGUMENTS = classofRaw(/* @__PURE__ */ function() {
      return arguments;
    }()) === "Arguments";
    var tryGet = /* @__PURE__ */ __name2(function(it2, key) {
      try {
        return it2[key];
      } catch (error) {
      }
    }, "tryGet");
    module.exports = TO_STRING_TAG_SUPPORT ? classofRaw : function(it2) {
      var O3, tag, result;
      return it2 === void 0 ? "Undefined" : it2 === null ? "Null" : typeof (tag = tryGet(O3 = $Object(it2), TO_STRING_TAG)) == "string" ? tag : CORRECT_ARGUMENTS ? classofRaw(O3) : (result = classofRaw(O3)) === "Object" && isCallable(O3.callee) ? "Arguments" : result;
    };
  }
});
var require_is_constructor = __commonJS({
  "../node_modules/core-js/internals/is-constructor.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var uncurryThis = require_function_uncurry_this();
    var fails = require_fails();
    var isCallable = require_is_callable();
    var classof = require_classof();
    var getBuiltIn = require_get_built_in();
    var inspectSource = require_inspect_source();
    var noop2 = /* @__PURE__ */ __name2(function() {
    }, "noop");
    var construct2 = getBuiltIn("Reflect", "construct");
    var constructorRegExp = /^\s*(?:class|function)\b/;
    var exec = uncurryThis(constructorRegExp.exec);
    var INCORRECT_TO_STRING = !constructorRegExp.test(noop2);
    var isConstructorModern = /* @__PURE__ */ __name2(/* @__PURE__ */ __name(function isConstructor(argument) {
      if (!isCallable(argument)) return false;
      try {
        construct2(noop2, [], argument);
        return true;
      } catch (error) {
        return false;
      }
    }, "isConstructor"), "isConstructor");
    var isConstructorLegacy = /* @__PURE__ */ __name2(/* @__PURE__ */ __name(function isConstructor(argument) {
      if (!isCallable(argument)) return false;
      switch (classof(argument)) {
        case "AsyncFunction":
        case "GeneratorFunction":
        case "AsyncGeneratorFunction":
          return false;
      }
      try {
        return INCORRECT_TO_STRING || !!exec(constructorRegExp, inspectSource(argument));
      } catch (error) {
        return true;
      }
    }, "isConstructor"), "isConstructor");
    isConstructorLegacy.sham = true;
    module.exports = !construct2 || fails(function() {
      var called;
      return isConstructorModern(isConstructorModern.call) || !isConstructorModern(Object) || !isConstructorModern(function() {
        called = true;
      }) || called;
    }) ? isConstructorLegacy : isConstructorModern;
  }
});
var require_a_constructor = __commonJS({
  "../node_modules/core-js/internals/a-constructor.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var isConstructor = require_is_constructor();
    var tryToString = require_try_to_string();
    var $TypeError = TypeError;
    module.exports = function(argument) {
      if (isConstructor(argument)) return argument;
      throw new $TypeError(tryToString(argument) + " is not a constructor");
    };
  }
});
var require_species_constructor = __commonJS({
  "../node_modules/core-js/internals/species-constructor.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var anObject = require_an_object();
    var aConstructor = require_a_constructor();
    var isNullOrUndefined = require_is_null_or_undefined();
    var wellKnownSymbol = require_well_known_symbol();
    var SPECIES = wellKnownSymbol("species");
    module.exports = function(O3, defaultConstructor) {
      var C2 = anObject(O3).constructor;
      var S2;
      return C2 === void 0 || isNullOrUndefined(S2 = anObject(C2)[SPECIES]) ? defaultConstructor : aConstructor(S2);
    };
  }
});
var require_function_apply = __commonJS({
  "../node_modules/core-js/internals/function-apply.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var NATIVE_BIND = require_function_bind_native();
    var FunctionPrototype = Function.prototype;
    var apply2 = FunctionPrototype.apply;
    var call = FunctionPrototype.call;
    module.exports = typeof Reflect == "object" && Reflect.apply || (NATIVE_BIND ? call.bind(apply2) : function() {
      return call.apply(apply2, arguments);
    });
  }
});
var require_function_uncurry_this_clause = __commonJS({
  "../node_modules/core-js/internals/function-uncurry-this-clause.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var classofRaw = require_classof_raw();
    var uncurryThis = require_function_uncurry_this();
    module.exports = function(fn) {
      if (classofRaw(fn) === "Function") return uncurryThis(fn);
    };
  }
});
var require_function_bind_context = __commonJS({
  "../node_modules/core-js/internals/function-bind-context.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var uncurryThis = require_function_uncurry_this_clause();
    var aCallable = require_a_callable();
    var NATIVE_BIND = require_function_bind_native();
    var bind = uncurryThis(uncurryThis.bind);
    module.exports = function(fn, that) {
      aCallable(fn);
      return that === void 0 ? fn : NATIVE_BIND ? bind(fn, that) : function() {
        return fn.apply(that, arguments);
      };
    };
  }
});
var require_html = __commonJS({
  "../node_modules/core-js/internals/html.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var getBuiltIn = require_get_built_in();
    module.exports = getBuiltIn("document", "documentElement");
  }
});
var require_array_slice = __commonJS({
  "../node_modules/core-js/internals/array-slice.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var uncurryThis = require_function_uncurry_this();
    module.exports = uncurryThis([].slice);
  }
});
var require_validate_arguments_length = __commonJS({
  "../node_modules/core-js/internals/validate-arguments-length.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var $TypeError = TypeError;
    module.exports = function(passed, required) {
      if (passed < required) throw new $TypeError("Not enough arguments");
      return passed;
    };
  }
});
var require_environment_is_ios = __commonJS({
  "../node_modules/core-js/internals/environment-is-ios.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var userAgent = require_environment_user_agent();
    module.exports = /(?:ipad|iphone|ipod).*applewebkit/i.test(userAgent);
  }
});
var require_task = __commonJS({
  "../node_modules/core-js/internals/task.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var globalThis2 = require_global_this();
    var apply2 = require_function_apply();
    var bind = require_function_bind_context();
    var isCallable = require_is_callable();
    var hasOwn = require_has_own_property();
    var fails = require_fails();
    var html2 = require_html();
    var arraySlice = require_array_slice();
    var createElement = require_document_create_element();
    var validateArgumentsLength = require_validate_arguments_length();
    var IS_IOS = require_environment_is_ios();
    var IS_NODE = require_environment_is_node();
    var set = globalThis2.setImmediate;
    var clear = globalThis2.clearImmediate;
    var process2 = globalThis2.process;
    var Dispatch = globalThis2.Dispatch;
    var Function2 = globalThis2.Function;
    var MessageChannel = globalThis2.MessageChannel;
    var String2 = globalThis2.String;
    var counter = 0;
    var queue = {};
    var ONREADYSTATECHANGE = "onreadystatechange";
    var $location;
    var defer;
    var channel;
    var port;
    fails(function() {
      $location = globalThis2.location;
    });
    var run = /* @__PURE__ */ __name2(function(id) {
      if (hasOwn(queue, id)) {
        var fn = queue[id];
        delete queue[id];
        fn();
      }
    }, "run");
    var runner = /* @__PURE__ */ __name2(function(id) {
      return function() {
        run(id);
      };
    }, "runner");
    var eventListener = /* @__PURE__ */ __name2(function(event) {
      run(event.data);
    }, "eventListener");
    var globalPostMessageDefer = /* @__PURE__ */ __name2(function(id) {
      globalThis2.postMessage(String2(id), $location.protocol + "//" + $location.host);
    }, "globalPostMessageDefer");
    if (!set || !clear) {
      set = /* @__PURE__ */ __name2(/* @__PURE__ */ __name(function setImmediate2(handler) {
        validateArgumentsLength(arguments.length, 1);
        var fn = isCallable(handler) ? handler : Function2(handler);
        var args = arraySlice(arguments, 1);
        queue[++counter] = function() {
          apply2(fn, void 0, args);
        };
        defer(counter);
        return counter;
      }, "setImmediate2"), "setImmediate");
      clear = /* @__PURE__ */ __name2(/* @__PURE__ */ __name(function clearImmediate(id) {
        delete queue[id];
      }, "clearImmediate"), "clearImmediate");
      if (IS_NODE) {
        defer = /* @__PURE__ */ __name2(function(id) {
          process2.nextTick(runner(id));
        }, "defer");
      } else if (Dispatch && Dispatch.now) {
        defer = /* @__PURE__ */ __name2(function(id) {
          Dispatch.now(runner(id));
        }, "defer");
      } else if (MessageChannel && !IS_IOS) {
        channel = new MessageChannel();
        port = channel.port2;
        channel.port1.onmessage = eventListener;
        defer = bind(port.postMessage, port);
      } else if (globalThis2.addEventListener && isCallable(globalThis2.postMessage) && !globalThis2.importScripts && $location && $location.protocol !== "file:" && !fails(globalPostMessageDefer)) {
        defer = globalPostMessageDefer;
        globalThis2.addEventListener("message", eventListener, false);
      } else if (ONREADYSTATECHANGE in createElement("script")) {
        defer = /* @__PURE__ */ __name2(function(id) {
          html2.appendChild(createElement("script"))[ONREADYSTATECHANGE] = function() {
            html2.removeChild(this);
            run(id);
          };
        }, "defer");
      } else {
        defer = /* @__PURE__ */ __name2(function(id) {
          setTimeout(runner(id), 0);
        }, "defer");
      }
    }
    module.exports = {
      set,
      clear
    };
  }
});
var require_safe_get_built_in = __commonJS({
  "../node_modules/core-js/internals/safe-get-built-in.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var globalThis2 = require_global_this();
    var DESCRIPTORS = require_descriptors();
    var getOwnPropertyDescriptor2 = Object.getOwnPropertyDescriptor;
    module.exports = function(name) {
      if (!DESCRIPTORS) return globalThis2[name];
      var descriptor = getOwnPropertyDescriptor2(globalThis2, name);
      return descriptor && descriptor.value;
    };
  }
});
var require_queue = __commonJS({
  "../node_modules/core-js/internals/queue.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var Queue = /* @__PURE__ */ __name2(function() {
      this.head = null;
      this.tail = null;
    }, "Queue");
    Queue.prototype = {
      add: /* @__PURE__ */ __name2(function(item) {
        var entry = { item, next: null };
        var tail = this.tail;
        if (tail) tail.next = entry;
        else this.head = entry;
        this.tail = entry;
      }, "add"),
      get: /* @__PURE__ */ __name2(function() {
        var entry = this.head;
        if (entry) {
          var next = this.head = entry.next;
          if (next === null) this.tail = null;
          return entry.item;
        }
      }, "get")
    };
    module.exports = Queue;
  }
});
var require_environment_is_ios_pebble = __commonJS({
  "../node_modules/core-js/internals/environment-is-ios-pebble.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var userAgent = require_environment_user_agent();
    module.exports = /ipad|iphone|ipod/i.test(userAgent) && typeof Pebble != "undefined";
  }
});
var require_environment_is_webos_webkit = __commonJS({
  "../node_modules/core-js/internals/environment-is-webos-webkit.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var userAgent = require_environment_user_agent();
    module.exports = /web0s(?!.*chrome)/i.test(userAgent);
  }
});
var require_microtask = __commonJS({
  "../node_modules/core-js/internals/microtask.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var globalThis2 = require_global_this();
    var safeGetBuiltIn = require_safe_get_built_in();
    var bind = require_function_bind_context();
    var macrotask = require_task().set;
    var Queue = require_queue();
    var IS_IOS = require_environment_is_ios();
    var IS_IOS_PEBBLE = require_environment_is_ios_pebble();
    var IS_WEBOS_WEBKIT = require_environment_is_webos_webkit();
    var IS_NODE = require_environment_is_node();
    var MutationObserver = globalThis2.MutationObserver || globalThis2.WebKitMutationObserver;
    var document2 = globalThis2.document;
    var process2 = globalThis2.process;
    var Promise2 = globalThis2.Promise;
    var microtask = safeGetBuiltIn("queueMicrotask");
    var notify;
    var toggle;
    var node2;
    var promise;
    var then;
    if (!microtask) {
      queue = new Queue();
      flush = /* @__PURE__ */ __name2(function() {
        var parent, fn;
        if (IS_NODE && (parent = process2.domain)) parent.exit();
        while (fn = queue.get()) try {
          fn();
        } catch (error) {
          if (queue.head) notify();
          throw error;
        }
        if (parent) parent.enter();
      }, "flush");
      if (!IS_IOS && !IS_NODE && !IS_WEBOS_WEBKIT && MutationObserver && document2) {
        toggle = true;
        node2 = document2.createTextNode("");
        new MutationObserver(flush).observe(node2, { characterData: true });
        notify = /* @__PURE__ */ __name2(function() {
          node2.data = toggle = !toggle;
        }, "notify");
      } else if (!IS_IOS_PEBBLE && Promise2 && Promise2.resolve) {
        promise = Promise2.resolve(void 0);
        promise.constructor = Promise2;
        then = bind(promise.then, promise);
        notify = /* @__PURE__ */ __name2(function() {
          then(flush);
        }, "notify");
      } else if (IS_NODE) {
        notify = /* @__PURE__ */ __name2(function() {
          process2.nextTick(flush);
        }, "notify");
      } else {
        macrotask = bind(macrotask, globalThis2);
        notify = /* @__PURE__ */ __name2(function() {
          macrotask(flush);
        }, "notify");
      }
      microtask = /* @__PURE__ */ __name2(function(fn) {
        if (!queue.head) notify();
        queue.add(fn);
      }, "microtask");
    }
    var queue;
    var flush;
    module.exports = microtask;
  }
});
var require_host_report_errors = __commonJS({
  "../node_modules/core-js/internals/host-report-errors.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    module.exports = function(a3, b2) {
      try {
        arguments.length === 1 ? console.error(a3) : console.error(a3, b2);
      } catch (error) {
      }
    };
  }
});
var require_perform = __commonJS({
  "../node_modules/core-js/internals/perform.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    module.exports = function(exec) {
      try {
        return { error: false, value: exec() };
      } catch (error) {
        return { error: true, value: error };
      }
    };
  }
});
var require_promise_native_constructor = __commonJS({
  "../node_modules/core-js/internals/promise-native-constructor.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var globalThis2 = require_global_this();
    module.exports = globalThis2.Promise;
  }
});
var require_promise_constructor_detection = __commonJS({
  "../node_modules/core-js/internals/promise-constructor-detection.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var globalThis2 = require_global_this();
    var NativePromiseConstructor = require_promise_native_constructor();
    var isCallable = require_is_callable();
    var isForced = require_is_forced();
    var inspectSource = require_inspect_source();
    var wellKnownSymbol = require_well_known_symbol();
    var ENVIRONMENT = require_environment();
    var IS_PURE = require_is_pure();
    var V8_VERSION = require_environment_v8_version();
    var NativePromisePrototype = NativePromiseConstructor && NativePromiseConstructor.prototype;
    var SPECIES = wellKnownSymbol("species");
    var SUBCLASSING = false;
    var NATIVE_PROMISE_REJECTION_EVENT = isCallable(globalThis2.PromiseRejectionEvent);
    var FORCED_PROMISE_CONSTRUCTOR = isForced("Promise", function() {
      var PROMISE_CONSTRUCTOR_SOURCE = inspectSource(NativePromiseConstructor);
      var GLOBAL_CORE_JS_PROMISE = PROMISE_CONSTRUCTOR_SOURCE !== String(NativePromiseConstructor);
      if (!GLOBAL_CORE_JS_PROMISE && V8_VERSION === 66) return true;
      if (IS_PURE && !(NativePromisePrototype["catch"] && NativePromisePrototype["finally"])) return true;
      if (!V8_VERSION || V8_VERSION < 51 || !/native code/.test(PROMISE_CONSTRUCTOR_SOURCE)) {
        var promise = new NativePromiseConstructor(function(resolve) {
          resolve(1);
        });
        var FakePromise = /* @__PURE__ */ __name2(function(exec) {
          exec(function() {
          }, function() {
          });
        }, "FakePromise");
        var constructor = promise.constructor = {};
        constructor[SPECIES] = FakePromise;
        SUBCLASSING = promise.then(function() {
        }) instanceof FakePromise;
        if (!SUBCLASSING) return true;
      }
      return !GLOBAL_CORE_JS_PROMISE && (ENVIRONMENT === "BROWSER" || ENVIRONMENT === "DENO") && !NATIVE_PROMISE_REJECTION_EVENT;
    });
    module.exports = {
      CONSTRUCTOR: FORCED_PROMISE_CONSTRUCTOR,
      REJECTION_EVENT: NATIVE_PROMISE_REJECTION_EVENT,
      SUBCLASSING
    };
  }
});
var require_new_promise_capability = __commonJS({
  "../node_modules/core-js/internals/new-promise-capability.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var aCallable = require_a_callable();
    var $TypeError = TypeError;
    var PromiseCapability = /* @__PURE__ */ __name2(function(C2) {
      var resolve, reject;
      this.promise = new C2(function($$resolve, $$reject) {
        if (resolve !== void 0 || reject !== void 0) throw new $TypeError("Bad Promise constructor");
        resolve = $$resolve;
        reject = $$reject;
      });
      this.resolve = aCallable(resolve);
      this.reject = aCallable(reject);
    }, "PromiseCapability");
    module.exports.f = function(C2) {
      return new PromiseCapability(C2);
    };
  }
});
var require_es_promise_constructor = __commonJS({
  "../node_modules/core-js/modules/es.promise.constructor.js"() {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var $2 = require_export();
    var IS_PURE = require_is_pure();
    var IS_NODE = require_environment_is_node();
    var globalThis2 = require_global_this();
    var path = require_path();
    var call = require_function_call();
    var defineBuiltIn = require_define_built_in();
    var setPrototypeOf2 = require_object_set_prototype_of();
    var setToStringTag = require_set_to_string_tag();
    var setSpecies = require_set_species();
    var aCallable = require_a_callable();
    var isCallable = require_is_callable();
    var isObject2 = require_is_object();
    var anInstance = require_an_instance();
    var speciesConstructor = require_species_constructor();
    var task = require_task().set;
    var microtask = require_microtask();
    var hostReportErrors = require_host_report_errors();
    var perform = require_perform();
    var Queue = require_queue();
    var InternalStateModule = require_internal_state();
    var NativePromiseConstructor = require_promise_native_constructor();
    var PromiseConstructorDetection = require_promise_constructor_detection();
    var newPromiseCapabilityModule = require_new_promise_capability();
    var PROMISE = "Promise";
    var FORCED_PROMISE_CONSTRUCTOR = PromiseConstructorDetection.CONSTRUCTOR;
    var NATIVE_PROMISE_REJECTION_EVENT = PromiseConstructorDetection.REJECTION_EVENT;
    var NATIVE_PROMISE_SUBCLASSING = PromiseConstructorDetection.SUBCLASSING;
    var getInternalPromiseState = InternalStateModule.getterFor(PROMISE);
    var setInternalState = InternalStateModule.set;
    var NativePromisePrototype = NativePromiseConstructor && NativePromiseConstructor.prototype;
    var PromiseConstructor = NativePromiseConstructor;
    var PromisePrototype = NativePromisePrototype;
    var TypeError2 = globalThis2.TypeError;
    var document2 = globalThis2.document;
    var process2 = globalThis2.process;
    var newPromiseCapability = newPromiseCapabilityModule.f;
    var newGenericPromiseCapability = newPromiseCapability;
    var DISPATCH_EVENT = !!(document2 && document2.createEvent && globalThis2.dispatchEvent);
    var UNHANDLED_REJECTION = "unhandledrejection";
    var REJECTION_HANDLED = "rejectionhandled";
    var PENDING = 0;
    var FULFILLED = 1;
    var REJECTED = 2;
    var HANDLED = 1;
    var UNHANDLED = 2;
    var Internal;
    var OwnPromiseCapability;
    var PromiseWrapper;
    var nativeThen;
    var isThenable = /* @__PURE__ */ __name2(function(it2) {
      var then;
      return isObject2(it2) && isCallable(then = it2.then) ? then : false;
    }, "isThenable");
    var callReaction = /* @__PURE__ */ __name2(function(reaction, state) {
      var value = state.value;
      var ok = state.state === FULFILLED;
      var handler = ok ? reaction.ok : reaction.fail;
      var resolve = reaction.resolve;
      var reject = reaction.reject;
      var domain = reaction.domain;
      var result, then, exited;
      try {
        if (handler) {
          if (!ok) {
            if (state.rejection === UNHANDLED) onHandleUnhandled(state);
            state.rejection = HANDLED;
          }
          if (handler === true) result = value;
          else {
            if (domain) domain.enter();
            result = handler(value);
            if (domain) {
              domain.exit();
              exited = true;
            }
          }
          if (result === reaction.promise) {
            reject(new TypeError2("Promise-chain cycle"));
          } else if (then = isThenable(result)) {
            call(then, result, resolve, reject);
          } else resolve(result);
        } else reject(value);
      } catch (error) {
        if (domain && !exited) domain.exit();
        reject(error);
      }
    }, "callReaction");
    var notify = /* @__PURE__ */ __name2(function(state, isReject) {
      if (state.notified) return;
      state.notified = true;
      microtask(function() {
        var reactions = state.reactions;
        var reaction;
        while (reaction = reactions.get()) {
          callReaction(reaction, state);
        }
        state.notified = false;
        if (isReject && !state.rejection) onUnhandled(state);
      });
    }, "notify");
    var dispatchEvent = /* @__PURE__ */ __name2(function(name, promise, reason) {
      var event, handler;
      if (DISPATCH_EVENT) {
        event = document2.createEvent("Event");
        event.promise = promise;
        event.reason = reason;
        event.initEvent(name, false, true);
        globalThis2.dispatchEvent(event);
      } else event = { promise, reason };
      if (!NATIVE_PROMISE_REJECTION_EVENT && (handler = globalThis2["on" + name])) handler(event);
      else if (name === UNHANDLED_REJECTION) hostReportErrors("Unhandled promise rejection", reason);
    }, "dispatchEvent");
    var onUnhandled = /* @__PURE__ */ __name2(function(state) {
      call(task, globalThis2, function() {
        var promise = state.facade;
        var value = state.value;
        var IS_UNHANDLED = isUnhandled(state);
        var result;
        if (IS_UNHANDLED) {
          result = perform(function() {
            if (IS_NODE) {
              process2.emit("unhandledRejection", value, promise);
            } else dispatchEvent(UNHANDLED_REJECTION, promise, value);
          });
          state.rejection = IS_NODE || isUnhandled(state) ? UNHANDLED : HANDLED;
          if (result.error) throw result.value;
        }
      });
    }, "onUnhandled");
    var isUnhandled = /* @__PURE__ */ __name2(function(state) {
      return state.rejection !== HANDLED && !state.parent;
    }, "isUnhandled");
    var onHandleUnhandled = /* @__PURE__ */ __name2(function(state) {
      call(task, globalThis2, function() {
        var promise = state.facade;
        if (IS_NODE) {
          process2.emit("rejectionHandled", promise);
        } else dispatchEvent(REJECTION_HANDLED, promise, state.value);
      });
    }, "onHandleUnhandled");
    var bind = /* @__PURE__ */ __name2(function(fn, state, unwrap) {
      return function(value) {
        fn(state, value, unwrap);
      };
    }, "bind");
    var internalReject = /* @__PURE__ */ __name2(function(state, value, unwrap) {
      if (state.done) return;
      state.done = true;
      if (unwrap) state = unwrap;
      state.value = value;
      state.state = REJECTED;
      notify(state, true);
    }, "internalReject");
    var internalResolve = /* @__PURE__ */ __name2(function(state, value, unwrap) {
      if (state.done) return;
      state.done = true;
      if (unwrap) state = unwrap;
      try {
        if (state.facade === value) throw new TypeError2("Promise can't be resolved itself");
        var then = isThenable(value);
        if (then) {
          microtask(function() {
            var wrapper = { done: false };
            try {
              call(
                then,
                value,
                bind(internalResolve, wrapper, state),
                bind(internalReject, wrapper, state)
              );
            } catch (error) {
              internalReject(wrapper, error, state);
            }
          });
        } else {
          state.value = value;
          state.state = FULFILLED;
          notify(state, false);
        }
      } catch (error) {
        internalReject({ done: false }, error, state);
      }
    }, "internalResolve");
    if (FORCED_PROMISE_CONSTRUCTOR) {
      PromiseConstructor = /* @__PURE__ */ __name2(/* @__PURE__ */ __name(function Promise2(executor) {
        anInstance(this, PromisePrototype);
        aCallable(executor);
        call(Internal, this);
        var state = getInternalPromiseState(this);
        try {
          executor(bind(internalResolve, state), bind(internalReject, state));
        } catch (error) {
          internalReject(state, error);
        }
      }, "Promise2"), "Promise");
      PromisePrototype = PromiseConstructor.prototype;
      Internal = /* @__PURE__ */ __name2(/* @__PURE__ */ __name(function Promise2(executor) {
        setInternalState(this, {
          type: PROMISE,
          done: false,
          notified: false,
          parent: false,
          reactions: new Queue(),
          rejection: false,
          state: PENDING,
          value: null
        });
      }, "Promise2"), "Promise");
      Internal.prototype = defineBuiltIn(PromisePrototype, "then", /* @__PURE__ */ __name2(/* @__PURE__ */ __name(function then(onFulfilled, onRejected) {
        var state = getInternalPromiseState(this);
        var reaction = newPromiseCapability(speciesConstructor(this, PromiseConstructor));
        state.parent = true;
        reaction.ok = isCallable(onFulfilled) ? onFulfilled : true;
        reaction.fail = isCallable(onRejected) && onRejected;
        reaction.domain = IS_NODE ? process2.domain : void 0;
        if (state.state === PENDING) state.reactions.add(reaction);
        else microtask(function() {
          callReaction(reaction, state);
        });
        return reaction.promise;
      }, "then"), "then"));
      OwnPromiseCapability = /* @__PURE__ */ __name2(function() {
        var promise = new Internal();
        var state = getInternalPromiseState(promise);
        this.promise = promise;
        this.resolve = bind(internalResolve, state);
        this.reject = bind(internalReject, state);
      }, "OwnPromiseCapability");
      newPromiseCapabilityModule.f = newPromiseCapability = /* @__PURE__ */ __name2(function(C2) {
        return C2 === PromiseConstructor || C2 === PromiseWrapper ? new OwnPromiseCapability(C2) : newGenericPromiseCapability(C2);
      }, "newPromiseCapability");
      if (!IS_PURE && isCallable(NativePromiseConstructor) && NativePromisePrototype !== Object.prototype) {
        nativeThen = NativePromisePrototype.then;
        if (!NATIVE_PROMISE_SUBCLASSING) {
          defineBuiltIn(NativePromisePrototype, "then", /* @__PURE__ */ __name2(/* @__PURE__ */ __name(function then(onFulfilled, onRejected) {
            var that = this;
            return new PromiseConstructor(function(resolve, reject) {
              call(nativeThen, that, resolve, reject);
            }).then(onFulfilled, onRejected);
          }, "then"), "then"), { unsafe: true });
        }
        try {
          delete NativePromisePrototype.constructor;
        } catch (error) {
        }
        if (setPrototypeOf2) {
          setPrototypeOf2(NativePromisePrototype, PromisePrototype);
        }
      }
    }
    $2({ global: true, constructor: true, wrap: true, forced: FORCED_PROMISE_CONSTRUCTOR }, {
      Promise: PromiseConstructor
    });
    PromiseWrapper = path.Promise;
    setToStringTag(PromiseConstructor, PROMISE, false, true);
    setSpecies(PROMISE);
  }
});
var require_iterators = __commonJS({
  "../node_modules/core-js/internals/iterators.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    module.exports = {};
  }
});
var require_is_array_iterator_method = __commonJS({
  "../node_modules/core-js/internals/is-array-iterator-method.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var wellKnownSymbol = require_well_known_symbol();
    var Iterators = require_iterators();
    var ITERATOR = wellKnownSymbol("iterator");
    var ArrayPrototype = Array.prototype;
    module.exports = function(it2) {
      return it2 !== void 0 && (Iterators.Array === it2 || ArrayPrototype[ITERATOR] === it2);
    };
  }
});
var require_get_iterator_method = __commonJS({
  "../node_modules/core-js/internals/get-iterator-method.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var classof = require_classof();
    var getMethod = require_get_method();
    var isNullOrUndefined = require_is_null_or_undefined();
    var Iterators = require_iterators();
    var wellKnownSymbol = require_well_known_symbol();
    var ITERATOR = wellKnownSymbol("iterator");
    module.exports = function(it2) {
      if (!isNullOrUndefined(it2)) return getMethod(it2, ITERATOR) || getMethod(it2, "@@iterator") || Iterators[classof(it2)];
    };
  }
});
var require_get_iterator = __commonJS({
  "../node_modules/core-js/internals/get-iterator.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var call = require_function_call();
    var aCallable = require_a_callable();
    var anObject = require_an_object();
    var tryToString = require_try_to_string();
    var getIteratorMethod = require_get_iterator_method();
    var $TypeError = TypeError;
    module.exports = function(argument, usingIterator) {
      var iteratorMethod = arguments.length < 2 ? getIteratorMethod(argument) : usingIterator;
      if (aCallable(iteratorMethod)) return anObject(call(iteratorMethod, argument));
      throw new $TypeError(tryToString(argument) + " is not iterable");
    };
  }
});
var require_iterator_close = __commonJS({
  "../node_modules/core-js/internals/iterator-close.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var call = require_function_call();
    var anObject = require_an_object();
    var getMethod = require_get_method();
    module.exports = function(iterator, kind, value) {
      var innerResult, innerError;
      anObject(iterator);
      try {
        innerResult = getMethod(iterator, "return");
        if (!innerResult) {
          if (kind === "throw") throw value;
          return value;
        }
        innerResult = call(innerResult, iterator);
      } catch (error) {
        innerError = true;
        innerResult = error;
      }
      if (kind === "throw") throw value;
      if (innerError) throw innerResult;
      anObject(innerResult);
      return value;
    };
  }
});
var require_iterate = __commonJS({
  "../node_modules/core-js/internals/iterate.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var bind = require_function_bind_context();
    var call = require_function_call();
    var anObject = require_an_object();
    var tryToString = require_try_to_string();
    var isArrayIteratorMethod = require_is_array_iterator_method();
    var lengthOfArrayLike = require_length_of_array_like();
    var isPrototypeOf = require_object_is_prototype_of();
    var getIterator = require_get_iterator();
    var getIteratorMethod = require_get_iterator_method();
    var iteratorClose = require_iterator_close();
    var $TypeError = TypeError;
    var Result = /* @__PURE__ */ __name2(function(stopped, result) {
      this.stopped = stopped;
      this.result = result;
    }, "Result");
    var ResultPrototype = Result.prototype;
    module.exports = function(iterable, unboundFunction, options) {
      var that = options && options.that;
      var AS_ENTRIES = !!(options && options.AS_ENTRIES);
      var IS_RECORD = !!(options && options.IS_RECORD);
      var IS_ITERATOR = !!(options && options.IS_ITERATOR);
      var INTERRUPTED = !!(options && options.INTERRUPTED);
      var fn = bind(unboundFunction, that);
      var iterator, iterFn, index2, length, result, next, step;
      var stop = /* @__PURE__ */ __name2(function(condition) {
        if (iterator) iteratorClose(iterator, "normal");
        return new Result(true, condition);
      }, "stop");
      var callFn = /* @__PURE__ */ __name2(function(value) {
        if (AS_ENTRIES) {
          anObject(value);
          return INTERRUPTED ? fn(value[0], value[1], stop) : fn(value[0], value[1]);
        }
        return INTERRUPTED ? fn(value, stop) : fn(value);
      }, "callFn");
      if (IS_RECORD) {
        iterator = iterable.iterator;
      } else if (IS_ITERATOR) {
        iterator = iterable;
      } else {
        iterFn = getIteratorMethod(iterable);
        if (!iterFn) throw new $TypeError(tryToString(iterable) + " is not iterable");
        if (isArrayIteratorMethod(iterFn)) {
          for (index2 = 0, length = lengthOfArrayLike(iterable); length > index2; index2++) {
            result = callFn(iterable[index2]);
            if (result && isPrototypeOf(ResultPrototype, result)) return result;
          }
          return new Result(false);
        }
        iterator = getIterator(iterable, iterFn);
      }
      next = IS_RECORD ? iterable.next : iterator.next;
      while (!(step = call(next, iterator)).done) {
        try {
          result = callFn(step.value);
        } catch (error) {
          iteratorClose(iterator, "throw", error);
        }
        if (typeof result == "object" && result && isPrototypeOf(ResultPrototype, result)) return result;
      }
      return new Result(false);
    };
  }
});
var require_check_correctness_of_iteration = __commonJS({
  "../node_modules/core-js/internals/check-correctness-of-iteration.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var wellKnownSymbol = require_well_known_symbol();
    var ITERATOR = wellKnownSymbol("iterator");
    var SAFE_CLOSING = false;
    try {
      called = 0;
      iteratorWithReturn = {
        next: /* @__PURE__ */ __name2(function() {
          return { done: !!called++ };
        }, "next"),
        "return": /* @__PURE__ */ __name2(function() {
          SAFE_CLOSING = true;
        }, "return")
      };
      iteratorWithReturn[ITERATOR] = function() {
        return this;
      };
      Array.from(iteratorWithReturn, function() {
        throw 2;
      });
    } catch (error) {
    }
    var called;
    var iteratorWithReturn;
    module.exports = function(exec, SKIP_CLOSING) {
      try {
        if (!SKIP_CLOSING && !SAFE_CLOSING) return false;
      } catch (error) {
        return false;
      }
      var ITERATION_SUPPORT = false;
      try {
        var object = {};
        object[ITERATOR] = function() {
          return {
            next: /* @__PURE__ */ __name2(function() {
              return { done: ITERATION_SUPPORT = true };
            }, "next")
          };
        };
        exec(object);
      } catch (error) {
      }
      return ITERATION_SUPPORT;
    };
  }
});
var require_promise_statics_incorrect_iteration = __commonJS({
  "../node_modules/core-js/internals/promise-statics-incorrect-iteration.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var NativePromiseConstructor = require_promise_native_constructor();
    var checkCorrectnessOfIteration = require_check_correctness_of_iteration();
    var FORCED_PROMISE_CONSTRUCTOR = require_promise_constructor_detection().CONSTRUCTOR;
    module.exports = FORCED_PROMISE_CONSTRUCTOR || !checkCorrectnessOfIteration(function(iterable) {
      NativePromiseConstructor.all(iterable).then(void 0, function() {
      });
    });
  }
});
var require_es_promise_all = __commonJS({
  "../node_modules/core-js/modules/es.promise.all.js"() {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var $2 = require_export();
    var call = require_function_call();
    var aCallable = require_a_callable();
    var newPromiseCapabilityModule = require_new_promise_capability();
    var perform = require_perform();
    var iterate = require_iterate();
    var PROMISE_STATICS_INCORRECT_ITERATION = require_promise_statics_incorrect_iteration();
    $2({ target: "Promise", stat: true, forced: PROMISE_STATICS_INCORRECT_ITERATION }, {
      all: /* @__PURE__ */ __name2(/* @__PURE__ */ __name(function all(iterable) {
        var C2 = this;
        var capability = newPromiseCapabilityModule.f(C2);
        var resolve = capability.resolve;
        var reject = capability.reject;
        var result = perform(function() {
          var $promiseResolve = aCallable(C2.resolve);
          var values = [];
          var counter = 0;
          var remaining = 1;
          iterate(iterable, function(promise) {
            var index2 = counter++;
            var alreadyCalled = false;
            remaining++;
            call($promiseResolve, C2, promise).then(function(value) {
              if (alreadyCalled) return;
              alreadyCalled = true;
              values[index2] = value;
              --remaining || resolve(values);
            }, reject);
          });
          --remaining || resolve(values);
        });
        if (result.error) reject(result.value);
        return capability.promise;
      }, "all"), "all")
    });
  }
});
var require_es_promise_catch = __commonJS({
  "../node_modules/core-js/modules/es.promise.catch.js"() {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var $2 = require_export();
    var IS_PURE = require_is_pure();
    var FORCED_PROMISE_CONSTRUCTOR = require_promise_constructor_detection().CONSTRUCTOR;
    var NativePromiseConstructor = require_promise_native_constructor();
    var getBuiltIn = require_get_built_in();
    var isCallable = require_is_callable();
    var defineBuiltIn = require_define_built_in();
    var NativePromisePrototype = NativePromiseConstructor && NativePromiseConstructor.prototype;
    $2({ target: "Promise", proto: true, forced: FORCED_PROMISE_CONSTRUCTOR, real: true }, {
      "catch": /* @__PURE__ */ __name2(function(onRejected) {
        return this.then(void 0, onRejected);
      }, "catch")
    });
    if (!IS_PURE && isCallable(NativePromiseConstructor)) {
      method = getBuiltIn("Promise").prototype["catch"];
      if (NativePromisePrototype["catch"] !== method) {
        defineBuiltIn(NativePromisePrototype, "catch", method, { unsafe: true });
      }
    }
    var method;
  }
});
var require_es_promise_race = __commonJS({
  "../node_modules/core-js/modules/es.promise.race.js"() {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var $2 = require_export();
    var call = require_function_call();
    var aCallable = require_a_callable();
    var newPromiseCapabilityModule = require_new_promise_capability();
    var perform = require_perform();
    var iterate = require_iterate();
    var PROMISE_STATICS_INCORRECT_ITERATION = require_promise_statics_incorrect_iteration();
    $2({ target: "Promise", stat: true, forced: PROMISE_STATICS_INCORRECT_ITERATION }, {
      race: /* @__PURE__ */ __name2(/* @__PURE__ */ __name(function race(iterable) {
        var C2 = this;
        var capability = newPromiseCapabilityModule.f(C2);
        var reject = capability.reject;
        var result = perform(function() {
          var $promiseResolve = aCallable(C2.resolve);
          iterate(iterable, function(promise) {
            call($promiseResolve, C2, promise).then(capability.resolve, reject);
          });
        });
        if (result.error) reject(result.value);
        return capability.promise;
      }, "race"), "race")
    });
  }
});
var require_es_promise_reject = __commonJS({
  "../node_modules/core-js/modules/es.promise.reject.js"() {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var $2 = require_export();
    var newPromiseCapabilityModule = require_new_promise_capability();
    var FORCED_PROMISE_CONSTRUCTOR = require_promise_constructor_detection().CONSTRUCTOR;
    $2({ target: "Promise", stat: true, forced: FORCED_PROMISE_CONSTRUCTOR }, {
      reject: /* @__PURE__ */ __name2(/* @__PURE__ */ __name(function reject(r2) {
        var capability = newPromiseCapabilityModule.f(this);
        var capabilityReject = capability.reject;
        capabilityReject(r2);
        return capability.promise;
      }, "reject"), "reject")
    });
  }
});
var require_promise_resolve = __commonJS({
  "../node_modules/core-js/internals/promise-resolve.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var anObject = require_an_object();
    var isObject2 = require_is_object();
    var newPromiseCapability = require_new_promise_capability();
    module.exports = function(C2, x22) {
      anObject(C2);
      if (isObject2(x22) && x22.constructor === C2) return x22;
      var promiseCapability = newPromiseCapability.f(C2);
      var resolve = promiseCapability.resolve;
      resolve(x22);
      return promiseCapability.promise;
    };
  }
});
var require_es_promise_resolve = __commonJS({
  "../node_modules/core-js/modules/es.promise.resolve.js"() {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var $2 = require_export();
    var getBuiltIn = require_get_built_in();
    var IS_PURE = require_is_pure();
    var NativePromiseConstructor = require_promise_native_constructor();
    var FORCED_PROMISE_CONSTRUCTOR = require_promise_constructor_detection().CONSTRUCTOR;
    var promiseResolve = require_promise_resolve();
    var PromiseConstructorWrapper = getBuiltIn("Promise");
    var CHECK_WRAPPER = IS_PURE && !FORCED_PROMISE_CONSTRUCTOR;
    $2({ target: "Promise", stat: true, forced: IS_PURE || FORCED_PROMISE_CONSTRUCTOR }, {
      resolve: /* @__PURE__ */ __name2(/* @__PURE__ */ __name(function resolve(x22) {
        return promiseResolve(CHECK_WRAPPER && this === PromiseConstructorWrapper ? NativePromiseConstructor : this, x22);
      }, "resolve"), "resolve")
    });
  }
});
var require_es_promise = __commonJS({
  "../node_modules/core-js/modules/es.promise.js"() {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    require_es_promise_constructor();
    require_es_promise_all();
    require_es_promise_catch();
    require_es_promise_race();
    require_es_promise_reject();
    require_es_promise_resolve();
  }
});
function asyncGeneratorStep(n3, t3, e2, r2, o3, a3, c4) {
  try {
    var i33 = n3[a3](c4), u3 = i33.value;
  } catch (n4) {
    return void e2(n4);
  }
  i33.done ? t3(u3) : Promise.resolve(u3).then(r2, o3);
}
__name(asyncGeneratorStep, "asyncGeneratorStep");
function _asyncToGenerator(n3) {
  return function() {
    var t3 = this, e2 = arguments;
    return new Promise(function(r2, o3) {
      var a3 = n3.apply(t3, e2);
      function _next(n4) {
        asyncGeneratorStep(a3, r2, o3, _next, _throw, "next", n4);
      }
      __name(_next, "_next");
      __name2(_next, "_next");
      function _throw(n4) {
        asyncGeneratorStep(a3, r2, o3, _next, _throw, "throw", n4);
      }
      __name(_throw, "_throw");
      __name2(_throw, "_throw");
      _next(void 0);
    });
  };
}
__name(_asyncToGenerator, "_asyncToGenerator");
var init_asyncToGenerator = __esm({
  "../node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"() {
    init_functionsRoutes_0_8044054200943971();
    __name2(asyncGeneratorStep, "asyncGeneratorStep");
    __name2(_asyncToGenerator, "_asyncToGenerator");
  }
});
var require_to_string = __commonJS({
  "../node_modules/core-js/internals/to-string.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var classof = require_classof();
    var $String = String;
    module.exports = function(argument) {
      if (classof(argument) === "Symbol") throw new TypeError("Cannot convert a Symbol value to a string");
      return $String(argument);
    };
  }
});
var require_regexp_flags = __commonJS({
  "../node_modules/core-js/internals/regexp-flags.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var anObject = require_an_object();
    module.exports = function() {
      var that = anObject(this);
      var result = "";
      if (that.hasIndices) result += "d";
      if (that.global) result += "g";
      if (that.ignoreCase) result += "i";
      if (that.multiline) result += "m";
      if (that.dotAll) result += "s";
      if (that.unicode) result += "u";
      if (that.unicodeSets) result += "v";
      if (that.sticky) result += "y";
      return result;
    };
  }
});
var require_regexp_sticky_helpers = __commonJS({
  "../node_modules/core-js/internals/regexp-sticky-helpers.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var fails = require_fails();
    var globalThis2 = require_global_this();
    var $RegExp = globalThis2.RegExp;
    var UNSUPPORTED_Y = fails(function() {
      var re2 = $RegExp("a", "y");
      re2.lastIndex = 2;
      return re2.exec("abcd") !== null;
    });
    var MISSED_STICKY = UNSUPPORTED_Y || fails(function() {
      return !$RegExp("a", "y").sticky;
    });
    var BROKEN_CARET = UNSUPPORTED_Y || fails(function() {
      var re2 = $RegExp("^r", "gy");
      re2.lastIndex = 2;
      return re2.exec("str") !== null;
    });
    module.exports = {
      BROKEN_CARET,
      MISSED_STICKY,
      UNSUPPORTED_Y
    };
  }
});
var require_object_keys = __commonJS({
  "../node_modules/core-js/internals/object-keys.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var internalObjectKeys = require_object_keys_internal();
    var enumBugKeys = require_enum_bug_keys();
    module.exports = Object.keys || /* @__PURE__ */ __name2(/* @__PURE__ */ __name(function keys(O3) {
      return internalObjectKeys(O3, enumBugKeys);
    }, "keys"), "keys");
  }
});
var require_object_define_properties = __commonJS({
  "../node_modules/core-js/internals/object-define-properties.js"(exports) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var DESCRIPTORS = require_descriptors();
    var V8_PROTOTYPE_DEFINE_BUG = require_v8_prototype_define_bug();
    var definePropertyModule = require_object_define_property();
    var anObject = require_an_object();
    var toIndexedObject = require_to_indexed_object();
    var objectKeys = require_object_keys();
    exports.f = DESCRIPTORS && !V8_PROTOTYPE_DEFINE_BUG ? Object.defineProperties : /* @__PURE__ */ __name2(/* @__PURE__ */ __name(function defineProperties(O3, Properties) {
      anObject(O3);
      var props = toIndexedObject(Properties);
      var keys = objectKeys(Properties);
      var length = keys.length;
      var index2 = 0;
      var key;
      while (length > index2) definePropertyModule.f(O3, key = keys[index2++], props[key]);
      return O3;
    }, "defineProperties"), "defineProperties");
  }
});
var require_object_create = __commonJS({
  "../node_modules/core-js/internals/object-create.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var anObject = require_an_object();
    var definePropertiesModule = require_object_define_properties();
    var enumBugKeys = require_enum_bug_keys();
    var hiddenKeys = require_hidden_keys();
    var html2 = require_html();
    var documentCreateElement = require_document_create_element();
    var sharedKey = require_shared_key();
    var GT = ">";
    var LT = "<";
    var PROTOTYPE = "prototype";
    var SCRIPT = "script";
    var IE_PROTO = sharedKey("IE_PROTO");
    var EmptyConstructor = /* @__PURE__ */ __name2(function() {
    }, "EmptyConstructor");
    var scriptTag = /* @__PURE__ */ __name2(function(content) {
      return LT + SCRIPT + GT + content + LT + "/" + SCRIPT + GT;
    }, "scriptTag");
    var NullProtoObjectViaActiveX = /* @__PURE__ */ __name2(function(activeXDocument2) {
      activeXDocument2.write(scriptTag(""));
      activeXDocument2.close();
      var temp = activeXDocument2.parentWindow.Object;
      activeXDocument2 = null;
      return temp;
    }, "NullProtoObjectViaActiveX");
    var NullProtoObjectViaIFrame = /* @__PURE__ */ __name2(function() {
      var iframe = documentCreateElement("iframe");
      var JS = "java" + SCRIPT + ":";
      var iframeDocument;
      iframe.style.display = "none";
      html2.appendChild(iframe);
      iframe.src = String(JS);
      iframeDocument = iframe.contentWindow.document;
      iframeDocument.open();
      iframeDocument.write(scriptTag("document.F=Object"));
      iframeDocument.close();
      return iframeDocument.F;
    }, "NullProtoObjectViaIFrame");
    var activeXDocument;
    var NullProtoObject = /* @__PURE__ */ __name2(function() {
      try {
        activeXDocument = new ActiveXObject("htmlfile");
      } catch (error) {
      }
      NullProtoObject = typeof document != "undefined" ? document.domain && activeXDocument ? NullProtoObjectViaActiveX(activeXDocument) : NullProtoObjectViaIFrame() : NullProtoObjectViaActiveX(activeXDocument);
      var length = enumBugKeys.length;
      while (length--) delete NullProtoObject[PROTOTYPE][enumBugKeys[length]];
      return NullProtoObject();
    }, "NullProtoObject");
    hiddenKeys[IE_PROTO] = true;
    module.exports = Object.create || /* @__PURE__ */ __name2(/* @__PURE__ */ __name(function create2(O3, Properties) {
      var result;
      if (O3 !== null) {
        EmptyConstructor[PROTOTYPE] = anObject(O3);
        result = new EmptyConstructor();
        EmptyConstructor[PROTOTYPE] = null;
        result[IE_PROTO] = O3;
      } else result = NullProtoObject();
      return Properties === void 0 ? result : definePropertiesModule.f(result, Properties);
    }, "create2"), "create");
  }
});
var require_regexp_unsupported_dot_all = __commonJS({
  "../node_modules/core-js/internals/regexp-unsupported-dot-all.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var fails = require_fails();
    var globalThis2 = require_global_this();
    var $RegExp = globalThis2.RegExp;
    module.exports = fails(function() {
      var re2 = $RegExp(".", "s");
      return !(re2.dotAll && re2.test("\n") && re2.flags === "s");
    });
  }
});
var require_regexp_unsupported_ncg = __commonJS({
  "../node_modules/core-js/internals/regexp-unsupported-ncg.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var fails = require_fails();
    var globalThis2 = require_global_this();
    var $RegExp = globalThis2.RegExp;
    module.exports = fails(function() {
      var re2 = $RegExp("(?<a>b)", "g");
      return re2.exec("b").groups.a !== "b" || "b".replace(re2, "$<a>c") !== "bc";
    });
  }
});
var require_regexp_exec = __commonJS({
  "../node_modules/core-js/internals/regexp-exec.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var call = require_function_call();
    var uncurryThis = require_function_uncurry_this();
    var toString = require_to_string();
    var regexpFlags = require_regexp_flags();
    var stickyHelpers = require_regexp_sticky_helpers();
    var shared = require_shared();
    var create2 = require_object_create();
    var getInternalState = require_internal_state().get;
    var UNSUPPORTED_DOT_ALL = require_regexp_unsupported_dot_all();
    var UNSUPPORTED_NCG = require_regexp_unsupported_ncg();
    var nativeReplace = shared("native-string-replace", String.prototype.replace);
    var nativeExec = RegExp.prototype.exec;
    var patchedExec = nativeExec;
    var charAt = uncurryThis("".charAt);
    var indexOf = uncurryThis("".indexOf);
    var replace = uncurryThis("".replace);
    var stringSlice = uncurryThis("".slice);
    var UPDATES_LAST_INDEX_WRONG = function() {
      var re1 = /a/;
      var re2 = /b*/g;
      call(nativeExec, re1, "a");
      call(nativeExec, re2, "a");
      return re1.lastIndex !== 0 || re2.lastIndex !== 0;
    }();
    var UNSUPPORTED_Y = stickyHelpers.BROKEN_CARET;
    var NPCG_INCLUDED = /()??/.exec("")[1] !== void 0;
    var PATCH = UPDATES_LAST_INDEX_WRONG || NPCG_INCLUDED || UNSUPPORTED_Y || UNSUPPORTED_DOT_ALL || UNSUPPORTED_NCG;
    if (PATCH) {
      patchedExec = /* @__PURE__ */ __name2(/* @__PURE__ */ __name(function exec(string) {
        var re2 = this;
        var state = getInternalState(re2);
        var str = toString(string);
        var raw = state.raw;
        var result, reCopy, lastIndex, match2, i33, object, group;
        if (raw) {
          raw.lastIndex = re2.lastIndex;
          result = call(patchedExec, raw, str);
          re2.lastIndex = raw.lastIndex;
          return result;
        }
        var groups = state.groups;
        var sticky = UNSUPPORTED_Y && re2.sticky;
        var flags2 = call(regexpFlags, re2);
        var source = re2.source;
        var charsAdded = 0;
        var strCopy = str;
        if (sticky) {
          flags2 = replace(flags2, "y", "");
          if (indexOf(flags2, "g") === -1) {
            flags2 += "g";
          }
          strCopy = stringSlice(str, re2.lastIndex);
          if (re2.lastIndex > 0 && (!re2.multiline || re2.multiline && charAt(str, re2.lastIndex - 1) !== "\n")) {
            source = "(?: " + source + ")";
            strCopy = " " + strCopy;
            charsAdded++;
          }
          reCopy = new RegExp("^(?:" + source + ")", flags2);
        }
        if (NPCG_INCLUDED) {
          reCopy = new RegExp("^" + source + "$(?!\\s)", flags2);
        }
        if (UPDATES_LAST_INDEX_WRONG) lastIndex = re2.lastIndex;
        match2 = call(nativeExec, sticky ? reCopy : re2, strCopy);
        if (sticky) {
          if (match2) {
            match2.input = stringSlice(match2.input, charsAdded);
            match2[0] = stringSlice(match2[0], charsAdded);
            match2.index = re2.lastIndex;
            re2.lastIndex += match2[0].length;
          } else re2.lastIndex = 0;
        } else if (UPDATES_LAST_INDEX_WRONG && match2) {
          re2.lastIndex = re2.global ? match2.index + match2[0].length : lastIndex;
        }
        if (NPCG_INCLUDED && match2 && match2.length > 1) {
          call(nativeReplace, match2[0], reCopy, function() {
            for (i33 = 1; i33 < arguments.length - 2; i33++) {
              if (arguments[i33] === void 0) match2[i33] = void 0;
            }
          });
        }
        if (match2 && groups) {
          match2.groups = object = create2(null);
          for (i33 = 0; i33 < groups.length; i33++) {
            group = groups[i33];
            object[group[0]] = match2[group[1]];
          }
        }
        return match2;
      }, "exec"), "exec");
    }
    module.exports = patchedExec;
  }
});
var require_es_regexp_exec = __commonJS({
  "../node_modules/core-js/modules/es.regexp.exec.js"() {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var $2 = require_export();
    var exec = require_regexp_exec();
    $2({ target: "RegExp", proto: true, forced: /./.exec !== exec }, {
      exec
    });
  }
});
var require_fix_regexp_well_known_symbol_logic = __commonJS({
  "../node_modules/core-js/internals/fix-regexp-well-known-symbol-logic.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    require_es_regexp_exec();
    var call = require_function_call();
    var defineBuiltIn = require_define_built_in();
    var regexpExec = require_regexp_exec();
    var fails = require_fails();
    var wellKnownSymbol = require_well_known_symbol();
    var createNonEnumerableProperty = require_create_non_enumerable_property();
    var SPECIES = wellKnownSymbol("species");
    var RegExpPrototype = RegExp.prototype;
    module.exports = function(KEY, exec, FORCED, SHAM) {
      var SYMBOL = wellKnownSymbol(KEY);
      var DELEGATES_TO_SYMBOL = !fails(function() {
        var O3 = {};
        O3[SYMBOL] = function() {
          return 7;
        };
        return ""[KEY](O3) !== 7;
      });
      var DELEGATES_TO_EXEC = DELEGATES_TO_SYMBOL && !fails(function() {
        var execCalled = false;
        var re2 = /a/;
        if (KEY === "split") {
          re2 = {};
          re2.constructor = {};
          re2.constructor[SPECIES] = function() {
            return re2;
          };
          re2.flags = "";
          re2[SYMBOL] = /./[SYMBOL];
        }
        re2.exec = function() {
          execCalled = true;
          return null;
        };
        re2[SYMBOL]("");
        return !execCalled;
      });
      if (!DELEGATES_TO_SYMBOL || !DELEGATES_TO_EXEC || FORCED) {
        var nativeRegExpMethod = /./[SYMBOL];
        var methods = exec(SYMBOL, ""[KEY], function(nativeMethod, regexp, str, arg2, forceStringMethod) {
          var $exec = regexp.exec;
          if ($exec === regexpExec || $exec === RegExpPrototype.exec) {
            if (DELEGATES_TO_SYMBOL && !forceStringMethod) {
              return { done: true, value: call(nativeRegExpMethod, regexp, str, arg2) };
            }
            return { done: true, value: call(nativeMethod, str, regexp, arg2) };
          }
          return { done: false };
        });
        defineBuiltIn(String.prototype, KEY, methods[0]);
        defineBuiltIn(RegExpPrototype, SYMBOL, methods[1]);
      }
      if (SHAM) createNonEnumerableProperty(RegExpPrototype[SYMBOL], "sham", true);
    };
  }
});
var require_string_multibyte = __commonJS({
  "../node_modules/core-js/internals/string-multibyte.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var uncurryThis = require_function_uncurry_this();
    var toIntegerOrInfinity = require_to_integer_or_infinity();
    var toString = require_to_string();
    var requireObjectCoercible = require_require_object_coercible();
    var charAt = uncurryThis("".charAt);
    var charCodeAt = uncurryThis("".charCodeAt);
    var stringSlice = uncurryThis("".slice);
    var createMethod = /* @__PURE__ */ __name2(function(CONVERT_TO_STRING) {
      return function($this, pos) {
        var S2 = toString(requireObjectCoercible($this));
        var position = toIntegerOrInfinity(pos);
        var size = S2.length;
        var first, second;
        if (position < 0 || position >= size) return CONVERT_TO_STRING ? "" : void 0;
        first = charCodeAt(S2, position);
        return first < 55296 || first > 56319 || position + 1 === size || (second = charCodeAt(S2, position + 1)) < 56320 || second > 57343 ? CONVERT_TO_STRING ? charAt(S2, position) : first : CONVERT_TO_STRING ? stringSlice(S2, position, position + 2) : (first - 55296 << 10) + (second - 56320) + 65536;
      };
    }, "createMethod");
    module.exports = {
      // `String.prototype.codePointAt` method
      // https://tc39.es/ecma262/#sec-string.prototype.codepointat
      codeAt: createMethod(false),
      // `String.prototype.at` method
      // https://github.com/mathiasbynens/String.prototype.at
      charAt: createMethod(true)
    };
  }
});
var require_advance_string_index = __commonJS({
  "../node_modules/core-js/internals/advance-string-index.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var charAt = require_string_multibyte().charAt;
    module.exports = function(S2, index2, unicode) {
      return index2 + (unicode ? charAt(S2, index2).length : 1);
    };
  }
});
var require_regexp_flags_detection = __commonJS({
  "../node_modules/core-js/internals/regexp-flags-detection.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var globalThis2 = require_global_this();
    var fails = require_fails();
    var RegExp2 = globalThis2.RegExp;
    var FLAGS_GETTER_IS_CORRECT = !fails(function() {
      var INDICES_SUPPORT = true;
      try {
        RegExp2(".", "d");
      } catch (error) {
        INDICES_SUPPORT = false;
      }
      var O3 = {};
      var calls = "";
      var expected = INDICES_SUPPORT ? "dgimsy" : "gimsy";
      var addGetter = /* @__PURE__ */ __name2(function(key2, chr) {
        Object.defineProperty(O3, key2, { get: /* @__PURE__ */ __name2(function() {
          calls += chr;
          return true;
        }, "get") });
      }, "addGetter");
      var pairs = {
        dotAll: "s",
        global: "g",
        ignoreCase: "i",
        multiline: "m",
        sticky: "y"
      };
      if (INDICES_SUPPORT) pairs.hasIndices = "d";
      for (var key in pairs) addGetter(key, pairs[key]);
      var result = Object.getOwnPropertyDescriptor(RegExp2.prototype, "flags").get.call(O3);
      return result !== expected || calls !== expected;
    });
    module.exports = { correct: FLAGS_GETTER_IS_CORRECT };
  }
});
var require_regexp_get_flags = __commonJS({
  "../node_modules/core-js/internals/regexp-get-flags.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var call = require_function_call();
    var hasOwn = require_has_own_property();
    var isPrototypeOf = require_object_is_prototype_of();
    var regExpFlagsDetection = require_regexp_flags_detection();
    var regExpFlagsGetterImplementation = require_regexp_flags();
    var RegExpPrototype = RegExp.prototype;
    module.exports = regExpFlagsDetection.correct ? function(it2) {
      return it2.flags;
    } : function(it2) {
      return !regExpFlagsDetection.correct && isPrototypeOf(RegExpPrototype, it2) && !hasOwn(it2, "flags") ? call(regExpFlagsGetterImplementation, it2) : it2.flags;
    };
  }
});
var require_regexp_exec_abstract = __commonJS({
  "../node_modules/core-js/internals/regexp-exec-abstract.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var call = require_function_call();
    var anObject = require_an_object();
    var isCallable = require_is_callable();
    var classof = require_classof_raw();
    var regexpExec = require_regexp_exec();
    var $TypeError = TypeError;
    module.exports = function(R2, S2) {
      var exec = R2.exec;
      if (isCallable(exec)) {
        var result = call(exec, R2, S2);
        if (result !== null) anObject(result);
        return result;
      }
      if (classof(R2) === "RegExp") return call(regexpExec, R2, S2);
      throw new $TypeError("RegExp#exec called on incompatible receiver");
    };
  }
});
var require_es_string_match = __commonJS({
  "../node_modules/core-js/modules/es.string.match.js"() {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var call = require_function_call();
    var uncurryThis = require_function_uncurry_this();
    var fixRegExpWellKnownSymbolLogic = require_fix_regexp_well_known_symbol_logic();
    var anObject = require_an_object();
    var isObject2 = require_is_object();
    var toLength = require_to_length();
    var toString = require_to_string();
    var requireObjectCoercible = require_require_object_coercible();
    var getMethod = require_get_method();
    var advanceStringIndex = require_advance_string_index();
    var getRegExpFlags = require_regexp_get_flags();
    var regExpExec = require_regexp_exec_abstract();
    var stringIndexOf2 = uncurryThis("".indexOf);
    fixRegExpWellKnownSymbolLogic("match", function(MATCH, nativeMatch, maybeCallNative) {
      return [
        // `String.prototype.match` method
        // https://tc39.es/ecma262/#sec-string.prototype.match
        /* @__PURE__ */ __name2(/* @__PURE__ */ __name(function match2(regexp) {
          var O3 = requireObjectCoercible(this);
          var matcher = isObject2(regexp) ? getMethod(regexp, MATCH) : void 0;
          return matcher ? call(matcher, regexp, O3) : new RegExp(regexp)[MATCH](toString(O3));
        }, "match2"), "match"),
        // `RegExp.prototype[@@match]` method
        // https://tc39.es/ecma262/#sec-regexp.prototype-@@match
        function(string) {
          var rx = anObject(this);
          var S2 = toString(string);
          var res = maybeCallNative(nativeMatch, rx, S2);
          if (res.done) return res.value;
          var flags2 = toString(getRegExpFlags(rx));
          if (stringIndexOf2(flags2, "g") === -1) return regExpExec(rx, S2);
          var fullUnicode = stringIndexOf2(flags2, "u") !== -1;
          rx.lastIndex = 0;
          var A2 = [];
          var n3 = 0;
          var result;
          while ((result = regExpExec(rx, S2)) !== null) {
            var matchStr = toString(result[0]);
            A2[n3] = matchStr;
            if (matchStr === "") rx.lastIndex = advanceStringIndex(S2, toLength(rx.lastIndex), fullUnicode);
            n3++;
          }
          return n3 === 0 ? null : A2;
        }
      ];
    });
  }
});
var require_get_substitution = __commonJS({
  "../node_modules/core-js/internals/get-substitution.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var uncurryThis = require_function_uncurry_this();
    var toObject = require_to_object();
    var floor = Math.floor;
    var charAt = uncurryThis("".charAt);
    var replace = uncurryThis("".replace);
    var stringSlice = uncurryThis("".slice);
    var SUBSTITUTION_SYMBOLS = /\$([$&'`]|\d{1,2}|<[^>]*>)/g;
    var SUBSTITUTION_SYMBOLS_NO_NAMED = /\$([$&'`]|\d{1,2})/g;
    module.exports = function(matched, str, position, captures, namedCaptures, replacement) {
      var tailPos = position + matched.length;
      var m4 = captures.length;
      var symbols = SUBSTITUTION_SYMBOLS_NO_NAMED;
      if (namedCaptures !== void 0) {
        namedCaptures = toObject(namedCaptures);
        symbols = SUBSTITUTION_SYMBOLS;
      }
      return replace(replacement, symbols, function(match2, ch) {
        var capture;
        switch (charAt(ch, 0)) {
          case "$":
            return "$";
          case "&":
            return matched;
          case "`":
            return stringSlice(str, 0, position);
          case "'":
            return stringSlice(str, tailPos);
          case "<":
            capture = namedCaptures[stringSlice(ch, 1, -1)];
            break;
          default:
            var n3 = +ch;
            if (n3 === 0) return match2;
            if (n3 > m4) {
              var f3 = floor(n3 / 10);
              if (f3 === 0) return match2;
              if (f3 <= m4) return captures[f3 - 1] === void 0 ? charAt(ch, 1) : captures[f3 - 1] + charAt(ch, 1);
              return match2;
            }
            capture = captures[n3 - 1];
        }
        return capture === void 0 ? "" : capture;
      });
    };
  }
});
var require_es_string_replace = __commonJS({
  "../node_modules/core-js/modules/es.string.replace.js"() {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var apply2 = require_function_apply();
    var call = require_function_call();
    var uncurryThis = require_function_uncurry_this();
    var fixRegExpWellKnownSymbolLogic = require_fix_regexp_well_known_symbol_logic();
    var fails = require_fails();
    var anObject = require_an_object();
    var isCallable = require_is_callable();
    var isObject2 = require_is_object();
    var toIntegerOrInfinity = require_to_integer_or_infinity();
    var toLength = require_to_length();
    var toString = require_to_string();
    var requireObjectCoercible = require_require_object_coercible();
    var advanceStringIndex = require_advance_string_index();
    var getMethod = require_get_method();
    var getSubstitution = require_get_substitution();
    var getRegExpFlags = require_regexp_get_flags();
    var regExpExec = require_regexp_exec_abstract();
    var wellKnownSymbol = require_well_known_symbol();
    var REPLACE = wellKnownSymbol("replace");
    var max2 = Math.max;
    var min = Math.min;
    var concat = uncurryThis([].concat);
    var push = uncurryThis([].push);
    var stringIndexOf2 = uncurryThis("".indexOf);
    var stringSlice = uncurryThis("".slice);
    var maybeToString = /* @__PURE__ */ __name2(function(it2) {
      return it2 === void 0 ? it2 : String(it2);
    }, "maybeToString");
    var REPLACE_KEEPS_$0 = function() {
      return "a".replace(/./, "$0") === "$0";
    }();
    var REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE = function() {
      if (/./[REPLACE]) {
        return /./[REPLACE]("a", "$0") === "";
      }
      return false;
    }();
    var REPLACE_SUPPORTS_NAMED_GROUPS = !fails(function() {
      var re2 = /./;
      re2.exec = function() {
        var result = [];
        result.groups = { a: "7" };
        return result;
      };
      return "".replace(re2, "$<a>") !== "7";
    });
    fixRegExpWellKnownSymbolLogic("replace", function(_3, nativeReplace, maybeCallNative) {
      var UNSAFE_SUBSTITUTE = REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE ? "$" : "$0";
      return [
        // `String.prototype.replace` method
        // https://tc39.es/ecma262/#sec-string.prototype.replace
        /* @__PURE__ */ __name2(/* @__PURE__ */ __name(function replace(searchValue, replaceValue) {
          var O3 = requireObjectCoercible(this);
          var replacer = isObject2(searchValue) ? getMethod(searchValue, REPLACE) : void 0;
          return replacer ? call(replacer, searchValue, O3, replaceValue) : call(nativeReplace, toString(O3), searchValue, replaceValue);
        }, "replace"), "replace"),
        // `RegExp.prototype[@@replace]` method
        // https://tc39.es/ecma262/#sec-regexp.prototype-@@replace
        function(string, replaceValue) {
          var rx = anObject(this);
          var S2 = toString(string);
          if (typeof replaceValue == "string" && stringIndexOf2(replaceValue, UNSAFE_SUBSTITUTE) === -1 && stringIndexOf2(replaceValue, "$<") === -1) {
            var res = maybeCallNative(nativeReplace, rx, S2, replaceValue);
            if (res.done) return res.value;
          }
          var functionalReplace = isCallable(replaceValue);
          if (!functionalReplace) replaceValue = toString(replaceValue);
          var flags2 = toString(getRegExpFlags(rx));
          var global2 = stringIndexOf2(flags2, "g") !== -1;
          var fullUnicode;
          if (global2) {
            fullUnicode = stringIndexOf2(flags2, "u") !== -1;
            rx.lastIndex = 0;
          }
          var results = [];
          var result;
          while (true) {
            result = regExpExec(rx, S2);
            if (result === null) break;
            push(results, result);
            if (!global2) break;
            var matchStr = toString(result[0]);
            if (matchStr === "") rx.lastIndex = advanceStringIndex(S2, toLength(rx.lastIndex), fullUnicode);
          }
          var accumulatedResult = "";
          var nextSourcePosition = 0;
          for (var i33 = 0; i33 < results.length; i33++) {
            result = results[i33];
            var matched = toString(result[0]);
            var position = max2(min(toIntegerOrInfinity(result.index), S2.length), 0);
            var captures = [];
            var replacement;
            for (var j2 = 1; j2 < result.length; j2++) push(captures, maybeToString(result[j2]));
            var namedCaptures = result.groups;
            if (functionalReplace) {
              var replacerArgs = concat([matched], captures, position, S2);
              if (namedCaptures !== void 0) push(replacerArgs, namedCaptures);
              replacement = toString(apply2(replaceValue, void 0, replacerArgs));
            } else {
              replacement = getSubstitution(matched, S2, position, captures, namedCaptures, replaceValue);
            }
            if (position >= nextSourcePosition) {
              accumulatedResult += stringSlice(S2, nextSourcePosition, position) + replacement;
              nextSourcePosition = position + matched.length;
            }
          }
          return accumulatedResult + stringSlice(S2, nextSourcePosition);
        }
      ];
    }, !REPLACE_SUPPORTS_NAMED_GROUPS || !REPLACE_KEEPS_$0 || REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE);
  }
});
var require_is_regexp = __commonJS({
  "../node_modules/core-js/internals/is-regexp.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var isObject2 = require_is_object();
    var classof = require_classof_raw();
    var wellKnownSymbol = require_well_known_symbol();
    var MATCH = wellKnownSymbol("match");
    module.exports = function(it2) {
      var isRegExp;
      return isObject2(it2) && ((isRegExp = it2[MATCH]) !== void 0 ? !!isRegExp : classof(it2) === "RegExp");
    };
  }
});
var require_not_a_regexp = __commonJS({
  "../node_modules/core-js/internals/not-a-regexp.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var isRegExp = require_is_regexp();
    var $TypeError = TypeError;
    module.exports = function(it2) {
      if (isRegExp(it2)) {
        throw new $TypeError("The method doesn't accept regular expressions");
      }
      return it2;
    };
  }
});
var require_correct_is_regexp_logic = __commonJS({
  "../node_modules/core-js/internals/correct-is-regexp-logic.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var wellKnownSymbol = require_well_known_symbol();
    var MATCH = wellKnownSymbol("match");
    module.exports = function(METHOD_NAME) {
      var regexp = /./;
      try {
        "/./"[METHOD_NAME](regexp);
      } catch (error1) {
        try {
          regexp[MATCH] = false;
          return "/./"[METHOD_NAME](regexp);
        } catch (error2) {
        }
      }
      return false;
    };
  }
});
var require_es_string_starts_with = __commonJS({
  "../node_modules/core-js/modules/es.string.starts-with.js"() {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var $2 = require_export();
    var uncurryThis = require_function_uncurry_this_clause();
    var getOwnPropertyDescriptor2 = require_object_get_own_property_descriptor().f;
    var toLength = require_to_length();
    var toString = require_to_string();
    var notARegExp = require_not_a_regexp();
    var requireObjectCoercible = require_require_object_coercible();
    var correctIsRegExpLogic = require_correct_is_regexp_logic();
    var IS_PURE = require_is_pure();
    var stringSlice = uncurryThis("".slice);
    var min = Math.min;
    var CORRECT_IS_REGEXP_LOGIC = correctIsRegExpLogic("startsWith");
    var MDN_POLYFILL_BUG = !IS_PURE && !CORRECT_IS_REGEXP_LOGIC && !!function() {
      var descriptor = getOwnPropertyDescriptor2(String.prototype, "startsWith");
      return descriptor && !descriptor.writable;
    }();
    $2({ target: "String", proto: true, forced: !MDN_POLYFILL_BUG && !CORRECT_IS_REGEXP_LOGIC }, {
      startsWith: /* @__PURE__ */ __name2(/* @__PURE__ */ __name(function startsWith(searchString) {
        var that = toString(requireObjectCoercible(this));
        notARegExp(searchString);
        var index2 = toLength(min(arguments.length > 1 ? arguments[1] : void 0, that.length));
        var search = toString(searchString);
        return stringSlice(that, index2, index2 + search.length) === search;
      }, "startsWith"), "startsWith")
    });
  }
});
var require_add_to_unscopables = __commonJS({
  "../node_modules/core-js/internals/add-to-unscopables.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var wellKnownSymbol = require_well_known_symbol();
    var create2 = require_object_create();
    var defineProperty = require_object_define_property().f;
    var UNSCOPABLES = wellKnownSymbol("unscopables");
    var ArrayPrototype = Array.prototype;
    if (ArrayPrototype[UNSCOPABLES] === void 0) {
      defineProperty(ArrayPrototype, UNSCOPABLES, {
        configurable: true,
        value: create2(null)
      });
    }
    module.exports = function(key) {
      ArrayPrototype[UNSCOPABLES][key] = true;
    };
  }
});
var require_correct_prototype_getter = __commonJS({
  "../node_modules/core-js/internals/correct-prototype-getter.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var fails = require_fails();
    module.exports = !fails(function() {
      function F2() {
      }
      __name(F2, "F2");
      __name2(F2, "F");
      F2.prototype.constructor = null;
      return Object.getPrototypeOf(new F2()) !== F2.prototype;
    });
  }
});
var require_object_get_prototype_of = __commonJS({
  "../node_modules/core-js/internals/object-get-prototype-of.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var hasOwn = require_has_own_property();
    var isCallable = require_is_callable();
    var toObject = require_to_object();
    var sharedKey = require_shared_key();
    var CORRECT_PROTOTYPE_GETTER = require_correct_prototype_getter();
    var IE_PROTO = sharedKey("IE_PROTO");
    var $Object = Object;
    var ObjectPrototype = $Object.prototype;
    module.exports = CORRECT_PROTOTYPE_GETTER ? $Object.getPrototypeOf : function(O3) {
      var object = toObject(O3);
      if (hasOwn(object, IE_PROTO)) return object[IE_PROTO];
      var constructor = object.constructor;
      if (isCallable(constructor) && object instanceof constructor) {
        return constructor.prototype;
      }
      return object instanceof $Object ? ObjectPrototype : null;
    };
  }
});
var require_iterators_core = __commonJS({
  "../node_modules/core-js/internals/iterators-core.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var fails = require_fails();
    var isCallable = require_is_callable();
    var isObject2 = require_is_object();
    var create2 = require_object_create();
    var getPrototypeOf2 = require_object_get_prototype_of();
    var defineBuiltIn = require_define_built_in();
    var wellKnownSymbol = require_well_known_symbol();
    var IS_PURE = require_is_pure();
    var ITERATOR = wellKnownSymbol("iterator");
    var BUGGY_SAFARI_ITERATORS = false;
    var IteratorPrototype;
    var PrototypeOfArrayIteratorPrototype;
    var arrayIterator;
    if ([].keys) {
      arrayIterator = [].keys();
      if (!("next" in arrayIterator)) BUGGY_SAFARI_ITERATORS = true;
      else {
        PrototypeOfArrayIteratorPrototype = getPrototypeOf2(getPrototypeOf2(arrayIterator));
        if (PrototypeOfArrayIteratorPrototype !== Object.prototype) IteratorPrototype = PrototypeOfArrayIteratorPrototype;
      }
    }
    var NEW_ITERATOR_PROTOTYPE = !isObject2(IteratorPrototype) || fails(function() {
      var test = {};
      return IteratorPrototype[ITERATOR].call(test) !== test;
    });
    if (NEW_ITERATOR_PROTOTYPE) IteratorPrototype = {};
    else if (IS_PURE) IteratorPrototype = create2(IteratorPrototype);
    if (!isCallable(IteratorPrototype[ITERATOR])) {
      defineBuiltIn(IteratorPrototype, ITERATOR, function() {
        return this;
      });
    }
    module.exports = {
      IteratorPrototype,
      BUGGY_SAFARI_ITERATORS
    };
  }
});
var require_iterator_create_constructor = __commonJS({
  "../node_modules/core-js/internals/iterator-create-constructor.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var IteratorPrototype = require_iterators_core().IteratorPrototype;
    var create2 = require_object_create();
    var createPropertyDescriptor = require_create_property_descriptor();
    var setToStringTag = require_set_to_string_tag();
    var Iterators = require_iterators();
    var returnThis = /* @__PURE__ */ __name2(function() {
      return this;
    }, "returnThis");
    module.exports = function(IteratorConstructor, NAME, next, ENUMERABLE_NEXT) {
      var TO_STRING_TAG = NAME + " Iterator";
      IteratorConstructor.prototype = create2(IteratorPrototype, { next: createPropertyDescriptor(+!ENUMERABLE_NEXT, next) });
      setToStringTag(IteratorConstructor, TO_STRING_TAG, false, true);
      Iterators[TO_STRING_TAG] = returnThis;
      return IteratorConstructor;
    };
  }
});
var require_iterator_define = __commonJS({
  "../node_modules/core-js/internals/iterator-define.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var $2 = require_export();
    var call = require_function_call();
    var IS_PURE = require_is_pure();
    var FunctionName = require_function_name();
    var isCallable = require_is_callable();
    var createIteratorConstructor = require_iterator_create_constructor();
    var getPrototypeOf2 = require_object_get_prototype_of();
    var setPrototypeOf2 = require_object_set_prototype_of();
    var setToStringTag = require_set_to_string_tag();
    var createNonEnumerableProperty = require_create_non_enumerable_property();
    var defineBuiltIn = require_define_built_in();
    var wellKnownSymbol = require_well_known_symbol();
    var Iterators = require_iterators();
    var IteratorsCore = require_iterators_core();
    var PROPER_FUNCTION_NAME = FunctionName.PROPER;
    var CONFIGURABLE_FUNCTION_NAME = FunctionName.CONFIGURABLE;
    var IteratorPrototype = IteratorsCore.IteratorPrototype;
    var BUGGY_SAFARI_ITERATORS = IteratorsCore.BUGGY_SAFARI_ITERATORS;
    var ITERATOR = wellKnownSymbol("iterator");
    var KEYS = "keys";
    var VALUES = "values";
    var ENTRIES = "entries";
    var returnThis = /* @__PURE__ */ __name2(function() {
      return this;
    }, "returnThis");
    module.exports = function(Iterable, NAME, IteratorConstructor, next, DEFAULT, IS_SET, FORCED) {
      createIteratorConstructor(IteratorConstructor, NAME, next);
      var getIterationMethod = /* @__PURE__ */ __name2(function(KIND) {
        if (KIND === DEFAULT && defaultIterator) return defaultIterator;
        if (!BUGGY_SAFARI_ITERATORS && KIND && KIND in IterablePrototype) return IterablePrototype[KIND];
        switch (KIND) {
          case KEYS:
            return /* @__PURE__ */ __name2(/* @__PURE__ */ __name(function keys() {
              return new IteratorConstructor(this, KIND);
            }, "keys"), "keys");
          case VALUES:
            return /* @__PURE__ */ __name2(/* @__PURE__ */ __name(function values() {
              return new IteratorConstructor(this, KIND);
            }, "values"), "values");
          case ENTRIES:
            return /* @__PURE__ */ __name2(/* @__PURE__ */ __name(function entries2() {
              return new IteratorConstructor(this, KIND);
            }, "entries2"), "entries");
        }
        return function() {
          return new IteratorConstructor(this);
        };
      }, "getIterationMethod");
      var TO_STRING_TAG = NAME + " Iterator";
      var INCORRECT_VALUES_NAME = false;
      var IterablePrototype = Iterable.prototype;
      var nativeIterator = IterablePrototype[ITERATOR] || IterablePrototype["@@iterator"] || DEFAULT && IterablePrototype[DEFAULT];
      var defaultIterator = !BUGGY_SAFARI_ITERATORS && nativeIterator || getIterationMethod(DEFAULT);
      var anyNativeIterator = NAME === "Array" ? IterablePrototype.entries || nativeIterator : nativeIterator;
      var CurrentIteratorPrototype, methods, KEY;
      if (anyNativeIterator) {
        CurrentIteratorPrototype = getPrototypeOf2(anyNativeIterator.call(new Iterable()));
        if (CurrentIteratorPrototype !== Object.prototype && CurrentIteratorPrototype.next) {
          if (!IS_PURE && getPrototypeOf2(CurrentIteratorPrototype) !== IteratorPrototype) {
            if (setPrototypeOf2) {
              setPrototypeOf2(CurrentIteratorPrototype, IteratorPrototype);
            } else if (!isCallable(CurrentIteratorPrototype[ITERATOR])) {
              defineBuiltIn(CurrentIteratorPrototype, ITERATOR, returnThis);
            }
          }
          setToStringTag(CurrentIteratorPrototype, TO_STRING_TAG, true, true);
          if (IS_PURE) Iterators[TO_STRING_TAG] = returnThis;
        }
      }
      if (PROPER_FUNCTION_NAME && DEFAULT === VALUES && nativeIterator && nativeIterator.name !== VALUES) {
        if (!IS_PURE && CONFIGURABLE_FUNCTION_NAME) {
          createNonEnumerableProperty(IterablePrototype, "name", VALUES);
        } else {
          INCORRECT_VALUES_NAME = true;
          defaultIterator = /* @__PURE__ */ __name2(/* @__PURE__ */ __name(function values() {
            return call(nativeIterator, this);
          }, "values"), "values");
        }
      }
      if (DEFAULT) {
        methods = {
          values: getIterationMethod(VALUES),
          keys: IS_SET ? defaultIterator : getIterationMethod(KEYS),
          entries: getIterationMethod(ENTRIES)
        };
        if (FORCED) for (KEY in methods) {
          if (BUGGY_SAFARI_ITERATORS || INCORRECT_VALUES_NAME || !(KEY in IterablePrototype)) {
            defineBuiltIn(IterablePrototype, KEY, methods[KEY]);
          }
        }
        else $2({ target: NAME, proto: true, forced: BUGGY_SAFARI_ITERATORS || INCORRECT_VALUES_NAME }, methods);
      }
      if ((!IS_PURE || FORCED) && IterablePrototype[ITERATOR] !== defaultIterator) {
        defineBuiltIn(IterablePrototype, ITERATOR, defaultIterator, { name: DEFAULT });
      }
      Iterators[NAME] = defaultIterator;
      return methods;
    };
  }
});
var require_create_iter_result_object = __commonJS({
  "../node_modules/core-js/internals/create-iter-result-object.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    module.exports = function(value, done) {
      return { value, done };
    };
  }
});
var require_es_array_iterator = __commonJS({
  "../node_modules/core-js/modules/es.array.iterator.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var toIndexedObject = require_to_indexed_object();
    var addToUnscopables = require_add_to_unscopables();
    var Iterators = require_iterators();
    var InternalStateModule = require_internal_state();
    var defineProperty = require_object_define_property().f;
    var defineIterator = require_iterator_define();
    var createIterResultObject = require_create_iter_result_object();
    var IS_PURE = require_is_pure();
    var DESCRIPTORS = require_descriptors();
    var ARRAY_ITERATOR = "Array Iterator";
    var setInternalState = InternalStateModule.set;
    var getInternalState = InternalStateModule.getterFor(ARRAY_ITERATOR);
    module.exports = defineIterator(Array, "Array", function(iterated, kind) {
      setInternalState(this, {
        type: ARRAY_ITERATOR,
        target: toIndexedObject(iterated),
        // target
        index: 0,
        // next index
        kind
        // kind
      });
    }, function() {
      var state = getInternalState(this);
      var target = state.target;
      var index2 = state.index++;
      if (!target || index2 >= target.length) {
        state.target = null;
        return createIterResultObject(void 0, true);
      }
      switch (state.kind) {
        case "keys":
          return createIterResultObject(index2, false);
        case "values":
          return createIterResultObject(target[index2], false);
      }
      return createIterResultObject([index2, target[index2]], false);
    }, "values");
    var values = Iterators.Arguments = Iterators.Array;
    addToUnscopables("keys");
    addToUnscopables("values");
    addToUnscopables("entries");
    if (!IS_PURE && DESCRIPTORS && values.name !== "values") try {
      defineProperty(values, "name", { value: "values" });
    } catch (error) {
    }
  }
});
var require_dom_iterables = __commonJS({
  "../node_modules/core-js/internals/dom-iterables.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    module.exports = {
      CSSRuleList: 0,
      CSSStyleDeclaration: 0,
      CSSValueList: 0,
      ClientRectList: 0,
      DOMRectList: 0,
      DOMStringList: 0,
      DOMTokenList: 1,
      DataTransferItemList: 0,
      FileList: 0,
      HTMLAllCollection: 0,
      HTMLCollection: 0,
      HTMLFormElement: 0,
      HTMLSelectElement: 0,
      MediaList: 0,
      MimeTypeArray: 0,
      NamedNodeMap: 0,
      NodeList: 1,
      PaintRequestList: 0,
      Plugin: 0,
      PluginArray: 0,
      SVGLengthList: 0,
      SVGNumberList: 0,
      SVGPathSegList: 0,
      SVGPointList: 0,
      SVGStringList: 0,
      SVGTransformList: 0,
      SourceBufferList: 0,
      StyleSheetList: 0,
      TextTrackCueList: 0,
      TextTrackList: 0,
      TouchList: 0
    };
  }
});
var require_dom_token_list_prototype = __commonJS({
  "../node_modules/core-js/internals/dom-token-list-prototype.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var documentCreateElement = require_document_create_element();
    var classList = documentCreateElement("span").classList;
    var DOMTokenListPrototype = classList && classList.constructor && classList.constructor.prototype;
    module.exports = DOMTokenListPrototype === Object.prototype ? void 0 : DOMTokenListPrototype;
  }
});
var require_web_dom_collections_iterator = __commonJS({
  "../node_modules/core-js/modules/web.dom-collections.iterator.js"() {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var globalThis2 = require_global_this();
    var DOMIterables = require_dom_iterables();
    var DOMTokenListPrototype = require_dom_token_list_prototype();
    var ArrayIteratorMethods = require_es_array_iterator();
    var createNonEnumerableProperty = require_create_non_enumerable_property();
    var setToStringTag = require_set_to_string_tag();
    var wellKnownSymbol = require_well_known_symbol();
    var ITERATOR = wellKnownSymbol("iterator");
    var ArrayValues = ArrayIteratorMethods.values;
    var handlePrototype = /* @__PURE__ */ __name2(function(CollectionPrototype, COLLECTION_NAME2) {
      if (CollectionPrototype) {
        if (CollectionPrototype[ITERATOR] !== ArrayValues) try {
          createNonEnumerableProperty(CollectionPrototype, ITERATOR, ArrayValues);
        } catch (error) {
          CollectionPrototype[ITERATOR] = ArrayValues;
        }
        setToStringTag(CollectionPrototype, COLLECTION_NAME2, true);
        if (DOMIterables[COLLECTION_NAME2]) for (var METHOD_NAME in ArrayIteratorMethods) {
          if (CollectionPrototype[METHOD_NAME] !== ArrayIteratorMethods[METHOD_NAME]) try {
            createNonEnumerableProperty(CollectionPrototype, METHOD_NAME, ArrayIteratorMethods[METHOD_NAME]);
          } catch (error) {
            CollectionPrototype[METHOD_NAME] = ArrayIteratorMethods[METHOD_NAME];
          }
        }
      }
    }, "handlePrototype");
    for (COLLECTION_NAME in DOMIterables) {
      handlePrototype(globalThis2[COLLECTION_NAME] && globalThis2[COLLECTION_NAME].prototype, COLLECTION_NAME);
    }
    var COLLECTION_NAME;
    handlePrototype(DOMTokenListPrototype, "DOMTokenList");
  }
});
function toPrimitive(t3, r2) {
  if ("object" != _typeof(t3) || !t3) return t3;
  var e2 = t3[Symbol.toPrimitive];
  if (void 0 !== e2) {
    var i33 = e2.call(t3, r2 || "default");
    if ("object" != _typeof(i33)) return i33;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return ("string" === r2 ? String : Number)(t3);
}
__name(toPrimitive, "toPrimitive");
var init_toPrimitive = __esm({
  "../node_modules/@babel/runtime/helpers/esm/toPrimitive.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_typeof();
    __name2(toPrimitive, "toPrimitive");
  }
});
function toPropertyKey(t3) {
  var i33 = toPrimitive(t3, "string");
  return "symbol" == _typeof(i33) ? i33 : i33 + "";
}
__name(toPropertyKey, "toPropertyKey");
var init_toPropertyKey = __esm({
  "../node_modules/@babel/runtime/helpers/esm/toPropertyKey.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_typeof();
    init_toPrimitive();
    __name2(toPropertyKey, "toPropertyKey");
  }
});
function _defineProperty(e2, r2, t3) {
  return (r2 = toPropertyKey(r2)) in e2 ? Object.defineProperty(e2, r2, {
    value: t3,
    enumerable: true,
    configurable: true,
    writable: true
  }) : e2[r2] = t3, e2;
}
__name(_defineProperty, "_defineProperty");
var init_defineProperty = __esm({
  "../node_modules/@babel/runtime/helpers/esm/defineProperty.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_toPropertyKey();
    __name2(_defineProperty, "_defineProperty");
  }
});
var require_array_reduce = __commonJS({
  "../node_modules/core-js/internals/array-reduce.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var aCallable = require_a_callable();
    var toObject = require_to_object();
    var IndexedObject = require_indexed_object();
    var lengthOfArrayLike = require_length_of_array_like();
    var $TypeError = TypeError;
    var REDUCE_EMPTY = "Reduce of empty array with no initial value";
    var createMethod = /* @__PURE__ */ __name2(function(IS_RIGHT) {
      return function(that, callbackfn, argumentsLength, memo) {
        var O3 = toObject(that);
        var self2 = IndexedObject(O3);
        var length = lengthOfArrayLike(O3);
        aCallable(callbackfn);
        if (length === 0 && argumentsLength < 2) throw new $TypeError(REDUCE_EMPTY);
        var index2 = IS_RIGHT ? length - 1 : 0;
        var i33 = IS_RIGHT ? -1 : 1;
        if (argumentsLength < 2) while (true) {
          if (index2 in self2) {
            memo = self2[index2];
            index2 += i33;
            break;
          }
          index2 += i33;
          if (IS_RIGHT ? index2 < 0 : length <= index2) {
            throw new $TypeError(REDUCE_EMPTY);
          }
        }
        for (; IS_RIGHT ? index2 >= 0 : length > index2; index2 += i33) if (index2 in self2) {
          memo = callbackfn(memo, self2[index2], index2, O3);
        }
        return memo;
      };
    }, "createMethod");
    module.exports = {
      // `Array.prototype.reduce` method
      // https://tc39.es/ecma262/#sec-array.prototype.reduce
      left: createMethod(false),
      // `Array.prototype.reduceRight` method
      // https://tc39.es/ecma262/#sec-array.prototype.reduceright
      right: createMethod(true)
    };
  }
});
var require_array_method_is_strict = __commonJS({
  "../node_modules/core-js/internals/array-method-is-strict.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var fails = require_fails();
    module.exports = function(METHOD_NAME, argument) {
      var method = [][METHOD_NAME];
      return !!method && fails(function() {
        method.call(null, argument || function() {
          return 1;
        }, 1);
      });
    };
  }
});
var require_es_array_reduce = __commonJS({
  "../node_modules/core-js/modules/es.array.reduce.js"() {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var $2 = require_export();
    var $reduce = require_array_reduce().left;
    var arrayMethodIsStrict = require_array_method_is_strict();
    var CHROME_VERSION = require_environment_v8_version();
    var IS_NODE = require_environment_is_node();
    var CHROME_BUG = !IS_NODE && CHROME_VERSION > 79 && CHROME_VERSION < 83;
    var FORCED = CHROME_BUG || !arrayMethodIsStrict("reduce");
    $2({ target: "Array", proto: true, forced: FORCED }, {
      reduce: /* @__PURE__ */ __name2(/* @__PURE__ */ __name(function reduce(callbackfn) {
        var length = arguments.length;
        return $reduce(this, callbackfn, length, length > 1 ? arguments[1] : void 0);
      }, "reduce"), "reduce")
    });
  }
});
var require_es_string_ends_with = __commonJS({
  "../node_modules/core-js/modules/es.string.ends-with.js"() {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var $2 = require_export();
    var uncurryThis = require_function_uncurry_this_clause();
    var getOwnPropertyDescriptor2 = require_object_get_own_property_descriptor().f;
    var toLength = require_to_length();
    var toString = require_to_string();
    var notARegExp = require_not_a_regexp();
    var requireObjectCoercible = require_require_object_coercible();
    var correctIsRegExpLogic = require_correct_is_regexp_logic();
    var IS_PURE = require_is_pure();
    var slice = uncurryThis("".slice);
    var min = Math.min;
    var CORRECT_IS_REGEXP_LOGIC = correctIsRegExpLogic("endsWith");
    var MDN_POLYFILL_BUG = !IS_PURE && !CORRECT_IS_REGEXP_LOGIC && !!function() {
      var descriptor = getOwnPropertyDescriptor2(String.prototype, "endsWith");
      return descriptor && !descriptor.writable;
    }();
    $2({ target: "String", proto: true, forced: !MDN_POLYFILL_BUG && !CORRECT_IS_REGEXP_LOGIC }, {
      endsWith: /* @__PURE__ */ __name2(/* @__PURE__ */ __name(function endsWith(searchString) {
        var that = toString(requireObjectCoercible(this));
        notARegExp(searchString);
        var endPosition = arguments.length > 1 ? arguments[1] : void 0;
        var len = that.length;
        var end = endPosition === void 0 ? len : min(toLength(endPosition), len);
        var search = toString(searchString);
        return slice(that, end - search.length, end) === search;
      }, "endsWith"), "endsWith")
    });
  }
});
var require_es_string_split = __commonJS({
  "../node_modules/core-js/modules/es.string.split.js"() {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var call = require_function_call();
    var uncurryThis = require_function_uncurry_this();
    var fixRegExpWellKnownSymbolLogic = require_fix_regexp_well_known_symbol_logic();
    var anObject = require_an_object();
    var isObject2 = require_is_object();
    var requireObjectCoercible = require_require_object_coercible();
    var speciesConstructor = require_species_constructor();
    var advanceStringIndex = require_advance_string_index();
    var toLength = require_to_length();
    var toString = require_to_string();
    var getMethod = require_get_method();
    var regExpExec = require_regexp_exec_abstract();
    var stickyHelpers = require_regexp_sticky_helpers();
    var fails = require_fails();
    var UNSUPPORTED_Y = stickyHelpers.UNSUPPORTED_Y;
    var MAX_UINT32 = 4294967295;
    var min = Math.min;
    var push = uncurryThis([].push);
    var stringSlice = uncurryThis("".slice);
    var SPLIT_WORKS_WITH_OVERWRITTEN_EXEC = !fails(function() {
      var re2 = /(?:)/;
      var originalExec = re2.exec;
      re2.exec = function() {
        return originalExec.apply(this, arguments);
      };
      var result = "ab".split(re2);
      return result.length !== 2 || result[0] !== "a" || result[1] !== "b";
    });
    var BUGGY = "abbc".split(/(b)*/)[1] === "c" || // eslint-disable-next-line regexp/no-empty-group -- required for testing
    "test".split(/(?:)/, -1).length !== 4 || "ab".split(/(?:ab)*/).length !== 2 || ".".split(/(.?)(.?)/).length !== 4 || // eslint-disable-next-line regexp/no-empty-capturing-group, regexp/no-empty-group -- required for testing
    ".".split(/()()/).length > 1 || "".split(/.?/).length;
    fixRegExpWellKnownSymbolLogic("split", function(SPLIT, nativeSplit, maybeCallNative) {
      var internalSplit = "0".split(void 0, 0).length ? function(separator, limit) {
        return separator === void 0 && limit === 0 ? [] : call(nativeSplit, this, separator, limit);
      } : nativeSplit;
      return [
        // `String.prototype.split` method
        // https://tc39.es/ecma262/#sec-string.prototype.split
        /* @__PURE__ */ __name2(/* @__PURE__ */ __name(function split(separator, limit) {
          var O3 = requireObjectCoercible(this);
          var splitter = isObject2(separator) ? getMethod(separator, SPLIT) : void 0;
          return splitter ? call(splitter, separator, O3, limit) : call(internalSplit, toString(O3), separator, limit);
        }, "split"), "split"),
        // `RegExp.prototype[@@split]` method
        // https://tc39.es/ecma262/#sec-regexp.prototype-@@split
        //
        // NOTE: This cannot be properly polyfilled in engines that don't support
        // the 'y' flag.
        function(string, limit) {
          var rx = anObject(this);
          var S2 = toString(string);
          if (!BUGGY) {
            var res = maybeCallNative(internalSplit, rx, S2, limit, internalSplit !== nativeSplit);
            if (res.done) return res.value;
          }
          var C2 = speciesConstructor(rx, RegExp);
          var unicodeMatching = rx.unicode;
          var flags2 = (rx.ignoreCase ? "i" : "") + (rx.multiline ? "m" : "") + (rx.unicode ? "u" : "") + (UNSUPPORTED_Y ? "g" : "y");
          var splitter = new C2(UNSUPPORTED_Y ? "^(?:" + rx.source + ")" : rx, flags2);
          var lim = limit === void 0 ? MAX_UINT32 : limit >>> 0;
          if (lim === 0) return [];
          if (S2.length === 0) return regExpExec(splitter, S2) === null ? [S2] : [];
          var p3 = 0;
          var q2 = 0;
          var A2 = [];
          while (q2 < S2.length) {
            splitter.lastIndex = UNSUPPORTED_Y ? 0 : q2;
            var z3 = regExpExec(splitter, UNSUPPORTED_Y ? stringSlice(S2, q2) : S2);
            var e2;
            if (z3 === null || (e2 = min(toLength(splitter.lastIndex + (UNSUPPORTED_Y ? q2 : 0)), S2.length)) === p3) {
              q2 = advanceStringIndex(S2, q2, unicodeMatching);
            } else {
              push(A2, stringSlice(S2, p3, q2));
              if (A2.length === lim) return A2;
              for (var i33 = 1; i33 <= z3.length - 1; i33++) {
                push(A2, z3[i33]);
                if (A2.length === lim) return A2;
              }
              q2 = p3 = e2;
            }
          }
          push(A2, stringSlice(S2, p3));
          return A2;
        }
      ];
    }, BUGGY || !SPLIT_WORKS_WITH_OVERWRITTEN_EXEC, UNSUPPORTED_Y);
  }
});
var require_performance_now = __commonJS({
  "../node_modules/performance-now/lib/performance-now.js"(exports, module) {
    init_functionsRoutes_0_8044054200943971();
    (function() {
      var getNanoSeconds, hrtime, loadTime, moduleLoadTime, nodeLoadTime, upTime;
      if (typeof performance !== "undefined" && performance !== null && performance.now) {
        module.exports = function() {
          return performance.now();
        };
      } else if (typeof process !== "undefined" && process !== null && process.hrtime) {
        module.exports = function() {
          return (getNanoSeconds() - nodeLoadTime) / 1e6;
        };
        hrtime = process.hrtime;
        getNanoSeconds = /* @__PURE__ */ __name2(function() {
          var hr;
          hr = hrtime();
          return hr[0] * 1e9 + hr[1];
        }, "getNanoSeconds");
        moduleLoadTime = getNanoSeconds();
        upTime = process.uptime() * 1e9;
        nodeLoadTime = moduleLoadTime - upTime;
      } else if (Date.now) {
        module.exports = function() {
          return Date.now() - loadTime;
        };
        loadTime = Date.now();
      } else {
        module.exports = function() {
          return (/* @__PURE__ */ new Date()).getTime() - loadTime;
        };
        loadTime = (/* @__PURE__ */ new Date()).getTime();
      }
    }).call(exports);
  }
});
var require_raf = __commonJS({
  "../node_modules/raf/index.js"(exports, module) {
    init_functionsRoutes_0_8044054200943971();
    var now = require_performance_now();
    var root = typeof window === "undefined" ? global : window;
    var vendors = ["moz", "webkit"];
    var suffix = "AnimationFrame";
    var raf = root["request" + suffix];
    var caf = root["cancel" + suffix] || root["cancelRequest" + suffix];
    for (i33 = 0; !raf && i33 < vendors.length; i33++) {
      raf = root[vendors[i33] + "Request" + suffix];
      caf = root[vendors[i33] + "Cancel" + suffix] || root[vendors[i33] + "CancelRequest" + suffix];
    }
    var i33;
    if (!raf || !caf) {
      last = 0, id = 0, queue = [], frameDuration = 1e3 / 60;
      raf = /* @__PURE__ */ __name2(function(callback) {
        if (queue.length === 0) {
          var _now = now(), next = Math.max(0, frameDuration - (_now - last));
          last = next + _now;
          setTimeout(function() {
            var cp = queue.slice(0);
            queue.length = 0;
            for (var i4 = 0; i4 < cp.length; i4++) {
              if (!cp[i4].cancelled) {
                try {
                  cp[i4].callback(last);
                } catch (e2) {
                  setTimeout(function() {
                    throw e2;
                  }, 0);
                }
              }
            }
          }, Math.round(next));
        }
        queue.push({
          handle: ++id,
          callback,
          cancelled: false
        });
        return id;
      }, "raf");
      caf = /* @__PURE__ */ __name2(function(handle) {
        for (var i4 = 0; i4 < queue.length; i4++) {
          if (queue[i4].handle === handle) {
            queue[i4].cancelled = true;
          }
        }
      }, "caf");
    }
    var last;
    var id;
    var queue;
    var frameDuration;
    module.exports = function(fn) {
      return raf.call(root, fn);
    };
    module.exports.cancel = function() {
      caf.apply(root, arguments);
    };
    module.exports.polyfill = function(object) {
      if (!object) {
        object = root;
      }
      object.requestAnimationFrame = raf;
      object.cancelAnimationFrame = caf;
    };
  }
});
var require_whitespaces = __commonJS({
  "../node_modules/core-js/internals/whitespaces.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    module.exports = "	\n\v\f\r \xA0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF";
  }
});
var require_string_trim = __commonJS({
  "../node_modules/core-js/internals/string-trim.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var uncurryThis = require_function_uncurry_this();
    var requireObjectCoercible = require_require_object_coercible();
    var toString = require_to_string();
    var whitespaces = require_whitespaces();
    var replace = uncurryThis("".replace);
    var ltrim = RegExp("^[" + whitespaces + "]+");
    var rtrim = RegExp("(^|[^" + whitespaces + "])[" + whitespaces + "]+$");
    var createMethod = /* @__PURE__ */ __name2(function(TYPE) {
      return function($this) {
        var string = toString(requireObjectCoercible($this));
        if (TYPE & 1) string = replace(string, ltrim, "");
        if (TYPE & 2) string = replace(string, rtrim, "$1");
        return string;
      };
    }, "createMethod");
    module.exports = {
      // `String.prototype.{ trimLeft, trimStart }` methods
      // https://tc39.es/ecma262/#sec-string.prototype.trimstart
      start: createMethod(1),
      // `String.prototype.{ trimRight, trimEnd }` methods
      // https://tc39.es/ecma262/#sec-string.prototype.trimend
      end: createMethod(2),
      // `String.prototype.trim` method
      // https://tc39.es/ecma262/#sec-string.prototype.trim
      trim: createMethod(3)
    };
  }
});
var require_string_trim_forced = __commonJS({
  "../node_modules/core-js/internals/string-trim-forced.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var PROPER_FUNCTION_NAME = require_function_name().PROPER;
    var fails = require_fails();
    var whitespaces = require_whitespaces();
    var non = "\u200B\x85\u180E";
    module.exports = function(METHOD_NAME) {
      return fails(function() {
        return !!whitespaces[METHOD_NAME]() || non[METHOD_NAME]() !== non || PROPER_FUNCTION_NAME && whitespaces[METHOD_NAME].name !== METHOD_NAME;
      });
    };
  }
});
var require_es_string_trim = __commonJS({
  "../node_modules/core-js/modules/es.string.trim.js"() {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var $2 = require_export();
    var $trim = require_string_trim().trim;
    var forcedStringTrimMethod = require_string_trim_forced();
    $2({ target: "String", proto: true, forced: forcedStringTrimMethod("trim") }, {
      trim: /* @__PURE__ */ __name2(/* @__PURE__ */ __name(function trim() {
        return $trim(this);
      }, "trim"), "trim")
    });
  }
});
var require_rgbcolor = __commonJS({
  "../node_modules/rgbcolor/index.js"(exports, module) {
    init_functionsRoutes_0_8044054200943971();
    module.exports = function(color_string) {
      this.ok = false;
      this.alpha = 1;
      if (color_string.charAt(0) == "#") {
        color_string = color_string.substr(1, 6);
      }
      color_string = color_string.replace(/ /g, "");
      color_string = color_string.toLowerCase();
      var simple_colors = {
        aliceblue: "f0f8ff",
        antiquewhite: "faebd7",
        aqua: "00ffff",
        aquamarine: "7fffd4",
        azure: "f0ffff",
        beige: "f5f5dc",
        bisque: "ffe4c4",
        black: "000000",
        blanchedalmond: "ffebcd",
        blue: "0000ff",
        blueviolet: "8a2be2",
        brown: "a52a2a",
        burlywood: "deb887",
        cadetblue: "5f9ea0",
        chartreuse: "7fff00",
        chocolate: "d2691e",
        coral: "ff7f50",
        cornflowerblue: "6495ed",
        cornsilk: "fff8dc",
        crimson: "dc143c",
        cyan: "00ffff",
        darkblue: "00008b",
        darkcyan: "008b8b",
        darkgoldenrod: "b8860b",
        darkgray: "a9a9a9",
        darkgreen: "006400",
        darkkhaki: "bdb76b",
        darkmagenta: "8b008b",
        darkolivegreen: "556b2f",
        darkorange: "ff8c00",
        darkorchid: "9932cc",
        darkred: "8b0000",
        darksalmon: "e9967a",
        darkseagreen: "8fbc8f",
        darkslateblue: "483d8b",
        darkslategray: "2f4f4f",
        darkturquoise: "00ced1",
        darkviolet: "9400d3",
        deeppink: "ff1493",
        deepskyblue: "00bfff",
        dimgray: "696969",
        dodgerblue: "1e90ff",
        feldspar: "d19275",
        firebrick: "b22222",
        floralwhite: "fffaf0",
        forestgreen: "228b22",
        fuchsia: "ff00ff",
        gainsboro: "dcdcdc",
        ghostwhite: "f8f8ff",
        gold: "ffd700",
        goldenrod: "daa520",
        gray: "808080",
        green: "008000",
        greenyellow: "adff2f",
        honeydew: "f0fff0",
        hotpink: "ff69b4",
        indianred: "cd5c5c",
        indigo: "4b0082",
        ivory: "fffff0",
        khaki: "f0e68c",
        lavender: "e6e6fa",
        lavenderblush: "fff0f5",
        lawngreen: "7cfc00",
        lemonchiffon: "fffacd",
        lightblue: "add8e6",
        lightcoral: "f08080",
        lightcyan: "e0ffff",
        lightgoldenrodyellow: "fafad2",
        lightgrey: "d3d3d3",
        lightgreen: "90ee90",
        lightpink: "ffb6c1",
        lightsalmon: "ffa07a",
        lightseagreen: "20b2aa",
        lightskyblue: "87cefa",
        lightslateblue: "8470ff",
        lightslategray: "778899",
        lightsteelblue: "b0c4de",
        lightyellow: "ffffe0",
        lime: "00ff00",
        limegreen: "32cd32",
        linen: "faf0e6",
        magenta: "ff00ff",
        maroon: "800000",
        mediumaquamarine: "66cdaa",
        mediumblue: "0000cd",
        mediumorchid: "ba55d3",
        mediumpurple: "9370d8",
        mediumseagreen: "3cb371",
        mediumslateblue: "7b68ee",
        mediumspringgreen: "00fa9a",
        mediumturquoise: "48d1cc",
        mediumvioletred: "c71585",
        midnightblue: "191970",
        mintcream: "f5fffa",
        mistyrose: "ffe4e1",
        moccasin: "ffe4b5",
        navajowhite: "ffdead",
        navy: "000080",
        oldlace: "fdf5e6",
        olive: "808000",
        olivedrab: "6b8e23",
        orange: "ffa500",
        orangered: "ff4500",
        orchid: "da70d6",
        palegoldenrod: "eee8aa",
        palegreen: "98fb98",
        paleturquoise: "afeeee",
        palevioletred: "d87093",
        papayawhip: "ffefd5",
        peachpuff: "ffdab9",
        peru: "cd853f",
        pink: "ffc0cb",
        plum: "dda0dd",
        powderblue: "b0e0e6",
        purple: "800080",
        rebeccapurple: "663399",
        red: "ff0000",
        rosybrown: "bc8f8f",
        royalblue: "4169e1",
        saddlebrown: "8b4513",
        salmon: "fa8072",
        sandybrown: "f4a460",
        seagreen: "2e8b57",
        seashell: "fff5ee",
        sienna: "a0522d",
        silver: "c0c0c0",
        skyblue: "87ceeb",
        slateblue: "6a5acd",
        slategray: "708090",
        snow: "fffafa",
        springgreen: "00ff7f",
        steelblue: "4682b4",
        tan: "d2b48c",
        teal: "008080",
        thistle: "d8bfd8",
        tomato: "ff6347",
        turquoise: "40e0d0",
        violet: "ee82ee",
        violetred: "d02090",
        wheat: "f5deb3",
        white: "ffffff",
        whitesmoke: "f5f5f5",
        yellow: "ffff00",
        yellowgreen: "9acd32"
      };
      color_string = simple_colors[color_string] || color_string;
      var color_defs = [
        {
          re: /^rgba\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3}),\s*((?:\d?\.)?\d)\)$/,
          example: ["rgba(123, 234, 45, 0.8)", "rgba(255,234,245,1.0)"],
          process: /* @__PURE__ */ __name2(function(bits3) {
            return [
              parseInt(bits3[1]),
              parseInt(bits3[2]),
              parseInt(bits3[3]),
              parseFloat(bits3[4])
            ];
          }, "process")
        },
        {
          re: /^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,
          example: ["rgb(123, 234, 45)", "rgb(255,234,245)"],
          process: /* @__PURE__ */ __name2(function(bits3) {
            return [
              parseInt(bits3[1]),
              parseInt(bits3[2]),
              parseInt(bits3[3])
            ];
          }, "process")
        },
        {
          re: /^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,
          example: ["#00ff00", "336699"],
          process: /* @__PURE__ */ __name2(function(bits3) {
            return [
              parseInt(bits3[1], 16),
              parseInt(bits3[2], 16),
              parseInt(bits3[3], 16)
            ];
          }, "process")
        },
        {
          re: /^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,
          example: ["#fb0", "f0f"],
          process: /* @__PURE__ */ __name2(function(bits3) {
            return [
              parseInt(bits3[1] + bits3[1], 16),
              parseInt(bits3[2] + bits3[2], 16),
              parseInt(bits3[3] + bits3[3], 16)
            ];
          }, "process")
        }
      ];
      for (var i33 = 0; i33 < color_defs.length; i33++) {
        var re2 = color_defs[i33].re;
        var processor = color_defs[i33].process;
        var bits2 = re2.exec(color_string);
        if (bits2) {
          var channels = processor(bits2);
          this.r = channels[0];
          this.g = channels[1];
          this.b = channels[2];
          if (channels.length > 3) {
            this.alpha = channels[3];
          }
          this.ok = true;
        }
      }
      this.r = this.r < 0 || isNaN(this.r) ? 0 : this.r > 255 ? 255 : this.r;
      this.g = this.g < 0 || isNaN(this.g) ? 0 : this.g > 255 ? 255 : this.g;
      this.b = this.b < 0 || isNaN(this.b) ? 0 : this.b > 255 ? 255 : this.b;
      this.alpha = this.alpha < 0 ? 0 : this.alpha > 1 || isNaN(this.alpha) ? 1 : this.alpha;
      this.toRGB = function() {
        return "rgb(" + this.r + ", " + this.g + ", " + this.b + ")";
      };
      this.toRGBA = function() {
        return "rgba(" + this.r + ", " + this.g + ", " + this.b + ", " + this.alpha + ")";
      };
      this.toHex = function() {
        var r2 = this.r.toString(16);
        var g2 = this.g.toString(16);
        var b2 = this.b.toString(16);
        if (r2.length == 1) r2 = "0" + r2;
        if (g2.length == 1) g2 = "0" + g2;
        if (b2.length == 1) b2 = "0" + b2;
        return "#" + r2 + g2 + b2;
      };
      this.getHelpXML = function() {
        var examples = new Array();
        for (var i4 = 0; i4 < color_defs.length; i4++) {
          var example = color_defs[i4].example;
          for (var j2 = 0; j2 < example.length; j2++) {
            examples[examples.length] = example[j2];
          }
        }
        for (var sc in simple_colors) {
          examples[examples.length] = sc;
        }
        var xml2 = document.createElement("ul");
        xml2.setAttribute("id", "rgbcolor-examples");
        for (var i4 = 0; i4 < examples.length; i4++) {
          try {
            var list_item = document.createElement("li");
            var list_color = new RGBColor(examples[i4]);
            var example_div = document.createElement("div");
            example_div.style.cssText = "margin: 3px; border: 1px solid black; background:" + list_color.toHex() + "; color:" + list_color.toHex();
            example_div.appendChild(document.createTextNode("test"));
            var list_item_value = document.createTextNode(
              " " + examples[i4] + " -> " + list_color.toRGB() + " -> " + list_color.toHex()
            );
            list_item.appendChild(example_div);
            list_item.appendChild(list_item_value);
            xml2.appendChild(list_item);
          } catch (e2) {
          }
        }
        return xml2;
      };
    };
  }
});
var require_es_array_index_of = __commonJS({
  "../node_modules/core-js/modules/es.array.index-of.js"() {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var $2 = require_export();
    var uncurryThis = require_function_uncurry_this_clause();
    var $indexOf = require_array_includes().indexOf;
    var arrayMethodIsStrict = require_array_method_is_strict();
    var nativeIndexOf = uncurryThis([].indexOf);
    var NEGATIVE_ZERO = !!nativeIndexOf && 1 / nativeIndexOf([1], 1, -0) < 0;
    var FORCED = NEGATIVE_ZERO || !arrayMethodIsStrict("indexOf");
    $2({ target: "Array", proto: true, forced: FORCED }, {
      indexOf: /* @__PURE__ */ __name2(/* @__PURE__ */ __name(function indexOf(searchElement) {
        var fromIndex = arguments.length > 1 ? arguments[1] : void 0;
        return NEGATIVE_ZERO ? nativeIndexOf(this, searchElement, fromIndex) || 0 : $indexOf(this, searchElement, fromIndex);
      }, "indexOf"), "indexOf")
    });
  }
});
var require_es_string_includes = __commonJS({
  "../node_modules/core-js/modules/es.string.includes.js"() {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var $2 = require_export();
    var uncurryThis = require_function_uncurry_this();
    var notARegExp = require_not_a_regexp();
    var requireObjectCoercible = require_require_object_coercible();
    var toString = require_to_string();
    var correctIsRegExpLogic = require_correct_is_regexp_logic();
    var stringIndexOf2 = uncurryThis("".indexOf);
    $2({ target: "String", proto: true, forced: !correctIsRegExpLogic("includes") }, {
      includes: /* @__PURE__ */ __name2(/* @__PURE__ */ __name(function includes(searchString) {
        return !!~stringIndexOf2(
          toString(requireObjectCoercible(this)),
          toString(notARegExp(searchString)),
          arguments.length > 1 ? arguments[1] : void 0
        );
      }, "includes"), "includes")
    });
  }
});
var require_is_array = __commonJS({
  "../node_modules/core-js/internals/is-array.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var classof = require_classof_raw();
    module.exports = Array.isArray || /* @__PURE__ */ __name2(/* @__PURE__ */ __name(function isArray(argument) {
      return classof(argument) === "Array";
    }, "isArray"), "isArray");
  }
});
var require_es_array_reverse = __commonJS({
  "../node_modules/core-js/modules/es.array.reverse.js"() {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var $2 = require_export();
    var uncurryThis = require_function_uncurry_this();
    var isArray = require_is_array();
    var nativeReverse = uncurryThis([].reverse);
    var test = [1, 2];
    $2({ target: "Array", proto: true, forced: String(test) === String(test.reverse()) }, {
      reverse: /* @__PURE__ */ __name2(/* @__PURE__ */ __name(function reverse() {
        if (isArray(this)) this.length = this.length;
        return nativeReverse(this);
      }, "reverse"), "reverse")
    });
  }
});
function r(r2, e2) {
  if ("function" != typeof e2 && null !== e2) throw new TypeError("Class extends value " + String(e2) + " is not a constructor or null");
  function i33() {
    this.constructor = r2;
  }
  __name(i33, "i3");
  __name2(i33, "i");
  t(r2, e2), r2.prototype = null === e2 ? Object.create(e2) : (i33.prototype = e2.prototype, new i33());
}
__name(r, "r");
function e(t3) {
  var r2 = "";
  Array.isArray(t3) || (t3 = [t3]);
  for (var e2 = 0; e2 < t3.length; e2++) {
    var i33 = t3[e2];
    if (i33.type === _.CLOSE_PATH) r2 += "z";
    else if (i33.type === _.HORIZ_LINE_TO) r2 += (i33.relative ? "h" : "H") + i33.x;
    else if (i33.type === _.VERT_LINE_TO) r2 += (i33.relative ? "v" : "V") + i33.y;
    else if (i33.type === _.MOVE_TO) r2 += (i33.relative ? "m" : "M") + i33.x + " " + i33.y;
    else if (i33.type === _.LINE_TO) r2 += (i33.relative ? "l" : "L") + i33.x + " " + i33.y;
    else if (i33.type === _.CURVE_TO) r2 += (i33.relative ? "c" : "C") + i33.x1 + " " + i33.y1 + " " + i33.x2 + " " + i33.y2 + " " + i33.x + " " + i33.y;
    else if (i33.type === _.SMOOTH_CURVE_TO) r2 += (i33.relative ? "s" : "S") + i33.x2 + " " + i33.y2 + " " + i33.x + " " + i33.y;
    else if (i33.type === _.QUAD_TO) r2 += (i33.relative ? "q" : "Q") + i33.x1 + " " + i33.y1 + " " + i33.x + " " + i33.y;
    else if (i33.type === _.SMOOTH_QUAD_TO) r2 += (i33.relative ? "t" : "T") + i33.x + " " + i33.y;
    else {
      if (i33.type !== _.ARC) throw new Error('Unexpected command type "' + i33.type + '" at index ' + e2 + ".");
      r2 += (i33.relative ? "a" : "A") + i33.rX + " " + i33.rY + " " + i33.xRot + " " + +i33.lArcFlag + " " + +i33.sweepFlag + " " + i33.x + " " + i33.y;
    }
  }
  return r2;
}
__name(e, "e");
function i(t3, r2) {
  var e2 = t3[0], i33 = t3[1];
  return [e2 * Math.cos(r2) - i33 * Math.sin(r2), e2 * Math.sin(r2) + i33 * Math.cos(r2)];
}
__name(i, "i");
function a() {
  for (var t3 = [], r2 = 0; r2 < arguments.length; r2++) t3[r2] = arguments[r2];
  for (var e2 = 0; e2 < t3.length; e2++) if ("number" != typeof t3[e2]) throw new Error("assertNumbers arguments[" + e2 + "] is not a number. " + typeof t3[e2] + " == typeof " + t3[e2]);
  return true;
}
__name(a, "a");
function o(t3, r2, e2) {
  t3.lArcFlag = 0 === t3.lArcFlag ? 0 : 1, t3.sweepFlag = 0 === t3.sweepFlag ? 0 : 1;
  var a3 = t3.rX, o3 = t3.rY, s3 = t3.x, u3 = t3.y;
  a3 = Math.abs(t3.rX), o3 = Math.abs(t3.rY);
  var h3 = i([(r2 - s3) / 2, (e2 - u3) / 2], -t3.xRot / 180 * n), c4 = h3[0], y3 = h3[1], p3 = Math.pow(c4, 2) / Math.pow(a3, 2) + Math.pow(y3, 2) / Math.pow(o3, 2);
  1 < p3 && (a3 *= Math.sqrt(p3), o3 *= Math.sqrt(p3)), t3.rX = a3, t3.rY = o3;
  var m4 = Math.pow(a3, 2) * Math.pow(y3, 2) + Math.pow(o3, 2) * Math.pow(c4, 2), O3 = (t3.lArcFlag !== t3.sweepFlag ? 1 : -1) * Math.sqrt(Math.max(0, (Math.pow(a3, 2) * Math.pow(o3, 2) - m4) / m4)), l3 = a3 * y3 / o3 * O3, T3 = -o3 * c4 / a3 * O3, v3 = i([l3, T3], t3.xRot / 180 * n);
  t3.cX = v3[0] + (r2 + s3) / 2, t3.cY = v3[1] + (e2 + u3) / 2, t3.phi1 = Math.atan2((y3 - T3) / o3, (c4 - l3) / a3), t3.phi2 = Math.atan2((-y3 - T3) / o3, (-c4 - l3) / a3), 0 === t3.sweepFlag && t3.phi2 > t3.phi1 && (t3.phi2 -= 2 * n), 1 === t3.sweepFlag && t3.phi2 < t3.phi1 && (t3.phi2 += 2 * n), t3.phi1 *= 180 / n, t3.phi2 *= 180 / n;
}
__name(o, "o");
function s(t3, r2, e2) {
  a(t3, r2, e2);
  var i33 = t3 * t3 + r2 * r2 - e2 * e2;
  if (0 > i33) return [];
  if (0 === i33) return [[t3 * e2 / (t3 * t3 + r2 * r2), r2 * e2 / (t3 * t3 + r2 * r2)]];
  var n3 = Math.sqrt(i33);
  return [[(t3 * e2 + r2 * n3) / (t3 * t3 + r2 * r2), (r2 * e2 - t3 * n3) / (t3 * t3 + r2 * r2)], [(t3 * e2 - r2 * n3) / (t3 * t3 + r2 * r2), (r2 * e2 + t3 * n3) / (t3 * t3 + r2 * r2)]];
}
__name(s, "s");
function c(t3, r2, e2) {
  return (1 - e2) * t3 + e2 * r2;
}
__name(c, "c");
function y(t3, r2, e2, i33) {
  return t3 + Math.cos(i33 / 180 * n) * r2 + Math.sin(i33 / 180 * n) * e2;
}
__name(y, "y");
function p(t3, r2, e2, i33) {
  var a3 = 1e-6, n3 = r2 - t3, o3 = e2 - r2, s3 = 3 * n3 + 3 * (i33 - e2) - 6 * o3, u3 = 6 * (o3 - n3), h3 = 3 * n3;
  return Math.abs(s3) < a3 ? [-h3 / u3] : function(t4, r3, e3) {
    void 0 === e3 && (e3 = 1e-6);
    var i4 = t4 * t4 / 4 - r3;
    if (i4 < -e3) return [];
    if (i4 <= e3) return [-t4 / 2];
    var a4 = Math.sqrt(i4);
    return [-t4 / 2 - a4, -t4 / 2 + a4];
  }(u3 / s3, h3 / s3, a3);
}
__name(p, "p");
function m(t3, r2, e2, i33, a3) {
  var n3 = 1 - a3;
  return t3 * (n3 * n3 * n3) + r2 * (3 * n3 * n3 * a3) + e2 * (3 * n3 * a3 * a3) + i33 * (a3 * a3 * a3);
}
__name(m, "m");
var t;
var n;
var u;
var h;
var O;
var l;
var T;
var v;
var f;
var _;
var N;
var init_SVGPathData_module = __esm({
  "../node_modules/svg-pathdata/lib/SVGPathData.module.js"() {
    init_functionsRoutes_0_8044054200943971();
    t = /* @__PURE__ */ __name2(function(r2, e2) {
      return (t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t3, r3) {
        t3.__proto__ = r3;
      } || function(t3, r3) {
        for (var e3 in r3) Object.prototype.hasOwnProperty.call(r3, e3) && (t3[e3] = r3[e3]);
      })(r2, e2);
    }, "t");
    __name2(r, "r");
    __name2(e, "e");
    __name2(i, "i");
    __name2(a, "a");
    n = Math.PI;
    __name2(o, "o");
    __name2(s, "s");
    h = Math.PI / 180;
    __name2(c, "c");
    __name2(y, "y");
    __name2(p, "p");
    __name2(m, "m");
    !function(t3) {
      function r2() {
        return u3(function(t4, r3, e3) {
          return t4.relative && (void 0 !== t4.x1 && (t4.x1 += r3), void 0 !== t4.y1 && (t4.y1 += e3), void 0 !== t4.x2 && (t4.x2 += r3), void 0 !== t4.y2 && (t4.y2 += e3), void 0 !== t4.x && (t4.x += r3), void 0 !== t4.y && (t4.y += e3), t4.relative = false), t4;
        });
      }
      __name(r2, "r2");
      __name2(r2, "r");
      function e2() {
        var t4 = NaN, r3 = NaN, e3 = NaN, i33 = NaN;
        return u3(function(a3, n4, o3) {
          return a3.type & _.SMOOTH_CURVE_TO && (a3.type = _.CURVE_TO, t4 = isNaN(t4) ? n4 : t4, r3 = isNaN(r3) ? o3 : r3, a3.x1 = a3.relative ? n4 - t4 : 2 * n4 - t4, a3.y1 = a3.relative ? o3 - r3 : 2 * o3 - r3), a3.type & _.CURVE_TO ? (t4 = a3.relative ? n4 + a3.x2 : a3.x2, r3 = a3.relative ? o3 + a3.y2 : a3.y2) : (t4 = NaN, r3 = NaN), a3.type & _.SMOOTH_QUAD_TO && (a3.type = _.QUAD_TO, e3 = isNaN(e3) ? n4 : e3, i33 = isNaN(i33) ? o3 : i33, a3.x1 = a3.relative ? n4 - e3 : 2 * n4 - e3, a3.y1 = a3.relative ? o3 - i33 : 2 * o3 - i33), a3.type & _.QUAD_TO ? (e3 = a3.relative ? n4 + a3.x1 : a3.x1, i33 = a3.relative ? o3 + a3.y1 : a3.y1) : (e3 = NaN, i33 = NaN), a3;
        });
      }
      __name(e2, "e2");
      __name2(e2, "e");
      function n3() {
        var t4 = NaN, r3 = NaN;
        return u3(function(e3, i33, a3) {
          if (e3.type & _.SMOOTH_QUAD_TO && (e3.type = _.QUAD_TO, t4 = isNaN(t4) ? i33 : t4, r3 = isNaN(r3) ? a3 : r3, e3.x1 = e3.relative ? i33 - t4 : 2 * i33 - t4, e3.y1 = e3.relative ? a3 - r3 : 2 * a3 - r3), e3.type & _.QUAD_TO) {
            t4 = e3.relative ? i33 + e3.x1 : e3.x1, r3 = e3.relative ? a3 + e3.y1 : e3.y1;
            var n4 = e3.x1, o3 = e3.y1;
            e3.type = _.CURVE_TO, e3.x1 = ((e3.relative ? 0 : i33) + 2 * n4) / 3, e3.y1 = ((e3.relative ? 0 : a3) + 2 * o3) / 3, e3.x2 = (e3.x + 2 * n4) / 3, e3.y2 = (e3.y + 2 * o3) / 3;
          } else t4 = NaN, r3 = NaN;
          return e3;
        });
      }
      __name(n3, "n3");
      __name2(n3, "n");
      function u3(t4) {
        var r3 = 0, e3 = 0, i33 = NaN, a3 = NaN;
        return function(n4) {
          if (isNaN(i33) && !(n4.type & _.MOVE_TO)) throw new Error("path must start with moveto");
          var o3 = t4(n4, r3, e3, i33, a3);
          return n4.type & _.CLOSE_PATH && (r3 = i33, e3 = a3), void 0 !== n4.x && (r3 = n4.relative ? r3 + n4.x : n4.x), void 0 !== n4.y && (e3 = n4.relative ? e3 + n4.y : n4.y), n4.type & _.MOVE_TO && (i33 = r3, a3 = e3), o3;
        };
      }
      __name(u3, "u3");
      __name2(u3, "u");
      function O3(t4, r3, e3, i33, n4, o3) {
        return a(t4, r3, e3, i33, n4, o3), u3(function(a3, s3, u4, h3) {
          var c4 = a3.x1, y3 = a3.x2, p3 = a3.relative && !isNaN(h3), m4 = void 0 !== a3.x ? a3.x : p3 ? 0 : s3, O4 = void 0 !== a3.y ? a3.y : p3 ? 0 : u4;
          function l4(t5) {
            return t5 * t5;
          }
          __name(l4, "l4");
          __name2(l4, "l");
          a3.type & _.HORIZ_LINE_TO && 0 !== r3 && (a3.type = _.LINE_TO, a3.y = a3.relative ? 0 : u4), a3.type & _.VERT_LINE_TO && 0 !== e3 && (a3.type = _.LINE_TO, a3.x = a3.relative ? 0 : s3), void 0 !== a3.x && (a3.x = a3.x * t4 + O4 * e3 + (p3 ? 0 : n4)), void 0 !== a3.y && (a3.y = m4 * r3 + a3.y * i33 + (p3 ? 0 : o3)), void 0 !== a3.x1 && (a3.x1 = a3.x1 * t4 + a3.y1 * e3 + (p3 ? 0 : n4)), void 0 !== a3.y1 && (a3.y1 = c4 * r3 + a3.y1 * i33 + (p3 ? 0 : o3)), void 0 !== a3.x2 && (a3.x2 = a3.x2 * t4 + a3.y2 * e3 + (p3 ? 0 : n4)), void 0 !== a3.y2 && (a3.y2 = y3 * r3 + a3.y2 * i33 + (p3 ? 0 : o3));
          var T3 = t4 * i33 - r3 * e3;
          if (void 0 !== a3.xRot && (1 !== t4 || 0 !== r3 || 0 !== e3 || 1 !== i33)) if (0 === T3) delete a3.rX, delete a3.rY, delete a3.xRot, delete a3.lArcFlag, delete a3.sweepFlag, a3.type = _.LINE_TO;
          else {
            var v3 = a3.xRot * Math.PI / 180, f3 = Math.sin(v3), N3 = Math.cos(v3), x22 = 1 / l4(a3.rX), d2 = 1 / l4(a3.rY), E2 = l4(N3) * x22 + l4(f3) * d2, A2 = 2 * f3 * N3 * (x22 - d2), C2 = l4(f3) * x22 + l4(N3) * d2, M2 = E2 * i33 * i33 - A2 * r3 * i33 + C2 * r3 * r3, R2 = A2 * (t4 * i33 + r3 * e3) - 2 * (E2 * e3 * i33 + C2 * t4 * r3), g2 = E2 * e3 * e3 - A2 * t4 * e3 + C2 * t4 * t4, I2 = (Math.atan2(R2, M2 - g2) + Math.PI) % Math.PI / 2, S2 = Math.sin(I2), L2 = Math.cos(I2);
            a3.rX = Math.abs(T3) / Math.sqrt(M2 * l4(L2) + R2 * S2 * L2 + g2 * l4(S2)), a3.rY = Math.abs(T3) / Math.sqrt(M2 * l4(S2) - R2 * S2 * L2 + g2 * l4(L2)), a3.xRot = 180 * I2 / Math.PI;
          }
          return void 0 !== a3.sweepFlag && 0 > T3 && (a3.sweepFlag = +!a3.sweepFlag), a3;
        });
      }
      __name(O3, "O3");
      __name2(O3, "O");
      function l3() {
        return function(t4) {
          var r3 = {};
          for (var e3 in t4) r3[e3] = t4[e3];
          return r3;
        };
      }
      __name(l3, "l3");
      __name2(l3, "l");
      t3.ROUND = function(t4) {
        function r3(r4) {
          return Math.round(r4 * t4) / t4;
        }
        __name(r3, "r3");
        __name2(r3, "r");
        return void 0 === t4 && (t4 = 1e13), a(t4), function(t5) {
          return void 0 !== t5.x1 && (t5.x1 = r3(t5.x1)), void 0 !== t5.y1 && (t5.y1 = r3(t5.y1)), void 0 !== t5.x2 && (t5.x2 = r3(t5.x2)), void 0 !== t5.y2 && (t5.y2 = r3(t5.y2)), void 0 !== t5.x && (t5.x = r3(t5.x)), void 0 !== t5.y && (t5.y = r3(t5.y)), void 0 !== t5.rX && (t5.rX = r3(t5.rX)), void 0 !== t5.rY && (t5.rY = r3(t5.rY)), t5;
        };
      }, t3.TO_ABS = r2, t3.TO_REL = function() {
        return u3(function(t4, r3, e3) {
          return t4.relative || (void 0 !== t4.x1 && (t4.x1 -= r3), void 0 !== t4.y1 && (t4.y1 -= e3), void 0 !== t4.x2 && (t4.x2 -= r3), void 0 !== t4.y2 && (t4.y2 -= e3), void 0 !== t4.x && (t4.x -= r3), void 0 !== t4.y && (t4.y -= e3), t4.relative = true), t4;
        });
      }, t3.NORMALIZE_HVZ = function(t4, r3, e3) {
        return void 0 === t4 && (t4 = true), void 0 === r3 && (r3 = true), void 0 === e3 && (e3 = true), u3(function(i33, a3, n4, o3, s3) {
          if (isNaN(o3) && !(i33.type & _.MOVE_TO)) throw new Error("path must start with moveto");
          return r3 && i33.type & _.HORIZ_LINE_TO && (i33.type = _.LINE_TO, i33.y = i33.relative ? 0 : n4), e3 && i33.type & _.VERT_LINE_TO && (i33.type = _.LINE_TO, i33.x = i33.relative ? 0 : a3), t4 && i33.type & _.CLOSE_PATH && (i33.type = _.LINE_TO, i33.x = i33.relative ? o3 - a3 : o3, i33.y = i33.relative ? s3 - n4 : s3), i33.type & _.ARC && (0 === i33.rX || 0 === i33.rY) && (i33.type = _.LINE_TO, delete i33.rX, delete i33.rY, delete i33.xRot, delete i33.lArcFlag, delete i33.sweepFlag), i33;
        });
      }, t3.NORMALIZE_ST = e2, t3.QT_TO_C = n3, t3.INFO = u3, t3.SANITIZE = function(t4) {
        void 0 === t4 && (t4 = 0), a(t4);
        var r3 = NaN, e3 = NaN, i33 = NaN, n4 = NaN;
        return u3(function(a3, o3, s3, u4, h3) {
          var c4 = Math.abs, y3 = false, p3 = 0, m4 = 0;
          if (a3.type & _.SMOOTH_CURVE_TO && (p3 = isNaN(r3) ? 0 : o3 - r3, m4 = isNaN(e3) ? 0 : s3 - e3), a3.type & (_.CURVE_TO | _.SMOOTH_CURVE_TO) ? (r3 = a3.relative ? o3 + a3.x2 : a3.x2, e3 = a3.relative ? s3 + a3.y2 : a3.y2) : (r3 = NaN, e3 = NaN), a3.type & _.SMOOTH_QUAD_TO ? (i33 = isNaN(i33) ? o3 : 2 * o3 - i33, n4 = isNaN(n4) ? s3 : 2 * s3 - n4) : a3.type & _.QUAD_TO ? (i33 = a3.relative ? o3 + a3.x1 : a3.x1, n4 = a3.relative ? s3 + a3.y1 : a3.y2) : (i33 = NaN, n4 = NaN), a3.type & _.LINE_COMMANDS || a3.type & _.ARC && (0 === a3.rX || 0 === a3.rY || !a3.lArcFlag) || a3.type & _.CURVE_TO || a3.type & _.SMOOTH_CURVE_TO || a3.type & _.QUAD_TO || a3.type & _.SMOOTH_QUAD_TO) {
            var O4 = void 0 === a3.x ? 0 : a3.relative ? a3.x : a3.x - o3, l4 = void 0 === a3.y ? 0 : a3.relative ? a3.y : a3.y - s3;
            p3 = isNaN(i33) ? void 0 === a3.x1 ? p3 : a3.relative ? a3.x : a3.x1 - o3 : i33 - o3, m4 = isNaN(n4) ? void 0 === a3.y1 ? m4 : a3.relative ? a3.y : a3.y1 - s3 : n4 - s3;
            var T3 = void 0 === a3.x2 ? 0 : a3.relative ? a3.x : a3.x2 - o3, v3 = void 0 === a3.y2 ? 0 : a3.relative ? a3.y : a3.y2 - s3;
            c4(O4) <= t4 && c4(l4) <= t4 && c4(p3) <= t4 && c4(m4) <= t4 && c4(T3) <= t4 && c4(v3) <= t4 && (y3 = true);
          }
          return a3.type & _.CLOSE_PATH && c4(o3 - u4) <= t4 && c4(s3 - h3) <= t4 && (y3 = true), y3 ? [] : a3;
        });
      }, t3.MATRIX = O3, t3.ROTATE = function(t4, r3, e3) {
        void 0 === r3 && (r3 = 0), void 0 === e3 && (e3 = 0), a(t4, r3, e3);
        var i33 = Math.sin(t4), n4 = Math.cos(t4);
        return O3(n4, i33, -i33, n4, r3 - r3 * n4 + e3 * i33, e3 - r3 * i33 - e3 * n4);
      }, t3.TRANSLATE = function(t4, r3) {
        return void 0 === r3 && (r3 = 0), a(t4, r3), O3(1, 0, 0, 1, t4, r3);
      }, t3.SCALE = function(t4, r3) {
        return void 0 === r3 && (r3 = t4), a(t4, r3), O3(t4, 0, 0, r3, 0, 0);
      }, t3.SKEW_X = function(t4) {
        return a(t4), O3(1, 0, Math.atan(t4), 1, 0, 0);
      }, t3.SKEW_Y = function(t4) {
        return a(t4), O3(1, Math.atan(t4), 0, 1, 0, 0);
      }, t3.X_AXIS_SYMMETRY = function(t4) {
        return void 0 === t4 && (t4 = 0), a(t4), O3(-1, 0, 0, 1, t4, 0);
      }, t3.Y_AXIS_SYMMETRY = function(t4) {
        return void 0 === t4 && (t4 = 0), a(t4), O3(1, 0, 0, -1, 0, t4);
      }, t3.A_TO_C = function() {
        return u3(function(t4, r3, e3) {
          return _.ARC === t4.type ? function(t5, r4, e4) {
            var a3, n4, s3, u4;
            t5.cX || o(t5, r4, e4);
            for (var y3 = Math.min(t5.phi1, t5.phi2), p3 = Math.max(t5.phi1, t5.phi2) - y3, m4 = Math.ceil(p3 / 90), O4 = new Array(m4), l4 = r4, T3 = e4, v3 = 0; v3 < m4; v3++) {
              var f3 = c(t5.phi1, t5.phi2, v3 / m4), N3 = c(t5.phi1, t5.phi2, (v3 + 1) / m4), x22 = N3 - f3, d2 = 4 / 3 * Math.tan(x22 * h / 4), E2 = [Math.cos(f3 * h) - d2 * Math.sin(f3 * h), Math.sin(f3 * h) + d2 * Math.cos(f3 * h)], A2 = E2[0], C2 = E2[1], M2 = [Math.cos(N3 * h), Math.sin(N3 * h)], R2 = M2[0], g2 = M2[1], I2 = [R2 + d2 * Math.sin(N3 * h), g2 - d2 * Math.cos(N3 * h)], S2 = I2[0], L2 = I2[1];
              O4[v3] = { relative: t5.relative, type: _.CURVE_TO };
              var H2 = /* @__PURE__ */ __name2(function(r5, e5) {
                var a4 = i([r5 * t5.rX, e5 * t5.rY], t5.xRot), n5 = a4[0], o3 = a4[1];
                return [t5.cX + n5, t5.cY + o3];
              }, "H");
              a3 = H2(A2, C2), O4[v3].x1 = a3[0], O4[v3].y1 = a3[1], n4 = H2(S2, L2), O4[v3].x2 = n4[0], O4[v3].y2 = n4[1], s3 = H2(R2, g2), O4[v3].x = s3[0], O4[v3].y = s3[1], t5.relative && (O4[v3].x1 -= l4, O4[v3].y1 -= T3, O4[v3].x2 -= l4, O4[v3].y2 -= T3, O4[v3].x -= l4, O4[v3].y -= T3), l4 = (u4 = [O4[v3].x, O4[v3].y])[0], T3 = u4[1];
            }
            return O4;
          }(t4, t4.relative ? 0 : r3, t4.relative ? 0 : e3) : t4;
        });
      }, t3.ANNOTATE_ARCS = function() {
        return u3(function(t4, r3, e3) {
          return t4.relative && (r3 = 0, e3 = 0), _.ARC === t4.type && o(t4, r3, e3), t4;
        });
      }, t3.CLONE = l3, t3.CALCULATE_BOUNDS = function() {
        var t4 = /* @__PURE__ */ __name2(function(t5) {
          var r3 = {};
          for (var e3 in t5) r3[e3] = t5[e3];
          return r3;
        }, "t"), i33 = r2(), a3 = n3(), h3 = e2(), c4 = u3(function(r3, e3, n4) {
          var u4 = h3(a3(i33(t4(r3))));
          function O4(t5) {
            t5 > c4.maxX && (c4.maxX = t5), t5 < c4.minX && (c4.minX = t5);
          }
          __name(O4, "O4");
          __name2(O4, "O");
          function l4(t5) {
            t5 > c4.maxY && (c4.maxY = t5), t5 < c4.minY && (c4.minY = t5);
          }
          __name(l4, "l4");
          __name2(l4, "l");
          if (u4.type & _.DRAWING_COMMANDS && (O4(e3), l4(n4)), u4.type & _.HORIZ_LINE_TO && O4(u4.x), u4.type & _.VERT_LINE_TO && l4(u4.y), u4.type & _.LINE_TO && (O4(u4.x), l4(u4.y)), u4.type & _.CURVE_TO) {
            O4(u4.x), l4(u4.y);
            for (var T3 = 0, v3 = p(e3, u4.x1, u4.x2, u4.x); T3 < v3.length; T3++) {
              0 < (w2 = v3[T3]) && 1 > w2 && O4(m(e3, u4.x1, u4.x2, u4.x, w2));
            }
            for (var f3 = 0, N3 = p(n4, u4.y1, u4.y2, u4.y); f3 < N3.length; f3++) {
              0 < (w2 = N3[f3]) && 1 > w2 && l4(m(n4, u4.y1, u4.y2, u4.y, w2));
            }
          }
          if (u4.type & _.ARC) {
            O4(u4.x), l4(u4.y), o(u4, e3, n4);
            for (var x22 = u4.xRot / 180 * Math.PI, d2 = Math.cos(x22) * u4.rX, E2 = Math.sin(x22) * u4.rX, A2 = -Math.sin(x22) * u4.rY, C2 = Math.cos(x22) * u4.rY, M2 = u4.phi1 < u4.phi2 ? [u4.phi1, u4.phi2] : -180 > u4.phi2 ? [u4.phi2 + 360, u4.phi1 + 360] : [u4.phi2, u4.phi1], R2 = M2[0], g2 = M2[1], I2 = function(t5) {
              var r4 = t5[0], e4 = t5[1], i4 = 180 * Math.atan2(e4, r4) / Math.PI;
              return i4 < R2 ? i4 + 360 : i4;
            }, S2 = 0, L2 = s(A2, -d2, 0).map(I2); S2 < L2.length; S2++) {
              (w2 = L2[S2]) > R2 && w2 < g2 && O4(y(u4.cX, d2, A2, w2));
            }
            for (var H2 = 0, U2 = s(C2, -E2, 0).map(I2); H2 < U2.length; H2++) {
              var w2;
              (w2 = U2[H2]) > R2 && w2 < g2 && l4(y(u4.cY, E2, C2, w2));
            }
          }
          return r3;
        });
        return c4.minX = 1 / 0, c4.maxX = -1 / 0, c4.minY = 1 / 0, c4.maxY = -1 / 0, c4;
      };
    }(u || (u = {}));
    l = function() {
      function t3() {
      }
      __name(t3, "t3");
      __name2(t3, "t");
      return t3.prototype.round = function(t4) {
        return this.transform(u.ROUND(t4));
      }, t3.prototype.toAbs = function() {
        return this.transform(u.TO_ABS());
      }, t3.prototype.toRel = function() {
        return this.transform(u.TO_REL());
      }, t3.prototype.normalizeHVZ = function(t4, r2, e2) {
        return this.transform(u.NORMALIZE_HVZ(t4, r2, e2));
      }, t3.prototype.normalizeST = function() {
        return this.transform(u.NORMALIZE_ST());
      }, t3.prototype.qtToC = function() {
        return this.transform(u.QT_TO_C());
      }, t3.prototype.aToC = function() {
        return this.transform(u.A_TO_C());
      }, t3.prototype.sanitize = function(t4) {
        return this.transform(u.SANITIZE(t4));
      }, t3.prototype.translate = function(t4, r2) {
        return this.transform(u.TRANSLATE(t4, r2));
      }, t3.prototype.scale = function(t4, r2) {
        return this.transform(u.SCALE(t4, r2));
      }, t3.prototype.rotate = function(t4, r2, e2) {
        return this.transform(u.ROTATE(t4, r2, e2));
      }, t3.prototype.matrix = function(t4, r2, e2, i33, a3, n3) {
        return this.transform(u.MATRIX(t4, r2, e2, i33, a3, n3));
      }, t3.prototype.skewX = function(t4) {
        return this.transform(u.SKEW_X(t4));
      }, t3.prototype.skewY = function(t4) {
        return this.transform(u.SKEW_Y(t4));
      }, t3.prototype.xSymmetry = function(t4) {
        return this.transform(u.X_AXIS_SYMMETRY(t4));
      }, t3.prototype.ySymmetry = function(t4) {
        return this.transform(u.Y_AXIS_SYMMETRY(t4));
      }, t3.prototype.annotateArcs = function() {
        return this.transform(u.ANNOTATE_ARCS());
      }, t3;
    }();
    T = /* @__PURE__ */ __name2(function(t3) {
      return " " === t3 || "	" === t3 || "\r" === t3 || "\n" === t3;
    }, "T");
    v = /* @__PURE__ */ __name2(function(t3) {
      return "0".charCodeAt(0) <= t3.charCodeAt(0) && t3.charCodeAt(0) <= "9".charCodeAt(0);
    }, "v");
    f = function(t3) {
      function e2() {
        var r2 = t3.call(this) || this;
        return r2.curNumber = "", r2.curCommandType = -1, r2.curCommandRelative = false, r2.canParseCommandOrComma = true, r2.curNumberHasExp = false, r2.curNumberHasExpDigits = false, r2.curNumberHasDecimal = false, r2.curArgs = [], r2;
      }
      __name(e2, "e2");
      __name2(e2, "e");
      return r(e2, t3), e2.prototype.finish = function(t4) {
        if (void 0 === t4 && (t4 = []), this.parse(" ", t4), 0 !== this.curArgs.length || !this.canParseCommandOrComma) throw new SyntaxError("Unterminated command at the path end.");
        return t4;
      }, e2.prototype.parse = function(t4, r2) {
        var e3 = this;
        void 0 === r2 && (r2 = []);
        for (var i33 = function(t5) {
          r2.push(t5), e3.curArgs.length = 0, e3.canParseCommandOrComma = true;
        }, a3 = 0; a3 < t4.length; a3++) {
          var n3 = t4[a3], o3 = !(this.curCommandType !== _.ARC || 3 !== this.curArgs.length && 4 !== this.curArgs.length || 1 !== this.curNumber.length || "0" !== this.curNumber && "1" !== this.curNumber), s3 = v(n3) && ("0" === this.curNumber && "0" === n3 || o3);
          if (!v(n3) || s3) if ("e" !== n3 && "E" !== n3) if ("-" !== n3 && "+" !== n3 || !this.curNumberHasExp || this.curNumberHasExpDigits) if ("." !== n3 || this.curNumberHasExp || this.curNumberHasDecimal || o3) {
            if (this.curNumber && -1 !== this.curCommandType) {
              var u3 = Number(this.curNumber);
              if (isNaN(u3)) throw new SyntaxError("Invalid number ending at " + a3);
              if (this.curCommandType === _.ARC) {
                if (0 === this.curArgs.length || 1 === this.curArgs.length) {
                  if (0 > u3) throw new SyntaxError('Expected positive number, got "' + u3 + '" at index "' + a3 + '"');
                } else if ((3 === this.curArgs.length || 4 === this.curArgs.length) && "0" !== this.curNumber && "1" !== this.curNumber) throw new SyntaxError('Expected a flag, got "' + this.curNumber + '" at index "' + a3 + '"');
              }
              this.curArgs.push(u3), this.curArgs.length === N[this.curCommandType] && (_.HORIZ_LINE_TO === this.curCommandType ? i33({ type: _.HORIZ_LINE_TO, relative: this.curCommandRelative, x: u3 }) : _.VERT_LINE_TO === this.curCommandType ? i33({ type: _.VERT_LINE_TO, relative: this.curCommandRelative, y: u3 }) : this.curCommandType === _.MOVE_TO || this.curCommandType === _.LINE_TO || this.curCommandType === _.SMOOTH_QUAD_TO ? (i33({ type: this.curCommandType, relative: this.curCommandRelative, x: this.curArgs[0], y: this.curArgs[1] }), _.MOVE_TO === this.curCommandType && (this.curCommandType = _.LINE_TO)) : this.curCommandType === _.CURVE_TO ? i33({ type: _.CURVE_TO, relative: this.curCommandRelative, x1: this.curArgs[0], y1: this.curArgs[1], x2: this.curArgs[2], y2: this.curArgs[3], x: this.curArgs[4], y: this.curArgs[5] }) : this.curCommandType === _.SMOOTH_CURVE_TO ? i33({ type: _.SMOOTH_CURVE_TO, relative: this.curCommandRelative, x2: this.curArgs[0], y2: this.curArgs[1], x: this.curArgs[2], y: this.curArgs[3] }) : this.curCommandType === _.QUAD_TO ? i33({ type: _.QUAD_TO, relative: this.curCommandRelative, x1: this.curArgs[0], y1: this.curArgs[1], x: this.curArgs[2], y: this.curArgs[3] }) : this.curCommandType === _.ARC && i33({ type: _.ARC, relative: this.curCommandRelative, rX: this.curArgs[0], rY: this.curArgs[1], xRot: this.curArgs[2], lArcFlag: this.curArgs[3], sweepFlag: this.curArgs[4], x: this.curArgs[5], y: this.curArgs[6] })), this.curNumber = "", this.curNumberHasExpDigits = false, this.curNumberHasExp = false, this.curNumberHasDecimal = false, this.canParseCommandOrComma = true;
            }
            if (!T(n3)) if ("," === n3 && this.canParseCommandOrComma) this.canParseCommandOrComma = false;
            else if ("+" !== n3 && "-" !== n3 && "." !== n3) if (s3) this.curNumber = n3, this.curNumberHasDecimal = false;
            else {
              if (0 !== this.curArgs.length) throw new SyntaxError("Unterminated command at index " + a3 + ".");
              if (!this.canParseCommandOrComma) throw new SyntaxError('Unexpected character "' + n3 + '" at index ' + a3 + ". Command cannot follow comma");
              if (this.canParseCommandOrComma = false, "z" !== n3 && "Z" !== n3) if ("h" === n3 || "H" === n3) this.curCommandType = _.HORIZ_LINE_TO, this.curCommandRelative = "h" === n3;
              else if ("v" === n3 || "V" === n3) this.curCommandType = _.VERT_LINE_TO, this.curCommandRelative = "v" === n3;
              else if ("m" === n3 || "M" === n3) this.curCommandType = _.MOVE_TO, this.curCommandRelative = "m" === n3;
              else if ("l" === n3 || "L" === n3) this.curCommandType = _.LINE_TO, this.curCommandRelative = "l" === n3;
              else if ("c" === n3 || "C" === n3) this.curCommandType = _.CURVE_TO, this.curCommandRelative = "c" === n3;
              else if ("s" === n3 || "S" === n3) this.curCommandType = _.SMOOTH_CURVE_TO, this.curCommandRelative = "s" === n3;
              else if ("q" === n3 || "Q" === n3) this.curCommandType = _.QUAD_TO, this.curCommandRelative = "q" === n3;
              else if ("t" === n3 || "T" === n3) this.curCommandType = _.SMOOTH_QUAD_TO, this.curCommandRelative = "t" === n3;
              else {
                if ("a" !== n3 && "A" !== n3) throw new SyntaxError('Unexpected character "' + n3 + '" at index ' + a3 + ".");
                this.curCommandType = _.ARC, this.curCommandRelative = "a" === n3;
              }
              else r2.push({ type: _.CLOSE_PATH }), this.canParseCommandOrComma = true, this.curCommandType = -1;
            }
            else this.curNumber = n3, this.curNumberHasDecimal = "." === n3;
          } else this.curNumber += n3, this.curNumberHasDecimal = true;
          else this.curNumber += n3;
          else this.curNumber += n3, this.curNumberHasExp = true;
          else this.curNumber += n3, this.curNumberHasExpDigits = this.curNumberHasExp;
        }
        return r2;
      }, e2.prototype.transform = function(t4) {
        return Object.create(this, { parse: { value: /* @__PURE__ */ __name2(function(r2, e3) {
          void 0 === e3 && (e3 = []);
          for (var i33 = 0, a3 = Object.getPrototypeOf(this).parse.call(this, r2); i33 < a3.length; i33++) {
            var n3 = a3[i33], o3 = t4(n3);
            Array.isArray(o3) ? e3.push.apply(e3, o3) : e3.push(o3);
          }
          return e3;
        }, "value") } });
      }, e2;
    }(l);
    _ = function(t3) {
      function i33(r2) {
        var e2 = t3.call(this) || this;
        return e2.commands = "string" == typeof r2 ? i33.parse(r2) : r2, e2;
      }
      __name(i33, "i3");
      __name2(i33, "i");
      return r(i33, t3), i33.prototype.encode = function() {
        return i33.encode(this.commands);
      }, i33.prototype.getBounds = function() {
        var t4 = u.CALCULATE_BOUNDS();
        return this.transform(t4), t4;
      }, i33.prototype.transform = function(t4) {
        for (var r2 = [], e2 = 0, i4 = this.commands; e2 < i4.length; e2++) {
          var a3 = t4(i4[e2]);
          Array.isArray(a3) ? r2.push.apply(r2, a3) : r2.push(a3);
        }
        return this.commands = r2, this;
      }, i33.encode = function(t4) {
        return e(t4);
      }, i33.parse = function(t4) {
        var r2 = new f(), e2 = [];
        return r2.parse(t4, e2), r2.finish(e2), e2;
      }, i33.CLOSE_PATH = 1, i33.MOVE_TO = 2, i33.HORIZ_LINE_TO = 4, i33.VERT_LINE_TO = 8, i33.LINE_TO = 16, i33.CURVE_TO = 32, i33.SMOOTH_CURVE_TO = 64, i33.QUAD_TO = 128, i33.SMOOTH_QUAD_TO = 256, i33.ARC = 512, i33.LINE_COMMANDS = i33.LINE_TO | i33.HORIZ_LINE_TO | i33.VERT_LINE_TO, i33.DRAWING_COMMANDS = i33.HORIZ_LINE_TO | i33.VERT_LINE_TO | i33.LINE_TO | i33.CURVE_TO | i33.SMOOTH_CURVE_TO | i33.QUAD_TO | i33.SMOOTH_QUAD_TO | i33.ARC, i33;
    }(l);
    N = ((O = {})[_.MOVE_TO] = 2, O[_.LINE_TO] = 2, O[_.HORIZ_LINE_TO] = 1, O[_.VERT_LINE_TO] = 1, O[_.CLOSE_PATH] = 0, O[_.QUAD_TO] = 4, O[_.SMOOTH_QUAD_TO] = 2, O[_.CURVE_TO] = 6, O[_.SMOOTH_CURVE_TO] = 4, O[_.ARC] = 7, O);
  }
});
var require_es_regexp_to_string = __commonJS({
  "../node_modules/core-js/modules/es.regexp.to-string.js"() {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var PROPER_FUNCTION_NAME = require_function_name().PROPER;
    var defineBuiltIn = require_define_built_in();
    var anObject = require_an_object();
    var $toString = require_to_string();
    var fails = require_fails();
    var getRegExpFlags = require_regexp_get_flags();
    var TO_STRING = "toString";
    var RegExpPrototype = RegExp.prototype;
    var nativeToString = RegExpPrototype[TO_STRING];
    var NOT_GENERIC = fails(function() {
      return nativeToString.call({ source: "a", flags: "b" }) !== "/a/b";
    });
    var INCORRECT_NAME = PROPER_FUNCTION_NAME && nativeToString.name !== TO_STRING;
    if (NOT_GENERIC || INCORRECT_NAME) {
      defineBuiltIn(RegExpPrototype, TO_STRING, /* @__PURE__ */ __name2(/* @__PURE__ */ __name(function toString() {
        var R2 = anObject(this);
        var pattern = $toString(R2.source);
        var flags2 = $toString(getRegExpFlags(R2));
        return "/" + pattern + "/" + flags2;
      }, "toString"), "toString"), { unsafe: true });
    }
  }
});
function _typeof2(obj) {
  "@babel/helpers - typeof";
  if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {
    _typeof2 = /* @__PURE__ */ __name2(function(obj2) {
      return typeof obj2;
    }, "_typeof");
  } else {
    _typeof2 = /* @__PURE__ */ __name2(function(obj2) {
      return obj2 && typeof Symbol === "function" && obj2.constructor === Symbol && obj2 !== Symbol.prototype ? "symbol" : typeof obj2;
    }, "_typeof");
  }
  return _typeof2(obj);
}
__name(_typeof2, "_typeof2");
function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}
__name(_classCallCheck, "_classCallCheck");
function getImageDataFromCanvas(canvas, topX, topY, width, height) {
  if (typeof canvas === "string") {
    canvas = document.getElementById(canvas);
  }
  if (!canvas || _typeof2(canvas) !== "object" || !("getContext" in canvas)) {
    throw new TypeError("Expecting canvas with `getContext` method in processCanvasRGB(A) calls!");
  }
  var context = canvas.getContext("2d");
  try {
    return context.getImageData(topX, topY, width, height);
  } catch (e2) {
    throw new Error("unable to access image data: " + e2);
  }
}
__name(getImageDataFromCanvas, "getImageDataFromCanvas");
function processCanvasRGBA(canvas, topX, topY, width, height, radius) {
  if (isNaN(radius) || radius < 1) {
    return;
  }
  radius |= 0;
  var imageData = getImageDataFromCanvas(canvas, topX, topY, width, height);
  imageData = processImageDataRGBA(imageData, topX, topY, width, height, radius);
  canvas.getContext("2d").putImageData(imageData, topX, topY);
}
__name(processCanvasRGBA, "processCanvasRGBA");
function processImageDataRGBA(imageData, topX, topY, width, height, radius) {
  var pixels = imageData.data;
  var div = 2 * radius + 1;
  var widthMinus1 = width - 1;
  var heightMinus1 = height - 1;
  var radiusPlus1 = radius + 1;
  var sumFactor = radiusPlus1 * (radiusPlus1 + 1) / 2;
  var stackStart = new BlurStack();
  var stack = stackStart;
  var stackEnd;
  for (var i33 = 1; i33 < div; i33++) {
    stack = stack.next = new BlurStack();
    if (i33 === radiusPlus1) {
      stackEnd = stack;
    }
  }
  stack.next = stackStart;
  var stackIn = null, stackOut = null, yw = 0, yi = 0;
  var mulSum = mulTable[radius];
  var shgSum = shgTable[radius];
  for (var y3 = 0; y3 < height; y3++) {
    stack = stackStart;
    var pr = pixels[yi], pg = pixels[yi + 1], pb = pixels[yi + 2], pa = pixels[yi + 3];
    for (var _i = 0; _i < radiusPlus1; _i++) {
      stack.r = pr;
      stack.g = pg;
      stack.b = pb;
      stack.a = pa;
      stack = stack.next;
    }
    var rInSum = 0, gInSum = 0, bInSum = 0, aInSum = 0, rOutSum = radiusPlus1 * pr, gOutSum = radiusPlus1 * pg, bOutSum = radiusPlus1 * pb, aOutSum = radiusPlus1 * pa, rSum = sumFactor * pr, gSum = sumFactor * pg, bSum = sumFactor * pb, aSum = sumFactor * pa;
    for (var _i2 = 1; _i2 < radiusPlus1; _i2++) {
      var p3 = yi + ((widthMinus1 < _i2 ? widthMinus1 : _i2) << 2);
      var r2 = pixels[p3], g2 = pixels[p3 + 1], b2 = pixels[p3 + 2], a3 = pixels[p3 + 3];
      var rbs = radiusPlus1 - _i2;
      rSum += (stack.r = r2) * rbs;
      gSum += (stack.g = g2) * rbs;
      bSum += (stack.b = b2) * rbs;
      aSum += (stack.a = a3) * rbs;
      rInSum += r2;
      gInSum += g2;
      bInSum += b2;
      aInSum += a3;
      stack = stack.next;
    }
    stackIn = stackStart;
    stackOut = stackEnd;
    for (var x22 = 0; x22 < width; x22++) {
      var paInitial = aSum * mulSum >>> shgSum;
      pixels[yi + 3] = paInitial;
      if (paInitial !== 0) {
        var _a2 = 255 / paInitial;
        pixels[yi] = (rSum * mulSum >>> shgSum) * _a2;
        pixels[yi + 1] = (gSum * mulSum >>> shgSum) * _a2;
        pixels[yi + 2] = (bSum * mulSum >>> shgSum) * _a2;
      } else {
        pixels[yi] = pixels[yi + 1] = pixels[yi + 2] = 0;
      }
      rSum -= rOutSum;
      gSum -= gOutSum;
      bSum -= bOutSum;
      aSum -= aOutSum;
      rOutSum -= stackIn.r;
      gOutSum -= stackIn.g;
      bOutSum -= stackIn.b;
      aOutSum -= stackIn.a;
      var _p = x22 + radius + 1;
      _p = yw + (_p < widthMinus1 ? _p : widthMinus1) << 2;
      rInSum += stackIn.r = pixels[_p];
      gInSum += stackIn.g = pixels[_p + 1];
      bInSum += stackIn.b = pixels[_p + 2];
      aInSum += stackIn.a = pixels[_p + 3];
      rSum += rInSum;
      gSum += gInSum;
      bSum += bInSum;
      aSum += aInSum;
      stackIn = stackIn.next;
      var _stackOut = stackOut, _r = _stackOut.r, _g = _stackOut.g, _b2 = _stackOut.b, _a3 = _stackOut.a;
      rOutSum += _r;
      gOutSum += _g;
      bOutSum += _b2;
      aOutSum += _a3;
      rInSum -= _r;
      gInSum -= _g;
      bInSum -= _b2;
      aInSum -= _a3;
      stackOut = stackOut.next;
      yi += 4;
    }
    yw += width;
  }
  for (var _x = 0; _x < width; _x++) {
    yi = _x << 2;
    var _pr = pixels[yi], _pg = pixels[yi + 1], _pb = pixels[yi + 2], _pa = pixels[yi + 3], _rOutSum = radiusPlus1 * _pr, _gOutSum = radiusPlus1 * _pg, _bOutSum = radiusPlus1 * _pb, _aOutSum = radiusPlus1 * _pa, _rSum = sumFactor * _pr, _gSum = sumFactor * _pg, _bSum = sumFactor * _pb, _aSum = sumFactor * _pa;
    stack = stackStart;
    for (var _i3 = 0; _i3 < radiusPlus1; _i3++) {
      stack.r = _pr;
      stack.g = _pg;
      stack.b = _pb;
      stack.a = _pa;
      stack = stack.next;
    }
    var yp = width;
    var _gInSum = 0, _bInSum = 0, _aInSum = 0, _rInSum = 0;
    for (var _i4 = 1; _i4 <= radius; _i4++) {
      yi = yp + _x << 2;
      var _rbs = radiusPlus1 - _i4;
      _rSum += (stack.r = _pr = pixels[yi]) * _rbs;
      _gSum += (stack.g = _pg = pixels[yi + 1]) * _rbs;
      _bSum += (stack.b = _pb = pixels[yi + 2]) * _rbs;
      _aSum += (stack.a = _pa = pixels[yi + 3]) * _rbs;
      _rInSum += _pr;
      _gInSum += _pg;
      _bInSum += _pb;
      _aInSum += _pa;
      stack = stack.next;
      if (_i4 < heightMinus1) {
        yp += width;
      }
    }
    yi = _x;
    stackIn = stackStart;
    stackOut = stackEnd;
    for (var _y = 0; _y < height; _y++) {
      var _p2 = yi << 2;
      pixels[_p2 + 3] = _pa = _aSum * mulSum >>> shgSum;
      if (_pa > 0) {
        _pa = 255 / _pa;
        pixels[_p2] = (_rSum * mulSum >>> shgSum) * _pa;
        pixels[_p2 + 1] = (_gSum * mulSum >>> shgSum) * _pa;
        pixels[_p2 + 2] = (_bSum * mulSum >>> shgSum) * _pa;
      } else {
        pixels[_p2] = pixels[_p2 + 1] = pixels[_p2 + 2] = 0;
      }
      _rSum -= _rOutSum;
      _gSum -= _gOutSum;
      _bSum -= _bOutSum;
      _aSum -= _aOutSum;
      _rOutSum -= stackIn.r;
      _gOutSum -= stackIn.g;
      _bOutSum -= stackIn.b;
      _aOutSum -= stackIn.a;
      _p2 = _x + ((_p2 = _y + radiusPlus1) < heightMinus1 ? _p2 : heightMinus1) * width << 2;
      _rSum += _rInSum += stackIn.r = pixels[_p2];
      _gSum += _gInSum += stackIn.g = pixels[_p2 + 1];
      _bSum += _bInSum += stackIn.b = pixels[_p2 + 2];
      _aSum += _aInSum += stackIn.a = pixels[_p2 + 3];
      stackIn = stackIn.next;
      _rOutSum += _pr = stackOut.r;
      _gOutSum += _pg = stackOut.g;
      _bOutSum += _pb = stackOut.b;
      _aOutSum += _pa = stackOut.a;
      _rInSum -= _pr;
      _gInSum -= _pg;
      _bInSum -= _pb;
      _aInSum -= _pa;
      stackOut = stackOut.next;
      yi += width;
    }
  }
  return imageData;
}
__name(processImageDataRGBA, "processImageDataRGBA");
var mulTable;
var shgTable;
var BlurStack;
var init_stackblur_es = __esm({
  "../node_modules/stackblur-canvas/dist/stackblur-es.js"() {
    init_functionsRoutes_0_8044054200943971();
    __name2(_typeof2, "_typeof");
    __name2(_classCallCheck, "_classCallCheck");
    mulTable = [512, 512, 456, 512, 328, 456, 335, 512, 405, 328, 271, 456, 388, 335, 292, 512, 454, 405, 364, 328, 298, 271, 496, 456, 420, 388, 360, 335, 312, 292, 273, 512, 482, 454, 428, 405, 383, 364, 345, 328, 312, 298, 284, 271, 259, 496, 475, 456, 437, 420, 404, 388, 374, 360, 347, 335, 323, 312, 302, 292, 282, 273, 265, 512, 497, 482, 468, 454, 441, 428, 417, 405, 394, 383, 373, 364, 354, 345, 337, 328, 320, 312, 305, 298, 291, 284, 278, 271, 265, 259, 507, 496, 485, 475, 465, 456, 446, 437, 428, 420, 412, 404, 396, 388, 381, 374, 367, 360, 354, 347, 341, 335, 329, 323, 318, 312, 307, 302, 297, 292, 287, 282, 278, 273, 269, 265, 261, 512, 505, 497, 489, 482, 475, 468, 461, 454, 447, 441, 435, 428, 422, 417, 411, 405, 399, 394, 389, 383, 378, 373, 368, 364, 359, 354, 350, 345, 341, 337, 332, 328, 324, 320, 316, 312, 309, 305, 301, 298, 294, 291, 287, 284, 281, 278, 274, 271, 268, 265, 262, 259, 257, 507, 501, 496, 491, 485, 480, 475, 470, 465, 460, 456, 451, 446, 442, 437, 433, 428, 424, 420, 416, 412, 408, 404, 400, 396, 392, 388, 385, 381, 377, 374, 370, 367, 363, 360, 357, 354, 350, 347, 344, 341, 338, 335, 332, 329, 326, 323, 320, 318, 315, 312, 310, 307, 304, 302, 299, 297, 294, 292, 289, 287, 285, 282, 280, 278, 275, 273, 271, 269, 267, 265, 263, 261, 259];
    shgTable = [9, 11, 12, 13, 13, 14, 14, 15, 15, 15, 15, 16, 16, 16, 16, 17, 17, 17, 17, 17, 17, 17, 18, 18, 18, 18, 18, 18, 18, 18, 18, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24];
    __name2(getImageDataFromCanvas, "getImageDataFromCanvas");
    __name2(processCanvasRGBA, "processCanvasRGBA");
    __name2(processImageDataRGBA, "processImageDataRGBA");
    BlurStack = /**
    * Set properties.
    */
    /* @__PURE__ */ __name2(/* @__PURE__ */ __name(function BlurStack2() {
      _classCallCheck(this, BlurStack2);
      this.r = 0;
      this.g = 0;
      this.b = 0;
      this.a = 0;
      this.next = null;
    }, "BlurStack2"), "BlurStack");
  }
});
var index_es_exports = {};
__export(index_es_exports, {
  AElement: /* @__PURE__ */ __name(() => AElement, "AElement"),
  AnimateColorElement: /* @__PURE__ */ __name(() => AnimateColorElement, "AnimateColorElement"),
  AnimateElement: /* @__PURE__ */ __name(() => AnimateElement, "AnimateElement"),
  AnimateTransformElement: /* @__PURE__ */ __name(() => AnimateTransformElement, "AnimateTransformElement"),
  BoundingBox: /* @__PURE__ */ __name(() => BoundingBox, "BoundingBox"),
  CB1: /* @__PURE__ */ __name(() => CB1, "CB1"),
  CB2: /* @__PURE__ */ __name(() => CB2, "CB2"),
  CB3: /* @__PURE__ */ __name(() => CB3, "CB3"),
  CB4: /* @__PURE__ */ __name(() => CB4, "CB4"),
  Canvg: /* @__PURE__ */ __name(() => Canvg, "Canvg"),
  CircleElement: /* @__PURE__ */ __name(() => CircleElement, "CircleElement"),
  ClipPathElement: /* @__PURE__ */ __name(() => ClipPathElement, "ClipPathElement"),
  DefsElement: /* @__PURE__ */ __name(() => DefsElement, "DefsElement"),
  DescElement: /* @__PURE__ */ __name(() => DescElement, "DescElement"),
  Document: /* @__PURE__ */ __name(() => Document, "Document"),
  Element: /* @__PURE__ */ __name(() => Element, "Element"),
  EllipseElement: /* @__PURE__ */ __name(() => EllipseElement, "EllipseElement"),
  FeColorMatrixElement: /* @__PURE__ */ __name(() => FeColorMatrixElement, "FeColorMatrixElement"),
  FeCompositeElement: /* @__PURE__ */ __name(() => FeCompositeElement, "FeCompositeElement"),
  FeDropShadowElement: /* @__PURE__ */ __name(() => FeDropShadowElement, "FeDropShadowElement"),
  FeGaussianBlurElement: /* @__PURE__ */ __name(() => FeGaussianBlurElement, "FeGaussianBlurElement"),
  FeMorphologyElement: /* @__PURE__ */ __name(() => FeMorphologyElement, "FeMorphologyElement"),
  FilterElement: /* @__PURE__ */ __name(() => FilterElement, "FilterElement"),
  Font: /* @__PURE__ */ __name(() => Font, "Font"),
  FontElement: /* @__PURE__ */ __name(() => FontElement, "FontElement"),
  FontFaceElement: /* @__PURE__ */ __name(() => FontFaceElement, "FontFaceElement"),
  GElement: /* @__PURE__ */ __name(() => GElement, "GElement"),
  GlyphElement: /* @__PURE__ */ __name(() => GlyphElement, "GlyphElement"),
  GradientElement: /* @__PURE__ */ __name(() => GradientElement, "GradientElement"),
  ImageElement: /* @__PURE__ */ __name(() => ImageElement, "ImageElement"),
  LineElement: /* @__PURE__ */ __name(() => LineElement, "LineElement"),
  LinearGradientElement: /* @__PURE__ */ __name(() => LinearGradientElement, "LinearGradientElement"),
  MarkerElement: /* @__PURE__ */ __name(() => MarkerElement, "MarkerElement"),
  MaskElement: /* @__PURE__ */ __name(() => MaskElement, "MaskElement"),
  Matrix: /* @__PURE__ */ __name(() => Matrix, "Matrix"),
  MissingGlyphElement: /* @__PURE__ */ __name(() => MissingGlyphElement, "MissingGlyphElement"),
  Mouse: /* @__PURE__ */ __name(() => Mouse, "Mouse"),
  PSEUDO_ZERO: /* @__PURE__ */ __name(() => PSEUDO_ZERO, "PSEUDO_ZERO"),
  Parser: /* @__PURE__ */ __name(() => Parser, "Parser"),
  PathElement: /* @__PURE__ */ __name(() => PathElement, "PathElement"),
  PathParser: /* @__PURE__ */ __name(() => PathParser, "PathParser"),
  PatternElement: /* @__PURE__ */ __name(() => PatternElement, "PatternElement"),
  Point: /* @__PURE__ */ __name(() => Point, "Point"),
  PolygonElement: /* @__PURE__ */ __name(() => PolygonElement, "PolygonElement"),
  PolylineElement: /* @__PURE__ */ __name(() => PolylineElement, "PolylineElement"),
  Property: /* @__PURE__ */ __name(() => Property, "Property"),
  QB1: /* @__PURE__ */ __name(() => QB1, "QB1"),
  QB2: /* @__PURE__ */ __name(() => QB2, "QB2"),
  QB3: /* @__PURE__ */ __name(() => QB3, "QB3"),
  RadialGradientElement: /* @__PURE__ */ __name(() => RadialGradientElement, "RadialGradientElement"),
  RectElement: /* @__PURE__ */ __name(() => RectElement, "RectElement"),
  RenderedElement: /* @__PURE__ */ __name(() => RenderedElement, "RenderedElement"),
  Rotate: /* @__PURE__ */ __name(() => Rotate, "Rotate"),
  SVGElement: /* @__PURE__ */ __name(() => SVGElement, "SVGElement"),
  SVGFontLoader: /* @__PURE__ */ __name(() => SVGFontLoader, "SVGFontLoader"),
  Scale: /* @__PURE__ */ __name(() => Scale, "Scale"),
  Screen: /* @__PURE__ */ __name(() => Screen, "Screen"),
  Skew: /* @__PURE__ */ __name(() => Skew, "Skew"),
  SkewX: /* @__PURE__ */ __name(() => SkewX, "SkewX"),
  SkewY: /* @__PURE__ */ __name(() => SkewY, "SkewY"),
  StopElement: /* @__PURE__ */ __name(() => StopElement, "StopElement"),
  StyleElement: /* @__PURE__ */ __name(() => StyleElement, "StyleElement"),
  SymbolElement: /* @__PURE__ */ __name(() => SymbolElement, "SymbolElement"),
  TRefElement: /* @__PURE__ */ __name(() => TRefElement, "TRefElement"),
  TSpanElement: /* @__PURE__ */ __name(() => TSpanElement, "TSpanElement"),
  TextElement: /* @__PURE__ */ __name(() => TextElement, "TextElement"),
  TextPathElement: /* @__PURE__ */ __name(() => TextPathElement, "TextPathElement"),
  TitleElement: /* @__PURE__ */ __name(() => TitleElement, "TitleElement"),
  Transform: /* @__PURE__ */ __name(() => Transform, "Transform"),
  Translate: /* @__PURE__ */ __name(() => Translate, "Translate"),
  UnknownElement: /* @__PURE__ */ __name(() => UnknownElement, "UnknownElement"),
  UseElement: /* @__PURE__ */ __name(() => UseElement, "UseElement"),
  ViewPort: /* @__PURE__ */ __name(() => ViewPort, "ViewPort"),
  compressSpaces: /* @__PURE__ */ __name(() => compressSpaces, "compressSpaces"),
  default: /* @__PURE__ */ __name(() => Canvg, "default"),
  getSelectorSpecificity: /* @__PURE__ */ __name(() => getSelectorSpecificity, "getSelectorSpecificity"),
  normalizeAttributeName: /* @__PURE__ */ __name(() => normalizeAttributeName, "normalizeAttributeName"),
  normalizeColor: /* @__PURE__ */ __name(() => normalizeColor, "normalizeColor"),
  parseExternalUrl: /* @__PURE__ */ __name(() => parseExternalUrl, "parseExternalUrl"),
  presets: /* @__PURE__ */ __name(() => index, "presets"),
  toNumbers: /* @__PURE__ */ __name(() => toNumbers, "toNumbers"),
  trimLeft: /* @__PURE__ */ __name(() => trimLeft, "trimLeft"),
  trimRight: /* @__PURE__ */ __name(() => trimRight, "trimRight"),
  vectorMagnitude: /* @__PURE__ */ __name(() => vectorMagnitude, "vectorMagnitude"),
  vectorsAngle: /* @__PURE__ */ __name(() => vectorsAngle, "vectorsAngle"),
  vectorsRatio: /* @__PURE__ */ __name(() => vectorsRatio, "vectorsRatio")
});
function offscreen() {
  var {
    DOMParser: DOMParserFallback
  } = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
  var preset = {
    window: null,
    ignoreAnimation: true,
    ignoreMouse: true,
    DOMParser: DOMParserFallback,
    createCanvas(width, height) {
      return new OffscreenCanvas(width, height);
    },
    createImage(url) {
      return _asyncToGenerator(function* () {
        var response = yield fetch(url);
        var blob3 = yield response.blob();
        var img = yield createImageBitmap(blob3);
        return img;
      })();
    }
  };
  if (typeof DOMParser !== "undefined" || typeof DOMParserFallback === "undefined") {
    Reflect.deleteProperty(preset, "DOMParser");
  }
  return preset;
}
__name(offscreen, "offscreen");
function node(_ref) {
  var {
    DOMParser: DOMParser2,
    canvas,
    fetch: fetch2
  } = _ref;
  return {
    window: null,
    ignoreAnimation: true,
    ignoreMouse: true,
    DOMParser: DOMParser2,
    fetch: fetch2,
    createCanvas: canvas.createCanvas,
    createImage: canvas.loadImage
  };
}
__name(node, "node");
function compressSpaces(str) {
  return str.replace(/(?!\u3000)\s+/gm, " ");
}
__name(compressSpaces, "compressSpaces");
function trimLeft(str) {
  return str.replace(/^[\n \t]+/, "");
}
__name(trimLeft, "trimLeft");
function trimRight(str) {
  return str.replace(/[\n \t]+$/, "");
}
__name(trimRight, "trimRight");
function toNumbers(str) {
  var matches = (str || "").match(/-?(\d+(?:\.\d*(?:[eE][+-]?\d+)?)?|\.\d+)(?=\D|$)/gm) || [];
  return matches.map(parseFloat);
}
__name(toNumbers, "toNumbers");
function normalizeAttributeName(name) {
  if (allUppercase.test(name)) {
    return name.toLowerCase();
  }
  return name;
}
__name(normalizeAttributeName, "normalizeAttributeName");
function parseExternalUrl(url) {
  var urlMatch = /url\(('([^']+)'|"([^"]+)"|([^'")]+))\)/.exec(url) || [];
  return urlMatch[2] || urlMatch[3] || urlMatch[4];
}
__name(parseExternalUrl, "parseExternalUrl");
function normalizeColor(color) {
  if (!color.startsWith("rgb")) {
    return color;
  }
  var rgbParts = 3;
  var normalizedColor = color.replace(/\d+(\.\d+)?/g, (num, isFloat) => rgbParts-- && isFloat ? String(Math.round(parseFloat(num))) : num);
  return normalizedColor;
}
__name(normalizeColor, "normalizeColor");
function findSelectorMatch(selector, regex) {
  var matches = regex.exec(selector);
  if (!matches) {
    return [selector, 0];
  }
  return [selector.replace(regex, " "), matches.length];
}
__name(findSelectorMatch, "findSelectorMatch");
function getSelectorSpecificity(selector) {
  var specificity = [0, 0, 0];
  var currentSelector = selector.replace(/:not\(([^)]*)\)/g, "     $1 ").replace(/{[\s\S]*/gm, " ");
  var delta = 0;
  [currentSelector, delta] = findSelectorMatch(currentSelector, attributeRegex);
  specificity[1] += delta;
  [currentSelector, delta] = findSelectorMatch(currentSelector, idRegex);
  specificity[0] += delta;
  [currentSelector, delta] = findSelectorMatch(currentSelector, classRegex);
  specificity[1] += delta;
  [currentSelector, delta] = findSelectorMatch(currentSelector, pseudoElementRegex);
  specificity[2] += delta;
  [currentSelector, delta] = findSelectorMatch(currentSelector, pseudoClassWithBracketsRegex);
  specificity[1] += delta;
  [currentSelector, delta] = findSelectorMatch(currentSelector, pseudoClassRegex);
  specificity[1] += delta;
  currentSelector = currentSelector.replace(/[*\s+>~]/g, " ").replace(/[#.]/g, " ");
  [currentSelector, delta] = findSelectorMatch(currentSelector, elementRegex);
  specificity[2] += delta;
  return specificity.join("");
}
__name(getSelectorSpecificity, "getSelectorSpecificity");
function vectorMagnitude(v3) {
  return Math.sqrt(Math.pow(v3[0], 2) + Math.pow(v3[1], 2));
}
__name(vectorMagnitude, "vectorMagnitude");
function vectorsRatio(u3, v3) {
  return (u3[0] * v3[0] + u3[1] * v3[1]) / (vectorMagnitude(u3) * vectorMagnitude(v3));
}
__name(vectorsRatio, "vectorsRatio");
function vectorsAngle(u3, v3) {
  return (u3[0] * v3[1] < u3[1] * v3[0] ? -1 : 1) * Math.acos(vectorsRatio(u3, v3));
}
__name(vectorsAngle, "vectorsAngle");
function CB1(t3) {
  return t3 * t3 * t3;
}
__name(CB1, "CB1");
function CB2(t3) {
  return 3 * t3 * t3 * (1 - t3);
}
__name(CB2, "CB2");
function CB3(t3) {
  return 3 * t3 * (1 - t3) * (1 - t3);
}
__name(CB3, "CB3");
function CB4(t3) {
  return (1 - t3) * (1 - t3) * (1 - t3);
}
__name(CB4, "CB4");
function QB1(t3) {
  return t3 * t3;
}
__name(QB1, "QB1");
function QB2(t3) {
  return 2 * t3 * (1 - t3);
}
__name(QB2, "QB2");
function QB3(t3) {
  return (1 - t3) * (1 - t3);
}
__name(QB3, "QB3");
function parseTransforms(transform) {
  return compressSpaces(transform).trim().replace(/\)([a-zA-Z])/g, ") $1").replace(/\)(\s?,\s?)/g, ") ").split(/\s(?=[a-z])/);
}
__name(parseTransforms, "parseTransforms");
function parseTransform(transform) {
  var [type, value] = transform.split("(");
  return [type.trim(), value.trim().replace(")", "")];
}
__name(parseTransform, "parseTransform");
function wrapFontFamily(fontFamily) {
  var trimmed = fontFamily.trim();
  return /^('|")/.test(trimmed) ? trimmed : '"'.concat(trimmed, '"');
}
__name(wrapFontFamily, "wrapFontFamily");
function prepareFontFamily(fontFamily) {
  return typeof process === "undefined" ? fontFamily : fontFamily.trim().split(",").map(wrapFontFamily).join(",");
}
__name(prepareFontFamily, "prepareFontFamily");
function prepareFontStyle(fontStyle) {
  if (!fontStyle) {
    return "";
  }
  var targetFontStyle = fontStyle.trim().toLowerCase();
  switch (targetFontStyle) {
    case "normal":
    case "italic":
    case "oblique":
    case "inherit":
    case "initial":
    case "unset":
      return targetFontStyle;
    default:
      if (/^oblique\s+(-|)\d+deg$/.test(targetFontStyle)) {
        return targetFontStyle;
      }
      return "";
  }
}
__name(prepareFontStyle, "prepareFontStyle");
function prepareFontWeight(fontWeight) {
  if (!fontWeight) {
    return "";
  }
  var targetFontWeight = fontWeight.trim().toLowerCase();
  switch (targetFontWeight) {
    case "normal":
    case "bold":
    case "lighter":
    case "bolder":
    case "inherit":
    case "initial":
    case "unset":
      return targetFontWeight;
    default:
      if (/^[\d.]+$/.test(targetFontWeight)) {
        return targetFontWeight;
      }
      return "";
  }
}
__name(prepareFontWeight, "prepareFontWeight");
function ownKeys$2(object, enumerableOnly) {
  var keys = Object.keys(object);
  if (Object.getOwnPropertySymbols) {
    var symbols = Object.getOwnPropertySymbols(object);
    if (enumerableOnly) {
      symbols = symbols.filter(function(sym) {
        return Object.getOwnPropertyDescriptor(object, sym).enumerable;
      });
    }
    keys.push.apply(keys, symbols);
  }
  return keys;
}
__name(ownKeys$2, "ownKeys$2");
function _objectSpread$2(target) {
  for (var i33 = 1; i33 < arguments.length; i33++) {
    var source = arguments[i33] != null ? arguments[i33] : {};
    if (i33 % 2) {
      ownKeys$2(Object(source), true).forEach(function(key) {
        _defineProperty(target, key, source[key]);
      });
    } else if (Object.getOwnPropertyDescriptors) {
      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));
    } else {
      ownKeys$2(Object(source)).forEach(function(key) {
        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));
      });
    }
  }
  return target;
}
__name(_objectSpread$2, "_objectSpread$2");
function imGet(img, x22, y3, width, _height, rgba) {
  return img[y3 * width * 4 + x22 * 4 + rgba];
}
__name(imGet, "imGet");
function imSet(img, x22, y3, width, _height, rgba, val) {
  img[y3 * width * 4 + x22 * 4 + rgba] = val;
}
__name(imSet, "imSet");
function m2(matrix, i33, v3) {
  var mi = matrix[i33];
  return mi * v3;
}
__name(m2, "m2");
function c2(a3, m1, m22, m32) {
  return m1 + Math.cos(a3) * m22 + Math.sin(a3) * m32;
}
__name(c2, "c2");
function ownKeys$1(object, enumerableOnly) {
  var keys = Object.keys(object);
  if (Object.getOwnPropertySymbols) {
    var symbols = Object.getOwnPropertySymbols(object);
    if (enumerableOnly) {
      symbols = symbols.filter(function(sym) {
        return Object.getOwnPropertyDescriptor(object, sym).enumerable;
      });
    }
    keys.push.apply(keys, symbols);
  }
  return keys;
}
__name(ownKeys$1, "ownKeys$1");
function _objectSpread$1(target) {
  for (var i33 = 1; i33 < arguments.length; i33++) {
    var source = arguments[i33] != null ? arguments[i33] : {};
    if (i33 % 2) {
      ownKeys$1(Object(source), true).forEach(function(key) {
        _defineProperty(target, key, source[key]);
      });
    } else if (Object.getOwnPropertyDescriptors) {
      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));
    } else {
      ownKeys$1(Object(source)).forEach(function(key) {
        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));
      });
    }
  }
  return target;
}
__name(_objectSpread$1, "_objectSpread$1");
function createCanvas(width, height) {
  var canvas = document.createElement("canvas");
  canvas.width = width;
  canvas.height = height;
  return canvas;
}
__name(createCanvas, "createCanvas");
function createImage(_x) {
  return _createImage.apply(this, arguments);
}
__name(createImage, "createImage");
function _createImage() {
  _createImage = _asyncToGenerator(function* (src) {
    var anonymousCrossOrigin = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : false;
    var image = document.createElement("img");
    if (anonymousCrossOrigin) {
      image.crossOrigin = "Anonymous";
    }
    return new Promise((resolve, reject) => {
      image.onload = () => {
        resolve(image);
      };
      image.onerror = (_event, _source, _lineno, _colno, error) => {
        reject(error);
      };
      image.src = src;
    });
  });
  return _createImage.apply(this, arguments);
}
__name(_createImage, "_createImage");
function ownKeys(object, enumerableOnly) {
  var keys = Object.keys(object);
  if (Object.getOwnPropertySymbols) {
    var symbols = Object.getOwnPropertySymbols(object);
    if (enumerableOnly) {
      symbols = symbols.filter(function(sym) {
        return Object.getOwnPropertyDescriptor(object, sym).enumerable;
      });
    }
    keys.push.apply(keys, symbols);
  }
  return keys;
}
__name(ownKeys, "ownKeys");
function _objectSpread(target) {
  for (var i33 = 1; i33 < arguments.length; i33++) {
    var source = arguments[i33] != null ? arguments[i33] : {};
    if (i33 % 2) {
      ownKeys(Object(source), true).forEach(function(key) {
        _defineProperty(target, key, source[key]);
      });
    } else if (Object.getOwnPropertyDescriptors) {
      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));
    } else {
      ownKeys(Object(source)).forEach(function(key) {
        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));
      });
    }
  }
  return target;
}
__name(_objectSpread, "_objectSpread");
var import_es_promise;
var import_es_string_match;
var import_es_string_replace;
var import_es_string_starts_with;
var import_es_array_iterator;
var import_web_dom_collections_iterator;
var import_es_array_reduce;
var import_es_string_ends_with;
var import_es_string_split;
var import_raf;
var import_es_string_trim;
var import_rgbcolor;
var import_es_array_index_of;
var import_es_string_includes;
var import_es_array_reverse;
var import_es_regexp_to_string;
var index;
var allUppercase;
var attributeRegex;
var idRegex;
var classRegex;
var pseudoElementRegex;
var pseudoClassWithBracketsRegex;
var pseudoClassRegex;
var elementRegex;
var PSEUDO_ZERO;
var Property;
var ViewPort;
var Point;
var Mouse;
var defaultWindow;
var defaultFetch$1;
var Screen;
var defaultFetch;
var DefaultDOMParser;
var Parser;
var Translate;
var Rotate;
var Scale;
var Matrix;
var Skew;
var SkewX;
var SkewY;
var Transform;
var Element;
var UnknownElement;
var Font;
var BoundingBox;
var PathParser;
var RenderedElement;
var PathElement;
var GlyphElement;
var TextElement;
var TSpanElement;
var TextNode;
var SVGElement;
var RectElement;
var CircleElement;
var EllipseElement;
var LineElement;
var PolylineElement;
var PolygonElement;
var PatternElement;
var MarkerElement;
var DefsElement;
var GElement;
var GradientElement;
var LinearGradientElement;
var RadialGradientElement;
var StopElement;
var AnimateElement;
var AnimateColorElement;
var AnimateTransformElement;
var FontElement;
var FontFaceElement;
var MissingGlyphElement;
var TRefElement;
var AElement;
var TextPathElement;
var dataUriRegex;
var ImageElement;
var SymbolElement;
var SVGFontLoader;
var StyleElement;
var UseElement;
var FeColorMatrixElement;
var MaskElement;
var noop;
var ClipPathElement;
var FilterElement;
var FeDropShadowElement;
var FeMorphologyElement;
var FeCompositeElement;
var FeGaussianBlurElement;
var TitleElement;
var DescElement;
var elements;
var Document;
var Canvg;
var init_index_es = __esm({
  "../node_modules/canvg/lib/index.es.js"() {
    init_functionsRoutes_0_8044054200943971();
    import_es_promise = __toESM(require_es_promise(), 1);
    init_asyncToGenerator();
    import_es_string_match = __toESM(require_es_string_match(), 1);
    import_es_string_replace = __toESM(require_es_string_replace(), 1);
    import_es_string_starts_with = __toESM(require_es_string_starts_with(), 1);
    import_es_array_iterator = __toESM(require_es_array_iterator(), 1);
    import_web_dom_collections_iterator = __toESM(require_web_dom_collections_iterator(), 1);
    init_defineProperty();
    import_es_array_reduce = __toESM(require_es_array_reduce(), 1);
    import_es_string_ends_with = __toESM(require_es_string_ends_with(), 1);
    import_es_string_split = __toESM(require_es_string_split(), 1);
    import_raf = __toESM(require_raf(), 1);
    import_es_string_trim = __toESM(require_es_string_trim(), 1);
    import_rgbcolor = __toESM(require_rgbcolor(), 1);
    import_es_array_index_of = __toESM(require_es_array_index_of(), 1);
    import_es_string_includes = __toESM(require_es_string_includes(), 1);
    import_es_array_reverse = __toESM(require_es_array_reverse(), 1);
    init_SVGPathData_module();
    import_es_regexp_to_string = __toESM(require_es_regexp_to_string(), 1);
    init_stackblur_es();
    __name2(offscreen, "offscreen");
    __name2(node, "node");
    index = /* @__PURE__ */ Object.freeze({
      __proto__: null,
      offscreen,
      node
    });
    __name2(compressSpaces, "compressSpaces");
    __name2(trimLeft, "trimLeft");
    __name2(trimRight, "trimRight");
    __name2(toNumbers, "toNumbers");
    allUppercase = /^[A-Z-]+$/;
    __name2(normalizeAttributeName, "normalizeAttributeName");
    __name2(parseExternalUrl, "parseExternalUrl");
    __name2(normalizeColor, "normalizeColor");
    attributeRegex = /(\[[^\]]+\])/g;
    idRegex = /(#[^\s+>~.[:]+)/g;
    classRegex = /(\.[^\s+>~.[:]+)/g;
    pseudoElementRegex = /(::[^\s+>~.[:]+|:first-line|:first-letter|:before|:after)/gi;
    pseudoClassWithBracketsRegex = /(:[\w-]+\([^)]*\))/gi;
    pseudoClassRegex = /(:[^\s+>~.[:]+)/g;
    elementRegex = /([^\s+>~.[:]+)/g;
    __name2(findSelectorMatch, "findSelectorMatch");
    __name2(getSelectorSpecificity, "getSelectorSpecificity");
    PSEUDO_ZERO = 1e-8;
    __name2(vectorMagnitude, "vectorMagnitude");
    __name2(vectorsRatio, "vectorsRatio");
    __name2(vectorsAngle, "vectorsAngle");
    __name2(CB1, "CB1");
    __name2(CB2, "CB2");
    __name2(CB3, "CB3");
    __name2(CB4, "CB4");
    __name2(QB1, "QB1");
    __name2(QB2, "QB2");
    __name2(QB3, "QB3");
    Property = class _Property {
      static {
        __name(this, "_Property");
      }
      static {
        __name2(this, "Property");
      }
      constructor(document2, name, value) {
        this.document = document2;
        this.name = name;
        this.value = value;
        this.isNormalizedColor = false;
      }
      static empty(document2) {
        return new _Property(document2, "EMPTY", "");
      }
      split() {
        var separator = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : " ";
        var {
          document: document2,
          name
        } = this;
        return compressSpaces(this.getString()).trim().split(separator).map((value) => new _Property(document2, name, value));
      }
      hasValue(zeroIsValue) {
        var {
          value
        } = this;
        return value !== null && value !== "" && (zeroIsValue || value !== 0) && typeof value !== "undefined";
      }
      isString(regexp) {
        var {
          value
        } = this;
        var result = typeof value === "string";
        if (!result || !regexp) {
          return result;
        }
        return regexp.test(value);
      }
      isUrlDefinition() {
        return this.isString(/^url\(/);
      }
      isPixels() {
        if (!this.hasValue()) {
          return false;
        }
        var asString = this.getString();
        switch (true) {
          case asString.endsWith("px"):
          case /^[0-9]+$/.test(asString):
            return true;
          default:
            return false;
        }
      }
      setValue(value) {
        this.value = value;
        return this;
      }
      getValue(def) {
        if (typeof def === "undefined" || this.hasValue()) {
          return this.value;
        }
        return def;
      }
      getNumber(def) {
        if (!this.hasValue()) {
          if (typeof def === "undefined") {
            return 0;
          }
          return parseFloat(def);
        }
        var {
          value
        } = this;
        var n3 = parseFloat(value);
        if (this.isString(/%$/)) {
          n3 /= 100;
        }
        return n3;
      }
      getString(def) {
        if (typeof def === "undefined" || this.hasValue()) {
          return typeof this.value === "undefined" ? "" : String(this.value);
        }
        return String(def);
      }
      getColor(def) {
        var color = this.getString(def);
        if (this.isNormalizedColor) {
          return color;
        }
        this.isNormalizedColor = true;
        color = normalizeColor(color);
        this.value = color;
        return color;
      }
      getDpi() {
        return 96;
      }
      getRem() {
        return this.document.rootEmSize;
      }
      getEm() {
        return this.document.emSize;
      }
      getUnits() {
        return this.getString().replace(/[0-9.-]/g, "");
      }
      getPixels(axisOrIsFontSize) {
        var processPercent = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : false;
        if (!this.hasValue()) {
          return 0;
        }
        var [axis, isFontSize] = typeof axisOrIsFontSize === "boolean" ? [void 0, axisOrIsFontSize] : [axisOrIsFontSize];
        var {
          viewPort
        } = this.document.screen;
        switch (true) {
          case this.isString(/vmin$/):
            return this.getNumber() / 100 * Math.min(viewPort.computeSize("x"), viewPort.computeSize("y"));
          case this.isString(/vmax$/):
            return this.getNumber() / 100 * Math.max(viewPort.computeSize("x"), viewPort.computeSize("y"));
          case this.isString(/vw$/):
            return this.getNumber() / 100 * viewPort.computeSize("x");
          case this.isString(/vh$/):
            return this.getNumber() / 100 * viewPort.computeSize("y");
          case this.isString(/rem$/):
            return this.getNumber() * this.getRem();
          case this.isString(/em$/):
            return this.getNumber() * this.getEm();
          case this.isString(/ex$/):
            return this.getNumber() * this.getEm() / 2;
          case this.isString(/px$/):
            return this.getNumber();
          case this.isString(/pt$/):
            return this.getNumber() * this.getDpi() * (1 / 72);
          case this.isString(/pc$/):
            return this.getNumber() * 15;
          case this.isString(/cm$/):
            return this.getNumber() * this.getDpi() / 2.54;
          case this.isString(/mm$/):
            return this.getNumber() * this.getDpi() / 25.4;
          case this.isString(/in$/):
            return this.getNumber() * this.getDpi();
          case (this.isString(/%$/) && isFontSize):
            return this.getNumber() * this.getEm();
          case this.isString(/%$/):
            return this.getNumber() * viewPort.computeSize(axis);
          default: {
            var n3 = this.getNumber();
            if (processPercent && n3 < 1) {
              return n3 * viewPort.computeSize(axis);
            }
            return n3;
          }
        }
      }
      getMilliseconds() {
        if (!this.hasValue()) {
          return 0;
        }
        if (this.isString(/ms$/)) {
          return this.getNumber();
        }
        return this.getNumber() * 1e3;
      }
      getRadians() {
        if (!this.hasValue()) {
          return 0;
        }
        switch (true) {
          case this.isString(/deg$/):
            return this.getNumber() * (Math.PI / 180);
          case this.isString(/grad$/):
            return this.getNumber() * (Math.PI / 200);
          case this.isString(/rad$/):
            return this.getNumber();
          default:
            return this.getNumber() * (Math.PI / 180);
        }
      }
      getDefinition() {
        var asString = this.getString();
        var name = /#([^)'"]+)/.exec(asString);
        if (name) {
          name = name[1];
        }
        if (!name) {
          name = asString;
        }
        return this.document.definitions[name];
      }
      getFillStyleDefinition(element, opacity) {
        var def = this.getDefinition();
        if (!def) {
          return null;
        }
        if (typeof def.createGradient === "function") {
          return def.createGradient(this.document.ctx, element, opacity);
        }
        if (typeof def.createPattern === "function") {
          if (def.getHrefAttribute().hasValue()) {
            var patternTransform = def.getAttribute("patternTransform");
            def = def.getHrefAttribute().getDefinition();
            if (patternTransform.hasValue()) {
              def.getAttribute("patternTransform", true).setValue(patternTransform.value);
            }
          }
          return def.createPattern(this.document.ctx, element, opacity);
        }
        return null;
      }
      getTextBaseline() {
        if (!this.hasValue()) {
          return null;
        }
        return _Property.textBaselineMapping[this.getString()];
      }
      addOpacity(opacity) {
        var value = this.getColor();
        var len = value.length;
        var commas = 0;
        for (var i33 = 0; i33 < len; i33++) {
          if (value[i33] === ",") {
            commas++;
          }
          if (commas === 3) {
            break;
          }
        }
        if (opacity.hasValue() && this.isString() && commas !== 3) {
          var color = new import_rgbcolor.default(value);
          if (color.ok) {
            color.alpha = opacity.getNumber();
            value = color.toRGBA();
          }
        }
        return new _Property(this.document, this.name, value);
      }
    };
    Property.textBaselineMapping = {
      "baseline": "alphabetic",
      "before-edge": "top",
      "text-before-edge": "top",
      "middle": "middle",
      "central": "middle",
      "after-edge": "bottom",
      "text-after-edge": "bottom",
      "ideographic": "ideographic",
      "alphabetic": "alphabetic",
      "hanging": "hanging",
      "mathematical": "alphabetic"
    };
    ViewPort = class {
      static {
        __name(this, "ViewPort");
      }
      static {
        __name2(this, "ViewPort");
      }
      constructor() {
        this.viewPorts = [];
      }
      clear() {
        this.viewPorts = [];
      }
      setCurrent(width, height) {
        this.viewPorts.push({
          width,
          height
        });
      }
      removeCurrent() {
        this.viewPorts.pop();
      }
      getCurrent() {
        var {
          viewPorts
        } = this;
        return viewPorts[viewPorts.length - 1];
      }
      get width() {
        return this.getCurrent().width;
      }
      get height() {
        return this.getCurrent().height;
      }
      computeSize(d2) {
        if (typeof d2 === "number") {
          return d2;
        }
        if (d2 === "x") {
          return this.width;
        }
        if (d2 === "y") {
          return this.height;
        }
        return Math.sqrt(Math.pow(this.width, 2) + Math.pow(this.height, 2)) / Math.sqrt(2);
      }
    };
    Point = class _Point {
      static {
        __name(this, "_Point");
      }
      static {
        __name2(this, "Point");
      }
      constructor(x22, y3) {
        this.x = x22;
        this.y = y3;
      }
      static parse(point) {
        var defaultValue = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 0;
        var [x22 = defaultValue, y3 = defaultValue] = toNumbers(point);
        return new _Point(x22, y3);
      }
      static parseScale(scale) {
        var defaultValue = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 1;
        var [x22 = defaultValue, y3 = x22] = toNumbers(scale);
        return new _Point(x22, y3);
      }
      static parsePath(path) {
        var points = toNumbers(path);
        var len = points.length;
        var pathPoints = [];
        for (var i33 = 0; i33 < len; i33 += 2) {
          pathPoints.push(new _Point(points[i33], points[i33 + 1]));
        }
        return pathPoints;
      }
      angleTo(point) {
        return Math.atan2(point.y - this.y, point.x - this.x);
      }
      applyTransform(transform) {
        var {
          x: x22,
          y: y3
        } = this;
        var xp = x22 * transform[0] + y3 * transform[2] + transform[4];
        var yp = x22 * transform[1] + y3 * transform[3] + transform[5];
        this.x = xp;
        this.y = yp;
      }
    };
    Mouse = class {
      static {
        __name(this, "Mouse");
      }
      static {
        __name2(this, "Mouse");
      }
      constructor(screen) {
        this.screen = screen;
        this.working = false;
        this.events = [];
        this.eventElements = [];
        this.onClick = this.onClick.bind(this);
        this.onMouseMove = this.onMouseMove.bind(this);
      }
      isWorking() {
        return this.working;
      }
      start() {
        if (this.working) {
          return;
        }
        var {
          screen,
          onClick,
          onMouseMove
        } = this;
        var canvas = screen.ctx.canvas;
        canvas.onclick = onClick;
        canvas.onmousemove = onMouseMove;
        this.working = true;
      }
      stop() {
        if (!this.working) {
          return;
        }
        var canvas = this.screen.ctx.canvas;
        this.working = false;
        canvas.onclick = null;
        canvas.onmousemove = null;
      }
      hasEvents() {
        return this.working && this.events.length > 0;
      }
      runEvents() {
        if (!this.working) {
          return;
        }
        var {
          screen: document2,
          events,
          eventElements
        } = this;
        var {
          style
        } = document2.ctx.canvas;
        if (style) {
          style.cursor = "";
        }
        events.forEach((_ref, i33) => {
          var {
            run
          } = _ref;
          var element = eventElements[i33];
          while (element) {
            run(element);
            element = element.parent;
          }
        });
        this.events = [];
        this.eventElements = [];
      }
      checkPath(element, ctx) {
        if (!this.working || !ctx) {
          return;
        }
        var {
          events,
          eventElements
        } = this;
        events.forEach((_ref2, i33) => {
          var {
            x: x22,
            y: y3
          } = _ref2;
          if (!eventElements[i33] && ctx.isPointInPath && ctx.isPointInPath(x22, y3)) {
            eventElements[i33] = element;
          }
        });
      }
      checkBoundingBox(element, boundingBox) {
        if (!this.working || !boundingBox) {
          return;
        }
        var {
          events,
          eventElements
        } = this;
        events.forEach((_ref3, i33) => {
          var {
            x: x22,
            y: y3
          } = _ref3;
          if (!eventElements[i33] && boundingBox.isPointInBox(x22, y3)) {
            eventElements[i33] = element;
          }
        });
      }
      mapXY(x22, y3) {
        var {
          window: window2,
          ctx
        } = this.screen;
        var point = new Point(x22, y3);
        var element = ctx.canvas;
        while (element) {
          point.x -= element.offsetLeft;
          point.y -= element.offsetTop;
          element = element.offsetParent;
        }
        if (window2.scrollX) {
          point.x += window2.scrollX;
        }
        if (window2.scrollY) {
          point.y += window2.scrollY;
        }
        return point;
      }
      onClick(event) {
        var {
          x: x22,
          y: y3
        } = this.mapXY(event.clientX, event.clientY);
        this.events.push({
          type: "onclick",
          x: x22,
          y: y3,
          run(eventTarget) {
            if (eventTarget.onClick) {
              eventTarget.onClick();
            }
          }
        });
      }
      onMouseMove(event) {
        var {
          x: x22,
          y: y3
        } = this.mapXY(event.clientX, event.clientY);
        this.events.push({
          type: "onmousemove",
          x: x22,
          y: y3,
          run(eventTarget) {
            if (eventTarget.onMouseMove) {
              eventTarget.onMouseMove();
            }
          }
        });
      }
    };
    defaultWindow = typeof window !== "undefined" ? window : null;
    defaultFetch$1 = typeof fetch !== "undefined" ? fetch.bind(void 0) : null;
    Screen = class {
      static {
        __name(this, "Screen");
      }
      static {
        __name2(this, "Screen");
      }
      constructor(ctx) {
        var {
          fetch: fetch2 = defaultFetch$1,
          window: window2 = defaultWindow
        } = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
        this.ctx = ctx;
        this.FRAMERATE = 30;
        this.MAX_VIRTUAL_PIXELS = 3e4;
        this.CLIENT_WIDTH = 800;
        this.CLIENT_HEIGHT = 600;
        this.viewPort = new ViewPort();
        this.mouse = new Mouse(this);
        this.animations = [];
        this.waits = [];
        this.frameDuration = 0;
        this.isReadyLock = false;
        this.isFirstRender = true;
        this.intervalId = null;
        this.window = window2;
        this.fetch = fetch2;
      }
      wait(checker) {
        this.waits.push(checker);
      }
      ready() {
        if (!this.readyPromise) {
          return Promise.resolve();
        }
        return this.readyPromise;
      }
      isReady() {
        if (this.isReadyLock) {
          return true;
        }
        var isReadyLock = this.waits.every((_3) => _3());
        if (isReadyLock) {
          this.waits = [];
          if (this.resolveReady) {
            this.resolveReady();
          }
        }
        this.isReadyLock = isReadyLock;
        return isReadyLock;
      }
      setDefaults(ctx) {
        ctx.strokeStyle = "rgba(0,0,0,0)";
        ctx.lineCap = "butt";
        ctx.lineJoin = "miter";
        ctx.miterLimit = 4;
      }
      setViewBox(_ref) {
        var {
          document: document2,
          ctx,
          aspectRatio,
          width,
          desiredWidth,
          height,
          desiredHeight,
          minX = 0,
          minY = 0,
          refX,
          refY,
          clip = false,
          clipX = 0,
          clipY = 0
        } = _ref;
        var cleanAspectRatio = compressSpaces(aspectRatio).replace(/^defer\s/, "");
        var [aspectRatioAlign, aspectRatioMeetOrSlice] = cleanAspectRatio.split(" ");
        var align = aspectRatioAlign || "xMidYMid";
        var meetOrSlice = aspectRatioMeetOrSlice || "meet";
        var scaleX = width / desiredWidth;
        var scaleY = height / desiredHeight;
        var scaleMin = Math.min(scaleX, scaleY);
        var scaleMax = Math.max(scaleX, scaleY);
        var finalDesiredWidth = desiredWidth;
        var finalDesiredHeight = desiredHeight;
        if (meetOrSlice === "meet") {
          finalDesiredWidth *= scaleMin;
          finalDesiredHeight *= scaleMin;
        }
        if (meetOrSlice === "slice") {
          finalDesiredWidth *= scaleMax;
          finalDesiredHeight *= scaleMax;
        }
        var refXProp = new Property(document2, "refX", refX);
        var refYProp = new Property(document2, "refY", refY);
        var hasRefs = refXProp.hasValue() && refYProp.hasValue();
        if (hasRefs) {
          ctx.translate(-scaleMin * refXProp.getPixels("x"), -scaleMin * refYProp.getPixels("y"));
        }
        if (clip) {
          var scaledClipX = scaleMin * clipX;
          var scaledClipY = scaleMin * clipY;
          ctx.beginPath();
          ctx.moveTo(scaledClipX, scaledClipY);
          ctx.lineTo(width, scaledClipY);
          ctx.lineTo(width, height);
          ctx.lineTo(scaledClipX, height);
          ctx.closePath();
          ctx.clip();
        }
        if (!hasRefs) {
          var isMeetMinY = meetOrSlice === "meet" && scaleMin === scaleY;
          var isSliceMaxY = meetOrSlice === "slice" && scaleMax === scaleY;
          var isMeetMinX = meetOrSlice === "meet" && scaleMin === scaleX;
          var isSliceMaxX = meetOrSlice === "slice" && scaleMax === scaleX;
          if (align.startsWith("xMid") && (isMeetMinY || isSliceMaxY)) {
            ctx.translate(width / 2 - finalDesiredWidth / 2, 0);
          }
          if (align.endsWith("YMid") && (isMeetMinX || isSliceMaxX)) {
            ctx.translate(0, height / 2 - finalDesiredHeight / 2);
          }
          if (align.startsWith("xMax") && (isMeetMinY || isSliceMaxY)) {
            ctx.translate(width - finalDesiredWidth, 0);
          }
          if (align.endsWith("YMax") && (isMeetMinX || isSliceMaxX)) {
            ctx.translate(0, height - finalDesiredHeight);
          }
        }
        switch (true) {
          case align === "none":
            ctx.scale(scaleX, scaleY);
            break;
          case meetOrSlice === "meet":
            ctx.scale(scaleMin, scaleMin);
            break;
          case meetOrSlice === "slice":
            ctx.scale(scaleMax, scaleMax);
            break;
        }
        ctx.translate(-minX, -minY);
      }
      start(element) {
        var {
          enableRedraw = false,
          ignoreMouse = false,
          ignoreAnimation = false,
          ignoreDimensions = false,
          ignoreClear = false,
          forceRedraw,
          scaleWidth,
          scaleHeight,
          offsetX,
          offsetY
        } = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
        var {
          FRAMERATE,
          mouse
        } = this;
        var frameDuration = 1e3 / FRAMERATE;
        this.frameDuration = frameDuration;
        this.readyPromise = new Promise((resolve) => {
          this.resolveReady = resolve;
        });
        if (this.isReady()) {
          this.render(element, ignoreDimensions, ignoreClear, scaleWidth, scaleHeight, offsetX, offsetY);
        }
        if (!enableRedraw) {
          return;
        }
        var now = Date.now();
        var then = now;
        var delta = 0;
        var tick = /* @__PURE__ */ __name2(() => {
          now = Date.now();
          delta = now - then;
          if (delta >= frameDuration) {
            then = now - delta % frameDuration;
            if (this.shouldUpdate(ignoreAnimation, forceRedraw)) {
              this.render(element, ignoreDimensions, ignoreClear, scaleWidth, scaleHeight, offsetX, offsetY);
              mouse.runEvents();
            }
          }
          this.intervalId = (0, import_raf.default)(tick);
        }, "tick");
        if (!ignoreMouse) {
          mouse.start();
        }
        this.intervalId = (0, import_raf.default)(tick);
      }
      stop() {
        if (this.intervalId) {
          import_raf.default.cancel(this.intervalId);
          this.intervalId = null;
        }
        this.mouse.stop();
      }
      shouldUpdate(ignoreAnimation, forceRedraw) {
        if (!ignoreAnimation) {
          var {
            frameDuration
          } = this;
          var shouldUpdate = this.animations.reduce((shouldUpdate2, animation) => animation.update(frameDuration) || shouldUpdate2, false);
          if (shouldUpdate) {
            return true;
          }
        }
        if (typeof forceRedraw === "function" && forceRedraw()) {
          return true;
        }
        if (!this.isReadyLock && this.isReady()) {
          return true;
        }
        if (this.mouse.hasEvents()) {
          return true;
        }
        return false;
      }
      render(element, ignoreDimensions, ignoreClear, scaleWidth, scaleHeight, offsetX, offsetY) {
        var {
          CLIENT_WIDTH,
          CLIENT_HEIGHT,
          viewPort,
          ctx,
          isFirstRender
        } = this;
        var canvas = ctx.canvas;
        viewPort.clear();
        if (canvas.width && canvas.height) {
          viewPort.setCurrent(canvas.width, canvas.height);
        } else {
          viewPort.setCurrent(CLIENT_WIDTH, CLIENT_HEIGHT);
        }
        var widthStyle = element.getStyle("width");
        var heightStyle = element.getStyle("height");
        if (!ignoreDimensions && (isFirstRender || typeof scaleWidth !== "number" && typeof scaleHeight !== "number")) {
          if (widthStyle.hasValue()) {
            canvas.width = widthStyle.getPixels("x");
            if (canvas.style) {
              canvas.style.width = "".concat(canvas.width, "px");
            }
          }
          if (heightStyle.hasValue()) {
            canvas.height = heightStyle.getPixels("y");
            if (canvas.style) {
              canvas.style.height = "".concat(canvas.height, "px");
            }
          }
        }
        var cWidth = canvas.clientWidth || canvas.width;
        var cHeight = canvas.clientHeight || canvas.height;
        if (ignoreDimensions && widthStyle.hasValue() && heightStyle.hasValue()) {
          cWidth = widthStyle.getPixels("x");
          cHeight = heightStyle.getPixels("y");
        }
        viewPort.setCurrent(cWidth, cHeight);
        if (typeof offsetX === "number") {
          element.getAttribute("x", true).setValue(offsetX);
        }
        if (typeof offsetY === "number") {
          element.getAttribute("y", true).setValue(offsetY);
        }
        if (typeof scaleWidth === "number" || typeof scaleHeight === "number") {
          var viewBox = toNumbers(element.getAttribute("viewBox").getString());
          var xRatio = 0;
          var yRatio = 0;
          if (typeof scaleWidth === "number") {
            var _widthStyle = element.getStyle("width");
            if (_widthStyle.hasValue()) {
              xRatio = _widthStyle.getPixels("x") / scaleWidth;
            } else if (!isNaN(viewBox[2])) {
              xRatio = viewBox[2] / scaleWidth;
            }
          }
          if (typeof scaleHeight === "number") {
            var _heightStyle = element.getStyle("height");
            if (_heightStyle.hasValue()) {
              yRatio = _heightStyle.getPixels("y") / scaleHeight;
            } else if (!isNaN(viewBox[3])) {
              yRatio = viewBox[3] / scaleHeight;
            }
          }
          if (!xRatio) {
            xRatio = yRatio;
          }
          if (!yRatio) {
            yRatio = xRatio;
          }
          element.getAttribute("width", true).setValue(scaleWidth);
          element.getAttribute("height", true).setValue(scaleHeight);
          var transformStyle = element.getStyle("transform", true, true);
          transformStyle.setValue("".concat(transformStyle.getString(), " scale(").concat(1 / xRatio, ", ").concat(1 / yRatio, ")"));
        }
        if (!ignoreClear) {
          ctx.clearRect(0, 0, cWidth, cHeight);
        }
        element.render(ctx);
        if (isFirstRender) {
          this.isFirstRender = false;
        }
      }
    };
    Screen.defaultWindow = defaultWindow;
    Screen.defaultFetch = defaultFetch$1;
    ({
      defaultFetch
    } = Screen);
    DefaultDOMParser = typeof DOMParser !== "undefined" ? DOMParser : null;
    Parser = class {
      static {
        __name(this, "Parser");
      }
      static {
        __name2(this, "Parser");
      }
      constructor() {
        var {
          fetch: fetch2 = defaultFetch,
          DOMParser: DOMParser2 = DefaultDOMParser
        } = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
        this.fetch = fetch2;
        this.DOMParser = DOMParser2;
      }
      parse(resource) {
        var _this = this;
        return _asyncToGenerator(function* () {
          if (resource.startsWith("<")) {
            return _this.parseFromString(resource);
          }
          return _this.load(resource);
        })();
      }
      parseFromString(xml2) {
        var parser = new this.DOMParser();
        try {
          return this.checkDocument(parser.parseFromString(xml2, "image/svg+xml"));
        } catch (err2) {
          return this.checkDocument(parser.parseFromString(xml2, "text/xml"));
        }
      }
      checkDocument(document2) {
        var parserError = document2.getElementsByTagName("parsererror")[0];
        if (parserError) {
          throw new Error(parserError.textContent);
        }
        return document2;
      }
      load(url) {
        var _this2 = this;
        return _asyncToGenerator(function* () {
          var response = yield _this2.fetch(url);
          var xml2 = yield response.text();
          return _this2.parseFromString(xml2);
        })();
      }
    };
    Translate = class {
      static {
        __name(this, "Translate");
      }
      static {
        __name2(this, "Translate");
      }
      constructor(_3, point) {
        this.type = "translate";
        this.point = null;
        this.point = Point.parse(point);
      }
      apply(ctx) {
        var {
          x: x22,
          y: y3
        } = this.point;
        ctx.translate(x22 || 0, y3 || 0);
      }
      unapply(ctx) {
        var {
          x: x22,
          y: y3
        } = this.point;
        ctx.translate(-1 * x22 || 0, -1 * y3 || 0);
      }
      applyToPoint(point) {
        var {
          x: x22,
          y: y3
        } = this.point;
        point.applyTransform([1, 0, 0, 1, x22 || 0, y3 || 0]);
      }
    };
    Rotate = class {
      static {
        __name(this, "Rotate");
      }
      static {
        __name2(this, "Rotate");
      }
      constructor(document2, rotate, transformOrigin) {
        this.type = "rotate";
        this.angle = null;
        this.originX = null;
        this.originY = null;
        this.cx = 0;
        this.cy = 0;
        var numbers = toNumbers(rotate);
        this.angle = new Property(document2, "angle", numbers[0]);
        this.originX = transformOrigin[0];
        this.originY = transformOrigin[1];
        this.cx = numbers[1] || 0;
        this.cy = numbers[2] || 0;
      }
      apply(ctx) {
        var {
          cx,
          cy,
          originX,
          originY,
          angle
        } = this;
        var tx = cx + originX.getPixels("x");
        var ty = cy + originY.getPixels("y");
        ctx.translate(tx, ty);
        ctx.rotate(angle.getRadians());
        ctx.translate(-tx, -ty);
      }
      unapply(ctx) {
        var {
          cx,
          cy,
          originX,
          originY,
          angle
        } = this;
        var tx = cx + originX.getPixels("x");
        var ty = cy + originY.getPixels("y");
        ctx.translate(tx, ty);
        ctx.rotate(-1 * angle.getRadians());
        ctx.translate(-tx, -ty);
      }
      applyToPoint(point) {
        var {
          cx,
          cy,
          angle
        } = this;
        var rad = angle.getRadians();
        point.applyTransform([
          1,
          0,
          0,
          1,
          cx || 0,
          cy || 0
          // this.p.y
        ]);
        point.applyTransform([Math.cos(rad), Math.sin(rad), -Math.sin(rad), Math.cos(rad), 0, 0]);
        point.applyTransform([
          1,
          0,
          0,
          1,
          -cx || 0,
          -cy || 0
          // -this.p.y
        ]);
      }
    };
    Scale = class {
      static {
        __name(this, "Scale");
      }
      static {
        __name2(this, "Scale");
      }
      constructor(_3, scale, transformOrigin) {
        this.type = "scale";
        this.scale = null;
        this.originX = null;
        this.originY = null;
        var scaleSize = Point.parseScale(scale);
        if (scaleSize.x === 0 || scaleSize.y === 0) {
          scaleSize.x = PSEUDO_ZERO;
          scaleSize.y = PSEUDO_ZERO;
        }
        this.scale = scaleSize;
        this.originX = transformOrigin[0];
        this.originY = transformOrigin[1];
      }
      apply(ctx) {
        var {
          scale: {
            x: x22,
            y: y3
          },
          originX,
          originY
        } = this;
        var tx = originX.getPixels("x");
        var ty = originY.getPixels("y");
        ctx.translate(tx, ty);
        ctx.scale(x22, y3 || x22);
        ctx.translate(-tx, -ty);
      }
      unapply(ctx) {
        var {
          scale: {
            x: x22,
            y: y3
          },
          originX,
          originY
        } = this;
        var tx = originX.getPixels("x");
        var ty = originY.getPixels("y");
        ctx.translate(tx, ty);
        ctx.scale(1 / x22, 1 / y3 || x22);
        ctx.translate(-tx, -ty);
      }
      applyToPoint(point) {
        var {
          x: x22,
          y: y3
        } = this.scale;
        point.applyTransform([x22 || 0, 0, 0, y3 || 0, 0, 0]);
      }
    };
    Matrix = class {
      static {
        __name(this, "Matrix");
      }
      static {
        __name2(this, "Matrix");
      }
      constructor(_3, matrix, transformOrigin) {
        this.type = "matrix";
        this.matrix = [];
        this.originX = null;
        this.originY = null;
        this.matrix = toNumbers(matrix);
        this.originX = transformOrigin[0];
        this.originY = transformOrigin[1];
      }
      apply(ctx) {
        var {
          originX,
          originY,
          matrix
        } = this;
        var tx = originX.getPixels("x");
        var ty = originY.getPixels("y");
        ctx.translate(tx, ty);
        ctx.transform(matrix[0], matrix[1], matrix[2], matrix[3], matrix[4], matrix[5]);
        ctx.translate(-tx, -ty);
      }
      unapply(ctx) {
        var {
          originX,
          originY,
          matrix
        } = this;
        var a3 = matrix[0];
        var b2 = matrix[2];
        var c4 = matrix[4];
        var d2 = matrix[1];
        var e2 = matrix[3];
        var f3 = matrix[5];
        var g2 = 0;
        var h3 = 0;
        var i33 = 1;
        var det = 1 / (a3 * (e2 * i33 - f3 * h3) - b2 * (d2 * i33 - f3 * g2) + c4 * (d2 * h3 - e2 * g2));
        var tx = originX.getPixels("x");
        var ty = originY.getPixels("y");
        ctx.translate(tx, ty);
        ctx.transform(det * (e2 * i33 - f3 * h3), det * (f3 * g2 - d2 * i33), det * (c4 * h3 - b2 * i33), det * (a3 * i33 - c4 * g2), det * (b2 * f3 - c4 * e2), det * (c4 * d2 - a3 * f3));
        ctx.translate(-tx, -ty);
      }
      applyToPoint(point) {
        point.applyTransform(this.matrix);
      }
    };
    Skew = class extends Matrix {
      static {
        __name(this, "Skew");
      }
      static {
        __name2(this, "Skew");
      }
      constructor(document2, skew, transformOrigin) {
        super(document2, skew, transformOrigin);
        this.type = "skew";
        this.angle = null;
        this.angle = new Property(document2, "angle", skew);
      }
    };
    SkewX = class extends Skew {
      static {
        __name(this, "SkewX");
      }
      static {
        __name2(this, "SkewX");
      }
      constructor(document2, skew, transformOrigin) {
        super(document2, skew, transformOrigin);
        this.type = "skewX";
        this.matrix = [1, 0, Math.tan(this.angle.getRadians()), 1, 0, 0];
      }
    };
    SkewY = class extends Skew {
      static {
        __name(this, "SkewY");
      }
      static {
        __name2(this, "SkewY");
      }
      constructor(document2, skew, transformOrigin) {
        super(document2, skew, transformOrigin);
        this.type = "skewY";
        this.matrix = [1, Math.tan(this.angle.getRadians()), 0, 1, 0, 0];
      }
    };
    __name2(parseTransforms, "parseTransforms");
    __name2(parseTransform, "parseTransform");
    Transform = class _Transform {
      static {
        __name(this, "_Transform");
      }
      static {
        __name2(this, "Transform");
      }
      constructor(document2, transform, transformOrigin) {
        this.document = document2;
        this.transforms = [];
        var data = parseTransforms(transform);
        data.forEach((transform2) => {
          if (transform2 === "none") {
            return;
          }
          var [type, value] = parseTransform(transform2);
          var TransformType = _Transform.transformTypes[type];
          if (typeof TransformType !== "undefined") {
            this.transforms.push(new TransformType(this.document, value, transformOrigin));
          }
        });
      }
      static fromElement(document2, element) {
        var transformStyle = element.getStyle("transform", false, true);
        var [transformOriginXProperty, transformOriginYProperty = transformOriginXProperty] = element.getStyle("transform-origin", false, true).split();
        var transformOrigin = [transformOriginXProperty, transformOriginYProperty];
        if (transformStyle.hasValue()) {
          return new _Transform(document2, transformStyle.getString(), transformOrigin);
        }
        return null;
      }
      apply(ctx) {
        var {
          transforms
        } = this;
        var len = transforms.length;
        for (var i33 = 0; i33 < len; i33++) {
          transforms[i33].apply(ctx);
        }
      }
      unapply(ctx) {
        var {
          transforms
        } = this;
        var len = transforms.length;
        for (var i33 = len - 1; i33 >= 0; i33--) {
          transforms[i33].unapply(ctx);
        }
      }
      // TODO: applyToPoint unused ... remove?
      applyToPoint(point) {
        var {
          transforms
        } = this;
        var len = transforms.length;
        for (var i33 = 0; i33 < len; i33++) {
          transforms[i33].applyToPoint(point);
        }
      }
    };
    Transform.transformTypes = {
      translate: Translate,
      rotate: Rotate,
      scale: Scale,
      matrix: Matrix,
      skewX: SkewX,
      skewY: SkewY
    };
    Element = class _Element {
      static {
        __name(this, "_Element");
      }
      static {
        __name2(this, "Element");
      }
      constructor(document2, node2) {
        var captureTextNodes = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : false;
        this.document = document2;
        this.node = node2;
        this.captureTextNodes = captureTextNodes;
        this.attributes = /* @__PURE__ */ Object.create(null);
        this.styles = /* @__PURE__ */ Object.create(null);
        this.stylesSpecificity = /* @__PURE__ */ Object.create(null);
        this.animationFrozen = false;
        this.animationFrozenValue = "";
        this.parent = null;
        this.children = [];
        if (!node2 || node2.nodeType !== 1) {
          return;
        }
        Array.from(node2.attributes).forEach((attribute) => {
          var nodeName = normalizeAttributeName(attribute.nodeName);
          this.attributes[nodeName] = new Property(document2, nodeName, attribute.value);
        });
        this.addStylesFromStyleDefinition();
        if (this.getAttribute("style").hasValue()) {
          var styles = this.getAttribute("style").getString().split(";").map((_3) => _3.trim());
          styles.forEach((style) => {
            if (!style) {
              return;
            }
            var [name, value] = style.split(":").map((_3) => _3.trim());
            this.styles[name] = new Property(document2, name, value);
          });
        }
        var {
          definitions
        } = document2;
        var id = this.getAttribute("id");
        if (id.hasValue()) {
          if (!definitions[id.getString()]) {
            definitions[id.getString()] = this;
          }
        }
        Array.from(node2.childNodes).forEach((childNode) => {
          if (childNode.nodeType === 1) {
            this.addChild(childNode);
          } else if (captureTextNodes && (childNode.nodeType === 3 || childNode.nodeType === 4)) {
            var textNode = document2.createTextNode(childNode);
            if (textNode.getText().length > 0) {
              this.addChild(textNode);
            }
          }
        });
      }
      getAttribute(name) {
        var createIfNotExists = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : false;
        var attr = this.attributes[name];
        if (!attr && createIfNotExists) {
          var _attr = new Property(this.document, name, "");
          this.attributes[name] = _attr;
          return _attr;
        }
        return attr || Property.empty(this.document);
      }
      getHrefAttribute() {
        for (var key in this.attributes) {
          if (key === "href" || key.endsWith(":href")) {
            return this.attributes[key];
          }
        }
        return Property.empty(this.document);
      }
      getStyle(name) {
        var createIfNotExists = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : false;
        var skipAncestors = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : false;
        var style = this.styles[name];
        if (style) {
          return style;
        }
        var attr = this.getAttribute(name);
        if (attr !== null && attr !== void 0 && attr.hasValue()) {
          this.styles[name] = attr;
          return attr;
        }
        if (!skipAncestors) {
          var {
            parent
          } = this;
          if (parent) {
            var parentStyle = parent.getStyle(name);
            if (parentStyle !== null && parentStyle !== void 0 && parentStyle.hasValue()) {
              return parentStyle;
            }
          }
        }
        if (createIfNotExists) {
          var _style = new Property(this.document, name, "");
          this.styles[name] = _style;
          return _style;
        }
        return style || Property.empty(this.document);
      }
      render(ctx) {
        if (this.getStyle("display").getString() === "none" || this.getStyle("visibility").getString() === "hidden") {
          return;
        }
        ctx.save();
        if (this.getStyle("mask").hasValue()) {
          var mask = this.getStyle("mask").getDefinition();
          if (mask) {
            this.applyEffects(ctx);
            mask.apply(ctx, this);
          }
        } else if (this.getStyle("filter").getValue("none") !== "none") {
          var filter = this.getStyle("filter").getDefinition();
          if (filter) {
            this.applyEffects(ctx);
            filter.apply(ctx, this);
          }
        } else {
          this.setContext(ctx);
          this.renderChildren(ctx);
          this.clearContext(ctx);
        }
        ctx.restore();
      }
      setContext(_3) {
      }
      applyEffects(ctx) {
        var transform = Transform.fromElement(this.document, this);
        if (transform) {
          transform.apply(ctx);
        }
        var clipPathStyleProp = this.getStyle("clip-path", false, true);
        if (clipPathStyleProp.hasValue()) {
          var clip = clipPathStyleProp.getDefinition();
          if (clip) {
            clip.apply(ctx);
          }
        }
      }
      clearContext(_3) {
      }
      renderChildren(ctx) {
        this.children.forEach((child) => {
          child.render(ctx);
        });
      }
      addChild(childNode) {
        var child = childNode instanceof _Element ? childNode : this.document.createElement(childNode);
        child.parent = this;
        if (!_Element.ignoreChildTypes.includes(child.type)) {
          this.children.push(child);
        }
      }
      matchesSelector(selector) {
        var _node$getAttribute;
        var {
          node: node2
        } = this;
        if (typeof node2.matches === "function") {
          return node2.matches(selector);
        }
        var styleClasses = (_node$getAttribute = node2.getAttribute) === null || _node$getAttribute === void 0 ? void 0 : _node$getAttribute.call(node2, "class");
        if (!styleClasses || styleClasses === "") {
          return false;
        }
        return styleClasses.split(" ").some((styleClass) => ".".concat(styleClass) === selector);
      }
      addStylesFromStyleDefinition() {
        var {
          styles,
          stylesSpecificity
        } = this.document;
        for (var selector in styles) {
          if (!selector.startsWith("@") && this.matchesSelector(selector)) {
            var style = styles[selector];
            var specificity = stylesSpecificity[selector];
            if (style) {
              for (var name in style) {
                var existingSpecificity = this.stylesSpecificity[name];
                if (typeof existingSpecificity === "undefined") {
                  existingSpecificity = "000";
                }
                if (specificity >= existingSpecificity) {
                  this.styles[name] = style[name];
                  this.stylesSpecificity[name] = specificity;
                }
              }
            }
          }
        }
      }
      removeStyles(element, ignoreStyles) {
        var toRestore = ignoreStyles.reduce((toRestore2, name) => {
          var styleProp = element.getStyle(name);
          if (!styleProp.hasValue()) {
            return toRestore2;
          }
          var value = styleProp.getString();
          styleProp.setValue("");
          return [...toRestore2, [name, value]];
        }, []);
        return toRestore;
      }
      restoreStyles(element, styles) {
        styles.forEach((_ref) => {
          var [name, value] = _ref;
          element.getStyle(name, true).setValue(value);
        });
      }
      isFirstChild() {
        var _this$parent;
        return ((_this$parent = this.parent) === null || _this$parent === void 0 ? void 0 : _this$parent.children.indexOf(this)) === 0;
      }
    };
    Element.ignoreChildTypes = ["title"];
    UnknownElement = class extends Element {
      static {
        __name(this, "UnknownElement");
      }
      static {
        __name2(this, "UnknownElement");
      }
      constructor(document2, node2, captureTextNodes) {
        super(document2, node2, captureTextNodes);
      }
    };
    __name2(wrapFontFamily, "wrapFontFamily");
    __name2(prepareFontFamily, "prepareFontFamily");
    __name2(prepareFontStyle, "prepareFontStyle");
    __name2(prepareFontWeight, "prepareFontWeight");
    Font = class _Font {
      static {
        __name(this, "_Font");
      }
      static {
        __name2(this, "Font");
      }
      constructor(fontStyle, fontVariant, fontWeight, fontSize, fontFamily, inherit) {
        var inheritFont = inherit ? typeof inherit === "string" ? _Font.parse(inherit) : inherit : {};
        this.fontFamily = fontFamily || inheritFont.fontFamily;
        this.fontSize = fontSize || inheritFont.fontSize;
        this.fontStyle = fontStyle || inheritFont.fontStyle;
        this.fontWeight = fontWeight || inheritFont.fontWeight;
        this.fontVariant = fontVariant || inheritFont.fontVariant;
      }
      static parse() {
        var font = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : "";
        var inherit = arguments.length > 1 ? arguments[1] : void 0;
        var fontStyle = "";
        var fontVariant = "";
        var fontWeight = "";
        var fontSize = "";
        var fontFamily = "";
        var parts = compressSpaces(font).trim().split(" ");
        var set = {
          fontSize: false,
          fontStyle: false,
          fontWeight: false,
          fontVariant: false
        };
        parts.forEach((part) => {
          switch (true) {
            case (!set.fontStyle && _Font.styles.includes(part)):
              if (part !== "inherit") {
                fontStyle = part;
              }
              set.fontStyle = true;
              break;
            case (!set.fontVariant && _Font.variants.includes(part)):
              if (part !== "inherit") {
                fontVariant = part;
              }
              set.fontStyle = true;
              set.fontVariant = true;
              break;
            case (!set.fontWeight && _Font.weights.includes(part)):
              if (part !== "inherit") {
                fontWeight = part;
              }
              set.fontStyle = true;
              set.fontVariant = true;
              set.fontWeight = true;
              break;
            case !set.fontSize:
              if (part !== "inherit") {
                [fontSize] = part.split("/");
              }
              set.fontStyle = true;
              set.fontVariant = true;
              set.fontWeight = true;
              set.fontSize = true;
              break;
            default:
              if (part !== "inherit") {
                fontFamily += part;
              }
          }
        });
        return new _Font(fontStyle, fontVariant, fontWeight, fontSize, fontFamily, inherit);
      }
      toString() {
        return [
          prepareFontStyle(this.fontStyle),
          this.fontVariant,
          prepareFontWeight(this.fontWeight),
          this.fontSize,
          // Wrap fontFamily only on nodejs and only for canvas.ctx
          prepareFontFamily(this.fontFamily)
        ].join(" ").trim();
      }
    };
    Font.styles = "normal|italic|oblique|inherit";
    Font.variants = "normal|small-caps|inherit";
    Font.weights = "normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900|inherit";
    BoundingBox = class {
      static {
        __name(this, "BoundingBox");
      }
      static {
        __name2(this, "BoundingBox");
      }
      constructor() {
        var x1 = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : Number.NaN;
        var y1 = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : Number.NaN;
        var x22 = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : Number.NaN;
        var y22 = arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : Number.NaN;
        this.x1 = x1;
        this.y1 = y1;
        this.x2 = x22;
        this.y2 = y22;
        this.addPoint(x1, y1);
        this.addPoint(x22, y22);
      }
      get x() {
        return this.x1;
      }
      get y() {
        return this.y1;
      }
      get width() {
        return this.x2 - this.x1;
      }
      get height() {
        return this.y2 - this.y1;
      }
      addPoint(x22, y3) {
        if (typeof x22 !== "undefined") {
          if (isNaN(this.x1) || isNaN(this.x2)) {
            this.x1 = x22;
            this.x2 = x22;
          }
          if (x22 < this.x1) {
            this.x1 = x22;
          }
          if (x22 > this.x2) {
            this.x2 = x22;
          }
        }
        if (typeof y3 !== "undefined") {
          if (isNaN(this.y1) || isNaN(this.y2)) {
            this.y1 = y3;
            this.y2 = y3;
          }
          if (y3 < this.y1) {
            this.y1 = y3;
          }
          if (y3 > this.y2) {
            this.y2 = y3;
          }
        }
      }
      addX(x22) {
        this.addPoint(x22, null);
      }
      addY(y3) {
        this.addPoint(null, y3);
      }
      addBoundingBox(boundingBox) {
        if (!boundingBox) {
          return;
        }
        var {
          x1,
          y1,
          x2: x22,
          y2: y22
        } = boundingBox;
        this.addPoint(x1, y1);
        this.addPoint(x22, y22);
      }
      sumCubic(t3, p0, p1, p22, p3) {
        return Math.pow(1 - t3, 3) * p0 + 3 * Math.pow(1 - t3, 2) * t3 * p1 + 3 * (1 - t3) * Math.pow(t3, 2) * p22 + Math.pow(t3, 3) * p3;
      }
      bezierCurveAdd(forX, p0, p1, p22, p3) {
        var b2 = 6 * p0 - 12 * p1 + 6 * p22;
        var a3 = -3 * p0 + 9 * p1 - 9 * p22 + 3 * p3;
        var c4 = 3 * p1 - 3 * p0;
        if (a3 === 0) {
          if (b2 === 0) {
            return;
          }
          var t3 = -c4 / b2;
          if (0 < t3 && t3 < 1) {
            if (forX) {
              this.addX(this.sumCubic(t3, p0, p1, p22, p3));
            } else {
              this.addY(this.sumCubic(t3, p0, p1, p22, p3));
            }
          }
          return;
        }
        var b2ac = Math.pow(b2, 2) - 4 * c4 * a3;
        if (b2ac < 0) {
          return;
        }
        var t1 = (-b2 + Math.sqrt(b2ac)) / (2 * a3);
        if (0 < t1 && t1 < 1) {
          if (forX) {
            this.addX(this.sumCubic(t1, p0, p1, p22, p3));
          } else {
            this.addY(this.sumCubic(t1, p0, p1, p22, p3));
          }
        }
        var t22 = (-b2 - Math.sqrt(b2ac)) / (2 * a3);
        if (0 < t22 && t22 < 1) {
          if (forX) {
            this.addX(this.sumCubic(t22, p0, p1, p22, p3));
          } else {
            this.addY(this.sumCubic(t22, p0, p1, p22, p3));
          }
        }
      }
      // from http://blog.hackers-cafe.net/2009/06/how-to-calculate-bezier-curves-bounding.html
      addBezierCurve(p0x, p0y, p1x, p1y, p2x, p2y, p3x, p3y) {
        this.addPoint(p0x, p0y);
        this.addPoint(p3x, p3y);
        this.bezierCurveAdd(true, p0x, p1x, p2x, p3x);
        this.bezierCurveAdd(false, p0y, p1y, p2y, p3y);
      }
      addQuadraticCurve(p0x, p0y, p1x, p1y, p2x, p2y) {
        var cp1x = p0x + 2 / 3 * (p1x - p0x);
        var cp1y = p0y + 2 / 3 * (p1y - p0y);
        var cp2x = cp1x + 1 / 3 * (p2x - p0x);
        var cp2y = cp1y + 1 / 3 * (p2y - p0y);
        this.addBezierCurve(p0x, p0y, cp1x, cp2x, cp1y, cp2y, p2x, p2y);
      }
      isPointInBox(x22, y3) {
        var {
          x1,
          y1,
          x2: x222,
          y2: y22
        } = this;
        return x1 <= x22 && x22 <= x222 && y1 <= y3 && y3 <= y22;
      }
    };
    PathParser = class extends _ {
      static {
        __name(this, "PathParser");
      }
      static {
        __name2(this, "PathParser");
      }
      constructor(path) {
        super(path.replace(/([+\-.])\s+/gm, "$1").replace(/[^MmZzLlHhVvCcSsQqTtAae\d\s.,+-].*/g, ""));
        this.control = null;
        this.start = null;
        this.current = null;
        this.command = null;
        this.commands = this.commands;
        this.i = -1;
        this.previousCommand = null;
        this.points = [];
        this.angles = [];
      }
      reset() {
        this.i = -1;
        this.command = null;
        this.previousCommand = null;
        this.start = new Point(0, 0);
        this.control = new Point(0, 0);
        this.current = new Point(0, 0);
        this.points = [];
        this.angles = [];
      }
      isEnd() {
        var {
          i: i33,
          commands
        } = this;
        return i33 >= commands.length - 1;
      }
      next() {
        var command = this.commands[++this.i];
        this.previousCommand = this.command;
        this.command = command;
        return command;
      }
      getPoint() {
        var xProp = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : "x";
        var yProp = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : "y";
        var point = new Point(this.command[xProp], this.command[yProp]);
        return this.makeAbsolute(point);
      }
      getAsControlPoint(xProp, yProp) {
        var point = this.getPoint(xProp, yProp);
        this.control = point;
        return point;
      }
      getAsCurrentPoint(xProp, yProp) {
        var point = this.getPoint(xProp, yProp);
        this.current = point;
        return point;
      }
      getReflectedControlPoint() {
        var previousCommand = this.previousCommand.type;
        if (previousCommand !== _.CURVE_TO && previousCommand !== _.SMOOTH_CURVE_TO && previousCommand !== _.QUAD_TO && previousCommand !== _.SMOOTH_QUAD_TO) {
          return this.current;
        }
        var {
          current: {
            x: cx,
            y: cy
          },
          control: {
            x: ox,
            y: oy
          }
        } = this;
        var point = new Point(2 * cx - ox, 2 * cy - oy);
        return point;
      }
      makeAbsolute(point) {
        if (this.command.relative) {
          var {
            x: x22,
            y: y3
          } = this.current;
          point.x += x22;
          point.y += y3;
        }
        return point;
      }
      addMarker(point, from, priorTo) {
        var {
          points,
          angles
        } = this;
        if (priorTo && angles.length > 0 && !angles[angles.length - 1]) {
          angles[angles.length - 1] = points[points.length - 1].angleTo(priorTo);
        }
        this.addMarkerAngle(point, from ? from.angleTo(point) : null);
      }
      addMarkerAngle(point, angle) {
        this.points.push(point);
        this.angles.push(angle);
      }
      getMarkerPoints() {
        return this.points;
      }
      getMarkerAngles() {
        var {
          angles
        } = this;
        var len = angles.length;
        for (var i33 = 0; i33 < len; i33++) {
          if (!angles[i33]) {
            for (var j2 = i33 + 1; j2 < len; j2++) {
              if (angles[j2]) {
                angles[i33] = angles[j2];
                break;
              }
            }
          }
        }
        return angles;
      }
    };
    RenderedElement = class extends Element {
      static {
        __name(this, "RenderedElement");
      }
      static {
        __name2(this, "RenderedElement");
      }
      constructor() {
        super(...arguments);
        this.modifiedEmSizeStack = false;
      }
      calculateOpacity() {
        var opacity = 1;
        var element = this;
        while (element) {
          var opacityStyle = element.getStyle("opacity", false, true);
          if (opacityStyle.hasValue(true)) {
            opacity *= opacityStyle.getNumber();
          }
          element = element.parent;
        }
        return opacity;
      }
      setContext(ctx) {
        var fromMeasure = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : false;
        if (!fromMeasure) {
          var fillStyleProp = this.getStyle("fill");
          var fillOpacityStyleProp = this.getStyle("fill-opacity");
          var strokeStyleProp = this.getStyle("stroke");
          var strokeOpacityProp = this.getStyle("stroke-opacity");
          if (fillStyleProp.isUrlDefinition()) {
            var fillStyle = fillStyleProp.getFillStyleDefinition(this, fillOpacityStyleProp);
            if (fillStyle) {
              ctx.fillStyle = fillStyle;
            }
          } else if (fillStyleProp.hasValue()) {
            if (fillStyleProp.getString() === "currentColor") {
              fillStyleProp.setValue(this.getStyle("color").getColor());
            }
            var _fillStyle = fillStyleProp.getColor();
            if (_fillStyle !== "inherit") {
              ctx.fillStyle = _fillStyle === "none" ? "rgba(0,0,0,0)" : _fillStyle;
            }
          }
          if (fillOpacityStyleProp.hasValue()) {
            var _fillStyle2 = new Property(this.document, "fill", ctx.fillStyle).addOpacity(fillOpacityStyleProp).getColor();
            ctx.fillStyle = _fillStyle2;
          }
          if (strokeStyleProp.isUrlDefinition()) {
            var strokeStyle = strokeStyleProp.getFillStyleDefinition(this, strokeOpacityProp);
            if (strokeStyle) {
              ctx.strokeStyle = strokeStyle;
            }
          } else if (strokeStyleProp.hasValue()) {
            if (strokeStyleProp.getString() === "currentColor") {
              strokeStyleProp.setValue(this.getStyle("color").getColor());
            }
            var _strokeStyle = strokeStyleProp.getString();
            if (_strokeStyle !== "inherit") {
              ctx.strokeStyle = _strokeStyle === "none" ? "rgba(0,0,0,0)" : _strokeStyle;
            }
          }
          if (strokeOpacityProp.hasValue()) {
            var _strokeStyle2 = new Property(this.document, "stroke", ctx.strokeStyle).addOpacity(strokeOpacityProp).getString();
            ctx.strokeStyle = _strokeStyle2;
          }
          var strokeWidthStyleProp = this.getStyle("stroke-width");
          if (strokeWidthStyleProp.hasValue()) {
            var newLineWidth = strokeWidthStyleProp.getPixels();
            ctx.lineWidth = !newLineWidth ? PSEUDO_ZERO : newLineWidth;
          }
          var strokeLinecapStyleProp = this.getStyle("stroke-linecap");
          var strokeLinejoinStyleProp = this.getStyle("stroke-linejoin");
          var strokeMiterlimitProp = this.getStyle("stroke-miterlimit");
          var strokeDasharrayStyleProp = this.getStyle("stroke-dasharray");
          var strokeDashoffsetProp = this.getStyle("stroke-dashoffset");
          if (strokeLinecapStyleProp.hasValue()) {
            ctx.lineCap = strokeLinecapStyleProp.getString();
          }
          if (strokeLinejoinStyleProp.hasValue()) {
            ctx.lineJoin = strokeLinejoinStyleProp.getString();
          }
          if (strokeMiterlimitProp.hasValue()) {
            ctx.miterLimit = strokeMiterlimitProp.getNumber();
          }
          if (strokeDasharrayStyleProp.hasValue() && strokeDasharrayStyleProp.getString() !== "none") {
            var gaps = toNumbers(strokeDasharrayStyleProp.getString());
            if (typeof ctx.setLineDash !== "undefined") {
              ctx.setLineDash(gaps);
            } else if (typeof ctx.webkitLineDash !== "undefined") {
              ctx.webkitLineDash = gaps;
            } else if (typeof ctx.mozDash !== "undefined" && !(gaps.length === 1 && gaps[0] === 0)) {
              ctx.mozDash = gaps;
            }
            var offset = strokeDashoffsetProp.getPixels();
            if (typeof ctx.lineDashOffset !== "undefined") {
              ctx.lineDashOffset = offset;
            } else if (typeof ctx.webkitLineDashOffset !== "undefined") {
              ctx.webkitLineDashOffset = offset;
            } else if (typeof ctx.mozDashOffset !== "undefined") {
              ctx.mozDashOffset = offset;
            }
          }
        }
        this.modifiedEmSizeStack = false;
        if (typeof ctx.font !== "undefined") {
          var fontStyleProp = this.getStyle("font");
          var fontStyleStyleProp = this.getStyle("font-style");
          var fontVariantStyleProp = this.getStyle("font-variant");
          var fontWeightStyleProp = this.getStyle("font-weight");
          var fontSizeStyleProp = this.getStyle("font-size");
          var fontFamilyStyleProp = this.getStyle("font-family");
          var font = new Font(fontStyleStyleProp.getString(), fontVariantStyleProp.getString(), fontWeightStyleProp.getString(), fontSizeStyleProp.hasValue() ? "".concat(fontSizeStyleProp.getPixels(true), "px") : "", fontFamilyStyleProp.getString(), Font.parse(fontStyleProp.getString(), ctx.font));
          fontStyleStyleProp.setValue(font.fontStyle);
          fontVariantStyleProp.setValue(font.fontVariant);
          fontWeightStyleProp.setValue(font.fontWeight);
          fontSizeStyleProp.setValue(font.fontSize);
          fontFamilyStyleProp.setValue(font.fontFamily);
          ctx.font = font.toString();
          if (fontSizeStyleProp.isPixels()) {
            this.document.emSize = fontSizeStyleProp.getPixels();
            this.modifiedEmSizeStack = true;
          }
        }
        if (!fromMeasure) {
          this.applyEffects(ctx);
          ctx.globalAlpha = this.calculateOpacity();
        }
      }
      clearContext(ctx) {
        super.clearContext(ctx);
        if (this.modifiedEmSizeStack) {
          this.document.popEmSize();
        }
      }
    };
    PathElement = class _PathElement extends RenderedElement {
      static {
        __name(this, "_PathElement");
      }
      static {
        __name2(this, "PathElement");
      }
      constructor(document2, node2, captureTextNodes) {
        super(document2, node2, captureTextNodes);
        this.type = "path";
        this.pathParser = null;
        this.pathParser = new PathParser(this.getAttribute("d").getString());
      }
      path(ctx) {
        var {
          pathParser
        } = this;
        var boundingBox = new BoundingBox();
        pathParser.reset();
        if (ctx) {
          ctx.beginPath();
        }
        while (!pathParser.isEnd()) {
          switch (pathParser.next().type) {
            case PathParser.MOVE_TO:
              this.pathM(ctx, boundingBox);
              break;
            case PathParser.LINE_TO:
              this.pathL(ctx, boundingBox);
              break;
            case PathParser.HORIZ_LINE_TO:
              this.pathH(ctx, boundingBox);
              break;
            case PathParser.VERT_LINE_TO:
              this.pathV(ctx, boundingBox);
              break;
            case PathParser.CURVE_TO:
              this.pathC(ctx, boundingBox);
              break;
            case PathParser.SMOOTH_CURVE_TO:
              this.pathS(ctx, boundingBox);
              break;
            case PathParser.QUAD_TO:
              this.pathQ(ctx, boundingBox);
              break;
            case PathParser.SMOOTH_QUAD_TO:
              this.pathT(ctx, boundingBox);
              break;
            case PathParser.ARC:
              this.pathA(ctx, boundingBox);
              break;
            case PathParser.CLOSE_PATH:
              this.pathZ(ctx, boundingBox);
              break;
          }
        }
        return boundingBox;
      }
      getBoundingBox(_3) {
        return this.path();
      }
      getMarkers() {
        var {
          pathParser
        } = this;
        var points = pathParser.getMarkerPoints();
        var angles = pathParser.getMarkerAngles();
        var markers = points.map((point, i33) => [point, angles[i33]]);
        return markers;
      }
      renderChildren(ctx) {
        this.path(ctx);
        this.document.screen.mouse.checkPath(this, ctx);
        var fillRuleStyleProp = this.getStyle("fill-rule");
        if (ctx.fillStyle !== "") {
          if (fillRuleStyleProp.getString("inherit") !== "inherit") {
            ctx.fill(fillRuleStyleProp.getString());
          } else {
            ctx.fill();
          }
        }
        if (ctx.strokeStyle !== "") {
          if (this.getAttribute("vector-effect").getString() === "non-scaling-stroke") {
            ctx.save();
            ctx.setTransform(1, 0, 0, 1, 0, 0);
            ctx.stroke();
            ctx.restore();
          } else {
            ctx.stroke();
          }
        }
        var markers = this.getMarkers();
        if (markers) {
          var markersLastIndex = markers.length - 1;
          var markerStartStyleProp = this.getStyle("marker-start");
          var markerMidStyleProp = this.getStyle("marker-mid");
          var markerEndStyleProp = this.getStyle("marker-end");
          if (markerStartStyleProp.isUrlDefinition()) {
            var marker = markerStartStyleProp.getDefinition();
            var [point, angle] = markers[0];
            marker.render(ctx, point, angle);
          }
          if (markerMidStyleProp.isUrlDefinition()) {
            var _marker = markerMidStyleProp.getDefinition();
            for (var i33 = 1; i33 < markersLastIndex; i33++) {
              var [_point, _angle] = markers[i33];
              _marker.render(ctx, _point, _angle);
            }
          }
          if (markerEndStyleProp.isUrlDefinition()) {
            var _marker2 = markerEndStyleProp.getDefinition();
            var [_point2, _angle2] = markers[markersLastIndex];
            _marker2.render(ctx, _point2, _angle2);
          }
        }
      }
      static pathM(pathParser) {
        var point = pathParser.getAsCurrentPoint();
        pathParser.start = pathParser.current;
        return {
          point
        };
      }
      pathM(ctx, boundingBox) {
        var {
          pathParser
        } = this;
        var {
          point
        } = _PathElement.pathM(pathParser);
        var {
          x: x22,
          y: y3
        } = point;
        pathParser.addMarker(point);
        boundingBox.addPoint(x22, y3);
        if (ctx) {
          ctx.moveTo(x22, y3);
        }
      }
      static pathL(pathParser) {
        var {
          current
        } = pathParser;
        var point = pathParser.getAsCurrentPoint();
        return {
          current,
          point
        };
      }
      pathL(ctx, boundingBox) {
        var {
          pathParser
        } = this;
        var {
          current,
          point
        } = _PathElement.pathL(pathParser);
        var {
          x: x22,
          y: y3
        } = point;
        pathParser.addMarker(point, current);
        boundingBox.addPoint(x22, y3);
        if (ctx) {
          ctx.lineTo(x22, y3);
        }
      }
      static pathH(pathParser) {
        var {
          current,
          command
        } = pathParser;
        var point = new Point((command.relative ? current.x : 0) + command.x, current.y);
        pathParser.current = point;
        return {
          current,
          point
        };
      }
      pathH(ctx, boundingBox) {
        var {
          pathParser
        } = this;
        var {
          current,
          point
        } = _PathElement.pathH(pathParser);
        var {
          x: x22,
          y: y3
        } = point;
        pathParser.addMarker(point, current);
        boundingBox.addPoint(x22, y3);
        if (ctx) {
          ctx.lineTo(x22, y3);
        }
      }
      static pathV(pathParser) {
        var {
          current,
          command
        } = pathParser;
        var point = new Point(current.x, (command.relative ? current.y : 0) + command.y);
        pathParser.current = point;
        return {
          current,
          point
        };
      }
      pathV(ctx, boundingBox) {
        var {
          pathParser
        } = this;
        var {
          current,
          point
        } = _PathElement.pathV(pathParser);
        var {
          x: x22,
          y: y3
        } = point;
        pathParser.addMarker(point, current);
        boundingBox.addPoint(x22, y3);
        if (ctx) {
          ctx.lineTo(x22, y3);
        }
      }
      static pathC(pathParser) {
        var {
          current
        } = pathParser;
        var point = pathParser.getPoint("x1", "y1");
        var controlPoint = pathParser.getAsControlPoint("x2", "y2");
        var currentPoint = pathParser.getAsCurrentPoint();
        return {
          current,
          point,
          controlPoint,
          currentPoint
        };
      }
      pathC(ctx, boundingBox) {
        var {
          pathParser
        } = this;
        var {
          current,
          point,
          controlPoint,
          currentPoint
        } = _PathElement.pathC(pathParser);
        pathParser.addMarker(currentPoint, controlPoint, point);
        boundingBox.addBezierCurve(current.x, current.y, point.x, point.y, controlPoint.x, controlPoint.y, currentPoint.x, currentPoint.y);
        if (ctx) {
          ctx.bezierCurveTo(point.x, point.y, controlPoint.x, controlPoint.y, currentPoint.x, currentPoint.y);
        }
      }
      static pathS(pathParser) {
        var {
          current
        } = pathParser;
        var point = pathParser.getReflectedControlPoint();
        var controlPoint = pathParser.getAsControlPoint("x2", "y2");
        var currentPoint = pathParser.getAsCurrentPoint();
        return {
          current,
          point,
          controlPoint,
          currentPoint
        };
      }
      pathS(ctx, boundingBox) {
        var {
          pathParser
        } = this;
        var {
          current,
          point,
          controlPoint,
          currentPoint
        } = _PathElement.pathS(pathParser);
        pathParser.addMarker(currentPoint, controlPoint, point);
        boundingBox.addBezierCurve(current.x, current.y, point.x, point.y, controlPoint.x, controlPoint.y, currentPoint.x, currentPoint.y);
        if (ctx) {
          ctx.bezierCurveTo(point.x, point.y, controlPoint.x, controlPoint.y, currentPoint.x, currentPoint.y);
        }
      }
      static pathQ(pathParser) {
        var {
          current
        } = pathParser;
        var controlPoint = pathParser.getAsControlPoint("x1", "y1");
        var currentPoint = pathParser.getAsCurrentPoint();
        return {
          current,
          controlPoint,
          currentPoint
        };
      }
      pathQ(ctx, boundingBox) {
        var {
          pathParser
        } = this;
        var {
          current,
          controlPoint,
          currentPoint
        } = _PathElement.pathQ(pathParser);
        pathParser.addMarker(currentPoint, controlPoint, controlPoint);
        boundingBox.addQuadraticCurve(current.x, current.y, controlPoint.x, controlPoint.y, currentPoint.x, currentPoint.y);
        if (ctx) {
          ctx.quadraticCurveTo(controlPoint.x, controlPoint.y, currentPoint.x, currentPoint.y);
        }
      }
      static pathT(pathParser) {
        var {
          current
        } = pathParser;
        var controlPoint = pathParser.getReflectedControlPoint();
        pathParser.control = controlPoint;
        var currentPoint = pathParser.getAsCurrentPoint();
        return {
          current,
          controlPoint,
          currentPoint
        };
      }
      pathT(ctx, boundingBox) {
        var {
          pathParser
        } = this;
        var {
          current,
          controlPoint,
          currentPoint
        } = _PathElement.pathT(pathParser);
        pathParser.addMarker(currentPoint, controlPoint, controlPoint);
        boundingBox.addQuadraticCurve(current.x, current.y, controlPoint.x, controlPoint.y, currentPoint.x, currentPoint.y);
        if (ctx) {
          ctx.quadraticCurveTo(controlPoint.x, controlPoint.y, currentPoint.x, currentPoint.y);
        }
      }
      static pathA(pathParser) {
        var {
          current,
          command
        } = pathParser;
        var {
          rX,
          rY,
          xRot,
          lArcFlag,
          sweepFlag
        } = command;
        var xAxisRotation = xRot * (Math.PI / 180);
        var currentPoint = pathParser.getAsCurrentPoint();
        var currp = new Point(Math.cos(xAxisRotation) * (current.x - currentPoint.x) / 2 + Math.sin(xAxisRotation) * (current.y - currentPoint.y) / 2, -Math.sin(xAxisRotation) * (current.x - currentPoint.x) / 2 + Math.cos(xAxisRotation) * (current.y - currentPoint.y) / 2);
        var l3 = Math.pow(currp.x, 2) / Math.pow(rX, 2) + Math.pow(currp.y, 2) / Math.pow(rY, 2);
        if (l3 > 1) {
          rX *= Math.sqrt(l3);
          rY *= Math.sqrt(l3);
        }
        var s3 = (lArcFlag === sweepFlag ? -1 : 1) * Math.sqrt((Math.pow(rX, 2) * Math.pow(rY, 2) - Math.pow(rX, 2) * Math.pow(currp.y, 2) - Math.pow(rY, 2) * Math.pow(currp.x, 2)) / (Math.pow(rX, 2) * Math.pow(currp.y, 2) + Math.pow(rY, 2) * Math.pow(currp.x, 2)));
        if (isNaN(s3)) {
          s3 = 0;
        }
        var cpp = new Point(s3 * rX * currp.y / rY, s3 * -rY * currp.x / rX);
        var centp = new Point((current.x + currentPoint.x) / 2 + Math.cos(xAxisRotation) * cpp.x - Math.sin(xAxisRotation) * cpp.y, (current.y + currentPoint.y) / 2 + Math.sin(xAxisRotation) * cpp.x + Math.cos(xAxisRotation) * cpp.y);
        var a1 = vectorsAngle([1, 0], [(currp.x - cpp.x) / rX, (currp.y - cpp.y) / rY]);
        var u3 = [(currp.x - cpp.x) / rX, (currp.y - cpp.y) / rY];
        var v3 = [(-currp.x - cpp.x) / rX, (-currp.y - cpp.y) / rY];
        var ad = vectorsAngle(u3, v3);
        if (vectorsRatio(u3, v3) <= -1) {
          ad = Math.PI;
        }
        if (vectorsRatio(u3, v3) >= 1) {
          ad = 0;
        }
        return {
          currentPoint,
          rX,
          rY,
          sweepFlag,
          xAxisRotation,
          centp,
          a1,
          ad
        };
      }
      pathA(ctx, boundingBox) {
        var {
          pathParser
        } = this;
        var {
          currentPoint,
          rX,
          rY,
          sweepFlag,
          xAxisRotation,
          centp,
          a1,
          ad
        } = _PathElement.pathA(pathParser);
        var dir = 1 - sweepFlag ? 1 : -1;
        var ah = a1 + dir * (ad / 2);
        var halfWay = new Point(centp.x + rX * Math.cos(ah), centp.y + rY * Math.sin(ah));
        pathParser.addMarkerAngle(halfWay, ah - dir * Math.PI / 2);
        pathParser.addMarkerAngle(currentPoint, ah - dir * Math.PI);
        boundingBox.addPoint(currentPoint.x, currentPoint.y);
        if (ctx && !isNaN(a1) && !isNaN(ad)) {
          var r2 = rX > rY ? rX : rY;
          var sx = rX > rY ? 1 : rX / rY;
          var sy = rX > rY ? rY / rX : 1;
          ctx.translate(centp.x, centp.y);
          ctx.rotate(xAxisRotation);
          ctx.scale(sx, sy);
          ctx.arc(0, 0, r2, a1, a1 + ad, Boolean(1 - sweepFlag));
          ctx.scale(1 / sx, 1 / sy);
          ctx.rotate(-xAxisRotation);
          ctx.translate(-centp.x, -centp.y);
        }
      }
      static pathZ(pathParser) {
        pathParser.current = pathParser.start;
      }
      pathZ(ctx, boundingBox) {
        _PathElement.pathZ(this.pathParser);
        if (ctx) {
          if (boundingBox.x1 !== boundingBox.x2 && boundingBox.y1 !== boundingBox.y2) {
            ctx.closePath();
          }
        }
      }
    };
    GlyphElement = class extends PathElement {
      static {
        __name(this, "GlyphElement");
      }
      static {
        __name2(this, "GlyphElement");
      }
      constructor(document2, node2, captureTextNodes) {
        super(document2, node2, captureTextNodes);
        this.type = "glyph";
        this.horizAdvX = this.getAttribute("horiz-adv-x").getNumber();
        this.unicode = this.getAttribute("unicode").getString();
        this.arabicForm = this.getAttribute("arabic-form").getString();
      }
    };
    TextElement = class _TextElement extends RenderedElement {
      static {
        __name(this, "_TextElement");
      }
      static {
        __name2(this, "TextElement");
      }
      constructor(document2, node2, captureTextNodes) {
        super(document2, node2, new.target === _TextElement ? true : captureTextNodes);
        this.type = "text";
        this.x = 0;
        this.y = 0;
        this.measureCache = -1;
      }
      setContext(ctx) {
        var fromMeasure = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : false;
        super.setContext(ctx, fromMeasure);
        var textBaseline = this.getStyle("dominant-baseline").getTextBaseline() || this.getStyle("alignment-baseline").getTextBaseline();
        if (textBaseline) {
          ctx.textBaseline = textBaseline;
        }
      }
      initializeCoordinates() {
        this.x = 0;
        this.y = 0;
        this.leafTexts = [];
        this.textChunkStart = 0;
        this.minX = Number.POSITIVE_INFINITY;
        this.maxX = Number.NEGATIVE_INFINITY;
      }
      getBoundingBox(ctx) {
        if (this.type !== "text") {
          return this.getTElementBoundingBox(ctx);
        }
        this.initializeCoordinates();
        this.adjustChildCoordinatesRecursive(ctx);
        var boundingBox = null;
        this.children.forEach((_3, i33) => {
          var childBoundingBox = this.getChildBoundingBox(ctx, this, this, i33);
          if (!boundingBox) {
            boundingBox = childBoundingBox;
          } else {
            boundingBox.addBoundingBox(childBoundingBox);
          }
        });
        return boundingBox;
      }
      getFontSize() {
        var {
          document: document2,
          parent
        } = this;
        var inheritFontSize = Font.parse(document2.ctx.font).fontSize;
        var fontSize = parent.getStyle("font-size").getNumber(inheritFontSize);
        return fontSize;
      }
      getTElementBoundingBox(ctx) {
        var fontSize = this.getFontSize();
        return new BoundingBox(this.x, this.y - fontSize, this.x + this.measureText(ctx), this.y);
      }
      getGlyph(font, text3, i33) {
        var char = text3[i33];
        var glyph = null;
        if (font.isArabic) {
          var len = text3.length;
          var prevChar = text3[i33 - 1];
          var nextChar = text3[i33 + 1];
          var arabicForm = "isolated";
          if ((i33 === 0 || prevChar === " ") && i33 < len - 1 && nextChar !== " ") {
            arabicForm = "terminal";
          }
          if (i33 > 0 && prevChar !== " " && i33 < len - 1 && nextChar !== " ") {
            arabicForm = "medial";
          }
          if (i33 > 0 && prevChar !== " " && (i33 === len - 1 || nextChar === " ")) {
            arabicForm = "initial";
          }
          if (typeof font.glyphs[char] !== "undefined") {
            var maybeGlyph = font.glyphs[char];
            glyph = maybeGlyph instanceof GlyphElement ? maybeGlyph : maybeGlyph[arabicForm];
          }
        } else {
          glyph = font.glyphs[char];
        }
        if (!glyph) {
          glyph = font.missingGlyph;
        }
        return glyph;
      }
      getText() {
        return "";
      }
      getTextFromNode(node2) {
        var textNode = node2 || this.node;
        var childNodes = Array.from(textNode.parentNode.childNodes);
        var index2 = childNodes.indexOf(textNode);
        var lastIndex = childNodes.length - 1;
        var text3 = compressSpaces(
          // textNode.value
          // || textNode.text
          textNode.textContent || ""
        );
        if (index2 === 0) {
          text3 = trimLeft(text3);
        }
        if (index2 === lastIndex) {
          text3 = trimRight(text3);
        }
        return text3;
      }
      renderChildren(ctx) {
        if (this.type !== "text") {
          this.renderTElementChildren(ctx);
          return;
        }
        this.initializeCoordinates();
        this.adjustChildCoordinatesRecursive(ctx);
        this.children.forEach((_3, i33) => {
          this.renderChild(ctx, this, this, i33);
        });
        var {
          mouse
        } = this.document.screen;
        if (mouse.isWorking()) {
          mouse.checkBoundingBox(this, this.getBoundingBox(ctx));
        }
      }
      renderTElementChildren(ctx) {
        var {
          document: document2,
          parent
        } = this;
        var renderText = this.getText();
        var customFont = parent.getStyle("font-family").getDefinition();
        if (customFont) {
          var {
            unitsPerEm
          } = customFont.fontFace;
          var ctxFont = Font.parse(document2.ctx.font);
          var fontSize = parent.getStyle("font-size").getNumber(ctxFont.fontSize);
          var fontStyle = parent.getStyle("font-style").getString(ctxFont.fontStyle);
          var scale = fontSize / unitsPerEm;
          var text3 = customFont.isRTL ? renderText.split("").reverse().join("") : renderText;
          var dx = toNumbers(parent.getAttribute("dx").getString());
          var len = text3.length;
          for (var i33 = 0; i33 < len; i33++) {
            var glyph = this.getGlyph(customFont, text3, i33);
            ctx.translate(this.x, this.y);
            ctx.scale(scale, -scale);
            var lw = ctx.lineWidth;
            ctx.lineWidth = ctx.lineWidth * unitsPerEm / fontSize;
            if (fontStyle === "italic") {
              ctx.transform(1, 0, 0.4, 1, 0, 0);
            }
            glyph.render(ctx);
            if (fontStyle === "italic") {
              ctx.transform(1, 0, -0.4, 1, 0, 0);
            }
            ctx.lineWidth = lw;
            ctx.scale(1 / scale, -1 / scale);
            ctx.translate(-this.x, -this.y);
            this.x += fontSize * (glyph.horizAdvX || customFont.horizAdvX) / unitsPerEm;
            if (typeof dx[i33] !== "undefined" && !isNaN(dx[i33])) {
              this.x += dx[i33];
            }
          }
          return;
        }
        var {
          x: x22,
          y: y3
        } = this;
        if (ctx.fillStyle) {
          ctx.fillText(renderText, x22, y3);
        }
        if (ctx.strokeStyle) {
          ctx.strokeText(renderText, x22, y3);
        }
      }
      applyAnchoring() {
        if (this.textChunkStart >= this.leafTexts.length) {
          return;
        }
        var firstElement = this.leafTexts[this.textChunkStart];
        var textAnchor = firstElement.getStyle("text-anchor").getString("start");
        var isRTL = false;
        var shift = 0;
        if (textAnchor === "start" && !isRTL || textAnchor === "end" && isRTL) {
          shift = firstElement.x - this.minX;
        } else if (textAnchor === "end" && !isRTL || textAnchor === "start" && isRTL) {
          shift = firstElement.x - this.maxX;
        } else {
          shift = firstElement.x - (this.minX + this.maxX) / 2;
        }
        for (var i33 = this.textChunkStart; i33 < this.leafTexts.length; i33++) {
          this.leafTexts[i33].x += shift;
        }
        this.minX = Number.POSITIVE_INFINITY;
        this.maxX = Number.NEGATIVE_INFINITY;
        this.textChunkStart = this.leafTexts.length;
      }
      adjustChildCoordinatesRecursive(ctx) {
        this.children.forEach((_3, i33) => {
          this.adjustChildCoordinatesRecursiveCore(ctx, this, this, i33);
        });
        this.applyAnchoring();
      }
      adjustChildCoordinatesRecursiveCore(ctx, textParent, parent, i33) {
        var child = parent.children[i33];
        if (child.children.length > 0) {
          child.children.forEach((_3, i4) => {
            textParent.adjustChildCoordinatesRecursiveCore(ctx, textParent, child, i4);
          });
        } else {
          this.adjustChildCoordinates(ctx, textParent, parent, i33);
        }
      }
      adjustChildCoordinates(ctx, textParent, parent, i33) {
        var child = parent.children[i33];
        if (typeof child.measureText !== "function") {
          return child;
        }
        ctx.save();
        child.setContext(ctx, true);
        var xAttr = child.getAttribute("x");
        var yAttr = child.getAttribute("y");
        var dxAttr = child.getAttribute("dx");
        var dyAttr = child.getAttribute("dy");
        var customFont = child.getStyle("font-family").getDefinition();
        var isRTL = Boolean(customFont) && customFont.isRTL;
        if (i33 === 0) {
          if (!xAttr.hasValue()) {
            xAttr.setValue(child.getInheritedAttribute("x"));
          }
          if (!yAttr.hasValue()) {
            yAttr.setValue(child.getInheritedAttribute("y"));
          }
          if (!dxAttr.hasValue()) {
            dxAttr.setValue(child.getInheritedAttribute("dx"));
          }
          if (!dyAttr.hasValue()) {
            dyAttr.setValue(child.getInheritedAttribute("dy"));
          }
        }
        var width = child.measureText(ctx);
        if (isRTL) {
          textParent.x -= width;
        }
        if (xAttr.hasValue()) {
          textParent.applyAnchoring();
          child.x = xAttr.getPixels("x");
          if (dxAttr.hasValue()) {
            child.x += dxAttr.getPixels("x");
          }
        } else {
          if (dxAttr.hasValue()) {
            textParent.x += dxAttr.getPixels("x");
          }
          child.x = textParent.x;
        }
        textParent.x = child.x;
        if (!isRTL) {
          textParent.x += width;
        }
        if (yAttr.hasValue()) {
          child.y = yAttr.getPixels("y");
          if (dyAttr.hasValue()) {
            child.y += dyAttr.getPixels("y");
          }
        } else {
          if (dyAttr.hasValue()) {
            textParent.y += dyAttr.getPixels("y");
          }
          child.y = textParent.y;
        }
        textParent.y = child.y;
        textParent.leafTexts.push(child);
        textParent.minX = Math.min(textParent.minX, child.x, child.x + width);
        textParent.maxX = Math.max(textParent.maxX, child.x, child.x + width);
        child.clearContext(ctx);
        ctx.restore();
        return child;
      }
      getChildBoundingBox(ctx, textParent, parent, i33) {
        var child = parent.children[i33];
        if (typeof child.getBoundingBox !== "function") {
          return null;
        }
        var boundingBox = child.getBoundingBox(ctx);
        if (!boundingBox) {
          return null;
        }
        child.children.forEach((_3, i4) => {
          var childBoundingBox = textParent.getChildBoundingBox(ctx, textParent, child, i4);
          boundingBox.addBoundingBox(childBoundingBox);
        });
        return boundingBox;
      }
      renderChild(ctx, textParent, parent, i33) {
        var child = parent.children[i33];
        child.render(ctx);
        child.children.forEach((_3, i4) => {
          textParent.renderChild(ctx, textParent, child, i4);
        });
      }
      measureText(ctx) {
        var {
          measureCache
        } = this;
        if (~measureCache) {
          return measureCache;
        }
        var renderText = this.getText();
        var measure = this.measureTargetText(ctx, renderText);
        this.measureCache = measure;
        return measure;
      }
      measureTargetText(ctx, targetText) {
        if (!targetText.length) {
          return 0;
        }
        var {
          parent
        } = this;
        var customFont = parent.getStyle("font-family").getDefinition();
        if (customFont) {
          var fontSize = this.getFontSize();
          var text3 = customFont.isRTL ? targetText.split("").reverse().join("") : targetText;
          var dx = toNumbers(parent.getAttribute("dx").getString());
          var len = text3.length;
          var _measure = 0;
          for (var i33 = 0; i33 < len; i33++) {
            var glyph = this.getGlyph(customFont, text3, i33);
            _measure += (glyph.horizAdvX || customFont.horizAdvX) * fontSize / customFont.fontFace.unitsPerEm;
            if (typeof dx[i33] !== "undefined" && !isNaN(dx[i33])) {
              _measure += dx[i33];
            }
          }
          return _measure;
        }
        if (!ctx.measureText) {
          return targetText.length * 10;
        }
        ctx.save();
        this.setContext(ctx, true);
        var {
          width: measure
        } = ctx.measureText(targetText);
        this.clearContext(ctx);
        ctx.restore();
        return measure;
      }
      /**
       * Inherits positional attributes from {@link TextElement} parent(s). Attributes
       * are only inherited from a parent to its first child.
       * @param name - The attribute name.
       * @returns The attribute value or null.
       */
      getInheritedAttribute(name) {
        var current = this;
        while (current instanceof _TextElement && current.isFirstChild()) {
          var parentAttr = current.parent.getAttribute(name);
          if (parentAttr.hasValue(true)) {
            return parentAttr.getValue("0");
          }
          current = current.parent;
        }
        return null;
      }
    };
    TSpanElement = class _TSpanElement extends TextElement {
      static {
        __name(this, "_TSpanElement");
      }
      static {
        __name2(this, "TSpanElement");
      }
      constructor(document2, node2, captureTextNodes) {
        super(document2, node2, new.target === _TSpanElement ? true : captureTextNodes);
        this.type = "tspan";
        this.text = this.children.length > 0 ? "" : this.getTextFromNode();
      }
      getText() {
        return this.text;
      }
    };
    TextNode = class extends TSpanElement {
      static {
        __name(this, "TextNode");
      }
      static {
        __name2(this, "TextNode");
      }
      constructor() {
        super(...arguments);
        this.type = "textNode";
      }
    };
    SVGElement = class extends RenderedElement {
      static {
        __name(this, "SVGElement");
      }
      static {
        __name2(this, "SVGElement");
      }
      constructor() {
        super(...arguments);
        this.type = "svg";
        this.root = false;
      }
      setContext(ctx) {
        var _this$node$parentNode;
        var {
          document: document2
        } = this;
        var {
          screen,
          window: window2
        } = document2;
        var canvas = ctx.canvas;
        screen.setDefaults(ctx);
        if (canvas.style && typeof ctx.font !== "undefined" && window2 && typeof window2.getComputedStyle !== "undefined") {
          ctx.font = window2.getComputedStyle(canvas).getPropertyValue("font");
          var fontSizeProp = new Property(document2, "fontSize", Font.parse(ctx.font).fontSize);
          if (fontSizeProp.hasValue()) {
            document2.rootEmSize = fontSizeProp.getPixels("y");
            document2.emSize = document2.rootEmSize;
          }
        }
        if (!this.getAttribute("x").hasValue()) {
          this.getAttribute("x", true).setValue(0);
        }
        if (!this.getAttribute("y").hasValue()) {
          this.getAttribute("y", true).setValue(0);
        }
        var {
          width,
          height
        } = screen.viewPort;
        if (!this.getStyle("width").hasValue()) {
          this.getStyle("width", true).setValue("100%");
        }
        if (!this.getStyle("height").hasValue()) {
          this.getStyle("height", true).setValue("100%");
        }
        if (!this.getStyle("color").hasValue()) {
          this.getStyle("color", true).setValue("black");
        }
        var refXAttr = this.getAttribute("refX");
        var refYAttr = this.getAttribute("refY");
        var viewBoxAttr = this.getAttribute("viewBox");
        var viewBox = viewBoxAttr.hasValue() ? toNumbers(viewBoxAttr.getString()) : null;
        var clip = !this.root && this.getStyle("overflow").getValue("hidden") !== "visible";
        var minX = 0;
        var minY = 0;
        var clipX = 0;
        var clipY = 0;
        if (viewBox) {
          minX = viewBox[0];
          minY = viewBox[1];
        }
        if (!this.root) {
          width = this.getStyle("width").getPixels("x");
          height = this.getStyle("height").getPixels("y");
          if (this.type === "marker") {
            clipX = minX;
            clipY = minY;
            minX = 0;
            minY = 0;
          }
        }
        screen.viewPort.setCurrent(width, height);
        if (this.node && (!this.parent || ((_this$node$parentNode = this.node.parentNode) === null || _this$node$parentNode === void 0 ? void 0 : _this$node$parentNode.nodeName) === "foreignObject") && this.getStyle("transform", false, true).hasValue() && !this.getStyle("transform-origin", false, true).hasValue()) {
          this.getStyle("transform-origin", true, true).setValue("50% 50%");
        }
        super.setContext(ctx);
        ctx.translate(this.getAttribute("x").getPixels("x"), this.getAttribute("y").getPixels("y"));
        if (viewBox) {
          width = viewBox[2];
          height = viewBox[3];
        }
        document2.setViewBox({
          ctx,
          aspectRatio: this.getAttribute("preserveAspectRatio").getString(),
          width: screen.viewPort.width,
          desiredWidth: width,
          height: screen.viewPort.height,
          desiredHeight: height,
          minX,
          minY,
          refX: refXAttr.getValue(),
          refY: refYAttr.getValue(),
          clip,
          clipX,
          clipY
        });
        if (viewBox) {
          screen.viewPort.removeCurrent();
          screen.viewPort.setCurrent(width, height);
        }
      }
      clearContext(ctx) {
        super.clearContext(ctx);
        this.document.screen.viewPort.removeCurrent();
      }
      /**
       * Resize SVG to fit in given size.
       * @param width
       * @param height
       * @param preserveAspectRatio
       */
      resize(width) {
        var height = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : width;
        var preserveAspectRatio = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : false;
        var widthAttr = this.getAttribute("width", true);
        var heightAttr = this.getAttribute("height", true);
        var viewBoxAttr = this.getAttribute("viewBox");
        var styleAttr = this.getAttribute("style");
        var originWidth = widthAttr.getNumber(0);
        var originHeight = heightAttr.getNumber(0);
        if (preserveAspectRatio) {
          if (typeof preserveAspectRatio === "string") {
            this.getAttribute("preserveAspectRatio", true).setValue(preserveAspectRatio);
          } else {
            var preserveAspectRatioAttr = this.getAttribute("preserveAspectRatio");
            if (preserveAspectRatioAttr.hasValue()) {
              preserveAspectRatioAttr.setValue(preserveAspectRatioAttr.getString().replace(/^\s*(\S.*\S)\s*$/, "$1"));
            }
          }
        }
        widthAttr.setValue(width);
        heightAttr.setValue(height);
        if (!viewBoxAttr.hasValue()) {
          viewBoxAttr.setValue("0 0 ".concat(originWidth || width, " ").concat(originHeight || height));
        }
        if (styleAttr.hasValue()) {
          var widthStyle = this.getStyle("width");
          var heightStyle = this.getStyle("height");
          if (widthStyle.hasValue()) {
            widthStyle.setValue("".concat(width, "px"));
          }
          if (heightStyle.hasValue()) {
            heightStyle.setValue("".concat(height, "px"));
          }
        }
      }
    };
    RectElement = class extends PathElement {
      static {
        __name(this, "RectElement");
      }
      static {
        __name2(this, "RectElement");
      }
      constructor() {
        super(...arguments);
        this.type = "rect";
      }
      path(ctx) {
        var x22 = this.getAttribute("x").getPixels("x");
        var y3 = this.getAttribute("y").getPixels("y");
        var width = this.getStyle("width", false, true).getPixels("x");
        var height = this.getStyle("height", false, true).getPixels("y");
        var rxAttr = this.getAttribute("rx");
        var ryAttr = this.getAttribute("ry");
        var rx = rxAttr.getPixels("x");
        var ry = ryAttr.getPixels("y");
        if (rxAttr.hasValue() && !ryAttr.hasValue()) {
          ry = rx;
        }
        if (ryAttr.hasValue() && !rxAttr.hasValue()) {
          rx = ry;
        }
        rx = Math.min(rx, width / 2);
        ry = Math.min(ry, height / 2);
        if (ctx) {
          var KAPPA = 4 * ((Math.sqrt(2) - 1) / 3);
          ctx.beginPath();
          if (height > 0 && width > 0) {
            ctx.moveTo(x22 + rx, y3);
            ctx.lineTo(x22 + width - rx, y3);
            ctx.bezierCurveTo(x22 + width - rx + KAPPA * rx, y3, x22 + width, y3 + ry - KAPPA * ry, x22 + width, y3 + ry);
            ctx.lineTo(x22 + width, y3 + height - ry);
            ctx.bezierCurveTo(x22 + width, y3 + height - ry + KAPPA * ry, x22 + width - rx + KAPPA * rx, y3 + height, x22 + width - rx, y3 + height);
            ctx.lineTo(x22 + rx, y3 + height);
            ctx.bezierCurveTo(x22 + rx - KAPPA * rx, y3 + height, x22, y3 + height - ry + KAPPA * ry, x22, y3 + height - ry);
            ctx.lineTo(x22, y3 + ry);
            ctx.bezierCurveTo(x22, y3 + ry - KAPPA * ry, x22 + rx - KAPPA * rx, y3, x22 + rx, y3);
            ctx.closePath();
          }
        }
        return new BoundingBox(x22, y3, x22 + width, y3 + height);
      }
      getMarkers() {
        return null;
      }
    };
    CircleElement = class extends PathElement {
      static {
        __name(this, "CircleElement");
      }
      static {
        __name2(this, "CircleElement");
      }
      constructor() {
        super(...arguments);
        this.type = "circle";
      }
      path(ctx) {
        var cx = this.getAttribute("cx").getPixels("x");
        var cy = this.getAttribute("cy").getPixels("y");
        var r2 = this.getAttribute("r").getPixels();
        if (ctx && r2 > 0) {
          ctx.beginPath();
          ctx.arc(cx, cy, r2, 0, Math.PI * 2, false);
          ctx.closePath();
        }
        return new BoundingBox(cx - r2, cy - r2, cx + r2, cy + r2);
      }
      getMarkers() {
        return null;
      }
    };
    EllipseElement = class extends PathElement {
      static {
        __name(this, "EllipseElement");
      }
      static {
        __name2(this, "EllipseElement");
      }
      constructor() {
        super(...arguments);
        this.type = "ellipse";
      }
      path(ctx) {
        var KAPPA = 4 * ((Math.sqrt(2) - 1) / 3);
        var rx = this.getAttribute("rx").getPixels("x");
        var ry = this.getAttribute("ry").getPixels("y");
        var cx = this.getAttribute("cx").getPixels("x");
        var cy = this.getAttribute("cy").getPixels("y");
        if (ctx && rx > 0 && ry > 0) {
          ctx.beginPath();
          ctx.moveTo(cx + rx, cy);
          ctx.bezierCurveTo(cx + rx, cy + KAPPA * ry, cx + KAPPA * rx, cy + ry, cx, cy + ry);
          ctx.bezierCurveTo(cx - KAPPA * rx, cy + ry, cx - rx, cy + KAPPA * ry, cx - rx, cy);
          ctx.bezierCurveTo(cx - rx, cy - KAPPA * ry, cx - KAPPA * rx, cy - ry, cx, cy - ry);
          ctx.bezierCurveTo(cx + KAPPA * rx, cy - ry, cx + rx, cy - KAPPA * ry, cx + rx, cy);
          ctx.closePath();
        }
        return new BoundingBox(cx - rx, cy - ry, cx + rx, cy + ry);
      }
      getMarkers() {
        return null;
      }
    };
    LineElement = class extends PathElement {
      static {
        __name(this, "LineElement");
      }
      static {
        __name2(this, "LineElement");
      }
      constructor() {
        super(...arguments);
        this.type = "line";
      }
      getPoints() {
        return [new Point(this.getAttribute("x1").getPixels("x"), this.getAttribute("y1").getPixels("y")), new Point(this.getAttribute("x2").getPixels("x"), this.getAttribute("y2").getPixels("y"))];
      }
      path(ctx) {
        var [{
          x: x0,
          y: y0
        }, {
          x: x1,
          y: y1
        }] = this.getPoints();
        if (ctx) {
          ctx.beginPath();
          ctx.moveTo(x0, y0);
          ctx.lineTo(x1, y1);
        }
        return new BoundingBox(x0, y0, x1, y1);
      }
      getMarkers() {
        var [p0, p1] = this.getPoints();
        var a3 = p0.angleTo(p1);
        return [[p0, a3], [p1, a3]];
      }
    };
    PolylineElement = class extends PathElement {
      static {
        __name(this, "PolylineElement");
      }
      static {
        __name2(this, "PolylineElement");
      }
      constructor(document2, node2, captureTextNodes) {
        super(document2, node2, captureTextNodes);
        this.type = "polyline";
        this.points = [];
        this.points = Point.parsePath(this.getAttribute("points").getString());
      }
      path(ctx) {
        var {
          points
        } = this;
        var [{
          x: x0,
          y: y0
        }] = points;
        var boundingBox = new BoundingBox(x0, y0);
        if (ctx) {
          ctx.beginPath();
          ctx.moveTo(x0, y0);
        }
        points.forEach((_ref) => {
          var {
            x: x22,
            y: y3
          } = _ref;
          boundingBox.addPoint(x22, y3);
          if (ctx) {
            ctx.lineTo(x22, y3);
          }
        });
        return boundingBox;
      }
      getMarkers() {
        var {
          points
        } = this;
        var lastIndex = points.length - 1;
        var markers = [];
        points.forEach((point, i33) => {
          if (i33 === lastIndex) {
            return;
          }
          markers.push([point, point.angleTo(points[i33 + 1])]);
        });
        if (markers.length > 0) {
          markers.push([points[points.length - 1], markers[markers.length - 1][1]]);
        }
        return markers;
      }
    };
    PolygonElement = class extends PolylineElement {
      static {
        __name(this, "PolygonElement");
      }
      static {
        __name2(this, "PolygonElement");
      }
      constructor() {
        super(...arguments);
        this.type = "polygon";
      }
      path(ctx) {
        var boundingBox = super.path(ctx);
        var [{
          x: x22,
          y: y3
        }] = this.points;
        if (ctx) {
          ctx.lineTo(x22, y3);
          ctx.closePath();
        }
        return boundingBox;
      }
    };
    PatternElement = class extends Element {
      static {
        __name(this, "PatternElement");
      }
      static {
        __name2(this, "PatternElement");
      }
      constructor() {
        super(...arguments);
        this.type = "pattern";
      }
      createPattern(ctx, _3, parentOpacityProp) {
        var width = this.getStyle("width").getPixels("x", true);
        var height = this.getStyle("height").getPixels("y", true);
        var patternSvg = new SVGElement(this.document, null);
        patternSvg.attributes.viewBox = new Property(this.document, "viewBox", this.getAttribute("viewBox").getValue());
        patternSvg.attributes.width = new Property(this.document, "width", "".concat(width, "px"));
        patternSvg.attributes.height = new Property(this.document, "height", "".concat(height, "px"));
        patternSvg.attributes.transform = new Property(this.document, "transform", this.getAttribute("patternTransform").getValue());
        patternSvg.children = this.children;
        var patternCanvas = this.document.createCanvas(width, height);
        var patternCtx = patternCanvas.getContext("2d");
        var xAttr = this.getAttribute("x");
        var yAttr = this.getAttribute("y");
        if (xAttr.hasValue() && yAttr.hasValue()) {
          patternCtx.translate(xAttr.getPixels("x", true), yAttr.getPixels("y", true));
        }
        if (parentOpacityProp.hasValue()) {
          this.styles["fill-opacity"] = parentOpacityProp;
        } else {
          Reflect.deleteProperty(this.styles, "fill-opacity");
        }
        for (var x22 = -1; x22 <= 1; x22++) {
          for (var y3 = -1; y3 <= 1; y3++) {
            patternCtx.save();
            patternSvg.attributes.x = new Property(this.document, "x", x22 * patternCanvas.width);
            patternSvg.attributes.y = new Property(this.document, "y", y3 * patternCanvas.height);
            patternSvg.render(patternCtx);
            patternCtx.restore();
          }
        }
        var pattern = ctx.createPattern(patternCanvas, "repeat");
        return pattern;
      }
    };
    MarkerElement = class extends Element {
      static {
        __name(this, "MarkerElement");
      }
      static {
        __name2(this, "MarkerElement");
      }
      constructor() {
        super(...arguments);
        this.type = "marker";
      }
      render(ctx, point, angle) {
        if (!point) {
          return;
        }
        var {
          x: x22,
          y: y3
        } = point;
        var orient = this.getAttribute("orient").getString("auto");
        var markerUnits = this.getAttribute("markerUnits").getString("strokeWidth");
        ctx.translate(x22, y3);
        if (orient === "auto") {
          ctx.rotate(angle);
        }
        if (markerUnits === "strokeWidth") {
          ctx.scale(ctx.lineWidth, ctx.lineWidth);
        }
        ctx.save();
        var markerSvg = new SVGElement(this.document, null);
        markerSvg.type = this.type;
        markerSvg.attributes.viewBox = new Property(this.document, "viewBox", this.getAttribute("viewBox").getValue());
        markerSvg.attributes.refX = new Property(this.document, "refX", this.getAttribute("refX").getValue());
        markerSvg.attributes.refY = new Property(this.document, "refY", this.getAttribute("refY").getValue());
        markerSvg.attributes.width = new Property(this.document, "width", this.getAttribute("markerWidth").getValue());
        markerSvg.attributes.height = new Property(this.document, "height", this.getAttribute("markerHeight").getValue());
        markerSvg.attributes.overflow = new Property(this.document, "overflow", this.getAttribute("overflow").getValue());
        markerSvg.attributes.fill = new Property(this.document, "fill", this.getAttribute("fill").getColor("black"));
        markerSvg.attributes.stroke = new Property(this.document, "stroke", this.getAttribute("stroke").getValue("none"));
        markerSvg.children = this.children;
        markerSvg.render(ctx);
        ctx.restore();
        if (markerUnits === "strokeWidth") {
          ctx.scale(1 / ctx.lineWidth, 1 / ctx.lineWidth);
        }
        if (orient === "auto") {
          ctx.rotate(-angle);
        }
        ctx.translate(-x22, -y3);
      }
    };
    DefsElement = class extends Element {
      static {
        __name(this, "DefsElement");
      }
      static {
        __name2(this, "DefsElement");
      }
      constructor() {
        super(...arguments);
        this.type = "defs";
      }
      render() {
      }
    };
    GElement = class extends RenderedElement {
      static {
        __name(this, "GElement");
      }
      static {
        __name2(this, "GElement");
      }
      constructor() {
        super(...arguments);
        this.type = "g";
      }
      getBoundingBox(ctx) {
        var boundingBox = new BoundingBox();
        this.children.forEach((child) => {
          boundingBox.addBoundingBox(child.getBoundingBox(ctx));
        });
        return boundingBox;
      }
    };
    GradientElement = class extends Element {
      static {
        __name(this, "GradientElement");
      }
      static {
        __name2(this, "GradientElement");
      }
      constructor(document2, node2, captureTextNodes) {
        super(document2, node2, captureTextNodes);
        this.attributesToInherit = ["gradientUnits"];
        this.stops = [];
        var {
          stops,
          children
        } = this;
        children.forEach((child) => {
          if (child.type === "stop") {
            stops.push(child);
          }
        });
      }
      getGradientUnits() {
        return this.getAttribute("gradientUnits").getString("objectBoundingBox");
      }
      createGradient(ctx, element, parentOpacityProp) {
        var stopsContainer = this;
        if (this.getHrefAttribute().hasValue()) {
          stopsContainer = this.getHrefAttribute().getDefinition();
          this.inheritStopContainer(stopsContainer);
        }
        var {
          stops
        } = stopsContainer;
        var gradient = this.getGradient(ctx, element);
        if (!gradient) {
          return this.addParentOpacity(parentOpacityProp, stops[stops.length - 1].color);
        }
        stops.forEach((stop) => {
          gradient.addColorStop(stop.offset, this.addParentOpacity(parentOpacityProp, stop.color));
        });
        if (this.getAttribute("gradientTransform").hasValue()) {
          var {
            document: document2
          } = this;
          var {
            MAX_VIRTUAL_PIXELS,
            viewPort
          } = document2.screen;
          var [rootView] = viewPort.viewPorts;
          var rect = new RectElement(document2, null);
          rect.attributes.x = new Property(document2, "x", -MAX_VIRTUAL_PIXELS / 3);
          rect.attributes.y = new Property(document2, "y", -MAX_VIRTUAL_PIXELS / 3);
          rect.attributes.width = new Property(document2, "width", MAX_VIRTUAL_PIXELS);
          rect.attributes.height = new Property(document2, "height", MAX_VIRTUAL_PIXELS);
          var group = new GElement(document2, null);
          group.attributes.transform = new Property(document2, "transform", this.getAttribute("gradientTransform").getValue());
          group.children = [rect];
          var patternSvg = new SVGElement(document2, null);
          patternSvg.attributes.x = new Property(document2, "x", 0);
          patternSvg.attributes.y = new Property(document2, "y", 0);
          patternSvg.attributes.width = new Property(document2, "width", rootView.width);
          patternSvg.attributes.height = new Property(document2, "height", rootView.height);
          patternSvg.children = [group];
          var patternCanvas = document2.createCanvas(rootView.width, rootView.height);
          var patternCtx = patternCanvas.getContext("2d");
          patternCtx.fillStyle = gradient;
          patternSvg.render(patternCtx);
          return patternCtx.createPattern(patternCanvas, "no-repeat");
        }
        return gradient;
      }
      inheritStopContainer(stopsContainer) {
        this.attributesToInherit.forEach((attributeToInherit) => {
          if (!this.getAttribute(attributeToInherit).hasValue() && stopsContainer.getAttribute(attributeToInherit).hasValue()) {
            this.getAttribute(attributeToInherit, true).setValue(stopsContainer.getAttribute(attributeToInherit).getValue());
          }
        });
      }
      addParentOpacity(parentOpacityProp, color) {
        if (parentOpacityProp.hasValue()) {
          var colorProp = new Property(this.document, "color", color);
          return colorProp.addOpacity(parentOpacityProp).getColor();
        }
        return color;
      }
    };
    LinearGradientElement = class extends GradientElement {
      static {
        __name(this, "LinearGradientElement");
      }
      static {
        __name2(this, "LinearGradientElement");
      }
      constructor(document2, node2, captureTextNodes) {
        super(document2, node2, captureTextNodes);
        this.type = "linearGradient";
        this.attributesToInherit.push("x1", "y1", "x2", "y2");
      }
      getGradient(ctx, element) {
        var isBoundingBoxUnits = this.getGradientUnits() === "objectBoundingBox";
        var boundingBox = isBoundingBoxUnits ? element.getBoundingBox(ctx) : null;
        if (isBoundingBoxUnits && !boundingBox) {
          return null;
        }
        if (!this.getAttribute("x1").hasValue() && !this.getAttribute("y1").hasValue() && !this.getAttribute("x2").hasValue() && !this.getAttribute("y2").hasValue()) {
          this.getAttribute("x1", true).setValue(0);
          this.getAttribute("y1", true).setValue(0);
          this.getAttribute("x2", true).setValue(1);
          this.getAttribute("y2", true).setValue(0);
        }
        var x1 = isBoundingBoxUnits ? boundingBox.x + boundingBox.width * this.getAttribute("x1").getNumber() : this.getAttribute("x1").getPixels("x");
        var y1 = isBoundingBoxUnits ? boundingBox.y + boundingBox.height * this.getAttribute("y1").getNumber() : this.getAttribute("y1").getPixels("y");
        var x22 = isBoundingBoxUnits ? boundingBox.x + boundingBox.width * this.getAttribute("x2").getNumber() : this.getAttribute("x2").getPixels("x");
        var y22 = isBoundingBoxUnits ? boundingBox.y + boundingBox.height * this.getAttribute("y2").getNumber() : this.getAttribute("y2").getPixels("y");
        if (x1 === x22 && y1 === y22) {
          return null;
        }
        return ctx.createLinearGradient(x1, y1, x22, y22);
      }
    };
    RadialGradientElement = class extends GradientElement {
      static {
        __name(this, "RadialGradientElement");
      }
      static {
        __name2(this, "RadialGradientElement");
      }
      constructor(document2, node2, captureTextNodes) {
        super(document2, node2, captureTextNodes);
        this.type = "radialGradient";
        this.attributesToInherit.push("cx", "cy", "r", "fx", "fy", "fr");
      }
      getGradient(ctx, element) {
        var isBoundingBoxUnits = this.getGradientUnits() === "objectBoundingBox";
        var boundingBox = element.getBoundingBox(ctx);
        if (isBoundingBoxUnits && !boundingBox) {
          return null;
        }
        if (!this.getAttribute("cx").hasValue()) {
          this.getAttribute("cx", true).setValue("50%");
        }
        if (!this.getAttribute("cy").hasValue()) {
          this.getAttribute("cy", true).setValue("50%");
        }
        if (!this.getAttribute("r").hasValue()) {
          this.getAttribute("r", true).setValue("50%");
        }
        var cx = isBoundingBoxUnits ? boundingBox.x + boundingBox.width * this.getAttribute("cx").getNumber() : this.getAttribute("cx").getPixels("x");
        var cy = isBoundingBoxUnits ? boundingBox.y + boundingBox.height * this.getAttribute("cy").getNumber() : this.getAttribute("cy").getPixels("y");
        var fx = cx;
        var fy = cy;
        if (this.getAttribute("fx").hasValue()) {
          fx = isBoundingBoxUnits ? boundingBox.x + boundingBox.width * this.getAttribute("fx").getNumber() : this.getAttribute("fx").getPixels("x");
        }
        if (this.getAttribute("fy").hasValue()) {
          fy = isBoundingBoxUnits ? boundingBox.y + boundingBox.height * this.getAttribute("fy").getNumber() : this.getAttribute("fy").getPixels("y");
        }
        var r2 = isBoundingBoxUnits ? (boundingBox.width + boundingBox.height) / 2 * this.getAttribute("r").getNumber() : this.getAttribute("r").getPixels();
        var fr = this.getAttribute("fr").getPixels();
        return ctx.createRadialGradient(fx, fy, fr, cx, cy, r2);
      }
    };
    StopElement = class extends Element {
      static {
        __name(this, "StopElement");
      }
      static {
        __name2(this, "StopElement");
      }
      constructor(document2, node2, captureTextNodes) {
        super(document2, node2, captureTextNodes);
        this.type = "stop";
        var offset = Math.max(0, Math.min(1, this.getAttribute("offset").getNumber()));
        var stopOpacity = this.getStyle("stop-opacity");
        var stopColor = this.getStyle("stop-color", true);
        if (stopColor.getString() === "") {
          stopColor.setValue("#000");
        }
        if (stopOpacity.hasValue()) {
          stopColor = stopColor.addOpacity(stopOpacity);
        }
        this.offset = offset;
        this.color = stopColor.getColor();
      }
    };
    AnimateElement = class extends Element {
      static {
        __name(this, "AnimateElement");
      }
      static {
        __name2(this, "AnimateElement");
      }
      constructor(document2, node2, captureTextNodes) {
        super(document2, node2, captureTextNodes);
        this.type = "animate";
        this.duration = 0;
        this.initialValue = null;
        this.initialUnits = "";
        this.removed = false;
        this.frozen = false;
        document2.screen.animations.push(this);
        this.begin = this.getAttribute("begin").getMilliseconds();
        this.maxDuration = this.begin + this.getAttribute("dur").getMilliseconds();
        this.from = this.getAttribute("from");
        this.to = this.getAttribute("to");
        this.values = new Property(document2, "values", null);
        var valuesAttr = this.getAttribute("values");
        if (valuesAttr.hasValue()) {
          this.values.setValue(valuesAttr.getString().split(";"));
        }
      }
      getProperty() {
        var attributeType = this.getAttribute("attributeType").getString();
        var attributeName = this.getAttribute("attributeName").getString();
        if (attributeType === "CSS") {
          return this.parent.getStyle(attributeName, true);
        }
        return this.parent.getAttribute(attributeName, true);
      }
      calcValue() {
        var {
          initialUnits
        } = this;
        var {
          progress,
          from,
          to
        } = this.getProgress();
        var newValue = from.getNumber() + (to.getNumber() - from.getNumber()) * progress;
        if (initialUnits === "%") {
          newValue *= 100;
        }
        return "".concat(newValue).concat(initialUnits);
      }
      update(delta) {
        var {
          parent
        } = this;
        var prop = this.getProperty();
        if (!this.initialValue) {
          this.initialValue = prop.getString();
          this.initialUnits = prop.getUnits();
        }
        if (this.duration > this.maxDuration) {
          var fill = this.getAttribute("fill").getString("remove");
          if (this.getAttribute("repeatCount").getString() === "indefinite" || this.getAttribute("repeatDur").getString() === "indefinite") {
            this.duration = 0;
          } else if (fill === "freeze" && !this.frozen) {
            this.frozen = true;
            parent.animationFrozen = true;
            parent.animationFrozenValue = prop.getString();
          } else if (fill === "remove" && !this.removed) {
            this.removed = true;
            prop.setValue(parent.animationFrozen ? parent.animationFrozenValue : this.initialValue);
            return true;
          }
          return false;
        }
        this.duration += delta;
        var updated = false;
        if (this.begin < this.duration) {
          var newValue = this.calcValue();
          var typeAttr = this.getAttribute("type");
          if (typeAttr.hasValue()) {
            var type = typeAttr.getString();
            newValue = "".concat(type, "(").concat(newValue, ")");
          }
          prop.setValue(newValue);
          updated = true;
        }
        return updated;
      }
      getProgress() {
        var {
          document: document2,
          values
        } = this;
        var result = {
          progress: (this.duration - this.begin) / (this.maxDuration - this.begin)
        };
        if (values.hasValue()) {
          var p3 = result.progress * (values.getValue().length - 1);
          var lb = Math.floor(p3);
          var ub = Math.ceil(p3);
          result.from = new Property(document2, "from", parseFloat(values.getValue()[lb]));
          result.to = new Property(document2, "to", parseFloat(values.getValue()[ub]));
          result.progress = (p3 - lb) / (ub - lb);
        } else {
          result.from = this.from;
          result.to = this.to;
        }
        return result;
      }
    };
    AnimateColorElement = class extends AnimateElement {
      static {
        __name(this, "AnimateColorElement");
      }
      static {
        __name2(this, "AnimateColorElement");
      }
      constructor() {
        super(...arguments);
        this.type = "animateColor";
      }
      calcValue() {
        var {
          progress,
          from,
          to
        } = this.getProgress();
        var colorFrom = new import_rgbcolor.default(from.getColor());
        var colorTo = new import_rgbcolor.default(to.getColor());
        if (colorFrom.ok && colorTo.ok) {
          var r2 = colorFrom.r + (colorTo.r - colorFrom.r) * progress;
          var g2 = colorFrom.g + (colorTo.g - colorFrom.g) * progress;
          var b2 = colorFrom.b + (colorTo.b - colorFrom.b) * progress;
          return "rgb(".concat(Math.floor(r2), ", ").concat(Math.floor(g2), ", ").concat(Math.floor(b2), ")");
        }
        return this.getAttribute("from").getColor();
      }
    };
    AnimateTransformElement = class extends AnimateElement {
      static {
        __name(this, "AnimateTransformElement");
      }
      static {
        __name2(this, "AnimateTransformElement");
      }
      constructor() {
        super(...arguments);
        this.type = "animateTransform";
      }
      calcValue() {
        var {
          progress,
          from,
          to
        } = this.getProgress();
        var transformFrom = toNumbers(from.getString());
        var transformTo = toNumbers(to.getString());
        var newValue = transformFrom.map((from2, i33) => {
          var to2 = transformTo[i33];
          return from2 + (to2 - from2) * progress;
        }).join(" ");
        return newValue;
      }
    };
    FontElement = class extends Element {
      static {
        __name(this, "FontElement");
      }
      static {
        __name2(this, "FontElement");
      }
      constructor(document2, node2, captureTextNodes) {
        super(document2, node2, captureTextNodes);
        this.type = "font";
        this.glyphs = /* @__PURE__ */ Object.create(null);
        this.horizAdvX = this.getAttribute("horiz-adv-x").getNumber();
        var {
          definitions
        } = document2;
        var {
          children
        } = this;
        for (var child of children) {
          switch (child.type) {
            case "font-face": {
              this.fontFace = child;
              var fontFamilyStyle = child.getStyle("font-family");
              if (fontFamilyStyle.hasValue()) {
                definitions[fontFamilyStyle.getString()] = this;
              }
              break;
            }
            case "missing-glyph":
              this.missingGlyph = child;
              break;
            case "glyph": {
              var glyph = child;
              if (glyph.arabicForm) {
                this.isRTL = true;
                this.isArabic = true;
                if (typeof this.glyphs[glyph.unicode] === "undefined") {
                  this.glyphs[glyph.unicode] = /* @__PURE__ */ Object.create(null);
                }
                this.glyphs[glyph.unicode][glyph.arabicForm] = glyph;
              } else {
                this.glyphs[glyph.unicode] = glyph;
              }
              break;
            }
          }
        }
      }
      render() {
      }
    };
    FontFaceElement = class extends Element {
      static {
        __name(this, "FontFaceElement");
      }
      static {
        __name2(this, "FontFaceElement");
      }
      constructor(document2, node2, captureTextNodes) {
        super(document2, node2, captureTextNodes);
        this.type = "font-face";
        this.ascent = this.getAttribute("ascent").getNumber();
        this.descent = this.getAttribute("descent").getNumber();
        this.unitsPerEm = this.getAttribute("units-per-em").getNumber();
      }
    };
    MissingGlyphElement = class extends PathElement {
      static {
        __name(this, "MissingGlyphElement");
      }
      static {
        __name2(this, "MissingGlyphElement");
      }
      constructor() {
        super(...arguments);
        this.type = "missing-glyph";
        this.horizAdvX = 0;
      }
    };
    TRefElement = class extends TextElement {
      static {
        __name(this, "TRefElement");
      }
      static {
        __name2(this, "TRefElement");
      }
      constructor() {
        super(...arguments);
        this.type = "tref";
      }
      getText() {
        var element = this.getHrefAttribute().getDefinition();
        if (element) {
          var firstChild = element.children[0];
          if (firstChild) {
            return firstChild.getText();
          }
        }
        return "";
      }
    };
    AElement = class extends TextElement {
      static {
        __name(this, "AElement");
      }
      static {
        __name2(this, "AElement");
      }
      constructor(document2, node2, captureTextNodes) {
        super(document2, node2, captureTextNodes);
        this.type = "a";
        var {
          childNodes
        } = node2;
        var firstChild = childNodes[0];
        var hasText = childNodes.length > 0 && Array.from(childNodes).every((node3) => node3.nodeType === 3);
        this.hasText = hasText;
        this.text = hasText ? this.getTextFromNode(firstChild) : "";
      }
      getText() {
        return this.text;
      }
      renderChildren(ctx) {
        if (this.hasText) {
          super.renderChildren(ctx);
          var {
            document: document2,
            x: x22,
            y: y3
          } = this;
          var {
            mouse
          } = document2.screen;
          var fontSize = new Property(document2, "fontSize", Font.parse(document2.ctx.font).fontSize);
          if (mouse.isWorking()) {
            mouse.checkBoundingBox(this, new BoundingBox(x22, y3 - fontSize.getPixels("y"), x22 + this.measureText(ctx), y3));
          }
        } else if (this.children.length > 0) {
          var g2 = new GElement(this.document, null);
          g2.children = this.children;
          g2.parent = this;
          g2.render(ctx);
        }
      }
      onClick() {
        var {
          window: window2
        } = this.document;
        if (window2) {
          window2.open(this.getHrefAttribute().getString());
        }
      }
      onMouseMove() {
        var ctx = this.document.ctx;
        ctx.canvas.style.cursor = "pointer";
      }
    };
    __name2(ownKeys$2, "ownKeys$2");
    __name2(_objectSpread$2, "_objectSpread$2");
    TextPathElement = class extends TextElement {
      static {
        __name(this, "TextPathElement");
      }
      static {
        __name2(this, "TextPathElement");
      }
      constructor(document2, node2, captureTextNodes) {
        super(document2, node2, captureTextNodes);
        this.type = "textPath";
        this.textWidth = 0;
        this.textHeight = 0;
        this.pathLength = -1;
        this.glyphInfo = null;
        this.letterSpacingCache = [];
        this.measuresCache = /* @__PURE__ */ new Map([["", 0]]);
        var pathElement = this.getHrefAttribute().getDefinition();
        this.text = this.getTextFromNode();
        this.dataArray = this.parsePathData(pathElement);
      }
      getText() {
        return this.text;
      }
      path(ctx) {
        var {
          dataArray
        } = this;
        if (ctx) {
          ctx.beginPath();
        }
        dataArray.forEach((_ref) => {
          var {
            type,
            points
          } = _ref;
          switch (type) {
            case PathParser.LINE_TO:
              if (ctx) {
                ctx.lineTo(points[0], points[1]);
              }
              break;
            case PathParser.MOVE_TO:
              if (ctx) {
                ctx.moveTo(points[0], points[1]);
              }
              break;
            case PathParser.CURVE_TO:
              if (ctx) {
                ctx.bezierCurveTo(points[0], points[1], points[2], points[3], points[4], points[5]);
              }
              break;
            case PathParser.QUAD_TO:
              if (ctx) {
                ctx.quadraticCurveTo(points[0], points[1], points[2], points[3]);
              }
              break;
            case PathParser.ARC: {
              var [cx, cy, rx, ry, theta, dTheta, psi, fs] = points;
              var r2 = rx > ry ? rx : ry;
              var scaleX = rx > ry ? 1 : rx / ry;
              var scaleY = rx > ry ? ry / rx : 1;
              if (ctx) {
                ctx.translate(cx, cy);
                ctx.rotate(psi);
                ctx.scale(scaleX, scaleY);
                ctx.arc(0, 0, r2, theta, theta + dTheta, Boolean(1 - fs));
                ctx.scale(1 / scaleX, 1 / scaleY);
                ctx.rotate(-psi);
                ctx.translate(-cx, -cy);
              }
              break;
            }
            case PathParser.CLOSE_PATH:
              if (ctx) {
                ctx.closePath();
              }
              break;
          }
        });
      }
      renderChildren(ctx) {
        this.setTextData(ctx);
        ctx.save();
        var textDecoration = this.parent.getStyle("text-decoration").getString();
        var fontSize = this.getFontSize();
        var {
          glyphInfo
        } = this;
        var fill = ctx.fillStyle;
        if (textDecoration === "underline") {
          ctx.beginPath();
        }
        glyphInfo.forEach((glyph, i33) => {
          var {
            p0,
            p1,
            rotation,
            text: partialText
          } = glyph;
          ctx.save();
          ctx.translate(p0.x, p0.y);
          ctx.rotate(rotation);
          if (ctx.fillStyle) {
            ctx.fillText(partialText, 0, 0);
          }
          if (ctx.strokeStyle) {
            ctx.strokeText(partialText, 0, 0);
          }
          ctx.restore();
          if (textDecoration === "underline") {
            if (i33 === 0) {
              ctx.moveTo(p0.x, p0.y + fontSize / 8);
            }
            ctx.lineTo(p1.x, p1.y + fontSize / 5);
          }
        });
        if (textDecoration === "underline") {
          ctx.lineWidth = fontSize / 20;
          ctx.strokeStyle = fill;
          ctx.stroke();
          ctx.closePath();
        }
        ctx.restore();
      }
      getLetterSpacingAt() {
        var idx = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : 0;
        return this.letterSpacingCache[idx] || 0;
      }
      findSegmentToFitChar(ctx, anchor, textFullWidth, fullPathWidth, spacesNumber, inputOffset, dy, c4, charI) {
        var offset = inputOffset;
        var glyphWidth = this.measureText(ctx, c4);
        if (c4 === " " && anchor === "justify" && textFullWidth < fullPathWidth) {
          glyphWidth += (fullPathWidth - textFullWidth) / spacesNumber;
        }
        if (charI > -1) {
          offset += this.getLetterSpacingAt(charI);
        }
        var splineStep = this.textHeight / 20;
        var p0 = this.getEquidistantPointOnPath(offset, splineStep, 0);
        var p1 = this.getEquidistantPointOnPath(offset + glyphWidth, splineStep, 0);
        var segment = {
          p0,
          p1
        };
        var rotation = p0 && p1 ? Math.atan2(p1.y - p0.y, p1.x - p0.x) : 0;
        if (dy) {
          var dyX = Math.cos(Math.PI / 2 + rotation) * dy;
          var dyY = Math.cos(-rotation) * dy;
          segment.p0 = _objectSpread$2(_objectSpread$2({}, p0), {}, {
            x: p0.x + dyX,
            y: p0.y + dyY
          });
          segment.p1 = _objectSpread$2(_objectSpread$2({}, p1), {}, {
            x: p1.x + dyX,
            y: p1.y + dyY
          });
        }
        offset += glyphWidth;
        return {
          offset,
          segment,
          rotation
        };
      }
      measureText(ctx, text3) {
        var {
          measuresCache
        } = this;
        var targetText = text3 || this.getText();
        if (measuresCache.has(targetText)) {
          return measuresCache.get(targetText);
        }
        var measure = this.measureTargetText(ctx, targetText);
        measuresCache.set(targetText, measure);
        return measure;
      }
      // This method supposes what all custom fonts already loaded.
      // If some font will be loaded after this method call, <textPath> will not be rendered correctly.
      // You need to call this method manually to update glyphs cache.
      setTextData(ctx) {
        if (this.glyphInfo) {
          return;
        }
        var renderText = this.getText();
        var chars = renderText.split("");
        var spacesNumber = renderText.split(" ").length - 1;
        var dx = this.parent.getAttribute("dx").split().map((_3) => _3.getPixels("x"));
        var dy = this.parent.getAttribute("dy").getPixels("y");
        var anchor = this.parent.getStyle("text-anchor").getString("start");
        var thisSpacing = this.getStyle("letter-spacing");
        var parentSpacing = this.parent.getStyle("letter-spacing");
        var letterSpacing = 0;
        if (!thisSpacing.hasValue() || thisSpacing.getValue() === "inherit") {
          letterSpacing = parentSpacing.getPixels();
        } else if (thisSpacing.hasValue()) {
          if (thisSpacing.getValue() !== "initial" && thisSpacing.getValue() !== "unset") {
            letterSpacing = thisSpacing.getPixels();
          }
        }
        var letterSpacingCache = [];
        var textLen = renderText.length;
        this.letterSpacingCache = letterSpacingCache;
        for (var i33 = 0; i33 < textLen; i33++) {
          letterSpacingCache.push(typeof dx[i33] !== "undefined" ? dx[i33] : letterSpacing);
        }
        var dxSum = letterSpacingCache.reduce((acc, cur, i4) => i4 === 0 ? 0 : acc + cur || 0, 0);
        var textWidth = this.measureText(ctx);
        var textFullWidth = Math.max(textWidth + dxSum, 0);
        this.textWidth = textWidth;
        this.textHeight = this.getFontSize();
        this.glyphInfo = [];
        var fullPathWidth = this.getPathLength();
        var startOffset = this.getStyle("startOffset").getNumber(0) * fullPathWidth;
        var offset = 0;
        if (anchor === "middle" || anchor === "center") {
          offset = -textFullWidth / 2;
        }
        if (anchor === "end" || anchor === "right") {
          offset = -textFullWidth;
        }
        offset += startOffset;
        chars.forEach((char, i4) => {
          var {
            offset: nextOffset,
            segment,
            rotation
          } = this.findSegmentToFitChar(ctx, anchor, textFullWidth, fullPathWidth, spacesNumber, offset, dy, char, i4);
          offset = nextOffset;
          if (!segment.p0 || !segment.p1) {
            return;
          }
          this.glyphInfo.push({
            // transposeX: midpoint.x,
            // transposeY: midpoint.y,
            text: chars[i4],
            p0: segment.p0,
            p1: segment.p1,
            rotation
          });
        });
      }
      parsePathData(path) {
        this.pathLength = -1;
        if (!path) {
          return [];
        }
        var pathCommands = [];
        var {
          pathParser
        } = path;
        pathParser.reset();
        while (!pathParser.isEnd()) {
          var {
            current
          } = pathParser;
          var startX = current ? current.x : 0;
          var startY = current ? current.y : 0;
          var command = pathParser.next();
          var nextCommandType = command.type;
          var points = [];
          switch (command.type) {
            case PathParser.MOVE_TO:
              this.pathM(pathParser, points);
              break;
            case PathParser.LINE_TO:
              nextCommandType = this.pathL(pathParser, points);
              break;
            case PathParser.HORIZ_LINE_TO:
              nextCommandType = this.pathH(pathParser, points);
              break;
            case PathParser.VERT_LINE_TO:
              nextCommandType = this.pathV(pathParser, points);
              break;
            case PathParser.CURVE_TO:
              this.pathC(pathParser, points);
              break;
            case PathParser.SMOOTH_CURVE_TO:
              nextCommandType = this.pathS(pathParser, points);
              break;
            case PathParser.QUAD_TO:
              this.pathQ(pathParser, points);
              break;
            case PathParser.SMOOTH_QUAD_TO:
              nextCommandType = this.pathT(pathParser, points);
              break;
            case PathParser.ARC:
              points = this.pathA(pathParser);
              break;
            case PathParser.CLOSE_PATH:
              PathElement.pathZ(pathParser);
              break;
          }
          if (command.type !== PathParser.CLOSE_PATH) {
            pathCommands.push({
              type: nextCommandType,
              points,
              start: {
                x: startX,
                y: startY
              },
              pathLength: this.calcLength(startX, startY, nextCommandType, points)
            });
          } else {
            pathCommands.push({
              type: PathParser.CLOSE_PATH,
              points: [],
              pathLength: 0
            });
          }
        }
        return pathCommands;
      }
      pathM(pathParser, points) {
        var {
          x: x22,
          y: y3
        } = PathElement.pathM(pathParser).point;
        points.push(x22, y3);
      }
      pathL(pathParser, points) {
        var {
          x: x22,
          y: y3
        } = PathElement.pathL(pathParser).point;
        points.push(x22, y3);
        return PathParser.LINE_TO;
      }
      pathH(pathParser, points) {
        var {
          x: x22,
          y: y3
        } = PathElement.pathH(pathParser).point;
        points.push(x22, y3);
        return PathParser.LINE_TO;
      }
      pathV(pathParser, points) {
        var {
          x: x22,
          y: y3
        } = PathElement.pathV(pathParser).point;
        points.push(x22, y3);
        return PathParser.LINE_TO;
      }
      pathC(pathParser, points) {
        var {
          point,
          controlPoint,
          currentPoint
        } = PathElement.pathC(pathParser);
        points.push(point.x, point.y, controlPoint.x, controlPoint.y, currentPoint.x, currentPoint.y);
      }
      pathS(pathParser, points) {
        var {
          point,
          controlPoint,
          currentPoint
        } = PathElement.pathS(pathParser);
        points.push(point.x, point.y, controlPoint.x, controlPoint.y, currentPoint.x, currentPoint.y);
        return PathParser.CURVE_TO;
      }
      pathQ(pathParser, points) {
        var {
          controlPoint,
          currentPoint
        } = PathElement.pathQ(pathParser);
        points.push(controlPoint.x, controlPoint.y, currentPoint.x, currentPoint.y);
      }
      pathT(pathParser, points) {
        var {
          controlPoint,
          currentPoint
        } = PathElement.pathT(pathParser);
        points.push(controlPoint.x, controlPoint.y, currentPoint.x, currentPoint.y);
        return PathParser.QUAD_TO;
      }
      pathA(pathParser) {
        var {
          rX,
          rY,
          sweepFlag,
          xAxisRotation,
          centp,
          a1,
          ad
        } = PathElement.pathA(pathParser);
        if (sweepFlag === 0 && ad > 0) {
          ad -= 2 * Math.PI;
        }
        if (sweepFlag === 1 && ad < 0) {
          ad += 2 * Math.PI;
        }
        return [centp.x, centp.y, rX, rY, a1, ad, xAxisRotation, sweepFlag];
      }
      calcLength(x22, y3, commandType, points) {
        var len = 0;
        var p1 = null;
        var p22 = null;
        var t3 = 0;
        switch (commandType) {
          case PathParser.LINE_TO:
            return this.getLineLength(x22, y3, points[0], points[1]);
          case PathParser.CURVE_TO:
            len = 0;
            p1 = this.getPointOnCubicBezier(0, x22, y3, points[0], points[1], points[2], points[3], points[4], points[5]);
            for (t3 = 0.01; t3 <= 1; t3 += 0.01) {
              p22 = this.getPointOnCubicBezier(t3, x22, y3, points[0], points[1], points[2], points[3], points[4], points[5]);
              len += this.getLineLength(p1.x, p1.y, p22.x, p22.y);
              p1 = p22;
            }
            return len;
          case PathParser.QUAD_TO:
            len = 0;
            p1 = this.getPointOnQuadraticBezier(0, x22, y3, points[0], points[1], points[2], points[3]);
            for (t3 = 0.01; t3 <= 1; t3 += 0.01) {
              p22 = this.getPointOnQuadraticBezier(t3, x22, y3, points[0], points[1], points[2], points[3]);
              len += this.getLineLength(p1.x, p1.y, p22.x, p22.y);
              p1 = p22;
            }
            return len;
          case PathParser.ARC: {
            len = 0;
            var start = points[4];
            var dTheta = points[5];
            var end = points[4] + dTheta;
            var inc = Math.PI / 180;
            if (Math.abs(start - end) < inc) {
              inc = Math.abs(start - end);
            }
            p1 = this.getPointOnEllipticalArc(points[0], points[1], points[2], points[3], start, 0);
            if (dTheta < 0) {
              for (t3 = start - inc; t3 > end; t3 -= inc) {
                p22 = this.getPointOnEllipticalArc(points[0], points[1], points[2], points[3], t3, 0);
                len += this.getLineLength(p1.x, p1.y, p22.x, p22.y);
                p1 = p22;
              }
            } else {
              for (t3 = start + inc; t3 < end; t3 += inc) {
                p22 = this.getPointOnEllipticalArc(points[0], points[1], points[2], points[3], t3, 0);
                len += this.getLineLength(p1.x, p1.y, p22.x, p22.y);
                p1 = p22;
              }
            }
            p22 = this.getPointOnEllipticalArc(points[0], points[1], points[2], points[3], end, 0);
            len += this.getLineLength(p1.x, p1.y, p22.x, p22.y);
            return len;
          }
        }
        return 0;
      }
      getPointOnLine(dist, p1x, p1y, p2x, p2y) {
        var fromX = arguments.length > 5 && arguments[5] !== void 0 ? arguments[5] : p1x;
        var fromY = arguments.length > 6 && arguments[6] !== void 0 ? arguments[6] : p1y;
        var m4 = (p2y - p1y) / (p2x - p1x + PSEUDO_ZERO);
        var run = Math.sqrt(dist * dist / (1 + m4 * m4));
        if (p2x < p1x) {
          run *= -1;
        }
        var rise = m4 * run;
        var pt2 = null;
        if (p2x === p1x) {
          pt2 = {
            x: fromX,
            y: fromY + rise
          };
        } else if ((fromY - p1y) / (fromX - p1x + PSEUDO_ZERO) === m4) {
          pt2 = {
            x: fromX + run,
            y: fromY + rise
          };
        } else {
          var ix = 0;
          var iy = 0;
          var len = this.getLineLength(p1x, p1y, p2x, p2y);
          if (len < PSEUDO_ZERO) {
            return null;
          }
          var u3 = (fromX - p1x) * (p2x - p1x) + (fromY - p1y) * (p2y - p1y);
          u3 /= len * len;
          ix = p1x + u3 * (p2x - p1x);
          iy = p1y + u3 * (p2y - p1y);
          var pRise = this.getLineLength(fromX, fromY, ix, iy);
          var pRun = Math.sqrt(dist * dist - pRise * pRise);
          run = Math.sqrt(pRun * pRun / (1 + m4 * m4));
          if (p2x < p1x) {
            run *= -1;
          }
          rise = m4 * run;
          pt2 = {
            x: ix + run,
            y: iy + rise
          };
        }
        return pt2;
      }
      getPointOnPath(distance) {
        var fullLen = this.getPathLength();
        var cumulativePathLength = 0;
        var p3 = null;
        if (distance < -5e-5 || distance - 5e-5 > fullLen) {
          return null;
        }
        var {
          dataArray
        } = this;
        for (var command of dataArray) {
          if (command && (command.pathLength < 5e-5 || cumulativePathLength + command.pathLength + 5e-5 < distance)) {
            cumulativePathLength += command.pathLength;
            continue;
          }
          var delta = distance - cumulativePathLength;
          var currentT = 0;
          switch (command.type) {
            case PathParser.LINE_TO:
              p3 = this.getPointOnLine(delta, command.start.x, command.start.y, command.points[0], command.points[1], command.start.x, command.start.y);
              break;
            case PathParser.ARC: {
              var start = command.points[4];
              var dTheta = command.points[5];
              var end = command.points[4] + dTheta;
              currentT = start + delta / command.pathLength * dTheta;
              if (dTheta < 0 && currentT < end || dTheta >= 0 && currentT > end) {
                break;
              }
              p3 = this.getPointOnEllipticalArc(command.points[0], command.points[1], command.points[2], command.points[3], currentT, command.points[6]);
              break;
            }
            case PathParser.CURVE_TO:
              currentT = delta / command.pathLength;
              if (currentT > 1) {
                currentT = 1;
              }
              p3 = this.getPointOnCubicBezier(currentT, command.start.x, command.start.y, command.points[0], command.points[1], command.points[2], command.points[3], command.points[4], command.points[5]);
              break;
            case PathParser.QUAD_TO:
              currentT = delta / command.pathLength;
              if (currentT > 1) {
                currentT = 1;
              }
              p3 = this.getPointOnQuadraticBezier(currentT, command.start.x, command.start.y, command.points[0], command.points[1], command.points[2], command.points[3]);
              break;
          }
          if (p3) {
            return p3;
          }
          break;
        }
        return null;
      }
      getLineLength(x1, y1, x22, y22) {
        return Math.sqrt((x22 - x1) * (x22 - x1) + (y22 - y1) * (y22 - y1));
      }
      getPathLength() {
        if (this.pathLength === -1) {
          this.pathLength = this.dataArray.reduce((length, command) => command.pathLength > 0 ? length + command.pathLength : length, 0);
        }
        return this.pathLength;
      }
      getPointOnCubicBezier(pct, p1x, p1y, p2x, p2y, p3x, p3y, p4x, p4y) {
        var x22 = p4x * CB1(pct) + p3x * CB2(pct) + p2x * CB3(pct) + p1x * CB4(pct);
        var y3 = p4y * CB1(pct) + p3y * CB2(pct) + p2y * CB3(pct) + p1y * CB4(pct);
        return {
          x: x22,
          y: y3
        };
      }
      getPointOnQuadraticBezier(pct, p1x, p1y, p2x, p2y, p3x, p3y) {
        var x22 = p3x * QB1(pct) + p2x * QB2(pct) + p1x * QB3(pct);
        var y3 = p3y * QB1(pct) + p2y * QB2(pct) + p1y * QB3(pct);
        return {
          x: x22,
          y: y3
        };
      }
      getPointOnEllipticalArc(cx, cy, rx, ry, theta, psi) {
        var cosPsi = Math.cos(psi);
        var sinPsi = Math.sin(psi);
        var pt2 = {
          x: rx * Math.cos(theta),
          y: ry * Math.sin(theta)
        };
        return {
          x: cx + (pt2.x * cosPsi - pt2.y * sinPsi),
          y: cy + (pt2.x * sinPsi + pt2.y * cosPsi)
        };
      }
      // TODO need some optimisations. possibly build cache only for curved segments?
      buildEquidistantCache(inputStep, inputPrecision) {
        var fullLen = this.getPathLength();
        var precision = inputPrecision || 0.25;
        var step = inputStep || fullLen / 100;
        if (!this.equidistantCache || this.equidistantCache.step !== step || this.equidistantCache.precision !== precision) {
          this.equidistantCache = {
            step,
            precision,
            points: []
          };
          var s3 = 0;
          for (var l3 = 0; l3 <= fullLen; l3 += precision) {
            var p0 = this.getPointOnPath(l3);
            var p1 = this.getPointOnPath(l3 + precision);
            if (!p0 || !p1) {
              continue;
            }
            s3 += this.getLineLength(p0.x, p0.y, p1.x, p1.y);
            if (s3 >= step) {
              this.equidistantCache.points.push({
                x: p0.x,
                y: p0.y,
                distance: l3
              });
              s3 -= step;
            }
          }
        }
      }
      getEquidistantPointOnPath(targetDistance, step, precision) {
        this.buildEquidistantCache(step, precision);
        if (targetDistance < 0 || targetDistance - this.getPathLength() > 5e-5) {
          return null;
        }
        var idx = Math.round(targetDistance / this.getPathLength() * (this.equidistantCache.points.length - 1));
        return this.equidistantCache.points[idx] || null;
      }
    };
    dataUriRegex = /^\s*data:(([^/,;]+\/[^/,;]+)(?:;([^,;=]+=[^,;=]+))?)?(?:;(base64))?,(.*)$/i;
    ImageElement = class extends RenderedElement {
      static {
        __name(this, "ImageElement");
      }
      static {
        __name2(this, "ImageElement");
      }
      constructor(document2, node2, captureTextNodes) {
        super(document2, node2, captureTextNodes);
        this.type = "image";
        this.loaded = false;
        var href = this.getHrefAttribute().getString();
        if (!href) {
          return;
        }
        var isSvg = href.endsWith(".svg") || /^\s*data:image\/svg\+xml/i.test(href);
        document2.images.push(this);
        if (!isSvg) {
          void this.loadImage(href);
        } else {
          void this.loadSvg(href);
        }
        this.isSvg = isSvg;
      }
      loadImage(href) {
        var _this = this;
        return _asyncToGenerator(function* () {
          try {
            var image = yield _this.document.createImage(href);
            _this.image = image;
          } catch (err2) {
            console.error('Error while loading image "'.concat(href, '":'), err2);
          }
          _this.loaded = true;
        })();
      }
      loadSvg(href) {
        var _this2 = this;
        return _asyncToGenerator(function* () {
          var match2 = dataUriRegex.exec(href);
          if (match2) {
            var data = match2[5];
            if (match2[4] === "base64") {
              _this2.image = atob(data);
            } else {
              _this2.image = decodeURIComponent(data);
            }
          } else {
            try {
              var response = yield _this2.document.fetch(href);
              var svg2 = yield response.text();
              _this2.image = svg2;
            } catch (err2) {
              console.error('Error while loading image "'.concat(href, '":'), err2);
            }
          }
          _this2.loaded = true;
        })();
      }
      renderChildren(ctx) {
        var {
          document: document2,
          image,
          loaded
        } = this;
        var x22 = this.getAttribute("x").getPixels("x");
        var y3 = this.getAttribute("y").getPixels("y");
        var width = this.getStyle("width").getPixels("x");
        var height = this.getStyle("height").getPixels("y");
        if (!loaded || !image || !width || !height) {
          return;
        }
        ctx.save();
        ctx.translate(x22, y3);
        if (this.isSvg) {
          var subDocument = document2.canvg.forkString(ctx, this.image, {
            ignoreMouse: true,
            ignoreAnimation: true,
            ignoreDimensions: true,
            ignoreClear: true,
            offsetX: 0,
            offsetY: 0,
            scaleWidth: width,
            scaleHeight: height
          });
          subDocument.document.documentElement.parent = this;
          void subDocument.render();
        } else {
          var _image = this.image;
          document2.setViewBox({
            ctx,
            aspectRatio: this.getAttribute("preserveAspectRatio").getString(),
            width,
            desiredWidth: _image.width,
            height,
            desiredHeight: _image.height
          });
          if (this.loaded) {
            if (typeof _image.complete === "undefined" || _image.complete) {
              ctx.drawImage(_image, 0, 0);
            }
          }
        }
        ctx.restore();
      }
      getBoundingBox() {
        var x22 = this.getAttribute("x").getPixels("x");
        var y3 = this.getAttribute("y").getPixels("y");
        var width = this.getStyle("width").getPixels("x");
        var height = this.getStyle("height").getPixels("y");
        return new BoundingBox(x22, y3, x22 + width, y3 + height);
      }
    };
    SymbolElement = class extends RenderedElement {
      static {
        __name(this, "SymbolElement");
      }
      static {
        __name2(this, "SymbolElement");
      }
      constructor() {
        super(...arguments);
        this.type = "symbol";
      }
      render(_3) {
      }
    };
    SVGFontLoader = class {
      static {
        __name(this, "SVGFontLoader");
      }
      static {
        __name2(this, "SVGFontLoader");
      }
      constructor(document2) {
        this.document = document2;
        this.loaded = false;
        document2.fonts.push(this);
      }
      load(fontFamily, url) {
        var _this = this;
        return _asyncToGenerator(function* () {
          try {
            var {
              document: document2
            } = _this;
            var svgDocument = yield document2.canvg.parser.load(url);
            var fonts = svgDocument.getElementsByTagName("font");
            Array.from(fonts).forEach((fontNode) => {
              var font = document2.createElement(fontNode);
              document2.definitions[fontFamily] = font;
            });
          } catch (err2) {
            console.error('Error while loading font "'.concat(url, '":'), err2);
          }
          _this.loaded = true;
        })();
      }
    };
    StyleElement = class extends Element {
      static {
        __name(this, "StyleElement");
      }
      static {
        __name2(this, "StyleElement");
      }
      constructor(document2, node2, captureTextNodes) {
        super(document2, node2, captureTextNodes);
        this.type = "style";
        var css = compressSpaces(
          Array.from(node2.childNodes).map((_3) => _3.textContent).join("").replace(/(\/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*+\/)|(^[\s]*\/\/.*)/gm, "").replace(/@import.*;/g, "")
          // remove imports
        );
        var cssDefs = css.split("}");
        cssDefs.forEach((_3) => {
          var def = _3.trim();
          if (!def) {
            return;
          }
          var cssParts = def.split("{");
          var cssClasses = cssParts[0].split(",");
          var cssProps = cssParts[1].split(";");
          cssClasses.forEach((_4) => {
            var cssClass = _4.trim();
            if (!cssClass) {
              return;
            }
            var props = document2.styles[cssClass] || {};
            cssProps.forEach((cssProp) => {
              var prop = cssProp.indexOf(":");
              var name = cssProp.substr(0, prop).trim();
              var value = cssProp.substr(prop + 1, cssProp.length - prop).trim();
              if (name && value) {
                props[name] = new Property(document2, name, value);
              }
            });
            document2.styles[cssClass] = props;
            document2.stylesSpecificity[cssClass] = getSelectorSpecificity(cssClass);
            if (cssClass === "@font-face") {
              var fontFamily = props["font-family"].getString().replace(/"|'/g, "");
              var srcs = props.src.getString().split(",");
              srcs.forEach((src) => {
                if (src.indexOf('format("svg")') > 0) {
                  var url = parseExternalUrl(src);
                  if (url) {
                    void new SVGFontLoader(document2).load(fontFamily, url);
                  }
                }
              });
            }
          });
        });
      }
    };
    StyleElement.parseExternalUrl = parseExternalUrl;
    UseElement = class extends RenderedElement {
      static {
        __name(this, "UseElement");
      }
      static {
        __name2(this, "UseElement");
      }
      constructor() {
        super(...arguments);
        this.type = "use";
      }
      setContext(ctx) {
        super.setContext(ctx);
        var xAttr = this.getAttribute("x");
        var yAttr = this.getAttribute("y");
        if (xAttr.hasValue()) {
          ctx.translate(xAttr.getPixels("x"), 0);
        }
        if (yAttr.hasValue()) {
          ctx.translate(0, yAttr.getPixels("y"));
        }
      }
      path(ctx) {
        var {
          element
        } = this;
        if (element) {
          element.path(ctx);
        }
      }
      renderChildren(ctx) {
        var {
          document: document2,
          element
        } = this;
        if (element) {
          var tempSvg = element;
          if (element.type === "symbol") {
            tempSvg = new SVGElement(document2, null);
            tempSvg.attributes.viewBox = new Property(document2, "viewBox", element.getAttribute("viewBox").getString());
            tempSvg.attributes.preserveAspectRatio = new Property(document2, "preserveAspectRatio", element.getAttribute("preserveAspectRatio").getString());
            tempSvg.attributes.overflow = new Property(document2, "overflow", element.getAttribute("overflow").getString());
            tempSvg.children = element.children;
            element.styles.opacity = new Property(document2, "opacity", this.calculateOpacity());
          }
          if (tempSvg.type === "svg") {
            var widthStyle = this.getStyle("width", false, true);
            var heightStyle = this.getStyle("height", false, true);
            if (widthStyle.hasValue()) {
              tempSvg.attributes.width = new Property(document2, "width", widthStyle.getString());
            }
            if (heightStyle.hasValue()) {
              tempSvg.attributes.height = new Property(document2, "height", heightStyle.getString());
            }
          }
          var oldParent = tempSvg.parent;
          tempSvg.parent = this;
          tempSvg.render(ctx);
          tempSvg.parent = oldParent;
        }
      }
      getBoundingBox(ctx) {
        var {
          element
        } = this;
        if (element) {
          return element.getBoundingBox(ctx);
        }
        return null;
      }
      elementTransform() {
        var {
          document: document2,
          element
        } = this;
        return Transform.fromElement(document2, element);
      }
      get element() {
        if (!this.cachedElement) {
          this.cachedElement = this.getHrefAttribute().getDefinition();
        }
        return this.cachedElement;
      }
    };
    __name2(imGet, "imGet");
    __name2(imSet, "imSet");
    __name2(m2, "m");
    __name2(c2, "c");
    FeColorMatrixElement = class extends Element {
      static {
        __name(this, "FeColorMatrixElement");
      }
      static {
        __name2(this, "FeColorMatrixElement");
      }
      constructor(document2, node2, captureTextNodes) {
        super(document2, node2, captureTextNodes);
        this.type = "feColorMatrix";
        var matrix = toNumbers(this.getAttribute("values").getString());
        switch (this.getAttribute("type").getString("matrix")) {
          // http://www.w3.org/TR/SVG/filters.html#feColorMatrixElement
          case "saturate": {
            var s3 = matrix[0];
            matrix = [0.213 + 0.787 * s3, 0.715 - 0.715 * s3, 0.072 - 0.072 * s3, 0, 0, 0.213 - 0.213 * s3, 0.715 + 0.285 * s3, 0.072 - 0.072 * s3, 0, 0, 0.213 - 0.213 * s3, 0.715 - 0.715 * s3, 0.072 + 0.928 * s3, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1];
            break;
          }
          case "hueRotate": {
            var a3 = matrix[0] * Math.PI / 180;
            matrix = [c2(a3, 0.213, 0.787, -0.213), c2(a3, 0.715, -0.715, -0.715), c2(a3, 0.072, -0.072, 0.928), 0, 0, c2(a3, 0.213, -0.213, 0.143), c2(a3, 0.715, 0.285, 0.14), c2(a3, 0.072, -0.072, -0.283), 0, 0, c2(a3, 0.213, -0.213, -0.787), c2(a3, 0.715, -0.715, 0.715), c2(a3, 0.072, 0.928, 0.072), 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1];
            break;
          }
          case "luminanceToAlpha":
            matrix = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.2125, 0.7154, 0.0721, 0, 0, 0, 0, 0, 0, 1];
            break;
        }
        this.matrix = matrix;
        this.includeOpacity = this.getAttribute("includeOpacity").hasValue();
      }
      apply(ctx, _x, _y, width, height) {
        var {
          includeOpacity,
          matrix
        } = this;
        var srcData = ctx.getImageData(0, 0, width, height);
        for (var y3 = 0; y3 < height; y3++) {
          for (var x22 = 0; x22 < width; x22++) {
            var r2 = imGet(srcData.data, x22, y3, width, height, 0);
            var g2 = imGet(srcData.data, x22, y3, width, height, 1);
            var b2 = imGet(srcData.data, x22, y3, width, height, 2);
            var a3 = imGet(srcData.data, x22, y3, width, height, 3);
            var nr = m2(matrix, 0, r2) + m2(matrix, 1, g2) + m2(matrix, 2, b2) + m2(matrix, 3, a3) + m2(matrix, 4, 1);
            var ng = m2(matrix, 5, r2) + m2(matrix, 6, g2) + m2(matrix, 7, b2) + m2(matrix, 8, a3) + m2(matrix, 9, 1);
            var nb = m2(matrix, 10, r2) + m2(matrix, 11, g2) + m2(matrix, 12, b2) + m2(matrix, 13, a3) + m2(matrix, 14, 1);
            var na = m2(matrix, 15, r2) + m2(matrix, 16, g2) + m2(matrix, 17, b2) + m2(matrix, 18, a3) + m2(matrix, 19, 1);
            if (includeOpacity) {
              nr = 0;
              ng = 0;
              nb = 0;
              na *= a3 / 255;
            }
            imSet(srcData.data, x22, y3, width, height, 0, nr);
            imSet(srcData.data, x22, y3, width, height, 1, ng);
            imSet(srcData.data, x22, y3, width, height, 2, nb);
            imSet(srcData.data, x22, y3, width, height, 3, na);
          }
        }
        ctx.clearRect(0, 0, width, height);
        ctx.putImageData(srcData, 0, 0);
      }
    };
    MaskElement = class _MaskElement extends Element {
      static {
        __name(this, "_MaskElement");
      }
      static {
        __name2(this, "MaskElement");
      }
      constructor() {
        super(...arguments);
        this.type = "mask";
      }
      apply(ctx, element) {
        var {
          document: document2
        } = this;
        var x22 = this.getAttribute("x").getPixels("x");
        var y3 = this.getAttribute("y").getPixels("y");
        var width = this.getStyle("width").getPixels("x");
        var height = this.getStyle("height").getPixels("y");
        if (!width && !height) {
          var boundingBox = new BoundingBox();
          this.children.forEach((child) => {
            boundingBox.addBoundingBox(child.getBoundingBox(ctx));
          });
          x22 = Math.floor(boundingBox.x1);
          y3 = Math.floor(boundingBox.y1);
          width = Math.floor(boundingBox.width);
          height = Math.floor(boundingBox.height);
        }
        var ignoredStyles = this.removeStyles(element, _MaskElement.ignoreStyles);
        var maskCanvas = document2.createCanvas(x22 + width, y3 + height);
        var maskCtx = maskCanvas.getContext("2d");
        document2.screen.setDefaults(maskCtx);
        this.renderChildren(maskCtx);
        new FeColorMatrixElement(document2, {
          nodeType: 1,
          childNodes: [],
          attributes: [{
            nodeName: "type",
            value: "luminanceToAlpha"
          }, {
            nodeName: "includeOpacity",
            value: "true"
          }]
        }).apply(maskCtx, 0, 0, x22 + width, y3 + height);
        var tmpCanvas = document2.createCanvas(x22 + width, y3 + height);
        var tmpCtx = tmpCanvas.getContext("2d");
        document2.screen.setDefaults(tmpCtx);
        element.render(tmpCtx);
        tmpCtx.globalCompositeOperation = "destination-in";
        tmpCtx.fillStyle = maskCtx.createPattern(maskCanvas, "no-repeat");
        tmpCtx.fillRect(0, 0, x22 + width, y3 + height);
        ctx.fillStyle = tmpCtx.createPattern(tmpCanvas, "no-repeat");
        ctx.fillRect(0, 0, x22 + width, y3 + height);
        this.restoreStyles(element, ignoredStyles);
      }
      render(_3) {
      }
    };
    MaskElement.ignoreStyles = ["mask", "transform", "clip-path"];
    noop = /* @__PURE__ */ __name2(() => {
    }, "noop");
    ClipPathElement = class extends Element {
      static {
        __name(this, "ClipPathElement");
      }
      static {
        __name2(this, "ClipPathElement");
      }
      constructor() {
        super(...arguments);
        this.type = "clipPath";
      }
      apply(ctx) {
        var {
          document: document2
        } = this;
        var contextProto = Reflect.getPrototypeOf(ctx);
        var {
          beginPath,
          closePath
        } = ctx;
        if (contextProto) {
          contextProto.beginPath = noop;
          contextProto.closePath = noop;
        }
        Reflect.apply(beginPath, ctx, []);
        this.children.forEach((child) => {
          if (typeof child.path === "undefined") {
            return;
          }
          var transform = typeof child.elementTransform !== "undefined" ? child.elementTransform() : null;
          if (!transform) {
            transform = Transform.fromElement(document2, child);
          }
          if (transform) {
            transform.apply(ctx);
          }
          child.path(ctx);
          if (contextProto) {
            contextProto.closePath = closePath;
          }
          if (transform) {
            transform.unapply(ctx);
          }
        });
        Reflect.apply(closePath, ctx, []);
        ctx.clip();
        if (contextProto) {
          contextProto.beginPath = beginPath;
          contextProto.closePath = closePath;
        }
      }
      render(_3) {
      }
    };
    FilterElement = class _FilterElement extends Element {
      static {
        __name(this, "_FilterElement");
      }
      static {
        __name2(this, "FilterElement");
      }
      constructor() {
        super(...arguments);
        this.type = "filter";
      }
      apply(ctx, element) {
        var {
          document: document2,
          children
        } = this;
        var boundingBox = element.getBoundingBox(ctx);
        if (!boundingBox) {
          return;
        }
        var px = 0;
        var py = 0;
        children.forEach((child) => {
          var efd = child.extraFilterDistance || 0;
          px = Math.max(px, efd);
          py = Math.max(py, efd);
        });
        var width = Math.floor(boundingBox.width);
        var height = Math.floor(boundingBox.height);
        var tmpCanvasWidth = width + 2 * px;
        var tmpCanvasHeight = height + 2 * py;
        if (tmpCanvasWidth < 1 || tmpCanvasHeight < 1) {
          return;
        }
        var x22 = Math.floor(boundingBox.x);
        var y3 = Math.floor(boundingBox.y);
        var ignoredStyles = this.removeStyles(element, _FilterElement.ignoreStyles);
        var tmpCanvas = document2.createCanvas(tmpCanvasWidth, tmpCanvasHeight);
        var tmpCtx = tmpCanvas.getContext("2d");
        document2.screen.setDefaults(tmpCtx);
        tmpCtx.translate(-x22 + px, -y3 + py);
        element.render(tmpCtx);
        children.forEach((child) => {
          if (typeof child.apply === "function") {
            child.apply(tmpCtx, 0, 0, tmpCanvasWidth, tmpCanvasHeight);
          }
        });
        ctx.drawImage(tmpCanvas, 0, 0, tmpCanvasWidth, tmpCanvasHeight, x22 - px, y3 - py, tmpCanvasWidth, tmpCanvasHeight);
        this.restoreStyles(element, ignoredStyles);
      }
      render(_3) {
      }
    };
    FilterElement.ignoreStyles = ["filter", "transform", "clip-path"];
    FeDropShadowElement = class extends Element {
      static {
        __name(this, "FeDropShadowElement");
      }
      static {
        __name2(this, "FeDropShadowElement");
      }
      constructor(document2, node2, captureTextNodes) {
        super(document2, node2, captureTextNodes);
        this.type = "feDropShadow";
        this.addStylesFromStyleDefinition();
      }
      apply(_3, _x, _y, _width, _height) {
      }
    };
    FeMorphologyElement = class extends Element {
      static {
        __name(this, "FeMorphologyElement");
      }
      static {
        __name2(this, "FeMorphologyElement");
      }
      constructor() {
        super(...arguments);
        this.type = "feMorphology";
      }
      apply(_3, _x, _y, _width, _height) {
      }
    };
    FeCompositeElement = class extends Element {
      static {
        __name(this, "FeCompositeElement");
      }
      static {
        __name2(this, "FeCompositeElement");
      }
      constructor() {
        super(...arguments);
        this.type = "feComposite";
      }
      apply(_3, _x, _y, _width, _height) {
      }
    };
    FeGaussianBlurElement = class extends Element {
      static {
        __name(this, "FeGaussianBlurElement");
      }
      static {
        __name2(this, "FeGaussianBlurElement");
      }
      constructor(document2, node2, captureTextNodes) {
        super(document2, node2, captureTextNodes);
        this.type = "feGaussianBlur";
        this.blurRadius = Math.floor(this.getAttribute("stdDeviation").getNumber());
        this.extraFilterDistance = this.blurRadius;
      }
      apply(ctx, x22, y3, width, height) {
        var {
          document: document2,
          blurRadius
        } = this;
        var body = document2.window ? document2.window.document.body : null;
        var canvas = ctx.canvas;
        canvas.id = document2.getUniqueId();
        if (body) {
          canvas.style.display = "none";
          body.appendChild(canvas);
        }
        processCanvasRGBA(canvas, x22, y3, width, height, blurRadius);
        if (body) {
          body.removeChild(canvas);
        }
      }
    };
    TitleElement = class extends Element {
      static {
        __name(this, "TitleElement");
      }
      static {
        __name2(this, "TitleElement");
      }
      constructor() {
        super(...arguments);
        this.type = "title";
      }
    };
    DescElement = class extends Element {
      static {
        __name(this, "DescElement");
      }
      static {
        __name2(this, "DescElement");
      }
      constructor() {
        super(...arguments);
        this.type = "desc";
      }
    };
    elements = {
      "svg": SVGElement,
      "rect": RectElement,
      "circle": CircleElement,
      "ellipse": EllipseElement,
      "line": LineElement,
      "polyline": PolylineElement,
      "polygon": PolygonElement,
      "path": PathElement,
      "pattern": PatternElement,
      "marker": MarkerElement,
      "defs": DefsElement,
      "linearGradient": LinearGradientElement,
      "radialGradient": RadialGradientElement,
      "stop": StopElement,
      "animate": AnimateElement,
      "animateColor": AnimateColorElement,
      "animateTransform": AnimateTransformElement,
      "font": FontElement,
      "font-face": FontFaceElement,
      "missing-glyph": MissingGlyphElement,
      "glyph": GlyphElement,
      "text": TextElement,
      "tspan": TSpanElement,
      "tref": TRefElement,
      "a": AElement,
      "textPath": TextPathElement,
      "image": ImageElement,
      "g": GElement,
      "symbol": SymbolElement,
      "style": StyleElement,
      "use": UseElement,
      "mask": MaskElement,
      "clipPath": ClipPathElement,
      "filter": FilterElement,
      "feDropShadow": FeDropShadowElement,
      "feMorphology": FeMorphologyElement,
      "feComposite": FeCompositeElement,
      "feColorMatrix": FeColorMatrixElement,
      "feGaussianBlur": FeGaussianBlurElement,
      "title": TitleElement,
      "desc": DescElement
    };
    __name2(ownKeys$1, "ownKeys$1");
    __name2(_objectSpread$1, "_objectSpread$1");
    __name2(createCanvas, "createCanvas");
    __name2(createImage, "createImage");
    __name2(_createImage, "_createImage");
    Document = class _Document {
      static {
        __name(this, "_Document");
      }
      static {
        __name2(this, "Document");
      }
      constructor(canvg) {
        var {
          rootEmSize = 12,
          emSize = 12,
          createCanvas: createCanvas2 = _Document.createCanvas,
          createImage: createImage2 = _Document.createImage,
          anonymousCrossOrigin
        } = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
        this.canvg = canvg;
        this.definitions = /* @__PURE__ */ Object.create(null);
        this.styles = /* @__PURE__ */ Object.create(null);
        this.stylesSpecificity = /* @__PURE__ */ Object.create(null);
        this.images = [];
        this.fonts = [];
        this.emSizeStack = [];
        this.uniqueId = 0;
        this.screen = canvg.screen;
        this.rootEmSize = rootEmSize;
        this.emSize = emSize;
        this.createCanvas = createCanvas2;
        this.createImage = this.bindCreateImage(createImage2, anonymousCrossOrigin);
        this.screen.wait(this.isImagesLoaded.bind(this));
        this.screen.wait(this.isFontsLoaded.bind(this));
      }
      bindCreateImage(createImage2, anonymousCrossOrigin) {
        if (typeof anonymousCrossOrigin === "boolean") {
          return (source, forceAnonymousCrossOrigin) => createImage2(source, typeof forceAnonymousCrossOrigin === "boolean" ? forceAnonymousCrossOrigin : anonymousCrossOrigin);
        }
        return createImage2;
      }
      get window() {
        return this.screen.window;
      }
      get fetch() {
        return this.screen.fetch;
      }
      get ctx() {
        return this.screen.ctx;
      }
      get emSize() {
        var {
          emSizeStack
        } = this;
        return emSizeStack[emSizeStack.length - 1];
      }
      set emSize(value) {
        var {
          emSizeStack
        } = this;
        emSizeStack.push(value);
      }
      popEmSize() {
        var {
          emSizeStack
        } = this;
        emSizeStack.pop();
      }
      getUniqueId() {
        return "canvg".concat(++this.uniqueId);
      }
      isImagesLoaded() {
        return this.images.every((_3) => _3.loaded);
      }
      isFontsLoaded() {
        return this.fonts.every((_3) => _3.loaded);
      }
      createDocumentElement(document2) {
        var documentElement = this.createElement(document2.documentElement);
        documentElement.root = true;
        documentElement.addStylesFromStyleDefinition();
        this.documentElement = documentElement;
        return documentElement;
      }
      createElement(node2) {
        var elementType = node2.nodeName.replace(/^[^:]+:/, "");
        var ElementType = _Document.elementTypes[elementType];
        if (typeof ElementType !== "undefined") {
          return new ElementType(this, node2);
        }
        return new UnknownElement(this, node2);
      }
      createTextNode(node2) {
        return new TextNode(this, node2);
      }
      setViewBox(config) {
        this.screen.setViewBox(_objectSpread$1({
          document: this
        }, config));
      }
    };
    Document.createCanvas = createCanvas;
    Document.createImage = createImage;
    Document.elementTypes = elements;
    __name2(ownKeys, "ownKeys");
    __name2(_objectSpread, "_objectSpread");
    Canvg = class _Canvg {
      static {
        __name(this, "_Canvg");
      }
      static {
        __name2(this, "Canvg");
      }
      /**
       * Main constructor.
       * @param ctx - Rendering context.
       * @param svg - SVG Document.
       * @param options - Rendering options.
       */
      constructor(ctx, svg2) {
        var options = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};
        this.parser = new Parser(options);
        this.screen = new Screen(ctx, options);
        this.options = options;
        var document2 = new Document(this, options);
        var documentElement = document2.createDocumentElement(svg2);
        this.document = document2;
        this.documentElement = documentElement;
      }
      /**
       * Create Canvg instance from SVG source string or URL.
       * @param ctx - Rendering context.
       * @param svg - SVG source string or URL.
       * @param options - Rendering options.
       * @returns Canvg instance.
       */
      static from(ctx, svg2) {
        var _arguments = arguments;
        return _asyncToGenerator(function* () {
          var options = _arguments.length > 2 && _arguments[2] !== void 0 ? _arguments[2] : {};
          var parser = new Parser(options);
          var svgDocument = yield parser.parse(svg2);
          return new _Canvg(ctx, svgDocument, options);
        })();
      }
      /**
       * Create Canvg instance from SVG source string.
       * @param ctx - Rendering context.
       * @param svg - SVG source string.
       * @param options - Rendering options.
       * @returns Canvg instance.
       */
      static fromString(ctx, svg2) {
        var options = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};
        var parser = new Parser(options);
        var svgDocument = parser.parseFromString(svg2);
        return new _Canvg(ctx, svgDocument, options);
      }
      /**
       * Create new Canvg instance with inherited options.
       * @param ctx - Rendering context.
       * @param svg - SVG source string or URL.
       * @param options - Rendering options.
       * @returns Canvg instance.
       */
      fork(ctx, svg2) {
        var options = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};
        return _Canvg.from(ctx, svg2, _objectSpread(_objectSpread({}, this.options), options));
      }
      /**
       * Create new Canvg instance with inherited options.
       * @param ctx - Rendering context.
       * @param svg - SVG source string.
       * @param options - Rendering options.
       * @returns Canvg instance.
       */
      forkString(ctx, svg2) {
        var options = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};
        return _Canvg.fromString(ctx, svg2, _objectSpread(_objectSpread({}, this.options), options));
      }
      /**
       * Document is ready promise.
       * @returns Ready promise.
       */
      ready() {
        return this.screen.ready();
      }
      /**
       * Document is ready value.
       * @returns Is ready or not.
       */
      isReady() {
        return this.screen.isReady();
      }
      /**
       * Render only first frame, ignoring animations and mouse.
       * @param options - Rendering options.
       */
      render() {
        var _arguments2 = arguments, _this = this;
        return _asyncToGenerator(function* () {
          var options = _arguments2.length > 0 && _arguments2[0] !== void 0 ? _arguments2[0] : {};
          _this.start(_objectSpread({
            enableRedraw: true,
            ignoreAnimation: true,
            ignoreMouse: true
          }, options));
          yield _this.ready();
          _this.stop();
        })();
      }
      /**
       * Start rendering.
       * @param options - Render options.
       */
      start() {
        var options = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
        var {
          documentElement,
          screen,
          options: baseOptions
        } = this;
        screen.start(documentElement, _objectSpread(_objectSpread({
          enableRedraw: true
        }, baseOptions), options));
      }
      /**
       * Stop rendering.
       */
      stop() {
        this.screen.stop();
      }
      /**
       * Resize SVG to fit in given size.
       * @param width
       * @param height
       * @param preserveAspectRatio
       */
      resize(width) {
        var height = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : width;
        var preserveAspectRatio = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : false;
        this.documentElement.resize(width, height, preserveAspectRatio);
      }
    };
  }
});
function i2() {
  n2.console && "function" == typeof n2.console.log && n2.console.log.apply(n2.console, arguments);
}
__name(i2, "i2");
function o2(t3, e2, r2) {
  var n3 = new XMLHttpRequest();
  n3.open("GET", t3), n3.responseType = "blob", n3.onload = function() {
    l2(n3.response, e2, r2);
  }, n3.onerror = function() {
    a2.error("could not download file");
  }, n3.send();
}
__name(o2, "o2");
function s2(t3) {
  var e2 = new XMLHttpRequest();
  e2.open("HEAD", t3, false);
  try {
    e2.send();
  } catch (t4) {
  }
  return e2.status >= 200 && e2.status <= 299;
}
__name(s2, "s2");
function c3(t3) {
  try {
    t3.dispatchEvent(new MouseEvent("click"));
  } catch (r2) {
    var e2 = document.createEvent("MouseEvents");
    e2.initMouseEvent("click", true, true, window, 0, 0, 0, 80, 20, false, false, false, false, 0, null), t3.dispatchEvent(e2);
  }
}
__name(c3, "c3");
function f2(t3) {
  var e2;
  t3 = t3 || "", this.ok = false, "#" == t3.charAt(0) && (t3 = t3.substr(1, 6));
  t3 = { aliceblue: "f0f8ff", antiquewhite: "faebd7", aqua: "00ffff", aquamarine: "7fffd4", azure: "f0ffff", beige: "f5f5dc", bisque: "ffe4c4", black: "000000", blanchedalmond: "ffebcd", blue: "0000ff", blueviolet: "8a2be2", brown: "a52a2a", burlywood: "deb887", cadetblue: "5f9ea0", chartreuse: "7fff00", chocolate: "d2691e", coral: "ff7f50", cornflowerblue: "6495ed", cornsilk: "fff8dc", crimson: "dc143c", cyan: "00ffff", darkblue: "00008b", darkcyan: "008b8b", darkgoldenrod: "b8860b", darkgray: "a9a9a9", darkgreen: "006400", darkkhaki: "bdb76b", darkmagenta: "8b008b", darkolivegreen: "556b2f", darkorange: "ff8c00", darkorchid: "9932cc", darkred: "8b0000", darksalmon: "e9967a", darkseagreen: "8fbc8f", darkslateblue: "483d8b", darkslategray: "2f4f4f", darkturquoise: "00ced1", darkviolet: "9400d3", deeppink: "ff1493", deepskyblue: "00bfff", dimgray: "696969", dodgerblue: "1e90ff", feldspar: "d19275", firebrick: "b22222", floralwhite: "fffaf0", forestgreen: "228b22", fuchsia: "ff00ff", gainsboro: "dcdcdc", ghostwhite: "f8f8ff", gold: "ffd700", goldenrod: "daa520", gray: "808080", green: "008000", greenyellow: "adff2f", honeydew: "f0fff0", hotpink: "ff69b4", indianred: "cd5c5c", indigo: "4b0082", ivory: "fffff0", khaki: "f0e68c", lavender: "e6e6fa", lavenderblush: "fff0f5", lawngreen: "7cfc00", lemonchiffon: "fffacd", lightblue: "add8e6", lightcoral: "f08080", lightcyan: "e0ffff", lightgoldenrodyellow: "fafad2", lightgrey: "d3d3d3", lightgreen: "90ee90", lightpink: "ffb6c1", lightsalmon: "ffa07a", lightseagreen: "20b2aa", lightskyblue: "87cefa", lightslateblue: "8470ff", lightslategray: "778899", lightsteelblue: "b0c4de", lightyellow: "ffffe0", lime: "00ff00", limegreen: "32cd32", linen: "faf0e6", magenta: "ff00ff", maroon: "800000", mediumaquamarine: "66cdaa", mediumblue: "0000cd", mediumorchid: "ba55d3", mediumpurple: "9370d8", mediumseagreen: "3cb371", mediumslateblue: "7b68ee", mediumspringgreen: "00fa9a", mediumturquoise: "48d1cc", mediumvioletred: "c71585", midnightblue: "191970", mintcream: "f5fffa", mistyrose: "ffe4e1", moccasin: "ffe4b5", navajowhite: "ffdead", navy: "000080", oldlace: "fdf5e6", olive: "808000", olivedrab: "6b8e23", orange: "ffa500", orangered: "ff4500", orchid: "da70d6", palegoldenrod: "eee8aa", palegreen: "98fb98", paleturquoise: "afeeee", palevioletred: "d87093", papayawhip: "ffefd5", peachpuff: "ffdab9", peru: "cd853f", pink: "ffc0cb", plum: "dda0dd", powderblue: "b0e0e6", purple: "800080", red: "ff0000", rosybrown: "bc8f8f", royalblue: "4169e1", saddlebrown: "8b4513", salmon: "fa8072", sandybrown: "f4a460", seagreen: "2e8b57", seashell: "fff5ee", sienna: "a0522d", silver: "c0c0c0", skyblue: "87ceeb", slateblue: "6a5acd", slategray: "708090", snow: "fffafa", springgreen: "00ff7f", steelblue: "4682b4", tan: "d2b48c", teal: "008080", thistle: "d8bfd8", tomato: "ff6347", turquoise: "40e0d0", violet: "ee82ee", violetred: "d02090", wheat: "f5deb3", white: "ffffff", whitesmoke: "f5f5f5", yellow: "ffff00", yellowgreen: "9acd32" }[t3 = (t3 = t3.replace(/ /g, "")).toLowerCase()] || t3;
  for (var r2 = [{ re: /^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/, example: ["rgb(123, 234, 45)", "rgb(255,234,245)"], process: /* @__PURE__ */ __name2(function(t4) {
    return [parseInt(t4[1]), parseInt(t4[2]), parseInt(t4[3])];
  }, "process") }, { re: /^(\w{2})(\w{2})(\w{2})$/, example: ["#00ff00", "336699"], process: /* @__PURE__ */ __name2(function(t4) {
    return [parseInt(t4[1], 16), parseInt(t4[2], 16), parseInt(t4[3], 16)];
  }, "process") }, { re: /^(\w{1})(\w{1})(\w{1})$/, example: ["#fb0", "f0f"], process: /* @__PURE__ */ __name2(function(t4) {
    return [parseInt(t4[1] + t4[1], 16), parseInt(t4[2] + t4[2], 16), parseInt(t4[3] + t4[3], 16)];
  }, "process") }], n3 = 0; n3 < r2.length; n3++) {
    var i33 = r2[n3].re, a3 = r2[n3].process, o3 = i33.exec(t3);
    o3 && (e2 = a3(o3), this.r = e2[0], this.g = e2[1], this.b = e2[2], this.ok = true);
  }
  this.r = this.r < 0 || isNaN(this.r) ? 0 : this.r > 255 ? 255 : this.r, this.g = this.g < 0 || isNaN(this.g) ? 0 : this.g > 255 ? 255 : this.g, this.b = this.b < 0 || isNaN(this.b) ? 0 : this.b > 255 ? 255 : this.b, this.toRGB = function() {
    return "rgb(" + this.r + ", " + this.g + ", " + this.b + ")";
  }, this.toHex = function() {
    var t4 = this.r.toString(16), e3 = this.g.toString(16), r3 = this.b.toString(16);
    return 1 == t4.length && (t4 = "0" + t4), 1 == e3.length && (e3 = "0" + e3), 1 == r3.length && (r3 = "0" + r3), "#" + t4 + e3 + r3;
  };
}
__name(f2, "f2");
function d(t3, e2) {
  var r2 = t3[0], n3 = t3[1], i33 = t3[2], a3 = t3[3];
  r2 = g(r2, n3, i33, a3, e2[0], 7, -680876936), a3 = g(a3, r2, n3, i33, e2[1], 12, -389564586), i33 = g(i33, a3, r2, n3, e2[2], 17, 606105819), n3 = g(n3, i33, a3, r2, e2[3], 22, -1044525330), r2 = g(r2, n3, i33, a3, e2[4], 7, -176418897), a3 = g(a3, r2, n3, i33, e2[5], 12, 1200080426), i33 = g(i33, a3, r2, n3, e2[6], 17, -1473231341), n3 = g(n3, i33, a3, r2, e2[7], 22, -45705983), r2 = g(r2, n3, i33, a3, e2[8], 7, 1770035416), a3 = g(a3, r2, n3, i33, e2[9], 12, -1958414417), i33 = g(i33, a3, r2, n3, e2[10], 17, -42063), n3 = g(n3, i33, a3, r2, e2[11], 22, -1990404162), r2 = g(r2, n3, i33, a3, e2[12], 7, 1804603682), a3 = g(a3, r2, n3, i33, e2[13], 12, -40341101), i33 = g(i33, a3, r2, n3, e2[14], 17, -1502002290), r2 = m3(r2, n3 = g(n3, i33, a3, r2, e2[15], 22, 1236535329), i33, a3, e2[1], 5, -165796510), a3 = m3(a3, r2, n3, i33, e2[6], 9, -1069501632), i33 = m3(i33, a3, r2, n3, e2[11], 14, 643717713), n3 = m3(n3, i33, a3, r2, e2[0], 20, -373897302), r2 = m3(r2, n3, i33, a3, e2[5], 5, -701558691), a3 = m3(a3, r2, n3, i33, e2[10], 9, 38016083), i33 = m3(i33, a3, r2, n3, e2[15], 14, -660478335), n3 = m3(n3, i33, a3, r2, e2[4], 20, -405537848), r2 = m3(r2, n3, i33, a3, e2[9], 5, 568446438), a3 = m3(a3, r2, n3, i33, e2[14], 9, -1019803690), i33 = m3(i33, a3, r2, n3, e2[3], 14, -187363961), n3 = m3(n3, i33, a3, r2, e2[8], 20, 1163531501), r2 = m3(r2, n3, i33, a3, e2[13], 5, -1444681467), a3 = m3(a3, r2, n3, i33, e2[2], 9, -51403784), i33 = m3(i33, a3, r2, n3, e2[7], 14, 1735328473), r2 = v2(r2, n3 = m3(n3, i33, a3, r2, e2[12], 20, -1926607734), i33, a3, e2[5], 4, -378558), a3 = v2(a3, r2, n3, i33, e2[8], 11, -2022574463), i33 = v2(i33, a3, r2, n3, e2[11], 16, 1839030562), n3 = v2(n3, i33, a3, r2, e2[14], 23, -35309556), r2 = v2(r2, n3, i33, a3, e2[1], 4, -1530992060), a3 = v2(a3, r2, n3, i33, e2[4], 11, 1272893353), i33 = v2(i33, a3, r2, n3, e2[7], 16, -155497632), n3 = v2(n3, i33, a3, r2, e2[10], 23, -1094730640), r2 = v2(r2, n3, i33, a3, e2[13], 4, 681279174), a3 = v2(a3, r2, n3, i33, e2[0], 11, -358537222), i33 = v2(i33, a3, r2, n3, e2[3], 16, -722521979), n3 = v2(n3, i33, a3, r2, e2[6], 23, 76029189), r2 = v2(r2, n3, i33, a3, e2[9], 4, -640364487), a3 = v2(a3, r2, n3, i33, e2[12], 11, -421815835), i33 = v2(i33, a3, r2, n3, e2[15], 16, 530742520), r2 = b(r2, n3 = v2(n3, i33, a3, r2, e2[2], 23, -995338651), i33, a3, e2[0], 6, -198630844), a3 = b(a3, r2, n3, i33, e2[7], 10, 1126891415), i33 = b(i33, a3, r2, n3, e2[14], 15, -1416354905), n3 = b(n3, i33, a3, r2, e2[5], 21, -57434055), r2 = b(r2, n3, i33, a3, e2[12], 6, 1700485571), a3 = b(a3, r2, n3, i33, e2[3], 10, -1894986606), i33 = b(i33, a3, r2, n3, e2[10], 15, -1051523), n3 = b(n3, i33, a3, r2, e2[1], 21, -2054922799), r2 = b(r2, n3, i33, a3, e2[8], 6, 1873313359), a3 = b(a3, r2, n3, i33, e2[15], 10, -30611744), i33 = b(i33, a3, r2, n3, e2[6], 15, -1560198380), n3 = b(n3, i33, a3, r2, e2[13], 21, 1309151649), r2 = b(r2, n3, i33, a3, e2[4], 6, -145523070), a3 = b(a3, r2, n3, i33, e2[11], 10, -1120210379), i33 = b(i33, a3, r2, n3, e2[2], 15, 718787259), n3 = b(n3, i33, a3, r2, e2[9], 21, -343485551), t3[0] = _2(r2, t3[0]), t3[1] = _2(n3, t3[1]), t3[2] = _2(i33, t3[2]), t3[3] = _2(a3, t3[3]);
}
__name(d, "d");
function p2(t3, e2, r2, n3, i33, a3) {
  return e2 = _2(_2(e2, t3), _2(n3, a3)), _2(e2 << i33 | e2 >>> 32 - i33, r2);
}
__name(p2, "p2");
function g(t3, e2, r2, n3, i33, a3, o3) {
  return p2(e2 & r2 | ~e2 & n3, t3, e2, i33, a3, o3);
}
__name(g, "g");
function m3(t3, e2, r2, n3, i33, a3, o3) {
  return p2(e2 & n3 | r2 & ~n3, t3, e2, i33, a3, o3);
}
__name(m3, "m3");
function v2(t3, e2, r2, n3, i33, a3, o3) {
  return p2(e2 ^ r2 ^ n3, t3, e2, i33, a3, o3);
}
__name(v2, "v2");
function b(t3, e2, r2, n3, i33, a3, o3) {
  return p2(r2 ^ (e2 | ~n3), t3, e2, i33, a3, o3);
}
__name(b, "b");
function y2(t3) {
  var e2, r2 = t3.length, n3 = [1732584193, -271733879, -1732584194, 271733878];
  for (e2 = 64; e2 <= t3.length; e2 += 64) d(n3, w(t3.substring(e2 - 64, e2)));
  t3 = t3.substring(e2 - 64);
  var i33 = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
  for (e2 = 0; e2 < t3.length; e2++) i33[e2 >> 2] |= t3.charCodeAt(e2) << (e2 % 4 << 3);
  if (i33[e2 >> 2] |= 128 << (e2 % 4 << 3), e2 > 55) for (d(n3, i33), e2 = 0; e2 < 16; e2++) i33[e2] = 0;
  return i33[14] = 8 * r2, d(n3, i33), n3;
}
__name(y2, "y2");
function w(t3) {
  var e2, r2 = [];
  for (e2 = 0; e2 < 64; e2 += 4) r2[e2 >> 2] = t3.charCodeAt(e2) + (t3.charCodeAt(e2 + 1) << 8) + (t3.charCodeAt(e2 + 2) << 16) + (t3.charCodeAt(e2 + 3) << 24);
  return r2;
}
__name(w, "w");
function L(t3) {
  for (var e2 = "", r2 = 0; r2 < 4; r2++) e2 += N2[t3 >> 8 * r2 + 4 & 15] + N2[t3 >> 8 * r2 & 15];
  return e2;
}
__name(L, "L");
function A(t3) {
  return String.fromCharCode((255 & t3) >> 0, (65280 & t3) >> 8, (16711680 & t3) >> 16, (4278190080 & t3) >> 24);
}
__name(A, "A");
function x(t3) {
  return y2(t3).map(A).join("");
}
__name(x, "x");
function _2(t3, e2) {
  if (S) {
    var r2 = (65535 & t3) + (65535 & e2);
    return (t3 >> 16) + (e2 >> 16) + (r2 >> 16) << 16 | 65535 & r2;
  }
  return t3 + e2 & 4294967295;
}
__name(_2, "_2");
function P(t3, e2) {
  var r2, n3, i33, a3;
  if (t3 !== r2) {
    for (var o3 = (i33 = t3, a3 = 1 + (256 / t3.length >> 0), new Array(a3 + 1).join(i33)), s3 = [], c4 = 0; c4 < 256; c4++) s3[c4] = c4;
    var u3 = 0;
    for (c4 = 0; c4 < 256; c4++) {
      var h3 = s3[c4];
      u3 = (u3 + h3 + o3.charCodeAt(c4)) % 256, s3[c4] = s3[u3], s3[u3] = h3;
    }
    r2 = t3, n3 = s3;
  } else s3 = n3;
  var l3 = e2.length, f3 = 0, d2 = 0, p3 = "";
  for (c4 = 0; c4 < l3; c4++) d2 = (d2 + (h3 = s3[f3 = (f3 + 1) % 256])) % 256, s3[f3] = s3[d2], s3[d2] = h3, o3 = s3[(s3[f3] + s3[d2]) % 256], p3 += String.fromCharCode(e2.charCodeAt(c4) ^ o3);
  return p3;
}
__name(P, "P");
function I(t3, e2, r2, n3) {
  this.v = 1, this.r = 2;
  var i33 = 192;
  t3.forEach(function(t4) {
    if (void 0 !== k.perm) throw new Error("Invalid permission: " + t4);
    i33 += k[t4];
  }), this.padding = "(\xBFN^Nu\x8AAd\0NV\xFF\xFA\b..\0\xB6\xD0h>\x80/\f\xA9\xFEdSiz";
  var a3 = (e2 + this.padding).substr(0, 32), o3 = (r2 + this.padding).substr(0, 32);
  this.O = this.processOwnerPassword(a3, o3), this.P = -(1 + (255 ^ i33)), this.encryptionKey = x(a3 + this.O + this.lsbFirstWord(this.P) + this.hexToBytes(n3)).substr(0, 5), this.U = P(this.encryptionKey, this.padding);
}
__name(I, "I");
function F(t3) {
  if (/[^\u0000-\u00ff]/.test(t3)) throw new Error("Invalid PDF Name Object: " + t3 + ", Only accept ASCII characters.");
  for (var e2 = "", r2 = t3.length, n3 = 0; n3 < r2; n3++) {
    var i33 = t3.charCodeAt(n3);
    if (i33 < 33 || 35 === i33 || 37 === i33 || 40 === i33 || 41 === i33 || 47 === i33 || 60 === i33 || 62 === i33 || 91 === i33 || 93 === i33 || 123 === i33 || 125 === i33 || i33 > 126) e2 += "#" + ("0" + i33.toString(16)).slice(-2);
    else e2 += t3[n3];
  }
  return e2;
}
__name(F, "F");
function C(e2) {
  if ("object" !== _typeof(e2)) throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");
  var r2 = {};
  this.subscribe = function(t3, e3, n3) {
    if (n3 = n3 || false, "string" != typeof t3 || "function" != typeof e3 || "boolean" != typeof n3) throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");
    r2.hasOwnProperty(t3) || (r2[t3] = {});
    var i33 = Math.random().toString(35);
    return r2[t3][i33] = [e3, !!n3], i33;
  }, this.unsubscribe = function(t3) {
    for (var e3 in r2) if (r2[e3][t3]) return delete r2[e3][t3], 0 === Object.keys(r2[e3]).length && delete r2[e3], true;
    return false;
  }, this.publish = function(t3) {
    if (r2.hasOwnProperty(t3)) {
      var i33 = Array.prototype.slice.call(arguments, 1), o3 = [];
      for (var s3 in r2[t3]) {
        var c4 = r2[t3][s3];
        try {
          c4[0].apply(e2, i33);
        } catch (t4) {
          n2.console && a2.error("jsPDF PubSub Error", t4.message, t4);
        }
        c4[1] && o3.push(s3);
      }
      o3.length && o3.forEach(this.unsubscribe);
    }
  }, this.getTopics = function() {
    return r2;
  };
}
__name(C, "C");
function j(t3) {
  if (!(this instanceof j)) return new j(t3);
  var e2 = "opacity,stroke-opacity".split(",");
  for (var r2 in t3) t3.hasOwnProperty(r2) && e2.indexOf(r2) >= 0 && (this[r2] = t3[r2]);
  this.id = "", this.objectNumber = -1;
}
__name(j, "j");
function O2(t3, e2) {
  this.gState = t3, this.matrix = e2, this.id = "", this.objectNumber = -1;
}
__name(O2, "O2");
function B(t3, e2, r2, n3, i33) {
  if (!(this instanceof B)) return new B(t3, e2, r2, n3, i33);
  this.type = "axial" === t3 ? 2 : 3, this.coords = e2, this.colors = r2, O2.call(this, n3, i33);
}
__name(B, "B");
function M(t3, e2, r2, n3, i33) {
  if (!(this instanceof M)) return new M(t3, e2, r2, n3, i33);
  this.boundingBox = t3, this.xStep = e2, this.yStep = r2, this.stream = "", this.cloneIndex = 0, O2.call(this, n3, i33);
}
__name(M, "M");
function E(e2) {
  var r2, i33 = "string" == typeof arguments[0] ? arguments[0] : "p", o3 = arguments[1], s3 = arguments[2], c4 = arguments[3], u3 = [], d2 = 1, p3 = 16, g2 = "S", m4 = null;
  "object" === _typeof(e2 = e2 || {}) && (i33 = e2.orientation, o3 = e2.unit || o3, s3 = e2.format || s3, c4 = e2.compress || e2.compressPdf || c4, null !== (m4 = e2.encryption || null) && (m4.userPassword = m4.userPassword || "", m4.ownerPassword = m4.ownerPassword || "", m4.userPermissions = m4.userPermissions || []), d2 = "number" == typeof e2.userUnit ? Math.abs(e2.userUnit) : 1, void 0 !== e2.precision && (r2 = e2.precision), void 0 !== e2.floatPrecision && (p3 = e2.floatPrecision), g2 = e2.defaultPathOperation || "S"), u3 = e2.filters || (true === c4 ? ["FlateEncode"] : u3), o3 = o3 || "mm", i33 = ("" + (i33 || "P")).toLowerCase();
  var v3 = e2.putOnlyUsedFonts || false, b2 = {}, y3 = { internal: {}, __private__: {} };
  y3.__private__.PubSub = C;
  var w2 = "1.3", N3 = y3.__private__.getPdfVersion = function() {
    return w2;
  };
  y3.__private__.setPdfVersion = function(t3) {
    w2 = t3;
  };
  var L2 = { a0: [2383.94, 3370.39], a1: [1683.78, 2383.94], a2: [1190.55, 1683.78], a3: [841.89, 1190.55], a4: [595.28, 841.89], a5: [419.53, 595.28], a6: [297.64, 419.53], a7: [209.76, 297.64], a8: [147.4, 209.76], a9: [104.88, 147.4], a10: [73.7, 104.88], b0: [2834.65, 4008.19], b1: [2004.09, 2834.65], b2: [1417.32, 2004.09], b3: [1000.63, 1417.32], b4: [708.66, 1000.63], b5: [498.9, 708.66], b6: [354.33, 498.9], b7: [249.45, 354.33], b8: [175.75, 249.45], b9: [124.72, 175.75], b10: [87.87, 124.72], c0: [2599.37, 3676.54], c1: [1836.85, 2599.37], c2: [1298.27, 1836.85], c3: [918.43, 1298.27], c4: [649.13, 918.43], c5: [459.21, 649.13], c6: [323.15, 459.21], c7: [229.61, 323.15], c8: [161.57, 229.61], c9: [113.39, 161.57], c10: [79.37, 113.39], dl: [311.81, 623.62], letter: [612, 792], "government-letter": [576, 756], legal: [612, 1008], "junior-legal": [576, 360], ledger: [1224, 792], tabloid: [792, 1224], "credit-card": [153, 243] };
  y3.__private__.getPageFormats = function() {
    return L2;
  };
  var A2 = y3.__private__.getPageFormat = function(t3) {
    return L2[t3];
  };
  s3 = s3 || "a4";
  var x22 = { COMPAT: "compat", ADVANCED: "advanced" }, S2 = x22.COMPAT;
  function _3() {
    this.saveGraphicsState(), lt3(new Vt2(_t2, 0, 0, -_t2, 0, Rr() * _t2).toString() + " cm"), this.setFontSize(this.getFontSize() / _t2), g2 = "n", S2 = x22.ADVANCED;
  }
  __name(_3, "_3");
  __name2(_3, "_");
  function P2() {
    this.restoreGraphicsState(), g2 = "S", S2 = x22.COMPAT;
  }
  __name(P2, "P2");
  __name2(P2, "P");
  var k2 = y3.__private__.combineFontStyleAndFontWeight = function(t3, e3) {
    if ("bold" == t3 && "normal" == e3 || "bold" == t3 && 400 == e3 || "normal" == t3 && "italic" == e3 || "bold" == t3 && "italic" == e3) throw new Error("Invalid Combination of fontweight and fontstyle");
    return e3 && (t3 = 400 == e3 || "normal" === e3 ? "italic" === t3 ? "italic" : "normal" : 700 != e3 && "bold" !== e3 || "normal" !== t3 ? (700 == e3 ? "bold" : e3) + "" + t3 : "bold"), t3;
  };
  y3.advancedAPI = function(t3) {
    var e3 = S2 === x22.COMPAT;
    return e3 && _3.call(this), "function" != typeof t3 || (t3(this), e3 && P2.call(this)), this;
  }, y3.compatAPI = function(t3) {
    var e3 = S2 === x22.ADVANCED;
    return e3 && P2.call(this), "function" != typeof t3 || (t3(this), e3 && _3.call(this)), this;
  }, y3.isAdvancedAPI = function() {
    return S2 === x22.ADVANCED;
  };
  var O3, q2 = /* @__PURE__ */ __name2(function(t3) {
    if (S2 !== x22.ADVANCED) throw new Error(t3 + " is only available in 'advanced' API mode. You need to call advancedAPI() first.");
  }, "q"), D2 = y3.roundToPrecision = y3.__private__.roundToPrecision = function(t3, e3) {
    var n3 = r2 || e3;
    if (isNaN(t3) || isNaN(n3)) throw new Error("Invalid argument passed to jsPDF.roundToPrecision");
    return t3.toFixed(n3).replace(/0+$/, "");
  };
  O3 = y3.hpf = y3.__private__.hpf = "number" == typeof p3 ? function(t3) {
    if (isNaN(t3)) throw new Error("Invalid argument passed to jsPDF.hpf");
    return D2(t3, p3);
  } : "smart" === p3 ? function(t3) {
    if (isNaN(t3)) throw new Error("Invalid argument passed to jsPDF.hpf");
    return D2(t3, t3 > -1 && t3 < 1 ? 16 : 5);
  } : function(t3) {
    if (isNaN(t3)) throw new Error("Invalid argument passed to jsPDF.hpf");
    return D2(t3, 16);
  };
  var R2 = y3.f2 = y3.__private__.f2 = function(t3) {
    if (isNaN(t3)) throw new Error("Invalid argument passed to jsPDF.f2");
    return D2(t3, 2);
  }, T3 = y3.__private__.f3 = function(t3) {
    if (isNaN(t3)) throw new Error("Invalid argument passed to jsPDF.f3");
    return D2(t3, 3);
  }, U2 = y3.scale = y3.__private__.scale = function(t3) {
    if (isNaN(t3)) throw new Error("Invalid argument passed to jsPDF.scale");
    return S2 === x22.COMPAT ? t3 * _t2 : S2 === x22.ADVANCED ? t3 : void 0;
  }, z3 = /* @__PURE__ */ __name2(function(t3) {
    return S2 === x22.COMPAT ? Rr() - t3 : S2 === x22.ADVANCED ? t3 : void 0;
  }, "z"), H2 = /* @__PURE__ */ __name2(function(t3) {
    return U2(z3(t3));
  }, "H");
  y3.__private__.setPrecision = y3.setPrecision = function(t3) {
    "number" == typeof parseInt(t3, 10) && (r2 = parseInt(t3, 10));
  };
  var W2, V3 = "00000000000000000000000000000000", G2 = y3.__private__.getFileId = function() {
    return V3;
  }, Y2 = y3.__private__.setFileId = function(t3) {
    return V3 = void 0 !== t3 && /^[a-fA-F0-9]{32}$/.test(t3) ? t3.toUpperCase() : V3.split("").map(function() {
      return "ABCDEF0123456789".charAt(Math.floor(16 * Math.random()));
    }).join(""), null !== m4 && (Ye = new I(m4.userPermissions, m4.userPassword, m4.ownerPassword, V3)), V3;
  };
  y3.setFileId = function(t3) {
    return Y2(t3), this;
  }, y3.getFileId = function() {
    return G2();
  };
  var J2 = y3.__private__.convertDateToPDFDate = function(t3) {
    var e3 = t3.getTimezoneOffset(), r3 = e3 < 0 ? "+" : "-", n3 = Math.floor(Math.abs(e3 / 60)), i4 = Math.abs(e3 % 60), a3 = [r3, Q2(n3), "'", Q2(i4), "'"].join("");
    return ["D:", t3.getFullYear(), Q2(t3.getMonth() + 1), Q2(t3.getDate()), Q2(t3.getHours()), Q2(t3.getMinutes()), Q2(t3.getSeconds()), a3].join("");
  }, X2 = y3.__private__.convertPDFDateToDate = function(t3) {
    var e3 = parseInt(t3.substr(2, 4), 10), r3 = parseInt(t3.substr(6, 2), 10) - 1, n3 = parseInt(t3.substr(8, 2), 10), i4 = parseInt(t3.substr(10, 2), 10), a3 = parseInt(t3.substr(12, 2), 10), o4 = parseInt(t3.substr(14, 2), 10);
    return new Date(e3, r3, n3, i4, a3, o4, 0);
  }, K2 = y3.__private__.setCreationDate = function(t3) {
    var e3;
    if (void 0 === t3 && (t3 = /* @__PURE__ */ new Date()), t3 instanceof Date) e3 = J2(t3);
    else {
      if (!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(t3)) throw new Error("Invalid argument passed to jsPDF.setCreationDate");
      e3 = t3;
    }
    return W2 = e3;
  }, Z2 = y3.__private__.getCreationDate = function(t3) {
    var e3 = W2;
    return "jsDate" === t3 && (e3 = X2(W2)), e3;
  };
  y3.setCreationDate = function(t3) {
    return K2(t3), this;
  }, y3.getCreationDate = function(t3) {
    return Z2(t3);
  };
  var $2, Q2 = y3.__private__.padd2 = function(t3) {
    return ("0" + parseInt(t3)).slice(-2);
  }, tt2 = y3.__private__.padd2Hex = function(t3) {
    return ("00" + (t3 = t3.toString())).substr(t3.length);
  }, et3 = 0, rt2 = [], nt2 = [], it2 = 0, at2 = [], ot2 = [], st2 = false, ct2 = nt2, ut2 = /* @__PURE__ */ __name2(function() {
    et3 = 0, it2 = 0, nt2 = [], rt2 = [], at2 = [], Qt2 = Kt2(), te2 = Kt2();
  }, "ut");
  y3.__private__.setCustomOutputDestination = function(t3) {
    st2 = true, ct2 = t3;
  };
  var ht2 = /* @__PURE__ */ __name2(function(t3) {
    st2 || (ct2 = t3);
  }, "ht");
  y3.__private__.resetCustomOutputDestination = function() {
    st2 = false, ct2 = nt2;
  };
  var lt3 = y3.__private__.out = function(t3) {
    return t3 = t3.toString(), it2 += t3.length + 1, ct2.push(t3), ct2;
  }, ft2 = y3.__private__.write = function(t3) {
    return lt3(1 === arguments.length ? t3.toString() : Array.prototype.join.call(arguments, " "));
  }, dt2 = y3.__private__.getArrayBuffer = function(t3) {
    for (var e3 = t3.length, r3 = new ArrayBuffer(e3), n3 = new Uint8Array(r3); e3--; ) n3[e3] = t3.charCodeAt(e3);
    return r3;
  }, pt2 = [["Helvetica", "helvetica", "normal", "WinAnsiEncoding"], ["Helvetica-Bold", "helvetica", "bold", "WinAnsiEncoding"], ["Helvetica-Oblique", "helvetica", "italic", "WinAnsiEncoding"], ["Helvetica-BoldOblique", "helvetica", "bolditalic", "WinAnsiEncoding"], ["Courier", "courier", "normal", "WinAnsiEncoding"], ["Courier-Bold", "courier", "bold", "WinAnsiEncoding"], ["Courier-Oblique", "courier", "italic", "WinAnsiEncoding"], ["Courier-BoldOblique", "courier", "bolditalic", "WinAnsiEncoding"], ["Times-Roman", "times", "normal", "WinAnsiEncoding"], ["Times-Bold", "times", "bold", "WinAnsiEncoding"], ["Times-Italic", "times", "italic", "WinAnsiEncoding"], ["Times-BoldItalic", "times", "bolditalic", "WinAnsiEncoding"], ["ZapfDingbats", "zapfdingbats", "normal", null], ["Symbol", "symbol", "normal", null]];
  y3.__private__.getStandardFonts = function() {
    return pt2;
  };
  var gt3 = e2.fontSize || 16;
  y3.__private__.setFontSize = y3.setFontSize = function(t3) {
    return gt3 = S2 === x22.ADVANCED ? t3 / _t2 : t3, this;
  };
  var mt2, vt2 = y3.__private__.getFontSize = y3.getFontSize = function() {
    return S2 === x22.COMPAT ? gt3 : gt3 * _t2;
  }, bt2 = e2.R2L || false;
  y3.__private__.setR2L = y3.setR2L = function(t3) {
    return bt2 = t3, this;
  }, y3.__private__.getR2L = y3.getR2L = function() {
    return bt2;
  };
  var yt2, wt2 = y3.__private__.setZoomMode = function(t3) {
    var e3 = [void 0, null, "fullwidth", "fullheight", "fullpage", "original"];
    if (/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(t3)) mt2 = t3;
    else if (isNaN(t3)) {
      if (-1 === e3.indexOf(t3)) throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "' + t3 + '" is not recognized.');
      mt2 = t3;
    } else mt2 = parseInt(t3, 10);
  };
  y3.__private__.getZoomMode = function() {
    return mt2;
  };
  var Nt2, Lt2 = y3.__private__.setPageMode = function(t3) {
    if (-1 == [void 0, null, "UseNone", "UseOutlines", "UseThumbs", "FullScreen"].indexOf(t3)) throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "' + t3 + '" is not recognized.');
    yt2 = t3;
  };
  y3.__private__.getPageMode = function() {
    return yt2;
  };
  var At2 = y3.__private__.setLayoutMode = function(t3) {
    if (-1 == [void 0, null, "continuous", "single", "twoleft", "tworight", "two"].indexOf(t3)) throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "' + t3 + '" is not recognized.');
    Nt2 = t3;
  };
  y3.__private__.getLayoutMode = function() {
    return Nt2;
  }, y3.__private__.setDisplayMode = y3.setDisplayMode = function(t3, e3, r3) {
    return wt2(t3), At2(e3), Lt2(r3), this;
  };
  var xt2 = { title: "", subject: "", author: "", keywords: "", creator: "" };
  y3.__private__.getDocumentProperty = function(t3) {
    if (-1 === Object.keys(xt2).indexOf(t3)) throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");
    return xt2[t3];
  }, y3.__private__.getDocumentProperties = function() {
    return xt2;
  }, y3.__private__.setDocumentProperties = y3.setProperties = y3.setDocumentProperties = function(t3) {
    for (var e3 in xt2) xt2.hasOwnProperty(e3) && t3[e3] && (xt2[e3] = t3[e3]);
    return this;
  }, y3.__private__.setDocumentProperty = function(t3, e3) {
    if (-1 === Object.keys(xt2).indexOf(t3)) throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");
    return xt2[t3] = e3;
  };
  var St2, _t2, Pt2, kt2, It2, Ft2 = {}, Ct2 = {}, jt2 = [], Ot2 = {}, Bt2 = {}, Mt2 = {}, Et2 = {}, qt2 = null, Dt2 = 0, Rt2 = [], Tt2 = new C(y3), Ut2 = e2.hotfixes || [], zt2 = {}, Ht2 = {}, Wt2 = [], Vt2 = /* @__PURE__ */ __name2(/* @__PURE__ */ __name(function t3(e3, r3, n3, i4, a3, o4) {
    if (!(this instanceof t3)) return new t3(e3, r3, n3, i4, a3, o4);
    isNaN(e3) && (e3 = 1), isNaN(r3) && (r3 = 0), isNaN(n3) && (n3 = 0), isNaN(i4) && (i4 = 1), isNaN(a3) && (a3 = 0), isNaN(o4) && (o4 = 0), this._matrix = [e3, r3, n3, i4, a3, o4];
  }, "t3"), "t");
  Object.defineProperty(Vt2.prototype, "sx", { get: /* @__PURE__ */ __name2(function() {
    return this._matrix[0];
  }, "get"), set: /* @__PURE__ */ __name2(function(t3) {
    this._matrix[0] = t3;
  }, "set") }), Object.defineProperty(Vt2.prototype, "shy", { get: /* @__PURE__ */ __name2(function() {
    return this._matrix[1];
  }, "get"), set: /* @__PURE__ */ __name2(function(t3) {
    this._matrix[1] = t3;
  }, "set") }), Object.defineProperty(Vt2.prototype, "shx", { get: /* @__PURE__ */ __name2(function() {
    return this._matrix[2];
  }, "get"), set: /* @__PURE__ */ __name2(function(t3) {
    this._matrix[2] = t3;
  }, "set") }), Object.defineProperty(Vt2.prototype, "sy", { get: /* @__PURE__ */ __name2(function() {
    return this._matrix[3];
  }, "get"), set: /* @__PURE__ */ __name2(function(t3) {
    this._matrix[3] = t3;
  }, "set") }), Object.defineProperty(Vt2.prototype, "tx", { get: /* @__PURE__ */ __name2(function() {
    return this._matrix[4];
  }, "get"), set: /* @__PURE__ */ __name2(function(t3) {
    this._matrix[4] = t3;
  }, "set") }), Object.defineProperty(Vt2.prototype, "ty", { get: /* @__PURE__ */ __name2(function() {
    return this._matrix[5];
  }, "get"), set: /* @__PURE__ */ __name2(function(t3) {
    this._matrix[5] = t3;
  }, "set") }), Object.defineProperty(Vt2.prototype, "a", { get: /* @__PURE__ */ __name2(function() {
    return this._matrix[0];
  }, "get"), set: /* @__PURE__ */ __name2(function(t3) {
    this._matrix[0] = t3;
  }, "set") }), Object.defineProperty(Vt2.prototype, "b", { get: /* @__PURE__ */ __name2(function() {
    return this._matrix[1];
  }, "get"), set: /* @__PURE__ */ __name2(function(t3) {
    this._matrix[1] = t3;
  }, "set") }), Object.defineProperty(Vt2.prototype, "c", { get: /* @__PURE__ */ __name2(function() {
    return this._matrix[2];
  }, "get"), set: /* @__PURE__ */ __name2(function(t3) {
    this._matrix[2] = t3;
  }, "set") }), Object.defineProperty(Vt2.prototype, "d", { get: /* @__PURE__ */ __name2(function() {
    return this._matrix[3];
  }, "get"), set: /* @__PURE__ */ __name2(function(t3) {
    this._matrix[3] = t3;
  }, "set") }), Object.defineProperty(Vt2.prototype, "e", { get: /* @__PURE__ */ __name2(function() {
    return this._matrix[4];
  }, "get"), set: /* @__PURE__ */ __name2(function(t3) {
    this._matrix[4] = t3;
  }, "set") }), Object.defineProperty(Vt2.prototype, "f", { get: /* @__PURE__ */ __name2(function() {
    return this._matrix[5];
  }, "get"), set: /* @__PURE__ */ __name2(function(t3) {
    this._matrix[5] = t3;
  }, "set") }), Object.defineProperty(Vt2.prototype, "rotation", { get: /* @__PURE__ */ __name2(function() {
    return Math.atan2(this.shx, this.sx);
  }, "get") }), Object.defineProperty(Vt2.prototype, "scaleX", { get: /* @__PURE__ */ __name2(function() {
    return this.decompose().scale.sx;
  }, "get") }), Object.defineProperty(Vt2.prototype, "scaleY", { get: /* @__PURE__ */ __name2(function() {
    return this.decompose().scale.sy;
  }, "get") }), Object.defineProperty(Vt2.prototype, "isIdentity", { get: /* @__PURE__ */ __name2(function() {
    return 1 === this.sx && (0 === this.shy && (0 === this.shx && (1 === this.sy && (0 === this.tx && 0 === this.ty))));
  }, "get") }), Vt2.prototype.join = function(t3) {
    return [this.sx, this.shy, this.shx, this.sy, this.tx, this.ty].map(O3).join(t3);
  }, Vt2.prototype.multiply = function(t3) {
    var e3 = t3.sx * this.sx + t3.shy * this.shx, r3 = t3.sx * this.shy + t3.shy * this.sy, n3 = t3.shx * this.sx + t3.sy * this.shx, i4 = t3.shx * this.shy + t3.sy * this.sy, a3 = t3.tx * this.sx + t3.ty * this.shx + this.tx, o4 = t3.tx * this.shy + t3.ty * this.sy + this.ty;
    return new Vt2(e3, r3, n3, i4, a3, o4);
  }, Vt2.prototype.decompose = function() {
    var t3 = this.sx, e3 = this.shy, r3 = this.shx, n3 = this.sy, i4 = this.tx, a3 = this.ty, o4 = Math.sqrt(t3 * t3 + e3 * e3), s4 = (t3 /= o4) * r3 + (e3 /= o4) * n3;
    r3 -= t3 * s4, n3 -= e3 * s4;
    var c5 = Math.sqrt(r3 * r3 + n3 * n3);
    return s4 /= c5, t3 * (n3 /= c5) < e3 * (r3 /= c5) && (t3 = -t3, e3 = -e3, s4 = -s4, o4 = -o4), { scale: new Vt2(o4, 0, 0, c5, 0, 0), translate: new Vt2(1, 0, 0, 1, i4, a3), rotate: new Vt2(t3, e3, -e3, t3, 0, 0), skew: new Vt2(1, 0, s4, 1, 0, 0) };
  }, Vt2.prototype.toString = function(t3) {
    return this.join(" ");
  }, Vt2.prototype.inversed = function() {
    var t3 = this.sx, e3 = this.shy, r3 = this.shx, n3 = this.sy, i4 = this.tx, a3 = this.ty, o4 = 1 / (t3 * n3 - e3 * r3), s4 = n3 * o4, c5 = -e3 * o4, u4 = -r3 * o4, h3 = t3 * o4;
    return new Vt2(s4, c5, u4, h3, -s4 * i4 - u4 * a3, -c5 * i4 - h3 * a3);
  }, Vt2.prototype.applyToPoint = function(t3) {
    var e3 = t3.x * this.sx + t3.y * this.shx + this.tx, r3 = t3.x * this.shy + t3.y * this.sy + this.ty;
    return new Cr(e3, r3);
  }, Vt2.prototype.applyToRectangle = function(t3) {
    var e3 = this.applyToPoint(t3), r3 = this.applyToPoint(new Cr(t3.x + t3.w, t3.y + t3.h));
    return new jr(e3.x, e3.y, r3.x - e3.x, r3.y - e3.y);
  }, Vt2.prototype.clone = function() {
    var t3 = this.sx, e3 = this.shy, r3 = this.shx, n3 = this.sy, i4 = this.tx, a3 = this.ty;
    return new Vt2(t3, e3, r3, n3, i4, a3);
  }, y3.Matrix = Vt2;
  var Gt2 = y3.matrixMult = function(t3, e3) {
    return e3.multiply(t3);
  }, Yt2 = new Vt2(1, 0, 0, 1, 0, 0);
  y3.unitMatrix = y3.identityMatrix = Yt2;
  var Jt2 = /* @__PURE__ */ __name2(function(t3, e3) {
    if (!Bt2[t3]) {
      var r3 = (e3 instanceof B ? "Sh" : "P") + (Object.keys(Ot2).length + 1).toString(10);
      e3.id = r3, Bt2[t3] = r3, Ot2[r3] = e3, Tt2.publish("addPattern", e3);
    }
  }, "Jt");
  y3.ShadingPattern = B, y3.TilingPattern = M, y3.addShadingPattern = function(t3, e3) {
    return q2("addShadingPattern()"), Jt2(t3, e3), this;
  }, y3.beginTilingPattern = function(t3) {
    q2("beginTilingPattern()"), Br(t3.boundingBox[0], t3.boundingBox[1], t3.boundingBox[2] - t3.boundingBox[0], t3.boundingBox[3] - t3.boundingBox[1], t3.matrix);
  }, y3.endTilingPattern = function(t3, e3) {
    q2("endTilingPattern()"), e3.stream = ot2[$2].join("\n"), Jt2(t3, e3), Tt2.publish("endTilingPattern", e3), Wt2.pop().restore();
  };
  var Xt2 = y3.__private__.newObject = function() {
    var t3 = Kt2();
    return Zt2(t3, true), t3;
  }, Kt2 = y3.__private__.newObjectDeferred = function() {
    return et3++, rt2[et3] = function() {
      return it2;
    }, et3;
  }, Zt2 = /* @__PURE__ */ __name2(function(t3, e3) {
    return e3 = "boolean" == typeof e3 && e3, rt2[t3] = it2, e3 && lt3(t3 + " 0 obj"), t3;
  }, "Zt"), $t2 = y3.__private__.newAdditionalObject = function() {
    var t3 = { objId: Kt2(), content: "" };
    return at2.push(t3), t3;
  }, Qt2 = Kt2(), te2 = Kt2(), ee2 = y3.__private__.decodeColorString = function(t3) {
    var e3 = t3.split(" ");
    if (2 !== e3.length || "g" !== e3[1] && "G" !== e3[1]) {
      if (5 === e3.length && ("k" === e3[4] || "K" === e3[4])) {
        e3 = [(1 - e3[0]) * (1 - e3[3]), (1 - e3[1]) * (1 - e3[3]), (1 - e3[2]) * (1 - e3[3]), "r"];
      }
    } else {
      var r3 = parseFloat(e3[0]);
      e3 = [r3, r3, r3, "r"];
    }
    for (var n3 = "#", i4 = 0; i4 < 3; i4++) n3 += ("0" + Math.floor(255 * parseFloat(e3[i4])).toString(16)).slice(-2);
    return n3;
  }, re2 = y3.__private__.encodeColorString = function(e3) {
    var r3;
    "string" == typeof e3 && (e3 = { ch1: e3 });
    var n3 = e3.ch1, i4 = e3.ch2, a3 = e3.ch3, o4 = e3.ch4, s4 = "draw" === e3.pdfColorType ? ["G", "RG", "K"] : ["g", "rg", "k"];
    if ("string" == typeof n3 && "#" !== n3.charAt(0)) {
      var c5 = new f2(n3);
      if (c5.ok) n3 = c5.toHex();
      else if (!/^\d*\.?\d*$/.test(n3)) throw new Error('Invalid color "' + n3 + '" passed to jsPDF.encodeColorString.');
    }
    if ("string" == typeof n3 && /^#[0-9A-Fa-f]{3}$/.test(n3) && (n3 = "#" + n3[1] + n3[1] + n3[2] + n3[2] + n3[3] + n3[3]), "string" == typeof n3 && /^#[0-9A-Fa-f]{6}$/.test(n3)) {
      var u4 = parseInt(n3.substr(1), 16);
      n3 = u4 >> 16 & 255, i4 = u4 >> 8 & 255, a3 = 255 & u4;
    }
    if (void 0 === i4 || void 0 === o4 && n3 === i4 && i4 === a3) if ("string" == typeof n3) r3 = n3 + " " + s4[0];
    else switch (e3.precision) {
      case 2:
        r3 = R2(n3 / 255) + " " + s4[0];
        break;
      case 3:
      default:
        r3 = T3(n3 / 255) + " " + s4[0];
    }
    else if (void 0 === o4 || "object" === _typeof(o4)) {
      if (o4 && !isNaN(o4.a) && 0 === o4.a) return r3 = ["1.", "1.", "1.", s4[1]].join(" ");
      if ("string" == typeof n3) r3 = [n3, i4, a3, s4[1]].join(" ");
      else switch (e3.precision) {
        case 2:
          r3 = [R2(n3 / 255), R2(i4 / 255), R2(a3 / 255), s4[1]].join(" ");
          break;
        default:
        case 3:
          r3 = [T3(n3 / 255), T3(i4 / 255), T3(a3 / 255), s4[1]].join(" ");
      }
    } else if ("string" == typeof n3) r3 = [n3, i4, a3, o4, s4[2]].join(" ");
    else switch (e3.precision) {
      case 2:
        r3 = [R2(n3), R2(i4), R2(a3), R2(o4), s4[2]].join(" ");
        break;
      case 3:
      default:
        r3 = [T3(n3), T3(i4), T3(a3), T3(o4), s4[2]].join(" ");
    }
    return r3;
  }, ne3 = y3.__private__.getFilters = function() {
    return u3;
  }, ie2 = y3.__private__.putStream = function(t3) {
    var e3 = (t3 = t3 || {}).data || "", r3 = t3.filters || ne3(), n3 = t3.alreadyAppliedFilters || [], i4 = t3.addLength1 || false, a3 = e3.length, o4 = t3.objectId, s4 = /* @__PURE__ */ __name2(function(t4) {
      return t4;
    }, "s");
    if (null !== m4 && void 0 === o4) throw new Error("ObjectId must be passed to putStream for file encryption");
    null !== m4 && (s4 = Ye.encryptor(o4, 0));
    var c5 = {};
    true === r3 && (r3 = ["FlateEncode"]);
    var u4 = t3.additionalKeyValues || [], h3 = (c5 = void 0 !== E.API.processDataByFilters ? E.API.processDataByFilters(e3, r3) : { data: e3, reverseChain: [] }).reverseChain + (Array.isArray(n3) ? n3.join(" ") : n3.toString());
    if (0 !== c5.data.length && (u4.push({ key: "Length", value: c5.data.length }), true === i4 && u4.push({ key: "Length1", value: a3 })), 0 != h3.length) if (h3.split("/").length - 1 == 1) u4.push({ key: "Filter", value: h3 });
    else {
      u4.push({ key: "Filter", value: "[" + h3 + "]" });
      for (var l3 = 0; l3 < u4.length; l3 += 1) if ("DecodeParms" === u4[l3].key) {
        for (var f3 = [], d3 = 0; d3 < c5.reverseChain.split("/").length - 1; d3 += 1) f3.push("null");
        f3.push(u4[l3].value), u4[l3].value = "[" + f3.join(" ") + "]";
      }
    }
    lt3("<<");
    for (var p4 = 0; p4 < u4.length; p4++) lt3("/" + u4[p4].key + " " + u4[p4].value);
    lt3(">>"), 0 !== c5.data.length && (lt3("stream"), lt3(s4(c5.data)), lt3("endstream"));
  }, ae2 = y3.__private__.putPage = function(t3) {
    var e3 = t3.number, r3 = t3.data, n3 = t3.objId, i4 = t3.contentsObjId;
    Zt2(n3, true), lt3("<</Type /Page"), lt3("/Parent " + t3.rootDictionaryObjId + " 0 R"), lt3("/Resources " + t3.resourceDictionaryObjId + " 0 R"), lt3("/MediaBox [" + parseFloat(O3(t3.mediaBox.bottomLeftX)) + " " + parseFloat(O3(t3.mediaBox.bottomLeftY)) + " " + O3(t3.mediaBox.topRightX) + " " + O3(t3.mediaBox.topRightY) + "]"), null !== t3.cropBox && lt3("/CropBox [" + O3(t3.cropBox.bottomLeftX) + " " + O3(t3.cropBox.bottomLeftY) + " " + O3(t3.cropBox.topRightX) + " " + O3(t3.cropBox.topRightY) + "]"), null !== t3.bleedBox && lt3("/BleedBox [" + O3(t3.bleedBox.bottomLeftX) + " " + O3(t3.bleedBox.bottomLeftY) + " " + O3(t3.bleedBox.topRightX) + " " + O3(t3.bleedBox.topRightY) + "]"), null !== t3.trimBox && lt3("/TrimBox [" + O3(t3.trimBox.bottomLeftX) + " " + O3(t3.trimBox.bottomLeftY) + " " + O3(t3.trimBox.topRightX) + " " + O3(t3.trimBox.topRightY) + "]"), null !== t3.artBox && lt3("/ArtBox [" + O3(t3.artBox.bottomLeftX) + " " + O3(t3.artBox.bottomLeftY) + " " + O3(t3.artBox.topRightX) + " " + O3(t3.artBox.topRightY) + "]"), "number" == typeof t3.userUnit && 1 !== t3.userUnit && lt3("/UserUnit " + t3.userUnit), Tt2.publish("putPage", { objId: n3, pageContext: Rt2[e3], pageNumber: e3, page: r3 }), lt3("/Contents " + i4 + " 0 R"), lt3(">>"), lt3("endobj");
    var a3 = r3.join("\n");
    return S2 === x22.ADVANCED && (a3 += "\nQ"), Zt2(i4, true), ie2({ data: a3, filters: ne3(), objectId: i4 }), lt3("endobj"), n3;
  }, oe2 = y3.__private__.putPages = function() {
    var t3, e3, r3 = [];
    for (t3 = 1; t3 <= Dt2; t3++) Rt2[t3].objId = Kt2(), Rt2[t3].contentsObjId = Kt2();
    for (t3 = 1; t3 <= Dt2; t3++) r3.push(ae2({ number: t3, data: ot2[t3], objId: Rt2[t3].objId, contentsObjId: Rt2[t3].contentsObjId, mediaBox: Rt2[t3].mediaBox, cropBox: Rt2[t3].cropBox, bleedBox: Rt2[t3].bleedBox, trimBox: Rt2[t3].trimBox, artBox: Rt2[t3].artBox, userUnit: Rt2[t3].userUnit, rootDictionaryObjId: Qt2, resourceDictionaryObjId: te2 }));
    Zt2(Qt2, true), lt3("<</Type /Pages");
    var n3 = "/Kids [";
    for (e3 = 0; e3 < Dt2; e3++) n3 += r3[e3] + " 0 R ";
    lt3(n3 + "]"), lt3("/Count " + Dt2), lt3(">>"), lt3("endobj"), Tt2.publish("postPutPages");
  }, se2 = /* @__PURE__ */ __name2(function(t3) {
    Tt2.publish("putFont", { font: t3, out: lt3, newObject: Xt2, putStream: ie2 }), true !== t3.isAlreadyPutted && (t3.objectNumber = Xt2(), lt3("<<"), lt3("/Type /Font"), lt3("/BaseFont /" + F(t3.postScriptName)), lt3("/Subtype /Type1"), "string" == typeof t3.encoding && lt3("/Encoding /" + t3.encoding), lt3("/FirstChar 32"), lt3("/LastChar 255"), lt3(">>"), lt3("endobj"));
  }, "se"), ce2 = /* @__PURE__ */ __name2(function() {
    for (var t3 in Ft2) Ft2.hasOwnProperty(t3) && (false === v3 || true === v3 && b2.hasOwnProperty(t3)) && se2(Ft2[t3]);
  }, "ce"), ue2 = /* @__PURE__ */ __name2(function(t3) {
    t3.objectNumber = Xt2();
    var e3 = [];
    e3.push({ key: "Type", value: "/XObject" }), e3.push({ key: "Subtype", value: "/Form" }), e3.push({ key: "BBox", value: "[" + [O3(t3.x), O3(t3.y), O3(t3.x + t3.width), O3(t3.y + t3.height)].join(" ") + "]" }), e3.push({ key: "Matrix", value: "[" + t3.matrix.toString() + "]" });
    var r3 = t3.pages[1].join("\n");
    ie2({ data: r3, additionalKeyValues: e3, objectId: t3.objectNumber }), lt3("endobj");
  }, "ue"), he2 = /* @__PURE__ */ __name2(function() {
    for (var t3 in zt2) zt2.hasOwnProperty(t3) && ue2(zt2[t3]);
  }, "he"), le2 = /* @__PURE__ */ __name2(function(t3, e3) {
    var r3, n3 = [], i4 = 1 / (e3 - 1);
    for (r3 = 0; r3 < 1; r3 += i4) n3.push(r3);
    if (n3.push(1), 0 != t3[0].offset) {
      var a3 = { offset: 0, color: t3[0].color };
      t3.unshift(a3);
    }
    if (1 != t3[t3.length - 1].offset) {
      var o4 = { offset: 1, color: t3[t3.length - 1].color };
      t3.push(o4);
    }
    for (var s4 = "", c5 = 0, u4 = 0; u4 < n3.length; u4++) {
      for (r3 = n3[u4]; r3 > t3[c5 + 1].offset; ) c5++;
      var h3 = t3[c5].offset, l3 = (r3 - h3) / (t3[c5 + 1].offset - h3), f3 = t3[c5].color, d3 = t3[c5 + 1].color;
      s4 += tt2(Math.round((1 - l3) * f3[0] + l3 * d3[0]).toString(16)) + tt2(Math.round((1 - l3) * f3[1] + l3 * d3[1]).toString(16)) + tt2(Math.round((1 - l3) * f3[2] + l3 * d3[2]).toString(16));
    }
    return s4.trim();
  }, "le"), fe2 = /* @__PURE__ */ __name2(function(t3, e3) {
    e3 || (e3 = 21);
    var r3 = Xt2(), n3 = le2(t3.colors, e3), i4 = [];
    i4.push({ key: "FunctionType", value: "0" }), i4.push({ key: "Domain", value: "[0.0 1.0]" }), i4.push({ key: "Size", value: "[" + e3 + "]" }), i4.push({ key: "BitsPerSample", value: "8" }), i4.push({ key: "Range", value: "[0.0 1.0 0.0 1.0 0.0 1.0]" }), i4.push({ key: "Decode", value: "[0.0 1.0 0.0 1.0 0.0 1.0]" }), ie2({ data: n3, additionalKeyValues: i4, alreadyAppliedFilters: ["/ASCIIHexDecode"], objectId: r3 }), lt3("endobj"), t3.objectNumber = Xt2(), lt3("<< /ShadingType " + t3.type), lt3("/ColorSpace /DeviceRGB");
    var a3 = "/Coords [" + O3(parseFloat(t3.coords[0])) + " " + O3(parseFloat(t3.coords[1])) + " ";
    2 === t3.type ? a3 += O3(parseFloat(t3.coords[2])) + " " + O3(parseFloat(t3.coords[3])) : a3 += O3(parseFloat(t3.coords[2])) + " " + O3(parseFloat(t3.coords[3])) + " " + O3(parseFloat(t3.coords[4])) + " " + O3(parseFloat(t3.coords[5])), lt3(a3 += "]"), t3.matrix && lt3("/Matrix [" + t3.matrix.toString() + "]"), lt3("/Function " + r3 + " 0 R"), lt3("/Extend [true true]"), lt3(">>"), lt3("endobj");
  }, "fe"), de2 = /* @__PURE__ */ __name2(function(t3, e3) {
    var r3 = Kt2(), n3 = Xt2();
    e3.push({ resourcesOid: r3, objectOid: n3 }), t3.objectNumber = n3;
    var i4 = [];
    i4.push({ key: "Type", value: "/Pattern" }), i4.push({ key: "PatternType", value: "1" }), i4.push({ key: "PaintType", value: "1" }), i4.push({ key: "TilingType", value: "1" }), i4.push({ key: "BBox", value: "[" + t3.boundingBox.map(O3).join(" ") + "]" }), i4.push({ key: "XStep", value: O3(t3.xStep) }), i4.push({ key: "YStep", value: O3(t3.yStep) }), i4.push({ key: "Resources", value: r3 + " 0 R" }), t3.matrix && i4.push({ key: "Matrix", value: "[" + t3.matrix.toString() + "]" }), ie2({ data: t3.stream, additionalKeyValues: i4, objectId: t3.objectNumber }), lt3("endobj");
  }, "de"), pe2 = /* @__PURE__ */ __name2(function(t3) {
    var e3;
    for (e3 in Ot2) Ot2.hasOwnProperty(e3) && (Ot2[e3] instanceof B ? fe2(Ot2[e3]) : Ot2[e3] instanceof M && de2(Ot2[e3], t3));
  }, "pe"), ge2 = /* @__PURE__ */ __name2(function(t3) {
    for (var e3 in t3.objectNumber = Xt2(), lt3("<<"), t3) switch (e3) {
      case "opacity":
        lt3("/ca " + R2(t3[e3]));
        break;
      case "stroke-opacity":
        lt3("/CA " + R2(t3[e3]));
    }
    lt3(">>"), lt3("endobj");
  }, "ge"), me2 = /* @__PURE__ */ __name2(function() {
    var t3;
    for (t3 in Mt2) Mt2.hasOwnProperty(t3) && ge2(Mt2[t3]);
  }, "me"), ve2 = /* @__PURE__ */ __name2(function() {
    for (var t3 in lt3("/XObject <<"), zt2) zt2.hasOwnProperty(t3) && zt2[t3].objectNumber >= 0 && lt3("/" + t3 + " " + zt2[t3].objectNumber + " 0 R");
    Tt2.publish("putXobjectDict"), lt3(">>");
  }, "ve"), be2 = /* @__PURE__ */ __name2(function() {
    Ye.oid = Xt2(), lt3("<<"), lt3("/Filter /Standard"), lt3("/V " + Ye.v), lt3("/R " + Ye.r), lt3("/U <" + Ye.toHexString(Ye.U) + ">"), lt3("/O <" + Ye.toHexString(Ye.O) + ">"), lt3("/P " + Ye.P), lt3(">>"), lt3("endobj");
  }, "be"), ye2 = /* @__PURE__ */ __name2(function() {
    for (var t3 in lt3("/Font <<"), Ft2) Ft2.hasOwnProperty(t3) && (false === v3 || true === v3 && b2.hasOwnProperty(t3)) && lt3("/" + t3 + " " + Ft2[t3].objectNumber + " 0 R");
    lt3(">>");
  }, "ye"), we2 = /* @__PURE__ */ __name2(function() {
    if (Object.keys(Ot2).length > 0) {
      for (var t3 in lt3("/Shading <<"), Ot2) Ot2.hasOwnProperty(t3) && Ot2[t3] instanceof B && Ot2[t3].objectNumber >= 0 && lt3("/" + t3 + " " + Ot2[t3].objectNumber + " 0 R");
      Tt2.publish("putShadingPatternDict"), lt3(">>");
    }
  }, "we"), Ne2 = /* @__PURE__ */ __name2(function(t3) {
    if (Object.keys(Ot2).length > 0) {
      for (var e3 in lt3("/Pattern <<"), Ot2) Ot2.hasOwnProperty(e3) && Ot2[e3] instanceof y3.TilingPattern && Ot2[e3].objectNumber >= 0 && Ot2[e3].objectNumber < t3 && lt3("/" + e3 + " " + Ot2[e3].objectNumber + " 0 R");
      Tt2.publish("putTilingPatternDict"), lt3(">>");
    }
  }, "Ne"), Le2 = /* @__PURE__ */ __name2(function() {
    if (Object.keys(Mt2).length > 0) {
      var t3;
      for (t3 in lt3("/ExtGState <<"), Mt2) Mt2.hasOwnProperty(t3) && Mt2[t3].objectNumber >= 0 && lt3("/" + t3 + " " + Mt2[t3].objectNumber + " 0 R");
      Tt2.publish("putGStateDict"), lt3(">>");
    }
  }, "Le"), Ae = /* @__PURE__ */ __name2(function(t3) {
    Zt2(t3.resourcesOid, true), lt3("<<"), lt3("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"), ye2(), we2(), Ne2(t3.objectOid), Le2(), ve2(), lt3(">>"), lt3("endobj");
  }, "Ae"), xe = /* @__PURE__ */ __name2(function() {
    var t3 = [];
    ce2(), me2(), he2(), pe2(t3), Tt2.publish("putResources"), t3.forEach(Ae), Ae({ resourcesOid: te2, objectOid: Number.MAX_SAFE_INTEGER }), Tt2.publish("postPutResources");
  }, "xe"), Se = /* @__PURE__ */ __name2(function() {
    Tt2.publish("putAdditionalObjects");
    for (var t3 = 0; t3 < at2.length; t3++) {
      var e3 = at2[t3];
      Zt2(e3.objId, true), lt3(e3.content), lt3("endobj");
    }
    Tt2.publish("postPutAdditionalObjects");
  }, "Se"), _e = /* @__PURE__ */ __name2(function(t3) {
    Ct2[t3.fontName] = Ct2[t3.fontName] || {}, Ct2[t3.fontName][t3.fontStyle] = t3.id;
  }, "_e"), Pe = /* @__PURE__ */ __name2(function(t3, e3, r3, n3, i4) {
    var a3 = { id: "F" + (Object.keys(Ft2).length + 1).toString(10), postScriptName: t3, fontName: e3, fontStyle: r3, encoding: n3, isStandardFont: i4 || false, metadata: {} };
    return Tt2.publish("addFont", { font: a3, instance: this }), Ft2[a3.id] = a3, _e(a3), a3.id;
  }, "Pe"), ke = /* @__PURE__ */ __name2(function(t3) {
    for (var e3 = 0, r3 = pt2.length; e3 < r3; e3++) {
      var n3 = Pe.call(this, t3[e3][0], t3[e3][1], t3[e3][2], pt2[e3][3], true);
      false === v3 && (b2[n3] = true);
      var i4 = t3[e3][0].split("-");
      _e({ id: n3, fontName: i4[0], fontStyle: i4[1] || "" });
    }
    Tt2.publish("addFonts", { fonts: Ft2, dictionary: Ct2 });
  }, "ke"), Ie = /* @__PURE__ */ __name2(function(t3) {
    return t3.foo = function() {
      try {
        return t3.apply(this, arguments);
      } catch (t4) {
        var e3 = t4.stack || "";
        ~e3.indexOf(" at ") && (e3 = e3.split(" at ")[1]);
        var r3 = "Error in function " + e3.split("\n")[0].split("<")[0] + ": " + t4.message;
        if (!n2.console) throw new Error(r3);
        n2.console.error(r3, t4), n2.alert && alert(r3);
      }
    }, t3.foo.bar = t3, t3.foo;
  }, "Ie"), Fe = /* @__PURE__ */ __name2(function(t3, e3) {
    var r3, n3, i4, a3, o4, s4, c5, u4, h3;
    if (i4 = (e3 = e3 || {}).sourceEncoding || "Unicode", o4 = e3.outputEncoding, (e3.autoencode || o4) && Ft2[St2].metadata && Ft2[St2].metadata[i4] && Ft2[St2].metadata[i4].encoding && (a3 = Ft2[St2].metadata[i4].encoding, !o4 && Ft2[St2].encoding && (o4 = Ft2[St2].encoding), !o4 && a3.codePages && (o4 = a3.codePages[0]), "string" == typeof o4 && (o4 = a3[o4]), o4)) {
      for (c5 = false, s4 = [], r3 = 0, n3 = t3.length; r3 < n3; r3++) (u4 = o4[t3.charCodeAt(r3)]) ? s4.push(String.fromCharCode(u4)) : s4.push(t3[r3]), s4[r3].charCodeAt(0) >> 8 && (c5 = true);
      t3 = s4.join("");
    }
    for (r3 = t3.length; void 0 === c5 && 0 !== r3; ) t3.charCodeAt(r3 - 1) >> 8 && (c5 = true), r3--;
    if (!c5) return t3;
    for (s4 = e3.noBOM ? [] : [254, 255], r3 = 0, n3 = t3.length; r3 < n3; r3++) {
      if ((h3 = (u4 = t3.charCodeAt(r3)) >> 8) >> 8) throw new Error("Character at position " + r3 + " of string '" + t3 + "' exceeds 16bits. Cannot be encoded into UCS-2 BE");
      s4.push(h3), s4.push(u4 - (h3 << 8));
    }
    return String.fromCharCode.apply(void 0, s4);
  }, "Fe"), Ce = y3.__private__.pdfEscape = y3.pdfEscape = function(t3, e3) {
    return Fe(t3, e3).replace(/\\/g, "\\\\").replace(/\(/g, "\\(").replace(/\)/g, "\\)");
  }, je = y3.__private__.beginPage = function(t3) {
    ot2[++Dt2] = [], Rt2[Dt2] = { objId: 0, contentsObjId: 0, userUnit: Number(d2), artBox: null, bleedBox: null, cropBox: null, trimBox: null, mediaBox: { bottomLeftX: 0, bottomLeftY: 0, topRightX: Number(t3[0]), topRightY: Number(t3[1]) } }, Me(Dt2), ht2(ot2[$2]);
  }, Oe = /* @__PURE__ */ __name2(function(t3, e3) {
    var r3, n3, o4;
    switch (i33 = e3 || i33, "string" == typeof t3 && (r3 = A2(t3.toLowerCase()), Array.isArray(r3) && (n3 = r3[0], o4 = r3[1])), Array.isArray(t3) && (n3 = t3[0] * _t2, o4 = t3[1] * _t2), isNaN(n3) && (n3 = s3[0], o4 = s3[1]), (n3 > 14400 || o4 > 14400) && (a2.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"), n3 = Math.min(14400, n3), o4 = Math.min(14400, o4)), s3 = [n3, o4], i33.substr(0, 1)) {
      case "l":
        o4 > n3 && (s3 = [o4, n3]);
        break;
      case "p":
        n3 > o4 && (s3 = [o4, n3]);
    }
    je(s3), pr(fr), lt3(Lr), 0 !== kr && lt3(kr + " J"), 0 !== Ir && lt3(Ir + " j"), Tt2.publish("addPage", { pageNumber: Dt2 });
  }, "Oe"), Be = /* @__PURE__ */ __name2(function(t3) {
    t3 > 0 && t3 <= Dt2 && (ot2.splice(t3, 1), Rt2.splice(t3, 1), Dt2--, $2 > Dt2 && ($2 = Dt2), this.setPage($2));
  }, "Be"), Me = /* @__PURE__ */ __name2(function(t3) {
    t3 > 0 && t3 <= Dt2 && ($2 = t3);
  }, "Me"), Ee = y3.__private__.getNumberOfPages = y3.getNumberOfPages = function() {
    return ot2.length - 1;
  }, qe = /* @__PURE__ */ __name2(function(t3, e3, r3) {
    var n3, i4 = void 0;
    return r3 = r3 || {}, t3 = void 0 !== t3 ? t3 : Ft2[St2].fontName, e3 = void 0 !== e3 ? e3 : Ft2[St2].fontStyle, n3 = t3.toLowerCase(), void 0 !== Ct2[n3] && void 0 !== Ct2[n3][e3] ? i4 = Ct2[n3][e3] : void 0 !== Ct2[t3] && void 0 !== Ct2[t3][e3] ? i4 = Ct2[t3][e3] : false === r3.disableWarning && a2.warn("Unable to look up font label for font '" + t3 + "', '" + e3 + "'. Refer to getFontList() for available fonts."), i4 || r3.noFallback || null == (i4 = Ct2.times[e3]) && (i4 = Ct2.times.normal), i4;
  }, "qe"), De = y3.__private__.putInfo = function() {
    var t3 = Xt2(), e3 = /* @__PURE__ */ __name2(function(t4) {
      return t4;
    }, "e");
    for (var r3 in null !== m4 && (e3 = Ye.encryptor(t3, 0)), lt3("<<"), lt3("/Producer (" + Ce(e3("jsPDF " + E.version)) + ")"), xt2) xt2.hasOwnProperty(r3) && xt2[r3] && lt3("/" + r3.substr(0, 1).toUpperCase() + r3.substr(1) + " (" + Ce(e3(xt2[r3])) + ")");
    lt3("/CreationDate (" + Ce(e3(W2)) + ")"), lt3(">>"), lt3("endobj");
  }, Re = y3.__private__.putCatalog = function(t3) {
    var e3 = (t3 = t3 || {}).rootDictionaryObjId || Qt2;
    switch (Xt2(), lt3("<<"), lt3("/Type /Catalog"), lt3("/Pages " + e3 + " 0 R"), mt2 || (mt2 = "fullwidth"), mt2) {
      case "fullwidth":
        lt3("/OpenAction [3 0 R /FitH null]");
        break;
      case "fullheight":
        lt3("/OpenAction [3 0 R /FitV null]");
        break;
      case "fullpage":
        lt3("/OpenAction [3 0 R /Fit]");
        break;
      case "original":
        lt3("/OpenAction [3 0 R /XYZ null null 1]");
        break;
      default:
        var r3 = "" + mt2;
        "%" === r3.substr(r3.length - 1) && (mt2 = parseInt(mt2) / 100), "number" == typeof mt2 && lt3("/OpenAction [3 0 R /XYZ null null " + R2(mt2) + "]");
    }
    switch (Nt2 || (Nt2 = "continuous"), Nt2) {
      case "continuous":
        lt3("/PageLayout /OneColumn");
        break;
      case "single":
        lt3("/PageLayout /SinglePage");
        break;
      case "two":
      case "twoleft":
        lt3("/PageLayout /TwoColumnLeft");
        break;
      case "tworight":
        lt3("/PageLayout /TwoColumnRight");
    }
    yt2 && lt3("/PageMode /" + yt2), Tt2.publish("putCatalog"), lt3(">>"), lt3("endobj");
  }, Te = y3.__private__.putTrailer = function() {
    lt3("trailer"), lt3("<<"), lt3("/Size " + (et3 + 1)), lt3("/Root " + et3 + " 0 R"), lt3("/Info " + (et3 - 1) + " 0 R"), null !== m4 && lt3("/Encrypt " + Ye.oid + " 0 R"), lt3("/ID [ <" + V3 + "> <" + V3 + "> ]"), lt3(">>");
  }, Ue = y3.__private__.putHeader = function() {
    lt3("%PDF-" + w2), lt3("%\xBA\xDF\xAC\xE0");
  }, ze = y3.__private__.putXRef = function() {
    var t3 = "0000000000";
    lt3("xref"), lt3("0 " + (et3 + 1)), lt3("0000000000 65535 f ");
    for (var e3 = 1; e3 <= et3; e3++) {
      "function" == typeof rt2[e3] ? lt3((t3 + rt2[e3]()).slice(-10) + " 00000 n ") : void 0 !== rt2[e3] ? lt3((t3 + rt2[e3]).slice(-10) + " 00000 n ") : lt3("0000000000 00000 n ");
    }
  }, He = y3.__private__.buildDocument = function() {
    ut2(), ht2(nt2), Tt2.publish("buildDocument"), Ue(), oe2(), Se(), xe(), null !== m4 && be2(), De(), Re();
    var t3 = it2;
    return ze(), Te(), lt3("startxref"), lt3("" + t3), lt3("%%EOF"), ht2(ot2[$2]), nt2.join("\n");
  }, We = y3.__private__.getBlob = function(t3) {
    return new Blob([dt2(t3)], { type: "application/pdf" });
  }, Ve = y3.output = y3.__private__.output = Ie(function(t3, e3) {
    switch ("string" == typeof (e3 = e3 || {}) ? e3 = { filename: e3 } : e3.filename = e3.filename || "generated.pdf", t3) {
      case void 0:
        return He();
      case "save":
        y3.save(e3.filename);
        break;
      case "arraybuffer":
        return dt2(He());
      case "blob":
        return We(He());
      case "bloburi":
      case "bloburl":
        if (void 0 !== n2.URL && "function" == typeof n2.URL.createObjectURL) return n2.URL && n2.URL.createObjectURL(We(He())) || void 0;
        a2.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");
        break;
      case "datauristring":
      case "dataurlstring":
        var r3 = "", i4 = He();
        try {
          r3 = h2(i4);
        } catch (t4) {
          r3 = h2(unescape(encodeURIComponent(i4)));
        }
        return "data:application/pdf;filename=" + e3.filename + ";base64," + r3;
      case "pdfobjectnewwindow":
        if ("[object Window]" === Object.prototype.toString.call(n2)) {
          var o4 = "https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js", s4 = ' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';
          e3.pdfObjectUrl && (o4 = e3.pdfObjectUrl, s4 = "");
          var c5 = '<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="' + o4 + '"' + s4 + '><\/script><script >PDFObject.embed("' + this.output("dataurlstring") + '", ' + JSON.stringify(e3) + ");<\/script></body></html>", u4 = n2.open();
          return null !== u4 && u4.document.write(c5), u4;
        }
        throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");
      case "pdfjsnewwindow":
        if ("[object Window]" === Object.prototype.toString.call(n2)) {
          var l3 = '<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="' + (e3.pdfJsUrl || "examples/PDF.js/web/viewer.html") + "?file=&downloadName=" + e3.filename + '" width="500px" height="400px" /></body></html>', f3 = n2.open();
          if (null !== f3) {
            f3.document.write(l3);
            var d3 = this;
            f3.document.documentElement.querySelector("#pdfViewer").onload = function() {
              f3.document.title = e3.filename, f3.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(d3.output("bloburl"));
            };
          }
          return f3;
        }
        throw new Error("The option pdfjsnewwindow just works in a browser-environment.");
      case "dataurlnewwindow":
        if ("[object Window]" !== Object.prototype.toString.call(n2)) throw new Error("The option dataurlnewwindow just works in a browser-environment.");
        var p4 = '<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="' + this.output("datauristring", e3) + '"></iframe></body></html>', g3 = n2.open();
        if (null !== g3 && (g3.document.write(p4), g3.document.title = e3.filename), g3 || "undefined" == typeof safari) return g3;
        break;
      case "datauri":
      case "dataurl":
        return n2.document.location.href = this.output("datauristring", e3);
      default:
        return null;
    }
  }), Ge = /* @__PURE__ */ __name2(function(t3) {
    return true === Array.isArray(Ut2) && Ut2.indexOf(t3) > -1;
  }, "Ge");
  switch (o3) {
    case "pt":
      _t2 = 1;
      break;
    case "mm":
      _t2 = 72 / 25.4;
      break;
    case "cm":
      _t2 = 72 / 2.54;
      break;
    case "in":
      _t2 = 72;
      break;
    case "px":
      _t2 = 1 == Ge("px_scaling") ? 0.75 : 96 / 72;
      break;
    case "pc":
    case "em":
      _t2 = 12;
      break;
    case "ex":
      _t2 = 6;
      break;
    default:
      if ("number" != typeof o3) throw new Error("Invalid unit: " + o3);
      _t2 = o3;
  }
  var Ye = null;
  K2(), Y2();
  var Je = /* @__PURE__ */ __name2(function(t3) {
    return null !== m4 ? Ye.encryptor(t3, 0) : function(t4) {
      return t4;
    };
  }, "Je"), Xe = y3.__private__.getPageInfo = y3.getPageInfo = function(t3) {
    if (isNaN(t3) || t3 % 1 != 0) throw new Error("Invalid argument passed to jsPDF.getPageInfo");
    return { objId: Rt2[t3].objId, pageNumber: t3, pageContext: Rt2[t3] };
  }, Ke = y3.__private__.getPageInfoByObjId = function(t3) {
    if (isNaN(t3) || t3 % 1 != 0) throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");
    for (var e3 in Rt2) if (Rt2[e3].objId === t3) break;
    return Xe(e3);
  }, Ze = y3.__private__.getCurrentPageInfo = y3.getCurrentPageInfo = function() {
    return { objId: Rt2[$2].objId, pageNumber: $2, pageContext: Rt2[$2] };
  };
  y3.addPage = function() {
    return Oe.apply(this, arguments), this;
  }, y3.setPage = function() {
    return Me.apply(this, arguments), ht2.call(this, ot2[$2]), this;
  }, y3.insertPage = function(t3) {
    return this.addPage(), this.movePage($2, t3), this;
  }, y3.movePage = function(t3, e3) {
    var r3, n3;
    if (t3 > e3) {
      r3 = ot2[t3], n3 = Rt2[t3];
      for (var i4 = t3; i4 > e3; i4--) ot2[i4] = ot2[i4 - 1], Rt2[i4] = Rt2[i4 - 1];
      ot2[e3] = r3, Rt2[e3] = n3, this.setPage(e3);
    } else if (t3 < e3) {
      r3 = ot2[t3], n3 = Rt2[t3];
      for (var a3 = t3; a3 < e3; a3++) ot2[a3] = ot2[a3 + 1], Rt2[a3] = Rt2[a3 + 1];
      ot2[e3] = r3, Rt2[e3] = n3, this.setPage(e3);
    }
    return this;
  }, y3.deletePage = function() {
    return Be.apply(this, arguments), this;
  }, y3.__private__.text = y3.text = function(e3, r3, n3, i4, a3) {
    var o4, s4, c5, u4, h3, l3, f3, d3, p4, g3 = (i4 = i4 || {}).scope || this;
    if ("number" == typeof e3 && "number" == typeof r3 && ("string" == typeof n3 || Array.isArray(n3))) {
      var m5 = n3;
      n3 = r3, r3 = e3, e3 = m5;
    }
    if (arguments[3] instanceof Vt2 == false ? (c5 = arguments[4], u4 = arguments[5], "object" === _typeof(f3 = arguments[3]) && null !== f3 || ("string" == typeof c5 && (u4 = c5, c5 = null), "string" == typeof f3 && (u4 = f3, f3 = null), "number" == typeof f3 && (c5 = f3, f3 = null), i4 = { flags: f3, angle: c5, align: u4 })) : (q2("The transform parameter of text() with a Matrix value"), p4 = a3), isNaN(r3) || isNaN(n3) || null == e3) throw new Error("Invalid arguments passed to jsPDF.text");
    if (0 === e3.length) return g3;
    var v4 = "", y4 = false, w3 = "number" == typeof i4.lineHeightFactor ? i4.lineHeightFactor : lr, N4 = g3.internal.scaleFactor;
    function L3(t3) {
      return t3 = t3.split("	").join(Array(i4.TabLen || 9).join(" ")), Ce(t3, f3);
    }
    __name(L3, "L3");
    __name2(L3, "L");
    function A3(t3) {
      for (var e4, r4 = t3.concat(), n4 = [], i5 = r4.length; i5--; ) "string" == typeof (e4 = r4.shift()) ? n4.push(e4) : Array.isArray(t3) && (1 === e4.length || void 0 === e4[1] && void 0 === e4[2]) ? n4.push(e4[0]) : n4.push([e4[0], e4[1], e4[2]]);
      return n4;
    }
    __name(A3, "A3");
    __name2(A3, "A");
    function _4(t3, e4) {
      var r4;
      if ("string" == typeof t3) r4 = e4(t3)[0];
      else if (Array.isArray(t3)) {
        for (var n4, i5, a4 = t3.concat(), o5 = [], s5 = a4.length; s5--; ) "string" == typeof (n4 = a4.shift()) ? o5.push(e4(n4)[0]) : Array.isArray(n4) && "string" == typeof n4[0] && (i5 = e4(n4[0], n4[1], n4[2]), o5.push([i5[0], i5[1], i5[2]]));
        r4 = o5;
      }
      return r4;
    }
    __name(_4, "_4");
    __name2(_4, "_");
    var P3 = false, k3 = true;
    if ("string" == typeof e3) P3 = true;
    else if (Array.isArray(e3)) {
      var I2 = e3.concat();
      s4 = [];
      for (var F2, C2 = I2.length; C2--; ) ("string" != typeof (F2 = I2.shift()) || Array.isArray(F2) && "string" != typeof F2[0]) && (k3 = false);
      P3 = k3;
    }
    if (false === P3) throw new Error('Type of text must be string or Array. "' + e3 + '" is not recognized.');
    "string" == typeof e3 && (e3 = e3.match(/[\r?\n]/) ? e3.split(/\r\n|\r|\n/g) : [e3]);
    var j2 = gt3 / g3.internal.scaleFactor, B2 = j2 * (w3 - 1);
    switch (i4.baseline) {
      case "bottom":
        n3 -= B2;
        break;
      case "top":
        n3 += j2 - B2;
        break;
      case "hanging":
        n3 += j2 - 2 * B2;
        break;
      case "middle":
        n3 += j2 / 2 - B2;
    }
    if ((l3 = i4.maxWidth || 0) > 0 && ("string" == typeof e3 ? e3 = g3.splitTextToSize(e3, l3) : "[object Array]" === Object.prototype.toString.call(e3) && (e3 = e3.reduce(function(t3, e4) {
      return t3.concat(g3.splitTextToSize(e4, l3));
    }, []))), o4 = { text: e3, x: r3, y: n3, options: i4, mutex: { pdfEscape: Ce, activeFontKey: St2, fonts: Ft2, activeFontSize: gt3 } }, Tt2.publish("preProcessText", o4), e3 = o4.text, c5 = (i4 = o4.options).angle, p4 instanceof Vt2 == false && c5 && "number" == typeof c5) {
      c5 *= Math.PI / 180, 0 === i4.rotationDirection && (c5 = -c5), S2 === x22.ADVANCED && (c5 = -c5);
      var M2 = Math.cos(c5), E2 = Math.sin(c5);
      p4 = new Vt2(M2, E2, -E2, M2, 0, 0);
    } else c5 && c5 instanceof Vt2 && (p4 = c5);
    S2 !== x22.ADVANCED || p4 || (p4 = Yt2), void 0 !== (h3 = i4.charSpace || _r) && (v4 += O3(U2(h3)) + " Tc\n", this.setCharSpace(this.getCharSpace() || 0)), void 0 !== (d3 = i4.horizontalScale) && (v4 += O3(100 * d3) + " Tz\n"), i4.lang;
    var D3 = -1, R3 = void 0 !== i4.renderingMode ? i4.renderingMode : i4.stroke, T4 = g3.internal.getCurrentPageInfo().pageContext;
    switch (R3) {
      case 0:
      case false:
      case "fill":
        D3 = 0;
        break;
      case 1:
      case true:
      case "stroke":
        D3 = 1;
        break;
      case 2:
      case "fillThenStroke":
        D3 = 2;
        break;
      case 3:
      case "invisible":
        D3 = 3;
        break;
      case 4:
      case "fillAndAddForClipping":
        D3 = 4;
        break;
      case 5:
      case "strokeAndAddPathForClipping":
        D3 = 5;
        break;
      case 6:
      case "fillThenStrokeAndAddToPathForClipping":
        D3 = 6;
        break;
      case 7:
      case "addToPathForClipping":
        D3 = 7;
    }
    var z4 = void 0 !== T4.usedRenderingMode ? T4.usedRenderingMode : -1;
    -1 !== D3 ? v4 += D3 + " Tr\n" : -1 !== z4 && (v4 += "0 Tr\n"), -1 !== D3 && (T4.usedRenderingMode = D3), u4 = i4.align || "left";
    var H3, W3 = gt3 * w3, V4 = g3.internal.pageSize.getWidth(), G3 = Ft2[St2];
    h3 = i4.charSpace || _r, l3 = i4.maxWidth || 0, f3 = Object.assign({ autoencode: true, noBOM: true }, i4.flags);
    var Y3 = [], J3 = /* @__PURE__ */ __name2(function(t3) {
      return g3.getStringUnitWidth(t3, { font: G3, charSpace: h3, fontSize: gt3, doKerning: false }) * gt3 / N4;
    }, "J");
    if ("[object Array]" === Object.prototype.toString.call(e3)) {
      var X3;
      s4 = A3(e3), "left" !== u4 && (H3 = s4.map(J3));
      var K3, Z3 = 0;
      if ("right" === u4) {
        r3 -= H3[0], e3 = [], C2 = s4.length;
        for (var $3 = 0; $3 < C2; $3++) 0 === $3 ? (K3 = br(r3), X3 = yr(n3)) : (K3 = U2(Z3 - H3[$3]), X3 = -W3), e3.push([s4[$3], K3, X3]), Z3 = H3[$3];
      } else if ("center" === u4) {
        r3 -= H3[0] / 2, e3 = [], C2 = s4.length;
        for (var Q3 = 0; Q3 < C2; Q3++) 0 === Q3 ? (K3 = br(r3), X3 = yr(n3)) : (K3 = U2((Z3 - H3[Q3]) / 2), X3 = -W3), e3.push([s4[Q3], K3, X3]), Z3 = H3[Q3];
      } else if ("left" === u4) {
        e3 = [], C2 = s4.length;
        for (var tt3 = 0; tt3 < C2; tt3++) e3.push(s4[tt3]);
      } else if ("justify" === u4 && "Identity-H" === G3.encoding) {
        e3 = [], C2 = s4.length, l3 = 0 !== l3 ? l3 : V4;
        for (var et4 = 0, rt3 = 0; rt3 < C2; rt3++) if (X3 = 0 === rt3 ? yr(n3) : -W3, K3 = 0 === rt3 ? br(r3) : et4, rt3 < C2 - 1) {
          var nt3 = U2((l3 - H3[rt3]) / (s4[rt3].split(" ").length - 1)), it3 = s4[rt3].split(" ");
          e3.push([it3[0] + " ", K3, X3]), et4 = 0;
          for (var at3 = 1; at3 < it3.length; at3++) {
            var ot3 = (J3(it3[at3 - 1] + " " + it3[at3]) - J3(it3[at3])) * N4 + nt3;
            at3 == it3.length - 1 ? e3.push([it3[at3], ot3, 0]) : e3.push([it3[at3] + " ", ot3, 0]), et4 -= ot3;
          }
        } else e3.push([s4[rt3], K3, X3]);
        e3.push(["", et4, 0]);
      } else {
        if ("justify" !== u4) throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');
        e3 = [], C2 = s4.length, l3 = 0 !== l3 ? l3 : V4;
        for (rt3 = 0; rt3 < C2; rt3++) X3 = 0 === rt3 ? yr(n3) : -W3, K3 = 0 === rt3 ? br(r3) : 0, rt3 < C2 - 1 ? Y3.push(O3(U2((l3 - H3[rt3]) / (s4[rt3].split(" ").length - 1)))) : Y3.push(0), e3.push([s4[rt3], K3, X3]);
      }
    }
    var st3 = "boolean" == typeof i4.R2L ? i4.R2L : bt2;
    true === st3 && (e3 = _4(e3, function(t3, e4, r4) {
      return [t3.split("").reverse().join(""), e4, r4];
    })), o4 = { text: e3, x: r3, y: n3, options: i4, mutex: { pdfEscape: Ce, activeFontKey: St2, fonts: Ft2, activeFontSize: gt3 } }, Tt2.publish("postProcessText", o4), e3 = o4.text, y4 = o4.mutex.isHex || false;
    var ct3 = Ft2[St2].encoding;
    "WinAnsiEncoding" !== ct3 && "StandardEncoding" !== ct3 || (e3 = _4(e3, function(t3, e4, r4) {
      return [L3(t3), e4, r4];
    })), s4 = A3(e3), e3 = [];
    for (var ut3, ht3, ft3, dt3 = 0, pt3 = 1, mt3 = Array.isArray(s4[0]) ? pt3 : dt3, vt3 = "", yt3 = function(t3, e4, r4) {
      var n4 = "";
      return r4 instanceof Vt2 ? (r4 = "number" == typeof i4.angle ? Gt2(r4, new Vt2(1, 0, 0, 1, t3, e4)) : Gt2(new Vt2(1, 0, 0, 1, t3, e4), r4), S2 === x22.ADVANCED && (r4 = Gt2(new Vt2(1, 0, 0, -1, 0, 0), r4)), n4 = r4.join(" ") + " Tm\n") : n4 = O3(t3) + " " + O3(e4) + " Td\n", n4;
    }, wt3 = 0; wt3 < s4.length; wt3++) {
      switch (vt3 = "", mt3) {
        case pt3:
          ft3 = (y4 ? "<" : "(") + s4[wt3][0] + (y4 ? ">" : ")"), ut3 = parseFloat(s4[wt3][1]), ht3 = parseFloat(s4[wt3][2]);
          break;
        case dt3:
          ft3 = (y4 ? "<" : "(") + s4[wt3] + (y4 ? ">" : ")"), ut3 = br(r3), ht3 = yr(n3);
      }
      void 0 !== Y3 && void 0 !== Y3[wt3] && (vt3 = Y3[wt3] + " Tw\n"), 0 === wt3 ? e3.push(vt3 + yt3(ut3, ht3, p4) + ft3) : mt3 === dt3 ? e3.push(vt3 + ft3) : mt3 === pt3 && e3.push(vt3 + yt3(ut3, ht3, p4) + ft3);
    }
    e3 = mt3 === dt3 ? e3.join(" Tj\nT* ") : e3.join(" Tj\n"), e3 += " Tj\n";
    var Nt3 = "BT\n/";
    return Nt3 += St2 + " " + gt3 + " Tf\n", Nt3 += O3(gt3 * w3) + " TL\n", Nt3 += xr + "\n", Nt3 += v4, Nt3 += e3, lt3(Nt3 += "ET"), b2[St2] = true, g3;
  };
  var $e = y3.__private__.clip = y3.clip = function(t3) {
    return lt3("evenodd" === t3 ? "W*" : "W"), this;
  };
  y3.clipEvenOdd = function() {
    return $e("evenodd");
  }, y3.__private__.discardPath = y3.discardPath = function() {
    return lt3("n"), this;
  };
  var Qe = y3.__private__.isValidStyle = function(t3) {
    var e3 = false;
    return -1 !== [void 0, null, "S", "D", "F", "DF", "FD", "f", "f*", "B", "B*", "n"].indexOf(t3) && (e3 = true), e3;
  };
  y3.__private__.setDefaultPathOperation = y3.setDefaultPathOperation = function(t3) {
    return Qe(t3) && (g2 = t3), this;
  };
  var tr = y3.__private__.getStyle = y3.getStyle = function(t3) {
    var e3 = g2;
    switch (t3) {
      case "D":
      case "S":
        e3 = "S";
        break;
      case "F":
        e3 = "f";
        break;
      case "FD":
      case "DF":
        e3 = "B";
        break;
      case "f":
      case "f*":
      case "B":
      case "B*":
        e3 = t3;
    }
    return e3;
  }, er = y3.close = function() {
    return lt3("h"), this;
  };
  y3.stroke = function() {
    return lt3("S"), this;
  }, y3.fill = function(t3) {
    return rr("f", t3), this;
  }, y3.fillEvenOdd = function(t3) {
    return rr("f*", t3), this;
  }, y3.fillStroke = function(t3) {
    return rr("B", t3), this;
  }, y3.fillStrokeEvenOdd = function(t3) {
    return rr("B*", t3), this;
  };
  var rr = /* @__PURE__ */ __name2(function(e3, r3) {
    "object" === _typeof(r3) ? ar(r3, e3) : lt3(e3);
  }, "rr"), nr = /* @__PURE__ */ __name2(function(t3) {
    null === t3 || S2 === x22.ADVANCED && void 0 === t3 || (t3 = tr(t3), lt3(t3));
  }, "nr");
  function ir(t3, e3, r3, n3, i4) {
    var a3 = new M(e3 || this.boundingBox, r3 || this.xStep, n3 || this.yStep, this.gState, i4 || this.matrix);
    a3.stream = this.stream;
    var o4 = t3 + "$$" + this.cloneIndex++ + "$$";
    return Jt2(o4, a3), a3;
  }
  __name(ir, "ir");
  __name2(ir, "ir");
  var ar = /* @__PURE__ */ __name2(function(t3, e3) {
    var r3 = Bt2[t3.key], n3 = Ot2[r3];
    if (n3 instanceof B) lt3("q"), lt3(or2(e3)), n3.gState && y3.setGState(n3.gState), lt3(t3.matrix.toString() + " cm"), lt3("/" + r3 + " sh"), lt3("Q");
    else if (n3 instanceof M) {
      var i4 = new Vt2(1, 0, 0, -1, 0, Rr());
      t3.matrix && (i4 = i4.multiply(t3.matrix || Yt2), r3 = ir.call(n3, t3.key, t3.boundingBox, t3.xStep, t3.yStep, i4).id), lt3("q"), lt3("/Pattern cs"), lt3("/" + r3 + " scn"), n3.gState && y3.setGState(n3.gState), lt3(e3), lt3("Q");
    }
  }, "ar"), or2 = /* @__PURE__ */ __name2(function(t3) {
    switch (t3) {
      case "f":
      case "F":
        return "W n";
      case "f*":
        return "W* n";
      case "B":
        return "W S";
      case "B*":
        return "W* S";
      case "S":
        return "W S";
      case "n":
        return "W n";
    }
  }, "or"), sr = y3.moveTo = function(t3, e3) {
    return lt3(O3(U2(t3)) + " " + O3(H2(e3)) + " m"), this;
  }, cr = y3.lineTo = function(t3, e3) {
    return lt3(O3(U2(t3)) + " " + O3(H2(e3)) + " l"), this;
  }, ur = y3.curveTo = function(t3, e3, r3, n3, i4, a3) {
    return lt3([O3(U2(t3)), O3(H2(e3)), O3(U2(r3)), O3(H2(n3)), O3(U2(i4)), O3(H2(a3)), "c"].join(" ")), this;
  };
  y3.__private__.line = y3.line = function(t3, e3, r3, n3, i4) {
    if (isNaN(t3) || isNaN(e3) || isNaN(r3) || isNaN(n3) || !Qe(i4)) throw new Error("Invalid arguments passed to jsPDF.line");
    return S2 === x22.COMPAT ? this.lines([[r3 - t3, n3 - e3]], t3, e3, [1, 1], i4 || "S") : this.lines([[r3 - t3, n3 - e3]], t3, e3, [1, 1]).stroke();
  }, y3.__private__.lines = y3.lines = function(t3, e3, r3, n3, i4, a3) {
    var o4, s4, c5, u4, h3, l3, f3, d3, p4, g3, m5, v4;
    if ("number" == typeof t3 && (v4 = r3, r3 = e3, e3 = t3, t3 = v4), n3 = n3 || [1, 1], a3 = a3 || false, isNaN(e3) || isNaN(r3) || !Array.isArray(t3) || !Array.isArray(n3) || !Qe(i4) || "boolean" != typeof a3) throw new Error("Invalid arguments passed to jsPDF.lines");
    for (sr(e3, r3), o4 = n3[0], s4 = n3[1], u4 = t3.length, g3 = e3, m5 = r3, c5 = 0; c5 < u4; c5++) 2 === (h3 = t3[c5]).length ? (g3 = h3[0] * o4 + g3, m5 = h3[1] * s4 + m5, cr(g3, m5)) : (l3 = h3[0] * o4 + g3, f3 = h3[1] * s4 + m5, d3 = h3[2] * o4 + g3, p4 = h3[3] * s4 + m5, g3 = h3[4] * o4 + g3, m5 = h3[5] * s4 + m5, ur(l3, f3, d3, p4, g3, m5));
    return a3 && er(), nr(i4), this;
  }, y3.path = function(t3) {
    for (var e3 = 0; e3 < t3.length; e3++) {
      var r3 = t3[e3], n3 = r3.c;
      switch (r3.op) {
        case "m":
          sr(n3[0], n3[1]);
          break;
        case "l":
          cr(n3[0], n3[1]);
          break;
        case "c":
          ur.apply(this, n3);
          break;
        case "h":
          er();
      }
    }
    return this;
  }, y3.__private__.rect = y3.rect = function(t3, e3, r3, n3, i4) {
    if (isNaN(t3) || isNaN(e3) || isNaN(r3) || isNaN(n3) || !Qe(i4)) throw new Error("Invalid arguments passed to jsPDF.rect");
    return S2 === x22.COMPAT && (n3 = -n3), lt3([O3(U2(t3)), O3(H2(e3)), O3(U2(r3)), O3(U2(n3)), "re"].join(" ")), nr(i4), this;
  }, y3.__private__.triangle = y3.triangle = function(t3, e3, r3, n3, i4, a3, o4) {
    if (isNaN(t3) || isNaN(e3) || isNaN(r3) || isNaN(n3) || isNaN(i4) || isNaN(a3) || !Qe(o4)) throw new Error("Invalid arguments passed to jsPDF.triangle");
    return this.lines([[r3 - t3, n3 - e3], [i4 - r3, a3 - n3], [t3 - i4, e3 - a3]], t3, e3, [1, 1], o4, true), this;
  }, y3.__private__.roundedRect = y3.roundedRect = function(t3, e3, r3, n3, i4, a3, o4) {
    if (isNaN(t3) || isNaN(e3) || isNaN(r3) || isNaN(n3) || isNaN(i4) || isNaN(a3) || !Qe(o4)) throw new Error("Invalid arguments passed to jsPDF.roundedRect");
    var s4 = 4 / 3 * (Math.SQRT2 - 1);
    return i4 = Math.min(i4, 0.5 * r3), a3 = Math.min(a3, 0.5 * n3), this.lines([[r3 - 2 * i4, 0], [i4 * s4, 0, i4, a3 - a3 * s4, i4, a3], [0, n3 - 2 * a3], [0, a3 * s4, -i4 * s4, a3, -i4, a3], [2 * i4 - r3, 0], [-i4 * s4, 0, -i4, -a3 * s4, -i4, -a3], [0, 2 * a3 - n3], [0, -a3 * s4, i4 * s4, -a3, i4, -a3]], t3 + i4, e3, [1, 1], o4, true), this;
  }, y3.__private__.ellipse = y3.ellipse = function(t3, e3, r3, n3, i4) {
    if (isNaN(t3) || isNaN(e3) || isNaN(r3) || isNaN(n3) || !Qe(i4)) throw new Error("Invalid arguments passed to jsPDF.ellipse");
    var a3 = 4 / 3 * (Math.SQRT2 - 1) * r3, o4 = 4 / 3 * (Math.SQRT2 - 1) * n3;
    return sr(t3 + r3, e3), ur(t3 + r3, e3 - o4, t3 + a3, e3 - n3, t3, e3 - n3), ur(t3 - a3, e3 - n3, t3 - r3, e3 - o4, t3 - r3, e3), ur(t3 - r3, e3 + o4, t3 - a3, e3 + n3, t3, e3 + n3), ur(t3 + a3, e3 + n3, t3 + r3, e3 + o4, t3 + r3, e3), nr(i4), this;
  }, y3.__private__.circle = y3.circle = function(t3, e3, r3, n3) {
    if (isNaN(t3) || isNaN(e3) || isNaN(r3) || !Qe(n3)) throw new Error("Invalid arguments passed to jsPDF.circle");
    return this.ellipse(t3, e3, r3, r3, n3);
  }, y3.setFont = function(t3, e3, r3) {
    return r3 && (e3 = k2(e3, r3)), St2 = qe(t3, e3, { disableWarning: false }), this;
  };
  var hr = y3.__private__.getFont = y3.getFont = function() {
    return Ft2[qe.apply(y3, arguments)];
  };
  y3.__private__.getFontList = y3.getFontList = function() {
    var t3, e3, r3 = {};
    for (t3 in Ct2) if (Ct2.hasOwnProperty(t3)) for (e3 in r3[t3] = [], Ct2[t3]) Ct2[t3].hasOwnProperty(e3) && r3[t3].push(e3);
    return r3;
  }, y3.addFont = function(t3, e3, r3, n3, i4) {
    var a3 = ["StandardEncoding", "MacRomanEncoding", "Identity-H", "WinAnsiEncoding"];
    return arguments[3] && -1 !== a3.indexOf(arguments[3]) ? i4 = arguments[3] : arguments[3] && -1 == a3.indexOf(arguments[3]) && (r3 = k2(r3, n3)), i4 = i4 || "Identity-H", Pe.call(this, t3, e3, r3, i4);
  };
  var lr, fr = e2.lineWidth || 0.200025, dr = y3.__private__.getLineWidth = y3.getLineWidth = function() {
    return fr;
  }, pr = y3.__private__.setLineWidth = y3.setLineWidth = function(t3) {
    return fr = t3, lt3(O3(U2(t3)) + " w"), this;
  };
  y3.__private__.setLineDash = E.API.setLineDash = E.API.setLineDashPattern = function(t3, e3) {
    if (t3 = t3 || [], e3 = e3 || 0, isNaN(e3) || !Array.isArray(t3)) throw new Error("Invalid arguments passed to jsPDF.setLineDash");
    return t3 = t3.map(function(t4) {
      return O3(U2(t4));
    }).join(" "), e3 = O3(U2(e3)), lt3("[" + t3 + "] " + e3 + " d"), this;
  };
  var gr = y3.__private__.getLineHeight = y3.getLineHeight = function() {
    return gt3 * lr;
  };
  y3.__private__.getLineHeight = y3.getLineHeight = function() {
    return gt3 * lr;
  };
  var mr = y3.__private__.setLineHeightFactor = y3.setLineHeightFactor = function(t3) {
    return "number" == typeof (t3 = t3 || 1.15) && (lr = t3), this;
  }, vr = y3.__private__.getLineHeightFactor = y3.getLineHeightFactor = function() {
    return lr;
  };
  mr(e2.lineHeight);
  var br = y3.__private__.getHorizontalCoordinate = function(t3) {
    return U2(t3);
  }, yr = y3.__private__.getVerticalCoordinate = function(t3) {
    return S2 === x22.ADVANCED ? t3 : Rt2[$2].mediaBox.topRightY - Rt2[$2].mediaBox.bottomLeftY - U2(t3);
  }, wr = y3.__private__.getHorizontalCoordinateString = y3.getHorizontalCoordinateString = function(t3) {
    return O3(br(t3));
  }, Nr = y3.__private__.getVerticalCoordinateString = y3.getVerticalCoordinateString = function(t3) {
    return O3(yr(t3));
  }, Lr = e2.strokeColor || "0 G";
  y3.__private__.getStrokeColor = y3.getDrawColor = function() {
    return ee2(Lr);
  }, y3.__private__.setStrokeColor = y3.setDrawColor = function(t3, e3, r3, n3) {
    return Lr = re2({ ch1: t3, ch2: e3, ch3: r3, ch4: n3, pdfColorType: "draw", precision: 2 }), lt3(Lr), this;
  };
  var Ar = e2.fillColor || "0 g";
  y3.__private__.getFillColor = y3.getFillColor = function() {
    return ee2(Ar);
  }, y3.__private__.setFillColor = y3.setFillColor = function(t3, e3, r3, n3) {
    return Ar = re2({ ch1: t3, ch2: e3, ch3: r3, ch4: n3, pdfColorType: "fill", precision: 2 }), lt3(Ar), this;
  };
  var xr = e2.textColor || "0 g", Sr = y3.__private__.getTextColor = y3.getTextColor = function() {
    return ee2(xr);
  };
  y3.__private__.setTextColor = y3.setTextColor = function(t3, e3, r3, n3) {
    return xr = re2({ ch1: t3, ch2: e3, ch3: r3, ch4: n3, pdfColorType: "text", precision: 3 }), this;
  };
  var _r = e2.charSpace, Pr = y3.__private__.getCharSpace = y3.getCharSpace = function() {
    return parseFloat(_r || 0);
  };
  y3.__private__.setCharSpace = y3.setCharSpace = function(t3) {
    if (isNaN(t3)) throw new Error("Invalid argument passed to jsPDF.setCharSpace");
    return _r = t3, this;
  };
  var kr = 0;
  y3.CapJoinStyles = { 0: 0, butt: 0, but: 0, miter: 0, 1: 1, round: 1, rounded: 1, circle: 1, 2: 2, projecting: 2, project: 2, square: 2, bevel: 2 }, y3.__private__.setLineCap = y3.setLineCap = function(t3) {
    var e3 = y3.CapJoinStyles[t3];
    if (void 0 === e3) throw new Error("Line cap style of '" + t3 + "' is not recognized. See or extend .CapJoinStyles property for valid styles");
    return kr = e3, lt3(e3 + " J"), this;
  };
  var Ir = 0;
  y3.__private__.setLineJoin = y3.setLineJoin = function(t3) {
    var e3 = y3.CapJoinStyles[t3];
    if (void 0 === e3) throw new Error("Line join style of '" + t3 + "' is not recognized. See or extend .CapJoinStyles property for valid styles");
    return Ir = e3, lt3(e3 + " j"), this;
  }, y3.__private__.setLineMiterLimit = y3.__private__.setMiterLimit = y3.setLineMiterLimit = y3.setMiterLimit = function(t3) {
    if (t3 = t3 || 0, isNaN(t3)) throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");
    return lt3(O3(U2(t3)) + " M"), this;
  }, y3.GState = j, y3.setGState = function(t3) {
    (t3 = "string" == typeof t3 ? Mt2[Et2[t3]] : Fr(null, t3)).equals(qt2) || (lt3("/" + t3.id + " gs"), qt2 = t3);
  };
  var Fr = /* @__PURE__ */ __name2(function(t3, e3) {
    if (!t3 || !Et2[t3]) {
      var r3 = false;
      for (var n3 in Mt2) if (Mt2.hasOwnProperty(n3) && Mt2[n3].equals(e3)) {
        r3 = true;
        break;
      }
      if (r3) e3 = Mt2[n3];
      else {
        var i4 = "GS" + (Object.keys(Mt2).length + 1).toString(10);
        Mt2[i4] = e3, e3.id = i4;
      }
      return t3 && (Et2[t3] = e3.id), Tt2.publish("addGState", e3), e3;
    }
  }, "Fr");
  y3.addGState = function(t3, e3) {
    return Fr(t3, e3), this;
  }, y3.saveGraphicsState = function() {
    return lt3("q"), jt2.push({ key: St2, size: gt3, color: xr }), this;
  }, y3.restoreGraphicsState = function() {
    lt3("Q");
    var t3 = jt2.pop();
    return St2 = t3.key, gt3 = t3.size, xr = t3.color, qt2 = null, this;
  }, y3.setCurrentTransformationMatrix = function(t3) {
    return lt3(t3.toString() + " cm"), this;
  }, y3.comment = function(t3) {
    return lt3("#" + t3), this;
  };
  var Cr = /* @__PURE__ */ __name2(function(t3, e3) {
    var r3 = t3 || 0;
    Object.defineProperty(this, "x", { enumerable: true, get: /* @__PURE__ */ __name2(function() {
      return r3;
    }, "get"), set: /* @__PURE__ */ __name2(function(t4) {
      isNaN(t4) || (r3 = parseFloat(t4));
    }, "set") });
    var n3 = e3 || 0;
    Object.defineProperty(this, "y", { enumerable: true, get: /* @__PURE__ */ __name2(function() {
      return n3;
    }, "get"), set: /* @__PURE__ */ __name2(function(t4) {
      isNaN(t4) || (n3 = parseFloat(t4));
    }, "set") });
    var i4 = "pt";
    return Object.defineProperty(this, "type", { enumerable: true, get: /* @__PURE__ */ __name2(function() {
      return i4;
    }, "get"), set: /* @__PURE__ */ __name2(function(t4) {
      i4 = t4.toString();
    }, "set") }), this;
  }, "Cr"), jr = /* @__PURE__ */ __name2(function(t3, e3, r3, n3) {
    Cr.call(this, t3, e3), this.type = "rect";
    var i4 = r3 || 0;
    Object.defineProperty(this, "w", { enumerable: true, get: /* @__PURE__ */ __name2(function() {
      return i4;
    }, "get"), set: /* @__PURE__ */ __name2(function(t4) {
      isNaN(t4) || (i4 = parseFloat(t4));
    }, "set") });
    var a3 = n3 || 0;
    return Object.defineProperty(this, "h", { enumerable: true, get: /* @__PURE__ */ __name2(function() {
      return a3;
    }, "get"), set: /* @__PURE__ */ __name2(function(t4) {
      isNaN(t4) || (a3 = parseFloat(t4));
    }, "set") }), this;
  }, "jr"), Or = /* @__PURE__ */ __name2(function() {
    this.page = Dt2, this.currentPage = $2, this.pages = ot2.slice(0), this.pagesContext = Rt2.slice(0), this.x = Pt2, this.y = kt2, this.matrix = It2, this.width = qr($2), this.height = Rr($2), this.outputDestination = ct2, this.id = "", this.objectNumber = -1;
  }, "Or");
  Or.prototype.restore = function() {
    Dt2 = this.page, $2 = this.currentPage, Rt2 = this.pagesContext, ot2 = this.pages, Pt2 = this.x, kt2 = this.y, It2 = this.matrix, Dr($2, this.width), Tr($2, this.height), ct2 = this.outputDestination;
  };
  var Br = /* @__PURE__ */ __name2(function(t3, e3, r3, n3, i4) {
    Wt2.push(new Or()), Dt2 = $2 = 0, ot2 = [], Pt2 = t3, kt2 = e3, It2 = i4, je([r3, n3]);
  }, "Br"), Mr = /* @__PURE__ */ __name2(function(t3) {
    if (Ht2[t3]) Wt2.pop().restore();
    else {
      var e3 = new Or(), r3 = "Xo" + (Object.keys(zt2).length + 1).toString(10);
      e3.id = r3, Ht2[t3] = r3, zt2[r3] = e3, Tt2.publish("addFormObject", e3), Wt2.pop().restore();
    }
  }, "Mr");
  for (var Er in y3.beginFormObject = function(t3, e3, r3, n3, i4) {
    return Br(t3, e3, r3, n3, i4), this;
  }, y3.endFormObject = function(t3) {
    return Mr(t3), this;
  }, y3.doFormObject = function(t3, e3) {
    var r3 = zt2[Ht2[t3]];
    return lt3("q"), lt3(e3.toString() + " cm"), lt3("/" + r3.id + " Do"), lt3("Q"), this;
  }, y3.getFormObject = function(t3) {
    var e3 = zt2[Ht2[t3]];
    return { x: e3.x, y: e3.y, width: e3.width, height: e3.height, matrix: e3.matrix };
  }, y3.save = function(t3, e3) {
    return t3 = t3 || "generated.pdf", (e3 = e3 || {}).returnPromise = e3.returnPromise || false, false === e3.returnPromise ? (l2(We(He()), t3), "function" == typeof l2.unload && n2.setTimeout && setTimeout(l2.unload, 911), this) : new Promise(function(e4, r3) {
      try {
        var i4 = l2(We(He()), t3);
        "function" == typeof l2.unload && n2.setTimeout && setTimeout(l2.unload, 911), e4(i4);
      } catch (t4) {
        r3(t4.message);
      }
    });
  }, E.API) E.API.hasOwnProperty(Er) && ("events" === Er && E.API.events.length ? function(t3, e3) {
    var r3, n3, i4;
    for (i4 = e3.length - 1; -1 !== i4; i4--) r3 = e3[i4][0], n3 = e3[i4][1], t3.subscribe.apply(t3, [r3].concat("function" == typeof n3 ? [n3] : n3));
  }(Tt2, E.API.events) : y3[Er] = E.API[Er]);
  var qr = y3.getPageWidth = function(t3) {
    return (Rt2[t3 = t3 || $2].mediaBox.topRightX - Rt2[t3].mediaBox.bottomLeftX) / _t2;
  }, Dr = y3.setPageWidth = function(t3, e3) {
    Rt2[t3].mediaBox.topRightX = e3 * _t2 + Rt2[t3].mediaBox.bottomLeftX;
  }, Rr = y3.getPageHeight = function(t3) {
    return (Rt2[t3 = t3 || $2].mediaBox.topRightY - Rt2[t3].mediaBox.bottomLeftY) / _t2;
  }, Tr = y3.setPageHeight = function(t3, e3) {
    Rt2[t3].mediaBox.topRightY = e3 * _t2 + Rt2[t3].mediaBox.bottomLeftY;
  };
  return y3.internal = { pdfEscape: Ce, getStyle: tr, getFont: hr, getFontSize: vt2, getCharSpace: Pr, getTextColor: Sr, getLineHeight: gr, getLineHeightFactor: vr, getLineWidth: dr, write: ft2, getHorizontalCoordinate: br, getVerticalCoordinate: yr, getCoordinateString: wr, getVerticalCoordinateString: Nr, collections: {}, newObject: Xt2, newAdditionalObject: $t2, newObjectDeferred: Kt2, newObjectDeferredBegin: Zt2, getFilters: ne3, putStream: ie2, events: Tt2, scaleFactor: _t2, pageSize: { getWidth: /* @__PURE__ */ __name2(function() {
    return qr($2);
  }, "getWidth"), setWidth: /* @__PURE__ */ __name2(function(t3) {
    Dr($2, t3);
  }, "setWidth"), getHeight: /* @__PURE__ */ __name2(function() {
    return Rr($2);
  }, "getHeight"), setHeight: /* @__PURE__ */ __name2(function(t3) {
    Tr($2, t3);
  }, "setHeight") }, encryptionOptions: m4, encryption: Ye, getEncryptor: Je, output: Ve, getNumberOfPages: Ee, pages: ot2, out: lt3, f2: R2, f3: T3, getPageInfo: Xe, getPageInfoByObjId: Ke, getCurrentPageInfo: Ze, getPDFVersion: N3, Point: Cr, Rectangle: jr, Matrix: Vt2, hasHotfix: Ge }, Object.defineProperty(y3.internal.pageSize, "width", { get: /* @__PURE__ */ __name2(function() {
    return qr($2);
  }, "get"), set: /* @__PURE__ */ __name2(function(t3) {
    Dr($2, t3);
  }, "set"), enumerable: true, configurable: true }), Object.defineProperty(y3.internal.pageSize, "height", { get: /* @__PURE__ */ __name2(function() {
    return Rr($2);
  }, "get"), set: /* @__PURE__ */ __name2(function(t3) {
    Tr($2, t3);
  }, "set"), enumerable: true, configurable: true }), ke.call(y3, pt2), St2 = "F1", Oe(s3, i33), Tt2.publish("initialized"), y3;
}
__name(E, "E");
function _t(t3) {
  return t3.reduce(function(t4, e2, r2) {
    return t4[e2] = r2, t4;
  }, {});
}
__name(_t, "_t");
function jt(t3) {
  var e2 = t3.family.replace(/"|'/g, "").toLowerCase(), r2 = function(t4) {
    return Pt[t4 = t4 || "normal"] ? t4 : "normal";
  }(t3.style), n3 = function(t4) {
    if (!t4) return 400;
    if ("number" == typeof t4) return t4 >= 100 && t4 <= 900 && t4 % 100 == 0 ? t4 : 400;
    if (/^\d00$/.test(t4)) return parseInt(t4);
    switch (t4) {
      case "bold":
        return 700;
      case "normal":
      default:
        return 400;
    }
  }(t3.weight), i33 = function(t4) {
    return "number" == typeof It[t4 = t4 || "normal"] ? t4 : "normal";
  }(t3.stretch);
  return { family: e2, style: r2, weight: n3, stretch: i33, src: t3.src || [], ref: t3.ref || { name: e2, style: [i33, r2, n3].join(" ") } };
}
__name(jt, "jt");
function Ot(t3, e2, r2, n3) {
  var i33;
  for (i33 = r2; i33 >= 0 && i33 < e2.length; i33 += n3) if (t3[e2[i33]]) return t3[e2[i33]];
  for (i33 = r2; i33 >= 0 && i33 < e2.length; i33 -= n3) if (t3[e2[i33]]) return t3[e2[i33]];
}
__name(Ot, "Ot");
function Et(t3) {
  return [t3.stretch, t3.style, t3.weight, t3.family].join(" ");
}
__name(Et, "Et");
function qt(t3, e2, r2) {
  for (var n3 = (r2 = r2 || {}).defaultFontFamily || "times", i33 = Object.assign({}, Bt, r2.genericFontFamilies || {}), a3 = null, o3 = null, s3 = 0; s3 < e2.length; ++s3) if (i33[(a3 = jt(e2[s3])).family] && (a3.family = i33[a3.family]), t3.hasOwnProperty(a3.family)) {
    o3 = t3[a3.family];
    break;
  }
  if (!(o3 = o3 || t3[n3])) throw new Error("Could not find a font-family for the rule '" + Et(a3) + "' and default family '" + n3 + "'.");
  if (o3 = function(t4, e3) {
    if (e3[t4]) return e3[t4];
    var r3 = It[t4], n4 = r3 <= It.normal ? -1 : 1, i4 = Ot(e3, kt, r3, n4);
    if (!i4) throw new Error("Could not find a matching font-stretch value for " + t4);
    return i4;
  }(a3.stretch, o3), o3 = function(t4, e3) {
    if (e3[t4]) return e3[t4];
    for (var r3 = Pt[t4], n4 = 0; n4 < r3.length; ++n4) if (e3[r3[n4]]) return e3[r3[n4]];
    throw new Error("Could not find a matching font-style for " + t4);
  }(a3.style, o3), !(o3 = function(t4, e3) {
    if (e3[t4]) return e3[t4];
    if (400 === t4 && e3[500]) return e3[500];
    if (500 === t4 && e3[400]) return e3[400];
    var r3 = Ct[t4], n4 = Ot(e3, Ft, r3, t4 < 400 ? -1 : 1);
    if (!n4) throw new Error("Could not find a matching font-weight for value " + t4);
    return n4;
  }(a3.weight, o3))) throw new Error("Failed to resolve a font for the rule '" + Et(a3) + "'.");
  return o3;
}
__name(qt, "qt");
function Dt(t3) {
  return t3.trimLeft();
}
__name(Dt, "Dt");
function Rt(t3, e2) {
  for (var r2 = 0; r2 < t3.length; ) {
    if (t3.charAt(r2) === e2) return [t3.substring(0, r2), t3.substring(r2 + 1)];
    r2 += 1;
  }
  return null;
}
__name(Rt, "Rt");
function Tt(t3) {
  var e2 = t3.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);
  return null === e2 ? null : [e2[0], t3.substring(e2[0].length)];
}
__name(Tt, "Tt");
function Zt(t3) {
  var e2 = 0;
  if (71 !== t3[e2++] || 73 !== t3[e2++] || 70 !== t3[e2++] || 56 !== t3[e2++] || 56 != (t3[e2++] + 1 & 253) || 97 !== t3[e2++]) throw new Error("Invalid GIF 87a/89a header.");
  var r2 = t3[e2++] | t3[e2++] << 8, n3 = t3[e2++] | t3[e2++] << 8, i33 = t3[e2++], a3 = i33 >> 7, o3 = 1 << (7 & i33) + 1;
  t3[e2++], t3[e2++];
  var s3 = null, c4 = null;
  a3 && (s3 = e2, c4 = o3, e2 += 3 * o3);
  var u3 = true, h3 = [], l3 = 0, f3 = null, d2 = 0, p3 = null;
  for (this.width = r2, this.height = n3; u3 && e2 < t3.length; ) switch (t3[e2++]) {
    case 33:
      switch (t3[e2++]) {
        case 255:
          if (11 !== t3[e2] || 78 == t3[e2 + 1] && 69 == t3[e2 + 2] && 84 == t3[e2 + 3] && 83 == t3[e2 + 4] && 67 == t3[e2 + 5] && 65 == t3[e2 + 6] && 80 == t3[e2 + 7] && 69 == t3[e2 + 8] && 50 == t3[e2 + 9] && 46 == t3[e2 + 10] && 48 == t3[e2 + 11] && 3 == t3[e2 + 12] && 1 == t3[e2 + 13] && 0 == t3[e2 + 16]) e2 += 14, p3 = t3[e2++] | t3[e2++] << 8, e2++;
          else for (e2 += 12; ; ) {
            if (!((P2 = t3[e2++]) >= 0)) throw Error("Invalid block size");
            if (0 === P2) break;
            e2 += P2;
          }
          break;
        case 249:
          if (4 !== t3[e2++] || 0 !== t3[e2 + 4]) throw new Error("Invalid graphics extension block.");
          var g2 = t3[e2++];
          l3 = t3[e2++] | t3[e2++] << 8, f3 = t3[e2++], 0 == (1 & g2) && (f3 = null), d2 = g2 >> 2 & 7, e2++;
          break;
        case 254:
          for (; ; ) {
            if (!((P2 = t3[e2++]) >= 0)) throw Error("Invalid block size");
            if (0 === P2) break;
            e2 += P2;
          }
          break;
        default:
          throw new Error("Unknown graphic control label: 0x" + t3[e2 - 1].toString(16));
      }
      break;
    case 44:
      var m4 = t3[e2++] | t3[e2++] << 8, v3 = t3[e2++] | t3[e2++] << 8, b2 = t3[e2++] | t3[e2++] << 8, y3 = t3[e2++] | t3[e2++] << 8, w2 = t3[e2++], N3 = w2 >> 6 & 1, L2 = 1 << (7 & w2) + 1, A2 = s3, x22 = c4, S2 = false;
      if (w2 >> 7) {
        S2 = true;
        A2 = e2, x22 = L2, e2 += 3 * L2;
      }
      var _3 = e2;
      for (e2++; ; ) {
        var P2;
        if (!((P2 = t3[e2++]) >= 0)) throw Error("Invalid block size");
        if (0 === P2) break;
        e2 += P2;
      }
      h3.push({ x: m4, y: v3, width: b2, height: y3, has_local_palette: S2, palette_offset: A2, palette_size: x22, data_offset: _3, data_length: e2 - _3, transparent_index: f3, interlaced: !!N3, delay: l3, disposal: d2 });
      break;
    case 59:
      u3 = false;
      break;
    default:
      throw new Error("Unknown gif block: 0x" + t3[e2 - 1].toString(16));
  }
  this.numFrames = function() {
    return h3.length;
  }, this.loopCount = function() {
    return p3;
  }, this.frameInfo = function(t4) {
    if (t4 < 0 || t4 >= h3.length) throw new Error("Frame index out of range.");
    return h3[t4];
  }, this.decodeAndBlitFrameBGRA = function(e3, n4) {
    var i4 = this.frameInfo(e3), a4 = i4.width * i4.height, o4 = new Uint8Array(a4);
    $t(t3, i4.data_offset, o4, a4);
    var s4 = i4.palette_offset, c5 = i4.transparent_index;
    null === c5 && (c5 = 256);
    var u4 = i4.width, h4 = r2 - u4, l4 = u4, f4 = 4 * (i4.y * r2 + i4.x), d3 = 4 * ((i4.y + i4.height) * r2 + i4.x), p4 = f4, g3 = 4 * h4;
    true === i4.interlaced && (g3 += 4 * r2 * 7);
    for (var m5 = 8, v4 = 0, b3 = o4.length; v4 < b3; ++v4) {
      var y4 = o4[v4];
      if (0 === l4 && (l4 = u4, (p4 += g3) >= d3 && (g3 = 4 * h4 + 4 * r2 * (m5 - 1), p4 = f4 + (u4 + h4) * (m5 << 1), m5 >>= 1)), y4 === c5) p4 += 4;
      else {
        var w3 = t3[s4 + 3 * y4], N4 = t3[s4 + 3 * y4 + 1], L3 = t3[s4 + 3 * y4 + 2];
        n4[p4++] = L3, n4[p4++] = N4, n4[p4++] = w3, n4[p4++] = 255;
      }
      --l4;
    }
  }, this.decodeAndBlitFrameRGBA = function(e3, n4) {
    var i4 = this.frameInfo(e3), a4 = i4.width * i4.height, o4 = new Uint8Array(a4);
    $t(t3, i4.data_offset, o4, a4);
    var s4 = i4.palette_offset, c5 = i4.transparent_index;
    null === c5 && (c5 = 256);
    var u4 = i4.width, h4 = r2 - u4, l4 = u4, f4 = 4 * (i4.y * r2 + i4.x), d3 = 4 * ((i4.y + i4.height) * r2 + i4.x), p4 = f4, g3 = 4 * h4;
    true === i4.interlaced && (g3 += 4 * r2 * 7);
    for (var m5 = 8, v4 = 0, b3 = o4.length; v4 < b3; ++v4) {
      var y4 = o4[v4];
      if (0 === l4 && (l4 = u4, (p4 += g3) >= d3 && (g3 = 4 * h4 + 4 * r2 * (m5 - 1), p4 = f4 + (u4 + h4) * (m5 << 1), m5 >>= 1)), y4 === c5) p4 += 4;
      else {
        var w3 = t3[s4 + 3 * y4], N4 = t3[s4 + 3 * y4 + 1], L3 = t3[s4 + 3 * y4 + 2];
        n4[p4++] = w3, n4[p4++] = N4, n4[p4++] = L3, n4[p4++] = 255;
      }
      --l4;
    }
  };
}
__name(Zt, "Zt");
function $t(t3, e2, r2, n3) {
  for (var i33 = t3[e2++], o3 = 1 << i33, s3 = o3 + 1, c4 = s3 + 1, u3 = i33 + 1, h3 = (1 << u3) - 1, l3 = 0, f3 = 0, d2 = 0, p3 = t3[e2++], g2 = new Int32Array(4096), m4 = null; ; ) {
    for (; l3 < 16 && 0 !== p3; ) f3 |= t3[e2++] << l3, l3 += 8, 1 === p3 ? p3 = t3[e2++] : --p3;
    if (l3 < u3) break;
    var v3 = f3 & h3;
    if (f3 >>= u3, l3 -= u3, v3 !== o3) {
      if (v3 === s3) break;
      for (var b2 = v3 < c4 ? v3 : m4, y3 = 0, w2 = b2; w2 > o3; ) w2 = g2[w2] >> 8, ++y3;
      var N3 = w2;
      if (d2 + y3 + (b2 !== v3 ? 1 : 0) > n3) return void a2.log("Warning, gif stream longer than expected.");
      r2[d2++] = N3;
      var L2 = d2 += y3;
      for (b2 !== v3 && (r2[d2++] = N3), w2 = b2; y3--; ) w2 = g2[w2], r2[--L2] = 255 & w2, w2 >>= 8;
      null !== m4 && c4 < 4096 && (g2[c4++] = m4 << 8 | N3, c4 >= h3 + 1 && u3 < 12 && (++u3, h3 = h3 << 1 | 1)), m4 = v3;
    } else c4 = s3 + 1, h3 = (1 << (u3 = i33 + 1)) - 1, m4 = null;
  }
  return d2 !== n3 && a2.log("Warning, gif stream shorter than expected."), r2;
}
__name($t, "$t");
function Qt(t3) {
  var e2, r2, n3, i33, a3, o3 = Math.floor, s3 = new Array(64), c4 = new Array(64), u3 = new Array(64), h3 = new Array(64), l3 = new Array(65535), f3 = new Array(65535), d2 = new Array(64), p3 = new Array(64), g2 = [], m4 = 0, v3 = 7, b2 = new Array(64), y3 = new Array(64), w2 = new Array(64), N3 = new Array(256), L2 = new Array(2048), A2 = [0, 1, 5, 6, 14, 15, 27, 28, 2, 4, 7, 13, 16, 26, 29, 42, 3, 8, 12, 17, 25, 30, 41, 43, 9, 11, 18, 24, 31, 40, 44, 53, 10, 19, 23, 32, 39, 45, 52, 54, 20, 22, 33, 38, 46, 51, 55, 60, 21, 34, 37, 47, 50, 56, 59, 61, 35, 36, 48, 49, 57, 58, 62, 63], x22 = [0, 0, 1, 5, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0], S2 = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11], _3 = [0, 0, 2, 1, 3, 3, 2, 4, 3, 5, 5, 4, 4, 0, 0, 1, 125], P2 = [1, 2, 3, 0, 4, 17, 5, 18, 33, 49, 65, 6, 19, 81, 97, 7, 34, 113, 20, 50, 129, 145, 161, 8, 35, 66, 177, 193, 21, 82, 209, 240, 36, 51, 98, 114, 130, 9, 10, 22, 23, 24, 25, 26, 37, 38, 39, 40, 41, 42, 52, 53, 54, 55, 56, 57, 58, 67, 68, 69, 70, 71, 72, 73, 74, 83, 84, 85, 86, 87, 88, 89, 90, 99, 100, 101, 102, 103, 104, 105, 106, 115, 116, 117, 118, 119, 120, 121, 122, 131, 132, 133, 134, 135, 136, 137, 138, 146, 147, 148, 149, 150, 151, 152, 153, 154, 162, 163, 164, 165, 166, 167, 168, 169, 170, 178, 179, 180, 181, 182, 183, 184, 185, 186, 194, 195, 196, 197, 198, 199, 200, 201, 202, 210, 211, 212, 213, 214, 215, 216, 217, 218, 225, 226, 227, 228, 229, 230, 231, 232, 233, 234, 241, 242, 243, 244, 245, 246, 247, 248, 249, 250], k2 = [0, 0, 3, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0], I2 = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11], F2 = [0, 0, 2, 1, 2, 4, 4, 3, 4, 7, 5, 4, 4, 0, 1, 2, 119], C2 = [0, 1, 2, 3, 17, 4, 5, 33, 49, 6, 18, 65, 81, 7, 97, 113, 19, 34, 50, 129, 8, 20, 66, 145, 161, 177, 193, 9, 35, 51, 82, 240, 21, 98, 114, 209, 10, 22, 36, 52, 225, 37, 241, 23, 24, 25, 26, 38, 39, 40, 41, 42, 53, 54, 55, 56, 57, 58, 67, 68, 69, 70, 71, 72, 73, 74, 83, 84, 85, 86, 87, 88, 89, 90, 99, 100, 101, 102, 103, 104, 105, 106, 115, 116, 117, 118, 119, 120, 121, 122, 130, 131, 132, 133, 134, 135, 136, 137, 138, 146, 147, 148, 149, 150, 151, 152, 153, 154, 162, 163, 164, 165, 166, 167, 168, 169, 170, 178, 179, 180, 181, 182, 183, 184, 185, 186, 194, 195, 196, 197, 198, 199, 200, 201, 202, 210, 211, 212, 213, 214, 215, 216, 217, 218, 226, 227, 228, 229, 230, 231, 232, 233, 234, 242, 243, 244, 245, 246, 247, 248, 249, 250];
  function j2(t4, e3) {
    for (var r3 = 0, n4 = 0, i4 = new Array(), a4 = 1; a4 <= 16; a4++) {
      for (var o4 = 1; o4 <= t4[a4]; o4++) i4[e3[n4]] = [], i4[e3[n4]][0] = r3, i4[e3[n4]][1] = a4, n4++, r3++;
      r3 *= 2;
    }
    return i4;
  }
  __name(j2, "j2");
  __name2(j2, "j");
  function O3(t4) {
    for (var e3 = t4[0], r3 = t4[1] - 1; r3 >= 0; ) e3 & 1 << r3 && (m4 |= 1 << v3), r3--, --v3 < 0 && (255 == m4 ? (B2(255), B2(0)) : B2(m4), v3 = 7, m4 = 0);
  }
  __name(O3, "O3");
  __name2(O3, "O");
  function B2(t4) {
    g2.push(t4);
  }
  __name(B2, "B2");
  __name2(B2, "B");
  function M2(t4) {
    B2(t4 >> 8 & 255), B2(255 & t4);
  }
  __name(M2, "M2");
  __name2(M2, "M");
  function E2(t4, e3, r3, n4, i4) {
    for (var a4, o4 = i4[0], s4 = i4[240], c5 = function(t5, e4) {
      var r4, n5, i5, a5, o5, s5, c6, u5, h5, l4, f4 = 0;
      for (h5 = 0; h5 < 8; ++h5) {
        r4 = t5[f4], n5 = t5[f4 + 1], i5 = t5[f4 + 2], a5 = t5[f4 + 3], o5 = t5[f4 + 4], s5 = t5[f4 + 5], c6 = t5[f4 + 6];
        var p4 = r4 + (u5 = t5[f4 + 7]), g4 = r4 - u5, m6 = n5 + c6, v5 = n5 - c6, b4 = i5 + s5, y5 = i5 - s5, w4 = a5 + o5, N4 = a5 - o5, L3 = p4 + w4, A3 = p4 - w4, x3 = m6 + b4, S3 = m6 - b4;
        t5[f4] = L3 + x3, t5[f4 + 4] = L3 - x3;
        var _4 = 0.707106781 * (S3 + A3);
        t5[f4 + 2] = A3 + _4, t5[f4 + 6] = A3 - _4;
        var P3 = 0.382683433 * ((L3 = N4 + y5) - (S3 = v5 + g4)), k3 = 0.5411961 * L3 + P3, I3 = 1.306562965 * S3 + P3, F3 = 0.707106781 * (x3 = y5 + v5), C3 = g4 + F3, j3 = g4 - F3;
        t5[f4 + 5] = j3 + k3, t5[f4 + 3] = j3 - k3, t5[f4 + 1] = C3 + I3, t5[f4 + 7] = C3 - I3, f4 += 8;
      }
      for (f4 = 0, h5 = 0; h5 < 8; ++h5) {
        r4 = t5[f4], n5 = t5[f4 + 8], i5 = t5[f4 + 16], a5 = t5[f4 + 24], o5 = t5[f4 + 32], s5 = t5[f4 + 40], c6 = t5[f4 + 48];
        var O4 = r4 + (u5 = t5[f4 + 56]), B3 = r4 - u5, M3 = n5 + c6, E3 = n5 - c6, q3 = i5 + s5, D2 = i5 - s5, R2 = a5 + o5, T3 = a5 - o5, U2 = O4 + R2, z3 = O4 - R2, H2 = M3 + q3, W2 = M3 - q3;
        t5[f4] = U2 + H2, t5[f4 + 32] = U2 - H2;
        var V3 = 0.707106781 * (W2 + z3);
        t5[f4 + 16] = z3 + V3, t5[f4 + 48] = z3 - V3;
        var G2 = 0.382683433 * ((U2 = T3 + D2) - (W2 = E3 + B3)), Y2 = 0.5411961 * U2 + G2, J2 = 1.306562965 * W2 + G2, X2 = 0.707106781 * (H2 = D2 + E3), K2 = B3 + X2, Z2 = B3 - X2;
        t5[f4 + 40] = Z2 + Y2, t5[f4 + 24] = Z2 - Y2, t5[f4 + 8] = K2 + J2, t5[f4 + 56] = K2 - J2, f4++;
      }
      for (h5 = 0; h5 < 64; ++h5) l4 = t5[h5] * e4[h5], d2[h5] = l4 > 0 ? l4 + 0.5 | 0 : l4 - 0.5 | 0;
      return d2;
    }(t4, e3), u4 = 0; u4 < 64; ++u4) p3[A2[u4]] = c5[u4];
    var h4 = p3[0] - r3;
    r3 = p3[0], 0 == h4 ? O3(n4[0]) : (O3(n4[f3[a4 = 32767 + h4]]), O3(l3[a4]));
    for (var g3 = 63; g3 > 0 && 0 == p3[g3]; ) g3--;
    if (0 == g3) return O3(o4), r3;
    for (var m5, v4 = 1; v4 <= g3; ) {
      for (var b3 = v4; 0 == p3[v4] && v4 <= g3; ) ++v4;
      var y4 = v4 - b3;
      if (y4 >= 16) {
        m5 = y4 >> 4;
        for (var w3 = 1; w3 <= m5; ++w3) O3(s4);
        y4 &= 15;
      }
      a4 = 32767 + p3[v4], O3(i4[(y4 << 4) + f3[a4]]), O3(l3[a4]), v4++;
    }
    return 63 != g3 && O3(o4), r3;
  }
  __name(E2, "E2");
  __name2(E2, "E");
  function q2(t4) {
    (t4 = Math.min(Math.max(t4, 1), 100), a3 != t4) && (!function(t5) {
      for (var e3 = [16, 11, 10, 16, 24, 40, 51, 61, 12, 12, 14, 19, 26, 58, 60, 55, 14, 13, 16, 24, 40, 57, 69, 56, 14, 17, 22, 29, 51, 87, 80, 62, 18, 22, 37, 56, 68, 109, 103, 77, 24, 35, 55, 64, 81, 104, 113, 92, 49, 64, 78, 87, 103, 121, 120, 101, 72, 92, 95, 98, 112, 100, 103, 99], r3 = 0; r3 < 64; r3++) {
        var n4 = o3((e3[r3] * t5 + 50) / 100);
        n4 = Math.min(Math.max(n4, 1), 255), s3[A2[r3]] = n4;
      }
      for (var i4 = [17, 18, 24, 47, 99, 99, 99, 99, 18, 21, 26, 66, 99, 99, 99, 99, 24, 26, 56, 99, 99, 99, 99, 99, 47, 66, 99, 99, 99, 99, 99, 99, 99, 99, 99, 99, 99, 99, 99, 99, 99, 99, 99, 99, 99, 99, 99, 99, 99, 99, 99, 99, 99, 99, 99, 99, 99, 99, 99, 99, 99, 99, 99, 99], a4 = 0; a4 < 64; a4++) {
        var l4 = o3((i4[a4] * t5 + 50) / 100);
        l4 = Math.min(Math.max(l4, 1), 255), c4[A2[a4]] = l4;
      }
      for (var f4 = [1, 1.387039845, 1.306562965, 1.175875602, 1, 0.785694958, 0.5411961, 0.275899379], d3 = 0, p4 = 0; p4 < 8; p4++) for (var g3 = 0; g3 < 8; g3++) u3[d3] = 1 / (s3[A2[d3]] * f4[p4] * f4[g3] * 8), h3[d3] = 1 / (c4[A2[d3]] * f4[p4] * f4[g3] * 8), d3++;
    }(t4 < 50 ? Math.floor(5e3 / t4) : Math.floor(200 - 2 * t4)), a3 = t4);
  }
  __name(q2, "q2");
  __name2(q2, "q");
  this.encode = function(t4, a4) {
    a4 && q2(a4), g2 = new Array(), m4 = 0, v3 = 7, M2(65496), M2(65504), M2(16), B2(74), B2(70), B2(73), B2(70), B2(0), B2(1), B2(1), B2(0), M2(1), M2(1), B2(0), B2(0), function() {
      M2(65499), M2(132), B2(0);
      for (var t5 = 0; t5 < 64; t5++) B2(s3[t5]);
      B2(1);
      for (var e3 = 0; e3 < 64; e3++) B2(c4[e3]);
    }(), function(t5, e3) {
      M2(65472), M2(17), B2(8), M2(e3), M2(t5), B2(3), B2(1), B2(17), B2(0), B2(2), B2(17), B2(1), B2(3), B2(17), B2(1);
    }(t4.width, t4.height), function() {
      M2(65476), M2(418), B2(0);
      for (var t5 = 0; t5 < 16; t5++) B2(x22[t5 + 1]);
      for (var e3 = 0; e3 <= 11; e3++) B2(S2[e3]);
      B2(16);
      for (var r3 = 0; r3 < 16; r3++) B2(_3[r3 + 1]);
      for (var n4 = 0; n4 <= 161; n4++) B2(P2[n4]);
      B2(1);
      for (var i4 = 0; i4 < 16; i4++) B2(k2[i4 + 1]);
      for (var a5 = 0; a5 <= 11; a5++) B2(I2[a5]);
      B2(17);
      for (var o5 = 0; o5 < 16; o5++) B2(F2[o5 + 1]);
      for (var s4 = 0; s4 <= 161; s4++) B2(C2[s4]);
    }(), M2(65498), M2(12), B2(3), B2(1), B2(0), B2(2), B2(17), B2(3), B2(17), B2(0), B2(63), B2(0);
    var o4 = 0, l4 = 0, f4 = 0;
    m4 = 0, v3 = 7, this.encode.displayName = "_encode_";
    for (var d3, p4, N4, A3, j3, D2, R2, T3, U2, z3 = t4.data, H2 = t4.width, W2 = t4.height, V3 = 4 * H2, G2 = 0; G2 < W2; ) {
      for (d3 = 0; d3 < V3; ) {
        for (j3 = V3 * G2 + d3, R2 = -1, T3 = 0, U2 = 0; U2 < 64; U2++) D2 = j3 + (T3 = U2 >> 3) * V3 + (R2 = 4 * (7 & U2)), G2 + T3 >= W2 && (D2 -= V3 * (G2 + 1 + T3 - W2)), d3 + R2 >= V3 && (D2 -= d3 + R2 - V3 + 4), p4 = z3[D2++], N4 = z3[D2++], A3 = z3[D2++], b2[U2] = (L2[p4] + L2[N4 + 256 >> 0] + L2[A3 + 512 >> 0] >> 16) - 128, y3[U2] = (L2[p4 + 768 >> 0] + L2[N4 + 1024 >> 0] + L2[A3 + 1280 >> 0] >> 16) - 128, w2[U2] = (L2[p4 + 1280 >> 0] + L2[N4 + 1536 >> 0] + L2[A3 + 1792 >> 0] >> 16) - 128;
        o4 = E2(b2, u3, o4, e2, n3), l4 = E2(y3, h3, l4, r2, i33), f4 = E2(w2, h3, f4, r2, i33), d3 += 32;
      }
      G2 += 8;
    }
    if (v3 >= 0) {
      var Y2 = [];
      Y2[1] = v3 + 1, Y2[0] = (1 << v3 + 1) - 1, O3(Y2);
    }
    return M2(65497), new Uint8Array(g2);
  }, t3 = t3 || 50, function() {
    for (var t4 = String.fromCharCode, e3 = 0; e3 < 256; e3++) N3[e3] = t4(e3);
  }(), e2 = j2(x22, S2), r2 = j2(k2, I2), n3 = j2(_3, P2), i33 = j2(F2, C2), function() {
    for (var t4 = 1, e3 = 2, r3 = 1; r3 <= 15; r3++) {
      for (var n4 = t4; n4 < e3; n4++) f3[32767 + n4] = r3, l3[32767 + n4] = [], l3[32767 + n4][1] = r3, l3[32767 + n4][0] = n4;
      for (var i4 = -(e3 - 1); i4 <= -t4; i4++) f3[32767 + i4] = r3, l3[32767 + i4] = [], l3[32767 + i4][1] = r3, l3[32767 + i4][0] = e3 - 1 + i4;
      t4 <<= 1, e3 <<= 1;
    }
  }(), function() {
    for (var t4 = 0; t4 < 256; t4++) L2[t4] = 19595 * t4, L2[t4 + 256 >> 0] = 38470 * t4, L2[t4 + 512 >> 0] = 7471 * t4 + 32768, L2[t4 + 768 >> 0] = -11059 * t4, L2[t4 + 1024 >> 0] = -21709 * t4, L2[t4 + 1280 >> 0] = 32768 * t4 + 8421375, L2[t4 + 1536 >> 0] = -27439 * t4, L2[t4 + 1792 >> 0] = -5329 * t4;
  }(), q2(t3);
}
__name(Qt, "Qt");
function te(t3, e2) {
  if (this.pos = 0, this.buffer = t3, this.datav = new DataView(t3.buffer), this.is_with_alpha = !!e2, this.bottom_up = true, this.flag = String.fromCharCode(this.buffer[0]) + String.fromCharCode(this.buffer[1]), this.pos += 2, -1 === ["BM", "BA", "CI", "CP", "IC", "PT"].indexOf(this.flag)) throw new Error("Invalid BMP File");
  this.parseHeader(), this.parseBGR();
}
__name(te, "te");
function ee(t3) {
  function e2(t4) {
    if (!t4) throw Error("assert :P");
  }
  __name(e2, "e2");
  __name2(e2, "e");
  function r2(t4, e3, r3) {
    for (var n4 = 0; 4 > n4; n4++) if (t4[e3 + n4] != r3.charCodeAt(n4)) return true;
    return false;
  }
  __name(r2, "r2");
  __name2(r2, "r");
  function n3(t4, e3, r3, n4, i4) {
    for (var a4 = 0; a4 < i4; a4++) t4[e3 + a4] = r3[n4 + a4];
  }
  __name(n3, "n3");
  __name2(n3, "n");
  function i33(t4, e3, r3, n4) {
    for (var i4 = 0; i4 < n4; i4++) t4[e3 + i4] = r3;
  }
  __name(i33, "i3");
  __name2(i33, "i");
  function a3(t4) {
    return new Int32Array(t4);
  }
  __name(a3, "a3");
  __name2(a3, "a");
  function o3(t4, e3) {
    for (var r3 = [], n4 = 0; n4 < t4; n4++) r3.push(new e3());
    return r3;
  }
  __name(o3, "o3");
  __name2(o3, "o");
  function s3(t4, e3) {
    var r3 = [];
    return (/* @__PURE__ */ __name2(/* @__PURE__ */ __name(function t5(r4, n4, i4) {
      for (var a4 = i4[n4], o4 = 0; o4 < a4 && (r4.push(i4.length > n4 + 1 ? [] : new e3()), !(i4.length < n4 + 1)); o4++) t5(r4[o4], n4 + 1, i4);
    }, "t5"), "t"))(r3, 0, t4), r3;
  }
  __name(s3, "s3");
  __name2(s3, "s");
  var c4 = /* @__PURE__ */ __name2(function() {
    var t4 = this;
    function c5(t5, e3) {
      for (var r3 = 1 << e3 - 1 >>> 0; t5 & r3; ) r3 >>>= 1;
      return r3 ? (t5 & r3 - 1) + r3 : t5;
    }
    __name(c5, "c5");
    __name2(c5, "c");
    function u4(t5, r3, n4, i4, a4) {
      e2(!(i4 % n4));
      do {
        t5[r3 + (i4 -= n4)] = a4;
      } while (0 < i4);
    }
    __name(u4, "u4");
    __name2(u4, "u");
    function h4(t5, r3, n4, i4, o4) {
      if (e2(2328 >= o4), 512 >= o4) var s4 = a3(512);
      else if (null == (s4 = a3(o4))) return 0;
      return function(t6, r4, n5, i5, o5, s5) {
        var h5, f5, d4 = r4, p5 = 1 << n5, g4 = a3(16), m6 = a3(16);
        for (e2(0 != o5), e2(null != i5), e2(null != t6), e2(0 < n5), f5 = 0; f5 < o5; ++f5) {
          if (15 < i5[f5]) return 0;
          ++g4[i5[f5]];
        }
        if (g4[0] == o5) return 0;
        for (m6[1] = 0, h5 = 1; 15 > h5; ++h5) {
          if (g4[h5] > 1 << h5) return 0;
          m6[h5 + 1] = m6[h5] + g4[h5];
        }
        for (f5 = 0; f5 < o5; ++f5) h5 = i5[f5], 0 < i5[f5] && (s5[m6[h5]++] = f5);
        if (1 == m6[15]) return (i5 = new l4()).g = 0, i5.value = s5[0], u4(t6, d4, 1, p5, i5), p5;
        var v5, b4 = -1, y5 = p5 - 1, w4 = 0, N5 = 1, L4 = 1, A4 = 1 << n5;
        for (f5 = 0, h5 = 1, o5 = 2; h5 <= n5; ++h5, o5 <<= 1) {
          if (N5 += L4 <<= 1, 0 > (L4 -= g4[h5])) return 0;
          for (; 0 < g4[h5]; --g4[h5]) (i5 = new l4()).g = h5, i5.value = s5[f5++], u4(t6, d4 + w4, o5, A4, i5), w4 = c5(w4, h5);
        }
        for (h5 = n5 + 1, o5 = 2; 15 >= h5; ++h5, o5 <<= 1) {
          if (N5 += L4 <<= 1, 0 > (L4 -= g4[h5])) return 0;
          for (; 0 < g4[h5]; --g4[h5]) {
            if (i5 = new l4(), (w4 & y5) != b4) {
              for (d4 += A4, v5 = 1 << (b4 = h5) - n5; 15 > b4 && !(0 >= (v5 -= g4[b4])); ) ++b4, v5 <<= 1;
              p5 += A4 = 1 << (v5 = b4 - n5), t6[r4 + (b4 = w4 & y5)].g = v5 + n5, t6[r4 + b4].value = d4 - r4 - b4;
            }
            i5.g = h5 - n5, i5.value = s5[f5++], u4(t6, d4 + (w4 >> n5), o5, A4, i5), w4 = c5(w4, h5);
          }
        }
        return N5 != 2 * m6[15] - 1 ? 0 : p5;
      }(t5, r3, n4, i4, o4, s4);
    }
    __name(h4, "h4");
    __name2(h4, "h");
    function l4() {
      this.value = this.g = 0;
    }
    __name(l4, "l4");
    __name2(l4, "l");
    function f4() {
      this.value = this.g = 0;
    }
    __name(f4, "f4");
    __name2(f4, "f");
    function d3() {
      this.G = o3(5, l4), this.H = a3(5), this.jc = this.Qb = this.qb = this.nd = 0, this.pd = o3(Dr, f4);
    }
    __name(d3, "d3");
    __name2(d3, "d");
    function p4(t5, r3, n4, i4) {
      e2(null != t5), e2(null != r3), e2(2147483648 > i4), t5.Ca = 254, t5.I = 0, t5.b = -8, t5.Ka = 0, t5.oa = r3, t5.pa = n4, t5.Jd = r3, t5.Yc = n4 + i4, t5.Zc = 4 <= i4 ? n4 + i4 - 4 + 1 : n4, _3(t5);
    }
    __name(p4, "p4");
    __name2(p4, "p");
    function g3(t5, e3) {
      for (var r3 = 0; 0 < e3--; ) r3 |= k2(t5, 128) << e3;
      return r3;
    }
    __name(g3, "g3");
    __name2(g3, "g");
    function m5(t5, e3) {
      var r3 = g3(t5, e3);
      return P2(t5) ? -r3 : r3;
    }
    __name(m5, "m5");
    __name2(m5, "m");
    function v4(t5, r3, n4, i4) {
      var a4, o4 = 0;
      for (e2(null != t5), e2(null != r3), e2(4294967288 > i4), t5.Sb = i4, t5.Ra = 0, t5.u = 0, t5.h = 0, 4 < i4 && (i4 = 4), a4 = 0; a4 < i4; ++a4) o4 += r3[n4 + a4] << 8 * a4;
      t5.Ra = o4, t5.bb = i4, t5.oa = r3, t5.pa = n4;
    }
    __name(v4, "v4");
    __name2(v4, "v");
    function b3(t5) {
      for (; 8 <= t5.u && t5.bb < t5.Sb; ) t5.Ra >>>= 8, t5.Ra += t5.oa[t5.pa + t5.bb] << Ur - 8 >>> 0, ++t5.bb, t5.u -= 8;
      A3(t5) && (t5.h = 1, t5.u = 0);
    }
    __name(b3, "b3");
    __name2(b3, "b");
    function y4(t5, r3) {
      if (e2(0 <= r3), !t5.h && r3 <= Tr) {
        var n4 = L3(t5) & Rr[r3];
        return t5.u += r3, b3(t5), n4;
      }
      return t5.h = 1, t5.u = 0;
    }
    __name(y4, "y4");
    __name2(y4, "y");
    function w3() {
      this.b = this.Ca = this.I = 0, this.oa = [], this.pa = 0, this.Jd = [], this.Yc = 0, this.Zc = [], this.Ka = 0;
    }
    __name(w3, "w3");
    __name2(w3, "w");
    function N4() {
      this.Ra = 0, this.oa = [], this.h = this.u = this.bb = this.Sb = this.pa = 0;
    }
    __name(N4, "N4");
    __name2(N4, "N");
    function L3(t5) {
      return t5.Ra >>> (t5.u & Ur - 1) >>> 0;
    }
    __name(L3, "L3");
    __name2(L3, "L");
    function A3(t5) {
      return e2(t5.bb <= t5.Sb), t5.h || t5.bb == t5.Sb && t5.u > Ur;
    }
    __name(A3, "A3");
    __name2(A3, "A");
    function x22(t5, e3) {
      t5.u = e3, t5.h = A3(t5);
    }
    __name(x22, "x2");
    __name2(x22, "x");
    function S2(t5) {
      t5.u >= zr && (e2(t5.u >= zr), b3(t5));
    }
    __name(S2, "S2");
    __name2(S2, "S");
    function _3(t5) {
      e2(null != t5 && null != t5.oa), t5.pa < t5.Zc ? (t5.I = (t5.oa[t5.pa++] | t5.I << 8) >>> 0, t5.b += 8) : (e2(null != t5 && null != t5.oa), t5.pa < t5.Yc ? (t5.b += 8, t5.I = t5.oa[t5.pa++] | t5.I << 8) : t5.Ka ? t5.b = 0 : (t5.I <<= 8, t5.b += 8, t5.Ka = 1));
    }
    __name(_3, "_3");
    __name2(_3, "_");
    function P2(t5) {
      return g3(t5, 1);
    }
    __name(P2, "P2");
    __name2(P2, "P");
    function k2(t5, e3) {
      var r3 = t5.Ca;
      0 > t5.b && _3(t5);
      var n4 = t5.b, i4 = r3 * e3 >>> 8, a4 = (t5.I >>> n4 > i4) + 0;
      for (a4 ? (r3 -= i4, t5.I -= i4 + 1 << n4 >>> 0) : r3 = i4 + 1, n4 = r3, i4 = 0; 256 <= n4; ) i4 += 8, n4 >>= 8;
      return n4 = 7 ^ i4 + Hr[n4], t5.b -= n4, t5.Ca = (r3 << n4) - 1, a4;
    }
    __name(k2, "k2");
    __name2(k2, "k");
    function I2(t5, e3, r3) {
      t5[e3 + 0] = r3 >> 24 & 255, t5[e3 + 1] = r3 >> 16 & 255, t5[e3 + 2] = r3 >> 8 & 255, t5[e3 + 3] = r3 >> 0 & 255;
    }
    __name(I2, "I2");
    __name2(I2, "I");
    function F2(t5, e3) {
      return t5[e3 + 0] << 0 | t5[e3 + 1] << 8;
    }
    __name(F2, "F2");
    __name2(F2, "F");
    function C2(t5, e3) {
      return F2(t5, e3) | t5[e3 + 2] << 16;
    }
    __name(C2, "C2");
    __name2(C2, "C");
    function j2(t5, e3) {
      return F2(t5, e3) | F2(t5, e3 + 2) << 16;
    }
    __name(j2, "j2");
    __name2(j2, "j");
    function O3(t5, r3) {
      var n4 = 1 << r3;
      return e2(null != t5), e2(0 < r3), t5.X = a3(n4), null == t5.X ? 0 : (t5.Mb = 32 - r3, t5.Xa = r3, 1);
    }
    __name(O3, "O3");
    __name2(O3, "O");
    function B2(t5, r3) {
      e2(null != t5), e2(null != r3), e2(t5.Xa == r3.Xa), n3(r3.X, 0, t5.X, 0, 1 << r3.Xa);
    }
    __name(B2, "B2");
    __name2(B2, "B");
    function M2() {
      this.X = [], this.Xa = this.Mb = 0;
    }
    __name(M2, "M2");
    __name2(M2, "M");
    function E2(t5, r3, n4, i4) {
      e2(null != n4), e2(null != i4);
      var a4 = n4[0], o4 = i4[0];
      return 0 == a4 && (a4 = (t5 * o4 + r3 / 2) / r3), 0 == o4 && (o4 = (r3 * a4 + t5 / 2) / t5), 0 >= a4 || 0 >= o4 ? 0 : (n4[0] = a4, i4[0] = o4, 1);
    }
    __name(E2, "E2");
    __name2(E2, "E");
    function q2(t5, e3) {
      return t5 + (1 << e3) - 1 >>> e3;
    }
    __name(q2, "q2");
    __name2(q2, "q");
    function D2(t5, e3) {
      return ((4278255360 & t5) + (4278255360 & e3) >>> 0 & 4278255360) + ((16711935 & t5) + (16711935 & e3) >>> 0 & 16711935) >>> 0;
    }
    __name(D2, "D2");
    __name2(D2, "D");
    function R2(e3, r3) {
      t4[r3] = function(r4, n4, i4, a4, o4, s4, c6) {
        var u5;
        for (u5 = 0; u5 < o4; ++u5) {
          var h5 = t4[e3](s4[c6 + u5 - 1], i4, a4 + u5);
          s4[c6 + u5] = D2(r4[n4 + u5], h5);
        }
      };
    }
    __name(R2, "R2");
    __name2(R2, "R");
    function T3() {
      this.ud = this.hd = this.jd = 0;
    }
    __name(T3, "T3");
    __name2(T3, "T");
    function U2(t5, e3) {
      return ((4278124286 & (t5 ^ e3)) >>> 1) + (t5 & e3) >>> 0;
    }
    __name(U2, "U2");
    __name2(U2, "U");
    function z3(t5) {
      return 0 <= t5 && 256 > t5 ? t5 : 0 > t5 ? 0 : 255 < t5 ? 255 : void 0;
    }
    __name(z3, "z3");
    __name2(z3, "z");
    function H2(t5, e3) {
      return z3(t5 + (t5 - e3 + 0.5 >> 1));
    }
    __name(H2, "H2");
    __name2(H2, "H");
    function W2(t5, e3, r3) {
      return Math.abs(e3 - r3) - Math.abs(t5 - r3);
    }
    __name(W2, "W2");
    __name2(W2, "W");
    function V3(t5, e3, r3, n4, i4, a4, o4) {
      for (n4 = a4[o4 - 1], r3 = 0; r3 < i4; ++r3) a4[o4 + r3] = n4 = D2(t5[e3 + r3], n4);
    }
    __name(V3, "V3");
    __name2(V3, "V");
    function G2(t5, e3, r3, n4, i4) {
      var a4;
      for (a4 = 0; a4 < r3; ++a4) {
        var o4 = t5[e3 + a4], s4 = o4 >> 8 & 255, c6 = 16711935 & (c6 = (c6 = 16711935 & o4) + ((s4 << 16) + s4));
        n4[i4 + a4] = (4278255360 & o4) + c6 >>> 0;
      }
    }
    __name(G2, "G2");
    __name2(G2, "G");
    function Y2(t5, e3) {
      e3.jd = t5 >> 0 & 255, e3.hd = t5 >> 8 & 255, e3.ud = t5 >> 16 & 255;
    }
    __name(Y2, "Y2");
    __name2(Y2, "Y");
    function J2(t5, e3, r3, n4, i4, a4) {
      var o4;
      for (o4 = 0; o4 < n4; ++o4) {
        var s4 = e3[r3 + o4], c6 = s4 >>> 8, u5 = s4, h5 = 255 & (h5 = (h5 = s4 >>> 16) + ((t5.jd << 24 >> 24) * (c6 << 24 >> 24) >>> 5));
        u5 = 255 & (u5 = (u5 = u5 + ((t5.hd << 24 >> 24) * (c6 << 24 >> 24) >>> 5)) + ((t5.ud << 24 >> 24) * (h5 << 24 >> 24) >>> 5));
        i4[a4 + o4] = (4278255360 & s4) + (h5 << 16) + u5;
      }
    }
    __name(J2, "J2");
    __name2(J2, "J");
    function X2(e3, r3, n4, i4, a4) {
      t4[r3] = function(t5, e4, r4, n5, o4, s4, c6, u5, h5) {
        for (n5 = c6; n5 < u5; ++n5) for (c6 = 0; c6 < h5; ++c6) o4[s4++] = a4(r4[i4(t5[e4++])]);
      }, t4[e3] = function(e4, r4, o4, s4, c6, u5, h5) {
        var l5 = 8 >> e4.b, f5 = e4.Ea, d4 = e4.K[0], p5 = e4.w;
        if (8 > l5) for (e4 = (1 << e4.b) - 1, p5 = (1 << l5) - 1; r4 < o4; ++r4) {
          var g4, m6 = 0;
          for (g4 = 0; g4 < f5; ++g4) g4 & e4 || (m6 = i4(s4[c6++])), u5[h5++] = a4(d4[m6 & p5]), m6 >>= l5;
        }
        else t4["VP8LMapColor" + n4](s4, c6, d4, p5, u5, h5, r4, o4, f5);
      };
    }
    __name(X2, "X2");
    __name2(X2, "X");
    function K2(t5, e3, r3, n4, i4) {
      for (r3 = e3 + r3; e3 < r3; ) {
        var a4 = t5[e3++];
        n4[i4++] = a4 >> 16 & 255, n4[i4++] = a4 >> 8 & 255, n4[i4++] = a4 >> 0 & 255;
      }
    }
    __name(K2, "K2");
    __name2(K2, "K");
    function Z2(t5, e3, r3, n4, i4) {
      for (r3 = e3 + r3; e3 < r3; ) {
        var a4 = t5[e3++];
        n4[i4++] = a4 >> 16 & 255, n4[i4++] = a4 >> 8 & 255, n4[i4++] = a4 >> 0 & 255, n4[i4++] = a4 >> 24 & 255;
      }
    }
    __name(Z2, "Z2");
    __name2(Z2, "Z");
    function $2(t5, e3, r3, n4, i4) {
      for (r3 = e3 + r3; e3 < r3; ) {
        var a4 = (o4 = t5[e3++]) >> 16 & 240 | o4 >> 12 & 15, o4 = o4 >> 0 & 240 | o4 >> 28 & 15;
        n4[i4++] = a4, n4[i4++] = o4;
      }
    }
    __name($2, "$2");
    __name2($2, "$");
    function Q2(t5, e3, r3, n4, i4) {
      for (r3 = e3 + r3; e3 < r3; ) {
        var a4 = (o4 = t5[e3++]) >> 16 & 248 | o4 >> 13 & 7, o4 = o4 >> 5 & 224 | o4 >> 3 & 31;
        n4[i4++] = a4, n4[i4++] = o4;
      }
    }
    __name(Q2, "Q2");
    __name2(Q2, "Q");
    function tt2(t5, e3, r3, n4, i4) {
      for (r3 = e3 + r3; e3 < r3; ) {
        var a4 = t5[e3++];
        n4[i4++] = a4 >> 0 & 255, n4[i4++] = a4 >> 8 & 255, n4[i4++] = a4 >> 16 & 255;
      }
    }
    __name(tt2, "tt2");
    __name2(tt2, "tt");
    function et3(t5, e3, r3, i4, a4, o4) {
      if (0 == o4) for (r3 = e3 + r3; e3 < r3; ) I2(i4, ((o4 = t5[e3++])[0] >> 24 | o4[1] >> 8 & 65280 | o4[2] << 8 & 16711680 | o4[3] << 24) >>> 0), a4 += 32;
      else n3(i4, a4, t5, e3, r3);
    }
    __name(et3, "et3");
    __name2(et3, "et");
    function rt2(e3, r3) {
      t4[r3][0] = t4[e3 + "0"], t4[r3][1] = t4[e3 + "1"], t4[r3][2] = t4[e3 + "2"], t4[r3][3] = t4[e3 + "3"], t4[r3][4] = t4[e3 + "4"], t4[r3][5] = t4[e3 + "5"], t4[r3][6] = t4[e3 + "6"], t4[r3][7] = t4[e3 + "7"], t4[r3][8] = t4[e3 + "8"], t4[r3][9] = t4[e3 + "9"], t4[r3][10] = t4[e3 + "10"], t4[r3][11] = t4[e3 + "11"], t4[r3][12] = t4[e3 + "12"], t4[r3][13] = t4[e3 + "13"], t4[r3][14] = t4[e3 + "0"], t4[r3][15] = t4[e3 + "0"];
    }
    __name(rt2, "rt2");
    __name2(rt2, "rt");
    function nt2(t5) {
      return t5 == Hn || t5 == Wn || t5 == Vn || t5 == Gn;
    }
    __name(nt2, "nt2");
    __name2(nt2, "nt");
    function it2() {
      this.eb = [], this.size = this.A = this.fb = 0;
    }
    __name(it2, "it2");
    __name2(it2, "it");
    function at2() {
      this.y = [], this.f = [], this.ea = [], this.F = [], this.Tc = this.Ed = this.Cd = this.Fd = this.lb = this.Db = this.Ab = this.fa = this.J = this.W = this.N = this.O = 0;
    }
    __name(at2, "at2");
    __name2(at2, "at");
    function ot2() {
      this.Rd = this.height = this.width = this.S = 0, this.f = {}, this.f.RGBA = new it2(), this.f.kb = new at2(), this.sd = null;
    }
    __name(ot2, "ot2");
    __name2(ot2, "ot");
    function st2() {
      this.width = [0], this.height = [0], this.Pd = [0], this.Qd = [0], this.format = [0];
    }
    __name(st2, "st2");
    __name2(st2, "st");
    function ct2() {
      this.Id = this.fd = this.Md = this.hb = this.ib = this.da = this.bd = this.cd = this.j = this.v = this.Da = this.Sd = this.ob = 0;
    }
    __name(ct2, "ct2");
    __name2(ct2, "ct");
    function ut2(t5) {
      return alert("todo:WebPSamplerProcessPlane"), t5.T;
    }
    __name(ut2, "ut2");
    __name2(ut2, "ut");
    function ht2(t5, e3) {
      var r3 = t5.T, i4 = e3.ba.f.RGBA, a4 = i4.eb, o4 = i4.fb + t5.ka * i4.A, s4 = vi[e3.ba.S], c6 = t5.y, u5 = t5.O, h5 = t5.f, l5 = t5.N, f5 = t5.ea, d4 = t5.W, p5 = e3.cc, g4 = e3.dc, m6 = e3.Mc, v5 = e3.Nc, b4 = t5.ka, y5 = t5.ka + t5.T, w4 = t5.U, N5 = w4 + 1 >> 1;
      for (0 == b4 ? s4(c6, u5, null, null, h5, l5, f5, d4, h5, l5, f5, d4, a4, o4, null, null, w4) : (s4(e3.ec, e3.fc, c6, u5, p5, g4, m6, v5, h5, l5, f5, d4, a4, o4 - i4.A, a4, o4, w4), ++r3); b4 + 2 < y5; b4 += 2) p5 = h5, g4 = l5, m6 = f5, v5 = d4, l5 += t5.Rc, d4 += t5.Rc, o4 += 2 * i4.A, s4(c6, (u5 += 2 * t5.fa) - t5.fa, c6, u5, p5, g4, m6, v5, h5, l5, f5, d4, a4, o4 - i4.A, a4, o4, w4);
      return u5 += t5.fa, t5.j + y5 < t5.o ? (n3(e3.ec, e3.fc, c6, u5, w4), n3(e3.cc, e3.dc, h5, l5, N5), n3(e3.Mc, e3.Nc, f5, d4, N5), r3--) : 1 & y5 || s4(c6, u5, null, null, h5, l5, f5, d4, h5, l5, f5, d4, a4, o4 + i4.A, null, null, w4), r3;
    }
    __name(ht2, "ht2");
    __name2(ht2, "ht");
    function lt3(t5, r3, n4) {
      var i4 = t5.F, a4 = [t5.J];
      if (null != i4) {
        var o4 = t5.U, s4 = r3.ba.S, c6 = s4 == Tn || s4 == Vn;
        r3 = r3.ba.f.RGBA;
        var u5 = [0], h5 = t5.ka;
        u5[0] = t5.T, t5.Kb && (0 == h5 ? --u5[0] : (--h5, a4[0] -= t5.width), t5.j + t5.ka + t5.T == t5.o && (u5[0] = t5.o - t5.j - h5));
        var l5 = r3.eb;
        h5 = r3.fb + h5 * r3.A;
        t5 = Sn(i4, a4[0], t5.width, o4, u5, l5, h5 + (c6 ? 0 : 3), r3.A), e2(n4 == u5), t5 && nt2(s4) && An(l5, h5, c6, o4, u5, r3.A);
      }
      return 0;
    }
    __name(lt3, "lt3");
    __name2(lt3, "lt");
    function ft2(t5) {
      var e3 = t5.ma, r3 = e3.ba.S, n4 = 11 > r3, i4 = r3 == qn || r3 == Rn || r3 == Tn || r3 == Un || 12 == r3 || nt2(r3);
      if (e3.memory = null, e3.Ib = null, e3.Jb = null, e3.Nd = null, !Mr(e3.Oa, t5, i4 ? 11 : 12)) return 0;
      if (i4 && nt2(r3) && br(), t5.da) alert("todo:use_scaling");
      else {
        if (n4) {
          if (e3.Ib = ut2, t5.Kb) {
            if (r3 = t5.U + 1 >> 1, e3.memory = a3(t5.U + 2 * r3), null == e3.memory) return 0;
            e3.ec = e3.memory, e3.fc = 0, e3.cc = e3.ec, e3.dc = e3.fc + t5.U, e3.Mc = e3.cc, e3.Nc = e3.dc + r3, e3.Ib = ht2, br();
          }
        } else alert("todo:EmitYUV");
        i4 && (e3.Jb = lt3, n4 && mr());
      }
      if (n4 && !Ci) {
        for (t5 = 0; 256 > t5; ++t5) ji[t5] = 89858 * (t5 - 128) + _i >> Si, Mi[t5] = -22014 * (t5 - 128) + _i, Bi[t5] = -45773 * (t5 - 128), Oi[t5] = 113618 * (t5 - 128) + _i >> Si;
        for (t5 = Pi; t5 < ki; ++t5) e3 = 76283 * (t5 - 16) + _i >> Si, Ei[t5 - Pi] = Vt2(e3, 255), qi[t5 - Pi] = Vt2(e3 + 8 >> 4, 15);
        Ci = 1;
      }
      return 1;
    }
    __name(ft2, "ft2");
    __name2(ft2, "ft");
    function dt2(t5) {
      var r3 = t5.ma, n4 = t5.U, i4 = t5.T;
      return e2(!(1 & t5.ka)), 0 >= n4 || 0 >= i4 ? 0 : (n4 = r3.Ib(t5, r3), null != r3.Jb && r3.Jb(t5, r3, n4), r3.Dc += n4, 1);
    }
    __name(dt2, "dt2");
    __name2(dt2, "dt");
    function pt2(t5) {
      t5.ma.memory = null;
    }
    __name(pt2, "pt2");
    __name2(pt2, "pt");
    function gt3(t5, e3, r3, n4) {
      return 47 != y4(t5, 8) ? 0 : (e3[0] = y4(t5, 14) + 1, r3[0] = y4(t5, 14) + 1, n4[0] = y4(t5, 1), 0 != y4(t5, 3) ? 0 : !t5.h);
    }
    __name(gt3, "gt3");
    __name2(gt3, "gt");
    function mt2(t5, e3) {
      if (4 > t5) return t5 + 1;
      var r3 = t5 - 2 >> 1;
      return (2 + (1 & t5) << r3) + y4(e3, r3) + 1;
    }
    __name(mt2, "mt2");
    __name2(mt2, "mt");
    function vt2(t5, e3) {
      return 120 < e3 ? e3 - 120 : 1 <= (r3 = ((r3 = $n[e3 - 1]) >> 4) * t5 + (8 - (15 & r3))) ? r3 : 1;
      var r3;
    }
    __name(vt2, "vt2");
    __name2(vt2, "vt");
    function bt2(t5, e3, r3) {
      var n4 = L3(r3), i4 = t5[e3 += 255 & n4].g - 8;
      return 0 < i4 && (x22(r3, r3.u + 8), n4 = L3(r3), e3 += t5[e3].value, e3 += n4 & (1 << i4) - 1), x22(r3, r3.u + t5[e3].g), t5[e3].value;
    }
    __name(bt2, "bt2");
    __name2(bt2, "bt");
    function yt2(t5, r3, n4) {
      return n4.g += t5.g, n4.value += t5.value << r3 >>> 0, e2(8 >= n4.g), t5.g;
    }
    __name(yt2, "yt2");
    __name2(yt2, "yt");
    function wt2(t5, r3, n4) {
      var i4 = t5.xc;
      return e2((r3 = 0 == i4 ? 0 : t5.vc[t5.md * (n4 >> i4) + (r3 >> i4)]) < t5.Wb), t5.Ya[r3];
    }
    __name(wt2, "wt2");
    __name2(wt2, "wt");
    function Nt2(t5, r3, i4, a4) {
      var o4 = t5.ab, s4 = t5.c * r3, c6 = t5.C;
      r3 = c6 + r3;
      var u5 = i4, h5 = a4;
      for (a4 = t5.Ta, i4 = t5.Ua; 0 < o4--; ) {
        var l5 = t5.gc[o4], f5 = c6, d4 = r3, p5 = u5, g4 = h5, m6 = (h5 = a4, u5 = i4, l5.Ea);
        switch (e2(f5 < d4), e2(d4 <= l5.nc), l5.hc) {
          case 2:
            Gr(p5, g4, (d4 - f5) * m6, h5, u5);
            break;
          case 0:
            var v5 = f5, b4 = d4, y5 = h5, w4 = u5, N5 = (_4 = l5).Ea;
            0 == v5 && (Wr(p5, g4, null, null, 1, y5, w4), V3(p5, g4 + 1, 0, 0, N5 - 1, y5, w4 + 1), g4 += N5, w4 += N5, ++v5);
            for (var L4 = 1 << _4.b, A4 = L4 - 1, x3 = q2(N5, _4.b), S3 = _4.K, _4 = _4.w + (v5 >> _4.b) * x3; v5 < b4; ) {
              var P3 = S3, k3 = _4, I3 = 1;
              for (Vr(p5, g4, y5, w4 - N5, 1, y5, w4); I3 < N5; ) {
                var F3 = (I3 & ~A4) + L4;
                F3 > N5 && (F3 = N5), (0, Zr[P3[k3++] >> 8 & 15])(p5, g4 + +I3, y5, w4 + I3 - N5, F3 - I3, y5, w4 + I3), I3 = F3;
              }
              g4 += N5, w4 += N5, ++v5 & A4 || (_4 += x3);
            }
            d4 != l5.nc && n3(h5, u5 - m6, h5, u5 + (d4 - f5 - 1) * m6, m6);
            break;
          case 1:
            for (m6 = p5, b4 = g4, N5 = (p5 = l5.Ea) - (w4 = p5 & ~(y5 = (g4 = 1 << l5.b) - 1)), v5 = q2(p5, l5.b), L4 = l5.K, l5 = l5.w + (f5 >> l5.b) * v5; f5 < d4; ) {
              for (A4 = L4, x3 = l5, S3 = new T3(), _4 = b4 + w4, P3 = b4 + p5; b4 < _4; ) Y2(A4[x3++], S3), $r(S3, m6, b4, g4, h5, u5), b4 += g4, u5 += g4;
              b4 < P3 && (Y2(A4[x3++], S3), $r(S3, m6, b4, N5, h5, u5), b4 += N5, u5 += N5), ++f5 & y5 || (l5 += v5);
            }
            break;
          case 3:
            if (p5 == h5 && g4 == u5 && 0 < l5.b) {
              for (b4 = h5, p5 = m6 = u5 + (d4 - f5) * m6 - (w4 = (d4 - f5) * q2(l5.Ea, l5.b)), g4 = h5, y5 = u5, v5 = [], w4 = (N5 = w4) - 1; 0 <= w4; --w4) v5[w4] = g4[y5 + w4];
              for (w4 = N5 - 1; 0 <= w4; --w4) b4[p5 + w4] = v5[w4];
              Yr(l5, f5, d4, h5, m6, h5, u5);
            } else Yr(l5, f5, d4, p5, g4, h5, u5);
        }
        u5 = a4, h5 = i4;
      }
      h5 != i4 && n3(a4, i4, u5, h5, s4);
    }
    __name(Nt2, "Nt2");
    __name2(Nt2, "Nt");
    function Lt2(t5, r3) {
      var n4 = t5.V, i4 = t5.Ba + t5.c * t5.C, a4 = r3 - t5.C;
      if (e2(r3 <= t5.l.o), e2(16 >= a4), 0 < a4) {
        var o4 = t5.l, s4 = t5.Ta, c6 = t5.Ua, u5 = o4.width;
        if (Nt2(t5, a4, n4, i4), a4 = c6 = [c6], e2((n4 = t5.C) < (i4 = r3)), e2(o4.v < o4.va), i4 > o4.o && (i4 = o4.o), n4 < o4.j) {
          var h5 = o4.j - n4;
          n4 = o4.j;
          a4[0] += h5 * u5;
        }
        if (n4 >= i4 ? n4 = 0 : (a4[0] += 4 * o4.v, o4.ka = n4 - o4.j, o4.U = o4.va - o4.v, o4.T = i4 - n4, n4 = 1), n4) {
          if (c6 = c6[0], 11 > (n4 = t5.ca).S) {
            var l5 = n4.f.RGBA, f5 = (i4 = n4.S, a4 = o4.U, o4 = o4.T, h5 = l5.eb, l5.A), d4 = o4;
            for (l5 = l5.fb + t5.Ma * l5.A; 0 < d4--; ) {
              var p5 = s4, g4 = c6, m6 = a4, v5 = h5, b4 = l5;
              switch (i4) {
                case En:
                  Qr(p5, g4, m6, v5, b4);
                  break;
                case qn:
                  tn(p5, g4, m6, v5, b4);
                  break;
                case Hn:
                  tn(p5, g4, m6, v5, b4), An(v5, b4, 0, m6, 1, 0);
                  break;
                case Dn:
                  nn(p5, g4, m6, v5, b4);
                  break;
                case Rn:
                  et3(p5, g4, m6, v5, b4, 1);
                  break;
                case Wn:
                  et3(p5, g4, m6, v5, b4, 1), An(v5, b4, 0, m6, 1, 0);
                  break;
                case Tn:
                  et3(p5, g4, m6, v5, b4, 0);
                  break;
                case Vn:
                  et3(p5, g4, m6, v5, b4, 0), An(v5, b4, 1, m6, 1, 0);
                  break;
                case Un:
                  en(p5, g4, m6, v5, b4);
                  break;
                case Gn:
                  en(p5, g4, m6, v5, b4), xn(v5, b4, m6, 1, 0);
                  break;
                case zn:
                  rn(p5, g4, m6, v5, b4);
                  break;
                default:
                  e2(0);
              }
              c6 += u5, l5 += f5;
            }
            t5.Ma += o4;
          } else alert("todo:EmitRescaledRowsYUVA");
          e2(t5.Ma <= n4.height);
        }
      }
      t5.C = r3, e2(t5.C <= t5.i);
    }
    __name(Lt2, "Lt2");
    __name2(Lt2, "Lt");
    function At2(t5) {
      var e3;
      if (0 < t5.ua) return 0;
      for (e3 = 0; e3 < t5.Wb; ++e3) {
        var r3 = t5.Ya[e3].G, n4 = t5.Ya[e3].H;
        if (0 < r3[1][n4[1] + 0].g || 0 < r3[2][n4[2] + 0].g || 0 < r3[3][n4[3] + 0].g) return 0;
      }
      return 1;
    }
    __name(At2, "At2");
    __name2(At2, "At");
    function xt2(t5, r3, n4, i4, a4, o4) {
      if (0 != t5.Z) {
        var s4 = t5.qd, c6 = t5.rd;
        for (e2(null != mi[t5.Z]); r3 < n4; ++r3) mi[t5.Z](s4, c6, i4, a4, i4, a4, o4), s4 = i4, c6 = a4, a4 += o4;
        t5.qd = s4, t5.rd = c6;
      }
    }
    __name(xt2, "xt2");
    __name2(xt2, "xt");
    function St2(t5, r3) {
      var n4 = t5.l.ma, i4 = 0 == n4.Z || 1 == n4.Z ? t5.l.j : t5.C;
      i4 = t5.C < i4 ? i4 : t5.C;
      if (e2(r3 <= t5.l.o), r3 > i4) {
        var a4 = t5.l.width, o4 = n4.ca, s4 = n4.tb + a4 * i4, c6 = t5.V, u5 = t5.Ba + t5.c * i4, h5 = t5.gc;
        e2(1 == t5.ab), e2(3 == h5[0].hc), Xr(h5[0], i4, r3, c6, u5, o4, s4), xt2(n4, i4, r3, o4, s4, a4);
      }
      t5.C = t5.Ma = r3;
    }
    __name(St2, "St2");
    __name2(St2, "St");
    function _t2(t5, r3, n4, i4, a4, o4, s4) {
      var c6 = t5.$ / i4, u5 = t5.$ % i4, h5 = t5.m, l5 = t5.s, f5 = n4 + t5.$, d4 = f5;
      a4 = n4 + i4 * a4;
      var p5 = n4 + i4 * o4, g4 = 280 + l5.ua, m6 = t5.Pb ? c6 : 16777216, v5 = 0 < l5.ua ? l5.Wa : null, b4 = l5.wc, y5 = f5 < p5 ? wt2(l5, u5, c6) : null;
      e2(t5.C < o4), e2(p5 <= a4);
      var w4 = false;
      t: for (; ; ) {
        for (; w4 || f5 < p5; ) {
          var N5 = 0;
          if (c6 >= m6) {
            var _4 = f5 - n4;
            e2((m6 = t5).Pb), m6.wd = m6.m, m6.xd = _4, 0 < m6.s.ua && B2(m6.s.Wa, m6.s.vb), m6 = c6 + ti;
          }
          if (u5 & b4 || (y5 = wt2(l5, u5, c6)), e2(null != y5), y5.Qb && (r3[f5] = y5.qb, w4 = true), !w4) if (S2(h5), y5.jc) {
            N5 = h5, _4 = r3;
            var P3 = f5, k3 = y5.pd[L3(N5) & Dr - 1];
            e2(y5.jc), 256 > k3.g ? (x22(N5, N5.u + k3.g), _4[P3] = k3.value, N5 = 0) : (x22(N5, N5.u + k3.g - 256), e2(256 <= k3.value), N5 = k3.value), 0 == N5 && (w4 = true);
          } else N5 = bt2(y5.G[0], y5.H[0], h5);
          if (h5.h) break;
          if (w4 || 256 > N5) {
            if (!w4) if (y5.nd) r3[f5] = (y5.qb | N5 << 8) >>> 0;
            else {
              if (S2(h5), w4 = bt2(y5.G[1], y5.H[1], h5), S2(h5), _4 = bt2(y5.G[2], y5.H[2], h5), P3 = bt2(y5.G[3], y5.H[3], h5), h5.h) break;
              r3[f5] = (P3 << 24 | w4 << 16 | N5 << 8 | _4) >>> 0;
            }
            if (w4 = false, ++f5, ++u5 >= i4 && (u5 = 0, ++c6, null != s4 && c6 <= o4 && !(c6 % 16) && s4(t5, c6), null != v5)) for (; d4 < f5; ) N5 = r3[d4++], v5.X[(506832829 * N5 & 4294967295) >>> v5.Mb] = N5;
          } else if (280 > N5) {
            if (N5 = mt2(N5 - 256, h5), _4 = bt2(y5.G[4], y5.H[4], h5), S2(h5), _4 = vt2(i4, _4 = mt2(_4, h5)), h5.h) break;
            if (f5 - n4 < _4 || a4 - f5 < N5) break t;
            for (P3 = 0; P3 < N5; ++P3) r3[f5 + P3] = r3[f5 + P3 - _4];
            for (f5 += N5, u5 += N5; u5 >= i4; ) u5 -= i4, ++c6, null != s4 && c6 <= o4 && !(c6 % 16) && s4(t5, c6);
            if (e2(f5 <= a4), u5 & b4 && (y5 = wt2(l5, u5, c6)), null != v5) for (; d4 < f5; ) N5 = r3[d4++], v5.X[(506832829 * N5 & 4294967295) >>> v5.Mb] = N5;
          } else {
            if (!(N5 < g4)) break t;
            for (w4 = N5 - 280, e2(null != v5); d4 < f5; ) N5 = r3[d4++], v5.X[(506832829 * N5 & 4294967295) >>> v5.Mb] = N5;
            N5 = f5, e2(!(w4 >>> (_4 = v5).Xa)), r3[N5] = _4.X[w4], w4 = true;
          }
          w4 || e2(h5.h == A3(h5));
        }
        if (t5.Pb && h5.h && f5 < a4) e2(t5.m.h), t5.a = 5, t5.m = t5.wd, t5.$ = t5.xd, 0 < t5.s.ua && B2(t5.s.vb, t5.s.Wa);
        else {
          if (h5.h) break t;
          null != s4 && s4(t5, c6 > o4 ? o4 : c6), t5.a = 0, t5.$ = f5 - n4;
        }
        return 1;
      }
      return t5.a = 3, 0;
    }
    __name(_t2, "_t2");
    __name2(_t2, "_t");
    function Pt2(t5) {
      e2(null != t5), t5.vc = null, t5.yc = null, t5.Ya = null;
      var r3 = t5.Wa;
      null != r3 && (r3.X = null), t5.vb = null, e2(null != t5);
    }
    __name(Pt2, "Pt2");
    __name2(Pt2, "Pt");
    function kt2() {
      var e3 = new or2();
      return null == e3 ? null : (e3.a = 0, e3.xb = gi, rt2("Predictor", "VP8LPredictors"), rt2("Predictor", "VP8LPredictors_C"), rt2("PredictorAdd", "VP8LPredictorsAdd"), rt2("PredictorAdd", "VP8LPredictorsAdd_C"), Gr = G2, $r = J2, Qr = K2, tn = Z2, en = $2, rn = Q2, nn = tt2, t4.VP8LMapColor32b = Jr, t4.VP8LMapColor8b = Kr, e3);
    }
    __name(kt2, "kt2");
    __name2(kt2, "kt");
    function It2(t5, r3, n4, s4, c6) {
      var u5 = 1, f5 = [t5], p5 = [r3], g4 = s4.m, m6 = s4.s, v5 = null, b4 = 0;
      t: for (; ; ) {
        if (n4) for (; u5 && y4(g4, 1); ) {
          var w4 = f5, N5 = p5, A4 = s4, _4 = 1, P3 = A4.m, k3 = A4.gc[A4.ab], I3 = y4(P3, 2);
          if (A4.Oc & 1 << I3) u5 = 0;
          else {
            switch (A4.Oc |= 1 << I3, k3.hc = I3, k3.Ea = w4[0], k3.nc = N5[0], k3.K = [null], ++A4.ab, e2(4 >= A4.ab), I3) {
              case 0:
              case 1:
                k3.b = y4(P3, 3) + 2, _4 = It2(q2(k3.Ea, k3.b), q2(k3.nc, k3.b), 0, A4, k3.K), k3.K = k3.K[0];
                break;
              case 3:
                var F3, C3 = y4(P3, 8) + 1, j3 = 16 < C3 ? 0 : 4 < C3 ? 1 : 2 < C3 ? 2 : 3;
                if (w4[0] = q2(k3.Ea, j3), k3.b = j3, F3 = _4 = It2(C3, 1, 0, A4, k3.K)) {
                  var B3, M3 = C3, E3 = k3, R3 = 1 << (8 >> E3.b), T4 = a3(R3);
                  if (null == T4) F3 = 0;
                  else {
                    var U3 = E3.K[0], z4 = E3.w;
                    for (T4[0] = E3.K[0][0], B3 = 1; B3 < 1 * M3; ++B3) T4[B3] = D2(U3[z4 + B3], T4[B3 - 1]);
                    for (; B3 < 4 * R3; ++B3) T4[B3] = 0;
                    E3.K[0] = null, E3.K[0] = T4, F3 = 1;
                  }
                }
                _4 = F3;
                break;
              case 2:
                break;
              default:
                e2(0);
            }
            u5 = _4;
          }
        }
        if (f5 = f5[0], p5 = p5[0], u5 && y4(g4, 1) && !(u5 = 1 <= (b4 = y4(g4, 4)) && 11 >= b4)) {
          s4.a = 3;
          break t;
        }
        var H3;
        if (H3 = u5) e: {
          var W3, V4, G3, Y3 = s4, J3 = f5, X3 = p5, K3 = b4, Z3 = n4, $3 = Y3.m, Q3 = Y3.s, tt3 = [null], et4 = 1, rt3 = 0, nt3 = Qn[K3];
          r: for (; ; ) {
            if (Z3 && y4($3, 1)) {
              var it3 = y4($3, 3) + 2, at3 = q2(J3, it3), ot3 = q2(X3, it3), st3 = at3 * ot3;
              if (!It2(at3, ot3, 0, Y3, tt3)) break r;
              for (tt3 = tt3[0], Q3.xc = it3, W3 = 0; W3 < st3; ++W3) {
                var ct3 = tt3[W3] >> 8 & 65535;
                tt3[W3] = ct3, ct3 >= et4 && (et4 = ct3 + 1);
              }
            }
            if ($3.h) break r;
            for (V4 = 0; 5 > V4; ++V4) {
              var ut3 = Xn[V4];
              !V4 && 0 < K3 && (ut3 += 1 << K3), rt3 < ut3 && (rt3 = ut3);
            }
            var ht3 = o3(et4 * nt3, l4), lt4 = et4, ft3 = o3(lt4, d3);
            if (null == ft3) var dt3 = null;
            else e2(65536 >= lt4), dt3 = ft3;
            var pt3 = a3(rt3);
            if (null == dt3 || null == pt3 || null == ht3) {
              Y3.a = 1;
              break r;
            }
            var gt4 = ht3;
            for (W3 = G3 = 0; W3 < et4; ++W3) {
              var mt3 = dt3[W3], vt3 = mt3.G, bt3 = mt3.H, wt3 = 0, Nt3 = 1, Lt3 = 0;
              for (V4 = 0; 5 > V4; ++V4) {
                ut3 = Xn[V4], vt3[V4] = gt4, bt3[V4] = G3, !V4 && 0 < K3 && (ut3 += 1 << K3);
                n: {
                  var At3, xt3 = ut3, St3 = Y3, kt3 = pt3, Ft3 = gt4, Ct3 = G3, jt3 = 0, Ot3 = St3.m, Bt3 = y4(Ot3, 1);
                  if (i33(kt3, 0, 0, xt3), Bt3) {
                    var Mt3 = y4(Ot3, 1) + 1, Et3 = y4(Ot3, 1), qt3 = y4(Ot3, 0 == Et3 ? 1 : 8);
                    kt3[qt3] = 1, 2 == Mt3 && (kt3[qt3 = y4(Ot3, 8)] = 1);
                    var Dt3 = 1;
                  } else {
                    var Rt3 = a3(19), Tt3 = y4(Ot3, 4) + 4;
                    if (19 < Tt3) {
                      St3.a = 3;
                      var Ut3 = 0;
                      break n;
                    }
                    for (At3 = 0; At3 < Tt3; ++At3) Rt3[Zn[At3]] = y4(Ot3, 3);
                    var zt3 = void 0, Ht3 = void 0, Wt3 = St3, Vt3 = Rt3, Gt3 = xt3, Yt3 = kt3, Jt3 = 0, Xt3 = Wt3.m, Kt3 = 8, Zt3 = o3(128, l4);
                    i: for (; h4(Zt3, 0, 7, Vt3, 19); ) {
                      if (y4(Xt3, 1)) {
                        var $t3 = 2 + 2 * y4(Xt3, 3);
                        if ((zt3 = 2 + y4(Xt3, $t3)) > Gt3) break i;
                      } else zt3 = Gt3;
                      for (Ht3 = 0; Ht3 < Gt3 && zt3--; ) {
                        S2(Xt3);
                        var Qt3 = Zt3[0 + (127 & L3(Xt3))];
                        x22(Xt3, Xt3.u + Qt3.g);
                        var te3 = Qt3.value;
                        if (16 > te3) Yt3[Ht3++] = te3, 0 != te3 && (Kt3 = te3);
                        else {
                          var ee3 = 16 == te3, re3 = te3 - 16, ne4 = Jn[re3], ie3 = y4(Xt3, Yn[re3]) + ne4;
                          if (Ht3 + ie3 > Gt3) break i;
                          for (var ae3 = ee3 ? Kt3 : 0; 0 < ie3--; ) Yt3[Ht3++] = ae3;
                        }
                      }
                      Jt3 = 1;
                      break i;
                    }
                    Jt3 || (Wt3.a = 3), Dt3 = Jt3;
                  }
                  (Dt3 = Dt3 && !Ot3.h) && (jt3 = h4(Ft3, Ct3, 8, kt3, xt3)), Dt3 && 0 != jt3 ? Ut3 = jt3 : (St3.a = 3, Ut3 = 0);
                }
                if (0 == Ut3) break r;
                if (Nt3 && 1 == Kn[V4] && (Nt3 = 0 == gt4[G3].g), wt3 += gt4[G3].g, G3 += Ut3, 3 >= V4) {
                  var oe3, se3 = pt3[0];
                  for (oe3 = 1; oe3 < ut3; ++oe3) pt3[oe3] > se3 && (se3 = pt3[oe3]);
                  Lt3 += se3;
                }
              }
              if (mt3.nd = Nt3, mt3.Qb = 0, Nt3 && (mt3.qb = (vt3[3][bt3[3] + 0].value << 24 | vt3[1][bt3[1] + 0].value << 16 | vt3[2][bt3[2] + 0].value) >>> 0, 0 == wt3 && 256 > vt3[0][bt3[0] + 0].value && (mt3.Qb = 1, mt3.qb += vt3[0][bt3[0] + 0].value << 8)), mt3.jc = !mt3.Qb && 6 > Lt3, mt3.jc) {
                var ce3, ue3 = mt3;
                for (ce3 = 0; ce3 < Dr; ++ce3) {
                  var he3 = ce3, le3 = ue3.pd[he3], fe3 = ue3.G[0][ue3.H[0] + he3];
                  256 <= fe3.value ? (le3.g = fe3.g + 256, le3.value = fe3.value) : (le3.g = 0, le3.value = 0, he3 >>= yt2(fe3, 8, le3), he3 >>= yt2(ue3.G[1][ue3.H[1] + he3], 16, le3), he3 >>= yt2(ue3.G[2][ue3.H[2] + he3], 0, le3), yt2(ue3.G[3][ue3.H[3] + he3], 24, le3));
                }
              }
            }
            Q3.vc = tt3, Q3.Wb = et4, Q3.Ya = dt3, Q3.yc = ht3, H3 = 1;
            break e;
          }
          H3 = 0;
        }
        if (!(u5 = H3)) {
          s4.a = 3;
          break t;
        }
        if (0 < b4) {
          if (m6.ua = 1 << b4, !O3(m6.Wa, b4)) {
            s4.a = 1, u5 = 0;
            break t;
          }
        } else m6.ua = 0;
        var de3 = s4, pe3 = f5, ge3 = p5, me3 = de3.s, ve3 = me3.xc;
        if (de3.c = pe3, de3.i = ge3, me3.md = q2(pe3, ve3), me3.wc = 0 == ve3 ? -1 : (1 << ve3) - 1, n4) {
          s4.xb = pi;
          break t;
        }
        if (null == (v5 = a3(f5 * p5))) {
          s4.a = 1, u5 = 0;
          break t;
        }
        u5 = (u5 = _t2(s4, v5, 0, f5, p5, p5, null)) && !g4.h;
        break t;
      }
      return u5 ? (null != c6 ? c6[0] = v5 : (e2(null == v5), e2(n4)), s4.$ = 0, n4 || Pt2(m6)) : Pt2(m6), u5;
    }
    __name(It2, "It2");
    __name2(It2, "It");
    function Ft2(t5, r3) {
      var n4 = t5.c * t5.i, i4 = n4 + r3 + 16 * r3;
      return e2(t5.c <= r3), t5.V = a3(i4), null == t5.V ? (t5.Ta = null, t5.Ua = 0, t5.a = 1, 0) : (t5.Ta = t5.V, t5.Ua = t5.Ba + n4 + r3, 1);
    }
    __name(Ft2, "Ft2");
    __name2(Ft2, "Ft");
    function Ct2(t5, r3) {
      var n4 = t5.C, i4 = r3 - n4, a4 = t5.V, o4 = t5.Ba + t5.c * n4;
      for (e2(r3 <= t5.l.o); 0 < i4; ) {
        var s4 = 16 < i4 ? 16 : i4, c6 = t5.l.ma, u5 = t5.l.width, h5 = u5 * s4, l5 = c6.ca, f5 = c6.tb + u5 * n4, d4 = t5.Ta, p5 = t5.Ua;
        Nt2(t5, s4, a4, o4), _n(d4, p5, l5, f5, h5), xt2(c6, n4, n4 + s4, l5, f5, u5), i4 -= s4, a4 += s4 * t5.c, n4 += s4;
      }
      e2(n4 == r3), t5.C = t5.Ma = r3;
    }
    __name(Ct2, "Ct2");
    __name2(Ct2, "Ct");
    function jt2() {
      this.ub = this.yd = this.td = this.Rb = 0;
    }
    __name(jt2, "jt2");
    __name2(jt2, "jt");
    function Ot2() {
      this.Kd = this.Ld = this.Ud = this.Td = this.i = this.c = 0;
    }
    __name(Ot2, "Ot2");
    __name2(Ot2, "Ot");
    function Bt2() {
      this.Fb = this.Bb = this.Cb = 0, this.Zb = a3(4), this.Lb = a3(4);
    }
    __name(Bt2, "Bt2");
    __name2(Bt2, "Bt");
    function Mt2() {
      this.Yb = function() {
        var t5 = [];
        return (/* @__PURE__ */ __name2(/* @__PURE__ */ __name(function t6(e3, r3, n4) {
          for (var i4 = n4[r3], a4 = 0; a4 < i4 && (e3.push(n4.length > r3 + 1 ? [] : 0), !(n4.length < r3 + 1)); a4++) t6(e3[a4], r3 + 1, n4);
        }, "t6"), "t"))(t5, 0, [3, 11]), t5;
      }();
    }
    __name(Mt2, "Mt2");
    __name2(Mt2, "Mt");
    function Et2() {
      this.jb = a3(3), this.Wc = s3([4, 8], Mt2), this.Xc = s3([4, 17], Mt2);
    }
    __name(Et2, "Et2");
    __name2(Et2, "Et");
    function qt2() {
      this.Pc = this.wb = this.Tb = this.zd = 0, this.vd = new a3(4), this.od = new a3(4);
    }
    __name(qt2, "qt2");
    __name2(qt2, "qt");
    function Dt2() {
      this.ld = this.La = this.dd = this.tc = 0;
    }
    __name(Dt2, "Dt2");
    __name2(Dt2, "Dt");
    function Rt2() {
      this.Na = this.la = 0;
    }
    __name(Rt2, "Rt2");
    __name2(Rt2, "Rt");
    function Tt2() {
      this.Sc = [0, 0], this.Eb = [0, 0], this.Qc = [0, 0], this.ia = this.lc = 0;
    }
    __name(Tt2, "Tt2");
    __name2(Tt2, "Tt");
    function Ut2() {
      this.ad = a3(384), this.Za = 0, this.Ob = a3(16), this.$b = this.Ad = this.ia = this.Gc = this.Hc = this.Dd = 0;
    }
    __name(Ut2, "Ut2");
    __name2(Ut2, "Ut");
    function zt2() {
      this.uc = this.M = this.Nb = 0, this.wa = Array(new Dt2()), this.Y = 0, this.ya = Array(new Ut2()), this.aa = 0, this.l = new Gt2();
    }
    __name(zt2, "zt2");
    __name2(zt2, "zt");
    function Ht2() {
      this.y = a3(16), this.f = a3(8), this.ea = a3(8);
    }
    __name(Ht2, "Ht2");
    __name2(Ht2, "Ht");
    function Wt2() {
      this.cb = this.a = 0, this.sc = "", this.m = new w3(), this.Od = new jt2(), this.Kc = new Ot2(), this.ed = new qt2(), this.Qa = new Bt2(), this.Ic = this.$c = this.Aa = 0, this.D = new zt2(), this.Xb = this.Va = this.Hb = this.zb = this.yb = this.Ub = this.za = 0, this.Jc = o3(8, w3), this.ia = 0, this.pb = o3(4, Tt2), this.Pa = new Et2(), this.Bd = this.kc = 0, this.Ac = [], this.Bc = 0, this.zc = [0, 0, 0, 0], this.Gd = Array(new Ht2()), this.Hd = 0, this.rb = Array(new Rt2()), this.sb = 0, this.wa = Array(new Dt2()), this.Y = 0, this.oc = [], this.pc = 0, this.sa = [], this.ta = 0, this.qa = [], this.ra = 0, this.Ha = [], this.B = this.R = this.Ia = 0, this.Ec = [], this.M = this.ja = this.Vb = this.Fc = 0, this.ya = Array(new Ut2()), this.L = this.aa = 0, this.gd = s3([4, 2], Dt2), this.ga = null, this.Fa = [], this.Cc = this.qc = this.P = 0, this.Gb = [], this.Uc = 0, this.mb = [], this.nb = 0, this.rc = [], this.Ga = this.Vc = 0;
    }
    __name(Wt2, "Wt2");
    __name2(Wt2, "Wt");
    function Vt2(t5, e3) {
      return 0 > t5 ? 0 : t5 > e3 ? e3 : t5;
    }
    __name(Vt2, "Vt2");
    __name2(Vt2, "Vt");
    function Gt2() {
      this.T = this.U = this.ka = this.height = this.width = 0, this.y = [], this.f = [], this.ea = [], this.Rc = this.fa = this.W = this.N = this.O = 0, this.ma = "void", this.put = "VP8IoPutHook", this.ac = "VP8IoSetupHook", this.bc = "VP8IoTeardownHook", this.ha = this.Kb = 0, this.data = [], this.hb = this.ib = this.da = this.o = this.j = this.va = this.v = this.Da = this.ob = this.w = 0, this.F = [], this.J = 0;
    }
    __name(Gt2, "Gt2");
    __name2(Gt2, "Gt");
    function Yt2() {
      var t5 = new Wt2();
      return null != t5 && (t5.a = 0, t5.sc = "OK", t5.cb = 0, t5.Xb = 0, ni || (ni = Zt2)), t5;
    }
    __name(Yt2, "Yt2");
    __name2(Yt2, "Yt");
    function Jt2(t5, e3, r3) {
      return 0 == t5.a && (t5.a = e3, t5.sc = r3, t5.cb = 0), 0;
    }
    __name(Jt2, "Jt2");
    __name2(Jt2, "Jt");
    function Xt2(t5, e3, r3) {
      return 3 <= r3 && 157 == t5[e3 + 0] && 1 == t5[e3 + 1] && 42 == t5[e3 + 2];
    }
    __name(Xt2, "Xt2");
    __name2(Xt2, "Xt");
    function Kt2(t5, r3) {
      if (null == t5) return 0;
      if (t5.a = 0, t5.sc = "OK", null == r3) return Jt2(t5, 2, "null VP8Io passed to VP8GetHeaders()");
      var n4 = r3.data, a4 = r3.w, o4 = r3.ha;
      if (4 > o4) return Jt2(t5, 7, "Truncated header.");
      var s4 = n4[a4 + 0] | n4[a4 + 1] << 8 | n4[a4 + 2] << 16, c6 = t5.Od;
      if (c6.Rb = !(1 & s4), c6.td = s4 >> 1 & 7, c6.yd = s4 >> 4 & 1, c6.ub = s4 >> 5, 3 < c6.td) return Jt2(t5, 3, "Incorrect keyframe parameters.");
      if (!c6.yd) return Jt2(t5, 4, "Frame not displayable.");
      a4 += 3, o4 -= 3;
      var u5 = t5.Kc;
      if (c6.Rb) {
        if (7 > o4) return Jt2(t5, 7, "cannot parse picture header");
        if (!Xt2(n4, a4, o4)) return Jt2(t5, 3, "Bad code word");
        u5.c = 16383 & (n4[a4 + 4] << 8 | n4[a4 + 3]), u5.Td = n4[a4 + 4] >> 6, u5.i = 16383 & (n4[a4 + 6] << 8 | n4[a4 + 5]), u5.Ud = n4[a4 + 6] >> 6, a4 += 7, o4 -= 7, t5.za = u5.c + 15 >> 4, t5.Ub = u5.i + 15 >> 4, r3.width = u5.c, r3.height = u5.i, r3.Da = 0, r3.j = 0, r3.v = 0, r3.va = r3.width, r3.o = r3.height, r3.da = 0, r3.ib = r3.width, r3.hb = r3.height, r3.U = r3.width, r3.T = r3.height, i33((s4 = t5.Pa).jb, 0, 255, s4.jb.length), e2(null != (s4 = t5.Qa)), s4.Cb = 0, s4.Bb = 0, s4.Fb = 1, i33(s4.Zb, 0, 0, s4.Zb.length), i33(s4.Lb, 0, 0, s4.Lb);
      }
      if (c6.ub > o4) return Jt2(t5, 7, "bad partition length");
      p4(s4 = t5.m, n4, a4, c6.ub), a4 += c6.ub, o4 -= c6.ub, c6.Rb && (u5.Ld = P2(s4), u5.Kd = P2(s4)), u5 = t5.Qa;
      var h5, l5 = t5.Pa;
      if (e2(null != s4), e2(null != u5), u5.Cb = P2(s4), u5.Cb) {
        if (u5.Bb = P2(s4), P2(s4)) {
          for (u5.Fb = P2(s4), h5 = 0; 4 > h5; ++h5) u5.Zb[h5] = P2(s4) ? m5(s4, 7) : 0;
          for (h5 = 0; 4 > h5; ++h5) u5.Lb[h5] = P2(s4) ? m5(s4, 6) : 0;
        }
        if (u5.Bb) for (h5 = 0; 3 > h5; ++h5) l5.jb[h5] = P2(s4) ? g3(s4, 8) : 255;
      } else u5.Bb = 0;
      if (s4.Ka) return Jt2(t5, 3, "cannot parse segment header");
      if ((u5 = t5.ed).zd = P2(s4), u5.Tb = g3(s4, 6), u5.wb = g3(s4, 3), u5.Pc = P2(s4), u5.Pc && P2(s4)) {
        for (l5 = 0; 4 > l5; ++l5) P2(s4) && (u5.vd[l5] = m5(s4, 6));
        for (l5 = 0; 4 > l5; ++l5) P2(s4) && (u5.od[l5] = m5(s4, 6));
      }
      if (t5.L = 0 == u5.Tb ? 0 : u5.zd ? 1 : 2, s4.Ka) return Jt2(t5, 3, "cannot parse filter header");
      var f5 = o4;
      if (o4 = h5 = a4, a4 = h5 + f5, u5 = f5, t5.Xb = (1 << g3(t5.m, 2)) - 1, f5 < 3 * (l5 = t5.Xb)) n4 = 7;
      else {
        for (h5 += 3 * l5, u5 -= 3 * l5, f5 = 0; f5 < l5; ++f5) {
          var d4 = n4[o4 + 0] | n4[o4 + 1] << 8 | n4[o4 + 2] << 16;
          d4 > u5 && (d4 = u5), p4(t5.Jc[+f5], n4, h5, d4), h5 += d4, u5 -= d4, o4 += 3;
        }
        p4(t5.Jc[+l5], n4, h5, u5), n4 = h5 < a4 ? 0 : 5;
      }
      if (0 != n4) return Jt2(t5, n4, "cannot parse partitions");
      for (n4 = g3(h5 = t5.m, 7), o4 = P2(h5) ? m5(h5, 4) : 0, a4 = P2(h5) ? m5(h5, 4) : 0, u5 = P2(h5) ? m5(h5, 4) : 0, l5 = P2(h5) ? m5(h5, 4) : 0, h5 = P2(h5) ? m5(h5, 4) : 0, f5 = t5.Qa, d4 = 0; 4 > d4; ++d4) {
        if (f5.Cb) {
          var v5 = f5.Zb[d4];
          f5.Fb || (v5 += n4);
        } else {
          if (0 < d4) {
            t5.pb[d4] = t5.pb[0];
            continue;
          }
          v5 = n4;
        }
        var b4 = t5.pb[d4];
        b4.Sc[0] = ei[Vt2(v5 + o4, 127)], b4.Sc[1] = ri[Vt2(v5 + 0, 127)], b4.Eb[0] = 2 * ei[Vt2(v5 + a4, 127)], b4.Eb[1] = 101581 * ri[Vt2(v5 + u5, 127)] >> 16, 8 > b4.Eb[1] && (b4.Eb[1] = 8), b4.Qc[0] = ei[Vt2(v5 + l5, 117)], b4.Qc[1] = ri[Vt2(v5 + h5, 127)], b4.lc = v5 + h5;
      }
      if (!c6.Rb) return Jt2(t5, 4, "Not a key frame.");
      for (P2(s4), c6 = t5.Pa, n4 = 0; 4 > n4; ++n4) {
        for (o4 = 0; 8 > o4; ++o4) for (a4 = 0; 3 > a4; ++a4) for (u5 = 0; 11 > u5; ++u5) l5 = k2(s4, ui[n4][o4][a4][u5]) ? g3(s4, 8) : si[n4][o4][a4][u5], c6.Wc[n4][o4].Yb[a4][u5] = l5;
        for (o4 = 0; 17 > o4; ++o4) c6.Xc[n4][o4] = c6.Wc[n4][hi[o4]];
      }
      return t5.kc = P2(s4), t5.kc && (t5.Bd = g3(s4, 8)), t5.cb = 1;
    }
    __name(Kt2, "Kt2");
    __name2(Kt2, "Kt");
    function Zt2(t5, e3, r3, n4, i4, a4, o4) {
      var s4 = e3[i4].Yb[r3];
      for (r3 = 0; 16 > i4; ++i4) {
        if (!k2(t5, s4[r3 + 0])) return i4;
        for (; !k2(t5, s4[r3 + 1]); ) if (s4 = e3[++i4].Yb[0], r3 = 0, 16 == i4) return 16;
        var c6 = e3[i4 + 1].Yb;
        if (k2(t5, s4[r3 + 2])) {
          var u5 = t5, h5 = 0;
          if (k2(u5, (f5 = s4)[(l5 = r3) + 3])) if (k2(u5, f5[l5 + 6])) {
            for (s4 = 0, l5 = 2 * (h5 = k2(u5, f5[l5 + 8])) + (f5 = k2(u5, f5[l5 + 9 + h5])), h5 = 0, f5 = ii[l5]; f5[s4]; ++s4) h5 += h5 + k2(u5, f5[s4]);
            h5 += 3 + (8 << l5);
          } else k2(u5, f5[l5 + 7]) ? (h5 = 7 + 2 * k2(u5, 165), h5 += k2(u5, 145)) : h5 = 5 + k2(u5, 159);
          else h5 = k2(u5, f5[l5 + 4]) ? 3 + k2(u5, f5[l5 + 5]) : 2;
          s4 = c6[2];
        } else h5 = 1, s4 = c6[1];
        c6 = o4 + ai[i4], 0 > (u5 = t5).b && _3(u5);
        var l5, f5 = u5.b, d4 = (l5 = u5.Ca >> 1) - (u5.I >> f5) >> 31;
        --u5.b, u5.Ca += d4, u5.Ca |= 1, u5.I -= (l5 + 1 & d4) << f5, a4[c6] = ((h5 ^ d4) - d4) * n4[(0 < i4) + 0];
      }
      return 16;
    }
    __name(Zt2, "Zt2");
    __name2(Zt2, "Zt");
    function $t2(t5) {
      var e3 = t5.rb[t5.sb - 1];
      e3.la = 0, e3.Na = 0, i33(t5.zc, 0, 0, t5.zc.length), t5.ja = 0;
    }
    __name($t2, "$t2");
    __name2($t2, "$t");
    function Qt2(t5, r3) {
      if (null == t5) return 0;
      if (null == r3) return Jt2(t5, 2, "NULL VP8Io parameter in VP8Decode().");
      if (!t5.cb && !Kt2(t5, r3)) return 0;
      if (e2(t5.cb), null == r3.ac || r3.ac(r3)) {
        r3.ob && (t5.L = 0);
        var s4 = Ri[t5.L];
        if (2 == t5.L ? (t5.yb = 0, t5.zb = 0) : (t5.yb = r3.v - s4 >> 4, t5.zb = r3.j - s4 >> 4, 0 > t5.yb && (t5.yb = 0), 0 > t5.zb && (t5.zb = 0)), t5.Va = r3.o + 15 + s4 >> 4, t5.Hb = r3.va + 15 + s4 >> 4, t5.Hb > t5.za && (t5.Hb = t5.za), t5.Va > t5.Ub && (t5.Va = t5.Ub), 0 < t5.L) {
          var c6 = t5.ed;
          for (s4 = 0; 4 > s4; ++s4) {
            var u5;
            if (t5.Qa.Cb) {
              var h5 = t5.Qa.Lb[s4];
              t5.Qa.Fb || (h5 += c6.Tb);
            } else h5 = c6.Tb;
            for (u5 = 0; 1 >= u5; ++u5) {
              var l5 = t5.gd[s4][u5], f5 = h5;
              if (c6.Pc && (f5 += c6.vd[0], u5 && (f5 += c6.od[0])), 0 < (f5 = 0 > f5 ? 0 : 63 < f5 ? 63 : f5)) {
                var d4 = f5;
                0 < c6.wb && ((d4 = 4 < c6.wb ? d4 >> 2 : d4 >> 1) > 9 - c6.wb && (d4 = 9 - c6.wb)), 1 > d4 && (d4 = 1), l5.dd = d4, l5.tc = 2 * f5 + d4, l5.ld = 40 <= f5 ? 2 : 15 <= f5 ? 1 : 0;
              } else l5.tc = 0;
              l5.La = u5;
            }
          }
        }
        s4 = 0;
      } else Jt2(t5, 6, "Frame setup failed"), s4 = t5.a;
      if (s4 = 0 == s4) {
        if (s4) {
          t5.$c = 0, 0 < t5.Aa || (t5.Ic = Ui);
          t: {
            s4 = t5.Ic;
            c6 = 4 * (d4 = t5.za);
            var p5 = 32 * d4, g4 = d4 + 1, m6 = 0 < t5.L ? d4 * (0 < t5.Aa ? 2 : 1) : 0, v5 = (2 == t5.Aa ? 2 : 1) * d4;
            if ((l5 = c6 + 832 + (u5 = 3 * (16 * s4 + Ri[t5.L]) / 2 * p5) + (h5 = null != t5.Fa && 0 < t5.Fa.length ? t5.Kc.c * t5.Kc.i : 0)) != l5) s4 = 0;
            else {
              if (l5 > t5.Vb) {
                if (t5.Vb = 0, t5.Ec = a3(l5), t5.Fc = 0, null == t5.Ec) {
                  s4 = Jt2(t5, 1, "no memory during frame initialization.");
                  break t;
                }
                t5.Vb = l5;
              }
              l5 = t5.Ec, f5 = t5.Fc, t5.Ac = l5, t5.Bc = f5, f5 += c6, t5.Gd = o3(p5, Ht2), t5.Hd = 0, t5.rb = o3(g4 + 1, Rt2), t5.sb = 1, t5.wa = m6 ? o3(m6, Dt2) : null, t5.Y = 0, t5.D.Nb = 0, t5.D.wa = t5.wa, t5.D.Y = t5.Y, 0 < t5.Aa && (t5.D.Y += d4), e2(true), t5.oc = l5, t5.pc = f5, f5 += 832, t5.ya = o3(v5, Ut2), t5.aa = 0, t5.D.ya = t5.ya, t5.D.aa = t5.aa, 2 == t5.Aa && (t5.D.aa += d4), t5.R = 16 * d4, t5.B = 8 * d4, d4 = (p5 = Ri[t5.L]) * t5.R, p5 = p5 / 2 * t5.B, t5.sa = l5, t5.ta = f5 + d4, t5.qa = t5.sa, t5.ra = t5.ta + 16 * s4 * t5.R + p5, t5.Ha = t5.qa, t5.Ia = t5.ra + 8 * s4 * t5.B + p5, t5.$c = 0, f5 += u5, t5.mb = h5 ? l5 : null, t5.nb = h5 ? f5 : null, e2(f5 + h5 <= t5.Fc + t5.Vb), $t2(t5), i33(t5.Ac, t5.Bc, 0, c6), s4 = 1;
            }
          }
          if (s4) {
            if (r3.ka = 0, r3.y = t5.sa, r3.O = t5.ta, r3.f = t5.qa, r3.N = t5.ra, r3.ea = t5.Ha, r3.Vd = t5.Ia, r3.fa = t5.R, r3.Rc = t5.B, r3.F = null, r3.J = 0, !Cn) {
              for (s4 = -255; 255 >= s4; ++s4) Pn[255 + s4] = 0 > s4 ? -s4 : s4;
              for (s4 = -1020; 1020 >= s4; ++s4) kn[1020 + s4] = -128 > s4 ? -128 : 127 < s4 ? 127 : s4;
              for (s4 = -112; 112 >= s4; ++s4) In[112 + s4] = -16 > s4 ? -16 : 15 < s4 ? 15 : s4;
              for (s4 = -255; 510 >= s4; ++s4) Fn[255 + s4] = 0 > s4 ? 0 : 255 < s4 ? 255 : s4;
              Cn = 1;
            }
            an = ue2, on = ae2, cn = oe2, un = se2, hn = ce2, sn = ie2, ln2 = Je, fn = Xe, dn = $e, pn = Qe, gn = Ke, mn = Ze, vn = tr, bn = er, yn = ze, wn = He, Nn = We, Ln = Ve, fi[0] = xe, fi[1] = le2, fi[2] = Le2, fi[3] = Ae, fi[4] = Se, fi[5] = Pe, fi[6] = _e, fi[7] = ke, fi[8] = Fe, fi[9] = Ie, li[0] = ve2, li[1] = de2, li[2] = pe2, li[3] = ge2, li[4] = be2, li[5] = ye2, li[6] = we2, di[0] = Be, di[1] = fe2, di[2] = Ce, di[3] = je, di[4] = Ee, di[5] = Me, di[6] = qe, s4 = 1;
          } else s4 = 0;
        }
        s4 && (s4 = function(t6, r4) {
          for (t6.M = 0; t6.M < t6.Va; ++t6.M) {
            var o4, s5 = t6.Jc[t6.M & t6.Xb], c7 = t6.m, u6 = t6;
            for (o4 = 0; o4 < u6.za; ++o4) {
              var h6 = c7, l6 = u6, f6 = l6.Ac, d5 = l6.Bc + 4 * o4, p6 = l6.zc, g5 = l6.ya[l6.aa + o4];
              if (l6.Qa.Bb ? g5.$b = k2(h6, l6.Pa.jb[0]) ? 2 + k2(h6, l6.Pa.jb[2]) : k2(h6, l6.Pa.jb[1]) : g5.$b = 0, l6.kc && (g5.Ad = k2(h6, l6.Bd)), g5.Za = !k2(h6, 145) + 0, g5.Za) {
                var m7 = g5.Ob, v6 = 0;
                for (l6 = 0; 4 > l6; ++l6) {
                  var b4, y5 = p6[0 + l6];
                  for (b4 = 0; 4 > b4; ++b4) {
                    y5 = ci[f6[d5 + b4]][y5];
                    for (var w4 = oi[k2(h6, y5[0])]; 0 < w4; ) w4 = oi[2 * w4 + k2(h6, y5[w4])];
                    y5 = -w4, f6[d5 + b4] = y5;
                  }
                  n3(m7, v6, f6, d5, 4), v6 += 4, p6[0 + l6] = y5;
                }
              } else y5 = k2(h6, 156) ? k2(h6, 128) ? 1 : 3 : k2(h6, 163) ? 2 : 0, g5.Ob[0] = y5, i33(f6, d5, y5, 4), i33(p6, 0, y5, 4);
              g5.Dd = k2(h6, 142) ? k2(h6, 114) ? k2(h6, 183) ? 1 : 3 : 2 : 0;
            }
            if (u6.m.Ka) return Jt2(t6, 7, "Premature end-of-partition0 encountered.");
            for (; t6.ja < t6.za; ++t6.ja) {
              if (u6 = s5, h6 = (c7 = t6).rb[c7.sb - 1], f6 = c7.rb[c7.sb + c7.ja], o4 = c7.ya[c7.aa + c7.ja], d5 = c7.kc ? o4.Ad : 0) h6.la = f6.la = 0, o4.Za || (h6.Na = f6.Na = 0), o4.Hc = 0, o4.Gc = 0, o4.ia = 0;
              else {
                var N5, L4;
                h6 = f6, f6 = u6, d5 = c7.Pa.Xc, p6 = c7.ya[c7.aa + c7.ja], g5 = c7.pb[p6.$b];
                if (l6 = p6.ad, m7 = 0, v6 = c7.rb[c7.sb - 1], y5 = b4 = 0, i33(l6, m7, 0, 384), p6.Za) var A4 = 0, x3 = d5[3];
                else {
                  w4 = a3(16);
                  var S3 = h6.Na + v6.Na;
                  if (S3 = ni(f6, d5[1], S3, g5.Eb, 0, w4, 0), h6.Na = v6.Na = (0 < S3) + 0, 1 < S3) an(w4, 0, l6, m7);
                  else {
                    var _4 = w4[0] + 3 >> 3;
                    for (w4 = 0; 256 > w4; w4 += 16) l6[m7 + w4] = _4;
                  }
                  A4 = 1, x3 = d5[0];
                }
                var P3 = 15 & h6.la, I3 = 15 & v6.la;
                for (w4 = 0; 4 > w4; ++w4) {
                  var F3 = 1 & I3;
                  for (_4 = L4 = 0; 4 > _4; ++_4) P3 = P3 >> 1 | (F3 = (S3 = ni(f6, x3, S3 = F3 + (1 & P3), g5.Sc, A4, l6, m7)) > A4) << 7, L4 = L4 << 2 | (3 < S3 ? 3 : 1 < S3 ? 2 : 0 != l6[m7 + 0]), m7 += 16;
                  P3 >>= 4, I3 = I3 >> 1 | F3 << 7, b4 = (b4 << 8 | L4) >>> 0;
                }
                for (x3 = P3, A4 = I3 >> 4, N5 = 0; 4 > N5; N5 += 2) {
                  for (L4 = 0, P3 = h6.la >> 4 + N5, I3 = v6.la >> 4 + N5, w4 = 0; 2 > w4; ++w4) {
                    for (F3 = 1 & I3, _4 = 0; 2 > _4; ++_4) S3 = F3 + (1 & P3), P3 = P3 >> 1 | (F3 = 0 < (S3 = ni(f6, d5[2], S3, g5.Qc, 0, l6, m7))) << 3, L4 = L4 << 2 | (3 < S3 ? 3 : 1 < S3 ? 2 : 0 != l6[m7 + 0]), m7 += 16;
                    P3 >>= 2, I3 = I3 >> 1 | F3 << 5;
                  }
                  y5 |= L4 << 4 * N5, x3 |= P3 << 4 << N5, A4 |= (240 & I3) << N5;
                }
                h6.la = x3, v6.la = A4, p6.Hc = b4, p6.Gc = y5, p6.ia = 43690 & y5 ? 0 : g5.ia, d5 = !(b4 | y5);
              }
              if (0 < c7.L && (c7.wa[c7.Y + c7.ja] = c7.gd[o4.$b][o4.Za], c7.wa[c7.Y + c7.ja].La |= !d5), u6.Ka) return Jt2(t6, 7, "Premature end-of-file encountered.");
            }
            if ($t2(t6), c7 = r4, u6 = 1, o4 = (s5 = t6).D, h6 = 0 < s5.L && s5.M >= s5.zb && s5.M <= s5.Va, 0 == s5.Aa) t: {
              if (o4.M = s5.M, o4.uc = h6, Or(s5, o4), u6 = 1, o4 = (L4 = s5.D).Nb, h6 = (y5 = Ri[s5.L]) * s5.R, f6 = y5 / 2 * s5.B, w4 = 16 * o4 * s5.R, _4 = 8 * o4 * s5.B, d5 = s5.sa, p6 = s5.ta - h6 + w4, g5 = s5.qa, l6 = s5.ra - f6 + _4, m7 = s5.Ha, v6 = s5.Ia - f6 + _4, I3 = 0 == (P3 = L4.M), b4 = P3 >= s5.Va - 1, 2 == s5.Aa && Or(s5, L4), L4.uc) for (F3 = (S3 = s5).D.M, e2(S3.D.uc), L4 = S3.yb; L4 < S3.Hb; ++L4) {
                A4 = L4, x3 = F3;
                var C3 = (j3 = (U3 = S3).D).Nb;
                N5 = U3.R;
                var j3 = j3.wa[j3.Y + A4], O4 = U3.sa, B3 = U3.ta + 16 * C3 * N5 + 16 * A4, M3 = j3.dd, E3 = j3.tc;
                if (0 != E3) if (e2(3 <= E3), 1 == U3.L) 0 < A4 && wn(O4, B3, N5, E3 + 4), j3.La && Ln(O4, B3, N5, E3), 0 < x3 && yn(O4, B3, N5, E3 + 4), j3.La && Nn(O4, B3, N5, E3);
                else {
                  var q3 = U3.B, D3 = U3.qa, R3 = U3.ra + 8 * C3 * q3 + 8 * A4, T4 = U3.Ha, U3 = U3.Ia + 8 * C3 * q3 + 8 * A4;
                  C3 = j3.ld;
                  0 < A4 && (fn(O4, B3, N5, E3 + 4, M3, C3), pn(D3, R3, T4, U3, q3, E3 + 4, M3, C3)), j3.La && (mn(O4, B3, N5, E3, M3, C3), bn(D3, R3, T4, U3, q3, E3, M3, C3)), 0 < x3 && (ln2(O4, B3, N5, E3 + 4, M3, C3), dn(D3, R3, T4, U3, q3, E3 + 4, M3, C3)), j3.La && (gn(O4, B3, N5, E3, M3, C3), vn(D3, R3, T4, U3, q3, E3, M3, C3));
                }
              }
              if (s5.ia && alert("todo:DitherRow"), null != c7.put) {
                if (L4 = 16 * P3, P3 = 16 * (P3 + 1), I3 ? (c7.y = s5.sa, c7.O = s5.ta + w4, c7.f = s5.qa, c7.N = s5.ra + _4, c7.ea = s5.Ha, c7.W = s5.Ia + _4) : (L4 -= y5, c7.y = d5, c7.O = p6, c7.f = g5, c7.N = l6, c7.ea = m7, c7.W = v6), b4 || (P3 -= y5), P3 > c7.o && (P3 = c7.o), c7.F = null, c7.J = null, null != s5.Fa && 0 < s5.Fa.length && L4 < P3 && (c7.J = lr(s5, c7, L4, P3 - L4), c7.F = s5.mb, null == c7.F && 0 == c7.F.length)) {
                  u6 = Jt2(s5, 3, "Could not decode alpha data.");
                  break t;
                }
                L4 < c7.j && (y5 = c7.j - L4, L4 = c7.j, e2(!(1 & y5)), c7.O += s5.R * y5, c7.N += s5.B * (y5 >> 1), c7.W += s5.B * (y5 >> 1), null != c7.F && (c7.J += c7.width * y5)), L4 < P3 && (c7.O += c7.v, c7.N += c7.v >> 1, c7.W += c7.v >> 1, null != c7.F && (c7.J += c7.v), c7.ka = L4 - c7.j, c7.U = c7.va - c7.v, c7.T = P3 - L4, u6 = c7.put(c7));
              }
              o4 + 1 != s5.Ic || b4 || (n3(s5.sa, s5.ta - h6, d5, p6 + 16 * s5.R, h6), n3(s5.qa, s5.ra - f6, g5, l6 + 8 * s5.B, f6), n3(s5.Ha, s5.Ia - f6, m7, v6 + 8 * s5.B, f6));
            }
            if (!u6) return Jt2(t6, 6, "Output aborted.");
          }
          return 1;
        }(t5, r3)), null != r3.bc && r3.bc(r3), s4 &= 1;
      }
      return s4 ? (t5.cb = 0, s4) : 0;
    }
    __name(Qt2, "Qt2");
    __name2(Qt2, "Qt");
    function te2(t5, e3, r3, n4, i4) {
      i4 = t5[e3 + r3 + 32 * n4] + (i4 >> 3), t5[e3 + r3 + 32 * n4] = -256 & i4 ? 0 > i4 ? 0 : 255 : i4;
    }
    __name(te2, "te2");
    __name2(te2, "te");
    function ee2(t5, e3, r3, n4, i4, a4) {
      te2(t5, e3, 0, r3, n4 + i4), te2(t5, e3, 1, r3, n4 + a4), te2(t5, e3, 2, r3, n4 - a4), te2(t5, e3, 3, r3, n4 - i4);
    }
    __name(ee2, "ee2");
    __name2(ee2, "ee");
    function re2(t5) {
      return (20091 * t5 >> 16) + t5;
    }
    __name(re2, "re2");
    __name2(re2, "re");
    function ne3(t5, e3, r3, n4) {
      var i4, o4 = 0, s4 = a3(16);
      for (i4 = 0; 4 > i4; ++i4) {
        var c6 = t5[e3 + 0] + t5[e3 + 8], u5 = t5[e3 + 0] - t5[e3 + 8], h5 = (35468 * t5[e3 + 4] >> 16) - re2(t5[e3 + 12]), l5 = re2(t5[e3 + 4]) + (35468 * t5[e3 + 12] >> 16);
        s4[o4 + 0] = c6 + l5, s4[o4 + 1] = u5 + h5, s4[o4 + 2] = u5 - h5, s4[o4 + 3] = c6 - l5, o4 += 4, e3++;
      }
      for (i4 = o4 = 0; 4 > i4; ++i4) c6 = (t5 = s4[o4 + 0] + 4) + s4[o4 + 8], u5 = t5 - s4[o4 + 8], h5 = (35468 * s4[o4 + 4] >> 16) - re2(s4[o4 + 12]), te2(r3, n4, 0, 0, c6 + (l5 = re2(s4[o4 + 4]) + (35468 * s4[o4 + 12] >> 16))), te2(r3, n4, 1, 0, u5 + h5), te2(r3, n4, 2, 0, u5 - h5), te2(r3, n4, 3, 0, c6 - l5), o4++, n4 += 32;
    }
    __name(ne3, "ne3");
    __name2(ne3, "ne");
    function ie2(t5, e3, r3, n4) {
      var i4 = t5[e3 + 0] + 4, a4 = 35468 * t5[e3 + 4] >> 16, o4 = re2(t5[e3 + 4]), s4 = 35468 * t5[e3 + 1] >> 16;
      ee2(r3, n4, 0, i4 + o4, t5 = re2(t5[e3 + 1]), s4), ee2(r3, n4, 1, i4 + a4, t5, s4), ee2(r3, n4, 2, i4 - a4, t5, s4), ee2(r3, n4, 3, i4 - o4, t5, s4);
    }
    __name(ie2, "ie2");
    __name2(ie2, "ie");
    function ae2(t5, e3, r3, n4, i4) {
      ne3(t5, e3, r3, n4), i4 && ne3(t5, e3 + 16, r3, n4 + 4);
    }
    __name(ae2, "ae2");
    __name2(ae2, "ae");
    function oe2(t5, e3, r3, n4) {
      on(t5, e3 + 0, r3, n4, 1), on(t5, e3 + 32, r3, n4 + 128, 1);
    }
    __name(oe2, "oe2");
    __name2(oe2, "oe");
    function se2(t5, e3, r3, n4) {
      var i4;
      for (t5 = t5[e3 + 0] + 4, i4 = 0; 4 > i4; ++i4) for (e3 = 0; 4 > e3; ++e3) te2(r3, n4, e3, i4, t5);
    }
    __name(se2, "se2");
    __name2(se2, "se");
    function ce2(t5, e3, r3, n4) {
      t5[e3 + 0] && un(t5, e3 + 0, r3, n4), t5[e3 + 16] && un(t5, e3 + 16, r3, n4 + 4), t5[e3 + 32] && un(t5, e3 + 32, r3, n4 + 128), t5[e3 + 48] && un(t5, e3 + 48, r3, n4 + 128 + 4);
    }
    __name(ce2, "ce2");
    __name2(ce2, "ce");
    function ue2(t5, e3, r3, n4) {
      var i4, o4 = a3(16);
      for (i4 = 0; 4 > i4; ++i4) {
        var s4 = t5[e3 + 0 + i4] + t5[e3 + 12 + i4], c6 = t5[e3 + 4 + i4] + t5[e3 + 8 + i4], u5 = t5[e3 + 4 + i4] - t5[e3 + 8 + i4], h5 = t5[e3 + 0 + i4] - t5[e3 + 12 + i4];
        o4[0 + i4] = s4 + c6, o4[8 + i4] = s4 - c6, o4[4 + i4] = h5 + u5, o4[12 + i4] = h5 - u5;
      }
      for (i4 = 0; 4 > i4; ++i4) s4 = (t5 = o4[0 + 4 * i4] + 3) + o4[3 + 4 * i4], c6 = o4[1 + 4 * i4] + o4[2 + 4 * i4], u5 = o4[1 + 4 * i4] - o4[2 + 4 * i4], h5 = t5 - o4[3 + 4 * i4], r3[n4 + 0] = s4 + c6 >> 3, r3[n4 + 16] = h5 + u5 >> 3, r3[n4 + 32] = s4 - c6 >> 3, r3[n4 + 48] = h5 - u5 >> 3, n4 += 64;
    }
    __name(ue2, "ue2");
    __name2(ue2, "ue");
    function he2(t5, e3, r3) {
      var n4, i4 = e3 - 32, a4 = Bn, o4 = 255 - t5[i4 - 1];
      for (n4 = 0; n4 < r3; ++n4) {
        var s4, c6 = a4, u5 = o4 + t5[e3 - 1];
        for (s4 = 0; s4 < r3; ++s4) t5[e3 + s4] = c6[u5 + t5[i4 + s4]];
        e3 += 32;
      }
    }
    __name(he2, "he2");
    __name2(he2, "he");
    function le2(t5, e3) {
      he2(t5, e3, 4);
    }
    __name(le2, "le2");
    __name2(le2, "le");
    function fe2(t5, e3) {
      he2(t5, e3, 8);
    }
    __name(fe2, "fe2");
    __name2(fe2, "fe");
    function de2(t5, e3) {
      he2(t5, e3, 16);
    }
    __name(de2, "de2");
    __name2(de2, "de");
    function pe2(t5, e3) {
      var r3;
      for (r3 = 0; 16 > r3; ++r3) n3(t5, e3 + 32 * r3, t5, e3 - 32, 16);
    }
    __name(pe2, "pe2");
    __name2(pe2, "pe");
    function ge2(t5, e3) {
      var r3;
      for (r3 = 16; 0 < r3; --r3) i33(t5, e3, t5[e3 - 1], 16), e3 += 32;
    }
    __name(ge2, "ge2");
    __name2(ge2, "ge");
    function me2(t5, e3, r3) {
      var n4;
      for (n4 = 0; 16 > n4; ++n4) i33(e3, r3 + 32 * n4, t5, 16);
    }
    __name(me2, "me2");
    __name2(me2, "me");
    function ve2(t5, e3) {
      var r3, n4 = 16;
      for (r3 = 0; 16 > r3; ++r3) n4 += t5[e3 - 1 + 32 * r3] + t5[e3 + r3 - 32];
      me2(n4 >> 5, t5, e3);
    }
    __name(ve2, "ve2");
    __name2(ve2, "ve");
    function be2(t5, e3) {
      var r3, n4 = 8;
      for (r3 = 0; 16 > r3; ++r3) n4 += t5[e3 - 1 + 32 * r3];
      me2(n4 >> 4, t5, e3);
    }
    __name(be2, "be2");
    __name2(be2, "be");
    function ye2(t5, e3) {
      var r3, n4 = 8;
      for (r3 = 0; 16 > r3; ++r3) n4 += t5[e3 + r3 - 32];
      me2(n4 >> 4, t5, e3);
    }
    __name(ye2, "ye2");
    __name2(ye2, "ye");
    function we2(t5, e3) {
      me2(128, t5, e3);
    }
    __name(we2, "we2");
    __name2(we2, "we");
    function Ne2(t5, e3, r3) {
      return t5 + 2 * e3 + r3 + 2 >> 2;
    }
    __name(Ne2, "Ne2");
    __name2(Ne2, "Ne");
    function Le2(t5, e3) {
      var r3, i4 = e3 - 32;
      i4 = new Uint8Array([Ne2(t5[i4 - 1], t5[i4 + 0], t5[i4 + 1]), Ne2(t5[i4 + 0], t5[i4 + 1], t5[i4 + 2]), Ne2(t5[i4 + 1], t5[i4 + 2], t5[i4 + 3]), Ne2(t5[i4 + 2], t5[i4 + 3], t5[i4 + 4])]);
      for (r3 = 0; 4 > r3; ++r3) n3(t5, e3 + 32 * r3, i4, 0, i4.length);
    }
    __name(Le2, "Le2");
    __name2(Le2, "Le");
    function Ae(t5, e3) {
      var r3 = t5[e3 - 1], n4 = t5[e3 - 1 + 32], i4 = t5[e3 - 1 + 64], a4 = t5[e3 - 1 + 96];
      I2(t5, e3 + 0, 16843009 * Ne2(t5[e3 - 1 - 32], r3, n4)), I2(t5, e3 + 32, 16843009 * Ne2(r3, n4, i4)), I2(t5, e3 + 64, 16843009 * Ne2(n4, i4, a4)), I2(t5, e3 + 96, 16843009 * Ne2(i4, a4, a4));
    }
    __name(Ae, "Ae");
    __name2(Ae, "Ae");
    function xe(t5, e3) {
      var r3, n4 = 4;
      for (r3 = 0; 4 > r3; ++r3) n4 += t5[e3 + r3 - 32] + t5[e3 - 1 + 32 * r3];
      for (n4 >>= 3, r3 = 0; 4 > r3; ++r3) i33(t5, e3 + 32 * r3, n4, 4);
    }
    __name(xe, "xe");
    __name2(xe, "xe");
    function Se(t5, e3) {
      var r3 = t5[e3 - 1 + 0], n4 = t5[e3 - 1 + 32], i4 = t5[e3 - 1 + 64], a4 = t5[e3 - 1 - 32], o4 = t5[e3 + 0 - 32], s4 = t5[e3 + 1 - 32], c6 = t5[e3 + 2 - 32], u5 = t5[e3 + 3 - 32];
      t5[e3 + 0 + 96] = Ne2(n4, i4, t5[e3 - 1 + 96]), t5[e3 + 1 + 96] = t5[e3 + 0 + 64] = Ne2(r3, n4, i4), t5[e3 + 2 + 96] = t5[e3 + 1 + 64] = t5[e3 + 0 + 32] = Ne2(a4, r3, n4), t5[e3 + 3 + 96] = t5[e3 + 2 + 64] = t5[e3 + 1 + 32] = t5[e3 + 0 + 0] = Ne2(o4, a4, r3), t5[e3 + 3 + 64] = t5[e3 + 2 + 32] = t5[e3 + 1 + 0] = Ne2(s4, o4, a4), t5[e3 + 3 + 32] = t5[e3 + 2 + 0] = Ne2(c6, s4, o4), t5[e3 + 3 + 0] = Ne2(u5, c6, s4);
    }
    __name(Se, "Se");
    __name2(Se, "Se");
    function _e(t5, e3) {
      var r3 = t5[e3 + 1 - 32], n4 = t5[e3 + 2 - 32], i4 = t5[e3 + 3 - 32], a4 = t5[e3 + 4 - 32], o4 = t5[e3 + 5 - 32], s4 = t5[e3 + 6 - 32], c6 = t5[e3 + 7 - 32];
      t5[e3 + 0 + 0] = Ne2(t5[e3 + 0 - 32], r3, n4), t5[e3 + 1 + 0] = t5[e3 + 0 + 32] = Ne2(r3, n4, i4), t5[e3 + 2 + 0] = t5[e3 + 1 + 32] = t5[e3 + 0 + 64] = Ne2(n4, i4, a4), t5[e3 + 3 + 0] = t5[e3 + 2 + 32] = t5[e3 + 1 + 64] = t5[e3 + 0 + 96] = Ne2(i4, a4, o4), t5[e3 + 3 + 32] = t5[e3 + 2 + 64] = t5[e3 + 1 + 96] = Ne2(a4, o4, s4), t5[e3 + 3 + 64] = t5[e3 + 2 + 96] = Ne2(o4, s4, c6), t5[e3 + 3 + 96] = Ne2(s4, c6, c6);
    }
    __name(_e, "_e");
    __name2(_e, "_e");
    function Pe(t5, e3) {
      var r3 = t5[e3 - 1 + 0], n4 = t5[e3 - 1 + 32], i4 = t5[e3 - 1 + 64], a4 = t5[e3 - 1 - 32], o4 = t5[e3 + 0 - 32], s4 = t5[e3 + 1 - 32], c6 = t5[e3 + 2 - 32], u5 = t5[e3 + 3 - 32];
      t5[e3 + 0 + 0] = t5[e3 + 1 + 64] = a4 + o4 + 1 >> 1, t5[e3 + 1 + 0] = t5[e3 + 2 + 64] = o4 + s4 + 1 >> 1, t5[e3 + 2 + 0] = t5[e3 + 3 + 64] = s4 + c6 + 1 >> 1, t5[e3 + 3 + 0] = c6 + u5 + 1 >> 1, t5[e3 + 0 + 96] = Ne2(i4, n4, r3), t5[e3 + 0 + 64] = Ne2(n4, r3, a4), t5[e3 + 0 + 32] = t5[e3 + 1 + 96] = Ne2(r3, a4, o4), t5[e3 + 1 + 32] = t5[e3 + 2 + 96] = Ne2(a4, o4, s4), t5[e3 + 2 + 32] = t5[e3 + 3 + 96] = Ne2(o4, s4, c6), t5[e3 + 3 + 32] = Ne2(s4, c6, u5);
    }
    __name(Pe, "Pe");
    __name2(Pe, "Pe");
    function ke(t5, e3) {
      var r3 = t5[e3 + 0 - 32], n4 = t5[e3 + 1 - 32], i4 = t5[e3 + 2 - 32], a4 = t5[e3 + 3 - 32], o4 = t5[e3 + 4 - 32], s4 = t5[e3 + 5 - 32], c6 = t5[e3 + 6 - 32], u5 = t5[e3 + 7 - 32];
      t5[e3 + 0 + 0] = r3 + n4 + 1 >> 1, t5[e3 + 1 + 0] = t5[e3 + 0 + 64] = n4 + i4 + 1 >> 1, t5[e3 + 2 + 0] = t5[e3 + 1 + 64] = i4 + a4 + 1 >> 1, t5[e3 + 3 + 0] = t5[e3 + 2 + 64] = a4 + o4 + 1 >> 1, t5[e3 + 0 + 32] = Ne2(r3, n4, i4), t5[e3 + 1 + 32] = t5[e3 + 0 + 96] = Ne2(n4, i4, a4), t5[e3 + 2 + 32] = t5[e3 + 1 + 96] = Ne2(i4, a4, o4), t5[e3 + 3 + 32] = t5[e3 + 2 + 96] = Ne2(a4, o4, s4), t5[e3 + 3 + 64] = Ne2(o4, s4, c6), t5[e3 + 3 + 96] = Ne2(s4, c6, u5);
    }
    __name(ke, "ke");
    __name2(ke, "ke");
    function Ie(t5, e3) {
      var r3 = t5[e3 - 1 + 0], n4 = t5[e3 - 1 + 32], i4 = t5[e3 - 1 + 64], a4 = t5[e3 - 1 + 96];
      t5[e3 + 0 + 0] = r3 + n4 + 1 >> 1, t5[e3 + 2 + 0] = t5[e3 + 0 + 32] = n4 + i4 + 1 >> 1, t5[e3 + 2 + 32] = t5[e3 + 0 + 64] = i4 + a4 + 1 >> 1, t5[e3 + 1 + 0] = Ne2(r3, n4, i4), t5[e3 + 3 + 0] = t5[e3 + 1 + 32] = Ne2(n4, i4, a4), t5[e3 + 3 + 32] = t5[e3 + 1 + 64] = Ne2(i4, a4, a4), t5[e3 + 3 + 64] = t5[e3 + 2 + 64] = t5[e3 + 0 + 96] = t5[e3 + 1 + 96] = t5[e3 + 2 + 96] = t5[e3 + 3 + 96] = a4;
    }
    __name(Ie, "Ie");
    __name2(Ie, "Ie");
    function Fe(t5, e3) {
      var r3 = t5[e3 - 1 + 0], n4 = t5[e3 - 1 + 32], i4 = t5[e3 - 1 + 64], a4 = t5[e3 - 1 + 96], o4 = t5[e3 - 1 - 32], s4 = t5[e3 + 0 - 32], c6 = t5[e3 + 1 - 32], u5 = t5[e3 + 2 - 32];
      t5[e3 + 0 + 0] = t5[e3 + 2 + 32] = r3 + o4 + 1 >> 1, t5[e3 + 0 + 32] = t5[e3 + 2 + 64] = n4 + r3 + 1 >> 1, t5[e3 + 0 + 64] = t5[e3 + 2 + 96] = i4 + n4 + 1 >> 1, t5[e3 + 0 + 96] = a4 + i4 + 1 >> 1, t5[e3 + 3 + 0] = Ne2(s4, c6, u5), t5[e3 + 2 + 0] = Ne2(o4, s4, c6), t5[e3 + 1 + 0] = t5[e3 + 3 + 32] = Ne2(r3, o4, s4), t5[e3 + 1 + 32] = t5[e3 + 3 + 64] = Ne2(n4, r3, o4), t5[e3 + 1 + 64] = t5[e3 + 3 + 96] = Ne2(i4, n4, r3), t5[e3 + 1 + 96] = Ne2(a4, i4, n4);
    }
    __name(Fe, "Fe");
    __name2(Fe, "Fe");
    function Ce(t5, e3) {
      var r3;
      for (r3 = 0; 8 > r3; ++r3) n3(t5, e3 + 32 * r3, t5, e3 - 32, 8);
    }
    __name(Ce, "Ce");
    __name2(Ce, "Ce");
    function je(t5, e3) {
      var r3;
      for (r3 = 0; 8 > r3; ++r3) i33(t5, e3, t5[e3 - 1], 8), e3 += 32;
    }
    __name(je, "je");
    __name2(je, "je");
    function Oe(t5, e3, r3) {
      var n4;
      for (n4 = 0; 8 > n4; ++n4) i33(e3, r3 + 32 * n4, t5, 8);
    }
    __name(Oe, "Oe");
    __name2(Oe, "Oe");
    function Be(t5, e3) {
      var r3, n4 = 8;
      for (r3 = 0; 8 > r3; ++r3) n4 += t5[e3 + r3 - 32] + t5[e3 - 1 + 32 * r3];
      Oe(n4 >> 4, t5, e3);
    }
    __name(Be, "Be");
    __name2(Be, "Be");
    function Me(t5, e3) {
      var r3, n4 = 4;
      for (r3 = 0; 8 > r3; ++r3) n4 += t5[e3 + r3 - 32];
      Oe(n4 >> 3, t5, e3);
    }
    __name(Me, "Me");
    __name2(Me, "Me");
    function Ee(t5, e3) {
      var r3, n4 = 4;
      for (r3 = 0; 8 > r3; ++r3) n4 += t5[e3 - 1 + 32 * r3];
      Oe(n4 >> 3, t5, e3);
    }
    __name(Ee, "Ee");
    __name2(Ee, "Ee");
    function qe(t5, e3) {
      Oe(128, t5, e3);
    }
    __name(qe, "qe");
    __name2(qe, "qe");
    function De(t5, e3, r3) {
      var n4 = t5[e3 - r3], i4 = t5[e3 + 0], a4 = 3 * (i4 - n4) + jn[1020 + t5[e3 - 2 * r3] - t5[e3 + r3]], o4 = On[112 + (a4 + 4 >> 3)];
      t5[e3 - r3] = Bn[255 + n4 + On[112 + (a4 + 3 >> 3)]], t5[e3 + 0] = Bn[255 + i4 - o4];
    }
    __name(De, "De");
    __name2(De, "De");
    function Re(t5, e3, r3, n4) {
      var i4 = t5[e3 + 0], a4 = t5[e3 + r3];
      return Mn[255 + t5[e3 - 2 * r3] - t5[e3 - r3]] > n4 || Mn[255 + a4 - i4] > n4;
    }
    __name(Re, "Re");
    __name2(Re, "Re");
    function Te(t5, e3, r3, n4) {
      return 4 * Mn[255 + t5[e3 - r3] - t5[e3 + 0]] + Mn[255 + t5[e3 - 2 * r3] - t5[e3 + r3]] <= n4;
    }
    __name(Te, "Te");
    __name2(Te, "Te");
    function Ue(t5, e3, r3, n4, i4) {
      var a4 = t5[e3 - 3 * r3], o4 = t5[e3 - 2 * r3], s4 = t5[e3 - r3], c6 = t5[e3 + 0], u5 = t5[e3 + r3], h5 = t5[e3 + 2 * r3], l5 = t5[e3 + 3 * r3];
      return 4 * Mn[255 + s4 - c6] + Mn[255 + o4 - u5] > n4 ? 0 : Mn[255 + t5[e3 - 4 * r3] - a4] <= i4 && Mn[255 + a4 - o4] <= i4 && Mn[255 + o4 - s4] <= i4 && Mn[255 + l5 - h5] <= i4 && Mn[255 + h5 - u5] <= i4 && Mn[255 + u5 - c6] <= i4;
    }
    __name(Ue, "Ue");
    __name2(Ue, "Ue");
    function ze(t5, e3, r3, n4) {
      var i4 = 2 * n4 + 1;
      for (n4 = 0; 16 > n4; ++n4) Te(t5, e3 + n4, r3, i4) && De(t5, e3 + n4, r3);
    }
    __name(ze, "ze");
    __name2(ze, "ze");
    function He(t5, e3, r3, n4) {
      var i4 = 2 * n4 + 1;
      for (n4 = 0; 16 > n4; ++n4) Te(t5, e3 + n4 * r3, 1, i4) && De(t5, e3 + n4 * r3, 1);
    }
    __name(He, "He");
    __name2(He, "He");
    function We(t5, e3, r3, n4) {
      var i4;
      for (i4 = 3; 0 < i4; --i4) ze(t5, e3 += 4 * r3, r3, n4);
    }
    __name(We, "We");
    __name2(We, "We");
    function Ve(t5, e3, r3, n4) {
      var i4;
      for (i4 = 3; 0 < i4; --i4) He(t5, e3 += 4, r3, n4);
    }
    __name(Ve, "Ve");
    __name2(Ve, "Ve");
    function Ge(t5, e3, r3, n4, i4, a4, o4, s4) {
      for (a4 = 2 * a4 + 1; 0 < i4--; ) {
        if (Ue(t5, e3, r3, a4, o4)) if (Re(t5, e3, r3, s4)) De(t5, e3, r3);
        else {
          var c6 = t5, u5 = e3, h5 = r3, l5 = c6[u5 - 2 * h5], f5 = c6[u5 - h5], d4 = c6[u5 + 0], p5 = c6[u5 + h5], g4 = c6[u5 + 2 * h5], m6 = 27 * (b4 = jn[1020 + 3 * (d4 - f5) + jn[1020 + l5 - p5]]) + 63 >> 7, v5 = 18 * b4 + 63 >> 7, b4 = 9 * b4 + 63 >> 7;
          c6[u5 - 3 * h5] = Bn[255 + c6[u5 - 3 * h5] + b4], c6[u5 - 2 * h5] = Bn[255 + l5 + v5], c6[u5 - h5] = Bn[255 + f5 + m6], c6[u5 + 0] = Bn[255 + d4 - m6], c6[u5 + h5] = Bn[255 + p5 - v5], c6[u5 + 2 * h5] = Bn[255 + g4 - b4];
        }
        e3 += n4;
      }
    }
    __name(Ge, "Ge");
    __name2(Ge, "Ge");
    function Ye(t5, e3, r3, n4, i4, a4, o4, s4) {
      for (a4 = 2 * a4 + 1; 0 < i4--; ) {
        if (Ue(t5, e3, r3, a4, o4)) if (Re(t5, e3, r3, s4)) De(t5, e3, r3);
        else {
          var c6 = t5, u5 = e3, h5 = r3, l5 = c6[u5 - h5], f5 = c6[u5 + 0], d4 = c6[u5 + h5], p5 = On[112 + ((g4 = 3 * (f5 - l5)) + 4 >> 3)], g4 = On[112 + (g4 + 3 >> 3)], m6 = p5 + 1 >> 1;
          c6[u5 - 2 * h5] = Bn[255 + c6[u5 - 2 * h5] + m6], c6[u5 - h5] = Bn[255 + l5 + g4], c6[u5 + 0] = Bn[255 + f5 - p5], c6[u5 + h5] = Bn[255 + d4 - m6];
        }
        e3 += n4;
      }
    }
    __name(Ye, "Ye");
    __name2(Ye, "Ye");
    function Je(t5, e3, r3, n4, i4, a4) {
      Ge(t5, e3, r3, 1, 16, n4, i4, a4);
    }
    __name(Je, "Je");
    __name2(Je, "Je");
    function Xe(t5, e3, r3, n4, i4, a4) {
      Ge(t5, e3, 1, r3, 16, n4, i4, a4);
    }
    __name(Xe, "Xe");
    __name2(Xe, "Xe");
    function Ke(t5, e3, r3, n4, i4, a4) {
      var o4;
      for (o4 = 3; 0 < o4; --o4) Ye(t5, e3 += 4 * r3, r3, 1, 16, n4, i4, a4);
    }
    __name(Ke, "Ke");
    __name2(Ke, "Ke");
    function Ze(t5, e3, r3, n4, i4, a4) {
      var o4;
      for (o4 = 3; 0 < o4; --o4) Ye(t5, e3 += 4, 1, r3, 16, n4, i4, a4);
    }
    __name(Ze, "Ze");
    __name2(Ze, "Ze");
    function $e(t5, e3, r3, n4, i4, a4, o4, s4) {
      Ge(t5, e3, i4, 1, 8, a4, o4, s4), Ge(r3, n4, i4, 1, 8, a4, o4, s4);
    }
    __name($e, "$e");
    __name2($e, "$e");
    function Qe(t5, e3, r3, n4, i4, a4, o4, s4) {
      Ge(t5, e3, 1, i4, 8, a4, o4, s4), Ge(r3, n4, 1, i4, 8, a4, o4, s4);
    }
    __name(Qe, "Qe");
    __name2(Qe, "Qe");
    function tr(t5, e3, r3, n4, i4, a4, o4, s4) {
      Ye(t5, e3 + 4 * i4, i4, 1, 8, a4, o4, s4), Ye(r3, n4 + 4 * i4, i4, 1, 8, a4, o4, s4);
    }
    __name(tr, "tr");
    __name2(tr, "tr");
    function er(t5, e3, r3, n4, i4, a4, o4, s4) {
      Ye(t5, e3 + 4, 1, i4, 8, a4, o4, s4), Ye(r3, n4 + 4, 1, i4, 8, a4, o4, s4);
    }
    __name(er, "er");
    __name2(er, "er");
    function rr() {
      this.ba = new ot2(), this.ec = [], this.cc = [], this.Mc = [], this.Dc = this.Nc = this.dc = this.fc = 0, this.Oa = new ct2(), this.memory = 0, this.Ib = "OutputFunc", this.Jb = "OutputAlphaFunc", this.Nd = "OutputRowFunc";
    }
    __name(rr, "rr");
    __name2(rr, "rr");
    function nr() {
      this.data = [], this.offset = this.kd = this.ha = this.w = 0, this.na = [], this.xa = this.gb = this.Ja = this.Sa = this.P = 0;
    }
    __name(nr, "nr");
    __name2(nr, "nr");
    function ir() {
      this.nc = this.Ea = this.b = this.hc = 0, this.K = [], this.w = 0;
    }
    __name(ir, "ir");
    __name2(ir, "ir");
    function ar() {
      this.ua = 0, this.Wa = new M2(), this.vb = new M2(), this.md = this.xc = this.wc = 0, this.vc = [], this.Wb = 0, this.Ya = new d3(), this.yc = new l4();
    }
    __name(ar, "ar");
    __name2(ar, "ar");
    function or2() {
      this.xb = this.a = 0, this.l = new Gt2(), this.ca = new ot2(), this.V = [], this.Ba = 0, this.Ta = [], this.Ua = 0, this.m = new N4(), this.Pb = 0, this.wd = new N4(), this.Ma = this.$ = this.C = this.i = this.c = this.xd = 0, this.s = new ar(), this.ab = 0, this.gc = o3(4, ir), this.Oc = 0;
    }
    __name(or2, "or2");
    __name2(or2, "or");
    function sr() {
      this.Lc = this.Z = this.$a = this.i = this.c = 0, this.l = new Gt2(), this.ic = 0, this.ca = [], this.tb = 0, this.qd = null, this.rd = 0;
    }
    __name(sr, "sr");
    __name2(sr, "sr");
    function cr(t5, e3, r3, n4, i4, a4, o4) {
      for (t5 = null == t5 ? 0 : t5[e3 + 0], e3 = 0; e3 < o4; ++e3) i4[a4 + e3] = t5 + r3[n4 + e3] & 255, t5 = i4[a4 + e3];
    }
    __name(cr, "cr");
    __name2(cr, "cr");
    function ur(t5, e3, r3, n4, i4, a4, o4) {
      var s4;
      if (null == t5) cr(null, null, r3, n4, i4, a4, o4);
      else for (s4 = 0; s4 < o4; ++s4) i4[a4 + s4] = t5[e3 + s4] + r3[n4 + s4] & 255;
    }
    __name(ur, "ur");
    __name2(ur, "ur");
    function hr(t5, e3, r3, n4, i4, a4, o4) {
      if (null == t5) cr(null, null, r3, n4, i4, a4, o4);
      else {
        var s4, c6 = t5[e3 + 0], u5 = c6, h5 = c6;
        for (s4 = 0; s4 < o4; ++s4) u5 = h5 + (c6 = t5[e3 + s4]) - u5, h5 = r3[n4 + s4] + (-256 & u5 ? 0 > u5 ? 0 : 255 : u5) & 255, u5 = c6, i4[a4 + s4] = h5;
      }
    }
    __name(hr, "hr");
    __name2(hr, "hr");
    function lr(t5, r3, i4, o4) {
      var s4 = r3.width, c6 = r3.o;
      if (e2(null != t5 && null != r3), 0 > i4 || 0 >= o4 || i4 + o4 > c6) return null;
      if (!t5.Cc) {
        if (null == t5.ga) {
          var u5;
          if (t5.ga = new sr(), (u5 = null == t5.ga) || (u5 = r3.width * r3.o, e2(0 == t5.Gb.length), t5.Gb = a3(u5), t5.Uc = 0, null == t5.Gb ? u5 = 0 : (t5.mb = t5.Gb, t5.nb = t5.Uc, t5.rc = null, u5 = 1), u5 = !u5), !u5) {
            u5 = t5.ga;
            var h5 = t5.Fa, l5 = t5.P, f5 = t5.qc, d4 = t5.mb, p5 = t5.nb, g4 = l5 + 1, m6 = f5 - 1, b4 = u5.l;
            if (e2(null != h5 && null != d4 && null != r3), mi[0] = null, mi[1] = cr, mi[2] = ur, mi[3] = hr, u5.ca = d4, u5.tb = p5, u5.c = r3.width, u5.i = r3.height, e2(0 < u5.c && 0 < u5.i), 1 >= f5) r3 = 0;
            else if (u5.$a = h5[l5 + 0] >> 0 & 3, u5.Z = h5[l5 + 0] >> 2 & 3, u5.Lc = h5[l5 + 0] >> 4 & 3, l5 = h5[l5 + 0] >> 6 & 3, 0 > u5.$a || 1 < u5.$a || 4 <= u5.Z || 1 < u5.Lc || l5) r3 = 0;
            else if (b4.put = dt2, b4.ac = ft2, b4.bc = pt2, b4.ma = u5, b4.width = r3.width, b4.height = r3.height, b4.Da = r3.Da, b4.v = r3.v, b4.va = r3.va, b4.j = r3.j, b4.o = r3.o, u5.$a) t: {
              e2(1 == u5.$a), r3 = kt2();
              e: for (; ; ) {
                if (null == r3) {
                  r3 = 0;
                  break t;
                }
                if (e2(null != u5), u5.mc = r3, r3.c = u5.c, r3.i = u5.i, r3.l = u5.l, r3.l.ma = u5, r3.l.width = u5.c, r3.l.height = u5.i, r3.a = 0, v4(r3.m, h5, g4, m6), !It2(u5.c, u5.i, 1, r3, null)) break e;
                if (1 == r3.ab && 3 == r3.gc[0].hc && At2(r3.s) ? (u5.ic = 1, h5 = r3.c * r3.i, r3.Ta = null, r3.Ua = 0, r3.V = a3(h5), r3.Ba = 0, null == r3.V ? (r3.a = 1, r3 = 0) : r3 = 1) : (u5.ic = 0, r3 = Ft2(r3, u5.c)), !r3) break e;
                r3 = 1;
                break t;
              }
              u5.mc = null, r3 = 0;
            }
            else r3 = m6 >= u5.c * u5.i;
            u5 = !r3;
          }
          if (u5) return null;
          1 != t5.ga.Lc ? t5.Ga = 0 : o4 = c6 - i4;
        }
        e2(null != t5.ga), e2(i4 + o4 <= c6);
        t: {
          if (r3 = (h5 = t5.ga).c, c6 = h5.l.o, 0 == h5.$a) {
            if (g4 = t5.rc, m6 = t5.Vc, b4 = t5.Fa, l5 = t5.P + 1 + i4 * r3, f5 = t5.mb, d4 = t5.nb + i4 * r3, e2(l5 <= t5.P + t5.qc), 0 != h5.Z) for (e2(null != mi[h5.Z]), u5 = 0; u5 < o4; ++u5) mi[h5.Z](g4, m6, b4, l5, f5, d4, r3), g4 = f5, m6 = d4, d4 += r3, l5 += r3;
            else for (u5 = 0; u5 < o4; ++u5) n3(f5, d4, b4, l5, r3), g4 = f5, m6 = d4, d4 += r3, l5 += r3;
            t5.rc = g4, t5.Vc = m6;
          } else {
            if (e2(null != h5.mc), r3 = i4 + o4, e2(null != (u5 = h5.mc)), e2(r3 <= u5.i), u5.C >= r3) r3 = 1;
            else if (h5.ic || mr(), h5.ic) {
              h5 = u5.V, g4 = u5.Ba, m6 = u5.c;
              var y5 = u5.i, w4 = (b4 = 1, l5 = u5.$ / m6, f5 = u5.$ % m6, d4 = u5.m, p5 = u5.s, u5.$), N5 = m6 * y5, L4 = m6 * r3, x3 = p5.wc, _4 = w4 < L4 ? wt2(p5, f5, l5) : null;
              e2(w4 <= N5), e2(r3 <= y5), e2(At2(p5));
              e: for (; ; ) {
                for (; !d4.h && w4 < L4; ) {
                  if (f5 & x3 || (_4 = wt2(p5, f5, l5)), e2(null != _4), S2(d4), 256 > (y5 = bt2(_4.G[0], _4.H[0], d4))) h5[g4 + w4] = y5, ++w4, ++f5 >= m6 && (f5 = 0, ++l5 <= r3 && !(l5 % 16) && St2(u5, l5));
                  else {
                    if (!(280 > y5)) {
                      b4 = 0;
                      break e;
                    }
                    y5 = mt2(y5 - 256, d4);
                    var P3, k3 = bt2(_4.G[4], _4.H[4], d4);
                    if (S2(d4), !(w4 >= (k3 = vt2(m6, k3 = mt2(k3, d4))) && N5 - w4 >= y5)) {
                      b4 = 0;
                      break e;
                    }
                    for (P3 = 0; P3 < y5; ++P3) h5[g4 + w4 + P3] = h5[g4 + w4 + P3 - k3];
                    for (w4 += y5, f5 += y5; f5 >= m6; ) f5 -= m6, ++l5 <= r3 && !(l5 % 16) && St2(u5, l5);
                    w4 < L4 && f5 & x3 && (_4 = wt2(p5, f5, l5));
                  }
                  e2(d4.h == A3(d4));
                }
                St2(u5, l5 > r3 ? r3 : l5);
                break e;
              }
              !b4 || d4.h && w4 < N5 ? (b4 = 0, u5.a = d4.h ? 5 : 3) : u5.$ = w4, r3 = b4;
            } else r3 = _t2(u5, u5.V, u5.Ba, u5.c, u5.i, r3, Ct2);
            if (!r3) {
              o4 = 0;
              break t;
            }
          }
          i4 + o4 >= c6 && (t5.Cc = 1), o4 = 1;
        }
        if (!o4) return null;
        if (t5.Cc && (null != (o4 = t5.ga) && (o4.mc = null), t5.ga = null, 0 < t5.Ga)) return alert("todo:WebPDequantizeLevels"), null;
      }
      return t5.nb + i4 * s4;
    }
    __name(lr, "lr");
    __name2(lr, "lr");
    function fr(t5, e3, r3, n4, i4, a4) {
      for (; 0 < i4--; ) {
        var o4, s4 = t5, c6 = e3 + (r3 ? 1 : 0), u5 = t5, h5 = e3 + (r3 ? 0 : 3);
        for (o4 = 0; o4 < n4; ++o4) {
          var l5 = u5[h5 + 4 * o4];
          255 != l5 && (l5 *= 32897, s4[c6 + 4 * o4 + 0] = s4[c6 + 4 * o4 + 0] * l5 >> 23, s4[c6 + 4 * o4 + 1] = s4[c6 + 4 * o4 + 1] * l5 >> 23, s4[c6 + 4 * o4 + 2] = s4[c6 + 4 * o4 + 2] * l5 >> 23);
        }
        e3 += a4;
      }
    }
    __name(fr, "fr");
    __name2(fr, "fr");
    function dr(t5, e3, r3, n4, i4) {
      for (; 0 < n4--; ) {
        var a4;
        for (a4 = 0; a4 < r3; ++a4) {
          var o4 = t5[e3 + 2 * a4 + 0], s4 = 15 & (u5 = t5[e3 + 2 * a4 + 1]), c6 = 4369 * s4, u5 = (240 & u5 | u5 >> 4) * c6 >> 16;
          t5[e3 + 2 * a4 + 0] = (240 & o4 | o4 >> 4) * c6 >> 16 & 240 | (15 & o4 | o4 << 4) * c6 >> 16 >> 4 & 15, t5[e3 + 2 * a4 + 1] = 240 & u5 | s4;
        }
        e3 += i4;
      }
    }
    __name(dr, "dr");
    __name2(dr, "dr");
    function pr(t5, e3, r3, n4, i4, a4, o4, s4) {
      var c6, u5, h5 = 255;
      for (u5 = 0; u5 < i4; ++u5) {
        for (c6 = 0; c6 < n4; ++c6) {
          var l5 = t5[e3 + c6];
          a4[o4 + 4 * c6] = l5, h5 &= l5;
        }
        e3 += r3, o4 += s4;
      }
      return 255 != h5;
    }
    __name(pr, "pr");
    __name2(pr, "pr");
    function gr(t5, e3, r3, n4, i4) {
      var a4;
      for (a4 = 0; a4 < i4; ++a4) r3[n4 + a4] = t5[e3 + a4] >> 8;
    }
    __name(gr, "gr");
    __name2(gr, "gr");
    function mr() {
      An = fr, xn = dr, Sn = pr, _n = gr;
    }
    __name(mr, "mr");
    __name2(mr, "mr");
    function vr(r3, n4, i4) {
      t4[r3] = function(t5, r4, a4, o4, s4, c6, u5, h5, l5, f5, d4, p5, g4, m6, v5, b4, y5) {
        var w4, N5 = y5 - 1 >> 1, L4 = s4[c6 + 0] | u5[h5 + 0] << 16, A4 = l5[f5 + 0] | d4[p5 + 0] << 16;
        e2(null != t5);
        var x3 = 3 * L4 + A4 + 131074 >> 2;
        for (n4(t5[r4 + 0], 255 & x3, x3 >> 16, g4, m6), null != a4 && (x3 = 3 * A4 + L4 + 131074 >> 2, n4(a4[o4 + 0], 255 & x3, x3 >> 16, v5, b4)), w4 = 1; w4 <= N5; ++w4) {
          var S3 = s4[c6 + w4] | u5[h5 + w4] << 16, _4 = l5[f5 + w4] | d4[p5 + w4] << 16, P3 = L4 + S3 + A4 + _4 + 524296, k3 = P3 + 2 * (S3 + A4) >> 3;
          x3 = k3 + L4 >> 1, L4 = (P3 = P3 + 2 * (L4 + _4) >> 3) + S3 >> 1, n4(t5[r4 + 2 * w4 - 1], 255 & x3, x3 >> 16, g4, m6 + (2 * w4 - 1) * i4), n4(t5[r4 + 2 * w4 - 0], 255 & L4, L4 >> 16, g4, m6 + (2 * w4 - 0) * i4), null != a4 && (x3 = P3 + A4 >> 1, L4 = k3 + _4 >> 1, n4(a4[o4 + 2 * w4 - 1], 255 & x3, x3 >> 16, v5, b4 + (2 * w4 - 1) * i4), n4(a4[o4 + 2 * w4 + 0], 255 & L4, L4 >> 16, v5, b4 + (2 * w4 + 0) * i4)), L4 = S3, A4 = _4;
        }
        1 & y5 || (x3 = 3 * L4 + A4 + 131074 >> 2, n4(t5[r4 + y5 - 1], 255 & x3, x3 >> 16, g4, m6 + (y5 - 1) * i4), null != a4 && (x3 = 3 * A4 + L4 + 131074 >> 2, n4(a4[o4 + y5 - 1], 255 & x3, x3 >> 16, v5, b4 + (y5 - 1) * i4)));
      };
    }
    __name(vr, "vr");
    __name2(vr, "vr");
    function br() {
      vi[En] = bi, vi[qn] = wi, vi[Dn] = yi, vi[Rn] = Ni, vi[Tn] = Li, vi[Un] = Ai, vi[zn] = xi, vi[Hn] = wi, vi[Wn] = Ni, vi[Vn] = Li, vi[Gn] = Ai;
    }
    __name(br, "br");
    __name2(br, "br");
    function yr(t5) {
      return t5 & ~Fi ? 0 > t5 ? 0 : 255 : t5 >> Ii;
    }
    __name(yr, "yr");
    __name2(yr, "yr");
    function wr(t5, e3) {
      return yr((19077 * t5 >> 8) + (26149 * e3 >> 8) - 14234);
    }
    __name(wr, "wr");
    __name2(wr, "wr");
    function Nr(t5, e3, r3) {
      return yr((19077 * t5 >> 8) - (6419 * e3 >> 8) - (13320 * r3 >> 8) + 8708);
    }
    __name(Nr, "Nr");
    __name2(Nr, "Nr");
    function Lr(t5, e3) {
      return yr((19077 * t5 >> 8) + (33050 * e3 >> 8) - 17685);
    }
    __name(Lr, "Lr");
    __name2(Lr, "Lr");
    function Ar(t5, e3, r3, n4, i4) {
      n4[i4 + 0] = wr(t5, r3), n4[i4 + 1] = Nr(t5, e3, r3), n4[i4 + 2] = Lr(t5, e3);
    }
    __name(Ar, "Ar");
    __name2(Ar, "Ar");
    function xr(t5, e3, r3, n4, i4) {
      n4[i4 + 0] = Lr(t5, e3), n4[i4 + 1] = Nr(t5, e3, r3), n4[i4 + 2] = wr(t5, r3);
    }
    __name(xr, "xr");
    __name2(xr, "xr");
    function Sr(t5, e3, r3, n4, i4) {
      var a4 = Nr(t5, e3, r3);
      e3 = a4 << 3 & 224 | Lr(t5, e3) >> 3, n4[i4 + 0] = 248 & wr(t5, r3) | a4 >> 5, n4[i4 + 1] = e3;
    }
    __name(Sr, "Sr");
    __name2(Sr, "Sr");
    function _r(t5, e3, r3, n4, i4) {
      var a4 = 240 & Lr(t5, e3) | 15;
      n4[i4 + 0] = 240 & wr(t5, r3) | Nr(t5, e3, r3) >> 4, n4[i4 + 1] = a4;
    }
    __name(_r, "_r");
    __name2(_r, "_r");
    function Pr(t5, e3, r3, n4, i4) {
      n4[i4 + 0] = 255, Ar(t5, e3, r3, n4, i4 + 1);
    }
    __name(Pr, "Pr");
    __name2(Pr, "Pr");
    function kr(t5, e3, r3, n4, i4) {
      xr(t5, e3, r3, n4, i4), n4[i4 + 3] = 255;
    }
    __name(kr, "kr");
    __name2(kr, "kr");
    function Ir(t5, e3, r3, n4, i4) {
      Ar(t5, e3, r3, n4, i4), n4[i4 + 3] = 255;
    }
    __name(Ir, "Ir");
    __name2(Ir, "Ir");
    function Vt2(t5, e3) {
      return 0 > t5 ? 0 : t5 > e3 ? e3 : t5;
    }
    __name(Vt2, "Vt2");
    __name2(Vt2, "Vt");
    function Fr(e3, r3, n4) {
      t4[e3] = function(t5, e4, i4, a4, o4, s4, c6, u5, h5) {
        for (var l5 = u5 + (-2 & h5) * n4; u5 != l5; ) r3(t5[e4 + 0], i4[a4 + 0], o4[s4 + 0], c6, u5), r3(t5[e4 + 1], i4[a4 + 0], o4[s4 + 0], c6, u5 + n4), e4 += 2, ++a4, ++s4, u5 += 2 * n4;
        1 & h5 && r3(t5[e4 + 0], i4[a4 + 0], o4[s4 + 0], c6, u5);
      };
    }
    __name(Fr, "Fr");
    __name2(Fr, "Fr");
    function Cr(t5, e3, r3) {
      return 0 == r3 ? 0 == t5 ? 0 == e3 ? 6 : 5 : 0 == e3 ? 4 : 0 : r3;
    }
    __name(Cr, "Cr");
    __name2(Cr, "Cr");
    function jr(t5, e3, r3, n4, i4) {
      switch (t5 >>> 30) {
        case 3:
          on(e3, r3, n4, i4, 0);
          break;
        case 2:
          sn(e3, r3, n4, i4);
          break;
        case 1:
          un(e3, r3, n4, i4);
      }
    }
    __name(jr, "jr");
    __name2(jr, "jr");
    function Or(t5, e3) {
      var r3, a4, o4 = e3.M, s4 = e3.Nb, c6 = t5.oc, u5 = t5.pc + 40, h5 = t5.oc, l5 = t5.pc + 584, f5 = t5.oc, d4 = t5.pc + 600;
      for (r3 = 0; 16 > r3; ++r3) c6[u5 + 32 * r3 - 1] = 129;
      for (r3 = 0; 8 > r3; ++r3) h5[l5 + 32 * r3 - 1] = 129, f5[d4 + 32 * r3 - 1] = 129;
      for (0 < o4 ? c6[u5 - 1 - 32] = h5[l5 - 1 - 32] = f5[d4 - 1 - 32] = 129 : (i33(c6, u5 - 32 - 1, 127, 21), i33(h5, l5 - 32 - 1, 127, 9), i33(f5, d4 - 32 - 1, 127, 9)), a4 = 0; a4 < t5.za; ++a4) {
        var p5 = e3.ya[e3.aa + a4];
        if (0 < a4) {
          for (r3 = -1; 16 > r3; ++r3) n3(c6, u5 + 32 * r3 - 4, c6, u5 + 32 * r3 + 12, 4);
          for (r3 = -1; 8 > r3; ++r3) n3(h5, l5 + 32 * r3 - 4, h5, l5 + 32 * r3 + 4, 4), n3(f5, d4 + 32 * r3 - 4, f5, d4 + 32 * r3 + 4, 4);
        }
        var g4 = t5.Gd, m6 = t5.Hd + a4, v5 = p5.ad, b4 = p5.Hc;
        if (0 < o4 && (n3(c6, u5 - 32, g4[m6].y, 0, 16), n3(h5, l5 - 32, g4[m6].f, 0, 8), n3(f5, d4 - 32, g4[m6].ea, 0, 8)), p5.Za) {
          var y5 = c6, w4 = u5 - 32 + 16;
          for (0 < o4 && (a4 >= t5.za - 1 ? i33(y5, w4, g4[m6].y[15], 4) : n3(y5, w4, g4[m6 + 1].y, 0, 4)), r3 = 0; 4 > r3; r3++) y5[w4 + 128 + r3] = y5[w4 + 256 + r3] = y5[w4 + 384 + r3] = y5[w4 + 0 + r3];
          for (r3 = 0; 16 > r3; ++r3, b4 <<= 2) y5 = c6, w4 = u5 + Di[r3], fi[p5.Ob[r3]](y5, w4), jr(b4, v5, 16 * +r3, y5, w4);
        } else if (y5 = Cr(a4, o4, p5.Ob[0]), li[y5](c6, u5), 0 != b4) for (r3 = 0; 16 > r3; ++r3, b4 <<= 2) jr(b4, v5, 16 * +r3, c6, u5 + Di[r3]);
        for (r3 = p5.Gc, y5 = Cr(a4, o4, p5.Dd), di[y5](h5, l5), di[y5](f5, d4), b4 = v5, y5 = h5, w4 = l5, 255 & (p5 = r3 >> 0) && (170 & p5 ? cn(b4, 256, y5, w4) : hn(b4, 256, y5, w4)), p5 = f5, b4 = d4, 255 & (r3 >>= 8) && (170 & r3 ? cn(v5, 320, p5, b4) : hn(v5, 320, p5, b4)), o4 < t5.Ub - 1 && (n3(g4[m6].y, 0, c6, u5 + 480, 16), n3(g4[m6].f, 0, h5, l5 + 224, 8), n3(g4[m6].ea, 0, f5, d4 + 224, 8)), r3 = 8 * s4 * t5.B, g4 = t5.sa, m6 = t5.ta + 16 * a4 + 16 * s4 * t5.R, v5 = t5.qa, p5 = t5.ra + 8 * a4 + r3, b4 = t5.Ha, y5 = t5.Ia + 8 * a4 + r3, r3 = 0; 16 > r3; ++r3) n3(g4, m6 + r3 * t5.R, c6, u5 + 32 * r3, 16);
        for (r3 = 0; 8 > r3; ++r3) n3(v5, p5 + r3 * t5.B, h5, l5 + 32 * r3, 8), n3(b4, y5 + r3 * t5.B, f5, d4 + 32 * r3, 8);
      }
    }
    __name(Or, "Or");
    __name2(Or, "Or");
    function Br(t5, n4, i4, a4, o4, s4, c6, u5, h5) {
      var l5 = [0], f5 = [0], d4 = 0, p5 = null != h5 ? h5.kd : 0, g4 = null != h5 ? h5 : new nr();
      if (null == t5 || 12 > i4) return 7;
      g4.data = t5, g4.w = n4, g4.ha = i4, n4 = [n4], i4 = [i4], g4.gb = [g4.gb];
      t: {
        var m6 = n4, b4 = i4, y5 = g4.gb;
        if (e2(null != t5), e2(null != b4), e2(null != y5), y5[0] = 0, 12 <= b4[0] && !r2(t5, m6[0], "RIFF")) {
          if (r2(t5, m6[0] + 8, "WEBP")) {
            y5 = 3;
            break t;
          }
          var w4 = j2(t5, m6[0] + 4);
          if (12 > w4 || 4294967286 < w4) {
            y5 = 3;
            break t;
          }
          if (p5 && w4 > b4[0] - 8) {
            y5 = 7;
            break t;
          }
          y5[0] = w4, m6[0] += 12, b4[0] -= 12;
        }
        y5 = 0;
      }
      if (0 != y5) return y5;
      for (w4 = 0 < g4.gb[0], i4 = i4[0]; ; ) {
        t: {
          var L4 = t5;
          b4 = n4, y5 = i4;
          var A4 = l5, x3 = f5, S3 = m6 = [0];
          if ((k3 = d4 = [d4])[0] = 0, 8 > y5[0]) y5 = 7;
          else {
            if (!r2(L4, b4[0], "VP8X")) {
              if (10 != j2(L4, b4[0] + 4)) {
                y5 = 3;
                break t;
              }
              if (18 > y5[0]) {
                y5 = 7;
                break t;
              }
              var _4 = j2(L4, b4[0] + 8), P3 = 1 + C2(L4, b4[0] + 12);
              if (2147483648 <= P3 * (L4 = 1 + C2(L4, b4[0] + 15))) {
                y5 = 3;
                break t;
              }
              null != S3 && (S3[0] = _4), null != A4 && (A4[0] = P3), null != x3 && (x3[0] = L4), b4[0] += 18, y5[0] -= 18, k3[0] = 1;
            }
            y5 = 0;
          }
        }
        if (d4 = d4[0], m6 = m6[0], 0 != y5) return y5;
        if (b4 = !!(2 & m6), !w4 && d4) return 3;
        if (null != s4 && (s4[0] = !!(16 & m6)), null != c6 && (c6[0] = b4), null != u5 && (u5[0] = 0), c6 = l5[0], m6 = f5[0], d4 && b4 && null == h5) {
          y5 = 0;
          break;
        }
        if (4 > i4) {
          y5 = 7;
          break;
        }
        if (w4 && d4 || !w4 && !d4 && !r2(t5, n4[0], "ALPH")) {
          i4 = [i4], g4.na = [g4.na], g4.P = [g4.P], g4.Sa = [g4.Sa];
          t: {
            _4 = t5, y5 = n4, w4 = i4;
            var k3 = g4.gb;
            A4 = g4.na, x3 = g4.P, S3 = g4.Sa;
            P3 = 22, e2(null != _4), e2(null != w4), L4 = y5[0];
            var I3 = w4[0];
            for (e2(null != A4), e2(null != S3), A4[0] = null, x3[0] = null, S3[0] = 0; ; ) {
              if (y5[0] = L4, w4[0] = I3, 8 > I3) {
                y5 = 7;
                break t;
              }
              var F3 = j2(_4, L4 + 4);
              if (4294967286 < F3) {
                y5 = 3;
                break t;
              }
              var O4 = 8 + F3 + 1 & -2;
              if (P3 += O4, 0 < k3 && P3 > k3) {
                y5 = 3;
                break t;
              }
              if (!r2(_4, L4, "VP8 ") || !r2(_4, L4, "VP8L")) {
                y5 = 0;
                break t;
              }
              if (I3[0] < O4) {
                y5 = 7;
                break t;
              }
              r2(_4, L4, "ALPH") || (A4[0] = _4, x3[0] = L4 + 8, S3[0] = F3), L4 += O4, I3 -= O4;
            }
          }
          if (i4 = i4[0], g4.na = g4.na[0], g4.P = g4.P[0], g4.Sa = g4.Sa[0], 0 != y5) break;
        }
        i4 = [i4], g4.Ja = [g4.Ja], g4.xa = [g4.xa];
        t: if (k3 = t5, y5 = n4, w4 = i4, A4 = g4.gb[0], x3 = g4.Ja, S3 = g4.xa, _4 = y5[0], L4 = !r2(k3, _4, "VP8 "), P3 = !r2(k3, _4, "VP8L"), e2(null != k3), e2(null != w4), e2(null != x3), e2(null != S3), 8 > w4[0]) y5 = 7;
        else {
          if (L4 || P3) {
            if (k3 = j2(k3, _4 + 4), 12 <= A4 && k3 > A4 - 12) {
              y5 = 3;
              break t;
            }
            if (p5 && k3 > w4[0] - 8) {
              y5 = 7;
              break t;
            }
            x3[0] = k3, y5[0] += 8, w4[0] -= 8, S3[0] = P3;
          } else S3[0] = 5 <= w4[0] && 47 == k3[_4 + 0] && !(k3[_4 + 4] >> 5), x3[0] = w4[0];
          y5 = 0;
        }
        if (i4 = i4[0], g4.Ja = g4.Ja[0], g4.xa = g4.xa[0], n4 = n4[0], 0 != y5) break;
        if (4294967286 < g4.Ja) return 3;
        if (null == u5 || b4 || (u5[0] = g4.xa ? 2 : 1), c6 = [c6], m6 = [m6], g4.xa) {
          if (5 > i4) {
            y5 = 7;
            break;
          }
          u5 = c6, p5 = m6, b4 = s4, null == t5 || 5 > i4 ? t5 = 0 : 5 <= i4 && 47 == t5[n4 + 0] && !(t5[n4 + 4] >> 5) ? (w4 = [0], k3 = [0], A4 = [0], v4(x3 = new N4(), t5, n4, i4), gt3(x3, w4, k3, A4) ? (null != u5 && (u5[0] = w4[0]), null != p5 && (p5[0] = k3[0]), null != b4 && (b4[0] = A4[0]), t5 = 1) : t5 = 0) : t5 = 0;
        } else {
          if (10 > i4) {
            y5 = 7;
            break;
          }
          u5 = m6, null == t5 || 10 > i4 || !Xt2(t5, n4 + 3, i4 - 3) ? t5 = 0 : (p5 = t5[n4 + 0] | t5[n4 + 1] << 8 | t5[n4 + 2] << 16, b4 = 16383 & (t5[n4 + 7] << 8 | t5[n4 + 6]), t5 = 16383 & (t5[n4 + 9] << 8 | t5[n4 + 8]), 1 & p5 || 3 < (p5 >> 1 & 7) || !(p5 >> 4 & 1) || p5 >> 5 >= g4.Ja || !b4 || !t5 ? t5 = 0 : (c6 && (c6[0] = b4), u5 && (u5[0] = t5), t5 = 1));
        }
        if (!t5) return 3;
        if (c6 = c6[0], m6 = m6[0], d4 && (l5[0] != c6 || f5[0] != m6)) return 3;
        null != h5 && (h5[0] = g4, h5.offset = n4 - h5.w, e2(4294967286 > n4 - h5.w), e2(h5.offset == h5.ha - i4));
        break;
      }
      return 0 == y5 || 7 == y5 && d4 && null == h5 ? (null != s4 && (s4[0] |= null != g4.na && 0 < g4.na.length), null != a4 && (a4[0] = c6), null != o4 && (o4[0] = m6), 0) : y5;
    }
    __name(Br, "Br");
    __name2(Br, "Br");
    function Mr(t5, e3, r3) {
      var n4 = e3.width, i4 = e3.height, a4 = 0, o4 = 0, s4 = n4, c6 = i4;
      if (e3.Da = null != t5 && 0 < t5.Da, e3.Da && (s4 = t5.cd, c6 = t5.bd, a4 = t5.v, o4 = t5.j, 11 > r3 || (a4 &= -2, o4 &= -2), 0 > a4 || 0 > o4 || 0 >= s4 || 0 >= c6 || a4 + s4 > n4 || o4 + c6 > i4)) return 0;
      if (e3.v = a4, e3.j = o4, e3.va = a4 + s4, e3.o = o4 + c6, e3.U = s4, e3.T = c6, e3.da = null != t5 && 0 < t5.da, e3.da) {
        if (!E2(s4, c6, r3 = [t5.ib], a4 = [t5.hb])) return 0;
        e3.ib = r3[0], e3.hb = a4[0];
      }
      return e3.ob = null != t5 && t5.ob, e3.Kb = null == t5 || !t5.Sd, e3.da && (e3.ob = e3.ib < 3 * n4 / 4 && e3.hb < 3 * i4 / 4, e3.Kb = 0), 1;
    }
    __name(Mr, "Mr");
    __name2(Mr, "Mr");
    function Er(t5) {
      if (null == t5) return 2;
      if (11 > t5.S) {
        var e3 = t5.f.RGBA;
        e3.fb += (t5.height - 1) * e3.A, e3.A = -e3.A;
      } else e3 = t5.f.kb, t5 = t5.height, e3.O += (t5 - 1) * e3.fa, e3.fa = -e3.fa, e3.N += (t5 - 1 >> 1) * e3.Ab, e3.Ab = -e3.Ab, e3.W += (t5 - 1 >> 1) * e3.Db, e3.Db = -e3.Db, null != e3.F && (e3.J += (t5 - 1) * e3.lb, e3.lb = -e3.lb);
      return 0;
    }
    __name(Er, "Er");
    __name2(Er, "Er");
    function qr(t5, e3, r3, n4) {
      if (null == n4 || 0 >= t5 || 0 >= e3) return 2;
      if (null != r3) {
        if (r3.Da) {
          var i4 = r3.cd, o4 = r3.bd, s4 = -2 & r3.v, c6 = -2 & r3.j;
          if (0 > s4 || 0 > c6 || 0 >= i4 || 0 >= o4 || s4 + i4 > t5 || c6 + o4 > e3) return 2;
          t5 = i4, e3 = o4;
        }
        if (r3.da) {
          if (!E2(t5, e3, i4 = [r3.ib], o4 = [r3.hb])) return 2;
          t5 = i4[0], e3 = o4[0];
        }
      }
      n4.width = t5, n4.height = e3;
      t: {
        var u5 = n4.width, h5 = n4.height;
        if (t5 = n4.S, 0 >= u5 || 0 >= h5 || !(t5 >= En && 13 > t5)) t5 = 2;
        else {
          if (0 >= n4.Rd && null == n4.sd) {
            s4 = o4 = i4 = e3 = 0;
            var l5 = (c6 = u5 * zi[t5]) * h5;
            if (11 > t5 || (o4 = (h5 + 1) / 2 * (e3 = (u5 + 1) / 2), 12 == t5 && (s4 = (i4 = u5) * h5)), null == (h5 = a3(l5 + 2 * o4 + s4))) {
              t5 = 1;
              break t;
            }
            n4.sd = h5, 11 > t5 ? ((u5 = n4.f.RGBA).eb = h5, u5.fb = 0, u5.A = c6, u5.size = l5) : ((u5 = n4.f.kb).y = h5, u5.O = 0, u5.fa = c6, u5.Fd = l5, u5.f = h5, u5.N = 0 + l5, u5.Ab = e3, u5.Cd = o4, u5.ea = h5, u5.W = 0 + l5 + o4, u5.Db = e3, u5.Ed = o4, 12 == t5 && (u5.F = h5, u5.J = 0 + l5 + 2 * o4), u5.Tc = s4, u5.lb = i4);
          }
          if (e3 = 1, i4 = n4.S, o4 = n4.width, s4 = n4.height, i4 >= En && 13 > i4) if (11 > i4) t5 = n4.f.RGBA, e3 &= (c6 = Math.abs(t5.A)) * (s4 - 1) + o4 <= t5.size, e3 &= c6 >= o4 * zi[i4], e3 &= null != t5.eb;
          else {
            t5 = n4.f.kb, c6 = (o4 + 1) / 2, l5 = (s4 + 1) / 2, u5 = Math.abs(t5.fa);
            h5 = Math.abs(t5.Ab);
            var f5 = Math.abs(t5.Db), d4 = Math.abs(t5.lb), p5 = d4 * (s4 - 1) + o4;
            e3 &= u5 * (s4 - 1) + o4 <= t5.Fd, e3 &= h5 * (l5 - 1) + c6 <= t5.Cd, e3 = (e3 &= f5 * (l5 - 1) + c6 <= t5.Ed) & u5 >= o4 & h5 >= c6 & f5 >= c6, e3 &= null != t5.y, e3 &= null != t5.f, e3 &= null != t5.ea, 12 == i4 && (e3 &= d4 >= o4, e3 &= p5 <= t5.Tc, e3 &= null != t5.F);
          }
          else e3 = 0;
          t5 = e3 ? 0 : 2;
        }
      }
      return 0 != t5 || null != r3 && r3.fd && (t5 = Er(n4)), t5;
    }
    __name(qr, "qr");
    __name2(qr, "qr");
    var Dr = 64, Rr = [0, 1, 3, 7, 15, 31, 63, 127, 255, 511, 1023, 2047, 4095, 8191, 16383, 32767, 65535, 131071, 262143, 524287, 1048575, 2097151, 4194303, 8388607, 16777215], Tr = 24, Ur = 32, zr = 8, Hr = [0, 0, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 3, 3, 3, 3, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7];
    R2("Predictor0", "PredictorAdd0"), t4.Predictor0 = function() {
      return 4278190080;
    }, t4.Predictor1 = function(t5) {
      return t5;
    }, t4.Predictor2 = function(t5, e3, r3) {
      return e3[r3 + 0];
    }, t4.Predictor3 = function(t5, e3, r3) {
      return e3[r3 + 1];
    }, t4.Predictor4 = function(t5, e3, r3) {
      return e3[r3 - 1];
    }, t4.Predictor5 = function(t5, e3, r3) {
      return U2(U2(t5, e3[r3 + 1]), e3[r3 + 0]);
    }, t4.Predictor6 = function(t5, e3, r3) {
      return U2(t5, e3[r3 - 1]);
    }, t4.Predictor7 = function(t5, e3, r3) {
      return U2(t5, e3[r3 + 0]);
    }, t4.Predictor8 = function(t5, e3, r3) {
      return U2(e3[r3 - 1], e3[r3 + 0]);
    }, t4.Predictor9 = function(t5, e3, r3) {
      return U2(e3[r3 + 0], e3[r3 + 1]);
    }, t4.Predictor10 = function(t5, e3, r3) {
      return U2(U2(t5, e3[r3 - 1]), U2(e3[r3 + 0], e3[r3 + 1]));
    }, t4.Predictor11 = function(t5, e3, r3) {
      var n4 = e3[r3 + 0];
      return 0 >= W2(n4 >> 24 & 255, t5 >> 24 & 255, (e3 = e3[r3 - 1]) >> 24 & 255) + W2(n4 >> 16 & 255, t5 >> 16 & 255, e3 >> 16 & 255) + W2(n4 >> 8 & 255, t5 >> 8 & 255, e3 >> 8 & 255) + W2(255 & n4, 255 & t5, 255 & e3) ? n4 : t5;
    }, t4.Predictor12 = function(t5, e3, r3) {
      var n4 = e3[r3 + 0];
      return (z3((t5 >> 24 & 255) + (n4 >> 24 & 255) - ((e3 = e3[r3 - 1]) >> 24 & 255)) << 24 | z3((t5 >> 16 & 255) + (n4 >> 16 & 255) - (e3 >> 16 & 255)) << 16 | z3((t5 >> 8 & 255) + (n4 >> 8 & 255) - (e3 >> 8 & 255)) << 8 | z3((255 & t5) + (255 & n4) - (255 & e3))) >>> 0;
    }, t4.Predictor13 = function(t5, e3, r3) {
      var n4 = e3[r3 - 1];
      return (H2((t5 = U2(t5, e3[r3 + 0])) >> 24 & 255, n4 >> 24 & 255) << 24 | H2(t5 >> 16 & 255, n4 >> 16 & 255) << 16 | H2(t5 >> 8 & 255, n4 >> 8 & 255) << 8 | H2(t5 >> 0 & 255, n4 >> 0 & 255)) >>> 0;
    };
    var Wr = t4.PredictorAdd0;
    t4.PredictorAdd1 = V3, R2("Predictor2", "PredictorAdd2"), R2("Predictor3", "PredictorAdd3"), R2("Predictor4", "PredictorAdd4"), R2("Predictor5", "PredictorAdd5"), R2("Predictor6", "PredictorAdd6"), R2("Predictor7", "PredictorAdd7"), R2("Predictor8", "PredictorAdd8"), R2("Predictor9", "PredictorAdd9"), R2("Predictor10", "PredictorAdd10"), R2("Predictor11", "PredictorAdd11"), R2("Predictor12", "PredictorAdd12"), R2("Predictor13", "PredictorAdd13");
    var Vr = t4.PredictorAdd2;
    X2("ColorIndexInverseTransform", "MapARGB", "32b", function(t5) {
      return t5 >> 8 & 255;
    }, function(t5) {
      return t5;
    }), X2("VP8LColorIndexInverseTransformAlpha", "MapAlpha", "8b", function(t5) {
      return t5;
    }, function(t5) {
      return t5 >> 8 & 255;
    });
    var Gr, Yr = t4.ColorIndexInverseTransform, Jr = t4.MapARGB, Xr = t4.VP8LColorIndexInverseTransformAlpha, Kr = t4.MapAlpha, Zr = t4.VP8LPredictorsAdd = [];
    Zr.length = 16, (t4.VP8LPredictors = []).length = 16, (t4.VP8LPredictorsAdd_C = []).length = 16, (t4.VP8LPredictors_C = []).length = 16;
    var $r, Qr, tn, en, rn, nn, an, on, sn, cn, un, hn, ln2, fn, dn, pn, gn, mn, vn, bn, yn, wn, Nn, Ln, An, xn, Sn, _n, Pn = a3(511), kn = a3(2041), In = a3(225), Fn = a3(767), Cn = 0, jn = kn, On = In, Bn = Fn, Mn = Pn, En = 0, qn = 1, Dn = 2, Rn = 3, Tn = 4, Un = 5, zn = 6, Hn = 7, Wn = 8, Vn = 9, Gn = 10, Yn = [2, 3, 7], Jn = [3, 3, 11], Xn = [280, 256, 256, 256, 40], Kn = [0, 1, 1, 1, 0], Zn = [17, 18, 0, 1, 2, 3, 4, 5, 16, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15], $n = [24, 7, 23, 25, 40, 6, 39, 41, 22, 26, 38, 42, 56, 5, 55, 57, 21, 27, 54, 58, 37, 43, 72, 4, 71, 73, 20, 28, 53, 59, 70, 74, 36, 44, 88, 69, 75, 52, 60, 3, 87, 89, 19, 29, 86, 90, 35, 45, 68, 76, 85, 91, 51, 61, 104, 2, 103, 105, 18, 30, 102, 106, 34, 46, 84, 92, 67, 77, 101, 107, 50, 62, 120, 1, 119, 121, 83, 93, 17, 31, 100, 108, 66, 78, 118, 122, 33, 47, 117, 123, 49, 63, 99, 109, 82, 94, 0, 116, 124, 65, 79, 16, 32, 98, 110, 48, 115, 125, 81, 95, 64, 114, 126, 97, 111, 80, 113, 127, 96, 112], Qn = [2954, 2956, 2958, 2962, 2970, 2986, 3018, 3082, 3212, 3468, 3980, 5004], ti = 8, ei = [4, 5, 6, 7, 8, 9, 10, 10, 11, 12, 13, 14, 15, 16, 17, 17, 18, 19, 20, 20, 21, 21, 22, 22, 23, 23, 24, 25, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 91, 93, 95, 96, 98, 100, 101, 102, 104, 106, 108, 110, 112, 114, 116, 118, 122, 124, 126, 128, 130, 132, 134, 136, 138, 140, 143, 145, 148, 151, 154, 157], ri = [4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 60, 62, 64, 66, 68, 70, 72, 74, 76, 78, 80, 82, 84, 86, 88, 90, 92, 94, 96, 98, 100, 102, 104, 106, 108, 110, 112, 114, 116, 119, 122, 125, 128, 131, 134, 137, 140, 143, 146, 149, 152, 155, 158, 161, 164, 167, 170, 173, 177, 181, 185, 189, 193, 197, 201, 205, 209, 213, 217, 221, 225, 229, 234, 239, 245, 249, 254, 259, 264, 269, 274, 279, 284], ni = null, ii = [[173, 148, 140, 0], [176, 155, 140, 135, 0], [180, 157, 141, 134, 130, 0], [254, 254, 243, 230, 196, 177, 153, 140, 133, 130, 129, 0]], ai = [0, 1, 4, 8, 5, 2, 3, 6, 9, 12, 13, 10, 7, 11, 14, 15], oi = [-0, 1, -1, 2, -2, 3, 4, 6, -3, 5, -4, -5, -6, 7, -7, 8, -8, -9], si = [[[[128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128], [128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128], [128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128]], [[253, 136, 254, 255, 228, 219, 128, 128, 128, 128, 128], [189, 129, 242, 255, 227, 213, 255, 219, 128, 128, 128], [106, 126, 227, 252, 214, 209, 255, 255, 128, 128, 128]], [[1, 98, 248, 255, 236, 226, 255, 255, 128, 128, 128], [181, 133, 238, 254, 221, 234, 255, 154, 128, 128, 128], [78, 134, 202, 247, 198, 180, 255, 219, 128, 128, 128]], [[1, 185, 249, 255, 243, 255, 128, 128, 128, 128, 128], [184, 150, 247, 255, 236, 224, 128, 128, 128, 128, 128], [77, 110, 216, 255, 236, 230, 128, 128, 128, 128, 128]], [[1, 101, 251, 255, 241, 255, 128, 128, 128, 128, 128], [170, 139, 241, 252, 236, 209, 255, 255, 128, 128, 128], [37, 116, 196, 243, 228, 255, 255, 255, 128, 128, 128]], [[1, 204, 254, 255, 245, 255, 128, 128, 128, 128, 128], [207, 160, 250, 255, 238, 128, 128, 128, 128, 128, 128], [102, 103, 231, 255, 211, 171, 128, 128, 128, 128, 128]], [[1, 152, 252, 255, 240, 255, 128, 128, 128, 128, 128], [177, 135, 243, 255, 234, 225, 128, 128, 128, 128, 128], [80, 129, 211, 255, 194, 224, 128, 128, 128, 128, 128]], [[1, 1, 255, 128, 128, 128, 128, 128, 128, 128, 128], [246, 1, 255, 128, 128, 128, 128, 128, 128, 128, 128], [255, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128]]], [[[198, 35, 237, 223, 193, 187, 162, 160, 145, 155, 62], [131, 45, 198, 221, 172, 176, 220, 157, 252, 221, 1], [68, 47, 146, 208, 149, 167, 221, 162, 255, 223, 128]], [[1, 149, 241, 255, 221, 224, 255, 255, 128, 128, 128], [184, 141, 234, 253, 222, 220, 255, 199, 128, 128, 128], [81, 99, 181, 242, 176, 190, 249, 202, 255, 255, 128]], [[1, 129, 232, 253, 214, 197, 242, 196, 255, 255, 128], [99, 121, 210, 250, 201, 198, 255, 202, 128, 128, 128], [23, 91, 163, 242, 170, 187, 247, 210, 255, 255, 128]], [[1, 200, 246, 255, 234, 255, 128, 128, 128, 128, 128], [109, 178, 241, 255, 231, 245, 255, 255, 128, 128, 128], [44, 130, 201, 253, 205, 192, 255, 255, 128, 128, 128]], [[1, 132, 239, 251, 219, 209, 255, 165, 128, 128, 128], [94, 136, 225, 251, 218, 190, 255, 255, 128, 128, 128], [22, 100, 174, 245, 186, 161, 255, 199, 128, 128, 128]], [[1, 182, 249, 255, 232, 235, 128, 128, 128, 128, 128], [124, 143, 241, 255, 227, 234, 128, 128, 128, 128, 128], [35, 77, 181, 251, 193, 211, 255, 205, 128, 128, 128]], [[1, 157, 247, 255, 236, 231, 255, 255, 128, 128, 128], [121, 141, 235, 255, 225, 227, 255, 255, 128, 128, 128], [45, 99, 188, 251, 195, 217, 255, 224, 128, 128, 128]], [[1, 1, 251, 255, 213, 255, 128, 128, 128, 128, 128], [203, 1, 248, 255, 255, 128, 128, 128, 128, 128, 128], [137, 1, 177, 255, 224, 255, 128, 128, 128, 128, 128]]], [[[253, 9, 248, 251, 207, 208, 255, 192, 128, 128, 128], [175, 13, 224, 243, 193, 185, 249, 198, 255, 255, 128], [73, 17, 171, 221, 161, 179, 236, 167, 255, 234, 128]], [[1, 95, 247, 253, 212, 183, 255, 255, 128, 128, 128], [239, 90, 244, 250, 211, 209, 255, 255, 128, 128, 128], [155, 77, 195, 248, 188, 195, 255, 255, 128, 128, 128]], [[1, 24, 239, 251, 218, 219, 255, 205, 128, 128, 128], [201, 51, 219, 255, 196, 186, 128, 128, 128, 128, 128], [69, 46, 190, 239, 201, 218, 255, 228, 128, 128, 128]], [[1, 191, 251, 255, 255, 128, 128, 128, 128, 128, 128], [223, 165, 249, 255, 213, 255, 128, 128, 128, 128, 128], [141, 124, 248, 255, 255, 128, 128, 128, 128, 128, 128]], [[1, 16, 248, 255, 255, 128, 128, 128, 128, 128, 128], [190, 36, 230, 255, 236, 255, 128, 128, 128, 128, 128], [149, 1, 255, 128, 128, 128, 128, 128, 128, 128, 128]], [[1, 226, 255, 128, 128, 128, 128, 128, 128, 128, 128], [247, 192, 255, 128, 128, 128, 128, 128, 128, 128, 128], [240, 128, 255, 128, 128, 128, 128, 128, 128, 128, 128]], [[1, 134, 252, 255, 255, 128, 128, 128, 128, 128, 128], [213, 62, 250, 255, 255, 128, 128, 128, 128, 128, 128], [55, 93, 255, 128, 128, 128, 128, 128, 128, 128, 128]], [[128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128], [128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128], [128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128]]], [[[202, 24, 213, 235, 186, 191, 220, 160, 240, 175, 255], [126, 38, 182, 232, 169, 184, 228, 174, 255, 187, 128], [61, 46, 138, 219, 151, 178, 240, 170, 255, 216, 128]], [[1, 112, 230, 250, 199, 191, 247, 159, 255, 255, 128], [166, 109, 228, 252, 211, 215, 255, 174, 128, 128, 128], [39, 77, 162, 232, 172, 180, 245, 178, 255, 255, 128]], [[1, 52, 220, 246, 198, 199, 249, 220, 255, 255, 128], [124, 74, 191, 243, 183, 193, 250, 221, 255, 255, 128], [24, 71, 130, 219, 154, 170, 243, 182, 255, 255, 128]], [[1, 182, 225, 249, 219, 240, 255, 224, 128, 128, 128], [149, 150, 226, 252, 216, 205, 255, 171, 128, 128, 128], [28, 108, 170, 242, 183, 194, 254, 223, 255, 255, 128]], [[1, 81, 230, 252, 204, 203, 255, 192, 128, 128, 128], [123, 102, 209, 247, 188, 196, 255, 233, 128, 128, 128], [20, 95, 153, 243, 164, 173, 255, 203, 128, 128, 128]], [[1, 222, 248, 255, 216, 213, 128, 128, 128, 128, 128], [168, 175, 246, 252, 235, 205, 255, 255, 128, 128, 128], [47, 116, 215, 255, 211, 212, 255, 255, 128, 128, 128]], [[1, 121, 236, 253, 212, 214, 255, 255, 128, 128, 128], [141, 84, 213, 252, 201, 202, 255, 219, 128, 128, 128], [42, 80, 160, 240, 162, 185, 255, 205, 128, 128, 128]], [[1, 1, 255, 128, 128, 128, 128, 128, 128, 128, 128], [244, 1, 255, 128, 128, 128, 128, 128, 128, 128, 128], [238, 1, 255, 128, 128, 128, 128, 128, 128, 128, 128]]]], ci = [[[231, 120, 48, 89, 115, 113, 120, 152, 112], [152, 179, 64, 126, 170, 118, 46, 70, 95], [175, 69, 143, 80, 85, 82, 72, 155, 103], [56, 58, 10, 171, 218, 189, 17, 13, 152], [114, 26, 17, 163, 44, 195, 21, 10, 173], [121, 24, 80, 195, 26, 62, 44, 64, 85], [144, 71, 10, 38, 171, 213, 144, 34, 26], [170, 46, 55, 19, 136, 160, 33, 206, 71], [63, 20, 8, 114, 114, 208, 12, 9, 226], [81, 40, 11, 96, 182, 84, 29, 16, 36]], [[134, 183, 89, 137, 98, 101, 106, 165, 148], [72, 187, 100, 130, 157, 111, 32, 75, 80], [66, 102, 167, 99, 74, 62, 40, 234, 128], [41, 53, 9, 178, 241, 141, 26, 8, 107], [74, 43, 26, 146, 73, 166, 49, 23, 157], [65, 38, 105, 160, 51, 52, 31, 115, 128], [104, 79, 12, 27, 217, 255, 87, 17, 7], [87, 68, 71, 44, 114, 51, 15, 186, 23], [47, 41, 14, 110, 182, 183, 21, 17, 194], [66, 45, 25, 102, 197, 189, 23, 18, 22]], [[88, 88, 147, 150, 42, 46, 45, 196, 205], [43, 97, 183, 117, 85, 38, 35, 179, 61], [39, 53, 200, 87, 26, 21, 43, 232, 171], [56, 34, 51, 104, 114, 102, 29, 93, 77], [39, 28, 85, 171, 58, 165, 90, 98, 64], [34, 22, 116, 206, 23, 34, 43, 166, 73], [107, 54, 32, 26, 51, 1, 81, 43, 31], [68, 25, 106, 22, 64, 171, 36, 225, 114], [34, 19, 21, 102, 132, 188, 16, 76, 124], [62, 18, 78, 95, 85, 57, 50, 48, 51]], [[193, 101, 35, 159, 215, 111, 89, 46, 111], [60, 148, 31, 172, 219, 228, 21, 18, 111], [112, 113, 77, 85, 179, 255, 38, 120, 114], [40, 42, 1, 196, 245, 209, 10, 25, 109], [88, 43, 29, 140, 166, 213, 37, 43, 154], [61, 63, 30, 155, 67, 45, 68, 1, 209], [100, 80, 8, 43, 154, 1, 51, 26, 71], [142, 78, 78, 16, 255, 128, 34, 197, 171], [41, 40, 5, 102, 211, 183, 4, 1, 221], [51, 50, 17, 168, 209, 192, 23, 25, 82]], [[138, 31, 36, 171, 27, 166, 38, 44, 229], [67, 87, 58, 169, 82, 115, 26, 59, 179], [63, 59, 90, 180, 59, 166, 93, 73, 154], [40, 40, 21, 116, 143, 209, 34, 39, 175], [47, 15, 16, 183, 34, 223, 49, 45, 183], [46, 17, 33, 183, 6, 98, 15, 32, 183], [57, 46, 22, 24, 128, 1, 54, 17, 37], [65, 32, 73, 115, 28, 128, 23, 128, 205], [40, 3, 9, 115, 51, 192, 18, 6, 223], [87, 37, 9, 115, 59, 77, 64, 21, 47]], [[104, 55, 44, 218, 9, 54, 53, 130, 226], [64, 90, 70, 205, 40, 41, 23, 26, 57], [54, 57, 112, 184, 5, 41, 38, 166, 213], [30, 34, 26, 133, 152, 116, 10, 32, 134], [39, 19, 53, 221, 26, 114, 32, 73, 255], [31, 9, 65, 234, 2, 15, 1, 118, 73], [75, 32, 12, 51, 192, 255, 160, 43, 51], [88, 31, 35, 67, 102, 85, 55, 186, 85], [56, 21, 23, 111, 59, 205, 45, 37, 192], [55, 38, 70, 124, 73, 102, 1, 34, 98]], [[125, 98, 42, 88, 104, 85, 117, 175, 82], [95, 84, 53, 89, 128, 100, 113, 101, 45], [75, 79, 123, 47, 51, 128, 81, 171, 1], [57, 17, 5, 71, 102, 57, 53, 41, 49], [38, 33, 13, 121, 57, 73, 26, 1, 85], [41, 10, 67, 138, 77, 110, 90, 47, 114], [115, 21, 2, 10, 102, 255, 166, 23, 6], [101, 29, 16, 10, 85, 128, 101, 196, 26], [57, 18, 10, 102, 102, 213, 34, 20, 43], [117, 20, 15, 36, 163, 128, 68, 1, 26]], [[102, 61, 71, 37, 34, 53, 31, 243, 192], [69, 60, 71, 38, 73, 119, 28, 222, 37], [68, 45, 128, 34, 1, 47, 11, 245, 171], [62, 17, 19, 70, 146, 85, 55, 62, 70], [37, 43, 37, 154, 100, 163, 85, 160, 1], [63, 9, 92, 136, 28, 64, 32, 201, 85], [75, 15, 9, 9, 64, 255, 184, 119, 16], [86, 6, 28, 5, 64, 255, 25, 248, 1], [56, 8, 17, 132, 137, 255, 55, 116, 128], [58, 15, 20, 82, 135, 57, 26, 121, 40]], [[164, 50, 31, 137, 154, 133, 25, 35, 218], [51, 103, 44, 131, 131, 123, 31, 6, 158], [86, 40, 64, 135, 148, 224, 45, 183, 128], [22, 26, 17, 131, 240, 154, 14, 1, 209], [45, 16, 21, 91, 64, 222, 7, 1, 197], [56, 21, 39, 155, 60, 138, 23, 102, 213], [83, 12, 13, 54, 192, 255, 68, 47, 28], [85, 26, 85, 85, 128, 128, 32, 146, 171], [18, 11, 7, 63, 144, 171, 4, 4, 246], [35, 27, 10, 146, 174, 171, 12, 26, 128]], [[190, 80, 35, 99, 180, 80, 126, 54, 45], [85, 126, 47, 87, 176, 51, 41, 20, 32], [101, 75, 128, 139, 118, 146, 116, 128, 85], [56, 41, 15, 176, 236, 85, 37, 9, 62], [71, 30, 17, 119, 118, 255, 17, 18, 138], [101, 38, 60, 138, 55, 70, 43, 26, 142], [146, 36, 19, 30, 171, 255, 97, 27, 20], [138, 45, 61, 62, 219, 1, 81, 188, 64], [32, 41, 20, 117, 151, 142, 20, 21, 163], [112, 19, 12, 61, 195, 128, 48, 4, 24]]], ui = [[[[255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255], [255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255], [255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255]], [[176, 246, 255, 255, 255, 255, 255, 255, 255, 255, 255], [223, 241, 252, 255, 255, 255, 255, 255, 255, 255, 255], [249, 253, 253, 255, 255, 255, 255, 255, 255, 255, 255]], [[255, 244, 252, 255, 255, 255, 255, 255, 255, 255, 255], [234, 254, 254, 255, 255, 255, 255, 255, 255, 255, 255], [253, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255]], [[255, 246, 254, 255, 255, 255, 255, 255, 255, 255, 255], [239, 253, 254, 255, 255, 255, 255, 255, 255, 255, 255], [254, 255, 254, 255, 255, 255, 255, 255, 255, 255, 255]], [[255, 248, 254, 255, 255, 255, 255, 255, 255, 255, 255], [251, 255, 254, 255, 255, 255, 255, 255, 255, 255, 255], [255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255]], [[255, 253, 254, 255, 255, 255, 255, 255, 255, 255, 255], [251, 254, 254, 255, 255, 255, 255, 255, 255, 255, 255], [254, 255, 254, 255, 255, 255, 255, 255, 255, 255, 255]], [[255, 254, 253, 255, 254, 255, 255, 255, 255, 255, 255], [250, 255, 254, 255, 254, 255, 255, 255, 255, 255, 255], [254, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255]], [[255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255], [255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255], [255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255]]], [[[217, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255], [225, 252, 241, 253, 255, 255, 254, 255, 255, 255, 255], [234, 250, 241, 250, 253, 255, 253, 254, 255, 255, 255]], [[255, 254, 255, 255, 255, 255, 255, 255, 255, 255, 255], [223, 254, 254, 255, 255, 255, 255, 255, 255, 255, 255], [238, 253, 254, 254, 255, 255, 255, 255, 255, 255, 255]], [[255, 248, 254, 255, 255, 255, 255, 255, 255, 255, 255], [249, 254, 255, 255, 255, 255, 255, 255, 255, 255, 255], [255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255]], [[255, 253, 255, 255, 255, 255, 255, 255, 255, 255, 255], [247, 254, 255, 255, 255, 255, 255, 255, 255, 255, 255], [255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255]], [[255, 253, 254, 255, 255, 255, 255, 255, 255, 255, 255], [252, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255], [255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255]], [[255, 254, 254, 255, 255, 255, 255, 255, 255, 255, 255], [253, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255], [255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255]], [[255, 254, 253, 255, 255, 255, 255, 255, 255, 255, 255], [250, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255], [254, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255]], [[255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255], [255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255], [255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255]]], [[[186, 251, 250, 255, 255, 255, 255, 255, 255, 255, 255], [234, 251, 244, 254, 255, 255, 255, 255, 255, 255, 255], [251, 251, 243, 253, 254, 255, 254, 255, 255, 255, 255]], [[255, 253, 254, 255, 255, 255, 255, 255, 255, 255, 255], [236, 253, 254, 255, 255, 255, 255, 255, 255, 255, 255], [251, 253, 253, 254, 254, 255, 255, 255, 255, 255, 255]], [[255, 254, 254, 255, 255, 255, 255, 255, 255, 255, 255], [254, 254, 254, 255, 255, 255, 255, 255, 255, 255, 255], [255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255]], [[255, 254, 255, 255, 255, 255, 255, 255, 255, 255, 255], [254, 254, 255, 255, 255, 255, 255, 255, 255, 255, 255], [254, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255]], [[255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255], [254, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255], [255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255]], [[255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255], [255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255], [255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255]], [[255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255], [255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255], [255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255]], [[255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255], [255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255], [255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255]]], [[[248, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255], [250, 254, 252, 254, 255, 255, 255, 255, 255, 255, 255], [248, 254, 249, 253, 255, 255, 255, 255, 255, 255, 255]], [[255, 253, 253, 255, 255, 255, 255, 255, 255, 255, 255], [246, 253, 253, 255, 255, 255, 255, 255, 255, 255, 255], [252, 254, 251, 254, 254, 255, 255, 255, 255, 255, 255]], [[255, 254, 252, 255, 255, 255, 255, 255, 255, 255, 255], [248, 254, 253, 255, 255, 255, 255, 255, 255, 255, 255], [253, 255, 254, 254, 255, 255, 255, 255, 255, 255, 255]], [[255, 251, 254, 255, 255, 255, 255, 255, 255, 255, 255], [245, 251, 254, 255, 255, 255, 255, 255, 255, 255, 255], [253, 253, 254, 255, 255, 255, 255, 255, 255, 255, 255]], [[255, 251, 253, 255, 255, 255, 255, 255, 255, 255, 255], [252, 253, 254, 255, 255, 255, 255, 255, 255, 255, 255], [255, 254, 255, 255, 255, 255, 255, 255, 255, 255, 255]], [[255, 252, 255, 255, 255, 255, 255, 255, 255, 255, 255], [249, 255, 254, 255, 255, 255, 255, 255, 255, 255, 255], [255, 255, 254, 255, 255, 255, 255, 255, 255, 255, 255]], [[255, 255, 253, 255, 255, 255, 255, 255, 255, 255, 255], [250, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255], [255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255]], [[255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255], [254, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255], [255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255]]]], hi = [0, 1, 2, 3, 6, 4, 5, 6, 6, 6, 6, 6, 6, 6, 6, 7, 0], li = [], fi = [], di = [], pi = 1, gi = 2, mi = [], vi = [];
    vr("UpsampleRgbLinePair", Ar, 3), vr("UpsampleBgrLinePair", xr, 3), vr("UpsampleRgbaLinePair", Ir, 4), vr("UpsampleBgraLinePair", kr, 4), vr("UpsampleArgbLinePair", Pr, 4), vr("UpsampleRgba4444LinePair", _r, 2), vr("UpsampleRgb565LinePair", Sr, 2);
    var bi = t4.UpsampleRgbLinePair, yi = t4.UpsampleBgrLinePair, wi = t4.UpsampleRgbaLinePair, Ni = t4.UpsampleBgraLinePair, Li = t4.UpsampleArgbLinePair, Ai = t4.UpsampleRgba4444LinePair, xi = t4.UpsampleRgb565LinePair, Si = 16, _i = 1 << Si - 1, Pi = -227, ki = 482, Ii = 6, Fi = (256 << Ii) - 1, Ci = 0, ji = a3(256), Oi = a3(256), Bi = a3(256), Mi = a3(256), Ei = a3(ki - Pi), qi = a3(ki - Pi);
    Fr("YuvToRgbRow", Ar, 3), Fr("YuvToBgrRow", xr, 3), Fr("YuvToRgbaRow", Ir, 4), Fr("YuvToBgraRow", kr, 4), Fr("YuvToArgbRow", Pr, 4), Fr("YuvToRgba4444Row", _r, 2), Fr("YuvToRgb565Row", Sr, 2);
    var Di = [0, 4, 8, 12, 128, 132, 136, 140, 256, 260, 264, 268, 384, 388, 392, 396], Ri = [0, 2, 8], Ti = [8, 7, 6, 4, 4, 2, 2, 2, 1, 1, 1, 1], Ui = 1;
    this.WebPDecodeRGBA = function(t5, r3, n4, i4, a4) {
      var o4 = qn, s4 = new rr(), c6 = new ot2();
      s4.ba = c6, c6.S = o4, c6.width = [c6.width], c6.height = [c6.height];
      var u5 = c6.width, h5 = c6.height, l5 = new st2();
      if (null == l5 || null == t5) var f5 = 2;
      else e2(null != l5), f5 = Br(t5, r3, n4, l5.width, l5.height, l5.Pd, l5.Qd, l5.format, null);
      if (0 != f5 ? u5 = 0 : (null != u5 && (u5[0] = l5.width[0]), null != h5 && (h5[0] = l5.height[0]), u5 = 1), u5) {
        c6.width = c6.width[0], c6.height = c6.height[0], null != i4 && (i4[0] = c6.width), null != a4 && (a4[0] = c6.height);
        t: {
          if (i4 = new Gt2(), (a4 = new nr()).data = t5, a4.w = r3, a4.ha = n4, a4.kd = 1, r3 = [0], e2(null != a4), (0 == (t5 = Br(a4.data, a4.w, a4.ha, null, null, null, r3, null, a4)) || 7 == t5) && r3[0] && (t5 = 4), 0 == (r3 = t5)) {
            if (e2(null != s4), i4.data = a4.data, i4.w = a4.w + a4.offset, i4.ha = a4.ha - a4.offset, i4.put = dt2, i4.ac = ft2, i4.bc = pt2, i4.ma = s4, a4.xa) {
              if (null == (t5 = kt2())) {
                s4 = 1;
                break t;
              }
              if (function(t6, r4) {
                var n5 = [0], i5 = [0], a5 = [0];
                e: for (; ; ) {
                  if (null == t6) return 0;
                  if (null == r4) return t6.a = 2, 0;
                  if (t6.l = r4, t6.a = 0, v4(t6.m, r4.data, r4.w, r4.ha), !gt3(t6.m, n5, i5, a5)) {
                    t6.a = 3;
                    break e;
                  }
                  if (t6.xb = gi, r4.width = n5[0], r4.height = i5[0], !It2(n5[0], i5[0], 1, t6, null)) break e;
                  return 1;
                }
                return e2(0 != t6.a), 0;
              }(t5, i4)) {
                if (i4 = 0 == (r3 = qr(i4.width, i4.height, s4.Oa, s4.ba))) {
                  e: {
                    i4 = t5;
                    r: for (; ; ) {
                      if (null == i4) {
                        i4 = 0;
                        break e;
                      }
                      if (e2(null != i4.s.yc), e2(null != i4.s.Ya), e2(0 < i4.s.Wb), e2(null != (n4 = i4.l)), e2(null != (a4 = n4.ma)), 0 != i4.xb) {
                        if (i4.ca = a4.ba, i4.tb = a4.tb, e2(null != i4.ca), !Mr(a4.Oa, n4, Rn)) {
                          i4.a = 2;
                          break r;
                        }
                        if (!Ft2(i4, n4.width)) break r;
                        if (n4.da) break r;
                        if ((n4.da || nt2(i4.ca.S)) && mr(), 11 > i4.ca.S || (alert("todo:WebPInitConvertARGBToYUV"), null != i4.ca.f.kb.F && mr()), i4.Pb && 0 < i4.s.ua && null == i4.s.vb.X && !O3(i4.s.vb, i4.s.Wa.Xa)) {
                          i4.a = 1;
                          break r;
                        }
                        i4.xb = 0;
                      }
                      if (!_t2(i4, i4.V, i4.Ba, i4.c, i4.i, n4.o, Lt2)) break r;
                      a4.Dc = i4.Ma, i4 = 1;
                      break e;
                    }
                    e2(0 != i4.a), i4 = 0;
                  }
                  i4 = !i4;
                }
                i4 && (r3 = t5.a);
              } else r3 = t5.a;
            } else {
              if (null == (t5 = new Yt2())) {
                s4 = 1;
                break t;
              }
              if (t5.Fa = a4.na, t5.P = a4.P, t5.qc = a4.Sa, Kt2(t5, i4)) {
                if (0 == (r3 = qr(i4.width, i4.height, s4.Oa, s4.ba))) {
                  if (t5.Aa = 0, n4 = s4.Oa, e2(null != (a4 = t5)), null != n4) {
                    if (0 < (u5 = 0 > (u5 = n4.Md) ? 0 : 100 < u5 ? 255 : 255 * u5 / 100)) {
                      for (h5 = l5 = 0; 4 > h5; ++h5) 12 > (f5 = a4.pb[h5]).lc && (f5.ia = u5 * Ti[0 > f5.lc ? 0 : f5.lc] >> 3), l5 |= f5.ia;
                      l5 && (alert("todo:VP8InitRandom"), a4.ia = 1);
                    }
                    a4.Ga = n4.Id, 100 < a4.Ga ? a4.Ga = 100 : 0 > a4.Ga && (a4.Ga = 0);
                  }
                  Qt2(t5, i4) || (r3 = t5.a);
                }
              } else r3 = t5.a;
            }
            0 == r3 && null != s4.Oa && s4.Oa.fd && (r3 = Er(s4.ba));
          }
          s4 = r3;
        }
        o4 = 0 != s4 ? null : 11 > o4 ? c6.f.RGBA.eb : c6.f.kb.y;
      } else o4 = null;
      return o4;
    };
    var zi = [3, 4, 3, 4, 4, 2, 2, 4, 4, 4, 2, 1, 1];
  }, "c");
  function u3(t4, e3) {
    for (var r3 = "", n4 = 0; n4 < 4; n4++) r3 += String.fromCharCode(t4[e3++]);
    return r3;
  }
  __name(u3, "u3");
  __name2(u3, "u");
  function h3(t4, e3) {
    return (t4[e3 + 0] << 0 | t4[e3 + 1] << 8 | t4[e3 + 2] << 16) >>> 0;
  }
  __name(h3, "h3");
  __name2(h3, "h");
  function l3(t4, e3) {
    return (t4[e3 + 0] << 0 | t4[e3 + 1] << 8 | t4[e3 + 2] << 16 | t4[e3 + 3] << 24) >>> 0;
  }
  __name(l3, "l3");
  __name2(l3, "l");
  new c4();
  var f3 = [0], d2 = [0], p3 = [], g2 = new c4(), m4 = t3, v3 = function(t4, e3) {
    var r3 = {}, n4 = 0, i4 = false, a4 = 0, o4 = 0;
    if (r3.frames = [], !/** @license
     * Copyright (c) 2017 Dominik Homberger
    Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:
    The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.
    THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
    https://webpjs.appspot.com
    WebPRiffParser dominikhlbg@gmail.com
    */
    function(t5, e4, r4, n5) {
      for (var i5 = 0; i5 < n5; i5++) if (t5[e4 + i5] != r4.charCodeAt(i5)) return true;
      return false;
    }(t4, e3, "RIFF", 4)) {
      for (l3(t4, e3 += 4), e3 += 8; e3 < t4.length; ) {
        var s4 = u3(t4, e3), c5 = l3(t4, e3 += 4);
        e3 += 4;
        var f4 = c5 + (1 & c5);
        switch (s4) {
          case "VP8 ":
          case "VP8L":
            void 0 === r3.frames[n4] && (r3.frames[n4] = {}), (g3 = r3.frames[n4]).src_off = i4 ? o4 : e3 - 8, g3.src_size = a4 + c5 + 8, n4++, i4 && (i4 = false, a4 = 0, o4 = 0);
            break;
          case "VP8X":
            (g3 = r3.header = {}).feature_flags = t4[e3];
            var d3 = e3 + 4;
            g3.canvas_width = 1 + h3(t4, d3), d3 += 3, g3.canvas_height = 1 + h3(t4, d3), d3 += 3;
            break;
          case "ALPH":
            i4 = true, a4 = f4 + 8, o4 = e3 - 8;
            break;
          case "ANIM":
            (g3 = r3.header).bgcolor = l3(t4, e3), d3 = e3 + 4, g3.loop_count = (m5 = t4)[(v4 = d3) + 0] << 0 | m5[v4 + 1] << 8, d3 += 2;
            break;
          case "ANMF":
            var p4, g3;
            (g3 = r3.frames[n4] = {}).offset_x = 2 * h3(t4, e3), e3 += 3, g3.offset_y = 2 * h3(t4, e3), e3 += 3, g3.width = 1 + h3(t4, e3), e3 += 3, g3.height = 1 + h3(t4, e3), e3 += 3, g3.duration = h3(t4, e3), e3 += 3, p4 = t4[e3++], g3.dispose = 1 & p4, g3.blend = p4 >> 1 & 1;
        }
        "ANMF" != s4 && (e3 += f4);
      }
      var m5, v4;
      return r3;
    }
  }(m4, 0);
  v3.response = m4, v3.rgbaoutput = true, v3.dataurl = false;
  var b2 = v3.header ? v3.header : null, y3 = v3.frames ? v3.frames : null;
  if (b2) {
    b2.loop_counter = b2.loop_count, f3 = [b2.canvas_height], d2 = [b2.canvas_width];
    for (var w2 = 0; w2 < y3.length && 0 != y3[w2].blend; w2++) ;
  }
  var N3 = y3[0], L2 = g2.WebPDecodeRGBA(m4, N3.src_off, N3.src_size, d2, f3);
  N3.rgba = L2, N3.imgwidth = d2[0], N3.imgheight = f3[0];
  for (var A2 = 0; A2 < d2[0] * f3[0] * 4; A2++) p3[A2] = L2[A2];
  return this.width = d2, this.height = f3, this.data = p3, this;
}
__name(ee, "ee");
var n2;
var a2;
var u2;
var h2;
var l2;
var N2;
var S;
var k;
var q;
var D;
var R;
var T2;
var U;
var z;
var H;
var W;
var V;
var G;
var Y;
var J;
var X;
var K;
var Z;
var $;
var Q;
var tt;
var et2;
var rt;
var nt;
var it;
var at;
var ot;
var st;
var ct;
var ut;
var ht;
var lt;
var ft;
var dt;
var pt;
var gt;
var mt;
var vt;
var bt;
var yt;
var wt;
var Nt;
var Lt;
var At;
var xt;
var St;
var Pt;
var kt;
var It;
var Ft;
var Ct;
var Bt;
var Mt;
var Ut;
var zt;
var Ht;
var Wt;
var Vt;
var Gt;
var Yt;
var Jt;
var Xt;
var Kt;
var re;
var ne;
var ie;
var ae;
var oe;
var se;
var ce;
var ue;
var he;
var le;
var fe;
var de;
var pe;
var ge;
var me;
var ve;
var be;
var ye;
var we;
var Ne;
var Le;
var init_jspdf_es_min = __esm({
  "../node_modules/jspdf/dist/jspdf.es.min.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_typeof();
    init_browser();
    n2 = /* @__PURE__ */ function() {
      return "undefined" != typeof window ? window : "undefined" != typeof global ? global : "undefined" != typeof self ? self : this;
    }();
    __name2(i2, "i");
    a2 = { log: i2, warn: /* @__PURE__ */ __name2(function(t3) {
      n2.console && ("function" == typeof n2.console.warn ? n2.console.warn.apply(n2.console, arguments) : i2.call(null, arguments));
    }, "warn"), error: /* @__PURE__ */ __name2(function(t3) {
      n2.console && ("function" == typeof n2.console.error ? n2.console.error.apply(n2.console, arguments) : i2(t3));
    }, "error") };
    __name2(o2, "o");
    __name2(s2, "s");
    __name2(c3, "c");
    l2 = n2.saveAs || ("object" !== ("undefined" == typeof window ? "undefined" : _typeof(window)) || window !== n2 ? function() {
    } : "undefined" != typeof HTMLAnchorElement && "download" in HTMLAnchorElement.prototype ? function(t3, e2, r2) {
      var i33 = n2.URL || n2.webkitURL, a3 = document.createElement("a");
      e2 = e2 || t3.name || "download", a3.download = e2, a3.rel = "noopener", "string" == typeof t3 ? (a3.href = t3, a3.origin !== location.origin ? s2(a3.href) ? o2(t3, e2, r2) : c3(a3, a3.target = "_blank") : c3(a3)) : (a3.href = i33.createObjectURL(t3), setTimeout(function() {
        i33.revokeObjectURL(a3.href);
      }, 4e4), setTimeout(function() {
        c3(a3);
      }, 0));
    } : "msSaveOrOpenBlob" in navigator ? function(e2, r2, n3) {
      if (r2 = r2 || e2.name || "download", "string" == typeof e2) if (s2(e2)) o2(e2, r2, n3);
      else {
        var i33 = document.createElement("a");
        i33.href = e2, i33.target = "_blank", setTimeout(function() {
          c3(i33);
        });
      }
      else navigator.msSaveOrOpenBlob(function(e3, r3) {
        return void 0 === r3 ? r3 = { autoBom: false } : "object" !== _typeof(r3) && (a2.warn("Deprecated: Expected third argument to be a object"), r3 = { autoBom: !r3 }), r3.autoBom && /^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e3.type) ? new Blob([String.fromCharCode(65279), e3], { type: e3.type }) : e3;
      }(e2, n3), r2);
    } : function(e2, r2, i33, a3) {
      if ((a3 = a3 || open("", "_blank")) && (a3.document.title = a3.document.body.innerText = "downloading..."), "string" == typeof e2) return o2(e2, r2, i33);
      var s3 = "application/octet-stream" === e2.type, c4 = /constructor/i.test(n2.HTMLElement) || n2.safari, u3 = /CriOS\/[\d]+/.test("Cloudflare-Workers");
      if ((u3 || s3 && c4) && "object" === ("undefined" == typeof FileReader ? "undefined" : _typeof(FileReader))) {
        var h3 = new FileReader();
        h3.onloadend = function() {
          var t3 = h3.result;
          t3 = u3 ? t3 : t3.replace(/^data:[^;]*;/, "data:attachment/file;"), a3 ? a3.location.href = t3 : location = t3, a3 = null;
        }, h3.readAsDataURL(e2);
      } else {
        var l3 = n2.URL || n2.webkitURL, f3 = l3.createObjectURL(e2);
        a3 ? a3.location = f3 : location.href = f3, a3 = null, setTimeout(function() {
          l3.revokeObjectURL(f3);
        }, 4e4);
      }
    });
    __name2(f2, "f");
    __name2(d, "d");
    __name2(p2, "p");
    __name2(g, "g");
    __name2(m3, "m");
    __name2(v2, "v");
    __name2(b, "b");
    __name2(y2, "y");
    __name2(w, "w");
    u2 = n2.atob.bind(n2), h2 = n2.btoa.bind(n2);
    N2 = "0123456789abcdef".split("");
    __name2(L, "L");
    __name2(A, "A");
    __name2(x, "x");
    S = "5d41402abc4b2a76b9719d911017c592" != function(t3) {
      for (var e2 = 0; e2 < t3.length; e2++) t3[e2] = L(t3[e2]);
      return t3.join("");
    }(y2("hello"));
    __name2(_2, "_");
    __name2(P, "P");
    k = { print: 4, modify: 8, copy: 16, "annot-forms": 32 };
    __name2(I, "I");
    __name2(F, "F");
    __name2(C, "C");
    __name2(j, "j");
    __name2(O2, "O");
    __name2(B, "B");
    __name2(M, "M");
    __name2(E, "E");
    I.prototype.lsbFirstWord = function(t3) {
      return String.fromCharCode(t3 >> 0 & 255, t3 >> 8 & 255, t3 >> 16 & 255, t3 >> 24 & 255);
    }, I.prototype.toHexString = function(t3) {
      return t3.split("").map(function(t4) {
        return ("0" + (255 & t4.charCodeAt(0)).toString(16)).slice(-2);
      }).join("");
    }, I.prototype.hexToBytes = function(t3) {
      for (var e2 = [], r2 = 0; r2 < t3.length; r2 += 2) e2.push(String.fromCharCode(parseInt(t3.substr(r2, 2), 16)));
      return e2.join("");
    }, I.prototype.processOwnerPassword = function(t3, e2) {
      return P(x(e2).substr(0, 5), t3);
    }, I.prototype.encryptor = function(t3, e2) {
      var r2 = x(this.encryptionKey + String.fromCharCode(255 & t3, t3 >> 8 & 255, t3 >> 16 & 255, 255 & e2, e2 >> 8 & 255)).substr(0, 10);
      return function(t4) {
        return P(r2, t4);
      };
    }, j.prototype.equals = function(e2) {
      var r2, n3 = "id,objectNumber,equals";
      if (!e2 || _typeof(e2) !== _typeof(this)) return false;
      var i33 = 0;
      for (r2 in this) if (!(n3.indexOf(r2) >= 0)) {
        if (this.hasOwnProperty(r2) && !e2.hasOwnProperty(r2)) return false;
        if (this[r2] !== e2[r2]) return false;
        i33++;
      }
      for (r2 in e2) e2.hasOwnProperty(r2) && n3.indexOf(r2) < 0 && i33--;
      return 0 === i33;
    }, E.API = { events: [] }, E.version = "3.0.1";
    q = E.API;
    D = 1;
    R = /* @__PURE__ */ __name2(function(t3) {
      return t3.replace(/\\/g, "\\\\").replace(/\(/g, "\\(").replace(/\)/g, "\\)");
    }, "R");
    T2 = /* @__PURE__ */ __name2(function(t3) {
      return t3.replace(/\\\\/g, "\\").replace(/\\\(/g, "(").replace(/\\\)/g, ")");
    }, "T");
    U = /* @__PURE__ */ __name2(function(t3) {
      return t3.toFixed(2);
    }, "U");
    z = /* @__PURE__ */ __name2(function(t3) {
      return t3.toFixed(5);
    }, "z");
    q.__acroform__ = {};
    H = /* @__PURE__ */ __name2(function(t3, e2) {
      t3.prototype = Object.create(e2.prototype), t3.prototype.constructor = t3;
    }, "H");
    W = /* @__PURE__ */ __name2(function(t3) {
      return t3 * D;
    }, "W");
    V = /* @__PURE__ */ __name2(function(t3) {
      var e2 = new ut(), r2 = At.internal.getHeight(t3) || 0, n3 = At.internal.getWidth(t3) || 0;
      return e2.BBox = [0, 0, Number(U(n3)), Number(U(r2))], e2;
    }, "V");
    G = q.__acroform__.setBit = function(t3, e2) {
      if (t3 = t3 || 0, e2 = e2 || 0, isNaN(t3) || isNaN(e2)) throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");
      return t3 |= 1 << e2;
    };
    Y = q.__acroform__.clearBit = function(t3, e2) {
      if (t3 = t3 || 0, e2 = e2 || 0, isNaN(t3) || isNaN(e2)) throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");
      return t3 &= ~(1 << e2);
    };
    J = q.__acroform__.getBit = function(t3, e2) {
      if (isNaN(t3) || isNaN(e2)) throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");
      return 0 == (t3 & 1 << e2) ? 0 : 1;
    };
    X = q.__acroform__.getBitForPdf = function(t3, e2) {
      if (isNaN(t3) || isNaN(e2)) throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");
      return J(t3, e2 - 1);
    };
    K = q.__acroform__.setBitForPdf = function(t3, e2) {
      if (isNaN(t3) || isNaN(e2)) throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");
      return G(t3, e2 - 1);
    };
    Z = q.__acroform__.clearBitForPdf = function(t3, e2) {
      if (isNaN(t3) || isNaN(e2)) throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");
      return Y(t3, e2 - 1);
    };
    $ = q.__acroform__.calculateCoordinates = function(t3, e2) {
      var r2 = e2.internal.getHorizontalCoordinate, n3 = e2.internal.getVerticalCoordinate, i33 = t3[0], a3 = t3[1], o3 = t3[2], s3 = t3[3], c4 = {};
      return c4.lowerLeft_X = r2(i33) || 0, c4.lowerLeft_Y = n3(a3 + s3) || 0, c4.upperRight_X = r2(i33 + o3) || 0, c4.upperRight_Y = n3(a3) || 0, [Number(U(c4.lowerLeft_X)), Number(U(c4.lowerLeft_Y)), Number(U(c4.upperRight_X)), Number(U(c4.upperRight_Y))];
    };
    Q = /* @__PURE__ */ __name2(function(t3) {
      if (t3.appearanceStreamContent) return t3.appearanceStreamContent;
      if (t3.V || t3.DV) {
        var e2 = [], r2 = t3._V || t3.DV, n3 = tt(t3, r2), i33 = t3.scope.internal.getFont(t3.fontName, t3.fontStyle).id;
        e2.push("/Tx BMC"), e2.push("q"), e2.push("BT"), e2.push(t3.scope.__private__.encodeColorString(t3.color)), e2.push("/" + i33 + " " + U(n3.fontSize) + " Tf"), e2.push("1 0 0 1 0 0 Tm"), e2.push(n3.text), e2.push("ET"), e2.push("Q"), e2.push("EMC");
        var a3 = V(t3);
        return a3.scope = t3.scope, a3.stream = e2.join("\n"), a3;
      }
    }, "Q");
    tt = /* @__PURE__ */ __name2(function(t3, e2) {
      var r2 = 0 === t3.fontSize ? t3.maxFontSize : t3.fontSize, n3 = { text: "", fontSize: "" }, i33 = (e2 = ")" == (e2 = "(" == e2.substr(0, 1) ? e2.substr(1) : e2).substr(e2.length - 1) ? e2.substr(0, e2.length - 1) : e2).split(" ");
      i33 = t3.multiline ? i33.map(function(t4) {
        return t4.split("\n");
      }) : i33.map(function(t4) {
        return [t4];
      });
      var a3 = r2, o3 = At.internal.getHeight(t3) || 0;
      o3 = o3 < 0 ? -o3 : o3;
      var s3 = At.internal.getWidth(t3) || 0;
      s3 = s3 < 0 ? -s3 : s3;
      var c4 = /* @__PURE__ */ __name2(function(e3, r3, n4) {
        if (e3 + 1 < i33.length) {
          var a4 = r3 + " " + i33[e3 + 1][0];
          return et2(a4, t3, n4).width <= s3 - 4;
        }
        return false;
      }, "c");
      a3++;
      t: for (; a3 > 0; ) {
        e2 = "", a3--;
        var u3, h3, l3 = et2("3", t3, a3).height, f3 = t3.multiline ? o3 - a3 : (o3 - l3) / 2, d2 = f3 += 2, p3 = 0, g2 = 0, m4 = 0;
        if (a3 <= 0) {
          e2 = "(...) Tj\n", e2 += "% Width of Text: " + et2(e2, t3, a3 = 12).width + ", FieldWidth:" + s3 + "\n";
          break;
        }
        for (var v3 = "", b2 = 0, y3 = 0; y3 < i33.length; y3++) if (i33.hasOwnProperty(y3)) {
          var w2 = false;
          if (1 !== i33[y3].length && m4 !== i33[y3].length - 1) {
            if ((l3 + 2) * (b2 + 2) + 2 > o3) continue t;
            v3 += i33[y3][m4], w2 = true, g2 = y3, y3--;
          } else {
            v3 = " " == (v3 += i33[y3][m4] + " ").substr(v3.length - 1) ? v3.substr(0, v3.length - 1) : v3;
            var N3 = parseInt(y3), L2 = c4(N3, v3, a3), A2 = y3 >= i33.length - 1;
            if (L2 && !A2) {
              v3 += " ", m4 = 0;
              continue;
            }
            if (L2 || A2) {
              if (A2) g2 = N3;
              else if (t3.multiline && (l3 + 2) * (b2 + 2) + 2 > o3) continue t;
            } else {
              if (!t3.multiline) continue t;
              if ((l3 + 2) * (b2 + 2) + 2 > o3) continue t;
              g2 = N3;
            }
          }
          for (var x22 = "", S2 = p3; S2 <= g2; S2++) {
            var _3 = i33[S2];
            if (t3.multiline) {
              if (S2 === g2) {
                x22 += _3[m4] + " ", m4 = (m4 + 1) % _3.length;
                continue;
              }
              if (S2 === p3) {
                x22 += _3[_3.length - 1] + " ";
                continue;
              }
            }
            x22 += _3[0] + " ";
          }
          switch (x22 = " " == x22.substr(x22.length - 1) ? x22.substr(0, x22.length - 1) : x22, h3 = et2(x22, t3, a3).width, t3.textAlign) {
            case "right":
              u3 = s3 - h3 - 2;
              break;
            case "center":
              u3 = (s3 - h3) / 2;
              break;
            case "left":
            default:
              u3 = 2;
          }
          e2 += U(u3) + " " + U(d2) + " Td\n", e2 += "(" + R(x22) + ") Tj\n", e2 += -U(u3) + " 0 Td\n", d2 = -(a3 + 2), h3 = 0, p3 = w2 ? g2 : g2 + 1, b2++, v3 = "";
        } else ;
        break;
      }
      return n3.text = e2, n3.fontSize = a3, n3;
    }, "tt");
    et2 = /* @__PURE__ */ __name2(function(t3, e2, r2) {
      var n3 = e2.scope.internal.getFont(e2.fontName, e2.fontStyle), i33 = e2.scope.getStringUnitWidth(t3, { font: n3, fontSize: parseFloat(r2), charSpace: 0 }) * parseFloat(r2);
      return { height: e2.scope.getStringUnitWidth("3", { font: n3, fontSize: parseFloat(r2), charSpace: 0 }) * parseFloat(r2) * 1.5, width: i33 };
    }, "et");
    rt = { fields: [], xForms: [], acroFormDictionaryRoot: null, printedOut: false, internal: null, isInitialized: false };
    nt = /* @__PURE__ */ __name2(function(t3, e2) {
      var r2 = { type: "reference", object: t3 };
      void 0 === e2.internal.getPageInfo(t3.page).pageContext.annotations.find(function(t4) {
        return t4.type === r2.type && t4.object === r2.object;
      }) && e2.internal.getPageInfo(t3.page).pageContext.annotations.push(r2);
    }, "nt");
    it = /* @__PURE__ */ __name2(function(e2, r2) {
      for (var n3 in e2) if (e2.hasOwnProperty(n3)) {
        var i33 = n3, a3 = e2[n3];
        r2.internal.newObjectDeferredBegin(a3.objId, true), "object" === _typeof(a3) && "function" == typeof a3.putStream && a3.putStream(), delete e2[i33];
      }
    }, "it");
    at = /* @__PURE__ */ __name2(function(e2, r2) {
      if (r2.scope = e2, void 0 !== e2.internal && (void 0 === e2.internal.acroformPlugin || false === e2.internal.acroformPlugin.isInitialized)) {
        if (lt.FieldNum = 0, e2.internal.acroformPlugin = JSON.parse(JSON.stringify(rt)), e2.internal.acroformPlugin.acroFormDictionaryRoot) throw new Error("Exception while creating AcroformDictionary");
        D = e2.internal.scaleFactor, e2.internal.acroformPlugin.acroFormDictionaryRoot = new ht(), e2.internal.acroformPlugin.acroFormDictionaryRoot.scope = e2, e2.internal.acroformPlugin.acroFormDictionaryRoot._eventID = e2.internal.events.subscribe("postPutResources", function() {
          !function(t3) {
            t3.internal.events.unsubscribe(t3.internal.acroformPlugin.acroFormDictionaryRoot._eventID), delete t3.internal.acroformPlugin.acroFormDictionaryRoot._eventID, t3.internal.acroformPlugin.printedOut = true;
          }(e2);
        }), e2.internal.events.subscribe("buildDocument", function() {
          !function(t3) {
            t3.internal.acroformPlugin.acroFormDictionaryRoot.objId = void 0;
            var e3 = t3.internal.acroformPlugin.acroFormDictionaryRoot.Fields;
            for (var r3 in e3) if (e3.hasOwnProperty(r3)) {
              var n3 = e3[r3];
              n3.objId = void 0, n3.hasAnnotation && nt(n3, t3);
            }
          }(e2);
        }), e2.internal.events.subscribe("putCatalog", function() {
          !function(t3) {
            if (void 0 === t3.internal.acroformPlugin.acroFormDictionaryRoot) throw new Error("putCatalogCallback: Root missing.");
            t3.internal.write("/AcroForm " + t3.internal.acroformPlugin.acroFormDictionaryRoot.objId + " 0 R");
          }(e2);
        }), e2.internal.events.subscribe("postPutPages", function(r3) {
          !function(e3, r4) {
            var n3 = !e3;
            for (var i33 in e3 || (r4.internal.newObjectDeferredBegin(r4.internal.acroformPlugin.acroFormDictionaryRoot.objId, true), r4.internal.acroformPlugin.acroFormDictionaryRoot.putStream()), e3 = e3 || r4.internal.acroformPlugin.acroFormDictionaryRoot.Kids) if (e3.hasOwnProperty(i33)) {
              var a3 = e3[i33], o3 = [], s3 = a3.Rect;
              if (a3.Rect && (a3.Rect = $(a3.Rect, r4)), r4.internal.newObjectDeferredBegin(a3.objId, true), a3.DA = At.createDefaultAppearanceStream(a3), "object" === _typeof(a3) && "function" == typeof a3.getKeyValueListForStream && (o3 = a3.getKeyValueListForStream()), a3.Rect = s3, a3.hasAppearanceStream && !a3.appearanceStreamContent) {
                var c4 = Q(a3);
                o3.push({ key: "AP", value: "<</N " + c4 + ">>" }), r4.internal.acroformPlugin.xForms.push(c4);
              }
              if (a3.appearanceStreamContent) {
                var u3 = "";
                for (var h3 in a3.appearanceStreamContent) if (a3.appearanceStreamContent.hasOwnProperty(h3)) {
                  var l3 = a3.appearanceStreamContent[h3];
                  if (u3 += "/" + h3 + " ", u3 += "<<", Object.keys(l3).length >= 1 || Array.isArray(l3)) {
                    for (var i33 in l3) if (l3.hasOwnProperty(i33)) {
                      var f3 = l3[i33];
                      "function" == typeof f3 && (f3 = f3.call(r4, a3)), u3 += "/" + i33 + " " + f3 + " ", r4.internal.acroformPlugin.xForms.indexOf(f3) >= 0 || r4.internal.acroformPlugin.xForms.push(f3);
                    }
                  } else "function" == typeof (f3 = l3) && (f3 = f3.call(r4, a3)), u3 += "/" + i33 + " " + f3, r4.internal.acroformPlugin.xForms.indexOf(f3) >= 0 || r4.internal.acroformPlugin.xForms.push(f3);
                  u3 += ">>";
                }
                o3.push({ key: "AP", value: "<<\n" + u3 + ">>" });
              }
              r4.internal.putStream({ additionalKeyValues: o3, objectId: a3.objId }), r4.internal.out("endobj");
            }
            n3 && it(r4.internal.acroformPlugin.xForms, r4);
          }(r3, e2);
        }), e2.internal.acroformPlugin.isInitialized = true;
      }
    }, "at");
    ot = q.__acroform__.arrayToPdfArray = function(e2, r2, n3) {
      var i33 = /* @__PURE__ */ __name2(function(t3) {
        return t3;
      }, "i");
      if (Array.isArray(e2)) {
        for (var a3 = "[", o3 = 0; o3 < e2.length; o3++) switch (0 !== o3 && (a3 += " "), _typeof(e2[o3])) {
          case "boolean":
          case "number":
          case "object":
            a3 += e2[o3].toString();
            break;
          case "string":
            "/" !== e2[o3].substr(0, 1) ? (void 0 !== r2 && n3 && (i33 = n3.internal.getEncryptor(r2)), a3 += "(" + R(i33(e2[o3].toString())) + ")") : a3 += e2[o3].toString();
        }
        return a3 += "]";
      }
      throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray");
    };
    st = /* @__PURE__ */ __name2(function(t3, e2, r2) {
      var n3 = /* @__PURE__ */ __name2(function(t4) {
        return t4;
      }, "n");
      return void 0 !== e2 && r2 && (n3 = r2.internal.getEncryptor(e2)), (t3 = t3 || "").toString(), t3 = "(" + R(n3(t3)) + ")";
    }, "st");
    ct = /* @__PURE__ */ __name2(function() {
      this._objId = void 0, this._scope = void 0, Object.defineProperty(this, "objId", { get: /* @__PURE__ */ __name2(function() {
        if (void 0 === this._objId) {
          if (void 0 === this.scope) return;
          this._objId = this.scope.internal.newObjectDeferred();
        }
        return this._objId;
      }, "get"), set: /* @__PURE__ */ __name2(function(t3) {
        this._objId = t3;
      }, "set") }), Object.defineProperty(this, "scope", { value: this._scope, writable: true });
    }, "ct");
    ct.prototype.toString = function() {
      return this.objId + " 0 R";
    }, ct.prototype.putStream = function() {
      var t3 = this.getKeyValueListForStream();
      this.scope.internal.putStream({ data: this.stream, additionalKeyValues: t3, objectId: this.objId }), this.scope.internal.out("endobj");
    }, ct.prototype.getKeyValueListForStream = function() {
      var t3 = [], e2 = Object.getOwnPropertyNames(this).filter(function(t4) {
        return "content" != t4 && "appearanceStreamContent" != t4 && "scope" != t4 && "objId" != t4 && "_" != t4.substring(0, 1);
      });
      for (var r2 in e2) if (false === Object.getOwnPropertyDescriptor(this, e2[r2]).configurable) {
        var n3 = e2[r2], i33 = this[n3];
        i33 && (Array.isArray(i33) ? t3.push({ key: n3, value: ot(i33, this.objId, this.scope) }) : i33 instanceof ct ? (i33.scope = this.scope, t3.push({ key: n3, value: i33.objId + " 0 R" })) : "function" != typeof i33 && t3.push({ key: n3, value: i33 }));
      }
      return t3;
    };
    ut = /* @__PURE__ */ __name2(function() {
      ct.call(this), Object.defineProperty(this, "Type", { value: "/XObject", configurable: false, writable: true }), Object.defineProperty(this, "Subtype", { value: "/Form", configurable: false, writable: true }), Object.defineProperty(this, "FormType", { value: 1, configurable: false, writable: true });
      var t3, e2 = [];
      Object.defineProperty(this, "BBox", { configurable: false, get: /* @__PURE__ */ __name2(function() {
        return e2;
      }, "get"), set: /* @__PURE__ */ __name2(function(t4) {
        e2 = t4;
      }, "set") }), Object.defineProperty(this, "Resources", { value: "2 0 R", configurable: false, writable: true }), Object.defineProperty(this, "stream", { enumerable: false, configurable: true, set: /* @__PURE__ */ __name2(function(e3) {
        t3 = e3.trim();
      }, "set"), get: /* @__PURE__ */ __name2(function() {
        return t3 || null;
      }, "get") });
    }, "ut");
    H(ut, ct);
    ht = /* @__PURE__ */ __name2(function() {
      ct.call(this);
      var t3, e2 = [];
      Object.defineProperty(this, "Kids", { enumerable: false, configurable: true, get: /* @__PURE__ */ __name2(function() {
        return e2.length > 0 ? e2 : void 0;
      }, "get") }), Object.defineProperty(this, "Fields", { enumerable: false, configurable: false, get: /* @__PURE__ */ __name2(function() {
        return e2;
      }, "get") }), Object.defineProperty(this, "DA", { enumerable: false, configurable: false, get: /* @__PURE__ */ __name2(function() {
        if (t3) {
          var e3 = /* @__PURE__ */ __name2(function(t4) {
            return t4;
          }, "e");
          return this.scope && (e3 = this.scope.internal.getEncryptor(this.objId)), "(" + R(e3(t3)) + ")";
        }
      }, "get"), set: /* @__PURE__ */ __name2(function(e3) {
        t3 = e3;
      }, "set") });
    }, "ht");
    H(ht, ct);
    lt = /* @__PURE__ */ __name2(/* @__PURE__ */ __name(function t2() {
      ct.call(this);
      var e2 = 4;
      Object.defineProperty(this, "F", { enumerable: false, configurable: false, get: /* @__PURE__ */ __name2(function() {
        return e2;
      }, "get"), set: /* @__PURE__ */ __name2(function(t3) {
        if (isNaN(t3)) throw new Error('Invalid value "' + t3 + '" for attribute F supplied.');
        e2 = t3;
      }, "set") }), Object.defineProperty(this, "showWhenPrinted", { enumerable: true, configurable: true, get: /* @__PURE__ */ __name2(function() {
        return Boolean(X(e2, 3));
      }, "get"), set: /* @__PURE__ */ __name2(function(t3) {
        true === Boolean(t3) ? this.F = K(e2, 3) : this.F = Z(e2, 3);
      }, "set") });
      var r2 = 0;
      Object.defineProperty(this, "Ff", { enumerable: false, configurable: false, get: /* @__PURE__ */ __name2(function() {
        return r2;
      }, "get"), set: /* @__PURE__ */ __name2(function(t3) {
        if (isNaN(t3)) throw new Error('Invalid value "' + t3 + '" for attribute Ff supplied.');
        r2 = t3;
      }, "set") });
      var n3 = [];
      Object.defineProperty(this, "Rect", { enumerable: false, configurable: false, get: /* @__PURE__ */ __name2(function() {
        if (0 !== n3.length) return n3;
      }, "get"), set: /* @__PURE__ */ __name2(function(t3) {
        n3 = void 0 !== t3 ? t3 : [];
      }, "set") }), Object.defineProperty(this, "x", { enumerable: true, configurable: true, get: /* @__PURE__ */ __name2(function() {
        return !n3 || isNaN(n3[0]) ? 0 : n3[0];
      }, "get"), set: /* @__PURE__ */ __name2(function(t3) {
        n3[0] = t3;
      }, "set") }), Object.defineProperty(this, "y", { enumerable: true, configurable: true, get: /* @__PURE__ */ __name2(function() {
        return !n3 || isNaN(n3[1]) ? 0 : n3[1];
      }, "get"), set: /* @__PURE__ */ __name2(function(t3) {
        n3[1] = t3;
      }, "set") }), Object.defineProperty(this, "width", { enumerable: true, configurable: true, get: /* @__PURE__ */ __name2(function() {
        return !n3 || isNaN(n3[2]) ? 0 : n3[2];
      }, "get"), set: /* @__PURE__ */ __name2(function(t3) {
        n3[2] = t3;
      }, "set") }), Object.defineProperty(this, "height", { enumerable: true, configurable: true, get: /* @__PURE__ */ __name2(function() {
        return !n3 || isNaN(n3[3]) ? 0 : n3[3];
      }, "get"), set: /* @__PURE__ */ __name2(function(t3) {
        n3[3] = t3;
      }, "set") });
      var i33 = "";
      Object.defineProperty(this, "FT", { enumerable: true, configurable: false, get: /* @__PURE__ */ __name2(function() {
        return i33;
      }, "get"), set: /* @__PURE__ */ __name2(function(t3) {
        switch (t3) {
          case "/Btn":
          case "/Tx":
          case "/Ch":
          case "/Sig":
            i33 = t3;
            break;
          default:
            throw new Error('Invalid value "' + t3 + '" for attribute FT supplied.');
        }
      }, "set") });
      var a3 = null;
      Object.defineProperty(this, "T", { enumerable: true, configurable: false, get: /* @__PURE__ */ __name2(function() {
        if (!a3 || a3.length < 1) {
          if (this instanceof yt) return;
          a3 = "FieldObject" + t2.FieldNum++;
        }
        var e3 = /* @__PURE__ */ __name2(function(t3) {
          return t3;
        }, "e");
        return this.scope && (e3 = this.scope.internal.getEncryptor(this.objId)), "(" + R(e3(a3)) + ")";
      }, "get"), set: /* @__PURE__ */ __name2(function(t3) {
        a3 = t3.toString();
      }, "set") }), Object.defineProperty(this, "fieldName", { configurable: true, enumerable: true, get: /* @__PURE__ */ __name2(function() {
        return a3;
      }, "get"), set: /* @__PURE__ */ __name2(function(t3) {
        a3 = t3;
      }, "set") });
      var o3 = "helvetica";
      Object.defineProperty(this, "fontName", { enumerable: true, configurable: true, get: /* @__PURE__ */ __name2(function() {
        return o3;
      }, "get"), set: /* @__PURE__ */ __name2(function(t3) {
        o3 = t3;
      }, "set") });
      var s3 = "normal";
      Object.defineProperty(this, "fontStyle", { enumerable: true, configurable: true, get: /* @__PURE__ */ __name2(function() {
        return s3;
      }, "get"), set: /* @__PURE__ */ __name2(function(t3) {
        s3 = t3;
      }, "set") });
      var c4 = 0;
      Object.defineProperty(this, "fontSize", { enumerable: true, configurable: true, get: /* @__PURE__ */ __name2(function() {
        return c4;
      }, "get"), set: /* @__PURE__ */ __name2(function(t3) {
        c4 = t3;
      }, "set") });
      var u3 = void 0;
      Object.defineProperty(this, "maxFontSize", { enumerable: true, configurable: true, get: /* @__PURE__ */ __name2(function() {
        return void 0 === u3 ? 50 / D : u3;
      }, "get"), set: /* @__PURE__ */ __name2(function(t3) {
        u3 = t3;
      }, "set") });
      var h3 = "black";
      Object.defineProperty(this, "color", { enumerable: true, configurable: true, get: /* @__PURE__ */ __name2(function() {
        return h3;
      }, "get"), set: /* @__PURE__ */ __name2(function(t3) {
        h3 = t3;
      }, "set") });
      var l3 = "/F1 0 Tf 0 g";
      Object.defineProperty(this, "DA", { enumerable: true, configurable: false, get: /* @__PURE__ */ __name2(function() {
        if (!(!l3 || this instanceof yt || this instanceof Nt)) return st(l3, this.objId, this.scope);
      }, "get"), set: /* @__PURE__ */ __name2(function(t3) {
        t3 = t3.toString(), l3 = t3;
      }, "set") });
      var f3 = null;
      Object.defineProperty(this, "DV", { enumerable: false, configurable: false, get: /* @__PURE__ */ __name2(function() {
        if (f3) return this instanceof mt == false ? st(f3, this.objId, this.scope) : f3;
      }, "get"), set: /* @__PURE__ */ __name2(function(t3) {
        t3 = t3.toString(), f3 = this instanceof mt == false ? "(" === t3.substr(0, 1) ? T2(t3.substr(1, t3.length - 2)) : T2(t3) : t3;
      }, "set") }), Object.defineProperty(this, "defaultValue", { enumerable: true, configurable: true, get: /* @__PURE__ */ __name2(function() {
        return this instanceof mt == true ? T2(f3.substr(1, f3.length - 1)) : f3;
      }, "get"), set: /* @__PURE__ */ __name2(function(t3) {
        t3 = t3.toString(), f3 = this instanceof mt == true ? "/" + t3 : t3;
      }, "set") });
      var d2 = null;
      Object.defineProperty(this, "_V", { enumerable: false, configurable: false, get: /* @__PURE__ */ __name2(function() {
        if (d2) return d2;
      }, "get"), set: /* @__PURE__ */ __name2(function(t3) {
        this.V = t3;
      }, "set") }), Object.defineProperty(this, "V", { enumerable: false, configurable: false, get: /* @__PURE__ */ __name2(function() {
        if (d2) return this instanceof mt == false ? st(d2, this.objId, this.scope) : d2;
      }, "get"), set: /* @__PURE__ */ __name2(function(t3) {
        t3 = t3.toString(), d2 = this instanceof mt == false ? "(" === t3.substr(0, 1) ? T2(t3.substr(1, t3.length - 2)) : T2(t3) : t3;
      }, "set") }), Object.defineProperty(this, "value", { enumerable: true, configurable: true, get: /* @__PURE__ */ __name2(function() {
        return this instanceof mt == true ? T2(d2.substr(1, d2.length - 1)) : d2;
      }, "get"), set: /* @__PURE__ */ __name2(function(t3) {
        t3 = t3.toString(), d2 = this instanceof mt == true ? "/" + t3 : t3;
      }, "set") }), Object.defineProperty(this, "hasAnnotation", { enumerable: true, configurable: true, get: /* @__PURE__ */ __name2(function() {
        return this.Rect;
      }, "get") }), Object.defineProperty(this, "Type", { enumerable: true, configurable: false, get: /* @__PURE__ */ __name2(function() {
        return this.hasAnnotation ? "/Annot" : null;
      }, "get") }), Object.defineProperty(this, "Subtype", { enumerable: true, configurable: false, get: /* @__PURE__ */ __name2(function() {
        return this.hasAnnotation ? "/Widget" : null;
      }, "get") });
      var p3, g2 = false;
      Object.defineProperty(this, "hasAppearanceStream", { enumerable: true, configurable: true, get: /* @__PURE__ */ __name2(function() {
        return g2;
      }, "get"), set: /* @__PURE__ */ __name2(function(t3) {
        t3 = Boolean(t3), g2 = t3;
      }, "set") }), Object.defineProperty(this, "page", { enumerable: true, configurable: true, get: /* @__PURE__ */ __name2(function() {
        if (p3) return p3;
      }, "get"), set: /* @__PURE__ */ __name2(function(t3) {
        p3 = t3;
      }, "set") }), Object.defineProperty(this, "readOnly", { enumerable: true, configurable: true, get: /* @__PURE__ */ __name2(function() {
        return Boolean(X(this.Ff, 1));
      }, "get"), set: /* @__PURE__ */ __name2(function(t3) {
        true === Boolean(t3) ? this.Ff = K(this.Ff, 1) : this.Ff = Z(this.Ff, 1);
      }, "set") }), Object.defineProperty(this, "required", { enumerable: true, configurable: true, get: /* @__PURE__ */ __name2(function() {
        return Boolean(X(this.Ff, 2));
      }, "get"), set: /* @__PURE__ */ __name2(function(t3) {
        true === Boolean(t3) ? this.Ff = K(this.Ff, 2) : this.Ff = Z(this.Ff, 2);
      }, "set") }), Object.defineProperty(this, "noExport", { enumerable: true, configurable: true, get: /* @__PURE__ */ __name2(function() {
        return Boolean(X(this.Ff, 3));
      }, "get"), set: /* @__PURE__ */ __name2(function(t3) {
        true === Boolean(t3) ? this.Ff = K(this.Ff, 3) : this.Ff = Z(this.Ff, 3);
      }, "set") });
      var m4 = null;
      Object.defineProperty(this, "Q", { enumerable: true, configurable: false, get: /* @__PURE__ */ __name2(function() {
        if (null !== m4) return m4;
      }, "get"), set: /* @__PURE__ */ __name2(function(t3) {
        if (-1 === [0, 1, 2].indexOf(t3)) throw new Error('Invalid value "' + t3 + '" for attribute Q supplied.');
        m4 = t3;
      }, "set") }), Object.defineProperty(this, "textAlign", { get: /* @__PURE__ */ __name2(function() {
        var t3;
        switch (m4) {
          case 0:
          default:
            t3 = "left";
            break;
          case 1:
            t3 = "center";
            break;
          case 2:
            t3 = "right";
        }
        return t3;
      }, "get"), configurable: true, enumerable: true, set: /* @__PURE__ */ __name2(function(t3) {
        switch (t3) {
          case "right":
          case 2:
            m4 = 2;
            break;
          case "center":
          case 1:
            m4 = 1;
            break;
          case "left":
          case 0:
          default:
            m4 = 0;
        }
      }, "set") });
    }, "t2"), "t");
    H(lt, ct);
    ft = /* @__PURE__ */ __name2(function() {
      lt.call(this), this.FT = "/Ch", this.V = "()", this.fontName = "zapfdingbats";
      var t3 = 0;
      Object.defineProperty(this, "TI", { enumerable: true, configurable: false, get: /* @__PURE__ */ __name2(function() {
        return t3;
      }, "get"), set: /* @__PURE__ */ __name2(function(e3) {
        t3 = e3;
      }, "set") }), Object.defineProperty(this, "topIndex", { enumerable: true, configurable: true, get: /* @__PURE__ */ __name2(function() {
        return t3;
      }, "get"), set: /* @__PURE__ */ __name2(function(e3) {
        t3 = e3;
      }, "set") });
      var e2 = [];
      Object.defineProperty(this, "Opt", { enumerable: true, configurable: false, get: /* @__PURE__ */ __name2(function() {
        return ot(e2, this.objId, this.scope);
      }, "get"), set: /* @__PURE__ */ __name2(function(t4) {
        var r2, n3;
        n3 = [], "string" == typeof (r2 = t4) && (n3 = function(t5, e3, r3) {
          r3 || (r3 = 1);
          for (var n4, i33 = []; n4 = e3.exec(t5); ) i33.push(n4[r3]);
          return i33;
        }(r2, /\((.*?)\)/g)), e2 = n3;
      }, "set") }), this.getOptions = function() {
        return e2;
      }, this.setOptions = function(t4) {
        e2 = t4, this.sort && e2.sort();
      }, this.addOption = function(t4) {
        t4 = (t4 = t4 || "").toString(), e2.push(t4), this.sort && e2.sort();
      }, this.removeOption = function(t4, r2) {
        for (r2 = r2 || false, t4 = (t4 = t4 || "").toString(); -1 !== e2.indexOf(t4) && (e2.splice(e2.indexOf(t4), 1), false !== r2); ) ;
      }, Object.defineProperty(this, "combo", { enumerable: true, configurable: true, get: /* @__PURE__ */ __name2(function() {
        return Boolean(X(this.Ff, 18));
      }, "get"), set: /* @__PURE__ */ __name2(function(t4) {
        true === Boolean(t4) ? this.Ff = K(this.Ff, 18) : this.Ff = Z(this.Ff, 18);
      }, "set") }), Object.defineProperty(this, "edit", { enumerable: true, configurable: true, get: /* @__PURE__ */ __name2(function() {
        return Boolean(X(this.Ff, 19));
      }, "get"), set: /* @__PURE__ */ __name2(function(t4) {
        true === this.combo && (true === Boolean(t4) ? this.Ff = K(this.Ff, 19) : this.Ff = Z(this.Ff, 19));
      }, "set") }), Object.defineProperty(this, "sort", { enumerable: true, configurable: true, get: /* @__PURE__ */ __name2(function() {
        return Boolean(X(this.Ff, 20));
      }, "get"), set: /* @__PURE__ */ __name2(function(t4) {
        true === Boolean(t4) ? (this.Ff = K(this.Ff, 20), e2.sort()) : this.Ff = Z(this.Ff, 20);
      }, "set") }), Object.defineProperty(this, "multiSelect", { enumerable: true, configurable: true, get: /* @__PURE__ */ __name2(function() {
        return Boolean(X(this.Ff, 22));
      }, "get"), set: /* @__PURE__ */ __name2(function(t4) {
        true === Boolean(t4) ? this.Ff = K(this.Ff, 22) : this.Ff = Z(this.Ff, 22);
      }, "set") }), Object.defineProperty(this, "doNotSpellCheck", { enumerable: true, configurable: true, get: /* @__PURE__ */ __name2(function() {
        return Boolean(X(this.Ff, 23));
      }, "get"), set: /* @__PURE__ */ __name2(function(t4) {
        true === Boolean(t4) ? this.Ff = K(this.Ff, 23) : this.Ff = Z(this.Ff, 23);
      }, "set") }), Object.defineProperty(this, "commitOnSelChange", { enumerable: true, configurable: true, get: /* @__PURE__ */ __name2(function() {
        return Boolean(X(this.Ff, 27));
      }, "get"), set: /* @__PURE__ */ __name2(function(t4) {
        true === Boolean(t4) ? this.Ff = K(this.Ff, 27) : this.Ff = Z(this.Ff, 27);
      }, "set") }), this.hasAppearanceStream = false;
    }, "ft");
    H(ft, lt);
    dt = /* @__PURE__ */ __name2(function() {
      ft.call(this), this.fontName = "helvetica", this.combo = false;
    }, "dt");
    H(dt, ft);
    pt = /* @__PURE__ */ __name2(function() {
      dt.call(this), this.combo = true;
    }, "pt");
    H(pt, dt);
    gt = /* @__PURE__ */ __name2(function() {
      pt.call(this), this.edit = true;
    }, "gt");
    H(gt, pt);
    mt = /* @__PURE__ */ __name2(function() {
      lt.call(this), this.FT = "/Btn", Object.defineProperty(this, "noToggleToOff", { enumerable: true, configurable: true, get: /* @__PURE__ */ __name2(function() {
        return Boolean(X(this.Ff, 15));
      }, "get"), set: /* @__PURE__ */ __name2(function(t3) {
        true === Boolean(t3) ? this.Ff = K(this.Ff, 15) : this.Ff = Z(this.Ff, 15);
      }, "set") }), Object.defineProperty(this, "radio", { enumerable: true, configurable: true, get: /* @__PURE__ */ __name2(function() {
        return Boolean(X(this.Ff, 16));
      }, "get"), set: /* @__PURE__ */ __name2(function(t3) {
        true === Boolean(t3) ? this.Ff = K(this.Ff, 16) : this.Ff = Z(this.Ff, 16);
      }, "set") }), Object.defineProperty(this, "pushButton", { enumerable: true, configurable: true, get: /* @__PURE__ */ __name2(function() {
        return Boolean(X(this.Ff, 17));
      }, "get"), set: /* @__PURE__ */ __name2(function(t3) {
        true === Boolean(t3) ? this.Ff = K(this.Ff, 17) : this.Ff = Z(this.Ff, 17);
      }, "set") }), Object.defineProperty(this, "radioIsUnison", { enumerable: true, configurable: true, get: /* @__PURE__ */ __name2(function() {
        return Boolean(X(this.Ff, 26));
      }, "get"), set: /* @__PURE__ */ __name2(function(t3) {
        true === Boolean(t3) ? this.Ff = K(this.Ff, 26) : this.Ff = Z(this.Ff, 26);
      }, "set") });
      var e2, r2 = {};
      Object.defineProperty(this, "MK", { enumerable: false, configurable: false, get: /* @__PURE__ */ __name2(function() {
        var t3 = /* @__PURE__ */ __name2(function(t4) {
          return t4;
        }, "t");
        if (this.scope && (t3 = this.scope.internal.getEncryptor(this.objId)), 0 !== Object.keys(r2).length) {
          var e3, n3 = [];
          for (e3 in n3.push("<<"), r2) n3.push("/" + e3 + " (" + R(t3(r2[e3])) + ")");
          return n3.push(">>"), n3.join("\n");
        }
      }, "get"), set: /* @__PURE__ */ __name2(function(e3) {
        "object" === _typeof(e3) && (r2 = e3);
      }, "set") }), Object.defineProperty(this, "caption", { enumerable: true, configurable: true, get: /* @__PURE__ */ __name2(function() {
        return r2.CA || "";
      }, "get"), set: /* @__PURE__ */ __name2(function(t3) {
        "string" == typeof t3 && (r2.CA = t3);
      }, "set") }), Object.defineProperty(this, "AS", { enumerable: false, configurable: false, get: /* @__PURE__ */ __name2(function() {
        return e2;
      }, "get"), set: /* @__PURE__ */ __name2(function(t3) {
        e2 = t3;
      }, "set") }), Object.defineProperty(this, "appearanceState", { enumerable: true, configurable: true, get: /* @__PURE__ */ __name2(function() {
        return e2.substr(1, e2.length - 1);
      }, "get"), set: /* @__PURE__ */ __name2(function(t3) {
        e2 = "/" + t3;
      }, "set") });
    }, "mt");
    H(mt, lt);
    vt = /* @__PURE__ */ __name2(function() {
      mt.call(this), this.pushButton = true;
    }, "vt");
    H(vt, mt);
    bt = /* @__PURE__ */ __name2(function() {
      mt.call(this), this.radio = true, this.pushButton = false;
      var t3 = [];
      Object.defineProperty(this, "Kids", { enumerable: true, configurable: false, get: /* @__PURE__ */ __name2(function() {
        return t3;
      }, "get"), set: /* @__PURE__ */ __name2(function(e2) {
        t3 = void 0 !== e2 ? e2 : [];
      }, "set") });
    }, "bt");
    H(bt, mt);
    yt = /* @__PURE__ */ __name2(function() {
      var e2, r2;
      lt.call(this), Object.defineProperty(this, "Parent", { enumerable: false, configurable: false, get: /* @__PURE__ */ __name2(function() {
        return e2;
      }, "get"), set: /* @__PURE__ */ __name2(function(t3) {
        e2 = t3;
      }, "set") }), Object.defineProperty(this, "optionName", { enumerable: false, configurable: true, get: /* @__PURE__ */ __name2(function() {
        return r2;
      }, "get"), set: /* @__PURE__ */ __name2(function(t3) {
        r2 = t3;
      }, "set") });
      var n3, i33 = {};
      Object.defineProperty(this, "MK", { enumerable: false, configurable: false, get: /* @__PURE__ */ __name2(function() {
        var t3 = /* @__PURE__ */ __name2(function(t4) {
          return t4;
        }, "t");
        this.scope && (t3 = this.scope.internal.getEncryptor(this.objId));
        var e3, r3 = [];
        for (e3 in r3.push("<<"), i33) r3.push("/" + e3 + " (" + R(t3(i33[e3])) + ")");
        return r3.push(">>"), r3.join("\n");
      }, "get"), set: /* @__PURE__ */ __name2(function(e3) {
        "object" === _typeof(e3) && (i33 = e3);
      }, "set") }), Object.defineProperty(this, "caption", { enumerable: true, configurable: true, get: /* @__PURE__ */ __name2(function() {
        return i33.CA || "";
      }, "get"), set: /* @__PURE__ */ __name2(function(t3) {
        "string" == typeof t3 && (i33.CA = t3);
      }, "set") }), Object.defineProperty(this, "AS", { enumerable: false, configurable: false, get: /* @__PURE__ */ __name2(function() {
        return n3;
      }, "get"), set: /* @__PURE__ */ __name2(function(t3) {
        n3 = t3;
      }, "set") }), Object.defineProperty(this, "appearanceState", { enumerable: true, configurable: true, get: /* @__PURE__ */ __name2(function() {
        return n3.substr(1, n3.length - 1);
      }, "get"), set: /* @__PURE__ */ __name2(function(t3) {
        n3 = "/" + t3;
      }, "set") }), this.caption = "l", this.appearanceState = "Off", this._AppearanceType = At.RadioButton.Circle, this.appearanceStreamContent = this._AppearanceType.createAppearanceStream(this.optionName);
    }, "yt");
    H(yt, lt), bt.prototype.setAppearance = function(t3) {
      if (!("createAppearanceStream" in t3) || !("getCA" in t3)) throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");
      for (var e2 in this.Kids) if (this.Kids.hasOwnProperty(e2)) {
        var r2 = this.Kids[e2];
        r2.appearanceStreamContent = t3.createAppearanceStream(r2.optionName), r2.caption = t3.getCA();
      }
    }, bt.prototype.createOption = function(t3) {
      var e2 = new yt();
      return e2.Parent = this, e2.optionName = t3, this.Kids.push(e2), xt.call(this.scope, e2), e2;
    };
    wt = /* @__PURE__ */ __name2(function() {
      mt.call(this), this.fontName = "zapfdingbats", this.caption = "3", this.appearanceState = "On", this.value = "On", this.textAlign = "center", this.appearanceStreamContent = At.CheckBox.createAppearanceStream();
    }, "wt");
    H(wt, mt);
    Nt = /* @__PURE__ */ __name2(function() {
      lt.call(this), this.FT = "/Tx", Object.defineProperty(this, "multiline", { enumerable: true, configurable: true, get: /* @__PURE__ */ __name2(function() {
        return Boolean(X(this.Ff, 13));
      }, "get"), set: /* @__PURE__ */ __name2(function(t4) {
        true === Boolean(t4) ? this.Ff = K(this.Ff, 13) : this.Ff = Z(this.Ff, 13);
      }, "set") }), Object.defineProperty(this, "fileSelect", { enumerable: true, configurable: true, get: /* @__PURE__ */ __name2(function() {
        return Boolean(X(this.Ff, 21));
      }, "get"), set: /* @__PURE__ */ __name2(function(t4) {
        true === Boolean(t4) ? this.Ff = K(this.Ff, 21) : this.Ff = Z(this.Ff, 21);
      }, "set") }), Object.defineProperty(this, "doNotSpellCheck", { enumerable: true, configurable: true, get: /* @__PURE__ */ __name2(function() {
        return Boolean(X(this.Ff, 23));
      }, "get"), set: /* @__PURE__ */ __name2(function(t4) {
        true === Boolean(t4) ? this.Ff = K(this.Ff, 23) : this.Ff = Z(this.Ff, 23);
      }, "set") }), Object.defineProperty(this, "doNotScroll", { enumerable: true, configurable: true, get: /* @__PURE__ */ __name2(function() {
        return Boolean(X(this.Ff, 24));
      }, "get"), set: /* @__PURE__ */ __name2(function(t4) {
        true === Boolean(t4) ? this.Ff = K(this.Ff, 24) : this.Ff = Z(this.Ff, 24);
      }, "set") }), Object.defineProperty(this, "comb", { enumerable: true, configurable: true, get: /* @__PURE__ */ __name2(function() {
        return Boolean(X(this.Ff, 25));
      }, "get"), set: /* @__PURE__ */ __name2(function(t4) {
        true === Boolean(t4) ? this.Ff = K(this.Ff, 25) : this.Ff = Z(this.Ff, 25);
      }, "set") }), Object.defineProperty(this, "richText", { enumerable: true, configurable: true, get: /* @__PURE__ */ __name2(function() {
        return Boolean(X(this.Ff, 26));
      }, "get"), set: /* @__PURE__ */ __name2(function(t4) {
        true === Boolean(t4) ? this.Ff = K(this.Ff, 26) : this.Ff = Z(this.Ff, 26);
      }, "set") });
      var t3 = null;
      Object.defineProperty(this, "MaxLen", { enumerable: true, configurable: false, get: /* @__PURE__ */ __name2(function() {
        return t3;
      }, "get"), set: /* @__PURE__ */ __name2(function(e2) {
        t3 = e2;
      }, "set") }), Object.defineProperty(this, "maxLength", { enumerable: true, configurable: true, get: /* @__PURE__ */ __name2(function() {
        return t3;
      }, "get"), set: /* @__PURE__ */ __name2(function(e2) {
        Number.isInteger(e2) && (t3 = e2);
      }, "set") }), Object.defineProperty(this, "hasAppearanceStream", { enumerable: true, configurable: true, get: /* @__PURE__ */ __name2(function() {
        return this.V || this.DV;
      }, "get") });
    }, "Nt");
    H(Nt, lt);
    Lt = /* @__PURE__ */ __name2(function() {
      Nt.call(this), Object.defineProperty(this, "password", { enumerable: true, configurable: true, get: /* @__PURE__ */ __name2(function() {
        return Boolean(X(this.Ff, 14));
      }, "get"), set: /* @__PURE__ */ __name2(function(t3) {
        true === Boolean(t3) ? this.Ff = K(this.Ff, 14) : this.Ff = Z(this.Ff, 14);
      }, "set") }), this.password = true;
    }, "Lt");
    H(Lt, Nt);
    At = { CheckBox: { createAppearanceStream: /* @__PURE__ */ __name2(function() {
      return { N: { On: At.CheckBox.YesNormal }, D: { On: At.CheckBox.YesPushDown, Off: At.CheckBox.OffPushDown } };
    }, "createAppearanceStream"), YesPushDown: /* @__PURE__ */ __name2(function(t3) {
      var e2 = V(t3);
      e2.scope = t3.scope;
      var r2 = [], n3 = t3.scope.internal.getFont(t3.fontName, t3.fontStyle).id, i33 = t3.scope.__private__.encodeColorString(t3.color), a3 = tt(t3, t3.caption);
      return r2.push("0.749023 g"), r2.push("0 0 " + U(At.internal.getWidth(t3)) + " " + U(At.internal.getHeight(t3)) + " re"), r2.push("f"), r2.push("BMC"), r2.push("q"), r2.push("0 0 1 rg"), r2.push("/" + n3 + " " + U(a3.fontSize) + " Tf " + i33), r2.push("BT"), r2.push(a3.text), r2.push("ET"), r2.push("Q"), r2.push("EMC"), e2.stream = r2.join("\n"), e2;
    }, "YesPushDown"), YesNormal: /* @__PURE__ */ __name2(function(t3) {
      var e2 = V(t3);
      e2.scope = t3.scope;
      var r2 = t3.scope.internal.getFont(t3.fontName, t3.fontStyle).id, n3 = t3.scope.__private__.encodeColorString(t3.color), i33 = [], a3 = At.internal.getHeight(t3), o3 = At.internal.getWidth(t3), s3 = tt(t3, t3.caption);
      return i33.push("1 g"), i33.push("0 0 " + U(o3) + " " + U(a3) + " re"), i33.push("f"), i33.push("q"), i33.push("0 0 1 rg"), i33.push("0 0 " + U(o3 - 1) + " " + U(a3 - 1) + " re"), i33.push("W"), i33.push("n"), i33.push("0 g"), i33.push("BT"), i33.push("/" + r2 + " " + U(s3.fontSize) + " Tf " + n3), i33.push(s3.text), i33.push("ET"), i33.push("Q"), e2.stream = i33.join("\n"), e2;
    }, "YesNormal"), OffPushDown: /* @__PURE__ */ __name2(function(t3) {
      var e2 = V(t3);
      e2.scope = t3.scope;
      var r2 = [];
      return r2.push("0.749023 g"), r2.push("0 0 " + U(At.internal.getWidth(t3)) + " " + U(At.internal.getHeight(t3)) + " re"), r2.push("f"), e2.stream = r2.join("\n"), e2;
    }, "OffPushDown") }, RadioButton: { Circle: { createAppearanceStream: /* @__PURE__ */ __name2(function(t3) {
      var e2 = { D: { Off: At.RadioButton.Circle.OffPushDown }, N: {} };
      return e2.N[t3] = At.RadioButton.Circle.YesNormal, e2.D[t3] = At.RadioButton.Circle.YesPushDown, e2;
    }, "createAppearanceStream"), getCA: /* @__PURE__ */ __name2(function() {
      return "l";
    }, "getCA"), YesNormal: /* @__PURE__ */ __name2(function(t3) {
      var e2 = V(t3);
      e2.scope = t3.scope;
      var r2 = [], n3 = At.internal.getWidth(t3) <= At.internal.getHeight(t3) ? At.internal.getWidth(t3) / 4 : At.internal.getHeight(t3) / 4;
      n3 = Number((0.9 * n3).toFixed(5));
      var i33 = At.internal.Bezier_C, a3 = Number((n3 * i33).toFixed(5));
      return r2.push("q"), r2.push("1 0 0 1 " + z(At.internal.getWidth(t3) / 2) + " " + z(At.internal.getHeight(t3) / 2) + " cm"), r2.push(n3 + " 0 m"), r2.push(n3 + " " + a3 + " " + a3 + " " + n3 + " 0 " + n3 + " c"), r2.push("-" + a3 + " " + n3 + " -" + n3 + " " + a3 + " -" + n3 + " 0 c"), r2.push("-" + n3 + " -" + a3 + " -" + a3 + " -" + n3 + " 0 -" + n3 + " c"), r2.push(a3 + " -" + n3 + " " + n3 + " -" + a3 + " " + n3 + " 0 c"), r2.push("f"), r2.push("Q"), e2.stream = r2.join("\n"), e2;
    }, "YesNormal"), YesPushDown: /* @__PURE__ */ __name2(function(t3) {
      var e2 = V(t3);
      e2.scope = t3.scope;
      var r2 = [], n3 = At.internal.getWidth(t3) <= At.internal.getHeight(t3) ? At.internal.getWidth(t3) / 4 : At.internal.getHeight(t3) / 4;
      n3 = Number((0.9 * n3).toFixed(5));
      var i33 = Number((2 * n3).toFixed(5)), a3 = Number((i33 * At.internal.Bezier_C).toFixed(5)), o3 = Number((n3 * At.internal.Bezier_C).toFixed(5));
      return r2.push("0.749023 g"), r2.push("q"), r2.push("1 0 0 1 " + z(At.internal.getWidth(t3) / 2) + " " + z(At.internal.getHeight(t3) / 2) + " cm"), r2.push(i33 + " 0 m"), r2.push(i33 + " " + a3 + " " + a3 + " " + i33 + " 0 " + i33 + " c"), r2.push("-" + a3 + " " + i33 + " -" + i33 + " " + a3 + " -" + i33 + " 0 c"), r2.push("-" + i33 + " -" + a3 + " -" + a3 + " -" + i33 + " 0 -" + i33 + " c"), r2.push(a3 + " -" + i33 + " " + i33 + " -" + a3 + " " + i33 + " 0 c"), r2.push("f"), r2.push("Q"), r2.push("0 g"), r2.push("q"), r2.push("1 0 0 1 " + z(At.internal.getWidth(t3) / 2) + " " + z(At.internal.getHeight(t3) / 2) + " cm"), r2.push(n3 + " 0 m"), r2.push(n3 + " " + o3 + " " + o3 + " " + n3 + " 0 " + n3 + " c"), r2.push("-" + o3 + " " + n3 + " -" + n3 + " " + o3 + " -" + n3 + " 0 c"), r2.push("-" + n3 + " -" + o3 + " -" + o3 + " -" + n3 + " 0 -" + n3 + " c"), r2.push(o3 + " -" + n3 + " " + n3 + " -" + o3 + " " + n3 + " 0 c"), r2.push("f"), r2.push("Q"), e2.stream = r2.join("\n"), e2;
    }, "YesPushDown"), OffPushDown: /* @__PURE__ */ __name2(function(t3) {
      var e2 = V(t3);
      e2.scope = t3.scope;
      var r2 = [], n3 = At.internal.getWidth(t3) <= At.internal.getHeight(t3) ? At.internal.getWidth(t3) / 4 : At.internal.getHeight(t3) / 4;
      n3 = Number((0.9 * n3).toFixed(5));
      var i33 = Number((2 * n3).toFixed(5)), a3 = Number((i33 * At.internal.Bezier_C).toFixed(5));
      return r2.push("0.749023 g"), r2.push("q"), r2.push("1 0 0 1 " + z(At.internal.getWidth(t3) / 2) + " " + z(At.internal.getHeight(t3) / 2) + " cm"), r2.push(i33 + " 0 m"), r2.push(i33 + " " + a3 + " " + a3 + " " + i33 + " 0 " + i33 + " c"), r2.push("-" + a3 + " " + i33 + " -" + i33 + " " + a3 + " -" + i33 + " 0 c"), r2.push("-" + i33 + " -" + a3 + " -" + a3 + " -" + i33 + " 0 -" + i33 + " c"), r2.push(a3 + " -" + i33 + " " + i33 + " -" + a3 + " " + i33 + " 0 c"), r2.push("f"), r2.push("Q"), e2.stream = r2.join("\n"), e2;
    }, "OffPushDown") }, Cross: { createAppearanceStream: /* @__PURE__ */ __name2(function(t3) {
      var e2 = { D: { Off: At.RadioButton.Cross.OffPushDown }, N: {} };
      return e2.N[t3] = At.RadioButton.Cross.YesNormal, e2.D[t3] = At.RadioButton.Cross.YesPushDown, e2;
    }, "createAppearanceStream"), getCA: /* @__PURE__ */ __name2(function() {
      return "8";
    }, "getCA"), YesNormal: /* @__PURE__ */ __name2(function(t3) {
      var e2 = V(t3);
      e2.scope = t3.scope;
      var r2 = [], n3 = At.internal.calculateCross(t3);
      return r2.push("q"), r2.push("1 1 " + U(At.internal.getWidth(t3) - 2) + " " + U(At.internal.getHeight(t3) - 2) + " re"), r2.push("W"), r2.push("n"), r2.push(U(n3.x1.x) + " " + U(n3.x1.y) + " m"), r2.push(U(n3.x2.x) + " " + U(n3.x2.y) + " l"), r2.push(U(n3.x4.x) + " " + U(n3.x4.y) + " m"), r2.push(U(n3.x3.x) + " " + U(n3.x3.y) + " l"), r2.push("s"), r2.push("Q"), e2.stream = r2.join("\n"), e2;
    }, "YesNormal"), YesPushDown: /* @__PURE__ */ __name2(function(t3) {
      var e2 = V(t3);
      e2.scope = t3.scope;
      var r2 = At.internal.calculateCross(t3), n3 = [];
      return n3.push("0.749023 g"), n3.push("0 0 " + U(At.internal.getWidth(t3)) + " " + U(At.internal.getHeight(t3)) + " re"), n3.push("f"), n3.push("q"), n3.push("1 1 " + U(At.internal.getWidth(t3) - 2) + " " + U(At.internal.getHeight(t3) - 2) + " re"), n3.push("W"), n3.push("n"), n3.push(U(r2.x1.x) + " " + U(r2.x1.y) + " m"), n3.push(U(r2.x2.x) + " " + U(r2.x2.y) + " l"), n3.push(U(r2.x4.x) + " " + U(r2.x4.y) + " m"), n3.push(U(r2.x3.x) + " " + U(r2.x3.y) + " l"), n3.push("s"), n3.push("Q"), e2.stream = n3.join("\n"), e2;
    }, "YesPushDown"), OffPushDown: /* @__PURE__ */ __name2(function(t3) {
      var e2 = V(t3);
      e2.scope = t3.scope;
      var r2 = [];
      return r2.push("0.749023 g"), r2.push("0 0 " + U(At.internal.getWidth(t3)) + " " + U(At.internal.getHeight(t3)) + " re"), r2.push("f"), e2.stream = r2.join("\n"), e2;
    }, "OffPushDown") } }, createDefaultAppearanceStream: /* @__PURE__ */ __name2(function(t3) {
      var e2 = t3.scope.internal.getFont(t3.fontName, t3.fontStyle).id, r2 = t3.scope.__private__.encodeColorString(t3.color);
      return "/" + e2 + " " + t3.fontSize + " Tf " + r2;
    }, "createDefaultAppearanceStream") };
    At.internal = { Bezier_C: 0.551915024494, calculateCross: /* @__PURE__ */ __name2(function(t3) {
      var e2 = At.internal.getWidth(t3), r2 = At.internal.getHeight(t3), n3 = Math.min(e2, r2);
      return { x1: { x: (e2 - n3) / 2, y: (r2 - n3) / 2 + n3 }, x2: { x: (e2 - n3) / 2 + n3, y: (r2 - n3) / 2 }, x3: { x: (e2 - n3) / 2, y: (r2 - n3) / 2 }, x4: { x: (e2 - n3) / 2 + n3, y: (r2 - n3) / 2 + n3 } };
    }, "calculateCross") }, At.internal.getWidth = function(e2) {
      var r2 = 0;
      return "object" === _typeof(e2) && (r2 = W(e2.Rect[2])), r2;
    }, At.internal.getHeight = function(e2) {
      var r2 = 0;
      return "object" === _typeof(e2) && (r2 = W(e2.Rect[3])), r2;
    };
    xt = q.addField = function(t3) {
      if (at(this, t3), !(t3 instanceof lt)) throw new Error("Invalid argument passed to jsPDF.addField.");
      var e2;
      return (e2 = t3).scope.internal.acroformPlugin.printedOut && (e2.scope.internal.acroformPlugin.printedOut = false, e2.scope.internal.acroformPlugin.acroFormDictionaryRoot = null), e2.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e2), t3.page = t3.scope.internal.getCurrentPageInfo().pageNumber, this;
    };
    q.AcroFormChoiceField = ft, q.AcroFormListBox = dt, q.AcroFormComboBox = pt, q.AcroFormEditBox = gt, q.AcroFormButton = mt, q.AcroFormPushButton = vt, q.AcroFormRadioButton = bt, q.AcroFormCheckBox = wt, q.AcroFormTextField = Nt, q.AcroFormPasswordField = Lt, q.AcroFormAppearance = At, q.AcroForm = { ChoiceField: ft, ListBox: dt, ComboBox: pt, EditBox: gt, Button: mt, PushButton: vt, RadioButton: bt, CheckBox: wt, TextField: Nt, PasswordField: Lt, Appearance: At }, E.AcroForm = { ChoiceField: ft, ListBox: dt, ComboBox: pt, EditBox: gt, Button: mt, PushButton: vt, RadioButton: bt, CheckBox: wt, TextField: Nt, PasswordField: Lt, Appearance: At };
    St = E.AcroForm;
    __name2(_t, "_t");
    !function(e2) {
      e2.__addimage__ = {};
      var r2 = "UNKNOWN", n3 = { PNG: [[137, 80, 78, 71]], TIFF: [[77, 77, 0, 42], [73, 73, 42, 0]], JPEG: [[255, 216, 255, 224, void 0, void 0, 74, 70, 73, 70, 0], [255, 216, 255, 225, void 0, void 0, 69, 120, 105, 102, 0, 0], [255, 216, 255, 219], [255, 216, 255, 238]], JPEG2000: [[0, 0, 0, 12, 106, 80, 32, 32]], GIF87a: [[71, 73, 70, 56, 55, 97]], GIF89a: [[71, 73, 70, 56, 57, 97]], WEBP: [[82, 73, 70, 70, void 0, void 0, void 0, void 0, 87, 69, 66, 80]], BMP: [[66, 77], [66, 65], [67, 73], [67, 80], [73, 67], [80, 84]] }, i33 = e2.__addimage__.getImageFileTypeByImageData = function(t3, e3) {
        var i4, a4, o4, s4, c5, u3 = r2;
        if ("RGBA" === (e3 = e3 || r2) || void 0 !== t3.data && t3.data instanceof Uint8ClampedArray && "height" in t3 && "width" in t3) return "RGBA";
        if (x22(t3)) for (c5 in n3) for (o4 = n3[c5], i4 = 0; i4 < o4.length; i4 += 1) {
          for (s4 = true, a4 = 0; a4 < o4[i4].length; a4 += 1) if (void 0 !== o4[i4][a4] && o4[i4][a4] !== t3[a4]) {
            s4 = false;
            break;
          }
          if (true === s4) {
            u3 = c5;
            break;
          }
        }
        else for (c5 in n3) for (o4 = n3[c5], i4 = 0; i4 < o4.length; i4 += 1) {
          for (s4 = true, a4 = 0; a4 < o4[i4].length; a4 += 1) if (void 0 !== o4[i4][a4] && o4[i4][a4] !== t3.charCodeAt(a4)) {
            s4 = false;
            break;
          }
          if (true === s4) {
            u3 = c5;
            break;
          }
        }
        return u3 === r2 && e3 !== r2 && (u3 = e3), u3;
      }, a3 = /* @__PURE__ */ __name2(/* @__PURE__ */ __name(function t3(e3) {
        for (var r3 = this.internal.write, n4 = this.internal.putStream, i4 = (0, this.internal.getFilters)(); -1 !== i4.indexOf("FlateEncode"); ) i4.splice(i4.indexOf("FlateEncode"), 1);
        e3.objectId = this.internal.newObject();
        var a4 = [];
        if (a4.push({ key: "Type", value: "/XObject" }), a4.push({ key: "Subtype", value: "/Image" }), a4.push({ key: "Width", value: e3.width }), a4.push({ key: "Height", value: e3.height }), e3.colorSpace === b2.INDEXED ? a4.push({ key: "ColorSpace", value: "[/Indexed /DeviceRGB " + (e3.palette.length / 3 - 1) + " " + ("sMask" in e3 && void 0 !== e3.sMask ? e3.objectId + 2 : e3.objectId + 1) + " 0 R]" }) : (a4.push({ key: "ColorSpace", value: "/" + e3.colorSpace }), e3.colorSpace === b2.DEVICE_CMYK && a4.push({ key: "Decode", value: "[1 0 1 0 1 0 1 0]" })), a4.push({ key: "BitsPerComponent", value: e3.bitsPerComponent }), "decodeParameters" in e3 && void 0 !== e3.decodeParameters && a4.push({ key: "DecodeParms", value: "<<" + e3.decodeParameters + ">>" }), "transparency" in e3 && Array.isArray(e3.transparency)) {
          for (var o4 = "", s4 = 0, c5 = e3.transparency.length; s4 < c5; s4++) o4 += e3.transparency[s4] + " " + e3.transparency[s4] + " ";
          a4.push({ key: "Mask", value: "[" + o4 + "]" });
        }
        void 0 !== e3.sMask && a4.push({ key: "SMask", value: e3.objectId + 1 + " 0 R" });
        var u3 = void 0 !== e3.filter ? ["/" + e3.filter] : void 0;
        if (n4({ data: e3.data, additionalKeyValues: a4, alreadyAppliedFilters: u3, objectId: e3.objectId }), r3("endobj"), "sMask" in e3 && void 0 !== e3.sMask) {
          var h4 = "/Predictor " + e3.predictor + " /Colors 1 /BitsPerComponent " + e3.bitsPerComponent + " /Columns " + e3.width, l4 = { width: e3.width, height: e3.height, colorSpace: "DeviceGray", bitsPerComponent: e3.bitsPerComponent, decodeParameters: h4, data: e3.sMask };
          "filter" in e3 && (l4.filter = e3.filter), t3.call(this, l4);
        }
        if (e3.colorSpace === b2.INDEXED) {
          var f4 = this.internal.newObject();
          n4({ data: _3(new Uint8Array(e3.palette)), objectId: f4 }), r3("endobj");
        }
      }, "t3"), "t"), o3 = /* @__PURE__ */ __name2(function() {
        var t3 = this.internal.collections.addImage_images;
        for (var e3 in t3) a3.call(this, t3[e3]);
      }, "o"), s3 = /* @__PURE__ */ __name2(function() {
        var t3, e3 = this.internal.collections.addImage_images, r3 = this.internal.write;
        for (var n4 in e3) r3("/I" + (t3 = e3[n4]).index, t3.objectId, "0", "R");
      }, "s"), c4 = /* @__PURE__ */ __name2(function() {
        this.internal.collections.addImage_images || (this.internal.collections.addImage_images = {}, this.internal.events.subscribe("putResources", o3), this.internal.events.subscribe("putXobjectDict", s3));
      }, "c"), h3 = /* @__PURE__ */ __name2(function() {
        var t3 = this.internal.collections.addImage_images;
        return c4.call(this), t3;
      }, "h"), l3 = /* @__PURE__ */ __name2(function() {
        return Object.keys(this.internal.collections.addImage_images).length;
      }, "l"), f3 = /* @__PURE__ */ __name2(function(t3) {
        return "function" == typeof e2["process" + t3.toUpperCase()];
      }, "f"), d2 = /* @__PURE__ */ __name2(function(e3) {
        return "object" === _typeof(e3) && 1 === e3.nodeType;
      }, "d"), p3 = /* @__PURE__ */ __name2(function(t3, r3) {
        if ("IMG" === t3.nodeName && t3.hasAttribute("src")) {
          var n4 = "" + t3.getAttribute("src");
          if (0 === n4.indexOf("data:image/")) return u2(unescape(n4).split("base64,").pop());
          var i4 = e2.loadFile(n4, true);
          if (void 0 !== i4) return i4;
        }
        if ("CANVAS" === t3.nodeName) {
          if (0 === t3.width || 0 === t3.height) throw new Error("Given canvas must have data. Canvas width: " + t3.width + ", height: " + t3.height);
          var a4;
          switch (r3) {
            case "PNG":
              a4 = "image/png";
              break;
            case "WEBP":
              a4 = "image/webp";
              break;
            case "JPEG":
            case "JPG":
            default:
              a4 = "image/jpeg";
          }
          return u2(t3.toDataURL(a4, 1).split("base64,").pop());
        }
      }, "p"), g2 = /* @__PURE__ */ __name2(function(t3) {
        var e3 = this.internal.collections.addImage_images;
        if (e3) {
          for (var r3 in e3) if (t3 === e3[r3].alias) return e3[r3];
        }
      }, "g"), m4 = /* @__PURE__ */ __name2(function(t3, e3, r3) {
        return t3 || e3 || (t3 = -96, e3 = -96), t3 < 0 && (t3 = -1 * r3.width * 72 / t3 / this.internal.scaleFactor), e3 < 0 && (e3 = -1 * r3.height * 72 / e3 / this.internal.scaleFactor), 0 === t3 && (t3 = e3 * r3.width / r3.height), 0 === e3 && (e3 = t3 * r3.height / r3.width), [t3, e3];
      }, "m"), v3 = /* @__PURE__ */ __name2(function(t3, e3, r3, n4, i4, a4) {
        var o4 = m4.call(this, r3, n4, i4), s4 = this.internal.getCoordinateString, c5 = this.internal.getVerticalCoordinateString, u3 = h3.call(this);
        if (r3 = o4[0], n4 = o4[1], u3[i4.index] = i4, a4) {
          a4 *= Math.PI / 180;
          var l4 = Math.cos(a4), f4 = Math.sin(a4), d3 = /* @__PURE__ */ __name2(function(t4) {
            return t4.toFixed(4);
          }, "d"), p4 = [d3(l4), d3(f4), d3(-1 * f4), d3(l4), 0, 0, "cm"];
        }
        this.internal.write("q"), a4 ? (this.internal.write([1, "0", "0", 1, s4(t3), c5(e3 + n4), "cm"].join(" ")), this.internal.write(p4.join(" ")), this.internal.write([s4(r3), "0", "0", s4(n4), "0", "0", "cm"].join(" "))) : this.internal.write([s4(r3), "0", "0", s4(n4), s4(t3), c5(e3 + n4), "cm"].join(" ")), this.isAdvancedAPI() && this.internal.write([1, 0, 0, -1, 0, 0, "cm"].join(" ")), this.internal.write("/I" + i4.index + " Do"), this.internal.write("Q");
      }, "v"), b2 = e2.color_spaces = { DEVICE_RGB: "DeviceRGB", DEVICE_GRAY: "DeviceGray", DEVICE_CMYK: "DeviceCMYK", CAL_GREY: "CalGray", CAL_RGB: "CalRGB", LAB: "Lab", ICC_BASED: "ICCBased", INDEXED: "Indexed", PATTERN: "Pattern", SEPARATION: "Separation", DEVICE_N: "DeviceN" };
      e2.decode = { DCT_DECODE: "DCTDecode", FLATE_DECODE: "FlateDecode", LZW_DECODE: "LZWDecode", JPX_DECODE: "JPXDecode", JBIG2_DECODE: "JBIG2Decode", ASCII85_DECODE: "ASCII85Decode", ASCII_HEX_DECODE: "ASCIIHexDecode", RUN_LENGTH_DECODE: "RunLengthDecode", CCITT_FAX_DECODE: "CCITTFaxDecode" };
      var y3 = e2.image_compression = { NONE: "NONE", FAST: "FAST", MEDIUM: "MEDIUM", SLOW: "SLOW" }, w2 = e2.__addimage__.sHashCode = function(t3) {
        var e3, r3, n4 = 0;
        if ("string" == typeof t3) for (r3 = t3.length, e3 = 0; e3 < r3; e3++) n4 = (n4 << 5) - n4 + t3.charCodeAt(e3), n4 |= 0;
        else if (x22(t3)) for (r3 = t3.byteLength / 2, e3 = 0; e3 < r3; e3++) n4 = (n4 << 5) - n4 + t3[e3], n4 |= 0;
        return n4;
      }, N3 = e2.__addimage__.validateStringAsBase64 = function(t3) {
        (t3 = t3 || "").toString().trim();
        var e3 = true;
        return 0 === t3.length && (e3 = false), t3.length % 4 != 0 && (e3 = false), false === /^[A-Za-z0-9+/]+$/.test(t3.substr(0, t3.length - 2)) && (e3 = false), false === /^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(t3.substr(-2)) && (e3 = false), e3;
      }, L2 = e2.__addimage__.extractImageFromDataUrl = function(t3) {
        if (null == t3) return null;
        if (!(t3 = t3.trim()).startsWith("data:")) return null;
        var e3 = t3.indexOf(",");
        return e3 < 0 ? null : t3.substring(0, e3).trim().endsWith("base64") ? t3.substring(e3 + 1) : null;
      }, A2 = e2.__addimage__.supportsArrayBuffer = function() {
        return "undefined" != typeof ArrayBuffer && "undefined" != typeof Uint8Array;
      };
      e2.__addimage__.isArrayBuffer = function(t3) {
        return A2() && t3 instanceof ArrayBuffer;
      };
      var x22 = e2.__addimage__.isArrayBufferView = function(t3) {
        return A2() && "undefined" != typeof Uint32Array && (t3 instanceof Int8Array || t3 instanceof Uint8Array || "undefined" != typeof Uint8ClampedArray && t3 instanceof Uint8ClampedArray || t3 instanceof Int16Array || t3 instanceof Uint16Array || t3 instanceof Int32Array || t3 instanceof Uint32Array || t3 instanceof Float32Array || t3 instanceof Float64Array);
      }, S2 = e2.__addimage__.binaryStringToUint8Array = function(t3) {
        for (var e3 = t3.length, r3 = new Uint8Array(e3), n4 = 0; n4 < e3; n4++) r3[n4] = t3.charCodeAt(n4);
        return r3;
      }, _3 = e2.__addimage__.arrayBufferToBinaryString = function(t3) {
        for (var e3 = "", r3 = x22(t3) ? t3 : new Uint8Array(t3), n4 = 0; n4 < r3.length; n4 += 8192) e3 += String.fromCharCode.apply(null, r3.subarray(n4, n4 + 8192));
        return e3;
      };
      e2.addImage = function() {
        var e3, n4, i4, a4, o4, s4, u3, h4, l4;
        if ("number" == typeof arguments[1] ? (n4 = r2, i4 = arguments[1], a4 = arguments[2], o4 = arguments[3], s4 = arguments[4], u3 = arguments[5], h4 = arguments[6], l4 = arguments[7]) : (n4 = arguments[1], i4 = arguments[2], a4 = arguments[3], o4 = arguments[4], s4 = arguments[5], u3 = arguments[6], h4 = arguments[7], l4 = arguments[8]), "object" === _typeof(e3 = arguments[0]) && !d2(e3) && "imageData" in e3) {
          var f4 = e3;
          e3 = f4.imageData, n4 = f4.format || n4 || r2, i4 = f4.x || i4 || 0, a4 = f4.y || a4 || 0, o4 = f4.w || f4.width || o4, s4 = f4.h || f4.height || s4, u3 = f4.alias || u3, h4 = f4.compression || h4, l4 = f4.rotation || f4.angle || l4;
        }
        var p4 = this.internal.getFilters();
        if (void 0 === h4 && -1 !== p4.indexOf("FlateEncode") && (h4 = "SLOW"), isNaN(i4) || isNaN(a4)) throw new Error("Invalid coordinates passed to jsPDF.addImage");
        c4.call(this);
        var g3 = P2.call(this, e3, n4, u3, h4);
        return v3.call(this, i4, a4, o4, s4, g3, l4), this;
      };
      var P2 = /* @__PURE__ */ __name2(function(t3, n4, a4, o4) {
        var s4, c5, u3;
        if ("string" == typeof t3 && i33(t3) === r2) {
          t3 = unescape(t3);
          var h4 = k2(t3, false);
          ("" !== h4 || void 0 !== (h4 = e2.loadFile(t3, true))) && (t3 = h4);
        }
        if (d2(t3) && (t3 = p3(t3, n4)), n4 = i33(t3, n4), !f3(n4)) throw new Error("addImage does not support files of type '" + n4 + "', please ensure that a plugin for '" + n4 + "' support is added.");
        if ((null == (u3 = a4) || 0 === u3.length) && (a4 = function(t4) {
          return "string" == typeof t4 || x22(t4) ? w2(t4) : x22(t4.data) ? w2(t4.data) : null;
        }(t3)), (s4 = g2.call(this, a4)) || (A2() && (t3 instanceof Uint8Array || "RGBA" === n4 || (c5 = t3, t3 = S2(t3))), s4 = this["process" + n4.toUpperCase()](t3, l3.call(this), a4, function(t4) {
          return t4 && "string" == typeof t4 && (t4 = t4.toUpperCase()), t4 in e2.image_compression ? t4 : y3.NONE;
        }(o4), c5)), !s4) throw new Error("An unknown error occurred whilst processing the image.");
        return s4;
      }, "P"), k2 = e2.__addimage__.convertBase64ToBinaryString = function(t3, e3) {
        e3 = "boolean" != typeof e3 || e3;
        var r3, n4 = "";
        if ("string" == typeof t3) {
          var i4;
          r3 = null !== (i4 = L2(t3)) && void 0 !== i4 ? i4 : t3;
          try {
            n4 = u2(r3);
          } catch (t4) {
            if (e3) throw N3(r3) ? new Error("atob-Error in jsPDF.convertBase64ToBinaryString " + t4.message) : new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ");
          }
        }
        return n4;
      };
      e2.getImageProperties = function(t3) {
        var n4, a4, o4 = "";
        if (d2(t3) && (t3 = p3(t3)), "string" == typeof t3 && i33(t3) === r2 && ("" === (o4 = k2(t3, false)) && (o4 = e2.loadFile(t3) || ""), t3 = o4), a4 = i33(t3), !f3(a4)) throw new Error("addImage does not support files of type '" + a4 + "', please ensure that a plugin for '" + a4 + "' support is added.");
        if (!A2() || t3 instanceof Uint8Array || (t3 = S2(t3)), !(n4 = this["process" + a4.toUpperCase()](t3))) throw new Error("An unknown error occurred whilst processing the image");
        return n4.fileType = a4, n4;
      };
    }(E.API), /**
    * @license
    * Copyright (c) 2014 Steven Spungin (TwelveTone LLC)  steven@twelvetone.tv
    *
    * Licensed under the MIT License.
    * http://opensource.org/licenses/mit-license
    */
    function(t3) {
      var e2 = /* @__PURE__ */ __name2(function(t4) {
        if (void 0 !== t4 && "" != t4) return true;
      }, "e");
      E.API.events.push(["addPage", function(t4) {
        this.internal.getPageInfo(t4.pageNumber).pageContext.annotations = [];
      }]), t3.events.push(["putPage", function(t4) {
        for (var r2, n3, i33, a3 = this.internal.getCoordinateString, o3 = this.internal.getVerticalCoordinateString, s3 = this.internal.getPageInfoByObjId(t4.objId), c4 = t4.pageContext.annotations, u3 = false, h3 = 0; h3 < c4.length && !u3; h3++) switch ((r2 = c4[h3]).type) {
          case "link":
            (e2(r2.options.url) || e2(r2.options.pageNumber)) && (u3 = true);
            break;
          case "reference":
          case "text":
          case "freetext":
            u3 = true;
        }
        if (0 != u3) {
          this.internal.write("/Annots [");
          for (var l3 = 0; l3 < c4.length; l3++) {
            r2 = c4[l3];
            var f3 = this.internal.pdfEscape, d2 = this.internal.getEncryptor(t4.objId);
            switch (r2.type) {
              case "reference":
                this.internal.write(" " + r2.object.objId + " 0 R ");
                break;
              case "text":
                var p3 = this.internal.newAdditionalObject(), g2 = this.internal.newAdditionalObject(), m4 = this.internal.getEncryptor(p3.objId), v3 = r2.title || "Note";
                i33 = "<</Type /Annot /Subtype /Text " + (n3 = "/Rect [" + a3(r2.bounds.x) + " " + o3(r2.bounds.y + r2.bounds.h) + " " + a3(r2.bounds.x + r2.bounds.w) + " " + o3(r2.bounds.y) + "] ") + "/Contents (" + f3(m4(r2.contents)) + ")", i33 += " /Popup " + g2.objId + " 0 R", i33 += " /P " + s3.objId + " 0 R", i33 += " /T (" + f3(m4(v3)) + ") >>", p3.content = i33;
                var b2 = p3.objId + " 0 R";
                i33 = "<</Type /Annot /Subtype /Popup " + (n3 = "/Rect [" + a3(r2.bounds.x + 30) + " " + o3(r2.bounds.y + r2.bounds.h) + " " + a3(r2.bounds.x + r2.bounds.w + 30) + " " + o3(r2.bounds.y) + "] ") + " /Parent " + b2, r2.open && (i33 += " /Open true"), i33 += " >>", g2.content = i33, this.internal.write(p3.objId, "0 R", g2.objId, "0 R");
                break;
              case "freetext":
                n3 = "/Rect [" + a3(r2.bounds.x) + " " + o3(r2.bounds.y) + " " + a3(r2.bounds.x + r2.bounds.w) + " " + o3(r2.bounds.y + r2.bounds.h) + "] ";
                var y3 = r2.color || "#000000";
                i33 = "<</Type /Annot /Subtype /FreeText " + n3 + "/Contents (" + f3(d2(r2.contents)) + ")", i33 += " /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#" + y3 + ")", i33 += " /Border [0 0 0]", i33 += " >>", this.internal.write(i33);
                break;
              case "link":
                if (r2.options.name) {
                  var w2 = this.annotations._nameMap[r2.options.name];
                  r2.options.pageNumber = w2.page, r2.options.top = w2.y;
                } else r2.options.top || (r2.options.top = 0);
                if (n3 = "/Rect [" + r2.finalBounds.x + " " + r2.finalBounds.y + " " + r2.finalBounds.w + " " + r2.finalBounds.h + "] ", i33 = "", r2.options.url) i33 = "<</Type /Annot /Subtype /Link " + n3 + "/Border [0 0 0] /A <</S /URI /URI (" + f3(d2(r2.options.url)) + ") >>";
                else if (r2.options.pageNumber) {
                  switch (i33 = "<</Type /Annot /Subtype /Link " + n3 + "/Border [0 0 0] /Dest [" + this.internal.getPageInfo(r2.options.pageNumber).objId + " 0 R", r2.options.magFactor = r2.options.magFactor || "XYZ", r2.options.magFactor) {
                    case "Fit":
                      i33 += " /Fit]";
                      break;
                    case "FitH":
                      i33 += " /FitH " + r2.options.top + "]";
                      break;
                    case "FitV":
                      r2.options.left = r2.options.left || 0, i33 += " /FitV " + r2.options.left + "]";
                      break;
                    case "XYZ":
                    default:
                      var N3 = o3(r2.options.top);
                      r2.options.left = r2.options.left || 0, void 0 === r2.options.zoom && (r2.options.zoom = 0), i33 += " /XYZ " + r2.options.left + " " + N3 + " " + r2.options.zoom + "]";
                  }
                }
                "" != i33 && (i33 += " >>", this.internal.write(i33));
            }
          }
          this.internal.write("]");
        }
      }]), t3.createAnnotation = function(t4) {
        var e3 = this.internal.getCurrentPageInfo();
        switch (t4.type) {
          case "link":
            this.link(t4.bounds.x, t4.bounds.y, t4.bounds.w, t4.bounds.h, t4);
            break;
          case "text":
          case "freetext":
            e3.pageContext.annotations.push(t4);
        }
      }, t3.link = function(t4, e3, r2, n3, i33) {
        var a3 = this.internal.getCurrentPageInfo(), o3 = this.internal.getCoordinateString, s3 = this.internal.getVerticalCoordinateString;
        a3.pageContext.annotations.push({ finalBounds: { x: o3(t4), y: s3(e3), w: o3(t4 + r2), h: s3(e3 + n3) }, options: i33, type: "link" });
      }, t3.textWithLink = function(t4, e3, r2, n3) {
        var i33, a3, o3 = this.getTextWidth(t4), s3 = this.internal.getLineHeight() / this.internal.scaleFactor;
        if (void 0 !== n3.maxWidth) {
          a3 = n3.maxWidth;
          var c4 = this.splitTextToSize(t4, a3).length;
          i33 = Math.ceil(s3 * c4);
        } else a3 = o3, i33 = s3;
        return this.text(t4, e3, r2, n3), r2 += 0.2 * s3, "center" === n3.align && (e3 -= o3 / 2), "right" === n3.align && (e3 -= o3), this.link(e3, r2 - s3, a3, i33, n3), o3;
      }, t3.getTextWidth = function(t4) {
        var e3 = this.internal.getFontSize();
        return this.getStringUnitWidth(t4) * e3 / this.internal.scaleFactor;
      };
    }(E.API), /**
    * @license
    * Copyright (c) 2017 Aras Abbasi
    *
    * Licensed under the MIT License.
    * http://opensource.org/licenses/mit-license
    */
    function(t3) {
      var e2 = { 1569: [65152], 1570: [65153, 65154], 1571: [65155, 65156], 1572: [65157, 65158], 1573: [65159, 65160], 1574: [65161, 65162, 65163, 65164], 1575: [65165, 65166], 1576: [65167, 65168, 65169, 65170], 1577: [65171, 65172], 1578: [65173, 65174, 65175, 65176], 1579: [65177, 65178, 65179, 65180], 1580: [65181, 65182, 65183, 65184], 1581: [65185, 65186, 65187, 65188], 1582: [65189, 65190, 65191, 65192], 1583: [65193, 65194], 1584: [65195, 65196], 1585: [65197, 65198], 1586: [65199, 65200], 1587: [65201, 65202, 65203, 65204], 1588: [65205, 65206, 65207, 65208], 1589: [65209, 65210, 65211, 65212], 1590: [65213, 65214, 65215, 65216], 1591: [65217, 65218, 65219, 65220], 1592: [65221, 65222, 65223, 65224], 1593: [65225, 65226, 65227, 65228], 1594: [65229, 65230, 65231, 65232], 1601: [65233, 65234, 65235, 65236], 1602: [65237, 65238, 65239, 65240], 1603: [65241, 65242, 65243, 65244], 1604: [65245, 65246, 65247, 65248], 1605: [65249, 65250, 65251, 65252], 1606: [65253, 65254, 65255, 65256], 1607: [65257, 65258, 65259, 65260], 1608: [65261, 65262], 1609: [65263, 65264, 64488, 64489], 1610: [65265, 65266, 65267, 65268], 1649: [64336, 64337], 1655: [64477], 1657: [64358, 64359, 64360, 64361], 1658: [64350, 64351, 64352, 64353], 1659: [64338, 64339, 64340, 64341], 1662: [64342, 64343, 64344, 64345], 1663: [64354, 64355, 64356, 64357], 1664: [64346, 64347, 64348, 64349], 1667: [64374, 64375, 64376, 64377], 1668: [64370, 64371, 64372, 64373], 1670: [64378, 64379, 64380, 64381], 1671: [64382, 64383, 64384, 64385], 1672: [64392, 64393], 1676: [64388, 64389], 1677: [64386, 64387], 1678: [64390, 64391], 1681: [64396, 64397], 1688: [64394, 64395], 1700: [64362, 64363, 64364, 64365], 1702: [64366, 64367, 64368, 64369], 1705: [64398, 64399, 64400, 64401], 1709: [64467, 64468, 64469, 64470], 1711: [64402, 64403, 64404, 64405], 1713: [64410, 64411, 64412, 64413], 1715: [64406, 64407, 64408, 64409], 1722: [64414, 64415], 1723: [64416, 64417, 64418, 64419], 1726: [64426, 64427, 64428, 64429], 1728: [64420, 64421], 1729: [64422, 64423, 64424, 64425], 1733: [64480, 64481], 1734: [64473, 64474], 1735: [64471, 64472], 1736: [64475, 64476], 1737: [64482, 64483], 1739: [64478, 64479], 1740: [64508, 64509, 64510, 64511], 1744: [64484, 64485, 64486, 64487], 1746: [64430, 64431], 1747: [64432, 64433] }, r2 = { 65247: { 65154: 65269, 65156: 65271, 65160: 65273, 65166: 65275 }, 65248: { 65154: 65270, 65156: 65272, 65160: 65274, 65166: 65276 }, 65165: { 65247: { 65248: { 65258: 65010 } } }, 1617: { 1612: 64606, 1613: 64607, 1614: 64608, 1615: 64609, 1616: 64610 } }, n3 = { 1612: 64606, 1613: 64607, 1614: 64608, 1615: 64609, 1616: 64610 }, i33 = [1570, 1571, 1573, 1575];
      t3.__arabicParser__ = {};
      var a3 = t3.__arabicParser__.isInArabicSubstitutionA = function(t4) {
        return void 0 !== e2[t4.charCodeAt(0)];
      }, o3 = t3.__arabicParser__.isArabicLetter = function(t4) {
        return "string" == typeof t4 && /^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(t4);
      }, s3 = t3.__arabicParser__.isArabicEndLetter = function(t4) {
        return o3(t4) && a3(t4) && e2[t4.charCodeAt(0)].length <= 2;
      }, c4 = t3.__arabicParser__.isArabicAlfLetter = function(t4) {
        return o3(t4) && i33.indexOf(t4.charCodeAt(0)) >= 0;
      };
      t3.__arabicParser__.arabicLetterHasIsolatedForm = function(t4) {
        return o3(t4) && a3(t4) && e2[t4.charCodeAt(0)].length >= 1;
      };
      var u3 = t3.__arabicParser__.arabicLetterHasFinalForm = function(t4) {
        return o3(t4) && a3(t4) && e2[t4.charCodeAt(0)].length >= 2;
      };
      t3.__arabicParser__.arabicLetterHasInitialForm = function(t4) {
        return o3(t4) && a3(t4) && e2[t4.charCodeAt(0)].length >= 3;
      };
      var h3 = t3.__arabicParser__.arabicLetterHasMedialForm = function(t4) {
        return o3(t4) && a3(t4) && 4 == e2[t4.charCodeAt(0)].length;
      }, l3 = t3.__arabicParser__.resolveLigatures = function(t4) {
        var e3 = 0, n4 = r2, i4 = "", a4 = 0;
        for (e3 = 0; e3 < t4.length; e3 += 1) void 0 !== n4[t4.charCodeAt(e3)] ? (a4++, "number" == typeof (n4 = n4[t4.charCodeAt(e3)]) && (i4 += String.fromCharCode(n4), n4 = r2, a4 = 0), e3 === t4.length - 1 && (n4 = r2, i4 += t4.charAt(e3 - (a4 - 1)), e3 -= a4 - 1, a4 = 0)) : (n4 = r2, i4 += t4.charAt(e3 - a4), e3 -= a4, a4 = 0);
        return i4;
      };
      t3.__arabicParser__.isArabicDiacritic = function(t4) {
        return void 0 !== t4 && void 0 !== n3[t4.charCodeAt(0)];
      };
      var f3 = t3.__arabicParser__.getCorrectForm = function(t4, e3, r3) {
        return o3(t4) ? false === a3(t4) ? -1 : !u3(t4) || !o3(e3) && !o3(r3) || !o3(r3) && s3(e3) || s3(t4) && !o3(e3) || s3(t4) && c4(e3) || s3(t4) && s3(e3) ? 0 : h3(t4) && o3(e3) && !s3(e3) && o3(r3) && u3(r3) ? 3 : s3(t4) || !o3(r3) ? 1 : 2 : -1;
      }, d2 = /* @__PURE__ */ __name2(function(t4) {
        var r3 = 0, n4 = 0, i4 = 0, a4 = "", s4 = "", c5 = "", u4 = (t4 = t4 || "").split("\\s+"), h4 = [];
        for (r3 = 0; r3 < u4.length; r3 += 1) {
          for (h4.push(""), n4 = 0; n4 < u4[r3].length; n4 += 1) a4 = u4[r3][n4], s4 = u4[r3][n4 - 1], c5 = u4[r3][n4 + 1], o3(a4) ? (i4 = f3(a4, s4, c5), h4[r3] += -1 !== i4 ? String.fromCharCode(e2[a4.charCodeAt(0)][i4]) : a4) : h4[r3] += a4;
          h4[r3] = l3(h4[r3]);
        }
        return h4.join(" ");
      }, "d"), p3 = t3.__arabicParser__.processArabic = t3.processArabic = function() {
        var t4, e3 = "string" == typeof arguments[0] ? arguments[0] : arguments[0].text, r3 = [];
        if (Array.isArray(e3)) {
          var n4 = 0;
          for (r3 = [], n4 = 0; n4 < e3.length; n4 += 1) Array.isArray(e3[n4]) ? r3.push([d2(e3[n4][0]), e3[n4][1], e3[n4][2]]) : r3.push([d2(e3[n4])]);
          t4 = r3;
        } else t4 = d2(e3);
        return "string" == typeof arguments[0] ? t4 : (arguments[0].text = t4, arguments[0]);
      };
      t3.events.push(["preProcessText", p3]);
    }(E.API), E.API.autoPrint = function(t3) {
      var e2;
      switch ((t3 = t3 || {}).variant = t3.variant || "non-conform", t3.variant) {
        case "javascript":
          this.addJS("print({});");
          break;
        case "non-conform":
        default:
          this.internal.events.subscribe("postPutResources", function() {
            e2 = this.internal.newObject(), this.internal.out("<<"), this.internal.out("/S /Named"), this.internal.out("/Type /Action"), this.internal.out("/N /Print"), this.internal.out(">>"), this.internal.out("endobj");
          }), this.internal.events.subscribe("putCatalog", function() {
            this.internal.out("/OpenAction " + e2 + " 0 R");
          });
      }
      return this;
    }, /**
    * @license
    * Copyright (c) 2014 Steven Spungin (TwelveTone LLC)  steven@twelvetone.tv
    *
    * Licensed under the MIT License.
    * http://opensource.org/licenses/mit-license
    */
    function(t3) {
      var e2 = /* @__PURE__ */ __name2(function() {
        var t4 = void 0;
        Object.defineProperty(this, "pdf", { get: /* @__PURE__ */ __name2(function() {
          return t4;
        }, "get"), set: /* @__PURE__ */ __name2(function(e4) {
          t4 = e4;
        }, "set") });
        var e3 = 150;
        Object.defineProperty(this, "width", { get: /* @__PURE__ */ __name2(function() {
          return e3;
        }, "get"), set: /* @__PURE__ */ __name2(function(t5) {
          e3 = isNaN(t5) || false === Number.isInteger(t5) || t5 < 0 ? 150 : t5, this.getContext("2d").pageWrapXEnabled && (this.getContext("2d").pageWrapX = e3 + 1);
        }, "set") });
        var r2 = 300;
        Object.defineProperty(this, "height", { get: /* @__PURE__ */ __name2(function() {
          return r2;
        }, "get"), set: /* @__PURE__ */ __name2(function(t5) {
          r2 = isNaN(t5) || false === Number.isInteger(t5) || t5 < 0 ? 300 : t5, this.getContext("2d").pageWrapYEnabled && (this.getContext("2d").pageWrapY = r2 + 1);
        }, "set") });
        var n3 = [];
        Object.defineProperty(this, "childNodes", { get: /* @__PURE__ */ __name2(function() {
          return n3;
        }, "get"), set: /* @__PURE__ */ __name2(function(t5) {
          n3 = t5;
        }, "set") });
        var i33 = {};
        Object.defineProperty(this, "style", { get: /* @__PURE__ */ __name2(function() {
          return i33;
        }, "get"), set: /* @__PURE__ */ __name2(function(t5) {
          i33 = t5;
        }, "set") }), Object.defineProperty(this, "parentNode", {});
      }, "e");
      e2.prototype.getContext = function(t4, e3) {
        var r2;
        if ("2d" !== (t4 = t4 || "2d")) return null;
        for (r2 in e3) this.pdf.context2d.hasOwnProperty(r2) && (this.pdf.context2d[r2] = e3[r2]);
        return this.pdf.context2d._canvas = this, this.pdf.context2d;
      }, e2.prototype.toDataURL = function() {
        throw new Error("toDataURL is not implemented.");
      }, t3.events.push(["initialized", function() {
        this.canvas = new e2(), this.canvas.pdf = this;
      }]);
    }(E.API), function(e2) {
      var r2 = { left: 0, top: 0, bottom: 0, right: 0 }, n3 = false, i33 = /* @__PURE__ */ __name2(function() {
        void 0 === this.internal.__cell__ && (this.internal.__cell__ = {}, this.internal.__cell__.padding = 3, this.internal.__cell__.headerFunction = void 0, this.internal.__cell__.margins = Object.assign({}, r2), this.internal.__cell__.margins.width = this.getPageWidth(), a3.call(this));
      }, "i"), a3 = /* @__PURE__ */ __name2(function() {
        this.internal.__cell__.lastCell = new o3(), this.internal.__cell__.pages = 1;
      }, "a"), o3 = /* @__PURE__ */ __name2(function() {
        var t3 = arguments[0];
        Object.defineProperty(this, "x", { enumerable: true, get: /* @__PURE__ */ __name2(function() {
          return t3;
        }, "get"), set: /* @__PURE__ */ __name2(function(e4) {
          t3 = e4;
        }, "set") });
        var e3 = arguments[1];
        Object.defineProperty(this, "y", { enumerable: true, get: /* @__PURE__ */ __name2(function() {
          return e3;
        }, "get"), set: /* @__PURE__ */ __name2(function(t4) {
          e3 = t4;
        }, "set") });
        var r3 = arguments[2];
        Object.defineProperty(this, "width", { enumerable: true, get: /* @__PURE__ */ __name2(function() {
          return r3;
        }, "get"), set: /* @__PURE__ */ __name2(function(t4) {
          r3 = t4;
        }, "set") });
        var n4 = arguments[3];
        Object.defineProperty(this, "height", { enumerable: true, get: /* @__PURE__ */ __name2(function() {
          return n4;
        }, "get"), set: /* @__PURE__ */ __name2(function(t4) {
          n4 = t4;
        }, "set") });
        var i4 = arguments[4];
        Object.defineProperty(this, "text", { enumerable: true, get: /* @__PURE__ */ __name2(function() {
          return i4;
        }, "get"), set: /* @__PURE__ */ __name2(function(t4) {
          i4 = t4;
        }, "set") });
        var a4 = arguments[5];
        Object.defineProperty(this, "lineNumber", { enumerable: true, get: /* @__PURE__ */ __name2(function() {
          return a4;
        }, "get"), set: /* @__PURE__ */ __name2(function(t4) {
          a4 = t4;
        }, "set") });
        var o4 = arguments[6];
        return Object.defineProperty(this, "align", { enumerable: true, get: /* @__PURE__ */ __name2(function() {
          return o4;
        }, "get"), set: /* @__PURE__ */ __name2(function(t4) {
          o4 = t4;
        }, "set") }), this;
      }, "o");
      o3.prototype.clone = function() {
        return new o3(this.x, this.y, this.width, this.height, this.text, this.lineNumber, this.align);
      }, o3.prototype.toArray = function() {
        return [this.x, this.y, this.width, this.height, this.text, this.lineNumber, this.align];
      }, e2.setHeaderFunction = function(t3) {
        return i33.call(this), this.internal.__cell__.headerFunction = "function" == typeof t3 ? t3 : void 0, this;
      }, e2.getTextDimensions = function(t3, e3) {
        i33.call(this);
        var r3 = (e3 = e3 || {}).fontSize || this.getFontSize(), n4 = e3.font || this.getFont(), a4 = e3.scaleFactor || this.internal.scaleFactor, o4 = 0, s4 = 0, c5 = 0, u3 = this;
        if (!Array.isArray(t3) && "string" != typeof t3) {
          if ("number" != typeof t3) throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");
          t3 = String(t3);
        }
        var h3 = e3.maxWidth;
        h3 > 0 ? "string" == typeof t3 ? t3 = this.splitTextToSize(t3, h3) : "[object Array]" === Object.prototype.toString.call(t3) && (t3 = t3.reduce(function(t4, e4) {
          return t4.concat(u3.splitTextToSize(e4, h3));
        }, [])) : t3 = Array.isArray(t3) ? t3 : [t3];
        for (var l3 = 0; l3 < t3.length; l3++) o4 < (c5 = this.getStringUnitWidth(t3[l3], { font: n4 }) * r3) && (o4 = c5);
        return 0 !== o4 && (s4 = t3.length), { w: o4 /= a4, h: Math.max((s4 * r3 * this.getLineHeightFactor() - r3 * (this.getLineHeightFactor() - 1)) / a4, 0) };
      }, e2.cellAddPage = function() {
        i33.call(this), this.addPage();
        var t3 = this.internal.__cell__.margins || r2;
        return this.internal.__cell__.lastCell = new o3(t3.left, t3.top, void 0, void 0), this.internal.__cell__.pages += 1, this;
      };
      var s3 = e2.cell = function() {
        var t3;
        t3 = arguments[0] instanceof o3 ? arguments[0] : new o3(arguments[0], arguments[1], arguments[2], arguments[3], arguments[4], arguments[5]), i33.call(this);
        var e3 = this.internal.__cell__.lastCell, a4 = this.internal.__cell__.padding, s4 = this.internal.__cell__.margins || r2, c5 = this.internal.__cell__.tableHeaderRow, u3 = this.internal.__cell__.printHeaders;
        return void 0 !== e3.lineNumber && (e3.lineNumber === t3.lineNumber ? (t3.x = (e3.x || 0) + (e3.width || 0), t3.y = e3.y || 0) : e3.y + e3.height + t3.height + s4.bottom > this.getPageHeight() ? (this.cellAddPage(), t3.y = s4.top, u3 && c5 && (this.printHeaderRow(t3.lineNumber, true), t3.y += c5[0].height)) : t3.y = e3.y + e3.height || t3.y), void 0 !== t3.text[0] && (this.rect(t3.x, t3.y, t3.width, t3.height, true === n3 ? "FD" : void 0), "right" === t3.align ? this.text(t3.text, t3.x + t3.width - a4, t3.y + a4, { align: "right", baseline: "top" }) : "center" === t3.align ? this.text(t3.text, t3.x + t3.width / 2, t3.y + a4, { align: "center", baseline: "top", maxWidth: t3.width - a4 - a4 }) : this.text(t3.text, t3.x + a4, t3.y + a4, { align: "left", baseline: "top", maxWidth: t3.width - a4 - a4 })), this.internal.__cell__.lastCell = t3, this;
      };
      e2.table = function(e3, n4, u3, h3, l3) {
        if (i33.call(this), !u3) throw new Error("No data for PDF table.");
        var f3, d2, p3, g2, m4 = [], v3 = [], b2 = [], y3 = {}, w2 = {}, N3 = [], L2 = [], A2 = (l3 = l3 || {}).autoSize || false, x22 = false !== l3.printHeaders, S2 = l3.css && void 0 !== l3.css["font-size"] ? 16 * l3.css["font-size"] : l3.fontSize || 12, _3 = l3.margins || Object.assign({ width: this.getPageWidth() }, r2), P2 = "number" == typeof l3.padding ? l3.padding : 3, k2 = l3.headerBackgroundColor || "#c8c8c8", I2 = l3.headerTextColor || "#000";
        if (a3.call(this), this.internal.__cell__.printHeaders = x22, this.internal.__cell__.margins = _3, this.internal.__cell__.table_font_size = S2, this.internal.__cell__.padding = P2, this.internal.__cell__.headerBackgroundColor = k2, this.internal.__cell__.headerTextColor = I2, this.setFontSize(S2), null == h3) v3 = m4 = Object.keys(u3[0]), b2 = m4.map(function() {
          return "left";
        });
        else if (Array.isArray(h3) && "object" === _typeof(h3[0])) for (m4 = h3.map(function(t3) {
          return t3.name;
        }), v3 = h3.map(function(t3) {
          return t3.prompt || t3.name || "";
        }), b2 = h3.map(function(t3) {
          return t3.align || "left";
        }), f3 = 0; f3 < h3.length; f3 += 1) w2[h3[f3].name] = h3[f3].width * (19.049976 / 25.4);
        else Array.isArray(h3) && "string" == typeof h3[0] && (v3 = m4 = h3, b2 = m4.map(function() {
          return "left";
        }));
        if (A2 || Array.isArray(h3) && "string" == typeof h3[0]) for (f3 = 0; f3 < m4.length; f3 += 1) {
          for (y3[g2 = m4[f3]] = u3.map(function(t3) {
            return t3[g2];
          }), this.setFont(void 0, "bold"), N3.push(this.getTextDimensions(v3[f3], { fontSize: this.internal.__cell__.table_font_size, scaleFactor: this.internal.scaleFactor }).w), d2 = y3[g2], this.setFont(void 0, "normal"), p3 = 0; p3 < d2.length; p3 += 1) N3.push(this.getTextDimensions(d2[p3], { fontSize: this.internal.__cell__.table_font_size, scaleFactor: this.internal.scaleFactor }).w);
          w2[g2] = Math.max.apply(null, N3) + P2 + P2, N3 = [];
        }
        if (x22) {
          var F2 = {};
          for (f3 = 0; f3 < m4.length; f3 += 1) F2[m4[f3]] = {}, F2[m4[f3]].text = v3[f3], F2[m4[f3]].align = b2[f3];
          var C2 = c4.call(this, F2, w2);
          L2 = m4.map(function(t3) {
            return new o3(e3, n4, w2[t3], C2, F2[t3].text, void 0, F2[t3].align);
          }), this.setTableHeaderRow(L2), this.printHeaderRow(1, false);
        }
        var j2 = h3.reduce(function(t3, e4) {
          return t3[e4.name] = e4.align, t3;
        }, {});
        for (f3 = 0; f3 < u3.length; f3 += 1) {
          "rowStart" in l3 && l3.rowStart instanceof Function && l3.rowStart({ row: f3, data: u3[f3] }, this);
          var O3 = c4.call(this, u3[f3], w2);
          for (p3 = 0; p3 < m4.length; p3 += 1) {
            var B2 = u3[f3][m4[p3]];
            "cellStart" in l3 && l3.cellStart instanceof Function && l3.cellStart({ row: f3, col: p3, data: B2 }, this), s3.call(this, new o3(e3, n4, w2[m4[p3]], O3, B2, f3 + 2, j2[m4[p3]]));
          }
        }
        return this.internal.__cell__.table_x = e3, this.internal.__cell__.table_y = n4, this;
      };
      var c4 = /* @__PURE__ */ __name2(function(t3, e3) {
        var r3 = this.internal.__cell__.padding, n4 = this.internal.__cell__.table_font_size, i4 = this.internal.scaleFactor;
        return Object.keys(t3).map(function(n5) {
          var i5 = t3[n5];
          return this.splitTextToSize(i5.hasOwnProperty("text") ? i5.text : i5, e3[n5] - r3 - r3);
        }, this).map(function(t4) {
          return this.getLineHeightFactor() * t4.length * n4 / i4 + r3 + r3;
        }, this).reduce(function(t4, e4) {
          return Math.max(t4, e4);
        }, 0);
      }, "c");
      e2.setTableHeaderRow = function(t3) {
        i33.call(this), this.internal.__cell__.tableHeaderRow = t3;
      }, e2.printHeaderRow = function(t3, e3) {
        if (i33.call(this), !this.internal.__cell__.tableHeaderRow) throw new Error("Property tableHeaderRow does not exist.");
        var r3;
        if (n3 = true, "function" == typeof this.internal.__cell__.headerFunction) {
          var a4 = this.internal.__cell__.headerFunction(this, this.internal.__cell__.pages);
          this.internal.__cell__.lastCell = new o3(a4[0], a4[1], a4[2], a4[3], void 0, -1);
        }
        this.setFont(void 0, "bold");
        for (var c5 = [], u3 = 0; u3 < this.internal.__cell__.tableHeaderRow.length; u3 += 1) {
          r3 = this.internal.__cell__.tableHeaderRow[u3].clone(), e3 && (r3.y = this.internal.__cell__.margins.top || 0, c5.push(r3)), r3.lineNumber = t3;
          var h3 = this.getTextColor();
          this.setTextColor(this.internal.__cell__.headerTextColor), this.setFillColor(this.internal.__cell__.headerBackgroundColor), s3.call(this, r3), this.setTextColor(h3);
        }
        c5.length > 0 && this.setTableHeaderRow(c5), this.setFont(void 0, "normal"), n3 = false;
      };
    }(E.API);
    Pt = { italic: ["italic", "oblique", "normal"], oblique: ["oblique", "italic", "normal"], normal: ["normal", "oblique", "italic"] };
    kt = ["ultra-condensed", "extra-condensed", "condensed", "semi-condensed", "normal", "semi-expanded", "expanded", "extra-expanded", "ultra-expanded"];
    It = _t(kt);
    Ft = [100, 200, 300, 400, 500, 600, 700, 800, 900];
    Ct = _t(Ft);
    __name2(jt, "jt");
    __name2(Ot, "Ot");
    Bt = { "sans-serif": "helvetica", fixed: "courier", monospace: "courier", terminal: "courier", cursive: "times", fantasy: "times", serif: "times" };
    Mt = { caption: "times", icon: "times", menu: "times", "message-box": "times", "small-caption": "times", "status-bar": "times" };
    __name2(Et, "Et");
    __name2(qt, "qt");
    __name2(Dt, "Dt");
    __name2(Rt, "Rt");
    __name2(Tt, "Tt");
    Wt = ["times"];
    !function(e2) {
      var r2, n3, i33, o3, s3, c4, u3, h3, l3, d2 = /* @__PURE__ */ __name2(function(t3) {
        return t3 = t3 || {}, this.isStrokeTransparent = t3.isStrokeTransparent || false, this.strokeOpacity = t3.strokeOpacity || 1, this.strokeStyle = t3.strokeStyle || "#000000", this.fillStyle = t3.fillStyle || "#000000", this.isFillTransparent = t3.isFillTransparent || false, this.fillOpacity = t3.fillOpacity || 1, this.font = t3.font || "10px sans-serif", this.textBaseline = t3.textBaseline || "alphabetic", this.textAlign = t3.textAlign || "left", this.lineWidth = t3.lineWidth || 1, this.lineJoin = t3.lineJoin || "miter", this.lineCap = t3.lineCap || "butt", this.path = t3.path || [], this.transform = void 0 !== t3.transform ? t3.transform.clone() : new h3(), this.globalCompositeOperation = t3.globalCompositeOperation || "normal", this.globalAlpha = t3.globalAlpha || 1, this.clip_path = t3.clip_path || [], this.currentPoint = t3.currentPoint || new c4(), this.miterLimit = t3.miterLimit || 10, this.lastPoint = t3.lastPoint || new c4(), this.lineDashOffset = t3.lineDashOffset || 0, this.lineDash = t3.lineDash || [], this.margin = t3.margin || [0, 0, 0, 0], this.prevPageLastElemOffset = t3.prevPageLastElemOffset || 0, this.ignoreClearRect = "boolean" != typeof t3.ignoreClearRect || t3.ignoreClearRect, this;
      }, "d");
      e2.events.push(["initialized", function() {
        this.context2d = new p3(this), r2 = this.internal.f2, n3 = this.internal.getCoordinateString, i33 = this.internal.getVerticalCoordinateString, o3 = this.internal.getHorizontalCoordinate, s3 = this.internal.getVerticalCoordinate, c4 = this.internal.Point, u3 = this.internal.Rectangle, h3 = this.internal.Matrix, l3 = new d2();
      }]);
      var p3 = /* @__PURE__ */ __name2(function(t3) {
        Object.defineProperty(this, "canvas", { get: /* @__PURE__ */ __name2(function() {
          return { parentNode: false, style: false };
        }, "get") });
        var e3 = t3;
        Object.defineProperty(this, "pdf", { get: /* @__PURE__ */ __name2(function() {
          return e3;
        }, "get") });
        var r3 = false;
        Object.defineProperty(this, "pageWrapXEnabled", { get: /* @__PURE__ */ __name2(function() {
          return r3;
        }, "get"), set: /* @__PURE__ */ __name2(function(t4) {
          r3 = Boolean(t4);
        }, "set") });
        var n4 = false;
        Object.defineProperty(this, "pageWrapYEnabled", { get: /* @__PURE__ */ __name2(function() {
          return n4;
        }, "get"), set: /* @__PURE__ */ __name2(function(t4) {
          n4 = Boolean(t4);
        }, "set") });
        var i4 = 0;
        Object.defineProperty(this, "posX", { get: /* @__PURE__ */ __name2(function() {
          return i4;
        }, "get"), set: /* @__PURE__ */ __name2(function(t4) {
          isNaN(t4) || (i4 = t4);
        }, "set") });
        var a3 = 0;
        Object.defineProperty(this, "posY", { get: /* @__PURE__ */ __name2(function() {
          return a3;
        }, "get"), set: /* @__PURE__ */ __name2(function(t4) {
          isNaN(t4) || (a3 = t4);
        }, "set") }), Object.defineProperty(this, "margin", { get: /* @__PURE__ */ __name2(function() {
          return l3.margin;
        }, "get"), set: /* @__PURE__ */ __name2(function(t4) {
          var e4;
          "number" == typeof t4 ? e4 = [t4, t4, t4, t4] : ((e4 = new Array(4))[0] = t4[0], e4[1] = t4.length >= 2 ? t4[1] : e4[0], e4[2] = t4.length >= 3 ? t4[2] : e4[0], e4[3] = t4.length >= 4 ? t4[3] : e4[1]), l3.margin = e4;
        }, "set") });
        var o4 = false;
        Object.defineProperty(this, "autoPaging", { get: /* @__PURE__ */ __name2(function() {
          return o4;
        }, "get"), set: /* @__PURE__ */ __name2(function(t4) {
          o4 = t4;
        }, "set") });
        var s4 = 0;
        Object.defineProperty(this, "lastBreak", { get: /* @__PURE__ */ __name2(function() {
          return s4;
        }, "get"), set: /* @__PURE__ */ __name2(function(t4) {
          s4 = t4;
        }, "set") });
        var c5 = [];
        Object.defineProperty(this, "pageBreaks", { get: /* @__PURE__ */ __name2(function() {
          return c5;
        }, "get"), set: /* @__PURE__ */ __name2(function(t4) {
          c5 = t4;
        }, "set") }), Object.defineProperty(this, "ctx", { get: /* @__PURE__ */ __name2(function() {
          return l3;
        }, "get"), set: /* @__PURE__ */ __name2(function(t4) {
          t4 instanceof d2 && (l3 = t4);
        }, "set") }), Object.defineProperty(this, "path", { get: /* @__PURE__ */ __name2(function() {
          return l3.path;
        }, "get"), set: /* @__PURE__ */ __name2(function(t4) {
          l3.path = t4;
        }, "set") });
        var u4 = [];
        Object.defineProperty(this, "ctxStack", { get: /* @__PURE__ */ __name2(function() {
          return u4;
        }, "get"), set: /* @__PURE__ */ __name2(function(t4) {
          u4 = t4;
        }, "set") }), Object.defineProperty(this, "fillStyle", { get: /* @__PURE__ */ __name2(function() {
          return this.ctx.fillStyle;
        }, "get"), set: /* @__PURE__ */ __name2(function(t4) {
          var e4;
          e4 = g2(t4), this.ctx.fillStyle = e4.style, this.ctx.isFillTransparent = 0 === e4.a, this.ctx.fillOpacity = e4.a, this.pdf.setFillColor(e4.r, e4.g, e4.b, { a: e4.a }), this.pdf.setTextColor(e4.r, e4.g, e4.b, { a: e4.a });
        }, "set") }), Object.defineProperty(this, "strokeStyle", { get: /* @__PURE__ */ __name2(function() {
          return this.ctx.strokeStyle;
        }, "get"), set: /* @__PURE__ */ __name2(function(t4) {
          var e4 = g2(t4);
          this.ctx.strokeStyle = e4.style, this.ctx.isStrokeTransparent = 0 === e4.a, this.ctx.strokeOpacity = e4.a, 0 === e4.a ? this.pdf.setDrawColor(255, 255, 255) : (e4.a, this.pdf.setDrawColor(e4.r, e4.g, e4.b));
        }, "set") }), Object.defineProperty(this, "lineCap", { get: /* @__PURE__ */ __name2(function() {
          return this.ctx.lineCap;
        }, "get"), set: /* @__PURE__ */ __name2(function(t4) {
          -1 !== ["butt", "round", "square"].indexOf(t4) && (this.ctx.lineCap = t4, this.pdf.setLineCap(t4));
        }, "set") }), Object.defineProperty(this, "lineWidth", { get: /* @__PURE__ */ __name2(function() {
          return this.ctx.lineWidth;
        }, "get"), set: /* @__PURE__ */ __name2(function(t4) {
          isNaN(t4) || (this.ctx.lineWidth = t4, this.pdf.setLineWidth(t4));
        }, "set") }), Object.defineProperty(this, "lineJoin", { get: /* @__PURE__ */ __name2(function() {
          return this.ctx.lineJoin;
        }, "get"), set: /* @__PURE__ */ __name2(function(t4) {
          -1 !== ["bevel", "round", "miter"].indexOf(t4) && (this.ctx.lineJoin = t4, this.pdf.setLineJoin(t4));
        }, "set") }), Object.defineProperty(this, "miterLimit", { get: /* @__PURE__ */ __name2(function() {
          return this.ctx.miterLimit;
        }, "get"), set: /* @__PURE__ */ __name2(function(t4) {
          isNaN(t4) || (this.ctx.miterLimit = t4, this.pdf.setMiterLimit(t4));
        }, "set") }), Object.defineProperty(this, "textBaseline", { get: /* @__PURE__ */ __name2(function() {
          return this.ctx.textBaseline;
        }, "get"), set: /* @__PURE__ */ __name2(function(t4) {
          this.ctx.textBaseline = t4;
        }, "set") }), Object.defineProperty(this, "textAlign", { get: /* @__PURE__ */ __name2(function() {
          return this.ctx.textAlign;
        }, "get"), set: /* @__PURE__ */ __name2(function(t4) {
          -1 !== ["right", "end", "center", "left", "start"].indexOf(t4) && (this.ctx.textAlign = t4);
        }, "set") });
        var h4 = null;
        function f3(t4, e4) {
          if (null === h4) {
            var r4 = function(t5) {
              var e5 = [];
              return Object.keys(t5).forEach(function(r5) {
                t5[r5].forEach(function(t6) {
                  var n5 = null;
                  switch (t6) {
                    case "bold":
                      n5 = { family: r5, weight: "bold" };
                      break;
                    case "italic":
                      n5 = { family: r5, style: "italic" };
                      break;
                    case "bolditalic":
                      n5 = { family: r5, weight: "bold", style: "italic" };
                      break;
                    case "":
                    case "normal":
                      n5 = { family: r5 };
                  }
                  null !== n5 && (n5.ref = { name: r5, style: t6 }, e5.push(n5));
                });
              }), e5;
            }(t4.getFontList());
            h4 = function(t5) {
              for (var e5 = {}, r5 = 0; r5 < t5.length; ++r5) {
                var n5 = jt(t5[r5]), i5 = n5.family, a4 = n5.stretch, o5 = n5.style, s5 = n5.weight;
                e5[i5] = e5[i5] || {}, e5[i5][a4] = e5[i5][a4] || {}, e5[i5][a4][o5] = e5[i5][a4][o5] || {}, e5[i5][a4][o5][s5] = n5;
              }
              return e5;
            }(r4.concat(e4));
          }
          return h4;
        }
        __name(f3, "f3");
        __name2(f3, "f");
        var p4 = null;
        Object.defineProperty(this, "fontFaces", { get: /* @__PURE__ */ __name2(function() {
          return p4;
        }, "get"), set: /* @__PURE__ */ __name2(function(t4) {
          h4 = null, p4 = t4;
        }, "set") }), Object.defineProperty(this, "font", { get: /* @__PURE__ */ __name2(function() {
          return this.ctx.font;
        }, "get"), set: /* @__PURE__ */ __name2(function(t4) {
          var e4;
          if (this.ctx.font = t4, null !== (e4 = /^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(t4))) {
            var r4 = e4[1];
            e4[2];
            var n5 = e4[3], i5 = e4[4];
            e4[5];
            var a4 = e4[6], o5 = /^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(i5)[2];
            i5 = "px" === o5 ? Math.floor(parseFloat(i5) * this.pdf.internal.scaleFactor) : "em" === o5 ? Math.floor(parseFloat(i5) * this.pdf.getFontSize()) : Math.floor(parseFloat(i5) * this.pdf.internal.scaleFactor), this.pdf.setFontSize(i5);
            var s5 = function(t5) {
              var e5, r5, n6 = [], i6 = t5.trim();
              if ("" === i6) return Wt;
              if (i6 in Mt) return [Mt[i6]];
              for (; "" !== i6; ) {
                switch (r5 = null, e5 = (i6 = Dt(i6)).charAt(0)) {
                  case '"':
                  case "'":
                    r5 = Rt(i6.substring(1), e5);
                    break;
                  default:
                    r5 = Tt(i6);
                }
                if (null === r5) return Wt;
                if (n6.push(r5[0]), "" !== (i6 = Dt(r5[1])) && "," !== i6.charAt(0)) return Wt;
                i6 = i6.replace(/^,/, "");
              }
              return n6;
            }(a4);
            if (this.fontFaces) {
              var c6 = qt(f3(this.pdf, this.fontFaces), s5.map(function(t5) {
                return { family: t5, stretch: "normal", weight: n5, style: r4 };
              }));
              this.pdf.setFont(c6.ref.name, c6.ref.style);
            } else {
              var u5 = "";
              ("bold" === n5 || parseInt(n5, 10) >= 700 || "bold" === r4) && (u5 = "bold"), "italic" === r4 && (u5 += "italic"), 0 === u5.length && (u5 = "normal");
              for (var h5 = "", l4 = { arial: "Helvetica", Arial: "Helvetica", verdana: "Helvetica", Verdana: "Helvetica", helvetica: "Helvetica", Helvetica: "Helvetica", "sans-serif": "Helvetica", fixed: "Courier", monospace: "Courier", terminal: "Courier", cursive: "Times", fantasy: "Times", serif: "Times" }, d3 = 0; d3 < s5.length; d3++) {
                if (void 0 !== this.pdf.internal.getFont(s5[d3], u5, { noFallback: true, disableWarning: true })) {
                  h5 = s5[d3];
                  break;
                }
                if ("bolditalic" === u5 && void 0 !== this.pdf.internal.getFont(s5[d3], "bold", { noFallback: true, disableWarning: true })) h5 = s5[d3], u5 = "bold";
                else if (void 0 !== this.pdf.internal.getFont(s5[d3], "normal", { noFallback: true, disableWarning: true })) {
                  h5 = s5[d3], u5 = "normal";
                  break;
                }
              }
              if ("" === h5) {
                for (var p5 = 0; p5 < s5.length; p5++) if (l4[s5[p5]]) {
                  h5 = l4[s5[p5]];
                  break;
                }
              }
              h5 = "" === h5 ? "Times" : h5, this.pdf.setFont(h5, u5);
            }
          }
        }, "set") }), Object.defineProperty(this, "globalCompositeOperation", { get: /* @__PURE__ */ __name2(function() {
          return this.ctx.globalCompositeOperation;
        }, "get"), set: /* @__PURE__ */ __name2(function(t4) {
          this.ctx.globalCompositeOperation = t4;
        }, "set") }), Object.defineProperty(this, "globalAlpha", { get: /* @__PURE__ */ __name2(function() {
          return this.ctx.globalAlpha;
        }, "get"), set: /* @__PURE__ */ __name2(function(t4) {
          this.ctx.globalAlpha = t4;
        }, "set") }), Object.defineProperty(this, "lineDashOffset", { get: /* @__PURE__ */ __name2(function() {
          return this.ctx.lineDashOffset;
        }, "get"), set: /* @__PURE__ */ __name2(function(t4) {
          this.ctx.lineDashOffset = t4, T3.call(this);
        }, "set") }), Object.defineProperty(this, "lineDash", { get: /* @__PURE__ */ __name2(function() {
          return this.ctx.lineDash;
        }, "get"), set: /* @__PURE__ */ __name2(function(t4) {
          this.ctx.lineDash = t4, T3.call(this);
        }, "set") }), Object.defineProperty(this, "ignoreClearRect", { get: /* @__PURE__ */ __name2(function() {
          return this.ctx.ignoreClearRect;
        }, "get"), set: /* @__PURE__ */ __name2(function(t4) {
          this.ctx.ignoreClearRect = Boolean(t4);
        }, "set") });
      }, "p");
      p3.prototype.setLineDash = function(t3) {
        this.lineDash = t3;
      }, p3.prototype.getLineDash = function() {
        return this.lineDash.length % 2 ? this.lineDash.concat(this.lineDash) : this.lineDash.slice();
      }, p3.prototype.fill = function() {
        A2.call(this, "fill", false);
      }, p3.prototype.stroke = function() {
        A2.call(this, "stroke", false);
      }, p3.prototype.beginPath = function() {
        this.path = [{ type: "begin" }];
      }, p3.prototype.moveTo = function(t3, e3) {
        if (isNaN(t3) || isNaN(e3)) throw a2.error("jsPDF.context2d.moveTo: Invalid arguments", arguments), new Error("Invalid arguments passed to jsPDF.context2d.moveTo");
        var r3 = this.ctx.transform.applyToPoint(new c4(t3, e3));
        this.path.push({ type: "mt", x: r3.x, y: r3.y }), this.ctx.lastPoint = new c4(t3, e3);
      }, p3.prototype.closePath = function() {
        var e3 = new c4(0, 0), r3 = 0;
        for (r3 = this.path.length - 1; -1 !== r3; r3--) if ("begin" === this.path[r3].type && "object" === _typeof(this.path[r3 + 1]) && "number" == typeof this.path[r3 + 1].x) {
          e3 = new c4(this.path[r3 + 1].x, this.path[r3 + 1].y);
          break;
        }
        this.path.push({ type: "close" }), this.ctx.lastPoint = new c4(e3.x, e3.y);
      }, p3.prototype.lineTo = function(t3, e3) {
        if (isNaN(t3) || isNaN(e3)) throw a2.error("jsPDF.context2d.lineTo: Invalid arguments", arguments), new Error("Invalid arguments passed to jsPDF.context2d.lineTo");
        var r3 = this.ctx.transform.applyToPoint(new c4(t3, e3));
        this.path.push({ type: "lt", x: r3.x, y: r3.y }), this.ctx.lastPoint = new c4(r3.x, r3.y);
      }, p3.prototype.clip = function() {
        this.ctx.clip_path = JSON.parse(JSON.stringify(this.path)), A2.call(this, null, true);
      }, p3.prototype.quadraticCurveTo = function(t3, e3, r3, n4) {
        if (isNaN(r3) || isNaN(n4) || isNaN(t3) || isNaN(e3)) throw a2.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments", arguments), new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");
        var i4 = this.ctx.transform.applyToPoint(new c4(r3, n4)), o4 = this.ctx.transform.applyToPoint(new c4(t3, e3));
        this.path.push({ type: "qct", x1: o4.x, y1: o4.y, x: i4.x, y: i4.y }), this.ctx.lastPoint = new c4(i4.x, i4.y);
      }, p3.prototype.bezierCurveTo = function(t3, e3, r3, n4, i4, o4) {
        if (isNaN(i4) || isNaN(o4) || isNaN(t3) || isNaN(e3) || isNaN(r3) || isNaN(n4)) throw a2.error("jsPDF.context2d.bezierCurveTo: Invalid arguments", arguments), new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");
        var s4 = this.ctx.transform.applyToPoint(new c4(i4, o4)), u4 = this.ctx.transform.applyToPoint(new c4(t3, e3)), h4 = this.ctx.transform.applyToPoint(new c4(r3, n4));
        this.path.push({ type: "bct", x1: u4.x, y1: u4.y, x2: h4.x, y2: h4.y, x: s4.x, y: s4.y }), this.ctx.lastPoint = new c4(s4.x, s4.y);
      }, p3.prototype.arc = function(t3, e3, r3, n4, i4, o4) {
        if (isNaN(t3) || isNaN(e3) || isNaN(r3) || isNaN(n4) || isNaN(i4)) throw a2.error("jsPDF.context2d.arc: Invalid arguments", arguments), new Error("Invalid arguments passed to jsPDF.context2d.arc");
        if (o4 = Boolean(o4), !this.ctx.transform.isIdentity) {
          var s4 = this.ctx.transform.applyToPoint(new c4(t3, e3));
          t3 = s4.x, e3 = s4.y;
          var u4 = this.ctx.transform.applyToPoint(new c4(0, r3)), h4 = this.ctx.transform.applyToPoint(new c4(0, 0));
          r3 = Math.sqrt(Math.pow(u4.x - h4.x, 2) + Math.pow(u4.y - h4.y, 2));
        }
        Math.abs(i4 - n4) >= 2 * Math.PI && (n4 = 0, i4 = 2 * Math.PI), this.path.push({ type: "arc", x: t3, y: e3, radius: r3, startAngle: n4, endAngle: i4, counterclockwise: o4 });
      }, p3.prototype.arcTo = function(t3, e3, r3, n4, i4) {
        throw new Error("arcTo not implemented.");
      }, p3.prototype.rect = function(t3, e3, r3, n4) {
        if (isNaN(t3) || isNaN(e3) || isNaN(r3) || isNaN(n4)) throw a2.error("jsPDF.context2d.rect: Invalid arguments", arguments), new Error("Invalid arguments passed to jsPDF.context2d.rect");
        this.moveTo(t3, e3), this.lineTo(t3 + r3, e3), this.lineTo(t3 + r3, e3 + n4), this.lineTo(t3, e3 + n4), this.lineTo(t3, e3), this.lineTo(t3 + r3, e3), this.lineTo(t3, e3);
      }, p3.prototype.fillRect = function(t3, e3, r3, n4) {
        if (isNaN(t3) || isNaN(e3) || isNaN(r3) || isNaN(n4)) throw a2.error("jsPDF.context2d.fillRect: Invalid arguments", arguments), new Error("Invalid arguments passed to jsPDF.context2d.fillRect");
        if (!m4.call(this)) {
          var i4 = {};
          "butt" !== this.lineCap && (i4.lineCap = this.lineCap, this.lineCap = "butt"), "miter" !== this.lineJoin && (i4.lineJoin = this.lineJoin, this.lineJoin = "miter"), this.beginPath(), this.rect(t3, e3, r3, n4), this.fill(), i4.hasOwnProperty("lineCap") && (this.lineCap = i4.lineCap), i4.hasOwnProperty("lineJoin") && (this.lineJoin = i4.lineJoin);
        }
      }, p3.prototype.strokeRect = function(t3, e3, r3, n4) {
        if (isNaN(t3) || isNaN(e3) || isNaN(r3) || isNaN(n4)) throw a2.error("jsPDF.context2d.strokeRect: Invalid arguments", arguments), new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");
        v3.call(this) || (this.beginPath(), this.rect(t3, e3, r3, n4), this.stroke());
      }, p3.prototype.clearRect = function(t3, e3, r3, n4) {
        if (isNaN(t3) || isNaN(e3) || isNaN(r3) || isNaN(n4)) throw a2.error("jsPDF.context2d.clearRect: Invalid arguments", arguments), new Error("Invalid arguments passed to jsPDF.context2d.clearRect");
        this.ignoreClearRect || (this.fillStyle = "#ffffff", this.fillRect(t3, e3, r3, n4));
      }, p3.prototype.save = function(t3) {
        t3 = "boolean" != typeof t3 || t3;
        for (var e3 = this.pdf.internal.getCurrentPageInfo().pageNumber, r3 = 0; r3 < this.pdf.internal.getNumberOfPages(); r3++) this.pdf.setPage(r3 + 1), this.pdf.internal.out("q");
        if (this.pdf.setPage(e3), t3) {
          this.ctx.fontSize = this.pdf.internal.getFontSize();
          var n4 = new d2(this.ctx);
          this.ctxStack.push(this.ctx), this.ctx = n4;
        }
      }, p3.prototype.restore = function(t3) {
        t3 = "boolean" != typeof t3 || t3;
        for (var e3 = this.pdf.internal.getCurrentPageInfo().pageNumber, r3 = 0; r3 < this.pdf.internal.getNumberOfPages(); r3++) this.pdf.setPage(r3 + 1), this.pdf.internal.out("Q");
        this.pdf.setPage(e3), t3 && 0 !== this.ctxStack.length && (this.ctx = this.ctxStack.pop(), this.fillStyle = this.ctx.fillStyle, this.strokeStyle = this.ctx.strokeStyle, this.font = this.ctx.font, this.lineCap = this.ctx.lineCap, this.lineWidth = this.ctx.lineWidth, this.lineJoin = this.ctx.lineJoin, this.lineDash = this.ctx.lineDash, this.lineDashOffset = this.ctx.lineDashOffset);
      }, p3.prototype.toDataURL = function() {
        throw new Error("toDataUrl not implemented.");
      };
      var g2 = /* @__PURE__ */ __name2(function(t3) {
        var e3, r3, n4, i4;
        if (true === t3.isCanvasGradient && (t3 = t3.getColor()), !t3) return { r: 0, g: 0, b: 0, a: 0, style: t3 };
        if (/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(t3)) e3 = 0, r3 = 0, n4 = 0, i4 = 0;
        else {
          var a3 = /rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(t3);
          if (null !== a3) e3 = parseInt(a3[1]), r3 = parseInt(a3[2]), n4 = parseInt(a3[3]), i4 = 1;
          else if (null !== (a3 = /rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(t3))) e3 = parseInt(a3[1]), r3 = parseInt(a3[2]), n4 = parseInt(a3[3]), i4 = parseFloat(a3[4]);
          else {
            if (i4 = 1, "string" == typeof t3 && "#" !== t3.charAt(0)) {
              var o4 = new f2(t3);
              t3 = o4.ok ? o4.toHex() : "#000000";
            }
            4 === t3.length ? (e3 = t3.substring(1, 2), e3 += e3, r3 = t3.substring(2, 3), r3 += r3, n4 = t3.substring(3, 4), n4 += n4) : (e3 = t3.substring(1, 3), r3 = t3.substring(3, 5), n4 = t3.substring(5, 7)), e3 = parseInt(e3, 16), r3 = parseInt(r3, 16), n4 = parseInt(n4, 16);
          }
        }
        return { r: e3, g: r3, b: n4, a: i4, style: t3 };
      }, "g"), m4 = /* @__PURE__ */ __name2(function() {
        return this.ctx.isFillTransparent || 0 == this.globalAlpha;
      }, "m"), v3 = /* @__PURE__ */ __name2(function() {
        return Boolean(this.ctx.isStrokeTransparent || 0 == this.globalAlpha);
      }, "v");
      p3.prototype.fillText = function(t3, e3, r3, n4) {
        if (isNaN(e3) || isNaN(r3) || "string" != typeof t3) throw a2.error("jsPDF.context2d.fillText: Invalid arguments", arguments), new Error("Invalid arguments passed to jsPDF.context2d.fillText");
        if (n4 = isNaN(n4) ? void 0 : n4, !m4.call(this)) {
          var i4 = q2(this.ctx.transform.rotation), o4 = this.ctx.transform.scaleX;
          C2.call(this, { text: t3, x: e3, y: r3, scale: o4, angle: i4, align: this.textAlign, maxWidth: n4 });
        }
      }, p3.prototype.strokeText = function(t3, e3, r3, n4) {
        if (isNaN(e3) || isNaN(r3) || "string" != typeof t3) throw a2.error("jsPDF.context2d.strokeText: Invalid arguments", arguments), new Error("Invalid arguments passed to jsPDF.context2d.strokeText");
        if (!v3.call(this)) {
          n4 = isNaN(n4) ? void 0 : n4;
          var i4 = q2(this.ctx.transform.rotation), o4 = this.ctx.transform.scaleX;
          C2.call(this, { text: t3, x: e3, y: r3, scale: o4, renderingMode: "stroke", angle: i4, align: this.textAlign, maxWidth: n4 });
        }
      }, p3.prototype.measureText = function(t3) {
        if ("string" != typeof t3) throw a2.error("jsPDF.context2d.measureText: Invalid arguments", arguments), new Error("Invalid arguments passed to jsPDF.context2d.measureText");
        var e3 = this.pdf, r3 = this.pdf.internal.scaleFactor, n4 = e3.internal.getFontSize(), i4 = e3.getStringUnitWidth(t3) * n4 / e3.internal.scaleFactor, o4 = /* @__PURE__ */ __name2(function(t4) {
          var e4 = (t4 = t4 || {}).width || 0;
          return Object.defineProperty(this, "width", { get: /* @__PURE__ */ __name2(function() {
            return e4;
          }, "get") }), this;
        }, "o");
        return new o4({ width: i4 *= Math.round(96 * r3 / 72 * 1e4) / 1e4 });
      }, p3.prototype.scale = function(t3, e3) {
        if (isNaN(t3) || isNaN(e3)) throw a2.error("jsPDF.context2d.scale: Invalid arguments", arguments), new Error("Invalid arguments passed to jsPDF.context2d.scale");
        var r3 = new h3(t3, 0, 0, e3, 0, 0);
        this.ctx.transform = this.ctx.transform.multiply(r3);
      }, p3.prototype.rotate = function(t3) {
        if (isNaN(t3)) throw a2.error("jsPDF.context2d.rotate: Invalid arguments", arguments), new Error("Invalid arguments passed to jsPDF.context2d.rotate");
        var e3 = new h3(Math.cos(t3), Math.sin(t3), -Math.sin(t3), Math.cos(t3), 0, 0);
        this.ctx.transform = this.ctx.transform.multiply(e3);
      }, p3.prototype.translate = function(t3, e3) {
        if (isNaN(t3) || isNaN(e3)) throw a2.error("jsPDF.context2d.translate: Invalid arguments", arguments), new Error("Invalid arguments passed to jsPDF.context2d.translate");
        var r3 = new h3(1, 0, 0, 1, t3, e3);
        this.ctx.transform = this.ctx.transform.multiply(r3);
      }, p3.prototype.transform = function(t3, e3, r3, n4, i4, o4) {
        if (isNaN(t3) || isNaN(e3) || isNaN(r3) || isNaN(n4) || isNaN(i4) || isNaN(o4)) throw a2.error("jsPDF.context2d.transform: Invalid arguments", arguments), new Error("Invalid arguments passed to jsPDF.context2d.transform");
        var s4 = new h3(t3, e3, r3, n4, i4, o4);
        this.ctx.transform = this.ctx.transform.multiply(s4);
      }, p3.prototype.setTransform = function(t3, e3, r3, n4, i4, a3) {
        t3 = isNaN(t3) ? 1 : t3, e3 = isNaN(e3) ? 0 : e3, r3 = isNaN(r3) ? 0 : r3, n4 = isNaN(n4) ? 1 : n4, i4 = isNaN(i4) ? 0 : i4, a3 = isNaN(a3) ? 0 : a3, this.ctx.transform = new h3(t3, e3, r3, n4, i4, a3);
      };
      var b2 = /* @__PURE__ */ __name2(function() {
        return this.margin[0] > 0 || this.margin[1] > 0 || this.margin[2] > 0 || this.margin[3] > 0;
      }, "b");
      p3.prototype.drawImage = function(t3, e3, r3, n4, i4, a3, o4, s4, c5) {
        var l4 = this.pdf.getImageProperties(t3), f3 = 1, d3 = 1, p4 = 1, g3 = 1;
        void 0 !== n4 && void 0 !== s4 && (p4 = s4 / n4, g3 = c5 / i4, f3 = l4.width / n4 * s4 / n4, d3 = l4.height / i4 * c5 / i4), void 0 === a3 && (a3 = e3, o4 = r3, e3 = 0, r3 = 0), void 0 !== n4 && void 0 === s4 && (s4 = n4, c5 = i4), void 0 === n4 && void 0 === s4 && (s4 = l4.width, c5 = l4.height);
        for (var m5, v4 = this.ctx.transform.decompose(), w3 = q2(v4.rotate.shx), A3 = new h3(), S3 = (A3 = (A3 = (A3 = A3.multiply(v4.translate)).multiply(v4.skew)).multiply(v4.scale)).applyToRectangle(new u3(a3 - e3 * p4, o4 - r3 * g3, n4 * f3, i4 * d3)), _4 = y3.call(this, S3), P3 = [], k3 = 0; k3 < _4.length; k3 += 1) -1 === P3.indexOf(_4[k3]) && P3.push(_4[k3]);
        if (L2(P3), this.autoPaging) for (var I3 = P3[0], F3 = P3[P3.length - 1], C3 = I3; C3 < F3 + 1; C3++) {
          this.pdf.setPage(C3);
          var j3 = this.pdf.internal.pageSize.width - this.margin[3] - this.margin[1], O4 = 1 === C3 ? this.posY + this.margin[0] : this.margin[0], B3 = this.pdf.internal.pageSize.height - this.posY - this.margin[0] - this.margin[2], M3 = this.pdf.internal.pageSize.height - this.margin[0] - this.margin[2], E3 = 1 === C3 ? 0 : B3 + (C3 - 2) * M3;
          if (0 !== this.ctx.clip_path.length) {
            var D3 = this.path;
            m5 = JSON.parse(JSON.stringify(this.ctx.clip_path)), this.path = N3(m5, this.posX + this.margin[3], -E3 + O4 + this.ctx.prevPageLastElemOffset), x22.call(this, "fill", true), this.path = D3;
          }
          var R3 = JSON.parse(JSON.stringify(S3));
          R3 = N3([R3], this.posX + this.margin[3], -E3 + O4 + this.ctx.prevPageLastElemOffset)[0];
          var T4 = (C3 > I3 || C3 < F3) && b2.call(this);
          T4 && (this.pdf.saveGraphicsState(), this.pdf.rect(this.margin[3], this.margin[0], j3, M3, null).clip().discardPath()), this.pdf.addImage(t3, "JPEG", R3.x, R3.y, R3.w, R3.h, null, null, w3), T4 && this.pdf.restoreGraphicsState();
        }
        else this.pdf.addImage(t3, "JPEG", S3.x, S3.y, S3.w, S3.h, null, null, w3);
      };
      var y3 = /* @__PURE__ */ __name2(function(t3, e3, r3) {
        var n4 = [];
        e3 = e3 || this.pdf.internal.pageSize.width, r3 = r3 || this.pdf.internal.pageSize.height - this.margin[0] - this.margin[2];
        var i4 = this.posY + this.ctx.prevPageLastElemOffset;
        switch (t3.type) {
          default:
          case "mt":
          case "lt":
            n4.push(Math.floor((t3.y + i4) / r3) + 1);
            break;
          case "arc":
            n4.push(Math.floor((t3.y + i4 - t3.radius) / r3) + 1), n4.push(Math.floor((t3.y + i4 + t3.radius) / r3) + 1);
            break;
          case "qct":
            var a3 = D2(this.ctx.lastPoint.x, this.ctx.lastPoint.y, t3.x1, t3.y1, t3.x, t3.y);
            n4.push(Math.floor((a3.y + i4) / r3) + 1), n4.push(Math.floor((a3.y + a3.h + i4) / r3) + 1);
            break;
          case "bct":
            var o4 = R2(this.ctx.lastPoint.x, this.ctx.lastPoint.y, t3.x1, t3.y1, t3.x2, t3.y2, t3.x, t3.y);
            n4.push(Math.floor((o4.y + i4) / r3) + 1), n4.push(Math.floor((o4.y + o4.h + i4) / r3) + 1);
            break;
          case "rect":
            n4.push(Math.floor((t3.y + i4) / r3) + 1), n4.push(Math.floor((t3.y + t3.h + i4) / r3) + 1);
        }
        for (var s4 = 0; s4 < n4.length; s4 += 1) for (; this.pdf.internal.getNumberOfPages() < n4[s4]; ) w2.call(this);
        return n4;
      }, "y"), w2 = /* @__PURE__ */ __name2(function() {
        var t3 = this.fillStyle, e3 = this.strokeStyle, r3 = this.font, n4 = this.lineCap, i4 = this.lineWidth, a3 = this.lineJoin;
        this.pdf.addPage(), this.fillStyle = t3, this.strokeStyle = e3, this.font = r3, this.lineCap = n4, this.lineWidth = i4, this.lineJoin = a3;
      }, "w"), N3 = /* @__PURE__ */ __name2(function(t3, e3, r3) {
        for (var n4 = 0; n4 < t3.length; n4++) switch (t3[n4].type) {
          case "bct":
            t3[n4].x2 += e3, t3[n4].y2 += r3;
          case "qct":
            t3[n4].x1 += e3, t3[n4].y1 += r3;
          case "mt":
          case "lt":
          case "arc":
          default:
            t3[n4].x += e3, t3[n4].y += r3;
        }
        return t3;
      }, "N"), L2 = /* @__PURE__ */ __name2(function(t3) {
        return t3.sort(function(t4, e3) {
          return t4 - e3;
        });
      }, "L"), A2 = /* @__PURE__ */ __name2(function(t3, e3) {
        for (var r3, n4, i4 = this.fillStyle, a3 = this.strokeStyle, o4 = this.lineCap, s4 = this.lineWidth, c5 = Math.abs(s4 * this.ctx.transform.scaleX), u4 = this.lineJoin, h4 = JSON.parse(JSON.stringify(this.path)), l4 = JSON.parse(JSON.stringify(this.path)), f3 = [], d3 = 0; d3 < l4.length; d3++) if (void 0 !== l4[d3].x) for (var p4 = y3.call(this, l4[d3]), g3 = 0; g3 < p4.length; g3 += 1) -1 === f3.indexOf(p4[g3]) && f3.push(p4[g3]);
        for (var m5 = 0; m5 < f3.length; m5++) for (; this.pdf.internal.getNumberOfPages() < f3[m5]; ) w2.call(this);
        if (L2(f3), this.autoPaging) for (var v4 = f3[0], A3 = f3[f3.length - 1], S3 = v4; S3 < A3 + 1; S3++) {
          this.pdf.setPage(S3), this.fillStyle = i4, this.strokeStyle = a3, this.lineCap = o4, this.lineWidth = c5, this.lineJoin = u4;
          var _4 = this.pdf.internal.pageSize.width - this.margin[3] - this.margin[1], P3 = 1 === S3 ? this.posY + this.margin[0] : this.margin[0], k3 = this.pdf.internal.pageSize.height - this.posY - this.margin[0] - this.margin[2], I3 = this.pdf.internal.pageSize.height - this.margin[0] - this.margin[2], F3 = 1 === S3 ? 0 : k3 + (S3 - 2) * I3;
          if (0 !== this.ctx.clip_path.length) {
            var C3 = this.path;
            r3 = JSON.parse(JSON.stringify(this.ctx.clip_path)), this.path = N3(r3, this.posX + this.margin[3], -F3 + P3 + this.ctx.prevPageLastElemOffset), x22.call(this, t3, true), this.path = C3;
          }
          if (n4 = JSON.parse(JSON.stringify(h4)), this.path = N3(n4, this.posX + this.margin[3], -F3 + P3 + this.ctx.prevPageLastElemOffset), false === e3 || 0 === S3) {
            var j3 = (S3 > v4 || S3 < A3) && b2.call(this);
            j3 && (this.pdf.saveGraphicsState(), this.pdf.rect(this.margin[3], this.margin[0], _4, I3, null).clip().discardPath()), x22.call(this, t3, e3), j3 && this.pdf.restoreGraphicsState();
          }
          this.lineWidth = s4;
        }
        else this.lineWidth = c5, x22.call(this, t3, e3), this.lineWidth = s4;
        this.path = h4;
      }, "A"), x22 = /* @__PURE__ */ __name2(function(t3, e3) {
        if (("stroke" !== t3 || e3 || !v3.call(this)) && ("stroke" === t3 || e3 || !m4.call(this))) {
          for (var r3, n4, i4 = [], a3 = this.path, o4 = 0; o4 < a3.length; o4++) {
            var s4 = a3[o4];
            switch (s4.type) {
              case "begin":
                i4.push({ begin: true });
                break;
              case "close":
                i4.push({ close: true });
                break;
              case "mt":
                i4.push({ start: s4, deltas: [], abs: [] });
                break;
              case "lt":
                var c5 = i4.length;
                if (a3[o4 - 1] && !isNaN(a3[o4 - 1].x) && (r3 = [s4.x - a3[o4 - 1].x, s4.y - a3[o4 - 1].y], c5 > 0)) {
                  for (; c5 >= 0; c5--) if (true !== i4[c5 - 1].close && true !== i4[c5 - 1].begin) {
                    i4[c5 - 1].deltas.push(r3), i4[c5 - 1].abs.push(s4);
                    break;
                  }
                }
                break;
              case "bct":
                r3 = [s4.x1 - a3[o4 - 1].x, s4.y1 - a3[o4 - 1].y, s4.x2 - a3[o4 - 1].x, s4.y2 - a3[o4 - 1].y, s4.x - a3[o4 - 1].x, s4.y - a3[o4 - 1].y], i4[i4.length - 1].deltas.push(r3);
                break;
              case "qct":
                var u4 = a3[o4 - 1].x + 2 / 3 * (s4.x1 - a3[o4 - 1].x), h4 = a3[o4 - 1].y + 2 / 3 * (s4.y1 - a3[o4 - 1].y), l4 = s4.x + 2 / 3 * (s4.x1 - s4.x), f3 = s4.y + 2 / 3 * (s4.y1 - s4.y), d3 = s4.x, p4 = s4.y;
                r3 = [u4 - a3[o4 - 1].x, h4 - a3[o4 - 1].y, l4 - a3[o4 - 1].x, f3 - a3[o4 - 1].y, d3 - a3[o4 - 1].x, p4 - a3[o4 - 1].y], i4[i4.length - 1].deltas.push(r3);
                break;
              case "arc":
                i4.push({ deltas: [], abs: [], arc: true }), Array.isArray(i4[i4.length - 1].abs) && i4[i4.length - 1].abs.push(s4);
            }
          }
          n4 = e3 ? null : "stroke" === t3 ? "stroke" : "fill";
          for (var g3 = false, b3 = 0; b3 < i4.length; b3++) if (i4[b3].arc) for (var y4 = i4[b3].abs, w3 = 0; w3 < y4.length; w3++) {
            var N4 = y4[w3];
            "arc" === N4.type ? P2.call(this, N4.x, N4.y, N4.radius, N4.startAngle, N4.endAngle, N4.counterclockwise, void 0, e3, !g3) : j2.call(this, N4.x, N4.y), g3 = true;
          }
          else if (true === i4[b3].close) this.pdf.internal.out("h"), g3 = false;
          else if (true !== i4[b3].begin) {
            var L3 = i4[b3].start.x, A3 = i4[b3].start.y;
            O3.call(this, i4[b3].deltas, L3, A3), g3 = true;
          }
          n4 && k2.call(this, n4), e3 && I2.call(this);
        }
      }, "x"), S2 = /* @__PURE__ */ __name2(function(t3) {
        var e3 = this.pdf.internal.getFontSize() / this.pdf.internal.scaleFactor, r3 = e3 * (this.pdf.internal.getLineHeightFactor() - 1);
        switch (this.ctx.textBaseline) {
          case "bottom":
            return t3 - r3;
          case "top":
            return t3 + e3 - r3;
          case "hanging":
            return t3 + e3 - 2 * r3;
          case "middle":
            return t3 + e3 / 2 - r3;
          case "ideographic":
            return t3;
          case "alphabetic":
          default:
            return t3;
        }
      }, "S"), _3 = /* @__PURE__ */ __name2(function(t3) {
        return t3 + this.pdf.internal.getFontSize() / this.pdf.internal.scaleFactor * (this.pdf.internal.getLineHeightFactor() - 1);
      }, "_");
      p3.prototype.createLinearGradient = function() {
        var t3 = /* @__PURE__ */ __name2(function() {
        }, "t");
        return t3.colorStops = [], t3.addColorStop = function(t4, e3) {
          this.colorStops.push([t4, e3]);
        }, t3.getColor = function() {
          return 0 === this.colorStops.length ? "#000000" : this.colorStops[0][1];
        }, t3.isCanvasGradient = true, t3;
      }, p3.prototype.createPattern = function() {
        return this.createLinearGradient();
      }, p3.prototype.createRadialGradient = function() {
        return this.createLinearGradient();
      };
      var P2 = /* @__PURE__ */ __name2(function(t3, e3, r3, n4, i4, a3, o4, s4, c5) {
        for (var u4 = M2.call(this, r3, n4, i4, a3), h4 = 0; h4 < u4.length; h4++) {
          var l4 = u4[h4];
          0 === h4 && (c5 ? F2.call(this, l4.x1 + t3, l4.y1 + e3) : j2.call(this, l4.x1 + t3, l4.y1 + e3)), B2.call(this, t3, e3, l4.x2, l4.y2, l4.x3, l4.y3, l4.x4, l4.y4);
        }
        s4 ? I2.call(this) : k2.call(this, o4);
      }, "P"), k2 = /* @__PURE__ */ __name2(function(t3) {
        switch (t3) {
          case "stroke":
            this.pdf.internal.out("S");
            break;
          case "fill":
            this.pdf.internal.out("f");
        }
      }, "k"), I2 = /* @__PURE__ */ __name2(function() {
        this.pdf.clip(), this.pdf.discardPath();
      }, "I"), F2 = /* @__PURE__ */ __name2(function(t3, e3) {
        this.pdf.internal.out(n3(t3) + " " + i33(e3) + " m");
      }, "F"), C2 = /* @__PURE__ */ __name2(function(t3) {
        var e3;
        switch (t3.align) {
          case "right":
          case "end":
            e3 = "right";
            break;
          case "center":
            e3 = "center";
            break;
          case "left":
          case "start":
          default:
            e3 = "left";
        }
        var r3 = this.pdf.getTextDimensions(t3.text), n4 = S2.call(this, t3.y), i4 = _3.call(this, n4) - r3.h, a3 = this.ctx.transform.applyToPoint(new c4(t3.x, n4)), o4 = this.ctx.transform.decompose(), s4 = new h3();
        s4 = (s4 = (s4 = s4.multiply(o4.translate)).multiply(o4.skew)).multiply(o4.scale);
        for (var l4, f3, d3, p4 = this.ctx.transform.applyToRectangle(new u3(t3.x, n4, r3.w, r3.h)), g3 = s4.applyToRectangle(new u3(t3.x, i4, r3.w, r3.h)), m5 = y3.call(this, g3), v4 = [], w3 = 0; w3 < m5.length; w3 += 1) -1 === v4.indexOf(m5[w3]) && v4.push(m5[w3]);
        if (L2(v4), this.autoPaging) for (var A3 = v4[0], P3 = v4[v4.length - 1], k3 = A3; k3 < P3 + 1; k3++) {
          this.pdf.setPage(k3);
          var I3 = 1 === k3 ? this.posY + this.margin[0] : this.margin[0], F3 = this.pdf.internal.pageSize.height - this.posY - this.margin[0] - this.margin[2], C3 = this.pdf.internal.pageSize.height - this.margin[2], j3 = C3 - this.margin[0], O4 = this.pdf.internal.pageSize.width - this.margin[1], B3 = O4 - this.margin[3], M3 = 1 === k3 ? 0 : F3 + (k3 - 2) * j3;
          if (0 !== this.ctx.clip_path.length) {
            var E3 = this.path;
            l4 = JSON.parse(JSON.stringify(this.ctx.clip_path)), this.path = N3(l4, this.posX + this.margin[3], -1 * M3 + I3), x22.call(this, "fill", true), this.path = E3;
          }
          var q3 = N3([JSON.parse(JSON.stringify(g3))], this.posX + this.margin[3], -M3 + I3 + this.ctx.prevPageLastElemOffset)[0];
          t3.scale >= 0.01 && (f3 = this.pdf.internal.getFontSize(), this.pdf.setFontSize(f3 * t3.scale), d3 = this.lineWidth, this.lineWidth = d3 * t3.scale);
          var D3 = "text" !== this.autoPaging;
          if (D3 || q3.y + q3.h <= C3) {
            if (D3 || q3.y >= I3 && q3.x <= O4) {
              var R3 = D3 ? t3.text : this.pdf.splitTextToSize(t3.text, t3.maxWidth || O4 - q3.x)[0], T4 = N3([JSON.parse(JSON.stringify(p4))], this.posX + this.margin[3], -M3 + I3 + this.ctx.prevPageLastElemOffset)[0], U2 = D3 && (k3 > A3 || k3 < P3) && b2.call(this);
              U2 && (this.pdf.saveGraphicsState(), this.pdf.rect(this.margin[3], this.margin[0], B3, j3, null).clip().discardPath()), this.pdf.text(R3, T4.x, T4.y, { angle: t3.angle, align: e3, renderingMode: t3.renderingMode }), U2 && this.pdf.restoreGraphicsState();
            }
          } else q3.y < C3 && (this.ctx.prevPageLastElemOffset += C3 - q3.y);
          t3.scale >= 0.01 && (this.pdf.setFontSize(f3), this.lineWidth = d3);
        }
        else t3.scale >= 0.01 && (f3 = this.pdf.internal.getFontSize(), this.pdf.setFontSize(f3 * t3.scale), d3 = this.lineWidth, this.lineWidth = d3 * t3.scale), this.pdf.text(t3.text, a3.x + this.posX, a3.y + this.posY, { angle: t3.angle, align: e3, renderingMode: t3.renderingMode, maxWidth: t3.maxWidth }), t3.scale >= 0.01 && (this.pdf.setFontSize(f3), this.lineWidth = d3);
      }, "C"), j2 = /* @__PURE__ */ __name2(function(t3, e3, r3, a3) {
        r3 = r3 || 0, a3 = a3 || 0, this.pdf.internal.out(n3(t3 + r3) + " " + i33(e3 + a3) + " l");
      }, "j"), O3 = /* @__PURE__ */ __name2(function(t3, e3, r3) {
        return this.pdf.lines(t3, e3, r3, null, null);
      }, "O"), B2 = /* @__PURE__ */ __name2(function(t3, e3, n4, i4, a3, c5, u4, h4) {
        this.pdf.internal.out([r2(o3(n4 + t3)), r2(s3(i4 + e3)), r2(o3(a3 + t3)), r2(s3(c5 + e3)), r2(o3(u4 + t3)), r2(s3(h4 + e3)), "c"].join(" "));
      }, "B"), M2 = /* @__PURE__ */ __name2(function(t3, e3, r3, n4) {
        for (var i4 = 2 * Math.PI, a3 = Math.PI / 2; e3 > r3; ) e3 -= i4;
        var o4 = Math.abs(r3 - e3);
        o4 < i4 && n4 && (o4 = i4 - o4);
        for (var s4 = [], c5 = n4 ? -1 : 1, u4 = e3; o4 > 1e-5; ) {
          var h4 = u4 + c5 * Math.min(o4, a3);
          s4.push(E2.call(this, t3, u4, h4)), o4 -= Math.abs(h4 - u4), u4 = h4;
        }
        return s4;
      }, "M"), E2 = /* @__PURE__ */ __name2(function(t3, e3, r3) {
        var n4 = (r3 - e3) / 2, i4 = t3 * Math.cos(n4), a3 = t3 * Math.sin(n4), o4 = i4, s4 = -a3, c5 = o4 * o4 + s4 * s4, u4 = c5 + o4 * i4 + s4 * a3, h4 = 4 / 3 * (Math.sqrt(2 * c5 * u4) - u4) / (o4 * a3 - s4 * i4), l4 = o4 - h4 * s4, f3 = s4 + h4 * o4, d3 = l4, p4 = -f3, g3 = n4 + e3, m5 = Math.cos(g3), v4 = Math.sin(g3);
        return { x1: t3 * Math.cos(e3), y1: t3 * Math.sin(e3), x2: l4 * m5 - f3 * v4, y2: l4 * v4 + f3 * m5, x3: d3 * m5 - p4 * v4, y3: d3 * v4 + p4 * m5, x4: t3 * Math.cos(r3), y4: t3 * Math.sin(r3) };
      }, "E"), q2 = /* @__PURE__ */ __name2(function(t3) {
        return 180 * t3 / Math.PI;
      }, "q"), D2 = /* @__PURE__ */ __name2(function(t3, e3, r3, n4, i4, a3) {
        var o4 = t3 + 0.5 * (r3 - t3), s4 = e3 + 0.5 * (n4 - e3), c5 = i4 + 0.5 * (r3 - i4), h4 = a3 + 0.5 * (n4 - a3), l4 = Math.min(t3, i4, o4, c5), f3 = Math.max(t3, i4, o4, c5), d3 = Math.min(e3, a3, s4, h4), p4 = Math.max(e3, a3, s4, h4);
        return new u3(l4, d3, f3 - l4, p4 - d3);
      }, "D"), R2 = /* @__PURE__ */ __name2(function(t3, e3, r3, n4, i4, a3, o4, s4) {
        var c5, h4, l4, f3, d3, p4, g3, m5, v4, b3, y4, w3, N4, L3, A3 = r3 - t3, x3 = n4 - e3, S3 = i4 - r3, _4 = a3 - n4, P3 = o4 - i4, k3 = s4 - a3;
        for (h4 = 0; h4 < 41; h4++) v4 = (g3 = (l4 = t3 + (c5 = h4 / 40) * A3) + c5 * ((d3 = r3 + c5 * S3) - l4)) + c5 * (d3 + c5 * (i4 + c5 * P3 - d3) - g3), b3 = (m5 = (f3 = e3 + c5 * x3) + c5 * ((p4 = n4 + c5 * _4) - f3)) + c5 * (p4 + c5 * (a3 + c5 * k3 - p4) - m5), 0 == h4 ? (y4 = v4, w3 = b3, N4 = v4, L3 = b3) : (y4 = Math.min(y4, v4), w3 = Math.min(w3, b3), N4 = Math.max(N4, v4), L3 = Math.max(L3, b3));
        return new u3(Math.round(y4), Math.round(w3), Math.round(N4 - y4), Math.round(L3 - w3));
      }, "R"), T3 = /* @__PURE__ */ __name2(function() {
        if (this.prevLineDash || this.ctx.lineDash.length || this.ctx.lineDashOffset) {
          var t3, e3, r3 = (t3 = this.ctx.lineDash, e3 = this.ctx.lineDashOffset, JSON.stringify({ lineDash: t3, lineDashOffset: e3 }));
          this.prevLineDash !== r3 && (this.pdf.setLineDash(this.ctx.lineDash, this.ctx.lineDashOffset), this.prevLineDash = r3);
        }
      }, "T");
    }(E.API), /**
    * @license
    * jsPDF filters PlugIn
    * Copyright (c) 2014 Aras Abbasi
    *
    * Licensed under the MIT License.
    * http://opensource.org/licenses/mit-license
    */
    function(t3) {
      var r2 = /* @__PURE__ */ __name2(function(t4) {
        var e2, r3, n4, i4, a4, o3, s3, c4, u3, h3;
        for (/[^\x00-\xFF]/.test(t4), r3 = [], n4 = 0, i4 = (t4 += e2 = "\0\0\0\0".slice(t4.length % 4 || 4)).length; i4 > n4; n4 += 4) 0 !== (a4 = (t4.charCodeAt(n4) << 24) + (t4.charCodeAt(n4 + 1) << 16) + (t4.charCodeAt(n4 + 2) << 8) + t4.charCodeAt(n4 + 3)) ? (o3 = (a4 = ((a4 = ((a4 = ((a4 = (a4 - (h3 = a4 % 85)) / 85) - (u3 = a4 % 85)) / 85) - (c4 = a4 % 85)) / 85) - (s3 = a4 % 85)) / 85) % 85, r3.push(o3 + 33, s3 + 33, c4 + 33, u3 + 33, h3 + 33)) : r3.push(122);
        return function(t5, e3) {
          for (var r4 = e3; r4 > 0; r4--) t5.pop();
        }(r3, e2.length), String.fromCharCode.apply(String, r3) + "~>";
      }, "r"), n3 = /* @__PURE__ */ __name2(function(t4) {
        var e2, r3, n4, i4, a4, o3 = String, s3 = "length", c4 = 255, u3 = "charCodeAt", h3 = "slice", l3 = "replace";
        for (t4[h3](-2), t4 = t4[h3](0, -2)[l3](/\s/g, "")[l3]("z", "!!!!!"), n4 = [], i4 = 0, a4 = (t4 += e2 = "uuuuu"[h3](t4[s3] % 5 || 5))[s3]; a4 > i4; i4 += 5) r3 = 52200625 * (t4[u3](i4) - 33) + 614125 * (t4[u3](i4 + 1) - 33) + 7225 * (t4[u3](i4 + 2) - 33) + 85 * (t4[u3](i4 + 3) - 33) + (t4[u3](i4 + 4) - 33), n4.push(c4 & r3 >> 24, c4 & r3 >> 16, c4 & r3 >> 8, c4 & r3);
        return function(t5, e3) {
          for (var r4 = e3; r4 > 0; r4--) t5.pop();
        }(n4, e2[s3]), o3.fromCharCode.apply(o3, n4);
      }, "n"), i33 = /* @__PURE__ */ __name2(function(t4) {
        var e2 = new RegExp(/^([0-9A-Fa-f]{2})+$/);
        if (-1 !== (t4 = t4.replace(/\s/g, "")).indexOf(">") && (t4 = t4.substr(0, t4.indexOf(">"))), t4.length % 2 && (t4 += "0"), false === e2.test(t4)) return "";
        for (var r3 = "", n4 = 0; n4 < t4.length; n4 += 2) r3 += String.fromCharCode("0x" + (t4[n4] + t4[n4 + 1]));
        return r3;
      }, "i"), a3 = /* @__PURE__ */ __name2(function(t4) {
        for (var r3 = new Uint8Array(t4.length), n4 = t4.length; n4--; ) r3[n4] = t4.charCodeAt(n4);
        return t4 = (r3 = zlibSync(r3)).reduce(function(t5, e2) {
          return t5 + String.fromCharCode(e2);
        }, "");
      }, "a");
      t3.processDataByFilters = function(t4, e2) {
        var o3 = 0, s3 = t4 || "", c4 = [];
        for ("string" == typeof (e2 = e2 || []) && (e2 = [e2]), o3 = 0; o3 < e2.length; o3 += 1) switch (e2[o3]) {
          case "ASCII85Decode":
          case "/ASCII85Decode":
            s3 = n3(s3), c4.push("/ASCII85Encode");
            break;
          case "ASCII85Encode":
          case "/ASCII85Encode":
            s3 = r2(s3), c4.push("/ASCII85Decode");
            break;
          case "ASCIIHexDecode":
          case "/ASCIIHexDecode":
            s3 = i33(s3), c4.push("/ASCIIHexEncode");
            break;
          case "ASCIIHexEncode":
          case "/ASCIIHexEncode":
            s3 = s3.split("").map(function(t5) {
              return ("0" + t5.charCodeAt().toString(16)).slice(-2);
            }).join("") + ">", c4.push("/ASCIIHexDecode");
            break;
          case "FlateEncode":
          case "/FlateEncode":
            s3 = a3(s3), c4.push("/FlateDecode");
            break;
          default:
            throw new Error('The filter: "' + e2[o3] + '" is not implemented');
        }
        return { data: s3, reverseChain: c4.reverse().join(" ") };
      };
    }(E.API), /**
    * @license
    * jsPDF fileloading PlugIn
    * Copyright (c) 2018 Aras Abbasi (aras.abbasi@gmail.com)
    *
    * Licensed under the MIT License.
    * http://opensource.org/licenses/mit-license
    */
    function(t3) {
      t3.loadFile = function(t4, e2, r2) {
        return function(t5, e3, r3) {
          e3 = false !== e3, r3 = "function" == typeof r3 ? r3 : function() {
          };
          var n3 = void 0;
          try {
            n3 = function(t6, e4, r4) {
              var n4 = new XMLHttpRequest(), i33 = 0, a3 = /* @__PURE__ */ __name2(function(t7) {
                var e5 = t7.length, r5 = [], n5 = String.fromCharCode;
                for (i33 = 0; i33 < e5; i33 += 1) r5.push(n5(255 & t7.charCodeAt(i33)));
                return r5.join("");
              }, "a");
              if (n4.open("GET", t6, !e4), n4.overrideMimeType("text/plain; charset=x-user-defined"), false === e4 && (n4.onload = function() {
                200 === n4.status ? r4(a3(this.responseText)) : r4(void 0);
              }), n4.send(null), e4 && 200 === n4.status) return a3(n4.responseText);
            }(t5, e3, r3);
          } catch (t6) {
          }
          return n3;
        }(t4, e2, r2);
      }, t3.loadImageFile = t3.loadFile;
    }(E.API), function(e2) {
      function r2() {
        return (n2.html2canvas ? Promise.resolve(n2.html2canvas) : Promise.resolve().then(() => __toESM(require_html2canvas()))).catch(function(t3) {
          return Promise.reject(new Error("Could not load html2canvas: " + t3));
        }).then(function(t3) {
          return t3.default ? t3.default : t3;
        });
      }
      __name(r2, "r2");
      __name2(r2, "r");
      function i33() {
        return (n2.DOMPurify ? Promise.resolve(n2.DOMPurify) : Promise.resolve().then(() => (init_purify_es(), purify_es_exports))).catch(function(t3) {
          return Promise.reject(new Error("Could not load dompurify: " + t3));
        }).then(function(t3) {
          return t3.default ? t3.default : t3;
        });
      }
      __name(i33, "i3");
      __name2(i33, "i");
      var a3 = /* @__PURE__ */ __name2(function(e3) {
        var r3 = _typeof(e3);
        return "undefined" === r3 ? "undefined" : "string" === r3 || e3 instanceof String ? "string" : "number" === r3 || e3 instanceof Number ? "number" : "function" === r3 || e3 instanceof Function ? "function" : e3 && e3.constructor === Array ? "array" : e3 && 1 === e3.nodeType ? "element" : "object" === r3 ? "object" : "unknown";
      }, "a"), o3 = /* @__PURE__ */ __name2(function(t3, e3) {
        var r3 = document.createElement(t3);
        for (var n3 in e3.className && (r3.className = e3.className), e3.innerHTML && e3.dompurify && (r3.innerHTML = e3.dompurify.sanitize(e3.innerHTML)), e3.style) r3.style[n3] = e3.style[n3];
        return r3;
      }, "o"), s3 = /* @__PURE__ */ __name2(/* @__PURE__ */ __name(function t3(e3) {
        var r3 = Object.assign(t3.convert(Promise.resolve()), JSON.parse(JSON.stringify(t3.template))), n3 = t3.convert(Promise.resolve(), r3);
        return n3 = (n3 = n3.setProgress(1, t3, 1, [t3])).set(e3);
      }, "t3"), "t");
      (s3.prototype = Object.create(Promise.prototype)).constructor = s3, s3.convert = function(t3, e3) {
        return t3.__proto__ = e3 || s3.prototype, t3;
      }, s3.template = { prop: { src: null, container: null, overlay: null, canvas: null, img: null, pdf: null, pageSize: null, callback: /* @__PURE__ */ __name2(function() {
      }, "callback") }, progress: { val: 0, state: null, n: 0, stack: [] }, opt: { filename: "file.pdf", margin: [0, 0, 0, 0], enableLinks: true, x: 0, y: 0, html2canvas: {}, jsPDF: {}, backgroundColor: "transparent" } }, s3.prototype.from = function(t3, e3) {
        return this.then(function() {
          switch (e3 = e3 || function(t4) {
            switch (a3(t4)) {
              case "string":
                return "string";
              case "element":
                return "canvas" === t4.nodeName.toLowerCase() ? "canvas" : "element";
              default:
                return "unknown";
            }
          }(t3)) {
            case "string":
              return this.then(i33).then(function(e4) {
                return this.set({ src: o3("div", { innerHTML: t3, dompurify: e4 }) });
              });
            case "element":
              return this.set({ src: t3 });
            case "canvas":
              return this.set({ canvas: t3 });
            case "img":
              return this.set({ img: t3 });
            default:
              return this.error("Unknown source type.");
          }
        });
      }, s3.prototype.to = function(t3) {
        switch (t3) {
          case "container":
            return this.toContainer();
          case "canvas":
            return this.toCanvas();
          case "img":
            return this.toImg();
          case "pdf":
            return this.toPdf();
          default:
            return this.error("Invalid target.");
        }
      }, s3.prototype.toContainer = function() {
        return this.thenList([function() {
          return this.prop.src || this.error("Cannot duplicate - no source HTML.");
        }, function() {
          return this.prop.pageSize || this.setPageSize();
        }]).then(function() {
          var t3 = { position: "relative", display: "inline-block", width: ("number" != typeof this.opt.width || isNaN(this.opt.width) || "number" != typeof this.opt.windowWidth || isNaN(this.opt.windowWidth) ? Math.max(this.prop.src.clientWidth, this.prop.src.scrollWidth, this.prop.src.offsetWidth) : this.opt.windowWidth) + "px", left: 0, right: 0, top: 0, margin: "auto", backgroundColor: this.opt.backgroundColor }, e3 = (/* @__PURE__ */ __name2(/* @__PURE__ */ __name(function t4(e4, r3) {
            for (var n3 = 3 === e4.nodeType ? document.createTextNode(e4.nodeValue) : e4.cloneNode(false), i4 = e4.firstChild; i4; i4 = i4.nextSibling) true !== r3 && 1 === i4.nodeType && "SCRIPT" === i4.nodeName || n3.appendChild(t4(i4, r3));
            return 1 === e4.nodeType && ("CANVAS" === e4.nodeName ? (n3.width = e4.width, n3.height = e4.height, n3.getContext("2d").drawImage(e4, 0, 0)) : "TEXTAREA" !== e4.nodeName && "SELECT" !== e4.nodeName || (n3.value = e4.value), n3.addEventListener("load", function() {
              n3.scrollTop = e4.scrollTop, n3.scrollLeft = e4.scrollLeft;
            }, true)), n3;
          }, "t4"), "t"))(this.prop.src, this.opt.html2canvas.javascriptEnabled);
          "BODY" === e3.tagName && (t3.height = Math.max(document.body.scrollHeight, document.body.offsetHeight, document.documentElement.clientHeight, document.documentElement.scrollHeight, document.documentElement.offsetHeight) + "px"), this.prop.overlay = o3("div", { className: "html2pdf__overlay", style: { position: "fixed", overflow: "hidden", zIndex: 1e3, left: "-100000px", right: 0, bottom: 0, top: 0 } }), this.prop.container = o3("div", { className: "html2pdf__container", style: t3 }), this.prop.container.appendChild(e3), this.prop.container.firstChild.appendChild(o3("div", { style: { clear: "both", border: "0 none transparent", margin: 0, padding: 0, height: 0 } })), this.prop.container.style.float = "none", this.prop.overlay.appendChild(this.prop.container), document.body.appendChild(this.prop.overlay), this.prop.container.firstChild.style.position = "relative", this.prop.container.height = Math.max(this.prop.container.firstChild.clientHeight, this.prop.container.firstChild.scrollHeight, this.prop.container.firstChild.offsetHeight) + "px";
        });
      }, s3.prototype.toCanvas = function() {
        var t3 = [function() {
          return document.body.contains(this.prop.container) || this.toContainer();
        }];
        return this.thenList(t3).then(r2).then(function(t4) {
          var e3 = Object.assign({}, this.opt.html2canvas);
          return delete e3.onrendered, t4(this.prop.container, e3);
        }).then(function(t4) {
          (this.opt.html2canvas.onrendered || function() {
          })(t4), this.prop.canvas = t4, document.body.removeChild(this.prop.overlay);
        });
      }, s3.prototype.toContext2d = function() {
        var t3 = [function() {
          return document.body.contains(this.prop.container) || this.toContainer();
        }];
        return this.thenList(t3).then(r2).then(function(t4) {
          var e3 = this.opt.jsPDF, r3 = this.opt.fontFaces, n3 = "number" != typeof this.opt.width || isNaN(this.opt.width) || "number" != typeof this.opt.windowWidth || isNaN(this.opt.windowWidth) ? 1 : this.opt.width / this.opt.windowWidth, i4 = Object.assign({ async: true, allowTaint: true, scale: n3, scrollX: this.opt.scrollX || 0, scrollY: this.opt.scrollY || 0, backgroundColor: "#ffffff", imageTimeout: 15e3, logging: true, proxy: null, removeContainer: true, foreignObjectRendering: false, useCORS: false }, this.opt.html2canvas);
          if (delete i4.onrendered, e3.context2d.autoPaging = void 0 === this.opt.autoPaging || this.opt.autoPaging, e3.context2d.posX = this.opt.x, e3.context2d.posY = this.opt.y, e3.context2d.margin = this.opt.margin, e3.context2d.fontFaces = r3, r3) for (var a4 = 0; a4 < r3.length; ++a4) {
            var o4 = r3[a4], s4 = o4.src.find(function(t5) {
              return "truetype" === t5.format;
            });
            s4 && e3.addFont(s4.url, o4.ref.name, o4.ref.style);
          }
          return i4.windowHeight = i4.windowHeight || 0, i4.windowHeight = 0 == i4.windowHeight ? Math.max(this.prop.container.clientHeight, this.prop.container.scrollHeight, this.prop.container.offsetHeight) : i4.windowHeight, e3.context2d.save(true), t4(this.prop.container, i4);
        }).then(function(t4) {
          this.opt.jsPDF.context2d.restore(true), (this.opt.html2canvas.onrendered || function() {
          })(t4), this.prop.canvas = t4, document.body.removeChild(this.prop.overlay);
        });
      }, s3.prototype.toImg = function() {
        return this.thenList([function() {
          return this.prop.canvas || this.toCanvas();
        }]).then(function() {
          var t3 = this.prop.canvas.toDataURL("image/" + this.opt.image.type, this.opt.image.quality);
          this.prop.img = document.createElement("img"), this.prop.img.src = t3;
        });
      }, s3.prototype.toPdf = function() {
        return this.thenList([function() {
          return this.toContext2d();
        }]).then(function() {
          this.prop.pdf = this.prop.pdf || this.opt.jsPDF;
        });
      }, s3.prototype.output = function(t3, e3, r3) {
        return "img" === (r3 = r3 || "pdf").toLowerCase() || "image" === r3.toLowerCase() ? this.outputImg(t3, e3) : this.outputPdf(t3, e3);
      }, s3.prototype.outputPdf = function(t3, e3) {
        return this.thenList([function() {
          return this.prop.pdf || this.toPdf();
        }]).then(function() {
          return this.prop.pdf.output(t3, e3);
        });
      }, s3.prototype.outputImg = function(t3) {
        return this.thenList([function() {
          return this.prop.img || this.toImg();
        }]).then(function() {
          switch (t3) {
            case void 0:
            case "img":
              return this.prop.img;
            case "datauristring":
            case "dataurlstring":
              return this.prop.img.src;
            case "datauri":
            case "dataurl":
              return document.location.href = this.prop.img.src;
            default:
              throw 'Image output type "' + t3 + '" is not supported.';
          }
        });
      }, s3.prototype.save = function(t3) {
        return this.thenList([function() {
          return this.prop.pdf || this.toPdf();
        }]).set(t3 ? { filename: t3 } : null).then(function() {
          this.prop.pdf.save(this.opt.filename);
        });
      }, s3.prototype.doCallback = function() {
        return this.thenList([function() {
          return this.prop.pdf || this.toPdf();
        }]).then(function() {
          this.prop.callback(this.prop.pdf);
        });
      }, s3.prototype.set = function(t3) {
        if ("object" !== a3(t3)) return this;
        var e3 = Object.keys(t3 || {}).map(function(e4) {
          if (e4 in s3.template.prop) return function() {
            this.prop[e4] = t3[e4];
          };
          switch (e4) {
            case "margin":
              return this.setMargin.bind(this, t3.margin);
            case "jsPDF":
              return function() {
                return this.opt.jsPDF = t3.jsPDF, this.setPageSize();
              };
            case "pageSize":
              return this.setPageSize.bind(this, t3.pageSize);
            default:
              return function() {
                this.opt[e4] = t3[e4];
              };
          }
        }, this);
        return this.then(function() {
          return this.thenList(e3);
        });
      }, s3.prototype.get = function(t3, e3) {
        return this.then(function() {
          var r3 = t3 in s3.template.prop ? this.prop[t3] : this.opt[t3];
          return e3 ? e3(r3) : r3;
        });
      }, s3.prototype.setMargin = function(t3) {
        return this.then(function() {
          switch (a3(t3)) {
            case "number":
              t3 = [t3, t3, t3, t3];
            case "array":
              if (2 === t3.length && (t3 = [t3[0], t3[1], t3[0], t3[1]]), 4 === t3.length) break;
            default:
              return this.error("Invalid margin array.");
          }
          this.opt.margin = t3;
        }).then(this.setPageSize);
      }, s3.prototype.setPageSize = function(t3) {
        function e3(t4, e4) {
          return Math.floor(t4 * e4 / 72 * 96);
        }
        __name(e3, "e3");
        __name2(e3, "e");
        return this.then(function() {
          (t3 = t3 || E.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner") || (t3.inner = { width: t3.width - this.opt.margin[1] - this.opt.margin[3], height: t3.height - this.opt.margin[0] - this.opt.margin[2] }, t3.inner.px = { width: e3(t3.inner.width, t3.k), height: e3(t3.inner.height, t3.k) }, t3.inner.ratio = t3.inner.height / t3.inner.width), this.prop.pageSize = t3;
        });
      }, s3.prototype.setProgress = function(t3, e3, r3, n3) {
        return null != t3 && (this.progress.val = t3), null != e3 && (this.progress.state = e3), null != r3 && (this.progress.n = r3), null != n3 && (this.progress.stack = n3), this.progress.ratio = this.progress.val / this.progress.state, this;
      }, s3.prototype.updateProgress = function(t3, e3, r3, n3) {
        return this.setProgress(t3 ? this.progress.val + t3 : null, e3 || null, r3 ? this.progress.n + r3 : null, n3 ? this.progress.stack.concat(n3) : null);
      }, s3.prototype.then = function(t3, e3) {
        var r3 = this;
        return this.thenCore(t3, e3, function(t4, e4) {
          return r3.updateProgress(null, null, 1, [t4]), Promise.prototype.then.call(this, function(e5) {
            return r3.updateProgress(null, t4), e5;
          }).then(t4, e4).then(function(t5) {
            return r3.updateProgress(1), t5;
          });
        });
      }, s3.prototype.thenCore = function(t3, e3, r3) {
        r3 = r3 || Promise.prototype.then;
        t3 && (t3 = t3.bind(this)), e3 && (e3 = e3.bind(this));
        var n3 = -1 !== Promise.toString().indexOf("[native code]") && "Promise" === Promise.name ? this : s3.convert(Object.assign({}, this), Promise.prototype), i4 = r3.call(n3, t3, e3);
        return s3.convert(i4, this.__proto__);
      }, s3.prototype.thenExternal = function(t3, e3) {
        return Promise.prototype.then.call(this, t3, e3);
      }, s3.prototype.thenList = function(t3) {
        var e3 = this;
        return t3.forEach(function(t4) {
          e3 = e3.thenCore(t4);
        }), e3;
      }, s3.prototype.catch = function(t3) {
        t3 && (t3 = t3.bind(this));
        var e3 = Promise.prototype.catch.call(this, t3);
        return s3.convert(e3, this);
      }, s3.prototype.catchExternal = function(t3) {
        return Promise.prototype.catch.call(this, t3);
      }, s3.prototype.error = function(t3) {
        return this.then(function() {
          throw new Error(t3);
        });
      }, s3.prototype.using = s3.prototype.set, s3.prototype.saveAs = s3.prototype.save, s3.prototype.export = s3.prototype.output, s3.prototype.run = s3.prototype.then, E.getPageSize = function(e3, r3, n3) {
        if ("object" === _typeof(e3)) {
          var i4 = e3;
          e3 = i4.orientation, r3 = i4.unit || r3, n3 = i4.format || n3;
        }
        r3 = r3 || "mm", n3 = n3 || "a4", e3 = ("" + (e3 || "P")).toLowerCase();
        var a4, o4 = ("" + n3).toLowerCase(), s4 = { a0: [2383.94, 3370.39], a1: [1683.78, 2383.94], a2: [1190.55, 1683.78], a3: [841.89, 1190.55], a4: [595.28, 841.89], a5: [419.53, 595.28], a6: [297.64, 419.53], a7: [209.76, 297.64], a8: [147.4, 209.76], a9: [104.88, 147.4], a10: [73.7, 104.88], b0: [2834.65, 4008.19], b1: [2004.09, 2834.65], b2: [1417.32, 2004.09], b3: [1000.63, 1417.32], b4: [708.66, 1000.63], b5: [498.9, 708.66], b6: [354.33, 498.9], b7: [249.45, 354.33], b8: [175.75, 249.45], b9: [124.72, 175.75], b10: [87.87, 124.72], c0: [2599.37, 3676.54], c1: [1836.85, 2599.37], c2: [1298.27, 1836.85], c3: [918.43, 1298.27], c4: [649.13, 918.43], c5: [459.21, 649.13], c6: [323.15, 459.21], c7: [229.61, 323.15], c8: [161.57, 229.61], c9: [113.39, 161.57], c10: [79.37, 113.39], dl: [311.81, 623.62], letter: [612, 792], "government-letter": [576, 756], legal: [612, 1008], "junior-legal": [576, 360], ledger: [1224, 792], tabloid: [792, 1224], "credit-card": [153, 243] };
        switch (r3) {
          case "pt":
            a4 = 1;
            break;
          case "mm":
            a4 = 72 / 25.4;
            break;
          case "cm":
            a4 = 72 / 2.54;
            break;
          case "in":
            a4 = 72;
            break;
          case "px":
            a4 = 0.75;
            break;
          case "pc":
          case "em":
            a4 = 12;
            break;
          case "ex":
            a4 = 6;
            break;
          default:
            throw "Invalid unit: " + r3;
        }
        var c4, u3 = 0, h3 = 0;
        if (s4.hasOwnProperty(o4)) u3 = s4[o4][1] / a4, h3 = s4[o4][0] / a4;
        else try {
          u3 = n3[1], h3 = n3[0];
        } catch (t3) {
          throw new Error("Invalid format: " + n3);
        }
        if ("p" === e3 || "portrait" === e3) e3 = "p", h3 > u3 && (c4 = h3, h3 = u3, u3 = c4);
        else {
          if ("l" !== e3 && "landscape" !== e3) throw "Invalid orientation: " + e3;
          e3 = "l", u3 > h3 && (c4 = h3, h3 = u3, u3 = c4);
        }
        return { width: h3, height: u3, unit: r3, k: a4, orientation: e3 };
      }, e2.html = function(t3, e3) {
        (e3 = e3 || {}).callback = e3.callback || function() {
        }, e3.html2canvas = e3.html2canvas || {}, e3.html2canvas.canvas = e3.html2canvas.canvas || this.canvas, e3.jsPDF = e3.jsPDF || this, e3.fontFaces = e3.fontFaces ? e3.fontFaces.map(jt) : null;
        var r3 = new s3(e3);
        return e3.worker ? r3 : r3.from(t3).doCallback();
      };
    }(E.API), E.API.addJS = function(t3) {
      return Ht = t3, this.internal.events.subscribe("postPutResources", function() {
        Ut = this.internal.newObject(), this.internal.out("<<"), this.internal.out("/Names [(EmbeddedJS) " + (Ut + 1) + " 0 R]"), this.internal.out(">>"), this.internal.out("endobj"), zt = this.internal.newObject(), this.internal.out("<<"), this.internal.out("/S /JavaScript"), this.internal.out("/JS (" + Ht + ")"), this.internal.out(">>"), this.internal.out("endobj");
      }), this.internal.events.subscribe("putCatalog", function() {
        void 0 !== Ut && void 0 !== zt && this.internal.out("/Names <</JavaScript " + Ut + " 0 R>>");
      }), this;
    }, /**
    * @license
    * Copyright (c) 2014 Steven Spungin (TwelveTone LLC)  steven@twelvetone.tv
    *
    * Licensed under the MIT License.
    * http://opensource.org/licenses/mit-license
    */
    function(t3) {
      var e2;
      t3.events.push(["postPutResources", function() {
        var t4 = this, r2 = /^(\d+) 0 obj$/;
        if (this.outline.root.children.length > 0) for (var n3 = t4.outline.render().split(/\r\n/), i33 = 0; i33 < n3.length; i33++) {
          var a3 = n3[i33], o3 = r2.exec(a3);
          if (null != o3) {
            var s3 = o3[1];
            t4.internal.newObjectDeferredBegin(s3, false);
          }
          t4.internal.write(a3);
        }
        if (this.outline.createNamedDestinations) {
          var c4 = this.internal.pages.length, u3 = [];
          for (i33 = 0; i33 < c4; i33++) {
            var h3 = t4.internal.newObject();
            u3.push(h3);
            var l3 = t4.internal.getPageInfo(i33 + 1);
            t4.internal.write("<< /D[" + l3.objId + " 0 R /XYZ null null null]>> endobj");
          }
          var f3 = t4.internal.newObject();
          t4.internal.write("<< /Names [ ");
          for (i33 = 0; i33 < u3.length; i33++) t4.internal.write("(page_" + (i33 + 1) + ")" + u3[i33] + " 0 R");
          t4.internal.write(" ] >>", "endobj"), e2 = t4.internal.newObject(), t4.internal.write("<< /Dests " + f3 + " 0 R"), t4.internal.write(">>", "endobj");
        }
      }]), t3.events.push(["putCatalog", function() {
        this.outline.root.children.length > 0 && (this.internal.write("/Outlines", this.outline.makeRef(this.outline.root)), this.outline.createNamedDestinations && this.internal.write("/Names " + e2 + " 0 R"));
      }]), t3.events.push(["initialized", function() {
        var t4 = this;
        t4.outline = { createNamedDestinations: false, root: { children: [] } }, t4.outline.add = function(t5, e3, r2) {
          var n3 = { title: e3, options: r2, children: [] };
          return null == t5 && (t5 = this.root), t5.children.push(n3), n3;
        }, t4.outline.render = function() {
          return this.ctx = {}, this.ctx.val = "", this.ctx.pdf = t4, this.genIds_r(this.root), this.renderRoot(this.root), this.renderItems(this.root), this.ctx.val;
        }, t4.outline.genIds_r = function(e3) {
          e3.id = t4.internal.newObjectDeferred();
          for (var r2 = 0; r2 < e3.children.length; r2++) this.genIds_r(e3.children[r2]);
        }, t4.outline.renderRoot = function(t5) {
          this.objStart(t5), this.line("/Type /Outlines"), t5.children.length > 0 && (this.line("/First " + this.makeRef(t5.children[0])), this.line("/Last " + this.makeRef(t5.children[t5.children.length - 1]))), this.line("/Count " + this.count_r({ count: 0 }, t5)), this.objEnd();
        }, t4.outline.renderItems = function(e3) {
          for (var r2 = this.ctx.pdf.internal.getVerticalCoordinateString, n3 = 0; n3 < e3.children.length; n3++) {
            var i33 = e3.children[n3];
            this.objStart(i33), this.line("/Title " + this.makeString(i33.title)), this.line("/Parent " + this.makeRef(e3)), n3 > 0 && this.line("/Prev " + this.makeRef(e3.children[n3 - 1])), n3 < e3.children.length - 1 && this.line("/Next " + this.makeRef(e3.children[n3 + 1])), i33.children.length > 0 && (this.line("/First " + this.makeRef(i33.children[0])), this.line("/Last " + this.makeRef(i33.children[i33.children.length - 1])));
            var a3 = this.count = this.count_r({ count: 0 }, i33);
            if (a3 > 0 && this.line("/Count " + a3), i33.options && i33.options.pageNumber) {
              var o3 = t4.internal.getPageInfo(i33.options.pageNumber);
              this.line("/Dest [" + o3.objId + " 0 R /XYZ 0 " + r2(0) + " 0]");
            }
            this.objEnd();
          }
          for (var s3 = 0; s3 < e3.children.length; s3++) this.renderItems(e3.children[s3]);
        }, t4.outline.line = function(t5) {
          this.ctx.val += t5 + "\r\n";
        }, t4.outline.makeRef = function(t5) {
          return t5.id + " 0 R";
        }, t4.outline.makeString = function(e3) {
          return "(" + t4.internal.pdfEscape(e3) + ")";
        }, t4.outline.objStart = function(t5) {
          this.ctx.val += "\r\n" + t5.id + " 0 obj\r\n<<\r\n";
        }, t4.outline.objEnd = function() {
          this.ctx.val += ">> \r\nendobj\r\n";
        }, t4.outline.count_r = function(t5, e3) {
          for (var r2 = 0; r2 < e3.children.length; r2++) t5.count++, this.count_r(t5, e3.children[r2]);
          return t5.count;
        };
      }]);
    }(E.API), /**
    * @license
    *
    * Licensed under the MIT License.
    * http://opensource.org/licenses/mit-license
    */
    function(t3) {
      var e2 = [192, 193, 194, 195, 196, 197, 198, 199];
      t3.processJPEG = function(t4, r2, n3, i33, a3, o3) {
        var s3, c4 = this.decode.DCT_DECODE, u3 = null;
        if ("string" == typeof t4 || this.__addimage__.isArrayBuffer(t4) || this.__addimage__.isArrayBufferView(t4)) {
          switch (t4 = a3 || t4, t4 = this.__addimage__.isArrayBuffer(t4) ? new Uint8Array(t4) : t4, (s3 = function(t5) {
            for (var r3, n4 = 256 * t5.charCodeAt(4) + t5.charCodeAt(5), i4 = t5.length, a4 = { width: 0, height: 0, numcomponents: 1 }, o4 = 4; o4 < i4; o4 += 2) {
              if (o4 += n4, -1 !== e2.indexOf(t5.charCodeAt(o4 + 1))) {
                r3 = 256 * t5.charCodeAt(o4 + 5) + t5.charCodeAt(o4 + 6), a4 = { width: 256 * t5.charCodeAt(o4 + 7) + t5.charCodeAt(o4 + 8), height: r3, numcomponents: t5.charCodeAt(o4 + 9) };
                break;
              }
              n4 = 256 * t5.charCodeAt(o4 + 2) + t5.charCodeAt(o4 + 3);
            }
            return a4;
          }(t4 = this.__addimage__.isArrayBufferView(t4) ? this.__addimage__.arrayBufferToBinaryString(t4) : t4)).numcomponents) {
            case 1:
              o3 = this.color_spaces.DEVICE_GRAY;
              break;
            case 4:
              o3 = this.color_spaces.DEVICE_CMYK;
              break;
            case 3:
              o3 = this.color_spaces.DEVICE_RGB;
          }
          u3 = { data: t4, width: s3.width, height: s3.height, colorSpace: o3, bitsPerComponent: 8, filter: c4, index: r2, alias: n3 };
        }
        return u3;
      };
    }(E.API);
    Kt = function() {
      var t3, e2, i33;
      function a3(t4) {
        var e3, r2, n3, i4, a4, o4, s3, c4, u3, h3, l3, f3, d2, p3;
        for (this.data = t4, this.pos = 8, this.palette = [], this.imgData = [], this.transparency = {}, this.animation = null, this.text = {}, o4 = null; ; ) {
          switch (e3 = this.readUInt32(), u3 = function() {
            var t5, e4;
            for (e4 = [], t5 = 0; t5 < 4; ++t5) e4.push(String.fromCharCode(this.data[this.pos++]));
            return e4;
          }.call(this).join("")) {
            case "IHDR":
              this.width = this.readUInt32(), this.height = this.readUInt32(), this.bits = this.data[this.pos++], this.colorType = this.data[this.pos++], this.compressionMethod = this.data[this.pos++], this.filterMethod = this.data[this.pos++], this.interlaceMethod = this.data[this.pos++];
              break;
            case "acTL":
              this.animation = { numFrames: this.readUInt32(), numPlays: this.readUInt32() || 1 / 0, frames: [] };
              break;
            case "PLTE":
              this.palette = this.read(e3);
              break;
            case "fcTL":
              o4 && this.animation.frames.push(o4), this.pos += 4, o4 = { width: this.readUInt32(), height: this.readUInt32(), xOffset: this.readUInt32(), yOffset: this.readUInt32() }, a4 = this.readUInt16(), i4 = this.readUInt16() || 100, o4.delay = 1e3 * a4 / i4, o4.disposeOp = this.data[this.pos++], o4.blendOp = this.data[this.pos++], o4.data = [];
              break;
            case "IDAT":
            case "fdAT":
              for ("fdAT" === u3 && (this.pos += 4, e3 -= 4), t4 = (null != o4 ? o4.data : void 0) || this.imgData, f3 = 0; 0 <= e3 ? f3 < e3 : f3 > e3; 0 <= e3 ? ++f3 : --f3) t4.push(this.data[this.pos++]);
              break;
            case "tRNS":
              switch (this.transparency = {}, this.colorType) {
                case 3:
                  if (n3 = this.palette.length / 3, this.transparency.indexed = this.read(e3), this.transparency.indexed.length > n3) throw new Error("More transparent colors than palette size");
                  if ((h3 = n3 - this.transparency.indexed.length) > 0) for (d2 = 0; 0 <= h3 ? d2 < h3 : d2 > h3; 0 <= h3 ? ++d2 : --d2) this.transparency.indexed.push(255);
                  break;
                case 0:
                  this.transparency.grayscale = this.read(e3)[0];
                  break;
                case 2:
                  this.transparency.rgb = this.read(e3);
              }
              break;
            case "tEXt":
              s3 = (l3 = this.read(e3)).indexOf(0), c4 = String.fromCharCode.apply(String, l3.slice(0, s3)), this.text[c4] = String.fromCharCode.apply(String, l3.slice(s3 + 1));
              break;
            case "IEND":
              return o4 && this.animation.frames.push(o4), this.colors = function() {
                switch (this.colorType) {
                  case 0:
                  case 3:
                  case 4:
                    return 1;
                  case 2:
                  case 6:
                    return 3;
                }
              }.call(this), this.hasAlphaChannel = 4 === (p3 = this.colorType) || 6 === p3, r2 = this.colors + (this.hasAlphaChannel ? 1 : 0), this.pixelBitlength = this.bits * r2, this.colorSpace = function() {
                switch (this.colors) {
                  case 1:
                    return "DeviceGray";
                  case 3:
                    return "DeviceRGB";
                }
              }.call(this), void (this.imgData = new Uint8Array(this.imgData));
            default:
              this.pos += e3;
          }
          if (this.pos += 4, this.pos > this.data.length) throw new Error("Incomplete or corrupt PNG file");
        }
      }
      __name(a3, "a3");
      __name2(a3, "a");
      a3.prototype.read = function(t4) {
        var e3, r2;
        for (r2 = [], e3 = 0; 0 <= t4 ? e3 < t4 : e3 > t4; 0 <= t4 ? ++e3 : --e3) r2.push(this.data[this.pos++]);
        return r2;
      }, a3.prototype.readUInt32 = function() {
        return this.data[this.pos++] << 24 | this.data[this.pos++] << 16 | this.data[this.pos++] << 8 | this.data[this.pos++];
      }, a3.prototype.readUInt16 = function() {
        return this.data[this.pos++] << 8 | this.data[this.pos++];
      }, a3.prototype.decodePixels = function(t4) {
        var e3 = this.pixelBitlength / 8, n3 = new Uint8Array(this.width * this.height * e3), i4 = 0, a4 = this;
        if (null == t4 && (t4 = this.imgData), 0 === t4.length) return new Uint8Array(0);
        function o4(r2, o5, s3, c4) {
          var u3, h3, l3, f3, d2, p3, g2, m4, v3, b2, y3, w2, N3, L2, A2, x22, S2, _3, P2, k2, I2, F2 = Math.ceil((a4.width - r2) / s3), C2 = Math.ceil((a4.height - o5) / c4), j2 = a4.width == F2 && a4.height == C2;
          for (L2 = e3 * F2, w2 = j2 ? n3 : new Uint8Array(L2 * C2), p3 = t4.length, N3 = 0, h3 = 0; N3 < C2 && i4 < p3; ) {
            switch (t4[i4++]) {
              case 0:
                for (f3 = S2 = 0; S2 < L2; f3 = S2 += 1) w2[h3++] = t4[i4++];
                break;
              case 1:
                for (f3 = _3 = 0; _3 < L2; f3 = _3 += 1) u3 = t4[i4++], d2 = f3 < e3 ? 0 : w2[h3 - e3], w2[h3++] = (u3 + d2) % 256;
                break;
              case 2:
                for (f3 = P2 = 0; P2 < L2; f3 = P2 += 1) u3 = t4[i4++], l3 = (f3 - f3 % e3) / e3, A2 = N3 && w2[(N3 - 1) * L2 + l3 * e3 + f3 % e3], w2[h3++] = (A2 + u3) % 256;
                break;
              case 3:
                for (f3 = k2 = 0; k2 < L2; f3 = k2 += 1) u3 = t4[i4++], l3 = (f3 - f3 % e3) / e3, d2 = f3 < e3 ? 0 : w2[h3 - e3], A2 = N3 && w2[(N3 - 1) * L2 + l3 * e3 + f3 % e3], w2[h3++] = (u3 + Math.floor((d2 + A2) / 2)) % 256;
                break;
              case 4:
                for (f3 = I2 = 0; I2 < L2; f3 = I2 += 1) u3 = t4[i4++], l3 = (f3 - f3 % e3) / e3, d2 = f3 < e3 ? 0 : w2[h3 - e3], 0 === N3 ? A2 = x22 = 0 : (A2 = w2[(N3 - 1) * L2 + l3 * e3 + f3 % e3], x22 = l3 && w2[(N3 - 1) * L2 + (l3 - 1) * e3 + f3 % e3]), g2 = d2 + A2 - x22, m4 = Math.abs(g2 - d2), b2 = Math.abs(g2 - A2), y3 = Math.abs(g2 - x22), v3 = m4 <= b2 && m4 <= y3 ? d2 : b2 <= y3 ? A2 : x22, w2[h3++] = (u3 + v3) % 256;
                break;
              default:
                throw new Error("Invalid filter algorithm: " + t4[i4 - 1]);
            }
            if (!j2) {
              var O3 = ((o5 + N3 * c4) * a4.width + r2) * e3, B2 = N3 * L2;
              for (f3 = 0; f3 < F2; f3 += 1) {
                for (var M2 = 0; M2 < e3; M2 += 1) n3[O3++] = w2[B2++];
                O3 += (s3 - 1) * e3;
              }
            }
            N3++;
          }
        }
        __name(o4, "o4");
        __name2(o4, "o");
        return t4 = unzlibSync(t4), 1 == a4.interlaceMethod ? (o4(0, 0, 8, 8), o4(4, 0, 8, 8), o4(0, 4, 4, 8), o4(2, 0, 4, 4), o4(0, 2, 2, 4), o4(1, 0, 2, 2), o4(0, 1, 1, 2)) : o4(0, 0, 1, 1), n3;
      }, a3.prototype.decodePalette = function() {
        var t4, e3, r2, n3, i4, a4, o4, s3, c4;
        for (r2 = this.palette, a4 = this.transparency.indexed || [], i4 = new Uint8Array((a4.length || 0) + r2.length), n3 = 0, t4 = 0, e3 = o4 = 0, s3 = r2.length; o4 < s3; e3 = o4 += 3) i4[n3++] = r2[e3], i4[n3++] = r2[e3 + 1], i4[n3++] = r2[e3 + 2], i4[n3++] = null != (c4 = a4[t4++]) ? c4 : 255;
        return i4;
      }, a3.prototype.copyToImageData = function(t4, e3) {
        var r2, n3, i4, a4, o4, s3, c4, u3, h3, l3, f3;
        if (n3 = this.colors, h3 = null, r2 = this.hasAlphaChannel, this.palette.length && (h3 = null != (f3 = this._decodedPalette) ? f3 : this._decodedPalette = this.decodePalette(), n3 = 4, r2 = true), u3 = (i4 = t4.data || t4).length, o4 = h3 || e3, a4 = s3 = 0, 1 === n3) for (; a4 < u3; ) c4 = h3 ? 4 * e3[a4 / 4] : s3, l3 = o4[c4++], i4[a4++] = l3, i4[a4++] = l3, i4[a4++] = l3, i4[a4++] = r2 ? o4[c4++] : 255, s3 = c4;
        else for (; a4 < u3; ) c4 = h3 ? 4 * e3[a4 / 4] : s3, i4[a4++] = o4[c4++], i4[a4++] = o4[c4++], i4[a4++] = o4[c4++], i4[a4++] = r2 ? o4[c4++] : 255, s3 = c4;
      }, a3.prototype.decode = function() {
        var t4;
        return t4 = new Uint8Array(this.width * this.height * 4), this.copyToImageData(t4, this.decodePixels()), t4;
      };
      var o3 = /* @__PURE__ */ __name2(function() {
        if ("[object Window]" === Object.prototype.toString.call(n2)) {
          try {
            e2 = n2.document.createElement("canvas"), i33 = e2.getContext("2d");
          } catch (t4) {
            return false;
          }
          return true;
        }
        return false;
      }, "o");
      return o3(), t3 = /* @__PURE__ */ __name2(function(t4) {
        var r2;
        if (true === o3()) return i33.width = t4.width, i33.height = t4.height, i33.clearRect(0, 0, t4.width, t4.height), i33.putImageData(t4, 0, 0), (r2 = new Image()).src = e2.toDataURL(), r2;
        throw new Error("This method requires a Browser with Canvas-capability.");
      }, "t"), a3.prototype.decodeFrames = function(e3) {
        var r2, n3, i4, a4, o4, s3, c4, u3;
        if (this.animation) {
          for (u3 = [], n3 = o4 = 0, s3 = (c4 = this.animation.frames).length; o4 < s3; n3 = ++o4) r2 = c4[n3], i4 = e3.createImageData(r2.width, r2.height), a4 = this.decodePixels(new Uint8Array(r2.data)), this.copyToImageData(i4, a4), r2.imageData = i4, u3.push(r2.image = t3(i4));
          return u3;
        }
      }, a3.prototype.renderFrame = function(t4, e3) {
        var r2, n3, i4;
        return r2 = (n3 = this.animation.frames)[e3], i4 = n3[e3 - 1], 0 === e3 && t4.clearRect(0, 0, this.width, this.height), 1 === (null != i4 ? i4.disposeOp : void 0) ? t4.clearRect(i4.xOffset, i4.yOffset, i4.width, i4.height) : 2 === (null != i4 ? i4.disposeOp : void 0) && t4.putImageData(i4.imageData, i4.xOffset, i4.yOffset), 0 === r2.blendOp && t4.clearRect(r2.xOffset, r2.yOffset, r2.width, r2.height), t4.drawImage(r2.image, r2.xOffset, r2.yOffset);
      }, a3.prototype.animate = function(t4) {
        var e3, r2, n3, i4, a4, o4, s3 = this;
        return r2 = 0, o4 = this.animation, i4 = o4.numFrames, n3 = o4.frames, a4 = o4.numPlays, (e3 = /* @__PURE__ */ __name2(function() {
          var o5, c4;
          if (o5 = r2++ % i4, c4 = n3[o5], s3.renderFrame(t4, o5), i4 > 1 && r2 / i4 < a4) return s3.animation._timeout = setTimeout(e3, c4.delay);
        }, "e"))();
      }, a3.prototype.stopAnimation = function() {
        var t4;
        return clearTimeout(null != (t4 = this.animation) ? t4._timeout : void 0);
      }, a3.prototype.render = function(t4) {
        var e3, r2;
        return t4._png && t4._png.stopAnimation(), t4._png = this, t4.width = this.width, t4.height = this.height, e3 = t4.getContext("2d"), this.animation ? (this.decodeFrames(e3), this.animate(e3)) : (r2 = e3.createImageData(this.width, this.height), this.copyToImageData(r2, this.decodePixels()), e3.putImageData(r2, 0, 0));
      }, a3;
    }();
    __name2(Zt, "Zt");
    __name2($t, "$t");
    __name2(Qt, "Qt");
    __name2(te, "te");
    __name2(ee, "ee");
    !function(t3) {
      var r2 = /* @__PURE__ */ __name2(function() {
        return "function" == typeof zlibSync;
      }, "r"), n3 = /* @__PURE__ */ __name2(function(r3, n4, a4, h4) {
        var l4 = 4, f4 = s3;
        switch (h4) {
          case t3.image_compression.FAST:
            l4 = 1, f4 = o3;
            break;
          case t3.image_compression.MEDIUM:
            l4 = 6, f4 = c4;
            break;
          case t3.image_compression.SLOW:
            l4 = 9, f4 = u3;
        }
        r3 = i33(r3, n4, a4, f4);
        var d2 = zlibSync(r3, { level: l4 });
        return t3.__addimage__.arrayBufferToBinaryString(d2);
      }, "n"), i33 = /* @__PURE__ */ __name2(function(t4, e2, r3, n4) {
        for (var i4, a4, o4, s4 = t4.length / e2, c5 = new Uint8Array(t4.length + s4), u4 = l3(), h4 = 0; h4 < s4; h4 += 1) {
          if (o4 = h4 * e2, i4 = t4.subarray(o4, o4 + e2), n4) c5.set(n4(i4, r3, a4), o4 + h4);
          else {
            for (var d2, p3 = u4.length, g2 = []; d2 < p3; d2 += 1) g2[d2] = u4[d2](i4, r3, a4);
            var m4 = f3(g2.concat());
            c5.set(g2[m4], o4 + h4);
          }
          a4 = i4;
        }
        return c5;
      }, "i"), a3 = /* @__PURE__ */ __name2(function(t4) {
        var e2 = Array.apply([], t4);
        return e2.unshift(0), e2;
      }, "a"), o3 = /* @__PURE__ */ __name2(function(t4, e2) {
        var r3, n4 = [], i4 = t4.length;
        n4[0] = 1;
        for (var a4 = 0; a4 < i4; a4 += 1) r3 = t4[a4 - e2] || 0, n4[a4 + 1] = t4[a4] - r3 + 256 & 255;
        return n4;
      }, "o"), s3 = /* @__PURE__ */ __name2(function(t4, e2, r3) {
        var n4, i4 = [], a4 = t4.length;
        i4[0] = 2;
        for (var o4 = 0; o4 < a4; o4 += 1) n4 = r3 && r3[o4] || 0, i4[o4 + 1] = t4[o4] - n4 + 256 & 255;
        return i4;
      }, "s"), c4 = /* @__PURE__ */ __name2(function(t4, e2, r3) {
        var n4, i4, a4 = [], o4 = t4.length;
        a4[0] = 3;
        for (var s4 = 0; s4 < o4; s4 += 1) n4 = t4[s4 - e2] || 0, i4 = r3 && r3[s4] || 0, a4[s4 + 1] = t4[s4] + 256 - (n4 + i4 >>> 1) & 255;
        return a4;
      }, "c"), u3 = /* @__PURE__ */ __name2(function(t4, e2, r3) {
        var n4, i4, a4, o4, s4 = [], c5 = t4.length;
        s4[0] = 4;
        for (var u4 = 0; u4 < c5; u4 += 1) n4 = t4[u4 - e2] || 0, i4 = r3 && r3[u4] || 0, a4 = r3 && r3[u4 - e2] || 0, o4 = h3(n4, i4, a4), s4[u4 + 1] = t4[u4] - o4 + 256 & 255;
        return s4;
      }, "u"), h3 = /* @__PURE__ */ __name2(function(t4, e2, r3) {
        if (t4 === e2 && e2 === r3) return t4;
        var n4 = Math.abs(e2 - r3), i4 = Math.abs(t4 - r3), a4 = Math.abs(t4 + e2 - r3 - r3);
        return n4 <= i4 && n4 <= a4 ? t4 : i4 <= a4 ? e2 : r3;
      }, "h"), l3 = /* @__PURE__ */ __name2(function() {
        return [a3, o3, s3, c4, u3];
      }, "l"), f3 = /* @__PURE__ */ __name2(function(t4) {
        var e2 = t4.map(function(t5) {
          return t5.reduce(function(t6, e3) {
            return t6 + Math.abs(e3);
          }, 0);
        });
        return e2.indexOf(Math.min.apply(null, e2));
      }, "f");
      t3.processPNG = function(e2, i4, a4, o4) {
        var s4, c5, u4, h4, l4, f4, d2, p3, g2, m4, v3, b2, y3, w2, N3, L2 = this.decode.FLATE_DECODE, A2 = "";
        if (this.__addimage__.isArrayBuffer(e2) && (e2 = new Uint8Array(e2)), this.__addimage__.isArrayBufferView(e2)) {
          if (e2 = (u4 = new Kt(e2)).imgData, c5 = u4.bits, s4 = u4.colorSpace, l4 = u4.colors, -1 !== [4, 6].indexOf(u4.colorType)) {
            if (8 === u4.bits) {
              g2 = (p3 = 32 == u4.pixelBitlength ? new Uint32Array(u4.decodePixels().buffer) : 16 == u4.pixelBitlength ? new Uint16Array(u4.decodePixels().buffer) : new Uint8Array(u4.decodePixels().buffer)).length, v3 = new Uint8Array(g2 * u4.colors), m4 = new Uint8Array(g2);
              var x22, S2 = u4.pixelBitlength - u4.bits;
              for (w2 = 0, N3 = 0; w2 < g2; w2++) {
                for (y3 = p3[w2], x22 = 0; x22 < S2; ) v3[N3++] = y3 >>> x22 & 255, x22 += u4.bits;
                m4[w2] = y3 >>> x22 & 255;
              }
            }
            if (16 === u4.bits) {
              g2 = (p3 = new Uint32Array(u4.decodePixels().buffer)).length, v3 = new Uint8Array(g2 * (32 / u4.pixelBitlength) * u4.colors), m4 = new Uint8Array(g2 * (32 / u4.pixelBitlength)), b2 = u4.colors > 1, w2 = 0, N3 = 0;
              for (var _3 = 0; w2 < g2; ) y3 = p3[w2++], v3[N3++] = y3 >>> 0 & 255, b2 && (v3[N3++] = y3 >>> 16 & 255, y3 = p3[w2++], v3[N3++] = y3 >>> 0 & 255), m4[_3++] = y3 >>> 16 & 255;
              c5 = 8;
            }
            o4 !== t3.image_compression.NONE && r2() ? (e2 = n3(v3, u4.width * u4.colors, u4.colors, o4), d2 = n3(m4, u4.width, 1, o4)) : (e2 = v3, d2 = m4, L2 = void 0);
          }
          if (3 === u4.colorType && (s4 = this.color_spaces.INDEXED, f4 = u4.palette, u4.transparency.indexed)) {
            var P2 = u4.transparency.indexed, k2 = 0;
            for (w2 = 0, g2 = P2.length; w2 < g2; ++w2) k2 += P2[w2];
            if ((k2 /= 255) === g2 - 1 && -1 !== P2.indexOf(0)) h4 = [P2.indexOf(0)];
            else if (k2 !== g2) {
              for (p3 = u4.decodePixels(), m4 = new Uint8Array(p3.length), w2 = 0, g2 = p3.length; w2 < g2; w2++) m4[w2] = P2[p3[w2]];
              d2 = n3(m4, u4.width, 1);
            }
          }
          var I2 = function(e3) {
            var r3;
            switch (e3) {
              case t3.image_compression.FAST:
                r3 = 11;
                break;
              case t3.image_compression.MEDIUM:
                r3 = 13;
                break;
              case t3.image_compression.SLOW:
                r3 = 14;
                break;
              default:
                r3 = 12;
            }
            return r3;
          }(o4);
          return L2 === this.decode.FLATE_DECODE && (A2 = "/Predictor " + I2 + " "), A2 += "/Colors " + l4 + " /BitsPerComponent " + c5 + " /Columns " + u4.width, (this.__addimage__.isArrayBuffer(e2) || this.__addimage__.isArrayBufferView(e2)) && (e2 = this.__addimage__.arrayBufferToBinaryString(e2)), (d2 && this.__addimage__.isArrayBuffer(d2) || this.__addimage__.isArrayBufferView(d2)) && (d2 = this.__addimage__.arrayBufferToBinaryString(d2)), { alias: a4, data: e2, index: i4, filter: L2, decodeParameters: A2, transparency: h4, palette: f4, sMask: d2, predictor: I2, width: u4.width, height: u4.height, bitsPerComponent: c5, colorSpace: s4 };
        }
      };
    }(E.API), function(t3) {
      t3.processGIF89A = function(e2, r2, n3, i33) {
        var a3 = new Zt(e2), o3 = a3.width, s3 = a3.height, c4 = [];
        a3.decodeAndBlitFrameRGBA(0, c4);
        var u3 = { data: c4, width: o3, height: s3 }, h3 = new Qt(100).encode(u3, 100);
        return t3.processJPEG.call(this, h3, r2, n3, i33);
      }, t3.processGIF87A = t3.processGIF89A;
    }(E.API), te.prototype.parseHeader = function() {
      if (this.fileSize = this.datav.getUint32(this.pos, true), this.pos += 4, this.reserved = this.datav.getUint32(this.pos, true), this.pos += 4, this.offset = this.datav.getUint32(this.pos, true), this.pos += 4, this.headerSize = this.datav.getUint32(this.pos, true), this.pos += 4, this.width = this.datav.getUint32(this.pos, true), this.pos += 4, this.height = this.datav.getInt32(this.pos, true), this.pos += 4, this.planes = this.datav.getUint16(this.pos, true), this.pos += 2, this.bitPP = this.datav.getUint16(this.pos, true), this.pos += 2, this.compress = this.datav.getUint32(this.pos, true), this.pos += 4, this.rawSize = this.datav.getUint32(this.pos, true), this.pos += 4, this.hr = this.datav.getUint32(this.pos, true), this.pos += 4, this.vr = this.datav.getUint32(this.pos, true), this.pos += 4, this.colors = this.datav.getUint32(this.pos, true), this.pos += 4, this.importantColors = this.datav.getUint32(this.pos, true), this.pos += 4, 16 === this.bitPP && this.is_with_alpha && (this.bitPP = 15), this.bitPP < 15) {
        var t3 = 0 === this.colors ? 1 << this.bitPP : this.colors;
        this.palette = new Array(t3);
        for (var e2 = 0; e2 < t3; e2++) {
          var r2 = this.datav.getUint8(this.pos++, true), n3 = this.datav.getUint8(this.pos++, true), i33 = this.datav.getUint8(this.pos++, true), a3 = this.datav.getUint8(this.pos++, true);
          this.palette[e2] = { red: i33, green: n3, blue: r2, quad: a3 };
        }
      }
      this.height < 0 && (this.height *= -1, this.bottom_up = false);
    }, te.prototype.parseBGR = function() {
      this.pos = this.offset;
      try {
        var t3 = "bit" + this.bitPP, e2 = this.width * this.height * 4;
        this.data = new Uint8Array(e2), this[t3]();
      } catch (t4) {
        a2.log("bit decode error:" + t4);
      }
    }, te.prototype.bit1 = function() {
      var t3, e2 = Math.ceil(this.width / 8), r2 = e2 % 4;
      for (t3 = this.height - 1; t3 >= 0; t3--) {
        for (var n3 = this.bottom_up ? t3 : this.height - 1 - t3, i33 = 0; i33 < e2; i33++) for (var a3 = this.datav.getUint8(this.pos++, true), o3 = n3 * this.width * 4 + 8 * i33 * 4, s3 = 0; s3 < 8 && 8 * i33 + s3 < this.width; s3++) {
          var c4 = this.palette[a3 >> 7 - s3 & 1];
          this.data[o3 + 4 * s3] = c4.blue, this.data[o3 + 4 * s3 + 1] = c4.green, this.data[o3 + 4 * s3 + 2] = c4.red, this.data[o3 + 4 * s3 + 3] = 255;
        }
        0 !== r2 && (this.pos += 4 - r2);
      }
    }, te.prototype.bit4 = function() {
      for (var t3 = Math.ceil(this.width / 2), e2 = t3 % 4, r2 = this.height - 1; r2 >= 0; r2--) {
        for (var n3 = this.bottom_up ? r2 : this.height - 1 - r2, i33 = 0; i33 < t3; i33++) {
          var a3 = this.datav.getUint8(this.pos++, true), o3 = n3 * this.width * 4 + 2 * i33 * 4, s3 = a3 >> 4, c4 = 15 & a3, u3 = this.palette[s3];
          if (this.data[o3] = u3.blue, this.data[o3 + 1] = u3.green, this.data[o3 + 2] = u3.red, this.data[o3 + 3] = 255, 2 * i33 + 1 >= this.width) break;
          u3 = this.palette[c4], this.data[o3 + 4] = u3.blue, this.data[o3 + 4 + 1] = u3.green, this.data[o3 + 4 + 2] = u3.red, this.data[o3 + 4 + 3] = 255;
        }
        0 !== e2 && (this.pos += 4 - e2);
      }
    }, te.prototype.bit8 = function() {
      for (var t3 = this.width % 4, e2 = this.height - 1; e2 >= 0; e2--) {
        for (var r2 = this.bottom_up ? e2 : this.height - 1 - e2, n3 = 0; n3 < this.width; n3++) {
          var i33 = this.datav.getUint8(this.pos++, true), a3 = r2 * this.width * 4 + 4 * n3;
          if (i33 < this.palette.length) {
            var o3 = this.palette[i33];
            this.data[a3] = o3.red, this.data[a3 + 1] = o3.green, this.data[a3 + 2] = o3.blue, this.data[a3 + 3] = 255;
          } else this.data[a3] = 255, this.data[a3 + 1] = 255, this.data[a3 + 2] = 255, this.data[a3 + 3] = 255;
        }
        0 !== t3 && (this.pos += 4 - t3);
      }
    }, te.prototype.bit15 = function() {
      for (var t3 = this.width % 3, e2 = parseInt("11111", 2), r2 = this.height - 1; r2 >= 0; r2--) {
        for (var n3 = this.bottom_up ? r2 : this.height - 1 - r2, i33 = 0; i33 < this.width; i33++) {
          var a3 = this.datav.getUint16(this.pos, true);
          this.pos += 2;
          var o3 = (a3 & e2) / e2 * 255 | 0, s3 = (a3 >> 5 & e2) / e2 * 255 | 0, c4 = (a3 >> 10 & e2) / e2 * 255 | 0, u3 = a3 >> 15 ? 255 : 0, h3 = n3 * this.width * 4 + 4 * i33;
          this.data[h3] = c4, this.data[h3 + 1] = s3, this.data[h3 + 2] = o3, this.data[h3 + 3] = u3;
        }
        this.pos += t3;
      }
    }, te.prototype.bit16 = function() {
      for (var t3 = this.width % 3, e2 = parseInt("11111", 2), r2 = parseInt("111111", 2), n3 = this.height - 1; n3 >= 0; n3--) {
        for (var i33 = this.bottom_up ? n3 : this.height - 1 - n3, a3 = 0; a3 < this.width; a3++) {
          var o3 = this.datav.getUint16(this.pos, true);
          this.pos += 2;
          var s3 = (o3 & e2) / e2 * 255 | 0, c4 = (o3 >> 5 & r2) / r2 * 255 | 0, u3 = (o3 >> 11) / e2 * 255 | 0, h3 = i33 * this.width * 4 + 4 * a3;
          this.data[h3] = u3, this.data[h3 + 1] = c4, this.data[h3 + 2] = s3, this.data[h3 + 3] = 255;
        }
        this.pos += t3;
      }
    }, te.prototype.bit24 = function() {
      for (var t3 = this.height - 1; t3 >= 0; t3--) {
        for (var e2 = this.bottom_up ? t3 : this.height - 1 - t3, r2 = 0; r2 < this.width; r2++) {
          var n3 = this.datav.getUint8(this.pos++, true), i33 = this.datav.getUint8(this.pos++, true), a3 = this.datav.getUint8(this.pos++, true), o3 = e2 * this.width * 4 + 4 * r2;
          this.data[o3] = a3, this.data[o3 + 1] = i33, this.data[o3 + 2] = n3, this.data[o3 + 3] = 255;
        }
        this.pos += this.width % 4;
      }
    }, te.prototype.bit32 = function() {
      for (var t3 = this.height - 1; t3 >= 0; t3--) for (var e2 = this.bottom_up ? t3 : this.height - 1 - t3, r2 = 0; r2 < this.width; r2++) {
        var n3 = this.datav.getUint8(this.pos++, true), i33 = this.datav.getUint8(this.pos++, true), a3 = this.datav.getUint8(this.pos++, true), o3 = this.datav.getUint8(this.pos++, true), s3 = e2 * this.width * 4 + 4 * r2;
        this.data[s3] = a3, this.data[s3 + 1] = i33, this.data[s3 + 2] = n3, this.data[s3 + 3] = o3;
      }
    }, te.prototype.getData = function() {
      return this.data;
    }, /**
    * @license
    * Copyright (c) 2018 Aras Abbasi
    *
    * Licensed under the MIT License.
    * http://opensource.org/licenses/mit-license
    */
    function(t3) {
      t3.processBMP = function(e2, r2, n3, i33) {
        var a3 = new te(e2, false), o3 = a3.width, s3 = a3.height, c4 = { data: a3.getData(), width: o3, height: s3 }, u3 = new Qt(100).encode(c4, 100);
        return t3.processJPEG.call(this, u3, r2, n3, i33);
      };
    }(E.API), ee.prototype.getData = function() {
      return this.data;
    }, /**
    * @license
    * Copyright (c) 2019 Aras Abbasi
    *
    * Licensed under the MIT License.
    * http://opensource.org/licenses/mit-license
    */
    function(t3) {
      t3.processWEBP = function(e2, r2, n3, i33) {
        var a3 = new ee(e2), o3 = a3.width, s3 = a3.height, c4 = { data: a3.getData(), width: o3, height: s3 }, u3 = new Qt(100).encode(c4, 100);
        return t3.processJPEG.call(this, u3, r2, n3, i33);
      };
    }(E.API), E.API.processRGBA = function(t3, e2, r2) {
      for (var n3 = t3.data, i33 = n3.length, a3 = new Uint8Array(i33 / 4 * 3), o3 = new Uint8Array(i33 / 4), s3 = 0, c4 = 0, u3 = 0; u3 < i33; u3 += 4) {
        var h3 = n3[u3], l3 = n3[u3 + 1], f3 = n3[u3 + 2], d2 = n3[u3 + 3];
        a3[s3++] = h3, a3[s3++] = l3, a3[s3++] = f3, o3[c4++] = d2;
      }
      var p3 = this.__addimage__.arrayBufferToBinaryString(a3);
      return { alpha: this.__addimage__.arrayBufferToBinaryString(o3), data: p3, index: e2, alias: r2, colorSpace: "DeviceRGB", bitsPerComponent: 8, width: t3.width, height: t3.height };
    }, E.API.setLanguage = function(t3) {
      return void 0 === this.internal.languageSettings && (this.internal.languageSettings = {}, this.internal.languageSettings.isSubscribed = false), void 0 !== { af: "Afrikaans", sq: "Albanian", ar: "Arabic (Standard)", "ar-DZ": "Arabic (Algeria)", "ar-BH": "Arabic (Bahrain)", "ar-EG": "Arabic (Egypt)", "ar-IQ": "Arabic (Iraq)", "ar-JO": "Arabic (Jordan)", "ar-KW": "Arabic (Kuwait)", "ar-LB": "Arabic (Lebanon)", "ar-LY": "Arabic (Libya)", "ar-MA": "Arabic (Morocco)", "ar-OM": "Arabic (Oman)", "ar-QA": "Arabic (Qatar)", "ar-SA": "Arabic (Saudi Arabia)", "ar-SY": "Arabic (Syria)", "ar-TN": "Arabic (Tunisia)", "ar-AE": "Arabic (U.A.E.)", "ar-YE": "Arabic (Yemen)", an: "Aragonese", hy: "Armenian", as: "Assamese", ast: "Asturian", az: "Azerbaijani", eu: "Basque", be: "Belarusian", bn: "Bengali", bs: "Bosnian", br: "Breton", bg: "Bulgarian", my: "Burmese", ca: "Catalan", ch: "Chamorro", ce: "Chechen", zh: "Chinese", "zh-HK": "Chinese (Hong Kong)", "zh-CN": "Chinese (PRC)", "zh-SG": "Chinese (Singapore)", "zh-TW": "Chinese (Taiwan)", cv: "Chuvash", co: "Corsican", cr: "Cree", hr: "Croatian", cs: "Czech", da: "Danish", nl: "Dutch (Standard)", "nl-BE": "Dutch (Belgian)", en: "English", "en-AU": "English (Australia)", "en-BZ": "English (Belize)", "en-CA": "English (Canada)", "en-IE": "English (Ireland)", "en-JM": "English (Jamaica)", "en-NZ": "English (New Zealand)", "en-PH": "English (Philippines)", "en-ZA": "English (South Africa)", "en-TT": "English (Trinidad & Tobago)", "en-GB": "English (United Kingdom)", "en-US": "English (United States)", "en-ZW": "English (Zimbabwe)", eo: "Esperanto", et: "Estonian", fo: "Faeroese", fj: "Fijian", fi: "Finnish", fr: "French (Standard)", "fr-BE": "French (Belgium)", "fr-CA": "French (Canada)", "fr-FR": "French (France)", "fr-LU": "French (Luxembourg)", "fr-MC": "French (Monaco)", "fr-CH": "French (Switzerland)", fy: "Frisian", fur: "Friulian", gd: "Gaelic (Scots)", "gd-IE": "Gaelic (Irish)", gl: "Galacian", ka: "Georgian", de: "German (Standard)", "de-AT": "German (Austria)", "de-DE": "German (Germany)", "de-LI": "German (Liechtenstein)", "de-LU": "German (Luxembourg)", "de-CH": "German (Switzerland)", el: "Greek", gu: "Gujurati", ht: "Haitian", he: "Hebrew", hi: "Hindi", hu: "Hungarian", is: "Icelandic", id: "Indonesian", iu: "Inuktitut", ga: "Irish", it: "Italian (Standard)", "it-CH": "Italian (Switzerland)", ja: "Japanese", kn: "Kannada", ks: "Kashmiri", kk: "Kazakh", km: "Khmer", ky: "Kirghiz", tlh: "Klingon", ko: "Korean", "ko-KP": "Korean (North Korea)", "ko-KR": "Korean (South Korea)", la: "Latin", lv: "Latvian", lt: "Lithuanian", lb: "Luxembourgish", mk: "North Macedonia", ms: "Malay", ml: "Malayalam", mt: "Maltese", mi: "Maori", mr: "Marathi", mo: "Moldavian", nv: "Navajo", ng: "Ndonga", ne: "Nepali", no: "Norwegian", nb: "Norwegian (Bokmal)", nn: "Norwegian (Nynorsk)", oc: "Occitan", or: "Oriya", om: "Oromo", fa: "Persian", "fa-IR": "Persian/Iran", pl: "Polish", pt: "Portuguese", "pt-BR": "Portuguese (Brazil)", pa: "Punjabi", "pa-IN": "Punjabi (India)", "pa-PK": "Punjabi (Pakistan)", qu: "Quechua", rm: "Rhaeto-Romanic", ro: "Romanian", "ro-MO": "Romanian (Moldavia)", ru: "Russian", "ru-MO": "Russian (Moldavia)", sz: "Sami (Lappish)", sg: "Sango", sa: "Sanskrit", sc: "Sardinian", sd: "Sindhi", si: "Singhalese", sr: "Serbian", sk: "Slovak", sl: "Slovenian", so: "Somani", sb: "Sorbian", es: "Spanish", "es-AR": "Spanish (Argentina)", "es-BO": "Spanish (Bolivia)", "es-CL": "Spanish (Chile)", "es-CO": "Spanish (Colombia)", "es-CR": "Spanish (Costa Rica)", "es-DO": "Spanish (Dominican Republic)", "es-EC": "Spanish (Ecuador)", "es-SV": "Spanish (El Salvador)", "es-GT": "Spanish (Guatemala)", "es-HN": "Spanish (Honduras)", "es-MX": "Spanish (Mexico)", "es-NI": "Spanish (Nicaragua)", "es-PA": "Spanish (Panama)", "es-PY": "Spanish (Paraguay)", "es-PE": "Spanish (Peru)", "es-PR": "Spanish (Puerto Rico)", "es-ES": "Spanish (Spain)", "es-UY": "Spanish (Uruguay)", "es-VE": "Spanish (Venezuela)", sx: "Sutu", sw: "Swahili", sv: "Swedish", "sv-FI": "Swedish (Finland)", "sv-SV": "Swedish (Sweden)", ta: "Tamil", tt: "Tatar", te: "Teluga", th: "Thai", tig: "Tigre", ts: "Tsonga", tn: "Tswana", tr: "Turkish", tk: "Turkmen", uk: "Ukrainian", hsb: "Upper Sorbian", ur: "Urdu", ve: "Venda", vi: "Vietnamese", vo: "Volapuk", wa: "Walloon", cy: "Welsh", xh: "Xhosa", ji: "Yiddish", zu: "Zulu" }[t3] && (this.internal.languageSettings.languageCode = t3, false === this.internal.languageSettings.isSubscribed && (this.internal.events.subscribe("putCatalog", function() {
        this.internal.write("/Lang (" + this.internal.languageSettings.languageCode + ")");
      }), this.internal.languageSettings.isSubscribed = true)), this;
    }, Vt = E.API, Gt = Vt.getCharWidthsArray = function(e2, r2) {
      var n3, i33, a3 = (r2 = r2 || {}).font || this.internal.getFont(), o3 = r2.fontSize || this.internal.getFontSize(), s3 = r2.charSpace || this.internal.getCharSpace(), c4 = r2.widths ? r2.widths : a3.metadata.Unicode.widths, u3 = c4.fof ? c4.fof : 1, h3 = r2.kerning ? r2.kerning : a3.metadata.Unicode.kerning, l3 = h3.fof ? h3.fof : 1, f3 = false !== r2.doKerning, d2 = 0, p3 = e2.length, g2 = 0, m4 = c4[0] || u3, v3 = [];
      for (n3 = 0; n3 < p3; n3++) i33 = e2.charCodeAt(n3), "function" == typeof a3.metadata.widthOfString ? v3.push((a3.metadata.widthOfGlyph(a3.metadata.characterToGlyph(i33)) + s3 * (1e3 / o3) || 0) / 1e3) : (d2 = f3 && "object" === _typeof(h3[i33]) && !isNaN(parseInt(h3[i33][g2], 10)) ? h3[i33][g2] / l3 : 0, v3.push((c4[i33] || m4) / u3 + d2)), g2 = i33;
      return v3;
    }, Yt = Vt.getStringUnitWidth = function(t3, e2) {
      var r2 = (e2 = e2 || {}).fontSize || this.internal.getFontSize(), n3 = e2.font || this.internal.getFont(), i33 = e2.charSpace || this.internal.getCharSpace();
      return Vt.processArabic && (t3 = Vt.processArabic(t3)), "function" == typeof n3.metadata.widthOfString ? n3.metadata.widthOfString(t3, r2, i33) / r2 : Gt.apply(this, arguments).reduce(function(t4, e3) {
        return t4 + e3;
      }, 0);
    }, Jt = /* @__PURE__ */ __name2(function(t3, e2, r2, n3) {
      for (var i33 = [], a3 = 0, o3 = t3.length, s3 = 0; a3 !== o3 && s3 + e2[a3] < r2; ) s3 += e2[a3], a3++;
      i33.push(t3.slice(0, a3));
      var c4 = a3;
      for (s3 = 0; a3 !== o3; ) s3 + e2[a3] > n3 && (i33.push(t3.slice(c4, a3)), s3 = 0, c4 = a3), s3 += e2[a3], a3++;
      return c4 !== a3 && i33.push(t3.slice(c4, a3)), i33;
    }, "Jt"), Xt = /* @__PURE__ */ __name2(function(t3, e2, r2) {
      r2 || (r2 = {});
      var n3, i33, a3, o3, s3, c4, u3, h3 = [], l3 = [h3], f3 = r2.textIndent || 0, d2 = 0, p3 = 0, g2 = t3.split(" "), m4 = Gt.apply(this, [" ", r2])[0];
      if (c4 = -1 === r2.lineIndent ? g2[0].length + 2 : r2.lineIndent || 0) {
        var v3 = Array(c4).join(" "), b2 = [];
        g2.map(function(t4) {
          (t4 = t4.split(/\s*\n/)).length > 1 ? b2 = b2.concat(t4.map(function(t5, e3) {
            return (e3 && t5.length ? "\n" : "") + t5;
          })) : b2.push(t4[0]);
        }), g2 = b2, c4 = Yt.apply(this, [v3, r2]);
      }
      for (a3 = 0, o3 = g2.length; a3 < o3; a3++) {
        var y3 = 0;
        if (n3 = g2[a3], c4 && "\n" == n3[0] && (n3 = n3.substr(1), y3 = 1), f3 + d2 + (p3 = (i33 = Gt.apply(this, [n3, r2])).reduce(function(t4, e3) {
          return t4 + e3;
        }, 0)) > e2 || y3) {
          if (p3 > e2) {
            for (s3 = Jt.apply(this, [n3, i33, e2 - (f3 + d2), e2]), h3.push(s3.shift()), h3 = [s3.pop()]; s3.length; ) l3.push([s3.shift()]);
            p3 = i33.slice(n3.length - (h3[0] ? h3[0].length : 0)).reduce(function(t4, e3) {
              return t4 + e3;
            }, 0);
          } else h3 = [n3];
          l3.push(h3), f3 = p3 + c4, d2 = m4;
        } else h3.push(n3), f3 += d2 + p3, d2 = m4;
      }
      return u3 = c4 ? function(t4, e3) {
        return (e3 ? v3 : "") + t4.join(" ");
      } : function(t4) {
        return t4.join(" ");
      }, l3.map(u3);
    }, "Xt"), Vt.splitTextToSize = function(t3, e2, r2) {
      var n3, i33 = (r2 = r2 || {}).fontSize || this.internal.getFontSize(), a3 = function(t4) {
        if (t4.widths && t4.kerning) return { widths: t4.widths, kerning: t4.kerning };
        var e3 = this.internal.getFont(t4.fontName, t4.fontStyle);
        return e3.metadata.Unicode ? { widths: e3.metadata.Unicode.widths || { 0: 1 }, kerning: e3.metadata.Unicode.kerning || {} } : { font: e3.metadata, fontSize: this.internal.getFontSize(), charSpace: this.internal.getCharSpace() };
      }.call(this, r2);
      n3 = Array.isArray(t3) ? t3 : String(t3).split(/\r?\n/);
      var o3 = 1 * this.internal.scaleFactor * e2 / i33;
      a3.textIndent = r2.textIndent ? 1 * r2.textIndent * this.internal.scaleFactor / i33 : 0, a3.lineIndent = r2.lineIndent;
      var s3, c4, u3 = [];
      for (s3 = 0, c4 = n3.length; s3 < c4; s3++) u3 = u3.concat(Xt.apply(this, [n3[s3], o3, a3]));
      return u3;
    }, function(e2) {
      e2.__fontmetrics__ = e2.__fontmetrics__ || {};
      for (var r2 = "klmnopqrstuvwxyz", n3 = {}, i33 = {}, a3 = 0; a3 < r2.length; a3++) n3[r2[a3]] = "0123456789abcdef"[a3], i33["0123456789abcdef"[a3]] = r2[a3];
      var o3 = /* @__PURE__ */ __name2(function(t3) {
        return "0x" + parseInt(t3, 10).toString(16);
      }, "o"), s3 = e2.__fontmetrics__.compress = function(e3) {
        var r3, n4, a4, c5, u4 = ["{"];
        for (var h4 in e3) {
          if (r3 = e3[h4], isNaN(parseInt(h4, 10)) ? n4 = "'" + h4 + "'" : (h4 = parseInt(h4, 10), n4 = (n4 = o3(h4).slice(2)).slice(0, -1) + i33[n4.slice(-1)]), "number" == typeof r3) r3 < 0 ? (a4 = o3(r3).slice(3), c5 = "-") : (a4 = o3(r3).slice(2), c5 = ""), a4 = c5 + a4.slice(0, -1) + i33[a4.slice(-1)];
          else {
            if ("object" !== _typeof(r3)) throw new Error("Don't know what to do with value type " + _typeof(r3) + ".");
            a4 = s3(r3);
          }
          u4.push(n4 + a4);
        }
        return u4.push("}"), u4.join("");
      }, c4 = e2.__fontmetrics__.uncompress = function(t3) {
        if ("string" != typeof t3) throw new Error("Invalid argument passed to uncompress.");
        for (var e3, r3, i4, a4, o4 = {}, s4 = 1, c5 = o4, u4 = [], h4 = "", l4 = "", f3 = t3.length - 1, d2 = 1; d2 < f3; d2 += 1) "'" == (a4 = t3[d2]) ? e3 ? (i4 = e3.join(""), e3 = void 0) : e3 = [] : e3 ? e3.push(a4) : "{" == a4 ? (u4.push([c5, i4]), c5 = {}, i4 = void 0) : "}" == a4 ? ((r3 = u4.pop())[0][r3[1]] = c5, i4 = void 0, c5 = r3[0]) : "-" == a4 ? s4 = -1 : void 0 === i4 ? n3.hasOwnProperty(a4) ? (h4 += n3[a4], i4 = parseInt(h4, 16) * s4, s4 = 1, h4 = "") : h4 += a4 : n3.hasOwnProperty(a4) ? (l4 += n3[a4], c5[i4] = parseInt(l4, 16) * s4, s4 = 1, i4 = void 0, l4 = "") : l4 += a4;
        return o4;
      }, u3 = { codePages: ["WinAnsiEncoding"], WinAnsiEncoding: c4("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}") }, h3 = { Unicode: { Courier: u3, "Courier-Bold": u3, "Courier-BoldOblique": u3, "Courier-Oblique": u3, Helvetica: u3, "Helvetica-Bold": u3, "Helvetica-BoldOblique": u3, "Helvetica-Oblique": u3, "Times-Roman": u3, "Times-Bold": u3, "Times-BoldItalic": u3, "Times-Italic": u3 } }, l3 = { Unicode: { "Courier-Oblique": c4("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"), "Times-BoldItalic": c4("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"), "Helvetica-Bold": c4("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"), Courier: c4("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"), "Courier-BoldOblique": c4("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"), "Times-Bold": c4("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"), Symbol: c4("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"), Helvetica: c4("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"), "Helvetica-BoldOblique": c4("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"), ZapfDingbats: c4("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"), "Courier-Bold": c4("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"), "Times-Italic": c4("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"), "Times-Roman": c4("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"), "Helvetica-Oblique": c4("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}") } };
      e2.events.push(["addFont", function(t3) {
        var e3 = t3.font, r3 = l3.Unicode[e3.postScriptName];
        r3 && (e3.metadata.Unicode = {}, e3.metadata.Unicode.widths = r3.widths, e3.metadata.Unicode.kerning = r3.kerning);
        var n4 = h3.Unicode[e3.postScriptName];
        n4 && (e3.metadata.Unicode.encoding = n4, e3.encoding = n4.codePages[0]);
      }]);
    }(E.API), /**
    * @license
    * Licensed under the MIT License.
    * http://opensource.org/licenses/mit-license
    */
    function(t3) {
      var e2 = /* @__PURE__ */ __name2(function(t4) {
        for (var e3 = t4.length, r2 = new Uint8Array(e3), n3 = 0; n3 < e3; n3++) r2[n3] = t4.charCodeAt(n3);
        return r2;
      }, "e");
      t3.API.events.push(["addFont", function(r2) {
        var n3 = void 0, i33 = r2.font, a3 = r2.instance;
        if (!i33.isStandardFont) {
          if (void 0 === a3) throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('" + i33.postScriptName + "').");
          if ("string" != typeof (n3 = false === a3.existsFileInVFS(i33.postScriptName) ? a3.loadFile(i33.postScriptName) : a3.getFileFromVFS(i33.postScriptName))) throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('" + i33.postScriptName + "').");
          !function(r3, n4) {
            n4 = /^\x00\x01\x00\x00/.test(n4) ? e2(n4) : e2(u2(n4)), r3.metadata = t3.API.TTFFont.open(n4), r3.metadata.Unicode = r3.metadata.Unicode || { encoding: {}, kerning: {}, widths: [] }, r3.metadata.glyIdsUsed = [0];
          }(i33, n3);
        }
      }]);
    }(E), /** @license
    * Copyright (c) 2012 Willow Systems Corporation, https://github.com/willowsystems
    *
    * Permission is hereby granted, free of charge, to any person obtaining
    * a copy of this software and associated documentation files (the
    * "Software"), to deal in the Software without restriction, including
    * without limitation the rights to use, copy, modify, merge, publish,
    * distribute, sublicense, and/or sell copies of the Software, and to
    * permit persons to whom the Software is furnished to do so, subject to
    * the following conditions:
    *
    * The above copyright notice and this permission notice shall be
    * included in all copies or substantial portions of the Software.
    *
    * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
    * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
    * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
    * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
    * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
    * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
    * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
    * ====================================================================
    */
    function(t3) {
      function e2() {
        return (n2.canvg ? Promise.resolve(n2.canvg) : Promise.resolve().then(() => (init_index_es(), index_es_exports))).catch(function(t4) {
          return Promise.reject(new Error("Could not load canvg: " + t4));
        }).then(function(t4) {
          return t4.default ? t4.default : t4;
        });
      }
      __name(e2, "e2");
      __name2(e2, "e");
      E.API.addSvgAsImage = function(t4, r2, n3, i33, o3, s3, c4, u3) {
        if (isNaN(r2) || isNaN(n3)) throw a2.error("jsPDF.addSvgAsImage: Invalid coordinates", arguments), new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");
        if (isNaN(i33) || isNaN(o3)) throw a2.error("jsPDF.addSvgAsImage: Invalid measurements", arguments), new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");
        var h3 = document.createElement("canvas");
        h3.width = i33, h3.height = o3;
        var l3 = h3.getContext("2d");
        l3.fillStyle = "#fff", l3.fillRect(0, 0, h3.width, h3.height);
        var f3 = { ignoreMouse: true, ignoreAnimation: true, ignoreDimensions: true }, d2 = this;
        return e2().then(function(e3) {
          return e3.fromString(l3, t4, f3);
        }, function() {
          return Promise.reject(new Error("Could not load canvg."));
        }).then(function(t5) {
          return t5.render(f3);
        }).then(function() {
          d2.addImage(h3.toDataURL("image/jpeg", 1), r2, n3, i33, o3, c4, u3);
        });
      };
    }(), E.API.putTotalPages = function(t3) {
      var e2, r2 = 0;
      parseInt(this.internal.getFont().id.substr(1), 10) < 15 ? (e2 = new RegExp(t3, "g"), r2 = this.internal.getNumberOfPages()) : (e2 = new RegExp(this.pdfEscape16(t3, this.internal.getFont()), "g"), r2 = this.pdfEscape16(this.internal.getNumberOfPages() + "", this.internal.getFont()));
      for (var n3 = 1; n3 <= this.internal.getNumberOfPages(); n3++) for (var i33 = 0; i33 < this.internal.pages[n3].length; i33++) this.internal.pages[n3][i33] = this.internal.pages[n3][i33].replace(e2, r2);
      return this;
    }, E.API.viewerPreferences = function(e2, r2) {
      var n3;
      e2 = e2 || {}, r2 = r2 || false;
      var i33, a3, o3, s3 = { HideToolbar: { defaultValue: false, value: false, type: "boolean", explicitSet: false, valueSet: [true, false], pdfVersion: 1.3 }, HideMenubar: { defaultValue: false, value: false, type: "boolean", explicitSet: false, valueSet: [true, false], pdfVersion: 1.3 }, HideWindowUI: { defaultValue: false, value: false, type: "boolean", explicitSet: false, valueSet: [true, false], pdfVersion: 1.3 }, FitWindow: { defaultValue: false, value: false, type: "boolean", explicitSet: false, valueSet: [true, false], pdfVersion: 1.3 }, CenterWindow: { defaultValue: false, value: false, type: "boolean", explicitSet: false, valueSet: [true, false], pdfVersion: 1.3 }, DisplayDocTitle: { defaultValue: false, value: false, type: "boolean", explicitSet: false, valueSet: [true, false], pdfVersion: 1.4 }, NonFullScreenPageMode: { defaultValue: "UseNone", value: "UseNone", type: "name", explicitSet: false, valueSet: ["UseNone", "UseOutlines", "UseThumbs", "UseOC"], pdfVersion: 1.3 }, Direction: { defaultValue: "L2R", value: "L2R", type: "name", explicitSet: false, valueSet: ["L2R", "R2L"], pdfVersion: 1.3 }, ViewArea: { defaultValue: "CropBox", value: "CropBox", type: "name", explicitSet: false, valueSet: ["MediaBox", "CropBox", "TrimBox", "BleedBox", "ArtBox"], pdfVersion: 1.4 }, ViewClip: { defaultValue: "CropBox", value: "CropBox", type: "name", explicitSet: false, valueSet: ["MediaBox", "CropBox", "TrimBox", "BleedBox", "ArtBox"], pdfVersion: 1.4 }, PrintArea: { defaultValue: "CropBox", value: "CropBox", type: "name", explicitSet: false, valueSet: ["MediaBox", "CropBox", "TrimBox", "BleedBox", "ArtBox"], pdfVersion: 1.4 }, PrintClip: { defaultValue: "CropBox", value: "CropBox", type: "name", explicitSet: false, valueSet: ["MediaBox", "CropBox", "TrimBox", "BleedBox", "ArtBox"], pdfVersion: 1.4 }, PrintScaling: { defaultValue: "AppDefault", value: "AppDefault", type: "name", explicitSet: false, valueSet: ["AppDefault", "None"], pdfVersion: 1.6 }, Duplex: { defaultValue: "", value: "none", type: "name", explicitSet: false, valueSet: ["Simplex", "DuplexFlipShortEdge", "DuplexFlipLongEdge", "none"], pdfVersion: 1.7 }, PickTrayByPDFSize: { defaultValue: false, value: false, type: "boolean", explicitSet: false, valueSet: [true, false], pdfVersion: 1.7 }, PrintPageRange: { defaultValue: "", value: "", type: "array", explicitSet: false, valueSet: null, pdfVersion: 1.7 }, NumCopies: { defaultValue: 1, value: 1, type: "integer", explicitSet: false, valueSet: null, pdfVersion: 1.7 } }, c4 = Object.keys(s3), u3 = [], h3 = 0, l3 = 0, f3 = 0;
      function d2(t3, e3) {
        var r3, n4 = false;
        for (r3 = 0; r3 < t3.length; r3 += 1) t3[r3] === e3 && (n4 = true);
        return n4;
      }
      __name(d2, "d2");
      __name2(d2, "d");
      if (void 0 === this.internal.viewerpreferences && (this.internal.viewerpreferences = {}, this.internal.viewerpreferences.configuration = JSON.parse(JSON.stringify(s3)), this.internal.viewerpreferences.isSubscribed = false), n3 = this.internal.viewerpreferences.configuration, "reset" === e2 || true === r2) {
        var p3 = c4.length;
        for (f3 = 0; f3 < p3; f3 += 1) n3[c4[f3]].value = n3[c4[f3]].defaultValue, n3[c4[f3]].explicitSet = false;
      }
      if ("object" === _typeof(e2)) {
        for (a3 in e2) if (o3 = e2[a3], d2(c4, a3) && void 0 !== o3) {
          if ("boolean" === n3[a3].type && "boolean" == typeof o3) n3[a3].value = o3;
          else if ("name" === n3[a3].type && d2(n3[a3].valueSet, o3)) n3[a3].value = o3;
          else if ("integer" === n3[a3].type && Number.isInteger(o3)) n3[a3].value = o3;
          else if ("array" === n3[a3].type) {
            for (h3 = 0; h3 < o3.length; h3 += 1) if (i33 = true, 1 === o3[h3].length && "number" == typeof o3[h3][0]) u3.push(String(o3[h3] - 1));
            else if (o3[h3].length > 1) {
              for (l3 = 0; l3 < o3[h3].length; l3 += 1) "number" != typeof o3[h3][l3] && (i33 = false);
              true === i33 && u3.push([o3[h3][0] - 1, o3[h3][1] - 1].join(" "));
            }
            n3[a3].value = "[" + u3.join(" ") + "]";
          } else n3[a3].value = n3[a3].defaultValue;
          n3[a3].explicitSet = true;
        }
      }
      return false === this.internal.viewerpreferences.isSubscribed && (this.internal.events.subscribe("putCatalog", function() {
        var t3, e3 = [];
        for (t3 in n3) true === n3[t3].explicitSet && ("name" === n3[t3].type ? e3.push("/" + t3 + " /" + n3[t3].value) : e3.push("/" + t3 + " " + n3[t3].value));
        0 !== e3.length && this.internal.write("/ViewerPreferences\n<<\n" + e3.join("\n") + "\n>>");
      }), this.internal.viewerpreferences.isSubscribed = true), this.internal.viewerpreferences.configuration = n3, this;
    }, /** ====================================================================
    * @license
    * jsPDF XMP metadata plugin
    * Copyright (c) 2016 Jussi Utunen, u-jussi@suomi24.fi
    *
    * Permission is hereby granted, free of charge, to any person obtaining
    * a copy of this software and associated documentation files (the
    * "Software"), to deal in the Software without restriction, including
    * without limitation the rights to use, copy, modify, merge, publish,
    * distribute, sublicense, and/or sell copies of the Software, and to
    * permit persons to whom the Software is furnished to do so, subject to
    * the following conditions:
    *
    * The above copyright notice and this permission notice shall be
    * included in all copies or substantial portions of the Software.
    *
    * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
    * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
    * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
    * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
    * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
    * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
    * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
    * ====================================================================
    */
    function(t3) {
      var e2 = /* @__PURE__ */ __name2(function() {
        var t4 = '<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="' + this.internal.__metadata__.namespaceuri + '"><jspdf:metadata>', e3 = unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')), r3 = unescape(encodeURIComponent(t4)), n3 = unescape(encodeURIComponent(this.internal.__metadata__.metadata)), i33 = unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")), a3 = unescape(encodeURIComponent("</x:xmpmeta>")), o3 = r3.length + n3.length + i33.length + e3.length + a3.length;
        this.internal.__metadata__.metadata_object_number = this.internal.newObject(), this.internal.write("<< /Type /Metadata /Subtype /XML /Length " + o3 + " >>"), this.internal.write("stream"), this.internal.write(e3 + r3 + n3 + i33 + a3), this.internal.write("endstream"), this.internal.write("endobj");
      }, "e"), r2 = /* @__PURE__ */ __name2(function() {
        this.internal.__metadata__.metadata_object_number && this.internal.write("/Metadata " + this.internal.__metadata__.metadata_object_number + " 0 R");
      }, "r");
      t3.addMetadata = function(t4, n3) {
        return void 0 === this.internal.__metadata__ && (this.internal.__metadata__ = { metadata: t4, namespaceuri: n3 || "http://jspdf.default.namespaceuri/" }, this.internal.events.subscribe("putCatalog", r2), this.internal.events.subscribe("postPutResources", e2)), this;
      };
    }(E.API), function(t3) {
      var e2 = t3.API, r2 = e2.pdfEscape16 = function(t4, e3) {
        for (var r3, n4 = e3.metadata.Unicode.widths, i4 = ["", "0", "00", "000", "0000"], a3 = [""], o3 = 0, s3 = t4.length; o3 < s3; ++o3) {
          if (r3 = e3.metadata.characterToGlyph(t4.charCodeAt(o3)), e3.metadata.glyIdsUsed.push(r3), e3.metadata.toUnicode[r3] = t4.charCodeAt(o3), -1 == n4.indexOf(r3) && (n4.push(r3), n4.push([parseInt(e3.metadata.widthOfGlyph(r3), 10)])), "0" == r3) return a3.join("");
          r3 = r3.toString(16), a3.push(i4[4 - r3.length], r3);
        }
        return a3.join("");
      }, n3 = /* @__PURE__ */ __name2(function(t4) {
        var e3, r3, n4, i4, a3, o3, s3;
        for (a3 = "/CIDInit /ProcSet findresource begin\n12 dict begin\nbegincmap\n/CIDSystemInfo <<\n  /Registry (Adobe)\n  /Ordering (UCS)\n  /Supplement 0\n>> def\n/CMapName /Adobe-Identity-UCS def\n/CMapType 2 def\n1 begincodespacerange\n<0000><ffff>\nendcodespacerange", n4 = [], o3 = 0, s3 = (r3 = Object.keys(t4).sort(function(t5, e4) {
          return t5 - e4;
        })).length; o3 < s3; o3++) e3 = r3[o3], n4.length >= 100 && (a3 += "\n" + n4.length + " beginbfchar\n" + n4.join("\n") + "\nendbfchar", n4 = []), void 0 !== t4[e3] && null !== t4[e3] && "function" == typeof t4[e3].toString && (i4 = ("0000" + t4[e3].toString(16)).slice(-4), e3 = ("0000" + (+e3).toString(16)).slice(-4), n4.push("<" + e3 + "><" + i4 + ">"));
        return n4.length && (a3 += "\n" + n4.length + " beginbfchar\n" + n4.join("\n") + "\nendbfchar\n"), a3 += "endcmap\nCMapName currentdict /CMap defineresource pop\nend\nend";
      }, "n");
      e2.events.push(["putFont", function(e3) {
        !function(e4) {
          var r3 = e4.font, i4 = e4.out, a3 = e4.newObject, o3 = e4.putStream;
          if (r3.metadata instanceof t3.API.TTFFont && "Identity-H" === r3.encoding) {
            for (var s3 = r3.metadata.Unicode.widths, c4 = r3.metadata.subset.encode(r3.metadata.glyIdsUsed, 1), u3 = "", h3 = 0; h3 < c4.length; h3++) u3 += String.fromCharCode(c4[h3]);
            var l3 = a3();
            o3({ data: u3, addLength1: true, objectId: l3 }), i4("endobj");
            var f3 = a3();
            o3({ data: n3(r3.metadata.toUnicode), addLength1: true, objectId: f3 }), i4("endobj");
            var d2 = a3();
            i4("<<"), i4("/Type /FontDescriptor"), i4("/FontName /" + F(r3.fontName)), i4("/FontFile2 " + l3 + " 0 R"), i4("/FontBBox " + t3.API.PDFObject.convert(r3.metadata.bbox)), i4("/Flags " + r3.metadata.flags), i4("/StemV " + r3.metadata.stemV), i4("/ItalicAngle " + r3.metadata.italicAngle), i4("/Ascent " + r3.metadata.ascender), i4("/Descent " + r3.metadata.decender), i4("/CapHeight " + r3.metadata.capHeight), i4(">>"), i4("endobj");
            var p3 = a3();
            i4("<<"), i4("/Type /Font"), i4("/BaseFont /" + F(r3.fontName)), i4("/FontDescriptor " + d2 + " 0 R"), i4("/W " + t3.API.PDFObject.convert(s3)), i4("/CIDToGIDMap /Identity"), i4("/DW 1000"), i4("/Subtype /CIDFontType2"), i4("/CIDSystemInfo"), i4("<<"), i4("/Supplement 0"), i4("/Registry (Adobe)"), i4("/Ordering (" + r3.encoding + ")"), i4(">>"), i4(">>"), i4("endobj"), r3.objectNumber = a3(), i4("<<"), i4("/Type /Font"), i4("/Subtype /Type0"), i4("/ToUnicode " + f3 + " 0 R"), i4("/BaseFont /" + F(r3.fontName)), i4("/Encoding /" + r3.encoding), i4("/DescendantFonts [" + p3 + " 0 R]"), i4(">>"), i4("endobj"), r3.isAlreadyPutted = true;
          }
        }(e3);
      }]);
      e2.events.push(["putFont", function(e3) {
        !function(e4) {
          var r3 = e4.font, i4 = e4.out, a3 = e4.newObject, o3 = e4.putStream;
          if (r3.metadata instanceof t3.API.TTFFont && "WinAnsiEncoding" === r3.encoding) {
            for (var s3 = r3.metadata.rawData, c4 = "", u3 = 0; u3 < s3.length; u3++) c4 += String.fromCharCode(s3[u3]);
            var h3 = a3();
            o3({ data: c4, addLength1: true, objectId: h3 }), i4("endobj");
            var l3 = a3();
            o3({ data: n3(r3.metadata.toUnicode), addLength1: true, objectId: l3 }), i4("endobj");
            var f3 = a3();
            i4("<<"), i4("/Descent " + r3.metadata.decender), i4("/CapHeight " + r3.metadata.capHeight), i4("/StemV " + r3.metadata.stemV), i4("/Type /FontDescriptor"), i4("/FontFile2 " + h3 + " 0 R"), i4("/Flags 96"), i4("/FontBBox " + t3.API.PDFObject.convert(r3.metadata.bbox)), i4("/FontName /" + F(r3.fontName)), i4("/ItalicAngle " + r3.metadata.italicAngle), i4("/Ascent " + r3.metadata.ascender), i4(">>"), i4("endobj"), r3.objectNumber = a3();
            for (var d2 = 0; d2 < r3.metadata.hmtx.widths.length; d2++) r3.metadata.hmtx.widths[d2] = parseInt(r3.metadata.hmtx.widths[d2] * (1e3 / r3.metadata.head.unitsPerEm));
            i4("<</Subtype/TrueType/Type/Font/ToUnicode " + l3 + " 0 R/BaseFont/" + F(r3.fontName) + "/FontDescriptor " + f3 + " 0 R/Encoding/" + r3.encoding + " /FirstChar 29 /LastChar 255 /Widths " + t3.API.PDFObject.convert(r3.metadata.hmtx.widths) + ">>"), i4("endobj"), r3.isAlreadyPutted = true;
          }
        }(e3);
      }]);
      var i33 = /* @__PURE__ */ __name2(function(t4) {
        var e3, n4 = t4.text || "", i4 = t4.x, a3 = t4.y, o3 = t4.options || {}, s3 = t4.mutex || {}, c4 = s3.pdfEscape, u3 = s3.activeFontKey, h3 = s3.fonts, l3 = u3, f3 = "", d2 = 0, p3 = "", g2 = h3[l3].encoding;
        if ("Identity-H" !== h3[l3].encoding) return { text: n4, x: i4, y: a3, options: o3, mutex: s3 };
        for (p3 = n4, l3 = u3, Array.isArray(n4) && (p3 = n4[0]), d2 = 0; d2 < p3.length; d2 += 1) h3[l3].metadata.hasOwnProperty("cmap") && (e3 = h3[l3].metadata.cmap.unicode.codeMap[p3[d2].charCodeAt(0)]), e3 || p3[d2].charCodeAt(0) < 256 && h3[l3].metadata.hasOwnProperty("Unicode") ? f3 += p3[d2] : f3 += "";
        var m4 = "";
        return parseInt(l3.slice(1)) < 14 || "WinAnsiEncoding" === g2 ? m4 = c4(f3, l3).split("").map(function(t5) {
          return t5.charCodeAt(0).toString(16);
        }).join("") : "Identity-H" === g2 && (m4 = r2(f3, h3[l3])), s3.isHex = true, { text: m4, x: i4, y: a3, options: o3, mutex: s3 };
      }, "i");
      e2.events.push(["postProcessText", function(t4) {
        var e3 = t4.text || "", r3 = [], n4 = { text: e3, x: t4.x, y: t4.y, options: t4.options, mutex: t4.mutex };
        if (Array.isArray(e3)) {
          var a3 = 0;
          for (a3 = 0; a3 < e3.length; a3 += 1) Array.isArray(e3[a3]) && 3 === e3[a3].length ? r3.push([i33(Object.assign({}, n4, { text: e3[a3][0] })).text, e3[a3][1], e3[a3][2]]) : r3.push(i33(Object.assign({}, n4, { text: e3[a3] })).text);
          t4.text = r3;
        } else t4.text = i33(Object.assign({}, n4, { text: e3 })).text;
      }]);
    }(E), /**
    * @license
    * jsPDF virtual FileSystem functionality
    *
    * Licensed under the MIT License.
    * http://opensource.org/licenses/mit-license
    */
    function(t3) {
      var e2 = /* @__PURE__ */ __name2(function() {
        return void 0 === this.internal.vFS && (this.internal.vFS = {}), true;
      }, "e");
      t3.existsFileInVFS = function(t4) {
        return e2.call(this), void 0 !== this.internal.vFS[t4];
      }, t3.addFileToVFS = function(t4, r2) {
        return e2.call(this), this.internal.vFS[t4] = r2, this;
      }, t3.getFileFromVFS = function(t4) {
        return e2.call(this), void 0 !== this.internal.vFS[t4] ? this.internal.vFS[t4] : null;
      };
    }(E.API), /**
    * @license
    * Unicode Bidi Engine based on the work of Alex Shensis (@asthensis)
    * MIT License
    */
    function(t3) {
      t3.__bidiEngine__ = t3.prototype.__bidiEngine__ = function(t4) {
        var r3, n3, i33, a3, o3, s3, c4, u3 = e2, h3 = [[0, 3, 0, 1, 0, 0, 0], [0, 3, 0, 1, 2, 2, 0], [0, 3, 0, 17, 2, 0, 1], [0, 3, 5, 5, 4, 1, 0], [0, 3, 21, 21, 4, 0, 1], [0, 3, 5, 5, 4, 2, 0]], l3 = [[2, 0, 1, 1, 0, 1, 0], [2, 0, 1, 1, 0, 2, 0], [2, 0, 2, 1, 3, 2, 0], [2, 0, 2, 33, 3, 1, 1]], f3 = { L: 0, R: 1, EN: 2, AN: 3, N: 4, B: 5, S: 6 }, d2 = { 0: 0, 5: 1, 6: 2, 7: 3, 32: 4, 251: 5, 254: 6, 255: 7 }, p3 = ["(", ")", "(", "<", ">", "<", "[", "]", "[", "{", "}", "{", "\xAB", "\xBB", "\xAB", "\u2039", "\u203A", "\u2039", "\u2045", "\u2046", "\u2045", "\u207D", "\u207E", "\u207D", "\u208D", "\u208E", "\u208D", "\u2264", "\u2265", "\u2264", "\u2329", "\u232A", "\u2329", "\uFE59", "\uFE5A", "\uFE59", "\uFE5B", "\uFE5C", "\uFE5B", "\uFE5D", "\uFE5E", "\uFE5D", "\uFE64", "\uFE65", "\uFE64"], g2 = new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/), m4 = false, v3 = 0;
        this.__bidiEngine__ = {};
        var b2 = /* @__PURE__ */ __name2(function(t5) {
          var e3 = t5.charCodeAt(), r4 = e3 >> 8, n4 = d2[r4];
          return void 0 !== n4 ? u3[256 * n4 + (255 & e3)] : 252 === r4 || 253 === r4 ? "AL" : g2.test(r4) ? "L" : 8 === r4 ? "R" : "N";
        }, "b"), y3 = /* @__PURE__ */ __name2(function(t5) {
          for (var e3, r4 = 0; r4 < t5.length; r4++) {
            if ("L" === (e3 = b2(t5.charAt(r4)))) return false;
            if ("R" === e3) return true;
          }
          return false;
        }, "y"), w2 = /* @__PURE__ */ __name2(function(t5, e3, o4, s4) {
          var c5, u4, h4, l4, f4 = e3[s4];
          switch (f4) {
            case "L":
            case "R":
              m4 = false;
              break;
            case "N":
            case "AN":
              break;
            case "EN":
              m4 && (f4 = "AN");
              break;
            case "AL":
              m4 = true, f4 = "R";
              break;
            case "WS":
              f4 = "N";
              break;
            case "CS":
              s4 < 1 || s4 + 1 >= e3.length || "EN" !== (c5 = o4[s4 - 1]) && "AN" !== c5 || "EN" !== (u4 = e3[s4 + 1]) && "AN" !== u4 ? f4 = "N" : m4 && (u4 = "AN"), f4 = u4 === c5 ? u4 : "N";
              break;
            case "ES":
              f4 = "EN" === (c5 = s4 > 0 ? o4[s4 - 1] : "B") && s4 + 1 < e3.length && "EN" === e3[s4 + 1] ? "EN" : "N";
              break;
            case "ET":
              if (s4 > 0 && "EN" === o4[s4 - 1]) {
                f4 = "EN";
                break;
              }
              if (m4) {
                f4 = "N";
                break;
              }
              for (h4 = s4 + 1, l4 = e3.length; h4 < l4 && "ET" === e3[h4]; ) h4++;
              f4 = h4 < l4 && "EN" === e3[h4] ? "EN" : "N";
              break;
            case "NSM":
              if (i33 && !a3) {
                for (l4 = e3.length, h4 = s4 + 1; h4 < l4 && "NSM" === e3[h4]; ) h4++;
                if (h4 < l4) {
                  var d3 = t5[s4], p4 = d3 >= 1425 && d3 <= 2303 || 64286 === d3;
                  if (c5 = e3[h4], p4 && ("R" === c5 || "AL" === c5)) {
                    f4 = "R";
                    break;
                  }
                }
              }
              f4 = s4 < 1 || "B" === (c5 = e3[s4 - 1]) ? "N" : o4[s4 - 1];
              break;
            case "B":
              m4 = false, r3 = true, f4 = v3;
              break;
            case "S":
              n3 = true, f4 = "N";
              break;
            case "LRE":
            case "RLE":
            case "LRO":
            case "RLO":
            case "PDF":
              m4 = false;
              break;
            case "BN":
              f4 = "N";
          }
          return f4;
        }, "w"), N3 = /* @__PURE__ */ __name2(function(t5, e3, r4) {
          var n4 = t5.split("");
          return r4 && L2(n4, r4, { hiLevel: v3 }), n4.reverse(), e3 && e3.reverse(), n4.join("");
        }, "N"), L2 = /* @__PURE__ */ __name2(function(t5, e3, i4) {
          var a4, o4, s4, c5, u4, d3 = -1, p4 = t5.length, g3 = 0, y4 = [], N4 = v3 ? l3 : h3, L3 = [];
          for (m4 = false, r3 = false, n3 = false, o4 = 0; o4 < p4; o4++) L3[o4] = b2(t5[o4]);
          for (s4 = 0; s4 < p4; s4++) {
            if (u4 = g3, y4[s4] = w2(t5, L3, y4, s4), a4 = 240 & (g3 = N4[u4][f3[y4[s4]]]), g3 &= 15, e3[s4] = c5 = N4[g3][5], a4 > 0) if (16 === a4) {
              for (o4 = d3; o4 < s4; o4++) e3[o4] = 1;
              d3 = -1;
            } else d3 = -1;
            if (N4[g3][6]) -1 === d3 && (d3 = s4);
            else if (d3 > -1) {
              for (o4 = d3; o4 < s4; o4++) e3[o4] = c5;
              d3 = -1;
            }
            "B" === L3[s4] && (e3[s4] = 0), i4.hiLevel |= c5;
          }
          n3 && function(t6, e4, r4) {
            for (var n4 = 0; n4 < r4; n4++) if ("S" === t6[n4]) {
              e4[n4] = v3;
              for (var i5 = n4 - 1; i5 >= 0 && "WS" === t6[i5]; i5--) e4[i5] = v3;
            }
          }(L3, e3, p4);
        }, "L"), A2 = /* @__PURE__ */ __name2(function(t5, e3, n4, i4, a4) {
          if (!(a4.hiLevel < t5)) {
            if (1 === t5 && 1 === v3 && !r3) return e3.reverse(), void (n4 && n4.reverse());
            for (var o4, s4, c5, u4, h4 = e3.length, l4 = 0; l4 < h4; ) {
              if (i4[l4] >= t5) {
                for (c5 = l4 + 1; c5 < h4 && i4[c5] >= t5; ) c5++;
                for (u4 = l4, s4 = c5 - 1; u4 < s4; u4++, s4--) o4 = e3[u4], e3[u4] = e3[s4], e3[s4] = o4, n4 && (o4 = n4[u4], n4[u4] = n4[s4], n4[s4] = o4);
                l4 = c5;
              }
              l4++;
            }
          }
        }, "A"), x22 = /* @__PURE__ */ __name2(function(t5, e3, r4) {
          var n4 = t5.split(""), i4 = { hiLevel: v3 };
          return r4 || (r4 = []), L2(n4, r4, i4), function(t6, e4, r5) {
            if (0 !== r5.hiLevel && c4) for (var n5, i5 = 0; i5 < t6.length; i5++) 1 === e4[i5] && (n5 = p3.indexOf(t6[i5])) >= 0 && (t6[i5] = p3[n5 + 1]);
          }(n4, r4, i4), A2(2, n4, e3, r4, i4), A2(1, n4, e3, r4, i4), n4.join("");
        }, "x");
        return this.__bidiEngine__.doBidiReorder = function(t5, e3, r4) {
          if (function(t6, e4) {
            if (e4) for (var r5 = 0; r5 < t6.length; r5++) e4[r5] = r5;
            void 0 === a3 && (a3 = y3(t6)), void 0 === s3 && (s3 = y3(t6));
          }(t5, e3), i33 || !o3 || s3) if (i33 && o3 && a3 ^ s3) v3 = a3 ? 1 : 0, t5 = N3(t5, e3, r4);
          else if (!i33 && o3 && s3) v3 = a3 ? 1 : 0, t5 = x22(t5, e3, r4), t5 = N3(t5, e3);
          else if (!i33 || a3 || o3 || s3) {
            if (i33 && !o3 && a3 ^ s3) t5 = N3(t5, e3), a3 ? (v3 = 0, t5 = x22(t5, e3, r4)) : (v3 = 1, t5 = x22(t5, e3, r4), t5 = N3(t5, e3));
            else if (i33 && a3 && !o3 && s3) v3 = 1, t5 = x22(t5, e3, r4), t5 = N3(t5, e3);
            else if (!i33 && !o3 && a3 ^ s3) {
              var n4 = c4;
              a3 ? (v3 = 1, t5 = x22(t5, e3, r4), v3 = 0, c4 = false, t5 = x22(t5, e3, r4), c4 = n4) : (v3 = 0, t5 = x22(t5, e3, r4), t5 = N3(t5, e3), v3 = 1, c4 = false, t5 = x22(t5, e3, r4), c4 = n4, t5 = N3(t5, e3));
            }
          } else v3 = 0, t5 = x22(t5, e3, r4);
          else v3 = a3 ? 1 : 0, t5 = x22(t5, e3, r4);
          return t5;
        }, this.__bidiEngine__.setOptions = function(t5) {
          t5 && (i33 = t5.isInputVisual, o3 = t5.isOutputVisual, a3 = t5.isInputRtl, s3 = t5.isOutputRtl, c4 = t5.isSymmetricSwapping);
        }, this.__bidiEngine__.setOptions(t4), this.__bidiEngine__;
      };
      var e2 = ["BN", "BN", "BN", "BN", "BN", "BN", "BN", "BN", "BN", "S", "B", "S", "WS", "B", "BN", "BN", "BN", "BN", "BN", "BN", "BN", "BN", "BN", "BN", "BN", "BN", "BN", "BN", "B", "B", "B", "S", "WS", "N", "N", "ET", "ET", "ET", "N", "N", "N", "N", "N", "ES", "CS", "ES", "CS", "CS", "EN", "EN", "EN", "EN", "EN", "EN", "EN", "EN", "EN", "EN", "CS", "N", "N", "N", "N", "N", "N", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "N", "N", "N", "N", "N", "N", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "N", "N", "N", "N", "BN", "BN", "BN", "BN", "BN", "BN", "B", "BN", "BN", "BN", "BN", "BN", "BN", "BN", "BN", "BN", "BN", "BN", "BN", "BN", "BN", "BN", "BN", "BN", "BN", "BN", "BN", "BN", "BN", "BN", "BN", "BN", "BN", "CS", "N", "ET", "ET", "ET", "ET", "N", "N", "N", "N", "L", "N", "N", "BN", "N", "N", "ET", "ET", "EN", "EN", "N", "L", "N", "N", "N", "EN", "L", "N", "N", "N", "N", "N", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "N", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "N", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "N", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "N", "N", "L", "L", "L", "L", "L", "L", "L", "N", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "N", "L", "N", "N", "N", "N", "N", "ET", "N", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "R", "NSM", "R", "NSM", "NSM", "R", "NSM", "NSM", "R", "NSM", "N", "N", "N", "N", "N", "N", "N", "N", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "N", "N", "N", "N", "N", "R", "R", "R", "R", "R", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "AN", "AN", "AN", "AN", "AN", "AN", "N", "N", "AL", "ET", "ET", "AL", "CS", "AL", "N", "N", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "AL", "AL", "N", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "AN", "AN", "AN", "AN", "AN", "AN", "AN", "AN", "AN", "AN", "ET", "AN", "AN", "AL", "AL", "AL", "NSM", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "AN", "N", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "AL", "AL", "NSM", "NSM", "N", "NSM", "NSM", "NSM", "NSM", "AL", "AL", "EN", "EN", "EN", "EN", "EN", "EN", "EN", "EN", "EN", "EN", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "N", "AL", "AL", "NSM", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "N", "N", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "AL", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "R", "R", "N", "N", "N", "N", "R", "N", "N", "N", "N", "N", "WS", "WS", "WS", "WS", "WS", "WS", "WS", "WS", "WS", "WS", "WS", "BN", "BN", "BN", "L", "R", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "WS", "B", "LRE", "RLE", "PDF", "LRO", "RLO", "CS", "ET", "ET", "ET", "ET", "ET", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "CS", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "WS", "BN", "BN", "BN", "BN", "BN", "N", "LRI", "RLI", "FSI", "PDI", "BN", "BN", "BN", "BN", "BN", "BN", "EN", "L", "N", "N", "EN", "EN", "EN", "EN", "EN", "EN", "ES", "ES", "N", "N", "N", "L", "EN", "EN", "EN", "EN", "EN", "EN", "EN", "EN", "EN", "EN", "ES", "ES", "N", "N", "N", "N", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "N", "N", "N", "ET", "ET", "ET", "ET", "ET", "ET", "ET", "ET", "ET", "ET", "ET", "ET", "ET", "ET", "ET", "ET", "ET", "ET", "ET", "ET", "ET", "ET", "ET", "ET", "ET", "ET", "ET", "ET", "ET", "ET", "ET", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "L", "L", "L", "L", "L", "L", "L", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "L", "L", "L", "L", "L", "N", "N", "N", "N", "N", "R", "NSM", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "ES", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "N", "R", "R", "R", "R", "R", "N", "R", "N", "R", "R", "N", "R", "R", "N", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "CS", "N", "CS", "N", "N", "CS", "N", "N", "N", "N", "N", "N", "N", "N", "N", "ET", "N", "N", "ES", "ES", "N", "N", "N", "N", "N", "ET", "ET", "N", "N", "N", "N", "N", "AL", "AL", "AL", "AL", "AL", "N", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "N", "N", "BN", "N", "N", "N", "ET", "ET", "ET", "N", "N", "N", "N", "N", "ES", "CS", "ES", "CS", "CS", "EN", "EN", "EN", "EN", "EN", "EN", "EN", "EN", "EN", "EN", "CS", "N", "N", "N", "N", "N", "N", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "N", "N", "N", "N", "N", "N", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "N", "N", "N", "L", "L", "L", "L", "L", "L", "N", "N", "L", "L", "L", "L", "L", "L", "N", "N", "L", "L", "L", "L", "L", "L", "N", "N", "L", "L", "L", "N", "N", "N", "ET", "ET", "N", "N", "N", "ET", "ET", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N"], r2 = new t3.__bidiEngine__({ isInputVisual: true });
      t3.API.events.push(["postProcessText", function(t4) {
        var e3 = t4.text;
        t4.x, t4.y;
        var n3 = t4.options || {};
        t4.mutex, n3.lang;
        var i33 = [];
        if (n3.isInputVisual = "boolean" != typeof n3.isInputVisual || n3.isInputVisual, r2.setOptions(n3), "[object Array]" === Object.prototype.toString.call(e3)) {
          var a3 = 0;
          for (i33 = [], a3 = 0; a3 < e3.length; a3 += 1) "[object Array]" === Object.prototype.toString.call(e3[a3]) ? i33.push([r2.doBidiReorder(e3[a3][0]), e3[a3][1], e3[a3][2]]) : i33.push([r2.doBidiReorder(e3[a3])]);
          t4.text = i33;
        } else t4.text = r2.doBidiReorder(e3);
        r2.setOptions({ isInputVisual: true });
      }]);
    }(E), E.API.TTFFont = function() {
      function t3(t4) {
        var e2;
        if (this.rawData = t4, e2 = this.contents = new ne(t4), this.contents.pos = 4, "ttcf" === e2.readString(4)) throw new Error("TTCF not supported.");
        e2.pos = 0, this.parse(), this.subset = new Le(this), this.registerTTF();
      }
      __name(t3, "t3");
      __name2(t3, "t");
      return t3.open = function(e2) {
        return new t3(e2);
      }, t3.prototype.parse = function() {
        return this.directory = new ie(this.contents), this.head = new se(this), this.name = new pe(this), this.cmap = new ue(this), this.toUnicode = {}, this.hhea = new he(this), this.maxp = new ge(this), this.hmtx = new me(this), this.post = new fe(this), this.os2 = new le(this), this.loca = new Ne(this), this.glyf = new be(this), this.ascender = this.os2.exists && this.os2.ascender || this.hhea.ascender, this.decender = this.os2.exists && this.os2.decender || this.hhea.decender, this.lineGap = this.os2.exists && this.os2.lineGap || this.hhea.lineGap, this.bbox = [this.head.xMin, this.head.yMin, this.head.xMax, this.head.yMax];
      }, t3.prototype.registerTTF = function() {
        var t4, e2, r2, n3, i33;
        if (this.scaleFactor = 1e3 / this.head.unitsPerEm, this.bbox = function() {
          var e3, r3, n4, i4;
          for (i4 = [], e3 = 0, r3 = (n4 = this.bbox).length; e3 < r3; e3++) t4 = n4[e3], i4.push(Math.round(t4 * this.scaleFactor));
          return i4;
        }.call(this), this.stemV = 0, this.post.exists ? (r2 = 255 & (n3 = this.post.italic_angle), 0 != (32768 & (e2 = n3 >> 16)) && (e2 = -(1 + (65535 ^ e2))), this.italicAngle = +(e2 + "." + r2)) : this.italicAngle = 0, this.ascender = Math.round(this.ascender * this.scaleFactor), this.decender = Math.round(this.decender * this.scaleFactor), this.lineGap = Math.round(this.lineGap * this.scaleFactor), this.capHeight = this.os2.exists && this.os2.capHeight || this.ascender, this.xHeight = this.os2.exists && this.os2.xHeight || 0, this.familyClass = (this.os2.exists && this.os2.familyClass || 0) >> 8, this.isSerif = 1 === (i33 = this.familyClass) || 2 === i33 || 3 === i33 || 4 === i33 || 5 === i33 || 7 === i33, this.isScript = 10 === this.familyClass, this.flags = 0, this.post.isFixedPitch && (this.flags |= 1), this.isSerif && (this.flags |= 2), this.isScript && (this.flags |= 8), 0 !== this.italicAngle && (this.flags |= 64), this.flags |= 32, !this.cmap.unicode) throw new Error("No unicode cmap for font");
      }, t3.prototype.characterToGlyph = function(t4) {
        var e2;
        return (null != (e2 = this.cmap.unicode) ? e2.codeMap[t4] : void 0) || 0;
      }, t3.prototype.widthOfGlyph = function(t4) {
        var e2;
        return e2 = 1e3 / this.head.unitsPerEm, this.hmtx.forGlyph(t4).advance * e2;
      }, t3.prototype.widthOfString = function(t4, e2, r2) {
        var n3, i33, a3, o3;
        for (a3 = 0, i33 = 0, o3 = (t4 = "" + t4).length; 0 <= o3 ? i33 < o3 : i33 > o3; i33 = 0 <= o3 ? ++i33 : --i33) n3 = t4.charCodeAt(i33), a3 += this.widthOfGlyph(this.characterToGlyph(n3)) + r2 * (1e3 / e2) || 0;
        return a3 * (e2 / 1e3);
      }, t3.prototype.lineHeight = function(t4, e2) {
        var r2;
        return null == e2 && (e2 = false), r2 = e2 ? this.lineGap : 0, (this.ascender + r2 - this.decender) / 1e3 * t4;
      }, t3;
    }();
    ne = function() {
      function t3(t4) {
        this.data = null != t4 ? t4 : [], this.pos = 0, this.length = this.data.length;
      }
      __name(t3, "t3");
      __name2(t3, "t");
      return t3.prototype.readByte = function() {
        return this.data[this.pos++];
      }, t3.prototype.writeByte = function(t4) {
        return this.data[this.pos++] = t4;
      }, t3.prototype.readUInt32 = function() {
        return 16777216 * this.readByte() + (this.readByte() << 16) + (this.readByte() << 8) + this.readByte();
      }, t3.prototype.writeUInt32 = function(t4) {
        return this.writeByte(t4 >>> 24 & 255), this.writeByte(t4 >> 16 & 255), this.writeByte(t4 >> 8 & 255), this.writeByte(255 & t4);
      }, t3.prototype.readInt32 = function() {
        var t4;
        return (t4 = this.readUInt32()) >= 2147483648 ? t4 - 4294967296 : t4;
      }, t3.prototype.writeInt32 = function(t4) {
        return t4 < 0 && (t4 += 4294967296), this.writeUInt32(t4);
      }, t3.prototype.readUInt16 = function() {
        return this.readByte() << 8 | this.readByte();
      }, t3.prototype.writeUInt16 = function(t4) {
        return this.writeByte(t4 >> 8 & 255), this.writeByte(255 & t4);
      }, t3.prototype.readInt16 = function() {
        var t4;
        return (t4 = this.readUInt16()) >= 32768 ? t4 - 65536 : t4;
      }, t3.prototype.writeInt16 = function(t4) {
        return t4 < 0 && (t4 += 65536), this.writeUInt16(t4);
      }, t3.prototype.readString = function(t4) {
        var e2, r2;
        for (r2 = [], e2 = 0; 0 <= t4 ? e2 < t4 : e2 > t4; e2 = 0 <= t4 ? ++e2 : --e2) r2[e2] = String.fromCharCode(this.readByte());
        return r2.join("");
      }, t3.prototype.writeString = function(t4) {
        var e2, r2, n3;
        for (n3 = [], e2 = 0, r2 = t4.length; 0 <= r2 ? e2 < r2 : e2 > r2; e2 = 0 <= r2 ? ++e2 : --e2) n3.push(this.writeByte(t4.charCodeAt(e2)));
        return n3;
      }, t3.prototype.readShort = function() {
        return this.readInt16();
      }, t3.prototype.writeShort = function(t4) {
        return this.writeInt16(t4);
      }, t3.prototype.readLongLong = function() {
        var t4, e2, r2, n3, i33, a3, o3, s3;
        return t4 = this.readByte(), e2 = this.readByte(), r2 = this.readByte(), n3 = this.readByte(), i33 = this.readByte(), a3 = this.readByte(), o3 = this.readByte(), s3 = this.readByte(), 128 & t4 ? -1 * (72057594037927940 * (255 ^ t4) + 281474976710656 * (255 ^ e2) + 1099511627776 * (255 ^ r2) + 4294967296 * (255 ^ n3) + 16777216 * (255 ^ i33) + 65536 * (255 ^ a3) + 256 * (255 ^ o3) + (255 ^ s3) + 1) : 72057594037927940 * t4 + 281474976710656 * e2 + 1099511627776 * r2 + 4294967296 * n3 + 16777216 * i33 + 65536 * a3 + 256 * o3 + s3;
      }, t3.prototype.writeLongLong = function(t4) {
        var e2, r2;
        return e2 = Math.floor(t4 / 4294967296), r2 = 4294967295 & t4, this.writeByte(e2 >> 24 & 255), this.writeByte(e2 >> 16 & 255), this.writeByte(e2 >> 8 & 255), this.writeByte(255 & e2), this.writeByte(r2 >> 24 & 255), this.writeByte(r2 >> 16 & 255), this.writeByte(r2 >> 8 & 255), this.writeByte(255 & r2);
      }, t3.prototype.readInt = function() {
        return this.readInt32();
      }, t3.prototype.writeInt = function(t4) {
        return this.writeInt32(t4);
      }, t3.prototype.read = function(t4) {
        var e2, r2;
        for (e2 = [], r2 = 0; 0 <= t4 ? r2 < t4 : r2 > t4; r2 = 0 <= t4 ? ++r2 : --r2) e2.push(this.readByte());
        return e2;
      }, t3.prototype.write = function(t4) {
        var e2, r2, n3, i33;
        for (i33 = [], r2 = 0, n3 = t4.length; r2 < n3; r2++) e2 = t4[r2], i33.push(this.writeByte(e2));
        return i33;
      }, t3;
    }();
    ie = function() {
      var t3;
      function e2(t4) {
        var e3, r2, n3;
        for (this.scalarType = t4.readInt(), this.tableCount = t4.readShort(), this.searchRange = t4.readShort(), this.entrySelector = t4.readShort(), this.rangeShift = t4.readShort(), this.tables = {}, r2 = 0, n3 = this.tableCount; 0 <= n3 ? r2 < n3 : r2 > n3; r2 = 0 <= n3 ? ++r2 : --r2) e3 = { tag: t4.readString(4), checksum: t4.readInt(), offset: t4.readInt(), length: t4.readInt() }, this.tables[e3.tag] = e3;
      }
      __name(e2, "e2");
      __name2(e2, "e");
      return e2.prototype.encode = function(e3) {
        var r2, n3, i33, a3, o3, s3, c4, u3, h3, l3, f3, d2, p3;
        for (p3 in f3 = Object.keys(e3).length, s3 = Math.log(2), h3 = 16 * Math.floor(Math.log(f3) / s3), a3 = Math.floor(h3 / s3), u3 = 16 * f3 - h3, (n3 = new ne()).writeInt(this.scalarType), n3.writeShort(f3), n3.writeShort(h3), n3.writeShort(a3), n3.writeShort(u3), i33 = 16 * f3, c4 = n3.pos + i33, o3 = null, d2 = [], e3) for (l3 = e3[p3], n3.writeString(p3), n3.writeInt(t3(l3)), n3.writeInt(c4), n3.writeInt(l3.length), d2 = d2.concat(l3), "head" === p3 && (o3 = c4), c4 += l3.length; c4 % 4; ) d2.push(0), c4++;
        return n3.write(d2), r2 = 2981146554 - t3(n3.data), n3.pos = o3 + 8, n3.writeUInt32(r2), n3.data;
      }, t3 = /* @__PURE__ */ __name2(function(t4) {
        var e3, r2, n3, i33;
        for (t4 = ve.call(t4); t4.length % 4; ) t4.push(0);
        for (n3 = new ne(t4), r2 = 0, e3 = 0, i33 = t4.length; e3 < i33; e3 = e3 += 4) r2 += n3.readUInt32();
        return 4294967295 & r2;
      }, "t"), e2;
    }();
    ae = {}.hasOwnProperty;
    oe = /* @__PURE__ */ __name2(function(t3, e2) {
      for (var r2 in e2) ae.call(e2, r2) && (t3[r2] = e2[r2]);
      function n3() {
        this.constructor = t3;
      }
      __name(n3, "n3");
      __name2(n3, "n");
      return n3.prototype = e2.prototype, t3.prototype = new n3(), t3.__super__ = e2.prototype, t3;
    }, "oe");
    re = function() {
      function t3(t4) {
        var e2;
        this.file = t4, e2 = this.file.directory.tables[this.tag], this.exists = !!e2, e2 && (this.offset = e2.offset, this.length = e2.length, this.parse(this.file.contents));
      }
      __name(t3, "t3");
      __name2(t3, "t");
      return t3.prototype.parse = function() {
      }, t3.prototype.encode = function() {
      }, t3.prototype.raw = function() {
        return this.exists ? (this.file.contents.pos = this.offset, this.file.contents.read(this.length)) : null;
      }, t3;
    }();
    se = function(t3) {
      function e2() {
        return e2.__super__.constructor.apply(this, arguments);
      }
      __name(e2, "e2");
      __name2(e2, "e");
      return oe(e2, re), e2.prototype.tag = "head", e2.prototype.parse = function(t4) {
        return t4.pos = this.offset, this.version = t4.readInt(), this.revision = t4.readInt(), this.checkSumAdjustment = t4.readInt(), this.magicNumber = t4.readInt(), this.flags = t4.readShort(), this.unitsPerEm = t4.readShort(), this.created = t4.readLongLong(), this.modified = t4.readLongLong(), this.xMin = t4.readShort(), this.yMin = t4.readShort(), this.xMax = t4.readShort(), this.yMax = t4.readShort(), this.macStyle = t4.readShort(), this.lowestRecPPEM = t4.readShort(), this.fontDirectionHint = t4.readShort(), this.indexToLocFormat = t4.readShort(), this.glyphDataFormat = t4.readShort();
      }, e2.prototype.encode = function(t4) {
        var e3;
        return (e3 = new ne()).writeInt(this.version), e3.writeInt(this.revision), e3.writeInt(this.checkSumAdjustment), e3.writeInt(this.magicNumber), e3.writeShort(this.flags), e3.writeShort(this.unitsPerEm), e3.writeLongLong(this.created), e3.writeLongLong(this.modified), e3.writeShort(this.xMin), e3.writeShort(this.yMin), e3.writeShort(this.xMax), e3.writeShort(this.yMax), e3.writeShort(this.macStyle), e3.writeShort(this.lowestRecPPEM), e3.writeShort(this.fontDirectionHint), e3.writeShort(t4), e3.writeShort(this.glyphDataFormat), e3.data;
      }, e2;
    }();
    ce = function() {
      function t3(t4, e2) {
        var r2, n3, i33, a3, o3, s3, c4, u3, h3, l3, f3, d2, p3, g2, m4, v3, b2;
        switch (this.platformID = t4.readUInt16(), this.encodingID = t4.readShort(), this.offset = e2 + t4.readInt(), h3 = t4.pos, t4.pos = this.offset, this.format = t4.readUInt16(), this.length = t4.readUInt16(), this.language = t4.readUInt16(), this.isUnicode = 3 === this.platformID && 1 === this.encodingID && 4 === this.format || 0 === this.platformID && 4 === this.format, this.codeMap = {}, this.format) {
          case 0:
            for (s3 = 0; s3 < 256; ++s3) this.codeMap[s3] = t4.readByte();
            break;
          case 4:
            for (f3 = t4.readUInt16(), l3 = f3 / 2, t4.pos += 6, i33 = function() {
              var e3, r3;
              for (r3 = [], s3 = e3 = 0; 0 <= l3 ? e3 < l3 : e3 > l3; s3 = 0 <= l3 ? ++e3 : --e3) r3.push(t4.readUInt16());
              return r3;
            }(), t4.pos += 2, p3 = function() {
              var e3, r3;
              for (r3 = [], s3 = e3 = 0; 0 <= l3 ? e3 < l3 : e3 > l3; s3 = 0 <= l3 ? ++e3 : --e3) r3.push(t4.readUInt16());
              return r3;
            }(), c4 = function() {
              var e3, r3;
              for (r3 = [], s3 = e3 = 0; 0 <= l3 ? e3 < l3 : e3 > l3; s3 = 0 <= l3 ? ++e3 : --e3) r3.push(t4.readUInt16());
              return r3;
            }(), u3 = function() {
              var e3, r3;
              for (r3 = [], s3 = e3 = 0; 0 <= l3 ? e3 < l3 : e3 > l3; s3 = 0 <= l3 ? ++e3 : --e3) r3.push(t4.readUInt16());
              return r3;
            }(), n3 = (this.length - t4.pos + this.offset) / 2, o3 = function() {
              var e3, r3;
              for (r3 = [], s3 = e3 = 0; 0 <= n3 ? e3 < n3 : e3 > n3; s3 = 0 <= n3 ? ++e3 : --e3) r3.push(t4.readUInt16());
              return r3;
            }(), s3 = m4 = 0, b2 = i33.length; m4 < b2; s3 = ++m4) for (g2 = i33[s3], r2 = v3 = d2 = p3[s3]; d2 <= g2 ? v3 <= g2 : v3 >= g2; r2 = d2 <= g2 ? ++v3 : --v3) 0 === u3[s3] ? a3 = r2 + c4[s3] : 0 !== (a3 = o3[u3[s3] / 2 + (r2 - d2) - (l3 - s3)] || 0) && (a3 += c4[s3]), this.codeMap[r2] = 65535 & a3;
        }
        t4.pos = h3;
      }
      __name(t3, "t3");
      __name2(t3, "t");
      return t3.encode = function(t4, e2) {
        var r2, n3, i33, a3, o3, s3, c4, u3, h3, l3, f3, d2, p3, g2, m4, v3, b2, y3, w2, N3, L2, A2, x22, S2, _3, P2, k2, I2, F2, C2, j2, O3, B2, M2, E2, q2, D2, R2, T3, U2, z3, H2, W2, V3, G2, Y2;
        switch (I2 = new ne(), a3 = Object.keys(t4).sort(function(t5, e3) {
          return t5 - e3;
        }), e2) {
          case "macroman":
            for (p3 = 0, g2 = function() {
              var t5 = [];
              for (d2 = 0; d2 < 256; ++d2) t5.push(0);
              return t5;
            }(), v3 = { 0: 0 }, i33 = {}, F2 = 0, B2 = a3.length; F2 < B2; F2++) null == v3[W2 = t4[n3 = a3[F2]]] && (v3[W2] = ++p3), i33[n3] = { old: t4[n3], new: v3[t4[n3]] }, g2[n3] = v3[t4[n3]];
            return I2.writeUInt16(1), I2.writeUInt16(0), I2.writeUInt32(12), I2.writeUInt16(0), I2.writeUInt16(262), I2.writeUInt16(0), I2.write(g2), { charMap: i33, subtable: I2.data, maxGlyphID: p3 + 1 };
          case "unicode":
            for (P2 = [], h3 = [], b2 = 0, v3 = {}, r2 = {}, m4 = c4 = null, C2 = 0, M2 = a3.length; C2 < M2; C2++) null == v3[w2 = t4[n3 = a3[C2]]] && (v3[w2] = ++b2), r2[n3] = { old: w2, new: v3[w2] }, o3 = v3[w2] - n3, null != m4 && o3 === c4 || (m4 && h3.push(m4), P2.push(n3), c4 = o3), m4 = n3;
            for (m4 && h3.push(m4), h3.push(65535), P2.push(65535), S2 = 2 * (x22 = P2.length), A2 = 2 * Math.pow(Math.log(x22) / Math.LN2, 2), l3 = Math.log(A2 / 2) / Math.LN2, L2 = 2 * x22 - A2, s3 = [], N3 = [], f3 = [], d2 = j2 = 0, E2 = P2.length; j2 < E2; d2 = ++j2) {
              if (_3 = P2[d2], u3 = h3[d2], 65535 === _3) {
                s3.push(0), N3.push(0);
                break;
              }
              if (_3 - (k2 = r2[_3].new) >= 32768) for (s3.push(0), N3.push(2 * (f3.length + x22 - d2)), n3 = O3 = _3; _3 <= u3 ? O3 <= u3 : O3 >= u3; n3 = _3 <= u3 ? ++O3 : --O3) f3.push(r2[n3].new);
              else s3.push(k2 - _3), N3.push(0);
            }
            for (I2.writeUInt16(3), I2.writeUInt16(1), I2.writeUInt32(12), I2.writeUInt16(4), I2.writeUInt16(16 + 8 * x22 + 2 * f3.length), I2.writeUInt16(0), I2.writeUInt16(S2), I2.writeUInt16(A2), I2.writeUInt16(l3), I2.writeUInt16(L2), z3 = 0, q2 = h3.length; z3 < q2; z3++) n3 = h3[z3], I2.writeUInt16(n3);
            for (I2.writeUInt16(0), H2 = 0, D2 = P2.length; H2 < D2; H2++) n3 = P2[H2], I2.writeUInt16(n3);
            for (V3 = 0, R2 = s3.length; V3 < R2; V3++) o3 = s3[V3], I2.writeUInt16(o3);
            for (G2 = 0, T3 = N3.length; G2 < T3; G2++) y3 = N3[G2], I2.writeUInt16(y3);
            for (Y2 = 0, U2 = f3.length; Y2 < U2; Y2++) p3 = f3[Y2], I2.writeUInt16(p3);
            return { charMap: r2, subtable: I2.data, maxGlyphID: b2 + 1 };
        }
      }, t3;
    }();
    ue = function(t3) {
      function e2() {
        return e2.__super__.constructor.apply(this, arguments);
      }
      __name(e2, "e2");
      __name2(e2, "e");
      return oe(e2, re), e2.prototype.tag = "cmap", e2.prototype.parse = function(t4) {
        var e3, r2, n3;
        for (t4.pos = this.offset, this.version = t4.readUInt16(), n3 = t4.readUInt16(), this.tables = [], this.unicode = null, r2 = 0; 0 <= n3 ? r2 < n3 : r2 > n3; r2 = 0 <= n3 ? ++r2 : --r2) e3 = new ce(t4, this.offset), this.tables.push(e3), e3.isUnicode && null == this.unicode && (this.unicode = e3);
        return true;
      }, e2.encode = function(t4, e3) {
        var r2, n3;
        return null == e3 && (e3 = "macroman"), r2 = ce.encode(t4, e3), (n3 = new ne()).writeUInt16(0), n3.writeUInt16(1), r2.table = n3.data.concat(r2.subtable), r2;
      }, e2;
    }();
    he = function(t3) {
      function e2() {
        return e2.__super__.constructor.apply(this, arguments);
      }
      __name(e2, "e2");
      __name2(e2, "e");
      return oe(e2, re), e2.prototype.tag = "hhea", e2.prototype.parse = function(t4) {
        return t4.pos = this.offset, this.version = t4.readInt(), this.ascender = t4.readShort(), this.decender = t4.readShort(), this.lineGap = t4.readShort(), this.advanceWidthMax = t4.readShort(), this.minLeftSideBearing = t4.readShort(), this.minRightSideBearing = t4.readShort(), this.xMaxExtent = t4.readShort(), this.caretSlopeRise = t4.readShort(), this.caretSlopeRun = t4.readShort(), this.caretOffset = t4.readShort(), t4.pos += 8, this.metricDataFormat = t4.readShort(), this.numberOfMetrics = t4.readUInt16();
      }, e2;
    }();
    le = function(t3) {
      function e2() {
        return e2.__super__.constructor.apply(this, arguments);
      }
      __name(e2, "e2");
      __name2(e2, "e");
      return oe(e2, re), e2.prototype.tag = "OS/2", e2.prototype.parse = function(t4) {
        if (t4.pos = this.offset, this.version = t4.readUInt16(), this.averageCharWidth = t4.readShort(), this.weightClass = t4.readUInt16(), this.widthClass = t4.readUInt16(), this.type = t4.readShort(), this.ySubscriptXSize = t4.readShort(), this.ySubscriptYSize = t4.readShort(), this.ySubscriptXOffset = t4.readShort(), this.ySubscriptYOffset = t4.readShort(), this.ySuperscriptXSize = t4.readShort(), this.ySuperscriptYSize = t4.readShort(), this.ySuperscriptXOffset = t4.readShort(), this.ySuperscriptYOffset = t4.readShort(), this.yStrikeoutSize = t4.readShort(), this.yStrikeoutPosition = t4.readShort(), this.familyClass = t4.readShort(), this.panose = function() {
          var e3, r2;
          for (r2 = [], e3 = 0; e3 < 10; ++e3) r2.push(t4.readByte());
          return r2;
        }(), this.charRange = function() {
          var e3, r2;
          for (r2 = [], e3 = 0; e3 < 4; ++e3) r2.push(t4.readInt());
          return r2;
        }(), this.vendorID = t4.readString(4), this.selection = t4.readShort(), this.firstCharIndex = t4.readShort(), this.lastCharIndex = t4.readShort(), this.version > 0 && (this.ascent = t4.readShort(), this.descent = t4.readShort(), this.lineGap = t4.readShort(), this.winAscent = t4.readShort(), this.winDescent = t4.readShort(), this.codePageRange = function() {
          var e3, r2;
          for (r2 = [], e3 = 0; e3 < 2; e3 = ++e3) r2.push(t4.readInt());
          return r2;
        }(), this.version > 1)) return this.xHeight = t4.readShort(), this.capHeight = t4.readShort(), this.defaultChar = t4.readShort(), this.breakChar = t4.readShort(), this.maxContext = t4.readShort();
      }, e2;
    }();
    fe = function(t3) {
      function e2() {
        return e2.__super__.constructor.apply(this, arguments);
      }
      __name(e2, "e2");
      __name2(e2, "e");
      return oe(e2, re), e2.prototype.tag = "post", e2.prototype.parse = function(t4) {
        var e3, r2, n3;
        switch (t4.pos = this.offset, this.format = t4.readInt(), this.italicAngle = t4.readInt(), this.underlinePosition = t4.readShort(), this.underlineThickness = t4.readShort(), this.isFixedPitch = t4.readInt(), this.minMemType42 = t4.readInt(), this.maxMemType42 = t4.readInt(), this.minMemType1 = t4.readInt(), this.maxMemType1 = t4.readInt(), this.format) {
          case 65536:
            break;
          case 131072:
            var i33;
            for (r2 = t4.readUInt16(), this.glyphNameIndex = [], i33 = 0; 0 <= r2 ? i33 < r2 : i33 > r2; i33 = 0 <= r2 ? ++i33 : --i33) this.glyphNameIndex.push(t4.readUInt16());
            for (this.names = [], n3 = []; t4.pos < this.offset + this.length; ) e3 = t4.readByte(), n3.push(this.names.push(t4.readString(e3)));
            return n3;
          case 151552:
            return r2 = t4.readUInt16(), this.offsets = t4.read(r2);
          case 196608:
            break;
          case 262144:
            return this.map = function() {
              var e4, r3, n4;
              for (n4 = [], i33 = e4 = 0, r3 = this.file.maxp.numGlyphs; 0 <= r3 ? e4 < r3 : e4 > r3; i33 = 0 <= r3 ? ++e4 : --e4) n4.push(t4.readUInt32());
              return n4;
            }.call(this);
        }
      }, e2;
    }();
    de = /* @__PURE__ */ __name2(function(t3, e2) {
      this.raw = t3, this.length = t3.length, this.platformID = e2.platformID, this.encodingID = e2.encodingID, this.languageID = e2.languageID;
    }, "de");
    pe = function(t3) {
      function e2() {
        return e2.__super__.constructor.apply(this, arguments);
      }
      __name(e2, "e2");
      __name2(e2, "e");
      return oe(e2, re), e2.prototype.tag = "name", e2.prototype.parse = function(t4) {
        var e3, r2, n3, i33, a3, o3, s3, c4, u3, h3, l3;
        for (t4.pos = this.offset, t4.readShort(), e3 = t4.readShort(), o3 = t4.readShort(), r2 = [], i33 = 0; 0 <= e3 ? i33 < e3 : i33 > e3; i33 = 0 <= e3 ? ++i33 : --i33) r2.push({ platformID: t4.readShort(), encodingID: t4.readShort(), languageID: t4.readShort(), nameID: t4.readShort(), length: t4.readShort(), offset: this.offset + o3 + t4.readShort() });
        for (s3 = {}, i33 = u3 = 0, h3 = r2.length; u3 < h3; i33 = ++u3) n3 = r2[i33], t4.pos = n3.offset, c4 = t4.readString(n3.length), a3 = new de(c4, n3), null == s3[l3 = n3.nameID] && (s3[l3] = []), s3[n3.nameID].push(a3);
        this.strings = s3, this.copyright = s3[0], this.fontFamily = s3[1], this.fontSubfamily = s3[2], this.uniqueSubfamily = s3[3], this.fontName = s3[4], this.version = s3[5];
        try {
          this.postscriptName = s3[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g, "");
        } catch (t5) {
          this.postscriptName = s3[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g, "");
        }
        return this.trademark = s3[7], this.manufacturer = s3[8], this.designer = s3[9], this.description = s3[10], this.vendorUrl = s3[11], this.designerUrl = s3[12], this.license = s3[13], this.licenseUrl = s3[14], this.preferredFamily = s3[15], this.preferredSubfamily = s3[17], this.compatibleFull = s3[18], this.sampleText = s3[19];
      }, e2;
    }();
    ge = function(t3) {
      function e2() {
        return e2.__super__.constructor.apply(this, arguments);
      }
      __name(e2, "e2");
      __name2(e2, "e");
      return oe(e2, re), e2.prototype.tag = "maxp", e2.prototype.parse = function(t4) {
        return t4.pos = this.offset, this.version = t4.readInt(), this.numGlyphs = t4.readUInt16(), this.maxPoints = t4.readUInt16(), this.maxContours = t4.readUInt16(), this.maxCompositePoints = t4.readUInt16(), this.maxComponentContours = t4.readUInt16(), this.maxZones = t4.readUInt16(), this.maxTwilightPoints = t4.readUInt16(), this.maxStorage = t4.readUInt16(), this.maxFunctionDefs = t4.readUInt16(), this.maxInstructionDefs = t4.readUInt16(), this.maxStackElements = t4.readUInt16(), this.maxSizeOfInstructions = t4.readUInt16(), this.maxComponentElements = t4.readUInt16(), this.maxComponentDepth = t4.readUInt16();
      }, e2;
    }();
    me = function(t3) {
      function e2() {
        return e2.__super__.constructor.apply(this, arguments);
      }
      __name(e2, "e2");
      __name2(e2, "e");
      return oe(e2, re), e2.prototype.tag = "hmtx", e2.prototype.parse = function(t4) {
        var e3, r2, n3, i33, a3, o3, s3;
        for (t4.pos = this.offset, this.metrics = [], e3 = 0, o3 = this.file.hhea.numberOfMetrics; 0 <= o3 ? e3 < o3 : e3 > o3; e3 = 0 <= o3 ? ++e3 : --e3) this.metrics.push({ advance: t4.readUInt16(), lsb: t4.readInt16() });
        for (n3 = this.file.maxp.numGlyphs - this.file.hhea.numberOfMetrics, this.leftSideBearings = function() {
          var r3, i4;
          for (i4 = [], e3 = r3 = 0; 0 <= n3 ? r3 < n3 : r3 > n3; e3 = 0 <= n3 ? ++r3 : --r3) i4.push(t4.readInt16());
          return i4;
        }(), this.widths = function() {
          var t5, e4, r3, n4;
          for (n4 = [], t5 = 0, e4 = (r3 = this.metrics).length; t5 < e4; t5++) i33 = r3[t5], n4.push(i33.advance);
          return n4;
        }.call(this), r2 = this.widths[this.widths.length - 1], s3 = [], e3 = a3 = 0; 0 <= n3 ? a3 < n3 : a3 > n3; e3 = 0 <= n3 ? ++a3 : --a3) s3.push(this.widths.push(r2));
        return s3;
      }, e2.prototype.forGlyph = function(t4) {
        return t4 in this.metrics ? this.metrics[t4] : { advance: this.metrics[this.metrics.length - 1].advance, lsb: this.leftSideBearings[t4 - this.metrics.length] };
      }, e2;
    }();
    ve = [].slice;
    be = function(t3) {
      function e2() {
        return e2.__super__.constructor.apply(this, arguments);
      }
      __name(e2, "e2");
      __name2(e2, "e");
      return oe(e2, re), e2.prototype.tag = "glyf", e2.prototype.parse = function() {
        return this.cache = {};
      }, e2.prototype.glyphFor = function(t4) {
        var e3, r2, n3, i33, a3, o3, s3, c4, u3, h3;
        return t4 in this.cache ? this.cache[t4] : (i33 = this.file.loca, e3 = this.file.contents, r2 = i33.indexOf(t4), 0 === (n3 = i33.lengthOf(t4)) ? this.cache[t4] = null : (e3.pos = this.offset + r2, a3 = (o3 = new ne(e3.read(n3))).readShort(), c4 = o3.readShort(), h3 = o3.readShort(), s3 = o3.readShort(), u3 = o3.readShort(), this.cache[t4] = -1 === a3 ? new we(o3, c4, h3, s3, u3) : new ye(o3, a3, c4, h3, s3, u3), this.cache[t4]));
      }, e2.prototype.encode = function(t4, e3, r2) {
        var n3, i33, a3, o3, s3;
        for (a3 = [], i33 = [], o3 = 0, s3 = e3.length; o3 < s3; o3++) n3 = t4[e3[o3]], i33.push(a3.length), n3 && (a3 = a3.concat(n3.encode(r2)));
        return i33.push(a3.length), { table: a3, offsets: i33 };
      }, e2;
    }();
    ye = function() {
      function t3(t4, e2, r2, n3, i33, a3) {
        this.raw = t4, this.numberOfContours = e2, this.xMin = r2, this.yMin = n3, this.xMax = i33, this.yMax = a3, this.compound = false;
      }
      __name(t3, "t3");
      __name2(t3, "t");
      return t3.prototype.encode = function() {
        return this.raw.data;
      }, t3;
    }();
    we = function() {
      function t3(t4, e2, r2, n3, i33) {
        var a3, o3;
        for (this.raw = t4, this.xMin = e2, this.yMin = r2, this.xMax = n3, this.yMax = i33, this.compound = true, this.glyphIDs = [], this.glyphOffsets = [], a3 = this.raw; o3 = a3.readShort(), this.glyphOffsets.push(a3.pos), this.glyphIDs.push(a3.readUInt16()), 32 & o3; ) a3.pos += 1 & o3 ? 4 : 2, 128 & o3 ? a3.pos += 8 : 64 & o3 ? a3.pos += 4 : 8 & o3 && (a3.pos += 2);
      }
      __name(t3, "t3");
      __name2(t3, "t");
      return 1, 8, 32, 64, 128, t3.prototype.encode = function() {
        var t4, e2, r2;
        for (e2 = new ne(ve.call(this.raw.data)), t4 = 0, r2 = this.glyphIDs.length; t4 < r2; ++t4) e2.pos = this.glyphOffsets[t4];
        return e2.data;
      }, t3;
    }();
    Ne = function(t3) {
      function e2() {
        return e2.__super__.constructor.apply(this, arguments);
      }
      __name(e2, "e2");
      __name2(e2, "e");
      return oe(e2, re), e2.prototype.tag = "loca", e2.prototype.parse = function(t4) {
        var e3, r2;
        return t4.pos = this.offset, e3 = this.file.head.indexToLocFormat, this.offsets = 0 === e3 ? function() {
          var e4, n3;
          for (n3 = [], r2 = 0, e4 = this.length; r2 < e4; r2 += 2) n3.push(2 * t4.readUInt16());
          return n3;
        }.call(this) : function() {
          var e4, n3;
          for (n3 = [], r2 = 0, e4 = this.length; r2 < e4; r2 += 4) n3.push(t4.readUInt32());
          return n3;
        }.call(this);
      }, e2.prototype.indexOf = function(t4) {
        return this.offsets[t4];
      }, e2.prototype.lengthOf = function(t4) {
        return this.offsets[t4 + 1] - this.offsets[t4];
      }, e2.prototype.encode = function(t4, e3) {
        for (var r2 = new Uint32Array(this.offsets.length), n3 = 0, i33 = 0, a3 = 0; a3 < r2.length; ++a3) if (r2[a3] = n3, i33 < e3.length && e3[i33] == a3) {
          ++i33, r2[a3] = n3;
          var o3 = this.offsets[a3], s3 = this.offsets[a3 + 1] - o3;
          s3 > 0 && (n3 += s3);
        }
        for (var c4 = new Array(4 * r2.length), u3 = 0; u3 < r2.length; ++u3) c4[4 * u3 + 3] = 255 & r2[u3], c4[4 * u3 + 2] = (65280 & r2[u3]) >> 8, c4[4 * u3 + 1] = (16711680 & r2[u3]) >> 16, c4[4 * u3] = (4278190080 & r2[u3]) >> 24;
        return c4;
      }, e2;
    }();
    Le = function() {
      function t3(t4) {
        this.font = t4, this.subset = {}, this.unicodes = {}, this.next = 33;
      }
      __name(t3, "t3");
      __name2(t3, "t");
      return t3.prototype.generateCmap = function() {
        var t4, e2, r2, n3, i33;
        for (e2 in n3 = this.font.cmap.tables[0].codeMap, t4 = {}, i33 = this.subset) r2 = i33[e2], t4[e2] = n3[r2];
        return t4;
      }, t3.prototype.glyphsFor = function(t4) {
        var e2, r2, n3, i33, a3, o3, s3;
        for (n3 = {}, a3 = 0, o3 = t4.length; a3 < o3; a3++) n3[i33 = t4[a3]] = this.font.glyf.glyphFor(i33);
        for (i33 in e2 = [], n3) (null != (r2 = n3[i33]) ? r2.compound : void 0) && e2.push.apply(e2, r2.glyphIDs);
        if (e2.length > 0) for (i33 in s3 = this.glyphsFor(e2)) r2 = s3[i33], n3[i33] = r2;
        return n3;
      }, t3.prototype.encode = function(t4, e2) {
        var r2, n3, i33, a3, o3, s3, c4, u3, h3, l3, f3, d2, p3, g2, m4;
        for (n3 in r2 = ue.encode(this.generateCmap(), "unicode"), a3 = this.glyphsFor(t4), f3 = { 0: 0 }, m4 = r2.charMap) f3[(s3 = m4[n3]).old] = s3.new;
        for (d2 in l3 = r2.maxGlyphID, a3) d2 in f3 || (f3[d2] = l3++);
        return u3 = function(t5) {
          var e3, r3;
          for (e3 in r3 = {}, t5) r3[t5[e3]] = e3;
          return r3;
        }(f3), h3 = Object.keys(u3).sort(function(t5, e3) {
          return t5 - e3;
        }), p3 = function() {
          var t5, e3, r3;
          for (r3 = [], t5 = 0, e3 = h3.length; t5 < e3; t5++) o3 = h3[t5], r3.push(u3[o3]);
          return r3;
        }(), i33 = this.font.glyf.encode(a3, p3, f3), c4 = this.font.loca.encode(i33.offsets, p3), g2 = { cmap: this.font.cmap.raw(), glyf: i33.table, loca: c4, hmtx: this.font.hmtx.raw(), hhea: this.font.hhea.raw(), maxp: this.font.maxp.raw(), post: this.font.post.raw(), name: this.font.name.raw(), head: this.font.head.encode(e2) }, this.font.os2.exists && (g2["OS/2"] = this.font.os2.raw()), this.font.directory.encode(g2);
      }, t3;
    }();
    E.API.PDFObject = function() {
      var t3;
      function e2() {
      }
      __name(e2, "e2");
      __name2(e2, "e");
      return t3 = /* @__PURE__ */ __name2(function(t4, e3) {
        return (Array(e3 + 1).join("0") + t4).slice(-e3);
      }, "t"), e2.convert = function(r2) {
        var n3, i33, a3, o3;
        if (Array.isArray(r2)) return "[" + function() {
          var t4, i4, a4;
          for (a4 = [], t4 = 0, i4 = r2.length; t4 < i4; t4++) n3 = r2[t4], a4.push(e2.convert(n3));
          return a4;
        }().join(" ") + "]";
        if ("string" == typeof r2) return "/" + r2;
        if (null != r2 ? r2.isString : void 0) return "(" + r2 + ")";
        if (r2 instanceof Date) return "(D:" + t3(r2.getUTCFullYear(), 4) + t3(r2.getUTCMonth(), 2) + t3(r2.getUTCDate(), 2) + t3(r2.getUTCHours(), 2) + t3(r2.getUTCMinutes(), 2) + t3(r2.getUTCSeconds(), 2) + "Z)";
        if ("[object Object]" === {}.toString.call(r2)) {
          for (i33 in a3 = ["<<"], r2) o3 = r2[i33], a3.push("/" + i33 + " " + e2.convert(o3));
          return a3.push(">>"), a3.join("\n");
        }
        return "" + r2;
      }, e2;
    }();
  }
});
function generateInvoicePDFDoc(invoice, order, settings3) {
  const company = settings3.company || {
    name: "OCUS Job Hunter",
    address: "Digital Services Company",
    email: "support@jobhunter.one",
    website: "https://jobhunter.one"
  };
  const pdf = new E();
  pdf.setDrawColor(200, 200, 200);
  pdf.setLineWidth(0.5);
  pdf.line(15, 45, 195, 45);
  pdf.setDrawColor(100, 100, 100);
  pdf.setLineWidth(1);
  pdf.circle(25, 25, 8, "S");
  pdf.setFillColor(100, 100, 100);
  pdf.circle(25, 25, 2, "F");
  pdf.setTextColor(50, 50, 50);
  pdf.setFontSize(16);
  pdf.setFont("helvetica", "bold");
  pdf.text(company.name.toUpperCase(), 40, 28);
  pdf.setTextColor(50, 50, 50);
  pdf.setFontSize(20);
  pdf.setFont("helvetica", "bold");
  pdf.text("INVOICE", 150, 65);
  pdf.setFontSize(9);
  pdf.setFont("helvetica", "normal");
  pdf.setTextColor(100, 100, 100);
  pdf.text("Invoice Number:", 140, 75);
  pdf.text("Invoice Date:", 140, 82);
  pdf.setFont("helvetica", "bold");
  pdf.setTextColor(50, 50, 50);
  pdf.text(String(invoice.invoiceNumber), 140, 79);
  pdf.text(new Date(invoice.invoiceDate).toLocaleDateString(), 140, 86);
  pdf.setFontSize(10);
  pdf.setFont("helvetica", "bold");
  pdf.setTextColor(100, 100, 100);
  pdf.text("FROM:", 20, 60);
  pdf.setFontSize(11);
  pdf.setFont("helvetica", "bold");
  pdf.setTextColor(50, 50, 50);
  pdf.text(company.name, 20, 70);
  pdf.setFontSize(9);
  pdf.setFont("helvetica", "normal");
  pdf.setTextColor(100, 100, 100);
  if (company.address) pdf.text(company.address, 20, 77);
  if (company.email) pdf.text(`Email: ${company.email}`, 20, 84);
  pdf.setFontSize(10);
  pdf.setFont("helvetica", "bold");
  pdf.setTextColor(100, 100, 100);
  pdf.text("BILL TO:", 20, 100);
  pdf.setFontSize(11);
  pdf.setFont("helvetica", "bold");
  pdf.setTextColor(50, 50, 50);
  pdf.text(order.customerName || invoice.customerName, 20, 110);
  pdf.setFontSize(9);
  pdf.setFont("helvetica", "normal");
  pdf.setTextColor(100, 100, 100);
  pdf.text(order.customerEmail || invoice.customerEmail, 20, 117);
  const tableTop = 130;
  pdf.setDrawColor(200, 200, 200);
  pdf.setLineWidth(0.5);
  pdf.line(15, tableTop, 195, tableTop);
  pdf.setTextColor(100, 100, 100);
  pdf.setFont("helvetica", "bold");
  pdf.setFontSize(10);
  pdf.text("DESCRIPTION", 20, tableTop + 10);
  pdf.text("AMOUNT", 170, tableTop + 10);
  const itemY = tableTop + 20;
  const amount = typeof order.finalAmount === "number" ? order.finalAmount : parseFloat(String(order.finalAmount));
  pdf.setTextColor(50, 50, 50);
  pdf.setFont("helvetica", "bold");
  pdf.setFontSize(11);
  pdf.text(order.productName || "OCUS Job Hunter Premium Extension", 20, itemY);
  pdf.setFont("helvetica", "normal");
  pdf.setFontSize(9);
  pdf.setTextColor(100, 100, 100);
  pdf.text(`Order ID: ${order.id}`, 20, itemY + 8);
  pdf.setFont("helvetica", "bold");
  pdf.setFontSize(12);
  pdf.setTextColor(50, 50, 50);
  pdf.text(`${(order.currency || "USD").toUpperCase()} ${amount.toFixed(2)}`, 170, itemY, { align: "right" });
  const totalsY = tableTop + 40;
  pdf.setDrawColor(200, 200, 200);
  pdf.setLineWidth(0.5);
  pdf.line(120, totalsY, 195, totalsY);
  pdf.setFont("helvetica", "bold");
  pdf.setFontSize(12);
  pdf.setTextColor(50, 50, 50);
  pdf.text("TOTAL:", 125, totalsY + 15);
  pdf.text(`${(order.currency || "USD").toUpperCase()} ${amount.toFixed(2)}`, 195, totalsY + 15, { align: "right" });
  pdf.setDrawColor(200, 200, 200);
  pdf.setLineWidth(0.5);
  pdf.line(15, 240, 195, 240);
  pdf.setTextColor(100, 100, 100);
  pdf.setFont("helvetica", "normal");
  pdf.setFontSize(9);
  pdf.text("Thank you for choosing OCUS Job Hunter!", 20, 250);
  if (company.email) pdf.text(`Questions? Contact: ${company.email}`, 20, 257);
  return pdf;
}
__name(generateInvoicePDFDoc, "generateInvoicePDFDoc");
var onRequestGet6;
var init_download = __esm({
  "api/invoices/[id]/download.ts"() {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    init_jspdf_es_min();
    __name2(generateInvoicePDFDoc, "generateInvoicePDFDoc");
    onRequestGet6 = /* @__PURE__ */ __name2(async ({ params, env }) => {
      try {
        const invoiceId = params.id;
        if (!invoiceId) {
          return new Response("Invoice ID is required", { status: 400 });
        }
        const invoice = await env.DB.prepare("SELECT * FROM invoices WHERE id = ?").bind(invoiceId).first();
        if (!invoice) return new Response("Invoice not found", { status: 404 });
        const order = await env.DB.prepare("SELECT * FROM orders WHERE id = ?").bind(invoice.orderId).first();
        if (!order) return new Response("Associated order not found", { status: 404 });
        const settingsStmt = await env.DB.prepare("SELECT value FROM settings WHERE key = ?").bind("invoice_settings").first();
        const settings3 = settingsStmt ? JSON.parse(settingsStmt.value) : {};
        const pdf = generateInvoicePDFDoc(invoice, order, settings3);
        const pdfBuffer = pdf.output("arraybuffer");
        return new Response(pdfBuffer, {
          headers: {
            "Content-Type": "application/pdf",
            "Content-Disposition": `attachment; filename="invoice-${invoice.invoiceNumber}.pdf"`,
            "Access-Control-Allow-Origin": "*"
          }
        });
      } catch (error) {
        return new Response(`Error generating invoice: ${error.message}`, { status: 500 });
      }
    }, "onRequestGet");
  }
});
function generateReceiptHTML(invoice, order, settings3) {
  const company = settings3.company || {
    name: "OCUS Job Hunter",
    email: "support@jobhunter.one"
  };
  return `
    <!DOCTYPE html>
    <html lang="en">
    <head>
      <meta charset="UTF-8">
      <title>Receipt for Invoice #${invoice.invoiceNumber}</title>
      <style>
        body { font-family: sans-serif; line-height: 1.6; color: #333; }
        .container { max-width: 600px; margin: auto; padding: 20px; border: 1px solid #eee; }
        .header { text-align: center; border-bottom: 1px solid #eee; padding-bottom: 10px; }
        .details { margin-top: 20px; }
        .summary { margin-top: 20px; }
        .total-amount { font-size: 1.2em; font-weight: bold; }
      </style>
    </head>
    <body>
      <div class="container">
        <div class="header">
          <h1>Payment Receipt</h1>
        </div>
        <div class="details">
          <p><strong>Receipt #:</strong> RCPT-${invoice.id}</p>
          <p><strong>Payment Date:</strong> ${new Date(order.completedAt).toLocaleDateString()}</p>
          <p><strong>Paid To:</strong> ${company.name}</p>
          <p><strong>Paid By:</strong> ${order.customerName}</p>
        </div>
        <div class="summary">
          <h3>Summary</h3>
          <p>Total Paid: <span class="total-amount">${order.finalAmount.toFixed(2)} ${order.currency}</span></p>
        </div>
      </div>
    </body>
    </html>
  `;
}
__name(generateReceiptHTML, "generateReceiptHTML");
var onRequestGet7;
var init_download_receipt = __esm({
  "api/invoices/[id]/download-receipt.ts"() {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    __name2(generateReceiptHTML, "generateReceiptHTML");
    onRequestGet7 = /* @__PURE__ */ __name2(async ({ params, env }) => {
      try {
        const invoiceId = params.id;
        if (!invoiceId) {
          return new Response("Invoice ID is required", { status: 400 });
        }
        const invoice = await env.DB.prepare("SELECT * FROM invoices WHERE id = ?").bind(invoiceId).first();
        if (!invoice) return new Response("Invoice not found", { status: 404 });
        const order = await env.DB.prepare("SELECT * FROM orders WHERE id = ?").bind(invoice.orderId).first();
        if (!order) return new Response("Associated order not found", { status: 404 });
        const settingsStmt = await env.DB.prepare("SELECT value FROM settings WHERE key = ?").bind("invoice_settings").first();
        const settings3 = settingsStmt ? JSON.parse(settingsStmt.value) : {};
        const html2 = generateReceiptHTML(invoice, order, settings3);
        return new Response(html2, {
          headers: {
            "Content-Type": "text/html",
            "Content-Disposition": `attachment; filename="receipt-${invoice.invoiceNumber}.html"`,
            "Access-Control-Allow-Origin": "*"
          }
        });
      } catch (error) {
        return new Response(`Error generating receipt: ${error.message}`, { status: 500 });
      }
    }, "onRequestGet");
  }
});
function generateInvoiceHTML(invoice, order, settings3) {
  const company = settings3.company || {
    name: "OCUS Job Hunter",
    address: "Digital Services Company",
    email: "support@jobhunter.one",
    website: "https://jobhunter.one"
  };
  return `
    <!DOCTYPE html>
    <html lang="en">
    <head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>Invoice #${invoice.invoiceNumber}</title>
      <style>
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; line-height: 1.6; color: #333; background-color: #f9f9f9; margin: 0; padding: 0; }
        .container { max-width: 800px; margin: 20px auto; padding: 30px; background-color: #fff; border: 1px solid #ddd; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.05); }
        .header { display: flex; justify-content: space-between; align-items: flex-start; padding-bottom: 20px; border-bottom: 2px solid #eee; }
        .header h1 { font-size: 2.5em; color: #000; margin: 0; }
        .header .company-details { text-align: right; font-size: 0.9em; color: #555; }
        .details { display: flex; justify-content: space-between; margin-top: 30px; }
        .details .customer-details, .details .invoice-details { font-size: 0.95em; }
        .details h3 { margin-top: 0; font-size: 1.1em; color: #000; border-bottom: 1px solid #eee; padding-bottom: 5px; }
        table { width: 100%; border-collapse: collapse; margin-top: 30px; }
        th, td { padding: 12px 15px; text-align: left; }
        thead { background-color: #f5f5f5; border-bottom: 2px solid #ddd; }
        th { font-weight: 600; color: #333; }
        tbody tr { border-bottom: 1px solid #eee; }
        .totals { margin-top: 30px; text-align: right; }
        .totals table { width: auto; float: right; }
        .totals td { text-align: right; }
        .totals .total-amount { font-size: 1.4em; font-weight: bold; color: #000; }
        .footer { margin-top: 40px; text-align: center; font-size: 0.85em; color: #777; border-top: 1px solid #eee; padding-top: 20px; }
        .status { font-size: 1.2em; font-weight: bold; padding: 8px 12px; border-radius: 6px; text-transform: uppercase; }
        .status.paid { color: #28a745; background-color: #e9f7ec; }
        .status.pending { color: #ffc107; background-color: #fff8e1; }
      </style>
    </head>
    <body>
      <div class="container">
        <div class="header">
          <h1>Invoice</h1>
          <div class="company-details">
            <strong>${company.name}</strong><br>
            ${company.address}<br>
            ${company.email}<br>
            ${company.website}
          </div>
        </div>
        <div class="details">
          <div class="customer-details">
            <h3>Bill To:</h3>
            <strong>${order.customerName}</strong><br>
            ${order.customerEmail}
          </div>
          <div class="invoice-details">
            <h3>Invoice Details:</h3>
            <strong>Invoice #:</strong> ${invoice.invoiceNumber}<br>
            <strong>Date:</strong> ${new Date(invoice.invoiceDate).toLocaleDateString()}<br>
            <strong>Due Date:</strong> ${new Date(invoice.dueDate).toLocaleDateString()}<br>
            <strong>Status:</strong> <span class="status ${invoice.status.toLowerCase()}">${invoice.status}</span>
          </div>
        </div>
        <table>
          <thead>
            <tr>
              <th>Description</th>
              <th>Quantity</th>
              <th>Unit Price</th>
              <th>Total</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>${order.productName}</td>
              <td>1</td>
              <td>${order.finalAmount.toFixed(2)} ${order.currency}</td>
              <td>${order.finalAmount.toFixed(2)} ${order.currency}</td>
            </tr>
          </tbody>
        </table>
        <div class="totals">
          <table>
            <tr>
              <td>Subtotal:</td>
              <td>${order.finalAmount.toFixed(2)} ${order.currency}</td>
            </tr>
            <tr>
              <td>Tax (0%):</td>
              <td>0.00 ${order.currency}</td>
            </tr>
            <tr>
              <td class="total-amount">Total:</td>
              <td class="total-amount">${order.finalAmount.toFixed(2)} ${order.currency}</td>
            </tr>
          </table>
        </div>
        <div class="footer">
          <p>Thank you for your business!</p>
          <p>If you have any questions, please contact us at ${company.email}.</p>
        </div>
      </div>
    </body>
    </html>
  `;
}
__name(generateInvoiceHTML, "generateInvoiceHTML");
var onRequestGet8;
var init_html = __esm({
  "api/invoices/[id]/html.ts"() {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    __name2(generateInvoiceHTML, "generateInvoiceHTML");
    onRequestGet8 = /* @__PURE__ */ __name2(async ({ params, env }) => {
      try {
        const invoiceId = params.id;
        if (!invoiceId) {
          return new Response("Invoice ID is required", { status: 400 });
        }
        const invoice = await env.DB.prepare(
          "SELECT * FROM invoices WHERE id = ?"
        ).bind(invoiceId).first();
        if (!invoice) {
          return new Response("Invoice not found", { status: 404 });
        }
        const order = await env.DB.prepare(
          "SELECT * FROM orders WHERE id = ?"
        ).bind(invoice.orderId).first();
        if (!order) {
          return new Response("Associated order not found", { status: 404 });
        }
        const settingsStmt = await env.DB.prepare("SELECT value FROM settings WHERE key = ?").bind("invoice_settings").first();
        const settings3 = settingsStmt ? JSON.parse(settingsStmt.value) : {};
        const html2 = generateInvoiceHTML(invoice, order, settings3);
        return new Response(html2, {
          headers: {
            "Content-Type": "text/html",
            "Access-Control-Allow-Origin": "*"
          }
        });
      } catch (error) {
        return new Response(`Error generating invoice: ${error.message}`, { status: 500 });
      }
    }, "onRequestGet");
  }
});
function generateReceiptHTML2(invoice, order, settings3) {
  const company = settings3.company || {
    name: "OCUS Job Hunter",
    email: "support@jobhunter.one"
  };
  return `
    <!DOCTYPE html>
    <html lang="en">
    <head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>Receipt for Invoice #${invoice.invoiceNumber}</title>
      <style>
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; line-height: 1.6; color: #333; background-color: #f9f9f9; margin: 0; padding: 0; }
        .container { max-width: 600px; margin: 20px auto; padding: 30px; background-color: #fff; border: 1px solid #ddd; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.05); }
        .header { text-align: center; padding-bottom: 20px; border-bottom: 2px solid #eee; }
        .header h1 { font-size: 2.2em; color: #28a745; margin: 0; }
        .header p { font-size: 1.1em; color: #555; }
        .details { margin-top: 30px; font-size: 0.95em; }
        .details strong { color: #000; }
        .summary { margin-top: 30px; }
        .summary h3 { font-size: 1.2em; border-bottom: 1px solid #eee; padding-bottom: 5px; }
        table { width: 100%; border-collapse: collapse; margin-top: 15px; }
        td { padding: 10px 0; }
        .total-amount { font-size: 1.5em; font-weight: bold; color: #000; }
        .footer { margin-top: 30px; text-align: center; font-size: 0.85em; color: #777; border-top: 1px solid #eee; padding-top: 20px; }
      </style>
    </head>
    <body>
      <div class="container">
        <div class="header">
          <h1>Payment Receipt</h1>
          <p>Thank you for your purchase!</p>
        </div>
        <div class="details">
          <p><strong>Receipt #:</strong> RCPT-${invoice.id}</p>
          <p><strong>Invoice #:</strong> ${invoice.invoiceNumber}</p>
          <p><strong>Payment Date:</strong> ${new Date(order.completedAt).toLocaleDateString()}</p>
          <p><strong>Paid To:</strong> ${company.name}</p>
          <p><strong>Paid By:</strong> ${order.customerName} (${order.customerEmail})</p>
        </div>
        <div class="summary">
          <h3>Payment Summary</h3>
          <table>
            <tr>
              <td>${order.productName}</td>
              <td style="text-align: right;">${order.finalAmount.toFixed(2)} ${order.currency}</td>
            </tr>
            <tr>
              <td style="font-weight: bold;">Total Paid:</td>
              <td style="text-align: right;" class="total-amount">${order.finalAmount.toFixed(2)} ${order.currency}</td>
            </tr>
          </table>
        </div>
        <div class="footer">
          <p>If you have any questions, please contact us at ${company.email}.</p>
        </div>
      </div>
    </body>
    </html>
  `;
}
__name(generateReceiptHTML2, "generateReceiptHTML2");
var onRequestGet9;
var init_receipt = __esm({
  "api/invoices/[id]/receipt.ts"() {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    __name2(generateReceiptHTML2, "generateReceiptHTML");
    onRequestGet9 = /* @__PURE__ */ __name2(async ({ params, env }) => {
      try {
        const invoiceId = params.id;
        if (!invoiceId) {
          return new Response("Invoice ID is required", { status: 400 });
        }
        const invoice = await env.DB.prepare("SELECT * FROM invoices WHERE id = ?").bind(invoiceId).first();
        if (!invoice) return new Response("Invoice not found", { status: 404 });
        const order = await env.DB.prepare("SELECT * FROM orders WHERE id = ?").bind(invoice.orderId).first();
        if (!order) return new Response("Associated order not found", { status: 404 });
        const settingsStmt = await env.DB.prepare("SELECT value FROM settings WHERE key = ?").bind("invoice_settings").first();
        const settings3 = settingsStmt ? JSON.parse(settingsStmt.value) : {};
        const html2 = generateReceiptHTML2(invoice, order, settings3);
        return new Response(html2, {
          headers: { "Content-Type": "text/html", "Access-Control-Allow-Origin": "*" }
        });
      } catch (error) {
        return new Response(`Error generating receipt: ${error.message}`, { status: 500 });
      }
    }, "onRequestGet");
  }
});
var TicketStorage;
var init_db = __esm({
  "lib/db.ts"() {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    TicketStorage = class {
      static {
        __name(this, "TicketStorage");
      }
      constructor(db) {
        this.db = db;
      }
      static {
        __name2(this, "TicketStorage");
      }
      async getAllTickets() {
        try {
          const result = await this.db.prepare("SELECT * FROM tickets ORDER BY created_at DESC").all();
          return result.results;
        } catch (error) {
          console.error("D1 getAllTickets error:", error);
          throw new Error(`Database query failed: ${error.message}`);
        }
      }
      async getTicketsByCustomerEmail(email) {
        try {
          const result = await this.db.prepare("SELECT * FROM tickets WHERE customer_email = ? ORDER BY created_at DESC").bind(email).all();
          return result.results;
        } catch (error) {
          console.error("D1 getTicketsByCustomerEmail error:", error);
          throw new Error(`Database query failed: ${error.message}`);
        }
      }
      async getTicketsByCustomerId(customerId) {
        try {
          const result = await this.db.prepare("SELECT * FROM tickets WHERE customer_id = ? ORDER BY created_at DESC").bind(customerId).all();
          return result.results;
        } catch (error) {
          console.error("D1 getTicketsByCustomerId error:", error);
          throw new Error(`Database query failed: ${error.message}`);
        }
      }
      async getTicketById(id) {
        const result = await this.db.prepare("SELECT * FROM tickets WHERE id = ?").bind(id).first();
        return result;
      }
      async createTicket(ticket) {
        if (ticket.customer_id === void 0) {
          throw new Error("customer_id is required to create a ticket.");
        }
        const now = (/* @__PURE__ */ new Date()).toISOString();
        try {
          const result = await this.db.prepare(`
        INSERT INTO tickets (customer_id, title, description, category, priority, status, customer_email, customer_name, assigned_to_user_id, created_at, updated_at)
        VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
        RETURNING *
      `).bind(
            ticket.customer_id,
            ticket.title,
            ticket.description,
            ticket.category,
            ticket.priority,
            ticket.status,
            ticket.customer_email,
            ticket.customer_name,
            ticket.assigned_to_user_id || null,
            now,
            now
          ).first();
          if (!result) {
            throw new Error("Failed to insert ticket - no result returned");
          }
          return result;
        } catch (error) {
          console.error("D1 createTicket error:", error);
          throw new Error(`Database insert failed: ${error.message}`);
        }
      }
      async updateTicket(id, updates) {
        const now = (/* @__PURE__ */ new Date()).toISOString();
        try {
          const result = await this.db.prepare(`
        UPDATE tickets 
        SET title = COALESCE(?, title),
            description = COALESCE(?, description),
            category = COALESCE(?, category),
            priority = COALESCE(?, priority),
            status = COALESCE(?, status),
            assigned_to_user_id = COALESCE(?, assigned_to_user_id),
            updated_at = ?,
            resolved_at = CASE WHEN ? = 'resolved' THEN ? ELSE resolved_at END,
            archived_at = CASE WHEN ? = 'archived' THEN ? ELSE archived_at END
        WHERE id = ?
        RETURNING *
      `).bind(
            updates.title || null,
            updates.description || null,
            updates.category || null,
            updates.priority || null,
            updates.status || null,
            updates.assigned_to_user_id || null,
            now,
            updates.status,
            updates.status === "resolved" ? now : null,
            updates.status,
            updates.status === "archived" ? now : null,
            id
          ).first();
          return result;
        } catch (error) {
          console.error("D1 updateTicket error:", error);
          throw new Error(`Database update failed: ${error.message}`);
        }
      }
      async archiveTicket(id) {
        const now = (/* @__PURE__ */ new Date()).toISOString();
        try {
          const result = await this.db.prepare(`
        UPDATE tickets 
        SET status = 'archived',
            archived_at = ?,
            updated_at = ?
        WHERE id = ?
        RETURNING *
      `).bind(now, now, id).first();
          return result;
        } catch (error) {
          console.error("D1 archiveTicket error:", error);
          throw new Error(`Database archive failed: ${error.message}`);
        }
      }
      async updateTicketStatus(id, status) {
        const now = (/* @__PURE__ */ new Date()).toISOString();
        await this.db.prepare("UPDATE tickets SET status = ?, updated_at = ? WHERE id = ?").bind(status, now, id).run();
      }
      async deleteTicket(id) {
        await this.db.prepare("DELETE FROM ticket_messages WHERE ticket_id = ?").bind(id).run();
        await this.db.prepare("DELETE FROM tickets WHERE id = ?").bind(id).run();
      }
      async getTicketMessages(ticketId) {
        const result = await this.db.prepare("SELECT * FROM ticket_messages WHERE ticket_id = ? ORDER BY created_at ASC").bind(ticketId).all();
        return result.results;
      }
      async addTicketMessage(message) {
        const now = (/* @__PURE__ */ new Date()).toISOString();
        await this.ensureAttachmentsColumn();
        const result = await this.db.prepare(`
      INSERT INTO ticket_messages (ticket_id, message, is_from_customer, sender_name, sender_email, created_at, attachments)
      VALUES (?, ?, ?, ?, ?, ?, ?)
      RETURNING *
    `).bind(
          message.ticket_id,
          message.message,
          message.is_from_customer ? 1 : 0,
          message.sender_name,
          message.sender_email || null,
          now,
          message.attachments || null
        ).first();
        await this.db.prepare("UPDATE tickets SET updated_at = ? WHERE id = ?").bind(now, message.ticket_id).run();
        return result;
      }
      // Best-effort runtime migration to avoid 500s if the DB was created before attachments was added
      async ensureAttachmentsColumn() {
        try {
          const info = await this.db.prepare("PRAGMA table_info(ticket_messages)").all();
          const columns = info?.results || [];
          const hasAttachments = columns.some((c4) => (c4?.name || c4?.NAME) === "attachments");
          if (!hasAttachments) {
            await this.db.prepare("ALTER TABLE ticket_messages ADD COLUMN attachments TEXT").run();
          }
        } catch (e2) {
        }
      }
    };
  }
});
var onRequestPost2;
var init_archive = __esm({
  "api/tickets/[id]/archive.ts"() {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    init_db();
    onRequestPost2 = /* @__PURE__ */ __name2(async ({ request, params, env }) => {
      const ticketId = Number(params.id);
      if (!ticketId || isNaN(ticketId)) {
        return Response.json({ success: false, message: "Invalid ticket ID" }, { status: 400 });
      }
      if (env.EXPRESS_API_BASE) {
        try {
          const proxyUrl = `${env.EXPRESS_API_BASE}/api/tickets/${ticketId}/archive`;
          const proxyResponse = await fetch(proxyUrl, {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
              "Authorization": request.headers.get("Authorization") || ""
            }
          });
          const data = await proxyResponse.json();
          return Response.json(data, { status: proxyResponse.status });
        } catch (error) {
          console.error("Express proxy error:", error);
        }
      }
      if (!env.DB) {
        return Response.json({ success: false, message: "Database not available" }, { status: 500 });
      }
      try {
        const storage2 = new TicketStorage(env.DB);
        const existingTicket = await storage2.getTicketById(ticketId);
        if (!existingTicket) {
          return Response.json({ success: false, message: "Ticket not found" }, { status: 404 });
        }
        const archivedTicket = await storage2.archiveTicket(ticketId);
        if (!archivedTicket) {
          return Response.json({ success: false, message: "Failed to archive ticket" }, { status: 500 });
        }
        return Response.json({
          success: true,
          message: "Ticket archived successfully",
          ticket: archivedTicket
        });
      } catch (error) {
        console.error("Archive ticket error:", error);
        return Response.json({
          success: false,
          message: "Failed to archive ticket",
          error: error.message
        }, { status: 500 });
      }
    }, "onRequestPost");
  }
});
var require_crypto = __commonJS({
  "(disabled):crypto"() {
    init_functionsRoutes_0_8044054200943971();
  }
});
var bcryptjs_exports = {};
__export(bcryptjs_exports, {
  compare: /* @__PURE__ */ __name(() => compare, "compare"),
  compareSync: /* @__PURE__ */ __name(() => compareSync, "compareSync"),
  decodeBase64: /* @__PURE__ */ __name(() => decodeBase64, "decodeBase64"),
  default: /* @__PURE__ */ __name(() => bcryptjs_default, "default"),
  encodeBase64: /* @__PURE__ */ __name(() => encodeBase64, "encodeBase64"),
  genSalt: /* @__PURE__ */ __name(() => genSalt, "genSalt"),
  genSaltSync: /* @__PURE__ */ __name(() => genSaltSync, "genSaltSync"),
  getRounds: /* @__PURE__ */ __name(() => getRounds, "getRounds"),
  getSalt: /* @__PURE__ */ __name(() => getSalt, "getSalt"),
  hash: /* @__PURE__ */ __name(() => hash, "hash"),
  hashSync: /* @__PURE__ */ __name(() => hashSync, "hashSync"),
  setRandomFallback: /* @__PURE__ */ __name(() => setRandomFallback, "setRandomFallback"),
  truncates: /* @__PURE__ */ __name(() => truncates, "truncates")
});
function randomBytes(len) {
  try {
    return crypto.getRandomValues(new Uint8Array(len));
  } catch {
  }
  try {
    return import_crypto.default.randomBytes(len);
  } catch {
  }
  if (!randomFallback) {
    throw Error(
      "Neither WebCryptoAPI nor a crypto module is available. Use bcrypt.setRandomFallback to set an alternative"
    );
  }
  return randomFallback(len);
}
__name(randomBytes, "randomBytes");
function setRandomFallback(random) {
  randomFallback = random;
}
__name(setRandomFallback, "setRandomFallback");
function genSaltSync(rounds, seed_length) {
  rounds = rounds || GENSALT_DEFAULT_LOG2_ROUNDS;
  if (typeof rounds !== "number")
    throw Error(
      "Illegal arguments: " + typeof rounds + ", " + typeof seed_length
    );
  if (rounds < 4) rounds = 4;
  else if (rounds > 31) rounds = 31;
  var salt = [];
  salt.push("$2b$");
  if (rounds < 10) salt.push("0");
  salt.push(rounds.toString());
  salt.push("$");
  salt.push(base64_encode(randomBytes(BCRYPT_SALT_LEN), BCRYPT_SALT_LEN));
  return salt.join("");
}
__name(genSaltSync, "genSaltSync");
function genSalt(rounds, seed_length, callback) {
  if (typeof seed_length === "function")
    callback = seed_length, seed_length = void 0;
  if (typeof rounds === "function") callback = rounds, rounds = void 0;
  if (typeof rounds === "undefined") rounds = GENSALT_DEFAULT_LOG2_ROUNDS;
  else if (typeof rounds !== "number")
    throw Error("illegal arguments: " + typeof rounds);
  function _async(callback2) {
    nextTick(function() {
      try {
        callback2(null, genSaltSync(rounds));
      } catch (err2) {
        callback2(err2);
      }
    });
  }
  __name(_async, "_async");
  __name2(_async, "_async");
  if (callback) {
    if (typeof callback !== "function")
      throw Error("Illegal callback: " + typeof callback);
    _async(callback);
  } else
    return new Promise(function(resolve, reject) {
      _async(function(err2, res) {
        if (err2) {
          reject(err2);
          return;
        }
        resolve(res);
      });
    });
}
__name(genSalt, "genSalt");
function hashSync(password, salt) {
  if (typeof salt === "undefined") salt = GENSALT_DEFAULT_LOG2_ROUNDS;
  if (typeof salt === "number") salt = genSaltSync(salt);
  if (typeof password !== "string" || typeof salt !== "string")
    throw Error("Illegal arguments: " + typeof password + ", " + typeof salt);
  return _hash(password, salt);
}
__name(hashSync, "hashSync");
function hash(password, salt, callback, progressCallback) {
  function _async(callback2) {
    if (typeof password === "string" && typeof salt === "number")
      genSalt(salt, function(err2, salt2) {
        _hash(password, salt2, callback2, progressCallback);
      });
    else if (typeof password === "string" && typeof salt === "string")
      _hash(password, salt, callback2, progressCallback);
    else
      nextTick(
        callback2.bind(
          this,
          Error("Illegal arguments: " + typeof password + ", " + typeof salt)
        )
      );
  }
  __name(_async, "_async");
  __name2(_async, "_async");
  if (callback) {
    if (typeof callback !== "function")
      throw Error("Illegal callback: " + typeof callback);
    _async(callback);
  } else
    return new Promise(function(resolve, reject) {
      _async(function(err2, res) {
        if (err2) {
          reject(err2);
          return;
        }
        resolve(res);
      });
    });
}
__name(hash, "hash");
function safeStringCompare(known, unknown) {
  var diff = known.length ^ unknown.length;
  for (var i33 = 0; i33 < known.length; ++i33) {
    diff |= known.charCodeAt(i33) ^ unknown.charCodeAt(i33);
  }
  return diff === 0;
}
__name(safeStringCompare, "safeStringCompare");
function compareSync(password, hash2) {
  if (typeof password !== "string" || typeof hash2 !== "string")
    throw Error("Illegal arguments: " + typeof password + ", " + typeof hash2);
  if (hash2.length !== 60) return false;
  return safeStringCompare(
    hashSync(password, hash2.substring(0, hash2.length - 31)),
    hash2
  );
}
__name(compareSync, "compareSync");
function compare(password, hashValue, callback, progressCallback) {
  function _async(callback2) {
    if (typeof password !== "string" || typeof hashValue !== "string") {
      nextTick(
        callback2.bind(
          this,
          Error(
            "Illegal arguments: " + typeof password + ", " + typeof hashValue
          )
        )
      );
      return;
    }
    if (hashValue.length !== 60) {
      nextTick(callback2.bind(this, null, false));
      return;
    }
    hash(
      password,
      hashValue.substring(0, 29),
      function(err2, comp) {
        if (err2) callback2(err2);
        else callback2(null, safeStringCompare(comp, hashValue));
      },
      progressCallback
    );
  }
  __name(_async, "_async");
  __name2(_async, "_async");
  if (callback) {
    if (typeof callback !== "function")
      throw Error("Illegal callback: " + typeof callback);
    _async(callback);
  } else
    return new Promise(function(resolve, reject) {
      _async(function(err2, res) {
        if (err2) {
          reject(err2);
          return;
        }
        resolve(res);
      });
    });
}
__name(compare, "compare");
function getRounds(hash2) {
  if (typeof hash2 !== "string")
    throw Error("Illegal arguments: " + typeof hash2);
  return parseInt(hash2.split("$")[2], 10);
}
__name(getRounds, "getRounds");
function getSalt(hash2) {
  if (typeof hash2 !== "string")
    throw Error("Illegal arguments: " + typeof hash2);
  if (hash2.length !== 60)
    throw Error("Illegal hash length: " + hash2.length + " != 60");
  return hash2.substring(0, 29);
}
__name(getSalt, "getSalt");
function truncates(password) {
  if (typeof password !== "string")
    throw Error("Illegal arguments: " + typeof password);
  return utf8Length(password) > 72;
}
__name(truncates, "truncates");
function utf8Length(string) {
  var len = 0, c4 = 0;
  for (var i33 = 0; i33 < string.length; ++i33) {
    c4 = string.charCodeAt(i33);
    if (c4 < 128) len += 1;
    else if (c4 < 2048) len += 2;
    else if ((c4 & 64512) === 55296 && (string.charCodeAt(i33 + 1) & 64512) === 56320) {
      ++i33;
      len += 4;
    } else len += 3;
  }
  return len;
}
__name(utf8Length, "utf8Length");
function utf8Array(string) {
  var offset = 0, c1, c22;
  var buffer = new Array(utf8Length(string));
  for (var i33 = 0, k2 = string.length; i33 < k2; ++i33) {
    c1 = string.charCodeAt(i33);
    if (c1 < 128) {
      buffer[offset++] = c1;
    } else if (c1 < 2048) {
      buffer[offset++] = c1 >> 6 | 192;
      buffer[offset++] = c1 & 63 | 128;
    } else if ((c1 & 64512) === 55296 && ((c22 = string.charCodeAt(i33 + 1)) & 64512) === 56320) {
      c1 = 65536 + ((c1 & 1023) << 10) + (c22 & 1023);
      ++i33;
      buffer[offset++] = c1 >> 18 | 240;
      buffer[offset++] = c1 >> 12 & 63 | 128;
      buffer[offset++] = c1 >> 6 & 63 | 128;
      buffer[offset++] = c1 & 63 | 128;
    } else {
      buffer[offset++] = c1 >> 12 | 224;
      buffer[offset++] = c1 >> 6 & 63 | 128;
      buffer[offset++] = c1 & 63 | 128;
    }
  }
  return buffer;
}
__name(utf8Array, "utf8Array");
function base64_encode(b2, len) {
  var off = 0, rs = [], c1, c22;
  if (len <= 0 || len > b2.length) throw Error("Illegal len: " + len);
  while (off < len) {
    c1 = b2[off++] & 255;
    rs.push(BASE64_CODE[c1 >> 2 & 63]);
    c1 = (c1 & 3) << 4;
    if (off >= len) {
      rs.push(BASE64_CODE[c1 & 63]);
      break;
    }
    c22 = b2[off++] & 255;
    c1 |= c22 >> 4 & 15;
    rs.push(BASE64_CODE[c1 & 63]);
    c1 = (c22 & 15) << 2;
    if (off >= len) {
      rs.push(BASE64_CODE[c1 & 63]);
      break;
    }
    c22 = b2[off++] & 255;
    c1 |= c22 >> 6 & 3;
    rs.push(BASE64_CODE[c1 & 63]);
    rs.push(BASE64_CODE[c22 & 63]);
  }
  return rs.join("");
}
__name(base64_encode, "base64_encode");
function base64_decode(s3, len) {
  var off = 0, slen = s3.length, olen = 0, rs = [], c1, c22, c32, c4, o3, code;
  if (len <= 0) throw Error("Illegal len: " + len);
  while (off < slen - 1 && olen < len) {
    code = s3.charCodeAt(off++);
    c1 = code < BASE64_INDEX.length ? BASE64_INDEX[code] : -1;
    code = s3.charCodeAt(off++);
    c22 = code < BASE64_INDEX.length ? BASE64_INDEX[code] : -1;
    if (c1 == -1 || c22 == -1) break;
    o3 = c1 << 2 >>> 0;
    o3 |= (c22 & 48) >> 4;
    rs.push(String.fromCharCode(o3));
    if (++olen >= len || off >= slen) break;
    code = s3.charCodeAt(off++);
    c32 = code < BASE64_INDEX.length ? BASE64_INDEX[code] : -1;
    if (c32 == -1) break;
    o3 = (c22 & 15) << 4 >>> 0;
    o3 |= (c32 & 60) >> 2;
    rs.push(String.fromCharCode(o3));
    if (++olen >= len || off >= slen) break;
    code = s3.charCodeAt(off++);
    c4 = code < BASE64_INDEX.length ? BASE64_INDEX[code] : -1;
    o3 = (c32 & 3) << 6 >>> 0;
    o3 |= c4;
    rs.push(String.fromCharCode(o3));
    ++olen;
  }
  var res = [];
  for (off = 0; off < olen; off++) res.push(rs[off].charCodeAt(0));
  return res;
}
__name(base64_decode, "base64_decode");
function _encipher(lr, off, P2, S2) {
  var n3, l3 = lr[off], r2 = lr[off + 1];
  l3 ^= P2[0];
  n3 = S2[l3 >>> 24];
  n3 += S2[256 | l3 >> 16 & 255];
  n3 ^= S2[512 | l3 >> 8 & 255];
  n3 += S2[768 | l3 & 255];
  r2 ^= n3 ^ P2[1];
  n3 = S2[r2 >>> 24];
  n3 += S2[256 | r2 >> 16 & 255];
  n3 ^= S2[512 | r2 >> 8 & 255];
  n3 += S2[768 | r2 & 255];
  l3 ^= n3 ^ P2[2];
  n3 = S2[l3 >>> 24];
  n3 += S2[256 | l3 >> 16 & 255];
  n3 ^= S2[512 | l3 >> 8 & 255];
  n3 += S2[768 | l3 & 255];
  r2 ^= n3 ^ P2[3];
  n3 = S2[r2 >>> 24];
  n3 += S2[256 | r2 >> 16 & 255];
  n3 ^= S2[512 | r2 >> 8 & 255];
  n3 += S2[768 | r2 & 255];
  l3 ^= n3 ^ P2[4];
  n3 = S2[l3 >>> 24];
  n3 += S2[256 | l3 >> 16 & 255];
  n3 ^= S2[512 | l3 >> 8 & 255];
  n3 += S2[768 | l3 & 255];
  r2 ^= n3 ^ P2[5];
  n3 = S2[r2 >>> 24];
  n3 += S2[256 | r2 >> 16 & 255];
  n3 ^= S2[512 | r2 >> 8 & 255];
  n3 += S2[768 | r2 & 255];
  l3 ^= n3 ^ P2[6];
  n3 = S2[l3 >>> 24];
  n3 += S2[256 | l3 >> 16 & 255];
  n3 ^= S2[512 | l3 >> 8 & 255];
  n3 += S2[768 | l3 & 255];
  r2 ^= n3 ^ P2[7];
  n3 = S2[r2 >>> 24];
  n3 += S2[256 | r2 >> 16 & 255];
  n3 ^= S2[512 | r2 >> 8 & 255];
  n3 += S2[768 | r2 & 255];
  l3 ^= n3 ^ P2[8];
  n3 = S2[l3 >>> 24];
  n3 += S2[256 | l3 >> 16 & 255];
  n3 ^= S2[512 | l3 >> 8 & 255];
  n3 += S2[768 | l3 & 255];
  r2 ^= n3 ^ P2[9];
  n3 = S2[r2 >>> 24];
  n3 += S2[256 | r2 >> 16 & 255];
  n3 ^= S2[512 | r2 >> 8 & 255];
  n3 += S2[768 | r2 & 255];
  l3 ^= n3 ^ P2[10];
  n3 = S2[l3 >>> 24];
  n3 += S2[256 | l3 >> 16 & 255];
  n3 ^= S2[512 | l3 >> 8 & 255];
  n3 += S2[768 | l3 & 255];
  r2 ^= n3 ^ P2[11];
  n3 = S2[r2 >>> 24];
  n3 += S2[256 | r2 >> 16 & 255];
  n3 ^= S2[512 | r2 >> 8 & 255];
  n3 += S2[768 | r2 & 255];
  l3 ^= n3 ^ P2[12];
  n3 = S2[l3 >>> 24];
  n3 += S2[256 | l3 >> 16 & 255];
  n3 ^= S2[512 | l3 >> 8 & 255];
  n3 += S2[768 | l3 & 255];
  r2 ^= n3 ^ P2[13];
  n3 = S2[r2 >>> 24];
  n3 += S2[256 | r2 >> 16 & 255];
  n3 ^= S2[512 | r2 >> 8 & 255];
  n3 += S2[768 | r2 & 255];
  l3 ^= n3 ^ P2[14];
  n3 = S2[l3 >>> 24];
  n3 += S2[256 | l3 >> 16 & 255];
  n3 ^= S2[512 | l3 >> 8 & 255];
  n3 += S2[768 | l3 & 255];
  r2 ^= n3 ^ P2[15];
  n3 = S2[r2 >>> 24];
  n3 += S2[256 | r2 >> 16 & 255];
  n3 ^= S2[512 | r2 >> 8 & 255];
  n3 += S2[768 | r2 & 255];
  l3 ^= n3 ^ P2[16];
  lr[off] = r2 ^ P2[BLOWFISH_NUM_ROUNDS + 1];
  lr[off + 1] = l3;
  return lr;
}
__name(_encipher, "_encipher");
function _streamtoword(data, offp) {
  for (var i33 = 0, word = 0; i33 < 4; ++i33)
    word = word << 8 | data[offp] & 255, offp = (offp + 1) % data.length;
  return { key: word, offp };
}
__name(_streamtoword, "_streamtoword");
function _key(key, P2, S2) {
  var offset = 0, lr = [0, 0], plen = P2.length, slen = S2.length, sw;
  for (var i33 = 0; i33 < plen; i33++)
    sw = _streamtoword(key, offset), offset = sw.offp, P2[i33] = P2[i33] ^ sw.key;
  for (i33 = 0; i33 < plen; i33 += 2)
    lr = _encipher(lr, 0, P2, S2), P2[i33] = lr[0], P2[i33 + 1] = lr[1];
  for (i33 = 0; i33 < slen; i33 += 2)
    lr = _encipher(lr, 0, P2, S2), S2[i33] = lr[0], S2[i33 + 1] = lr[1];
}
__name(_key, "_key");
function _ekskey(data, key, P2, S2) {
  var offp = 0, lr = [0, 0], plen = P2.length, slen = S2.length, sw;
  for (var i33 = 0; i33 < plen; i33++)
    sw = _streamtoword(key, offp), offp = sw.offp, P2[i33] = P2[i33] ^ sw.key;
  offp = 0;
  for (i33 = 0; i33 < plen; i33 += 2)
    sw = _streamtoword(data, offp), offp = sw.offp, lr[0] ^= sw.key, sw = _streamtoword(data, offp), offp = sw.offp, lr[1] ^= sw.key, lr = _encipher(lr, 0, P2, S2), P2[i33] = lr[0], P2[i33 + 1] = lr[1];
  for (i33 = 0; i33 < slen; i33 += 2)
    sw = _streamtoword(data, offp), offp = sw.offp, lr[0] ^= sw.key, sw = _streamtoword(data, offp), offp = sw.offp, lr[1] ^= sw.key, lr = _encipher(lr, 0, P2, S2), S2[i33] = lr[0], S2[i33 + 1] = lr[1];
}
__name(_ekskey, "_ekskey");
function _crypt(b2, salt, rounds, callback, progressCallback) {
  var cdata = C_ORIG.slice(), clen2 = cdata.length, err2;
  if (rounds < 4 || rounds > 31) {
    err2 = Error("Illegal number of rounds (4-31): " + rounds);
    if (callback) {
      nextTick(callback.bind(this, err2));
      return;
    } else throw err2;
  }
  if (salt.length !== BCRYPT_SALT_LEN) {
    err2 = Error(
      "Illegal salt length: " + salt.length + " != " + BCRYPT_SALT_LEN
    );
    if (callback) {
      nextTick(callback.bind(this, err2));
      return;
    } else throw err2;
  }
  rounds = 1 << rounds >>> 0;
  var P2, S2, i33 = 0, j2;
  if (typeof Int32Array === "function") {
    P2 = new Int32Array(P_ORIG);
    S2 = new Int32Array(S_ORIG);
  } else {
    P2 = P_ORIG.slice();
    S2 = S_ORIG.slice();
  }
  _ekskey(salt, b2, P2, S2);
  function next() {
    if (progressCallback) progressCallback(i33 / rounds);
    if (i33 < rounds) {
      var start = Date.now();
      for (; i33 < rounds; ) {
        i33 = i33 + 1;
        _key(b2, P2, S2);
        _key(salt, P2, S2);
        if (Date.now() - start > MAX_EXECUTION_TIME) break;
      }
    } else {
      for (i33 = 0; i33 < 64; i33++)
        for (j2 = 0; j2 < clen2 >> 1; j2++) _encipher(cdata, j2 << 1, P2, S2);
      var ret = [];
      for (i33 = 0; i33 < clen2; i33++)
        ret.push((cdata[i33] >> 24 & 255) >>> 0), ret.push((cdata[i33] >> 16 & 255) >>> 0), ret.push((cdata[i33] >> 8 & 255) >>> 0), ret.push((cdata[i33] & 255) >>> 0);
      if (callback) {
        callback(null, ret);
        return;
      } else return ret;
    }
    if (callback) nextTick(next);
  }
  __name(next, "next");
  __name2(next, "next");
  if (typeof callback !== "undefined") {
    next();
  } else {
    var res;
    while (true) if (typeof (res = next()) !== "undefined") return res || [];
  }
}
__name(_crypt, "_crypt");
function _hash(password, salt, callback, progressCallback) {
  var err2;
  if (typeof password !== "string" || typeof salt !== "string") {
    err2 = Error("Invalid string / salt: Not a string");
    if (callback) {
      nextTick(callback.bind(this, err2));
      return;
    } else throw err2;
  }
  var minor, offset;
  if (salt.charAt(0) !== "$" || salt.charAt(1) !== "2") {
    err2 = Error("Invalid salt version: " + salt.substring(0, 2));
    if (callback) {
      nextTick(callback.bind(this, err2));
      return;
    } else throw err2;
  }
  if (salt.charAt(2) === "$") minor = String.fromCharCode(0), offset = 3;
  else {
    minor = salt.charAt(2);
    if (minor !== "a" && minor !== "b" && minor !== "y" || salt.charAt(3) !== "$") {
      err2 = Error("Invalid salt revision: " + salt.substring(2, 4));
      if (callback) {
        nextTick(callback.bind(this, err2));
        return;
      } else throw err2;
    }
    offset = 4;
  }
  if (salt.charAt(offset + 2) > "$") {
    err2 = Error("Missing salt rounds");
    if (callback) {
      nextTick(callback.bind(this, err2));
      return;
    } else throw err2;
  }
  var r1 = parseInt(salt.substring(offset, offset + 1), 10) * 10, r2 = parseInt(salt.substring(offset + 1, offset + 2), 10), rounds = r1 + r2, real_salt = salt.substring(offset + 3, offset + 25);
  password += minor >= "a" ? "\0" : "";
  var passwordb = utf8Array(password), saltb = base64_decode(real_salt, BCRYPT_SALT_LEN);
  function finish(bytes) {
    var res = [];
    res.push("$2");
    if (minor >= "a") res.push(minor);
    res.push("$");
    if (rounds < 10) res.push("0");
    res.push(rounds.toString());
    res.push("$");
    res.push(base64_encode(saltb, saltb.length));
    res.push(base64_encode(bytes, C_ORIG.length * 4 - 1));
    return res.join("");
  }
  __name(finish, "finish");
  __name2(finish, "finish");
  if (typeof callback == "undefined")
    return finish(_crypt(passwordb, saltb, rounds));
  else {
    _crypt(
      passwordb,
      saltb,
      rounds,
      function(err3, bytes) {
        if (err3) callback(err3, null);
        else callback(null, finish(bytes));
      },
      progressCallback
    );
  }
}
__name(_hash, "_hash");
function encodeBase64(bytes, length) {
  return base64_encode(bytes, length);
}
__name(encodeBase64, "encodeBase64");
function decodeBase64(string, length) {
  return base64_decode(string, length);
}
__name(decodeBase64, "decodeBase64");
var import_crypto;
var randomFallback;
var nextTick;
var BASE64_CODE;
var BASE64_INDEX;
var BCRYPT_SALT_LEN;
var GENSALT_DEFAULT_LOG2_ROUNDS;
var BLOWFISH_NUM_ROUNDS;
var MAX_EXECUTION_TIME;
var P_ORIG;
var S_ORIG;
var C_ORIG;
var bcryptjs_default;
var init_bcryptjs = __esm({
  "../node_modules/bcryptjs/index.js"() {
    init_functionsRoutes_0_8044054200943971();
    import_crypto = __toESM(require_crypto(), 1);
    randomFallback = null;
    __name2(randomBytes, "randomBytes");
    __name2(setRandomFallback, "setRandomFallback");
    __name2(genSaltSync, "genSaltSync");
    __name2(genSalt, "genSalt");
    __name2(hashSync, "hashSync");
    __name2(hash, "hash");
    __name2(safeStringCompare, "safeStringCompare");
    __name2(compareSync, "compareSync");
    __name2(compare, "compare");
    __name2(getRounds, "getRounds");
    __name2(getSalt, "getSalt");
    __name2(truncates, "truncates");
    nextTick = typeof process !== "undefined" && process && typeof process.nextTick === "function" ? typeof setImmediate === "function" ? setImmediate : process.nextTick : setTimeout;
    __name2(utf8Length, "utf8Length");
    __name2(utf8Array, "utf8Array");
    BASE64_CODE = "./ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split("");
    BASE64_INDEX = [
      -1,
      -1,
      -1,
      -1,
      -1,
      -1,
      -1,
      -1,
      -1,
      -1,
      -1,
      -1,
      -1,
      -1,
      -1,
      -1,
      -1,
      -1,
      -1,
      -1,
      -1,
      -1,
      -1,
      -1,
      -1,
      -1,
      -1,
      -1,
      -1,
      -1,
      -1,
      -1,
      -1,
      -1,
      -1,
      -1,
      -1,
      -1,
      -1,
      -1,
      -1,
      -1,
      -1,
      -1,
      -1,
      -1,
      0,
      1,
      54,
      55,
      56,
      57,
      58,
      59,
      60,
      61,
      62,
      63,
      -1,
      -1,
      -1,
      -1,
      -1,
      -1,
      -1,
      2,
      3,
      4,
      5,
      6,
      7,
      8,
      9,
      10,
      11,
      12,
      13,
      14,
      15,
      16,
      17,
      18,
      19,
      20,
      21,
      22,
      23,
      24,
      25,
      26,
      27,
      -1,
      -1,
      -1,
      -1,
      -1,
      -1,
      28,
      29,
      30,
      31,
      32,
      33,
      34,
      35,
      36,
      37,
      38,
      39,
      40,
      41,
      42,
      43,
      44,
      45,
      46,
      47,
      48,
      49,
      50,
      51,
      52,
      53,
      -1,
      -1,
      -1,
      -1,
      -1
    ];
    __name2(base64_encode, "base64_encode");
    __name2(base64_decode, "base64_decode");
    BCRYPT_SALT_LEN = 16;
    GENSALT_DEFAULT_LOG2_ROUNDS = 10;
    BLOWFISH_NUM_ROUNDS = 16;
    MAX_EXECUTION_TIME = 100;
    P_ORIG = [
      608135816,
      2242054355,
      320440878,
      57701188,
      2752067618,
      698298832,
      137296536,
      3964562569,
      1160258022,
      953160567,
      3193202383,
      887688300,
      3232508343,
      3380367581,
      1065670069,
      3041331479,
      2450970073,
      2306472731
    ];
    S_ORIG = [
      3509652390,
      2564797868,
      805139163,
      3491422135,
      3101798381,
      1780907670,
      3128725573,
      4046225305,
      614570311,
      3012652279,
      134345442,
      2240740374,
      1667834072,
      1901547113,
      2757295779,
      4103290238,
      227898511,
      1921955416,
      1904987480,
      2182433518,
      2069144605,
      3260701109,
      2620446009,
      720527379,
      3318853667,
      677414384,
      3393288472,
      3101374703,
      2390351024,
      1614419982,
      1822297739,
      2954791486,
      3608508353,
      3174124327,
      2024746970,
      1432378464,
      3864339955,
      2857741204,
      1464375394,
      1676153920,
      1439316330,
      715854006,
      3033291828,
      289532110,
      2706671279,
      2087905683,
      3018724369,
      1668267050,
      732546397,
      1947742710,
      3462151702,
      2609353502,
      2950085171,
      1814351708,
      2050118529,
      680887927,
      999245976,
      1800124847,
      3300911131,
      1713906067,
      1641548236,
      4213287313,
      1216130144,
      1575780402,
      4018429277,
      3917837745,
      3693486850,
      3949271944,
      596196993,
      3549867205,
      258830323,
      2213823033,
      772490370,
      2760122372,
      1774776394,
      2652871518,
      566650946,
      4142492826,
      1728879713,
      2882767088,
      1783734482,
      3629395816,
      2517608232,
      2874225571,
      1861159788,
      326777828,
      3124490320,
      2130389656,
      2716951837,
      967770486,
      1724537150,
      2185432712,
      2364442137,
      1164943284,
      2105845187,
      998989502,
      3765401048,
      2244026483,
      1075463327,
      1455516326,
      1322494562,
      910128902,
      469688178,
      1117454909,
      936433444,
      3490320968,
      3675253459,
      1240580251,
      122909385,
      2157517691,
      634681816,
      4142456567,
      3825094682,
      3061402683,
      2540495037,
      79693498,
      3249098678,
      1084186820,
      1583128258,
      426386531,
      1761308591,
      1047286709,
      322548459,
      995290223,
      1845252383,
      2603652396,
      3431023940,
      2942221577,
      3202600964,
      3727903485,
      1712269319,
      422464435,
      3234572375,
      1170764815,
      3523960633,
      3117677531,
      1434042557,
      442511882,
      3600875718,
      1076654713,
      1738483198,
      4213154764,
      2393238008,
      3677496056,
      1014306527,
      4251020053,
      793779912,
      2902807211,
      842905082,
      4246964064,
      1395751752,
      1040244610,
      2656851899,
      3396308128,
      445077038,
      3742853595,
      3577915638,
      679411651,
      2892444358,
      2354009459,
      1767581616,
      3150600392,
      3791627101,
      3102740896,
      284835224,
      4246832056,
      1258075500,
      768725851,
      2589189241,
      3069724005,
      3532540348,
      1274779536,
      3789419226,
      2764799539,
      1660621633,
      3471099624,
      4011903706,
      913787905,
      3497959166,
      737222580,
      2514213453,
      2928710040,
      3937242737,
      1804850592,
      3499020752,
      2949064160,
      2386320175,
      2390070455,
      2415321851,
      4061277028,
      2290661394,
      2416832540,
      1336762016,
      1754252060,
      3520065937,
      3014181293,
      791618072,
      3188594551,
      3933548030,
      2332172193,
      3852520463,
      3043980520,
      413987798,
      3465142937,
      3030929376,
      4245938359,
      2093235073,
      3534596313,
      375366246,
      2157278981,
      2479649556,
      555357303,
      3870105701,
      2008414854,
      3344188149,
      4221384143,
      3956125452,
      2067696032,
      3594591187,
      2921233993,
      2428461,
      544322398,
      577241275,
      1471733935,
      610547355,
      4027169054,
      1432588573,
      1507829418,
      2025931657,
      3646575487,
      545086370,
      48609733,
      2200306550,
      1653985193,
      298326376,
      1316178497,
      3007786442,
      2064951626,
      458293330,
      2589141269,
      3591329599,
      3164325604,
      727753846,
      2179363840,
      146436021,
      1461446943,
      4069977195,
      705550613,
      3059967265,
      3887724982,
      4281599278,
      3313849956,
      1404054877,
      2845806497,
      146425753,
      1854211946,
      1266315497,
      3048417604,
      3681880366,
      3289982499,
      290971e4,
      1235738493,
      2632868024,
      2414719590,
      3970600049,
      1771706367,
      1449415276,
      3266420449,
      422970021,
      1963543593,
      2690192192,
      3826793022,
      1062508698,
      1531092325,
      1804592342,
      2583117782,
      2714934279,
      4024971509,
      1294809318,
      4028980673,
      1289560198,
      2221992742,
      1669523910,
      35572830,
      157838143,
      1052438473,
      1016535060,
      1802137761,
      1753167236,
      1386275462,
      3080475397,
      2857371447,
      1040679964,
      2145300060,
      2390574316,
      1461121720,
      2956646967,
      4031777805,
      4028374788,
      33600511,
      2920084762,
      1018524850,
      629373528,
      3691585981,
      3515945977,
      2091462646,
      2486323059,
      586499841,
      988145025,
      935516892,
      3367335476,
      2599673255,
      2839830854,
      265290510,
      3972581182,
      2759138881,
      3795373465,
      1005194799,
      847297441,
      406762289,
      1314163512,
      1332590856,
      1866599683,
      4127851711,
      750260880,
      613907577,
      1450815602,
      3165620655,
      3734664991,
      3650291728,
      3012275730,
      3704569646,
      1427272223,
      778793252,
      1343938022,
      2676280711,
      2052605720,
      1946737175,
      3164576444,
      3914038668,
      3967478842,
      3682934266,
      1661551462,
      3294938066,
      4011595847,
      840292616,
      3712170807,
      616741398,
      312560963,
      711312465,
      1351876610,
      322626781,
      1910503582,
      271666773,
      2175563734,
      1594956187,
      70604529,
      3617834859,
      1007753275,
      1495573769,
      4069517037,
      2549218298,
      2663038764,
      504708206,
      2263041392,
      3941167025,
      2249088522,
      1514023603,
      1998579484,
      1312622330,
      694541497,
      2582060303,
      2151582166,
      1382467621,
      776784248,
      2618340202,
      3323268794,
      2497899128,
      2784771155,
      503983604,
      4076293799,
      907881277,
      423175695,
      432175456,
      1378068232,
      4145222326,
      3954048622,
      3938656102,
      3820766613,
      2793130115,
      2977904593,
      26017576,
      3274890735,
      3194772133,
      1700274565,
      1756076034,
      4006520079,
      3677328699,
      720338349,
      1533947780,
      354530856,
      688349552,
      3973924725,
      1637815568,
      332179504,
      3949051286,
      53804574,
      2852348879,
      3044236432,
      1282449977,
      3583942155,
      3416972820,
      4006381244,
      1617046695,
      2628476075,
      3002303598,
      1686838959,
      431878346,
      2686675385,
      1700445008,
      1080580658,
      1009431731,
      832498133,
      3223435511,
      2605976345,
      2271191193,
      2516031870,
      1648197032,
      4164389018,
      2548247927,
      300782431,
      375919233,
      238389289,
      3353747414,
      2531188641,
      2019080857,
      1475708069,
      455242339,
      2609103871,
      448939670,
      3451063019,
      1395535956,
      2413381860,
      1841049896,
      1491858159,
      885456874,
      4264095073,
      4001119347,
      1565136089,
      3898914787,
      1108368660,
      540939232,
      1173283510,
      2745871338,
      3681308437,
      4207628240,
      3343053890,
      4016749493,
      1699691293,
      1103962373,
      3625875870,
      2256883143,
      3830138730,
      1031889488,
      3479347698,
      1535977030,
      4236805024,
      3251091107,
      2132092099,
      1774941330,
      1199868427,
      1452454533,
      157007616,
      2904115357,
      342012276,
      595725824,
      1480756522,
      206960106,
      497939518,
      591360097,
      863170706,
      2375253569,
      3596610801,
      1814182875,
      2094937945,
      3421402208,
      1082520231,
      3463918190,
      2785509508,
      435703966,
      3908032597,
      1641649973,
      2842273706,
      3305899714,
      1510255612,
      2148256476,
      2655287854,
      3276092548,
      4258621189,
      236887753,
      3681803219,
      274041037,
      1734335097,
      3815195456,
      3317970021,
      1899903192,
      1026095262,
      4050517792,
      356393447,
      2410691914,
      3873677099,
      3682840055,
      3913112168,
      2491498743,
      4132185628,
      2489919796,
      1091903735,
      1979897079,
      3170134830,
      3567386728,
      3557303409,
      857797738,
      1136121015,
      1342202287,
      507115054,
      2535736646,
      337727348,
      3213592640,
      1301675037,
      2528481711,
      1895095763,
      1721773893,
      3216771564,
      62756741,
      2142006736,
      835421444,
      2531993523,
      1442658625,
      3659876326,
      2882144922,
      676362277,
      1392781812,
      170690266,
      3921047035,
      1759253602,
      3611846912,
      1745797284,
      664899054,
      1329594018,
      3901205900,
      3045908486,
      2062866102,
      2865634940,
      3543621612,
      3464012697,
      1080764994,
      553557557,
      3656615353,
      3996768171,
      991055499,
      499776247,
      1265440854,
      648242737,
      3940784050,
      980351604,
      3713745714,
      1749149687,
      3396870395,
      4211799374,
      3640570775,
      1161844396,
      3125318951,
      1431517754,
      545492359,
      4268468663,
      3499529547,
      1437099964,
      2702547544,
      3433638243,
      2581715763,
      2787789398,
      1060185593,
      1593081372,
      2418618748,
      4260947970,
      69676912,
      2159744348,
      86519011,
      2512459080,
      3838209314,
      1220612927,
      3339683548,
      133810670,
      1090789135,
      1078426020,
      1569222167,
      845107691,
      3583754449,
      4072456591,
      1091646820,
      628848692,
      1613405280,
      3757631651,
      526609435,
      236106946,
      48312990,
      2942717905,
      3402727701,
      1797494240,
      859738849,
      992217954,
      4005476642,
      2243076622,
      3870952857,
      3732016268,
      765654824,
      3490871365,
      2511836413,
      1685915746,
      3888969200,
      1414112111,
      2273134842,
      3281911079,
      4080962846,
      172450625,
      2569994100,
      980381355,
      4109958455,
      2819808352,
      2716589560,
      2568741196,
      3681446669,
      3329971472,
      1835478071,
      660984891,
      3704678404,
      4045999559,
      3422617507,
      3040415634,
      1762651403,
      1719377915,
      3470491036,
      2693910283,
      3642056355,
      3138596744,
      1364962596,
      2073328063,
      1983633131,
      926494387,
      3423689081,
      2150032023,
      4096667949,
      1749200295,
      3328846651,
      309677260,
      2016342300,
      1779581495,
      3079819751,
      111262694,
      1274766160,
      443224088,
      298511866,
      1025883608,
      3806446537,
      1145181785,
      168956806,
      3641502830,
      3584813610,
      1689216846,
      3666258015,
      3200248200,
      1692713982,
      2646376535,
      4042768518,
      1618508792,
      1610833997,
      3523052358,
      4130873264,
      2001055236,
      3610705100,
      2202168115,
      4028541809,
      2961195399,
      1006657119,
      2006996926,
      3186142756,
      1430667929,
      3210227297,
      1314452623,
      4074634658,
      4101304120,
      2273951170,
      1399257539,
      3367210612,
      3027628629,
      1190975929,
      2062231137,
      2333990788,
      2221543033,
      2438960610,
      1181637006,
      548689776,
      2362791313,
      3372408396,
      3104550113,
      3145860560,
      296247880,
      1970579870,
      3078560182,
      3769228297,
      1714227617,
      3291629107,
      3898220290,
      166772364,
      1251581989,
      493813264,
      448347421,
      195405023,
      2709975567,
      677966185,
      3703036547,
      1463355134,
      2715995803,
      1338867538,
      1343315457,
      2802222074,
      2684532164,
      233230375,
      2599980071,
      2000651841,
      3277868038,
      1638401717,
      4028070440,
      3237316320,
      6314154,
      819756386,
      300326615,
      590932579,
      1405279636,
      3267499572,
      3150704214,
      2428286686,
      3959192993,
      3461946742,
      1862657033,
      1266418056,
      963775037,
      2089974820,
      2263052895,
      1917689273,
      448879540,
      3550394620,
      3981727096,
      150775221,
      3627908307,
      1303187396,
      508620638,
      2975983352,
      2726630617,
      1817252668,
      1876281319,
      1457606340,
      908771278,
      3720792119,
      3617206836,
      2455994898,
      1729034894,
      1080033504,
      976866871,
      3556439503,
      2881648439,
      1522871579,
      1555064734,
      1336096578,
      3548522304,
      2579274686,
      3574697629,
      3205460757,
      3593280638,
      3338716283,
      3079412587,
      564236357,
      2993598910,
      1781952180,
      1464380207,
      3163844217,
      3332601554,
      1699332808,
      1393555694,
      1183702653,
      3581086237,
      1288719814,
      691649499,
      2847557200,
      2895455976,
      3193889540,
      2717570544,
      1781354906,
      1676643554,
      2592534050,
      3230253752,
      1126444790,
      2770207658,
      2633158820,
      2210423226,
      2615765581,
      2414155088,
      3127139286,
      673620729,
      2805611233,
      1269405062,
      4015350505,
      3341807571,
      4149409754,
      1057255273,
      2012875353,
      2162469141,
      2276492801,
      2601117357,
      993977747,
      3918593370,
      2654263191,
      753973209,
      36408145,
      2530585658,
      25011837,
      3520020182,
      2088578344,
      530523599,
      2918365339,
      1524020338,
      1518925132,
      3760827505,
      3759777254,
      1202760957,
      3985898139,
      3906192525,
      674977740,
      4174734889,
      2031300136,
      2019492241,
      3983892565,
      4153806404,
      3822280332,
      352677332,
      2297720250,
      60907813,
      90501309,
      3286998549,
      1016092578,
      2535922412,
      2839152426,
      457141659,
      509813237,
      4120667899,
      652014361,
      1966332200,
      2975202805,
      55981186,
      2327461051,
      676427537,
      3255491064,
      2882294119,
      3433927263,
      1307055953,
      942726286,
      933058658,
      2468411793,
      3933900994,
      4215176142,
      1361170020,
      2001714738,
      2830558078,
      3274259782,
      1222529897,
      1679025792,
      2729314320,
      3714953764,
      1770335741,
      151462246,
      3013232138,
      1682292957,
      1483529935,
      471910574,
      1539241949,
      458788160,
      3436315007,
      1807016891,
      3718408830,
      978976581,
      1043663428,
      3165965781,
      1927990952,
      4200891579,
      2372276910,
      3208408903,
      3533431907,
      1412390302,
      2931980059,
      4132332400,
      1947078029,
      3881505623,
      4168226417,
      2941484381,
      1077988104,
      1320477388,
      886195818,
      18198404,
      3786409e3,
      2509781533,
      112762804,
      3463356488,
      1866414978,
      891333506,
      18488651,
      661792760,
      1628790961,
      3885187036,
      3141171499,
      876946877,
      2693282273,
      1372485963,
      791857591,
      2686433993,
      3759982718,
      3167212022,
      3472953795,
      2716379847,
      445679433,
      3561995674,
      3504004811,
      3574258232,
      54117162,
      3331405415,
      2381918588,
      3769707343,
      4154350007,
      1140177722,
      4074052095,
      668550556,
      3214352940,
      367459370,
      261225585,
      2610173221,
      4209349473,
      3468074219,
      3265815641,
      314222801,
      3066103646,
      3808782860,
      282218597,
      3406013506,
      3773591054,
      379116347,
      1285071038,
      846784868,
      2669647154,
      3771962079,
      3550491691,
      2305946142,
      453669953,
      1268987020,
      3317592352,
      3279303384,
      3744833421,
      2610507566,
      3859509063,
      266596637,
      3847019092,
      517658769,
      3462560207,
      3443424879,
      370717030,
      4247526661,
      2224018117,
      4143653529,
      4112773975,
      2788324899,
      2477274417,
      1456262402,
      2901442914,
      1517677493,
      1846949527,
      2295493580,
      3734397586,
      2176403920,
      1280348187,
      1908823572,
      3871786941,
      846861322,
      1172426758,
      3287448474,
      3383383037,
      1655181056,
      3139813346,
      901632758,
      1897031941,
      2986607138,
      3066810236,
      3447102507,
      1393639104,
      373351379,
      950779232,
      625454576,
      3124240540,
      4148612726,
      2007998917,
      544563296,
      2244738638,
      2330496472,
      2058025392,
      1291430526,
      424198748,
      50039436,
      29584100,
      3605783033,
      2429876329,
      2791104160,
      1057563949,
      3255363231,
      3075367218,
      3463963227,
      1469046755,
      985887462
    ];
    C_ORIG = [
      1332899944,
      1700884034,
      1701343084,
      1684370003,
      1668446532,
      1869963892
    ];
    __name2(_encipher, "_encipher");
    __name2(_streamtoword, "_streamtoword");
    __name2(_key, "_key");
    __name2(_ekskey, "_ekskey");
    __name2(_crypt, "_crypt");
    __name2(_hash, "_hash");
    __name2(encodeBase64, "encodeBase64");
    __name2(decodeBase64, "decodeBase64");
    bcryptjs_default = {
      setRandomFallback,
      genSaltSync,
      genSalt,
      hashSync,
      hash,
      compareSync,
      compare,
      getRounds,
      getSalt,
      truncates,
      encodeBase64,
      decodeBase64
    };
  }
});
var UserStorage;
var init_user_storage = __esm({
  "lib/user-storage.ts"() {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    init_bcryptjs();
    UserStorage = class {
      static {
        __name(this, "UserStorage");
      }
      constructor(db) {
        this.db = db;
      }
      static {
        __name2(this, "UserStorage");
      }
      async getAllCustomers() {
        try {
          const customers2 = await this.db.prepare(`
        SELECT id, email, name, is_premium, extension_activated, total_spent, total_orders, created_at
        FROM customers 
        ORDER BY created_at DESC
      `).all();
          return customers2.results || [];
        } catch (error) {
          console.error("Failed to get all customers:", error);
          return [];
        }
      }
      async initializeUsers() {
        try {
          await this.db.prepare(`
        CREATE TABLE IF NOT EXISTS users (
          id INTEGER PRIMARY KEY AUTOINCREMENT,
          email TEXT UNIQUE NOT NULL,
          password TEXT, -- Nullable for social logins
          name TEXT NOT NULL,
          role TEXT DEFAULT 'customer' NOT NULL,
          provider TEXT,
          provider_id TEXT,
          is_premium BOOLEAN DEFAULT 0,
          extension_activated BOOLEAN DEFAULT 0,
          premium_activated_at TEXT,
          total_spent REAL DEFAULT 0,
          total_orders INTEGER DEFAULT 0,
          created_at TEXT NOT NULL DEFAULT (datetime('now')),
          updated_at TEXT NOT NULL DEFAULT (datetime('now'))
        )
      `).run();
        } catch (error) {
          console.error("Failed to initialize users table:", error);
          throw new Error("Database initialization failed.");
        }
      }
      async createUser(email, password, name) {
        const hashedPassword = bcryptjs_default.hashSync(password, 10);
        const now = (/* @__PURE__ */ new Date()).toISOString();
        try {
          const result = await this.db.prepare(`
        INSERT INTO users (email, name, password, created_at, updatedAt)
        VALUES (?, ?, ?, datetime('now'), datetime('now'))
      `).bind(email, name, hashedPassword).run();
          const userId = result.meta.last_row_id;
          if (!userId) {
            throw new Error("Failed to get user ID after creation.");
          }
          const newUser = await this.getUserById(userId);
          if (!newUser) {
            throw new Error("Could not retrieve newly created user.");
          }
          return newUser;
        } catch (error) {
          console.error("Failed to create user:", error);
          throw error;
        }
      }
      async getUserByEmail(email) {
        try {
          const user = await this.db.prepare(
            "SELECT * FROM users WHERE email = ?"
          ).bind(email).first();
          return user || null;
        } catch (error) {
          console.error("Failed to get user by email:", error);
          return null;
        }
      }
      async validateUser(email, password) {
        try {
          const user = await this.getUserByEmail(email);
          if (user && user.password && bcryptjs_default.compareSync(password, user.password)) {
            const { password: _3, ...userWithoutPassword } = user;
            return userWithoutPassword;
          }
          return null;
        } catch (error) {
          console.error("Failed to validate user:", error);
          return null;
        }
      }
      async getUserById(id) {
        try {
          const user = await this.db.prepare(
            "SELECT * FROM users WHERE id = ?"
          ).bind(id).first();
          return user || null;
        } catch (error) {
          console.error("Failed to get user by ID:", error);
          return null;
        }
      }
    };
  }
});
function json4(data, status = 200) {
  return new Response(JSON.stringify(data), {
    status,
    headers: {
      "Content-Type": "application/json",
      "Access-Control-Allow-Origin": "*"
    }
  });
}
__name(json4, "json4");
var onRequestPost3;
var onRequestGet10;
var onRequestOptions5;
var init_messages = __esm({
  "api/tickets/[id]/messages.ts"() {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    init_db();
    init_user_storage();
    __name2(json4, "json");
    onRequestPost3 = /* @__PURE__ */ __name2(async ({ request, params, env }) => {
      try {
        const ticketId = Number(params.id);
        const expressBase = env?.EXPRESS_API_BASE;
        if (expressBase) {
          const base = expressBase.replace(/\/$/, "");
          const url = `${base}/api/tickets/${ticketId}/messages`;
          const headers = {};
          const cookie = request.headers.get("cookie");
          const ct3 = request.headers.get("content-type");
          const auth = request.headers.get("authorization");
          if (cookie) headers["cookie"] = cookie;
          if (ct3) headers["content-type"] = ct3;
          if (auth) headers["authorization"] = auth;
          const proxied = await fetch(url, {
            method: "POST",
            headers,
            body: request.body,
            redirect: "manual"
          });
          const respHeaders = new Headers(proxied.headers);
          const setCookie = respHeaders.get("set-cookie");
          if (setCookie) {
            const rewritten = setCookie.replace(/;\s*Domain=[^;]+/i, "");
            respHeaders.delete("set-cookie");
            respHeaders.append("set-cookie", rewritten);
          }
          return new Response(proxied.body, { status: proxied.status, headers: respHeaders });
        }
        let content;
        let customerEmail;
        let customerName;
        let isAdmin;
        let attachmentData;
        const ct2 = request.headers.get("content-type") || "";
        try {
          if (ct2.includes("application/json")) {
            const body = await request.json();
            content = body?.content ?? body?.message;
            customerEmail = body?.customerEmail;
            customerName = body?.customerName;
            isAdmin = !!body?.isAdmin;
          } else if (ct2.includes("multipart/form-data")) {
            const form = await request.formData();
            const raw = form.get("content") ?? form.get("message");
            content = typeof raw === "string" ? raw : void 0;
            const ce2 = form.get("customerEmail");
            customerEmail = typeof ce2 === "string" ? ce2 : void 0;
            const cn = form.get("customerName");
            customerName = typeof cn === "string" ? cn : void 0;
            const ia = form.get("isAdmin");
            isAdmin = typeof ia === "string" ? ia === "true" : false;
            const attachments = [];
            for (const [key, value] of form.entries()) {
              if (key.startsWith("attachment_") && value instanceof File) {
                attachments.push({
                  name: value.name,
                  type: value.type,
                  size: value.size
                });
              }
            }
            if (attachments.length > 0) {
              content = content || "[File attachment]";
              attachmentData = JSON.stringify(attachments);
            }
          } else {
            try {
              const body = await request.json();
              content = body?.content ?? body?.message;
              customerEmail = body?.customerEmail;
              customerName = body?.customerName;
              isAdmin = !!body?.isAdmin;
            } catch {
              const text3 = await request.text();
              content = text3 || void 0;
            }
          }
        } catch {
          const text3 = await request.text();
          content = text3 || void 0;
        }
        content = typeof content === "string" ? content.trim() : content;
        const hasAttachments = request.headers.get("content-type")?.includes("multipart/form-data");
        if (!content && !hasAttachments) {
          return json4({ success: false, message: "Missing content" }, 400);
        }
        if (!content && hasAttachments) {
          content = "[File attachment]";
        }
        const storage2 = new TicketStorage(env.DB);
        const ticket = await storage2.getTicketById(ticketId);
        if (!ticket) return json4({ success: false, message: "Ticket not found" }, 200);
        let finalSenderName = customerName;
        if (!customerName && customerEmail && !isAdmin) {
          try {
            const userStorage = new UserStorage(env.DB);
            await userStorage.initializeUsers();
            const user = await userStorage.getUserByEmail(customerEmail);
            if (user) {
              finalSenderName = user.name;
            }
          } catch (error) {
            console.error("Failed to fetch user name for message:", error);
          }
        }
        const msg = await storage2.addTicketMessage({
          ticket_id: ticketId,
          message: content || "[File attachment]",
          is_from_customer: !isAdmin,
          sender_name: finalSenderName || (isAdmin ? "Admin" : ticket.customer_name),
          sender_email: customerEmail || (isAdmin ? void 0 : ticket.customer_email),
          attachments: attachmentData
        });
        return json4({ success: true, message: msg });
      } catch (error) {
        console.error("Failed to add message:", error);
        const message = error instanceof Error ? error.message : "An unknown error occurred";
        return json4({ success: false, message }, 500);
      }
    }, "onRequestPost");
    onRequestGet10 = /* @__PURE__ */ __name2(async ({ request, params, env }) => {
      const ticketId = Number(params.id);
      const expressBase = env?.EXPRESS_API_BASE;
      if (expressBase) {
        const base = expressBase.replace(/\/$/, "");
        const url = `${base}/api/tickets/${ticketId}/messages`;
        const headers = {};
        const cookie = request.headers.get("cookie");
        const auth = request.headers.get("authorization");
        if (cookie) headers["cookie"] = cookie;
        if (auth) headers["authorization"] = auth;
        const proxied = await fetch(url, { headers, redirect: "manual" });
        const respHeaders = new Headers(proxied.headers);
        const setCookie = respHeaders.get("set-cookie");
        if (setCookie) {
          const rewritten = setCookie.replace(/;\s*Domain=[^;]+/i, "");
          respHeaders.delete("set-cookie");
          respHeaders.append("set-cookie", rewritten);
        }
        return new Response(proxied.body, { status: proxied.status, headers: respHeaders });
      }
      const storage2 = new TicketStorage(env.DB);
      const messages = await storage2.getTicketMessages(ticketId);
      const mapped = messages.map((m4) => ({
        id: m4.id,
        ticketId: m4.ticket_id,
        content: m4.message,
        isAdmin: !m4.is_from_customer,
        authorName: m4.sender_name,
        createdAt: m4.created_at,
        attachments: []
      }));
      return json4(mapped);
    }, "onRequestGet");
    onRequestOptions5 = /* @__PURE__ */ __name2(async () => {
      return new Response(null, {
        headers: {
          "Access-Control-Allow-Origin": "*",
          "Access-Control-Allow-Methods": "GET, POST, OPTIONS",
          "Access-Control-Allow-Headers": "Content-Type"
        }
      });
    }, "onRequestOptions");
  }
});
function getStore() {
  const s3 = globalThis.__TICKET_STORE__;
  if (!s3) {
    globalThis.__TICKET_STORE__ = { tickets: [], messages: /* @__PURE__ */ new Map(), seq: 1, msgSeq: 1 };
  }
  return globalThis.__TICKET_STORE__;
}
__name(getStore, "getStore");
function json5(data, status = 200) {
  return new Response(JSON.stringify(data), {
    status,
    headers: {
      "Content-Type": "application/json",
      "Access-Control-Allow-Origin": "*"
    }
  });
}
__name(json5, "json5");
function toInternalStatus(input) {
  if (input === "in_progress") return "in-progress";
  if (input === "closed") return "closed";
  return input || "open";
}
__name(toInternalStatus, "toInternalStatus");
var onRequestPut5;
var onRequestOptions6;
var init_status = __esm({
  "api/tickets/[id]/status.ts"() {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    __name2(getStore, "getStore");
    __name2(json5, "json");
    __name2(toInternalStatus, "toInternalStatus");
    onRequestPut5 = /* @__PURE__ */ __name2(async ({ request, params, env }) => {
      try {
        const ticketId = Number(params.id);
        const expressBase = env?.EXPRESS_API_BASE;
        if (expressBase) {
          const base = expressBase.replace(/\/$/, "");
          const url = `${base}/api/tickets/${ticketId}/status`;
          const headers = {};
          const cookie = request.headers.get("cookie");
          const ct2 = request.headers.get("content-type");
          const auth = request.headers.get("authorization");
          if (cookie) headers["cookie"] = cookie;
          if (ct2) headers["content-type"] = ct2;
          if (auth) headers["authorization"] = auth;
          const proxied = await fetch(url, { method: "PUT", headers, body: request.body, redirect: "manual" });
          const respHeaders = new Headers(proxied.headers);
          const setCookie = respHeaders.get("set-cookie");
          if (setCookie) {
            const rewritten = setCookie.replace(/;\s*Domain=[^;]+/i, "");
            respHeaders.delete("set-cookie");
            respHeaders.append("set-cookie", rewritten);
          }
          return new Response(proxied.body, { status: proxied.status, headers: respHeaders });
        }
        const body = await request.json().catch(() => ({}));
        const status = body?.status;
        if (!status) return json5({ success: false, message: "Missing status" }, 400);
        const store = getStore();
        const idx = store.tickets.findIndex((t3) => t3.id === ticketId);
        if (idx === -1) return json5({ success: false, message: "Ticket not found" }, 404);
        const now = (/* @__PURE__ */ new Date()).toISOString();
        store.tickets[idx] = {
          ...store.tickets[idx],
          status: toInternalStatus(status),
          updated_at: now
        };
        return json5({ success: true, ticket: store.tickets[idx] });
      } catch (e2) {
        return json5({ success: false, message: "Failed to update status" }, 500);
      }
    }, "onRequestPut");
    onRequestOptions6 = /* @__PURE__ */ __name2(async () => {
      return new Response(null, {
        headers: {
          "Access-Control-Allow-Origin": "*",
          "Access-Control-Allow-Methods": "PUT, OPTIONS",
          "Access-Control-Allow-Headers": "Content-Type"
        }
      });
    }, "onRequestOptions");
  }
});
function json6(data, status = 200) {
  return new Response(JSON.stringify(data), {
    status,
    headers: {
      "Content-Type": "application/json",
      "Access-Control-Allow-Origin": "*",
      "Access-Control-Allow-Methods": "GET, OPTIONS",
      "Access-Control-Allow-Headers": "Content-Type, Authorization"
    }
  });
}
__name(json6, "json6");
var onRequestGet11;
var init_purchase_status = __esm({
  "api/user/[id]/purchase-status.ts"() {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    __name2(json6, "json");
    onRequestGet11 = /* @__PURE__ */ __name2(async ({ request, params, env }) => {
      try {
        const userId = params.id;
        const authHeader = request.headers.get("Authorization");
        if (!authHeader || !authHeader.startsWith("Bearer ")) {
          return json6({
            hasPurchased: false,
            totalSpent: "0.00",
            completedOrders: 0,
            lastPurchaseDate: null
          });
        }
        const token = authHeader.substring(7);
        if (token === "demo-jwt-token" || token.startsWith("jwt-token-") && token.split("-")[2] === "1") {
          return json6({
            hasPurchased: true,
            totalSpent: "29.99",
            completedOrders: 1,
            lastPurchaseDate: Date.now()
          });
        }
        if (!env.DB) {
          return json6({
            hasPurchased: false,
            totalSpent: "0.00",
            completedOrders: 0,
            lastPurchaseDate: null
          });
        }
        try {
          if (!token.startsWith("jwt-token-")) {
            return json6({
              hasPurchased: false,
              totalSpent: "0.00",
              completedOrders: 0,
              lastPurchaseDate: null
            }, 401);
          }
          const parts = token.split("-");
          if (parts.length < 3) {
            return json6({
              hasPurchased: false,
              totalSpent: "0.00",
              completedOrders: 0,
              lastPurchaseDate: null
            }, 401);
          }
          const email = parts[2];
          const user = await env.DB.prepare(`
        SELECT id, email, extension_activated, is_premium
        FROM users WHERE email = ?
      `).bind(email).first();
          const customer = user ? null : await env.DB.prepare(`
        SELECT id, email, extension_activated
        FROM customers WHERE email = ?
      `).bind(email).first();
          if (!user && !customer) {
            return json6({
              hasPurchased: false,
              totalSpent: "0.00",
              completedOrders: 0,
              lastPurchaseDate: null
            });
          }
          const hasPremiumStatus = user?.is_premium === 1 || Boolean(customer?.extension_activated);
          const hasExtensionActivated = user?.extension_activated === 1 || Boolean(customer?.extension_activated);
          const orderStats = await env.DB.prepare(`
        SELECT COUNT(*) as completedOrders, 
               SUM(final_amount) as totalPaid,
               MAX(completed_at) as lastPurchaseDate
        FROM orders 
        WHERE customer_email = ? AND status = 'completed' AND final_amount > 0
      `).bind(email).first();
          const completedOrders = Number(orderStats?.completedOrders || 0);
          const totalPaid = String(orderStats?.totalPaid || "0.00");
          const lastPurchaseDate = orderStats?.lastPurchaseDate;
          const hasPurchased = completedOrders > 0 && parseFloat(totalPaid || "0") > 0 || (hasPremiumStatus || hasExtensionActivated);
          return json6({
            hasPurchased,
            totalSpent: totalPaid,
            completedOrders,
            lastPurchaseDate: lastPurchaseDate ? new Date(String(lastPurchaseDate)).getTime() : null
          });
        } catch (dbError) {
          console.error("Database error in purchase-status:", dbError);
          return json6({
            hasPurchased: false,
            totalSpent: "0.00",
            completedOrders: 0,
            lastPurchaseDate: null
          });
        }
      } catch (error) {
        return json6({
          error: error.message
        }, 500);
      }
    }, "onRequestGet");
  }
});
var onRequestGet12;
var onRequestOptions7;
var init_invoices = __esm({
  "api/user/[userId]/invoices.ts"() {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    onRequestGet12 = /* @__PURE__ */ __name2(async (context) => {
      try {
        const authHeader = context.request.headers.get("Authorization");
        if (!authHeader || !authHeader.startsWith("Bearer ")) {
          return new Response(JSON.stringify({ error: "Unauthorized" }), {
            status: 401,
            headers: {
              "Content-Type": "application/json",
              "Access-Control-Allow-Origin": "*",
              "Access-Control-Allow-Methods": "GET, OPTIONS",
              "Access-Control-Allow-Headers": "Content-Type, Authorization"
            }
          });
        }
        const token = authHeader.substring(7);
        if (token === "demo-jwt-token") {
          const demoInvoice = {
            id: 1,
            invoiceNumber: "INV-2025-000001",
            orderId: 1,
            customerName: "Demo User",
            customerEmail: "demo@example.com",
            invoiceDate: (/* @__PURE__ */ new Date()).toISOString(),
            dueDate: (/* @__PURE__ */ new Date()).toISOString(),
            subtotal: "29.99",
            taxAmount: "0.00",
            discountAmount: "0.00",
            totalAmount: "29.99",
            currency: "USD",
            status: "paid",
            paidAt: (/* @__PURE__ */ new Date()).toISOString(),
            notes: "Premium extension purchase",
            createdAt: (/* @__PURE__ */ new Date()).toISOString(),
            updatedAt: (/* @__PURE__ */ new Date()).toISOString(),
            paymentMethod: "stripe"
          };
          return new Response(JSON.stringify([demoInvoice]), {
            status: 200,
            headers: {
              "Content-Type": "application/json",
              "Access-Control-Allow-Origin": "*",
              "Access-Control-Allow-Methods": "GET, OPTIONS",
              "Access-Control-Allow-Headers": "Content-Type, Authorization"
            }
          });
        }
        if (!token.startsWith("jwt-token-")) {
          return new Response(JSON.stringify({ error: "Invalid token" }), {
            status: 401,
            headers: {
              "Content-Type": "application/json",
              "Access-Control-Allow-Origin": "*",
              "Access-Control-Allow-Methods": "GET, OPTIONS",
              "Access-Control-Allow-Headers": "Content-Type, Authorization"
            }
          });
        }
        const parts = token.split("-");
        if (parts.length < 3) {
          return new Response(JSON.stringify({ error: "Invalid token format" }), {
            status: 401,
            headers: {
              "Content-Type": "application/json",
              "Access-Control-Allow-Origin": "*",
              "Access-Control-Allow-Methods": "GET, OPTIONS",
              "Access-Control-Allow-Headers": "Content-Type, Authorization"
            }
          });
        }
        const userEmail = parts[2];
        if (!context.env.DB) {
          return new Response(JSON.stringify({ error: "Database not available" }), {
            status: 500,
            headers: {
              "Content-Type": "application/json",
              "Access-Control-Allow-Origin": "*",
              "Access-Control-Allow-Methods": "GET, OPTIONS",
              "Access-Control-Allow-Headers": "Content-Type, Authorization"
            }
          });
        }
        const query = `
      SELECT 
        i.id AS id,
        i.invoice_number AS invoiceNumber,
        i.order_id AS orderId,
        i.customer_name AS customerName,
        i.customer_email AS customerEmail,
        i.invoice_date AS invoiceDate,
        i.due_date AS dueDate,
        i.subtotal AS subtotal,
        i.tax_amount AS taxAmount,
        i.discount_amount AS discountAmount,
        i.total_amount AS totalAmount,
        i.currency AS currency,
        i.status AS status,
        i.paid_at AS paidAt,
        i.notes AS notes,
        i.created_at AS createdAt,
        i.updated_at AS updatedAt,
        o.payment_method AS paymentMethod
      FROM invoices i
      LEFT JOIN orders o ON i.order_id = o.id
      WHERE i.customer_email = ?
      ORDER BY i.created_at DESC
    `;
        try {
          const result = await context.env.DB.prepare(query).bind(userEmail).all();
          const invoices2 = result.results || [];
          return new Response(JSON.stringify(invoices2), {
            status: 200,
            headers: {
              "Content-Type": "application/json",
              "Access-Control-Allow-Origin": "*",
              "Access-Control-Allow-Methods": "GET, OPTIONS",
              "Access-Control-Allow-Headers": "Content-Type, Authorization"
            }
          });
        } catch (dbErr) {
          console.error("DB error in /api/user/[userId]/invoices:", dbErr);
          return new Response(JSON.stringify({ error: "Database error" }), {
            status: 500,
            headers: {
              "Content-Type": "application/json",
              "Access-Control-Allow-Origin": "*",
              "Access-Control-Allow-Methods": "GET, OPTIONS",
              "Access-Control-Allow-Headers": "Content-Type, Authorization"
            }
          });
        }
      } catch (error) {
        console.error("Error fetching user invoices:", error);
        return new Response(JSON.stringify({ error: "Failed to fetch invoices" }), {
          status: 500,
          headers: {
            "Content-Type": "application/json",
            "Access-Control-Allow-Origin": "*",
            "Access-Control-Allow-Methods": "GET, OPTIONS",
            "Access-Control-Allow-Headers": "Content-Type, Authorization"
          }
        });
      }
    }, "onRequestGet");
    onRequestOptions7 = /* @__PURE__ */ __name2(async () => {
      return new Response(null, {
        status: 200,
        headers: {
          "Access-Control-Allow-Origin": "*",
          "Access-Control-Allow-Methods": "GET, OPTIONS",
          "Access-Control-Allow-Headers": "Content-Type, Authorization"
        }
      });
    }, "onRequestOptions");
  }
});
var onRequestGet13;
var onRequestOptions8;
var init_orders = __esm({
  "api/user/[userId]/orders.ts"() {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    onRequestGet13 = /* @__PURE__ */ __name2(async (context) => {
      try {
        const { params } = context;
        const userId = params.userId;
        if (!userId) {
          return new Response(JSON.stringify({ error: "User ID is required" }), {
            status: 400,
            headers: { "Content-Type": "application/json" }
          });
        }
        const ordersQuery = `
      SELECT 
        id,
        customerEmail,
        customerName,
        productId,
        originalAmount,
        finalAmount,
        currency,
        status,
        paymentMethod,
        downloadToken,
        downloadCount,
        maxDownloads,
        activationCode,
        createdAt,
        completedAt
      FROM orders 
      WHERE customerEmail = (SELECT email FROM users WHERE id = ?)
      ORDER BY createdAt DESC
    `;
        const ordersResult = await context.env.DB.prepare(ordersQuery).bind(userId).all();
        return new Response(JSON.stringify(ordersResult.results || []), {
          status: 200,
          headers: {
            "Content-Type": "application/json",
            "Access-Control-Allow-Origin": "*",
            "Access-Control-Allow-Methods": "GET, OPTIONS",
            "Access-Control-Allow-Headers": "Content-Type"
          }
        });
      } catch (error) {
        console.error("Error fetching user orders:", error);
        return new Response(JSON.stringify({ error: "Failed to fetch orders" }), {
          status: 500,
          headers: {
            "Content-Type": "application/json",
            "Access-Control-Allow-Origin": "*"
          }
        });
      }
    }, "onRequestGet");
    onRequestOptions8 = /* @__PURE__ */ __name2(async () => {
      return new Response(null, {
        status: 200,
        headers: {
          "Access-Control-Allow-Origin": "*",
          "Access-Control-Allow-Methods": "GET, OPTIONS",
          "Access-Control-Allow-Headers": "Content-Type"
        }
      });
    }, "onRequestOptions");
  }
});
var onRequestGet14;
var onRequestOptions9;
var init_purchase_status2 = __esm({
  "api/user/[userId]/purchase-status.ts"() {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    onRequestGet14 = /* @__PURE__ */ __name2(async (context) => {
      try {
        const { params } = context;
        const userId = params.userId;
        if (!userId) {
          return new Response(JSON.stringify({ error: "User ID is required" }), {
            status: 400,
            headers: { "Content-Type": "application/json" }
          });
        }
        if (!context.env.DB) {
          return new Response(JSON.stringify({
            hasPurchased: false,
            totalSpent: "0.00",
            completedOrders: 0,
            lastPurchaseDate: null
          }), {
            status: 200,
            headers: {
              "Content-Type": "application/json",
              "Access-Control-Allow-Origin": "*"
            }
          });
        }
        let userResult = null;
        try {
          try {
            const customerQuery = `SELECT email FROM customers WHERE id = ?`;
            userResult = await context.env.DB.prepare(customerQuery).bind(userId).first();
          } catch (e2) {
            try {
              const customerQuery = `SELECT email FROM customers WHERE id = ?`;
              userResult = await context.env.DB.prepare(customerQuery).bind(parseInt(userId)).first();
            } catch (e22) {
              console.log("Customers table query failed");
            }
          }
          if (!userResult) {
            try {
              const usersQuery = `SELECT email FROM users WHERE id = ?`;
              userResult = await context.env.DB.prepare(usersQuery).bind(userId).first();
            } catch (e2) {
              try {
                const usersQuery = `SELECT email FROM users WHERE id = ?`;
                userResult = await context.env.DB.prepare(usersQuery).bind(parseInt(userId)).first();
              } catch (e22) {
                console.log("Users table query also failed");
              }
            }
          }
        } catch (tableError) {
          console.log("Table access error:", tableError);
        }
        if (!userResult) {
          return new Response(JSON.stringify({
            hasPurchased: false,
            totalSpent: "0.00",
            completedOrders: 0,
            lastPurchaseDate: null
          }), {
            status: 200,
            headers: {
              "Content-Type": "application/json",
              "Access-Control-Allow-Origin": "*"
            }
          });
        }
        let statusResult = null;
        try {
          const queryVariations = [
            `SELECT 
          COUNT(CASE WHEN status = 'completed' THEN 1 END) as completedOrders,
          COALESCE(SUM(CASE WHEN status = 'completed' THEN CAST(final_amount as REAL) ELSE 0 END), 0) as totalSpent,
          MAX(CASE WHEN status = 'completed' THEN created_at END) as lastPurchaseDate
        FROM orders 
        WHERE (user_id = ? OR customer_email = ?)`,
            `SELECT 
          COUNT(CASE WHEN status = 'completed' THEN 1 END) as completedOrders,
          COALESCE(SUM(CASE WHEN status = 'completed' THEN CAST("finalAmount" as REAL) ELSE 0 END), 0) as totalSpent,
          MAX(CASE WHEN status = 'completed' THEN "createdAt" END) as lastPurchaseDate
        FROM orders 
        WHERE ("userId" = ? OR "customerEmail" = ?)`,
            `SELECT 
          COUNT(CASE WHEN status = 'completed' THEN 1 END) as completedOrders,
          COALESCE(SUM(CASE WHEN status = 'completed' THEN CAST(finalAmount as REAL) ELSE 0 END), 0) as totalSpent,
          MAX(CASE WHEN status = 'completed' THEN createdAt END) as lastPurchaseDate
        FROM orders 
        WHERE (userId = ? OR customerEmail = ?)`
          ];
          for (const query of queryVariations) {
            try {
              statusResult = await context.env.DB.prepare(query).bind(userId, userResult.email).first();
              if (statusResult) break;
            } catch (e2) {
              try {
                statusResult = await context.env.DB.prepare(query).bind(parseInt(userId), userResult.email).first();
                if (statusResult) break;
              } catch (e22) {
                console.log("Query variation failed, trying next");
              }
            }
          }
        } catch (queryError) {
          console.log("All order queries failed:", queryError);
        }
        const hasPurchased = (statusResult?.completedOrders || 0) > 0;
        const totalSpent = (statusResult?.totalSpent || 0).toFixed(2);
        const completedOrders = statusResult?.completedOrders || 0;
        const lastPurchaseDate = statusResult?.lastPurchaseDate ? new Date(statusResult.lastPurchaseDate).getTime() : null;
        return new Response(JSON.stringify({
          hasPurchased,
          totalSpent,
          completedOrders,
          lastPurchaseDate
        }), {
          status: 200,
          headers: {
            "Content-Type": "application/json",
            "Access-Control-Allow-Origin": "*",
            "Access-Control-Allow-Methods": "GET, OPTIONS",
            "Access-Control-Allow-Headers": "Content-Type"
          }
        });
      } catch (error) {
        console.error("Error fetching purchase status:", error);
        return new Response(JSON.stringify({
          hasPurchased: false,
          totalSpent: "0.00",
          completedOrders: 0,
          lastPurchaseDate: null
        }), {
          status: 200,
          headers: {
            "Content-Type": "application/json",
            "Access-Control-Allow-Origin": "*"
          }
        });
      }
    }, "onRequestGet");
    onRequestOptions9 = /* @__PURE__ */ __name2(async () => {
      return new Response(null, {
        status: 200,
        headers: {
          "Access-Control-Allow-Origin": "*",
          "Access-Control-Allow-Methods": "GET, OPTIONS",
          "Access-Control-Allow-Headers": "Content-Type"
        }
      });
    }, "onRequestOptions");
  }
});
var onRequestGet15;
var onRequestOptions10;
var init_analytics = __esm({
  "api/admin/analytics.ts"() {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    onRequestGet15 = /* @__PURE__ */ __name2(async (context) => {
      try {
        let ordersStats = { totalOrders: 0, completedOrders: 0, totalRevenue: 0 };
        let usersStats = { totalUsers: 0, premiumUsers: 0 };
        try {
          const ordersStatsQuery = `
        SELECT 
          COUNT(*) as totalOrders,
          COUNT(CASE WHEN status = 'completed' THEN 1 END) as completedOrders,
          SUM(CASE WHEN status = 'completed' THEN CAST(final_amount as REAL) ELSE 0 END) as totalRevenue
        FROM orders
      `;
          const row = await context.env.DB.prepare(ordersStatsQuery).first();
          if (row) ordersStats = row;
        } catch (_3) {
        }
        try {
          const usersStatsQuery = `
        SELECT 
          COUNT(*) as totalUsers,
          COUNT(CASE WHEN is_premium = 1 THEN 1 END) as premiumUsers
        FROM users
      `;
          const row = await context.env.DB.prepare(usersStatsQuery).first();
          if (row) usersStats = row;
        } catch (_3) {
        }
        const analytics = {
          totalRevenue: Number(ordersStats?.totalRevenue) || 0,
          totalSales: Number(ordersStats?.completedOrders) || 0,
          activeCustomers: Number(usersStats?.totalUsers) || 0,
          avgRating: 4.9
          // Static rating
        };
        return new Response(JSON.stringify({ success: true, ...analytics }), {
          headers: {
            "Content-Type": "application/json",
            "Access-Control-Allow-Origin": "*",
            "Access-Control-Allow-Methods": "GET, OPTIONS",
            "Access-Control-Allow-Headers": "Content-Type"
          }
        });
      } catch (error) {
        console.error("Failed to get analytics:", error);
        return new Response(JSON.stringify({
          success: false,
          message: "Failed to load analytics",
          totalRevenue: 0,
          totalSales: 0,
          activeCustomers: 0,
          avgRating: 4.9
        }), {
          status: 500,
          headers: {
            "Content-Type": "application/json",
            "Access-Control-Allow-Origin": "*"
          }
        });
      }
    }, "onRequestGet");
    onRequestOptions10 = /* @__PURE__ */ __name2(async () => {
      return new Response(null, {
        status: 200,
        headers: {
          "Access-Control-Allow-Origin": "*",
          "Access-Control-Allow-Methods": "GET, OPTIONS",
          "Access-Control-Allow-Headers": "Content-Type"
        }
      });
    }, "onRequestOptions");
  }
});
var onRequestOptions11;
var onRequestGet16;
var onRequestPost4;
var onRequestPut6;
var onRequestDelete3;
var init_announcement_badges = __esm({
  "api/admin/announcement-badges.ts"() {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    init_settings_storage();
    onRequestOptions11 = /* @__PURE__ */ __name2(async () => {
      return new Response(null, {
        status: 200,
        headers: {
          "Access-Control-Allow-Origin": "*",
          "Access-Control-Allow-Methods": "GET, POST, PUT, DELETE, OPTIONS",
          "Access-Control-Allow-Headers": "Content-Type, Authorization"
        }
      });
    }, "onRequestOptions");
    onRequestGet16 = /* @__PURE__ */ __name2(async (context) => {
      try {
        const settingsStorage = new SettingsStorage(context.env.DB);
        const badgesData = await settingsStorage.getSetting("announcement_badges");
        const badges = badgesData ? JSON.parse(badgesData) : [];
        console.log("Retrieved announcement badges:", badges.length);
        return new Response(JSON.stringify(badges), {
          status: 200,
          headers: {
            "Content-Type": "application/json",
            "Access-Control-Allow-Origin": "*"
          }
        });
      } catch (error) {
        console.error("Error fetching announcement badges:", error);
        return new Response(JSON.stringify({
          error: "Failed to fetch announcement badges",
          details: error instanceof Error ? error.message : "Unknown error"
        }), {
          status: 500,
          headers: {
            "Content-Type": "application/json",
            "Access-Control-Allow-Origin": "*"
          }
        });
      }
    }, "onRequestGet");
    onRequestPost4 = /* @__PURE__ */ __name2(async (context) => {
      try {
        const settingsStorage = new SettingsStorage(context.env.DB);
        const requestData = await context.request.json();
        console.log("Creating new announcement badge:", JSON.stringify(requestData, null, 2));
        const newBadge = {
          id: crypto.randomUUID(),
          title: requestData.title || requestData.text || requestData.badgeText || requestData.content || requestData.message || "",
          subtitle: requestData.subtitle || "",
          backgroundColor: requestData.backgroundColor || requestData.bgColor || requestData.background || "#007cba",
          textColor: requestData.textColor || requestData.color || requestData.foreground || "#ffffff",
          priority: parseInt(requestData.priority) || 1,
          isActive: requestData.isActive !== void 0 ? Boolean(requestData.isActive) : requestData.enabled !== void 0 ? Boolean(requestData.enabled) : true,
          createdAt: (/* @__PURE__ */ new Date()).toISOString(),
          updatedAt: (/* @__PURE__ */ new Date()).toISOString()
        };
        console.log("Created badge object:", JSON.stringify(newBadge, null, 2));
        if (requestData.autoTranslate !== false && newBadge.title) {
          try {
            let openaiApiKey = context.env.OPENAI_API_KEY;
            if (!openaiApiKey) {
              const apiKeySetting = await settingsStorage.getSetting("openai_api_key");
              openaiApiKey = apiKeySetting;
            }
            if (openaiApiKey) {
              const supportedLanguages = ["de", "fr", "es", "it", "pt", "nl", "da", "no", "fi", "tr", "pl", "ru"];
              const translationResponse = await fetch("https://api.openai.com/v1/chat/completions", {
                method: "POST",
                headers: {
                  "Authorization": `Bearer ${openaiApiKey}`,
                  "Content-Type": "application/json"
                },
                body: JSON.stringify({
                  model: "gpt-4o",
                  messages: [
                    {
                      role: "system",
                      content: "You are a professional translator specializing in marketing content. Provide accurate, culturally appropriate translations that maintain the marketing impact of the original text."
                    },
                    {
                      role: "user",
                      content: `Translate the following announcement badge text into multiple languages.

Original text (English): "${newBadge.title}"
Context: Announcement badge for a Chrome extension product website
Target languages: ${supportedLanguages.map((code) => `${code}: ${{ "de": "German", "fr": "French", "es": "Spanish", "it": "Italian", "pt": "Portuguese", "nl": "Dutch", "da": "Danish", "no": "Norwegian", "fi": "Finnish", "tr": "Turkish", "pl": "Polish", "ru": "Russian" }[code]}`).join(", ")}
Tone: Marketing/promotional tone

Requirements:
- Maintain the marketing/promotional tone
- Keep the same emotional impact as the original
- Adapt cultural nuances appropriately for each target market
- Keep translations concise and impactful for badge display
- Ensure translations sound natural to native speakers

Respond with a JSON object where keys are language codes (${supportedLanguages.join(", ")}) and values are the translated text.

Example format:
{
  "de": "German translation here",
  "fr": "French translation here"
}`
                    }
                  ],
                  response_format: { type: "json_object" },
                  temperature: 0.3,
                  max_tokens: 1e3
                })
              });
              if (translationResponse.ok) {
                const data = await translationResponse.json();
                const translationText = data.choices[0]?.message?.content;
                if (translationText) {
                  const translations = JSON.parse(translationText);
                  newBadge.textTranslations = translations;
                  console.log("Auto-translated badge to languages:", Object.keys(translations));
                }
              }
            }
          } catch (translationError) {
            console.warn("Auto-translation failed, continuing without translations:", translationError);
          }
        }
        const existingBadgesData = await settingsStorage.getSetting("announcement_badges");
        const existingBadges = existingBadgesData ? JSON.parse(existingBadgesData) : [];
        existingBadges.push(newBadge);
        await settingsStorage.setSetting("announcement_badges", JSON.stringify(existingBadges));
        console.log("Created announcement badge:", newBadge.id);
        return new Response(JSON.stringify({ badge: newBadge }), {
          status: 201,
          headers: {
            "Content-Type": "application/json",
            "Access-Control-Allow-Origin": "*"
          }
        });
      } catch (error) {
        console.error("Error creating announcement badge:", error);
        return new Response(JSON.stringify({
          error: "Failed to create announcement badge",
          details: error instanceof Error ? error.message : "Unknown error"
        }), {
          status: 500,
          headers: {
            "Content-Type": "application/json",
            "Access-Control-Allow-Origin": "*"
          }
        });
      }
    }, "onRequestPost");
    onRequestPut6 = /* @__PURE__ */ __name2(async (context) => {
      try {
        const settingsStorage = new SettingsStorage(context.env.DB);
        const requestData = await context.request.json();
        const badgeId = requestData.id;
        if (!badgeId) {
          return new Response(JSON.stringify({ error: "Badge ID is required" }), {
            status: 400,
            headers: {
              "Content-Type": "application/json",
              "Access-Control-Allow-Origin": "*"
            }
          });
        }
        console.log("Updating announcement badge:", badgeId);
        const existingBadgesData = await settingsStorage.getSetting("announcement_badges");
        const existingBadges = existingBadgesData ? JSON.parse(existingBadgesData) : [];
        const badgeIndex = existingBadges.findIndex((badge) => badge.id === badgeId);
        if (badgeIndex === -1) {
          return new Response(JSON.stringify({ error: "Badge not found" }), {
            status: 404,
            headers: {
              "Content-Type": "application/json",
              "Access-Control-Allow-Origin": "*"
            }
          });
        }
        existingBadges[badgeIndex] = {
          ...existingBadges[badgeIndex],
          title: requestData.title || requestData.text || requestData.badgeText || existingBadges[badgeIndex].title,
          subtitle: requestData.subtitle || existingBadges[badgeIndex].subtitle,
          backgroundColor: requestData.backgroundColor || requestData.bgColor || existingBadges[badgeIndex].backgroundColor,
          textColor: requestData.textColor || requestData.color || existingBadges[badgeIndex].textColor,
          priority: requestData.priority ? parseInt(requestData.priority) : existingBadges[badgeIndex].priority,
          isActive: requestData.isActive !== void 0 ? requestData.isActive : existingBadges[badgeIndex].isActive,
          updatedAt: (/* @__PURE__ */ new Date()).toISOString()
        };
        await settingsStorage.setSetting("announcement_badges", JSON.stringify(existingBadges));
        console.log("Updated announcement badge:", badgeId);
        return new Response(JSON.stringify({ badge: existingBadges[badgeIndex] }), {
          status: 200,
          headers: {
            "Content-Type": "application/json",
            "Access-Control-Allow-Origin": "*"
          }
        });
      } catch (error) {
        console.error("Error updating announcement badge:", error);
        return new Response(JSON.stringify({
          error: "Failed to update announcement badge",
          details: error instanceof Error ? error.message : "Unknown error"
        }), {
          status: 500,
          headers: {
            "Content-Type": "application/json",
            "Access-Control-Allow-Origin": "*"
          }
        });
      }
    }, "onRequestPut");
    onRequestDelete3 = /* @__PURE__ */ __name2(async (context) => {
      try {
        const settingsStorage = new SettingsStorage(context.env.DB);
        const url = new URL(context.request.url);
        const badgeId = url.searchParams.get("id");
        if (!badgeId) {
          return new Response(JSON.stringify({ error: "Badge ID is required" }), {
            status: 400,
            headers: {
              "Content-Type": "application/json",
              "Access-Control-Allow-Origin": "*"
            }
          });
        }
        console.log("Deleting announcement badge:", badgeId);
        const existingBadgesData = await settingsStorage.getSetting("announcement_badges");
        const existingBadges = existingBadgesData ? JSON.parse(existingBadgesData) : [];
        const updatedBadges = existingBadges.filter((badge) => badge.id !== badgeId);
        if (updatedBadges.length === existingBadges.length) {
          return new Response(JSON.stringify({ error: "Badge not found" }), {
            status: 404,
            headers: {
              "Content-Type": "application/json",
              "Access-Control-Allow-Origin": "*"
            }
          });
        }
        await settingsStorage.setSetting("announcement_badges", JSON.stringify(updatedBadges));
        console.log("Deleted announcement badge:", badgeId);
        return new Response(JSON.stringify({ success: true }), {
          status: 200,
          headers: {
            "Content-Type": "application/json",
            "Access-Control-Allow-Origin": "*"
          }
        });
      } catch (error) {
        console.error("Error deleting announcement badge:", error);
        return new Response(JSON.stringify({
          error: "Failed to delete announcement badge",
          details: error instanceof Error ? error.message : "Unknown error"
        }), {
          status: 500,
          headers: {
            "Content-Type": "application/json",
            "Access-Control-Allow-Origin": "*"
          }
        });
      }
    }, "onRequestDelete");
  }
});
var onRequestGet17;
var onRequestPut7;
var onRequestOptions12;
var init_auth_settings = __esm({
  "api/admin/auth-settings.ts"() {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    onRequestGet17 = /* @__PURE__ */ __name2(async (context) => {
      const { env } = context;
      try {
        const selectQuery = `SELECT * FROM auth_settings WHERE id = 1`;
        const result = await env.DB.prepare(selectQuery).first();
        if (!result) {
          const defaultSettings2 = {
            googleEnabled: false,
            facebookEnabled: false,
            githubEnabled: false,
            recaptchaEnabled: false,
            recaptchaCustomerEnabled: false,
            recaptchaAdminEnabled: false,
            recaptchaSiteKey: "",
            googleClientId: "",
            googleClientSecret: "",
            facebookAppId: "",
            facebookAppSecret: "",
            githubClientId: "",
            githubClientSecret: "",
            jwtSecret: "demo-jwt-secret",
            sessionTimeout: 3600
          };
          return new Response(JSON.stringify(defaultSettings2), {
            headers: {
              "Content-Type": "application/json",
              "Access-Control-Allow-Origin": "*"
            }
          });
        }
        const authSettings2 = {
          googleEnabled: Boolean(result.google_enabled),
          facebookEnabled: Boolean(result.facebook_enabled),
          githubEnabled: Boolean(result.github_enabled),
          recaptchaEnabled: Boolean(result.recaptcha_enabled),
          recaptchaCustomerEnabled: Boolean(result.recaptcha_customer_enabled),
          recaptchaAdminEnabled: Boolean(result.recaptcha_admin_enabled),
          recaptchaSiteKey: result.recaptcha_site_key || "",
          googleClientId: result.google_client_id || "",
          googleClientSecret: result.google_client_secret || "",
          facebookAppId: result.facebook_app_id || "",
          facebookAppSecret: result.facebook_app_secret || "",
          githubClientId: result.github_client_id || "",
          githubClientSecret: result.github_client_secret || "",
          jwtSecret: result.jwt_secret || "demo-jwt-secret",
          sessionTimeout: result.session_timeout || 3600
        };
        return new Response(JSON.stringify(authSettings2), {
          headers: {
            "Content-Type": "application/json",
            "Access-Control-Allow-Origin": "*"
          }
        });
      } catch (error) {
        console.error("Error fetching auth settings:", error);
        return new Response(JSON.stringify({
          message: "Error fetching auth settings: " + error.message
        }), {
          status: 500,
          headers: {
            "Content-Type": "application/json",
            "Access-Control-Allow-Origin": "*"
          }
        });
      }
    }, "onRequestGet");
    onRequestPut7 = /* @__PURE__ */ __name2(async (context) => {
      const { request, env } = context;
      try {
        const settings3 = await request.json();
        const updateData = {
          google_enabled: settings3.googleEnabled ? 1 : 0,
          google_client_id: settings3.googleClientId || null,
          google_client_secret: settings3.googleClientSecret || null,
          facebook_enabled: settings3.facebookEnabled ? 1 : 0,
          facebook_app_id: settings3.facebookAppId || null,
          facebook_app_secret: settings3.facebookAppSecret || null,
          github_enabled: settings3.githubEnabled ? 1 : 0,
          github_client_id: settings3.githubClientId || null,
          github_client_secret: settings3.githubClientSecret || null,
          recaptcha_enabled: settings3.recaptchaEnabled ? 1 : 0,
          recaptcha_site_key: settings3.recaptchaSiteKey || null,
          recaptcha_secret_key: settings3.recaptchaSecretKey || null,
          recaptcha_mode: settings3.recaptchaMode || "v2",
          recaptcha_customer_enabled: settings3.recaptchaCustomerEnabled ? 1 : 0,
          recaptcha_admin_enabled: settings3.recaptchaAdminEnabled ? 1 : 0,
          jwt_secret: settings3.jwtSecret || "demo-jwt-secret",
          session_timeout: settings3.sessionTimeout || 3600,
          stripe_enabled: settings3.stripeEnabled ? 1 : 0,
          stripe_public_key: settings3.stripePublicKey || null,
          stripe_secret_key: settings3.stripeSecretKey || null,
          updated_at: (/* @__PURE__ */ new Date()).toISOString()
        };
        const updateQuery = `
      UPDATE auth_settings 
      SET google_enabled = ?, google_client_id = ?, google_client_secret = ?,
          facebook_enabled = ?, facebook_app_id = ?, facebook_app_secret = ?,
          github_enabled = ?, github_client_id = ?, github_client_secret = ?,
          recaptcha_enabled = ?, recaptcha_site_key = ?, recaptcha_secret_key = ?,
          recaptcha_mode = ?, recaptcha_customer_enabled = ?, recaptcha_admin_enabled = ?,
          jwt_secret = ?, session_timeout = ?, stripe_enabled = ?, stripe_public_key = ?, 
          stripe_secret_key = ?, updated_at = ?
      WHERE id = 1
    `;
        await env.DB.prepare(updateQuery).bind(
          updateData.google_enabled,
          updateData.google_client_id,
          updateData.google_client_secret,
          updateData.facebook_enabled,
          updateData.facebook_app_id,
          updateData.facebook_app_secret,
          updateData.github_enabled,
          updateData.github_client_id,
          updateData.github_client_secret,
          updateData.recaptcha_enabled,
          updateData.recaptcha_site_key,
          updateData.recaptcha_secret_key,
          updateData.recaptcha_mode,
          updateData.recaptcha_customer_enabled,
          updateData.recaptcha_admin_enabled,
          updateData.jwt_secret,
          updateData.session_timeout,
          updateData.stripe_enabled,
          updateData.stripe_public_key,
          updateData.stripe_secret_key,
          updateData.updated_at
        ).run();
        const selectQuery = `SELECT * FROM auth_settings WHERE id = 1`;
        const result = await env.DB.prepare(selectQuery).first();
        const updatedSettings = {
          googleEnabled: Boolean(result.google_enabled),
          facebookEnabled: Boolean(result.facebook_enabled),
          githubEnabled: Boolean(result.github_enabled),
          recaptchaEnabled: Boolean(result.recaptcha_enabled),
          recaptchaCustomerEnabled: Boolean(result.recaptcha_customer_enabled),
          recaptchaAdminEnabled: Boolean(result.recaptcha_admin_enabled),
          recaptchaSiteKey: result.recaptcha_site_key || "",
          googleClientId: result.google_client_id || "",
          facebookAppId: result.facebook_app_id || "",
          githubClientId: result.github_client_id || ""
        };
        return new Response(JSON.stringify(updatedSettings), {
          headers: {
            "Content-Type": "application/json",
            "Access-Control-Allow-Origin": "*"
          }
        });
      } catch (error) {
        console.error("Error updating auth settings:", error);
        return new Response(JSON.stringify({
          success: false,
          message: "Failed to update authentication settings: " + error.message
        }), {
          status: 500,
          headers: {
            "Content-Type": "application/json",
            "Access-Control-Allow-Origin": "*"
          }
        });
      }
    }, "onRequestPut");
    onRequestOptions12 = /* @__PURE__ */ __name2(async () => {
      return new Response(null, {
        headers: {
          "Access-Control-Allow-Origin": "*",
          "Access-Control-Allow-Methods": "GET, PUT, OPTIONS",
          "Access-Control-Allow-Headers": "Content-Type"
        }
      });
    }, "onRequestOptions");
  }
});
var onRequestGet18;
var onRequestPut8;
var onRequestOptions13;
var init_chat_settings = __esm({
  "api/admin/chat-settings.ts"() {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    init_settings_storage();
    onRequestGet18 = /* @__PURE__ */ __name2(async ({ env }) => {
      try {
        if (!env.DB) {
          return new Response(JSON.stringify({
            success: false,
            message: "Database not available"
          }), {
            status: 500,
            headers: {
              "Content-Type": "application/json",
              "Access-Control-Allow-Origin": "*"
            }
          });
        }
        const settingsStorage = new SettingsStorage(env.DB);
        await settingsStorage.initializeSettings();
        const settings3 = await settingsStorage.getChatSettings();
        return new Response(JSON.stringify({
          success: true,
          ...settings3
        }), {
          headers: {
            "Content-Type": "application/json",
            "Access-Control-Allow-Origin": "*"
          }
        });
      } catch (error) {
        console.error("Failed to get chat settings:", error);
        return new Response(JSON.stringify({
          success: false,
          message: "Failed to load chat settings"
        }), {
          status: 500,
          headers: {
            "Content-Type": "application/json",
            "Access-Control-Allow-Origin": "*"
          }
        });
      }
    }, "onRequestGet");
    onRequestPut8 = /* @__PURE__ */ __name2(async ({ request, env }) => {
      try {
        console.log("Chat settings PUT request received");
        console.log("Environment DB available:", !!env.DB);
        if (!env.DB) {
          console.error("Database not available in environment");
          return new Response(JSON.stringify({
            success: false,
            message: "Database not available"
          }), {
            status: 500,
            headers: {
              "Content-Type": "application/json",
              "Access-Control-Allow-Origin": "*"
            }
          });
        }
        const requestBody = await request.json();
        console.log("Request body received:", requestBody);
        const { openaiApiKey, assistantId, chatModel, enabled } = requestBody;
        console.log("Initializing settings storage...");
        const settingsStorage = new SettingsStorage(env.DB);
        try {
          await settingsStorage.initializeSettings();
          console.log("Settings storage initialized successfully");
        } catch (initError) {
          console.error("Failed to initialize settings storage:", initError);
          throw initError;
        }
        const settingsToUpdate = {};
        if (openaiApiKey && openaiApiKey.trim() !== "" && openaiApiKey !== "***hidden***") {
          settingsToUpdate.openaiApiKey = openaiApiKey.trim();
        }
        if (assistantId !== void 0) {
          settingsToUpdate.assistantId = assistantId;
        }
        if (chatModel && chatModel.trim() !== "") {
          settingsToUpdate.chatModel = chatModel.trim();
        }
        if (enabled !== void 0) {
          settingsToUpdate.enabled = enabled;
        }
        console.log("Settings to update:", settingsToUpdate);
        try {
          await settingsStorage.setChatSettings(settingsToUpdate);
          console.log("Settings updated successfully");
        } catch (updateError) {
          console.error("Failed to update settings:", updateError);
          throw updateError;
        }
        return new Response(JSON.stringify({
          success: true,
          message: "Chat settings updated successfully"
        }), {
          headers: {
            "Content-Type": "application/json",
            "Access-Control-Allow-Origin": "*"
          }
        });
      } catch (error) {
        console.error("Chat settings PUT error:", error);
        console.error("Error stack:", error.stack);
        return new Response(JSON.stringify({
          success: false,
          message: `Failed to update chat settings: ${error.message || error}`,
          error: error.toString()
        }), {
          status: 500,
          headers: {
            "Content-Type": "application/json",
            "Access-Control-Allow-Origin": "*"
          }
        });
      }
    }, "onRequestPut");
    onRequestOptions13 = /* @__PURE__ */ __name2(async () => {
      return new Response(null, {
        status: 200,
        headers: {
          "Access-Control-Allow-Origin": "*",
          "Access-Control-Allow-Methods": "GET, PUT, OPTIONS",
          "Access-Control-Allow-Headers": "Content-Type, Authorization"
        }
      });
    }, "onRequestOptions");
  }
});
function json7(data, status = 200) {
  return new Response(JSON.stringify(data), {
    status,
    headers: {
      "Content-Type": "application/json",
      "Access-Control-Allow-Origin": "*"
    }
  });
}
__name(json7, "json7");
var onRequestGet19;
var init_check_user_data = __esm({
  "api/admin/check-user-data.ts"() {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    __name2(json7, "json");
    onRequestGet19 = /* @__PURE__ */ __name2(async ({ request, env }) => {
      try {
        const url = new URL(request.url);
        const email = url.searchParams.get("email");
        if (!email) {
          return json7({ success: false, message: "Email required" }, 400);
        }
        if (!env.DB) {
          return json7({ success: false, message: "Database not available" }, 500);
        }
        const user = await env.DB.prepare(`
      SELECT id, email, name, is_premium, extension_activated, premium_activated_at, created_at
      FROM users WHERE email = ?
    `).bind(email).first();
        const customer = await env.DB.prepare(`
      SELECT id, email, name, is_premium, extension_activated, created_at
      FROM customers WHERE email = ?
    `).bind(email).first();
        const orders2 = await env.DB.prepare(`
      SELECT id, customer_id, customer_email, original_amount, final_amount, status, created_at, completed_at
      FROM orders WHERE customer_email = ?
    `).bind(email).all();
        const invoices2 = await env.DB.prepare(`
      SELECT id, invoice_number, customer_id, order_id, amount, status, created_at
      FROM invoices WHERE customer_id IN (
        SELECT id FROM customers WHERE email = ?
        UNION
        SELECT id FROM users WHERE email = ?
      )
    `).bind(email, email).all();
        return json7({
          success: true,
          email,
          user,
          customer,
          orders: orders2.results,
          invoices: invoices2.results,
          summary: {
            userExists: !!user,
            customerExists: !!customer,
            userPremium: user?.is_premium === 1,
            customerPremium: customer?.is_premium === 1,
            userExtensionActivated: user?.extension_activated === 1,
            customerExtensionActivated: customer?.extension_activated === 1,
            totalOrders: orders2.results?.length || 0,
            totalInvoices: invoices2.results?.length || 0
          }
        });
      } catch (error) {
        console.error("Error checking user data:", error);
        return json7({
          success: false,
          message: error.message
        }, 500);
      }
    }, "onRequestGet");
  }
});
var onRequestOptions14;
var onRequestGet20;
var onRequestPost5;
var onRequestPut9;
var onRequestDelete4;
var init_countdown_banners = __esm({
  "api/admin/countdown-banners.ts"() {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    init_settings_storage();
    onRequestOptions14 = /* @__PURE__ */ __name2(async () => {
      return new Response(null, {
        status: 200,
        headers: {
          "Access-Control-Allow-Origin": "*",
          "Access-Control-Allow-Methods": "GET, POST, PUT, DELETE, OPTIONS",
          "Access-Control-Allow-Headers": "Content-Type, Authorization"
        }
      });
    }, "onRequestOptions");
    onRequestGet20 = /* @__PURE__ */ __name2(async (context) => {
      try {
        const settingsStorage = new SettingsStorage(context.env.DB);
        const bannersData = await settingsStorage.getSetting("countdown_banners");
        const banners = bannersData ? JSON.parse(bannersData) : [];
        console.log("Retrieved countdown banners:", banners.length);
        return new Response(JSON.stringify(banners), {
          status: 200,
          headers: {
            "Content-Type": "application/json",
            "Access-Control-Allow-Origin": "*"
          }
        });
      } catch (error) {
        console.error("Error fetching countdown banners:", error);
        return new Response(JSON.stringify({
          error: "Failed to fetch countdown banners",
          details: error instanceof Error ? error.message : "Unknown error"
        }), {
          status: 500,
          headers: {
            "Content-Type": "application/json",
            "Access-Control-Allow-Origin": "*"
          }
        });
      }
    }, "onRequestGet");
    onRequestPost5 = /* @__PURE__ */ __name2(async (context) => {
      try {
        const settingsStorage = new SettingsStorage(context.env.DB);
        const requestData = await context.request.json();
        console.log("Creating new countdown banner:", requestData);
        const newBanner = {
          id: crypto.randomUUID(),
          title: requestData.title || "",
          subtitle: requestData.subtitle || "",
          targetPrice: parseFloat(requestData.targetPrice) || 0,
          originalPrice: parseFloat(requestData.originalPrice) || 0,
          endDate: requestData.endDate || new Date(Date.now() + 7 * 24 * 60 * 60 * 1e3).toISOString(),
          priority: requestData.priority || 1,
          backgroundColor: requestData.backgroundColor || "#007cba",
          textColor: requestData.textColor || "#ffffff",
          isActive: requestData.isActive !== false,
          createdAt: (/* @__PURE__ */ new Date()).toISOString(),
          updatedAt: (/* @__PURE__ */ new Date()).toISOString()
        };
        if (requestData.autoTranslate !== false && (newBanner.title || newBanner.subtitle)) {
          try {
            let openaiApiKey = context.env.OPENAI_API_KEY;
            if (!openaiApiKey) {
              const apiKeySetting = await settingsStorage.getSetting("openai_api_key");
              openaiApiKey = apiKeySetting || void 0;
            }
            if (openaiApiKey) {
              const supportedLanguages = ["de", "fr", "es", "it", "pt", "nl", "da", "no", "fi", "tr", "pl", "ru"];
              const translationPromises = [];
              if (newBanner.title) {
                translationPromises.push(
                  fetch("https://api.openai.com/v1/chat/completions", {
                    method: "POST",
                    headers: {
                      "Authorization": `Bearer ${openaiApiKey}`,
                      "Content-Type": "application/json"
                    },
                    body: JSON.stringify({
                      model: "gpt-4o",
                      messages: [
                        {
                          role: "system",
                          content: "You are a professional translator specializing in marketing content. Provide accurate, culturally appropriate translations that maintain the marketing impact of the original text."
                        },
                        {
                          role: "user",
                          content: `Translate the following countdown banner title into multiple languages.

Original text (English): "${newBanner.title}"
Context: Countdown banner title for limited-time promotion on Chrome extension website
Target languages: ${supportedLanguages.map((code) => `${code}: ${{ "de": "German", "fr": "French", "es": "Spanish", "it": "Italian", "pt": "Portuguese", "nl": "Dutch", "da": "Danish", "no": "Norwegian", "fi": "Finnish", "tr": "Turkish", "pl": "Polish", "ru": "Russian" }[code]}`).join(", ")}
Tone: Urgent/promotional tone

Requirements:
- Maintain the urgent/promotional tone
- Keep the same emotional impact as the original
- Adapt cultural nuances appropriately for each target market
- Keep translations concise and impactful for banner display
- Ensure translations sound natural to native speakers

Respond with a JSON object where keys are language codes (${supportedLanguages.join(", ")}) and values are the translated text.

Example format:
{
  "de": "German translation here",
  "fr": "French translation here"
}`
                        }
                      ],
                      response_format: { type: "json_object" },
                      temperature: 0.3,
                      max_tokens: 1e3
                    })
                  })
                );
              }
              if (newBanner.subtitle) {
                translationPromises.push(
                  fetch("https://api.openai.com/v1/chat/completions", {
                    method: "POST",
                    headers: {
                      "Authorization": `Bearer ${openaiApiKey}`,
                      "Content-Type": "application/json"
                    },
                    body: JSON.stringify({
                      model: "gpt-4o",
                      messages: [
                        {
                          role: "system",
                          content: "You are a professional translator specializing in marketing content. Provide accurate, culturally appropriate translations that maintain the marketing impact of the original text."
                        },
                        {
                          role: "user",
                          content: `Translate the following countdown banner subtitle into multiple languages.

Original text (English): "${newBanner.subtitle}"
Context: Countdown banner subtitle describing promotional offer on Chrome extension website
Target languages: ${supportedLanguages.map((code) => `${code}: ${{ "de": "German", "fr": "French", "es": "Spanish", "it": "Italian", "pt": "Portuguese", "nl": "Dutch", "da": "Danish", "no": "Norwegian", "fi": "Finnish", "tr": "Turkish", "pl": "Polish", "ru": "Russian" }[code]}`).join(", ")}
Tone: Marketing/promotional tone

Requirements:
- Maintain the marketing/promotional tone
- Keep the same emotional impact as the original
- Adapt cultural nuances appropriately for each target market
- Keep translations concise and impactful for banner display
- Ensure translations sound natural to native speakers

Respond with a JSON object where keys are language codes (${supportedLanguages.join(", ")}) and values are the translated text.

Example format:
{
  "de": "German translation here",
  "fr": "French translation here"
}`
                        }
                      ],
                      response_format: { type: "json_object" },
                      temperature: 0.3,
                      max_tokens: 1e3
                    })
                  })
                );
              }
              const responses = await Promise.all(translationPromises);
              const translations = {};
              if (responses[0] && responses[0].ok) {
                const titleData = await responses[0].json();
                const titleTranslations = JSON.parse(titleData.choices[0]?.message?.content || "{}");
                translations.titleTranslations = titleTranslations;
              }
              if (responses[1] && responses[1].ok) {
                const subtitleData = await responses[1].json();
                const subtitleTranslations = JSON.parse(subtitleData.choices[0]?.message?.content || "{}");
                translations.subtitleTranslations = subtitleTranslations;
              }
              Object.assign(newBanner, translations);
              console.log("Auto-translated banner to languages:", Object.keys(translations));
            }
          } catch (translationError) {
            console.warn("Auto-translation failed, continuing without translations:", translationError);
          }
        }
        const existingBannersData = await settingsStorage.getSetting("countdown_banners");
        const existingBanners = existingBannersData ? JSON.parse(existingBannersData) : [];
        existingBanners.push(newBanner);
        await settingsStorage.setSetting("countdown_banners", JSON.stringify(existingBanners));
        console.log("Created countdown banner:", newBanner.id);
        return new Response(JSON.stringify({ banner: newBanner }), {
          status: 201,
          headers: {
            "Content-Type": "application/json",
            "Access-Control-Allow-Origin": "*"
          }
        });
      } catch (error) {
        console.error("Error creating countdown banner:", error);
        return new Response(JSON.stringify({
          error: "Failed to create countdown banner",
          details: error instanceof Error ? error.message : "Unknown error"
        }), {
          status: 500,
          headers: {
            "Content-Type": "application/json",
            "Access-Control-Allow-Origin": "*"
          }
        });
      }
    }, "onRequestPost");
    onRequestPut9 = /* @__PURE__ */ __name2(async (context) => {
      try {
        const settingsStorage = new SettingsStorage(context.env.DB);
        const requestData = await context.request.json();
        const bannerId = requestData.id;
        if (!bannerId) {
          return new Response(JSON.stringify({ error: "Banner ID is required" }), {
            status: 400,
            headers: {
              "Content-Type": "application/json",
              "Access-Control-Allow-Origin": "*"
            }
          });
        }
        console.log("Updating countdown banner:", bannerId);
        const existingBannersData = await settingsStorage.getSetting("countdown_banners");
        const existingBanners = existingBannersData ? JSON.parse(existingBannersData) : [];
        const bannerIndex = existingBanners.findIndex((banner) => banner.id === bannerId);
        if (bannerIndex === -1) {
          return new Response(JSON.stringify({ error: "Banner not found" }), {
            status: 404,
            headers: {
              "Content-Type": "application/json",
              "Access-Control-Allow-Origin": "*"
            }
          });
        }
        existingBanners[bannerIndex] = {
          ...existingBanners[bannerIndex],
          ...requestData,
          targetPrice: requestData.targetPrice ? parseFloat(requestData.targetPrice) : existingBanners[bannerIndex].targetPrice,
          originalPrice: requestData.originalPrice ? parseFloat(requestData.originalPrice) : existingBanners[bannerIndex].originalPrice,
          updatedAt: (/* @__PURE__ */ new Date()).toISOString()
        };
        await settingsStorage.setSetting("countdown_banners", JSON.stringify(existingBanners));
        console.log("Updated countdown banner:", bannerId);
        return new Response(JSON.stringify({ banner: existingBanners[bannerIndex] }), {
          status: 200,
          headers: {
            "Content-Type": "application/json",
            "Access-Control-Allow-Origin": "*"
          }
        });
      } catch (error) {
        console.error("Error updating countdown banner:", error);
        return new Response(JSON.stringify({
          error: "Failed to update countdown banner",
          details: error instanceof Error ? error.message : "Unknown error"
        }), {
          status: 500,
          headers: {
            "Content-Type": "application/json",
            "Access-Control-Allow-Origin": "*"
          }
        });
      }
    }, "onRequestPut");
    onRequestDelete4 = /* @__PURE__ */ __name2(async (context) => {
      try {
        const settingsStorage = new SettingsStorage(context.env.DB);
        const url = new URL(context.request.url);
        const bannerId = url.searchParams.get("id");
        if (!bannerId) {
          return new Response(JSON.stringify({ error: "Banner ID is required" }), {
            status: 400,
            headers: {
              "Content-Type": "application/json",
              "Access-Control-Allow-Origin": "*"
            }
          });
        }
        console.log("Deleting countdown banner:", bannerId);
        const existingBannersData = await settingsStorage.getSetting("countdown_banners");
        const existingBanners = existingBannersData ? JSON.parse(existingBannersData) : [];
        const updatedBanners = existingBanners.filter((banner) => banner.id !== bannerId);
        if (updatedBanners.length === existingBanners.length) {
          return new Response(JSON.stringify({ error: "Banner not found" }), {
            status: 404,
            headers: {
              "Content-Type": "application/json",
              "Access-Control-Allow-Origin": "*"
            }
          });
        }
        await settingsStorage.setSetting("countdown_banners", JSON.stringify(updatedBanners));
        console.log("Deleted countdown banner:", bannerId);
        return new Response(JSON.stringify({ success: true }), {
          status: 200,
          headers: {
            "Content-Type": "application/json",
            "Access-Control-Allow-Origin": "*"
          }
        });
      } catch (error) {
        console.error("Error deleting countdown banner:", error);
        return new Response(JSON.stringify({
          error: "Failed to delete countdown banner",
          details: error instanceof Error ? error.message : "Unknown error"
        }), {
          status: 500,
          headers: {
            "Content-Type": "application/json",
            "Access-Control-Allow-Origin": "*"
          }
        });
      }
    }, "onRequestDelete");
  }
});
var onRequestPost6;
var onRequestOptions15;
var init_create_default_banner = __esm({
  "api/admin/create-default-banner.ts"() {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    onRequestPost6 = /* @__PURE__ */ __name2(async ({ env }) => {
      try {
        const existingBanner = await env.DB.prepare(`
      SELECT id FROM countdown_banners 
      WHERE isActive = 1 
      LIMIT 1
    `).first();
        if (existingBanner) {
          return new Response(JSON.stringify({
            success: true,
            message: "Active banner already exists",
            bannerId: existingBanner.id
          }), {
            headers: {
              "Content-Type": "application/json",
              "Access-Control-Allow-Origin": "*"
            }
          });
        }
        const endDate = /* @__PURE__ */ new Date();
        endDate.setDate(endDate.getDate() + 7);
        await env.DB.prepare(`
      UPDATE countdown_banners 
      SET targetPrice = '1.00' 
      WHERE id = 1
    `).run();
        const result = await env.DB.prepare(`
      INSERT INTO countdown_banners (
        titleEn, subtitleEn, titleTranslations, subtitleTranslations,
        targetPrice, originalPrice, endDateTime, isEnabled, backgroundColor, textColor, priority
      ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
    `).bind(
          "Limited Time Offer!",
          "Get OCUS Job Hunter Extension at Special Price",
          "{}",
          "{}",
          "1.00",
          "299.99",
          endDate.toISOString(),
          1,
          "#FF6B35",
          "#FFFFFF",
          1
        ).run();
        return new Response(JSON.stringify({
          success: true,
          message: "Default countdown banner created successfully",
          bannerId: result.meta.last_row_id
        }), {
          headers: {
            "Content-Type": "application/json",
            "Access-Control-Allow-Origin": "*"
          }
        });
      } catch (error) {
        console.error("Error creating default banner:", error);
        return new Response(JSON.stringify({
          success: false,
          error: "Failed to create default banner",
          details: error instanceof Error ? error.message : "Unknown error"
        }), {
          status: 500,
          headers: {
            "Content-Type": "application/json",
            "Access-Control-Allow-Origin": "*"
          }
        });
      }
    }, "onRequestPost");
    onRequestOptions15 = /* @__PURE__ */ __name2(async () => {
      return new Response(null, {
        headers: {
          "Access-Control-Allow-Origin": "*",
          "Access-Control-Allow-Methods": "POST, OPTIONS",
          "Access-Control-Allow-Headers": "Content-Type"
        }
      });
    }, "onRequestOptions");
  }
});
var onRequestGet21;
var onRequestOptions16;
var init_customers = __esm({
  "api/admin/customers.ts"() {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    init_user_storage();
    onRequestGet21 = /* @__PURE__ */ __name2(async ({ env }) => {
      try {
        const userStorage = new UserStorage(env.DB);
        await userStorage.initializeUsers();
        const customers2 = await userStorage.getAllCustomers();
        return new Response(JSON.stringify({
          success: true,
          customers: customers2
        }), {
          headers: {
            "Content-Type": "application/json",
            "Access-Control-Allow-Origin": "*"
          }
        });
      } catch (error) {
        console.error("Failed to get customers:", error);
        return new Response(JSON.stringify({
          success: false,
          message: "Failed to load customers"
        }), {
          status: 500,
          headers: {
            "Content-Type": "application/json",
            "Access-Control-Allow-Origin": "*"
          }
        });
      }
    }, "onRequestGet");
    onRequestOptions16 = /* @__PURE__ */ __name2(async () => {
      return new Response(null, {
        headers: {
          "Access-Control-Allow-Origin": "*",
          "Access-Control-Allow-Methods": "GET, OPTIONS",
          "Access-Control-Allow-Headers": "Content-Type"
        }
      });
    }, "onRequestOptions");
  }
});
var FeatureStorage;
var onRequestGet22;
var onRequestPut10;
var onRequestOptions17;
var init_dashboard_features = __esm({
  "api/admin/dashboard-features.ts"() {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    FeatureStorage = class {
      static {
        __name(this, "FeatureStorage");
      }
      static {
        __name2(this, "FeatureStorage");
      }
      db;
      constructor(db) {
        this.db = db;
      }
      async getFeatureStates() {
        try {
          const result = await this.db.prepare(`
        SELECT feature_name, is_enabled 
        FROM dashboard_features
      `).all();
          const states = {
            "affiliate-program": true,
            "analytics": true,
            "billing": true
          };
          if (result.results) {
            result.results.forEach((row) => {
              states[row.feature_name] = Boolean(row.is_enabled);
            });
          }
          return states;
        } catch (error) {
          console.error("Failed to get feature states:", error);
          return {
            "affiliate-program": true,
            "analytics": true,
            "billing": true
          };
        }
      }
      async updateFeatureState(featureName, isEnabled) {
        try {
          await this.db.prepare(`
        INSERT OR REPLACE INTO dashboard_features (feature_name, is_enabled, updated_at)
        VALUES (?, ?, datetime('now'))
      `).bind(featureName, isEnabled ? 1 : 0).run();
        } catch (error) {
          console.error("Failed to update feature state:", error);
          throw error;
        }
      }
      async initializeFeatures() {
        try {
          await this.db.prepare(`
        CREATE TABLE IF NOT EXISTS dashboard_features (
          id INTEGER PRIMARY KEY AUTOINCREMENT,
          feature_name TEXT NOT NULL UNIQUE,
          is_enabled INTEGER DEFAULT 1,
          description TEXT,
          updated_at INTEGER DEFAULT (CURRENT_TIMESTAMP)
        )
      `).run();
          const defaultFeatures = ["affiliate-program", "analytics", "billing"];
          for (const feature of defaultFeatures) {
            await this.db.prepare(`
          INSERT OR IGNORE INTO dashboard_features (feature_name, is_enabled)
          VALUES (?, 1)
        `).bind(feature).run();
          }
        } catch (error) {
          console.error("Failed to initialize features:", error);
        }
      }
    };
    onRequestGet22 = /* @__PURE__ */ __name2(async ({ env }) => {
      try {
        const storage2 = new FeatureStorage(env.DB);
        await storage2.initializeFeatures();
        const states = await storage2.getFeatureStates();
        const features = [
          {
            id: "affiliate-program",
            name: "Affiliate Program",
            description: "Controls visibility of referral system and commission tracking",
            isEnabled: states["affiliate-program"],
            category: "monetization"
          },
          {
            id: "analytics",
            name: "Analytics",
            description: "Controls visibility of usage statistics and performance metrics",
            isEnabled: states["analytics"],
            category: "insights"
          },
          {
            id: "billing",
            name: "Billing",
            description: "Controls visibility of payment history and subscription management",
            isEnabled: states["billing"],
            category: "payments"
          }
        ];
        return new Response(JSON.stringify(features), {
          headers: {
            "Content-Type": "application/json",
            "Access-Control-Allow-Origin": "*"
          }
        });
      } catch (error) {
        console.error("Error getting features:", error);
        return new Response(JSON.stringify([]), {
          headers: {
            "Content-Type": "application/json",
            "Access-Control-Allow-Origin": "*"
          }
        });
      }
    }, "onRequestGet");
    onRequestPut10 = /* @__PURE__ */ __name2(async ({ request, env }) => {
      try {
        const { featureName, isEnabled } = await request.json();
        if (!featureName || typeof isEnabled === "undefined") {
          return new Response(JSON.stringify({
            success: false,
            message: "featureName and isEnabled are required"
          }), {
            status: 400,
            headers: {
              "Content-Type": "application/json",
              "Access-Control-Allow-Origin": "*"
            }
          });
        }
        const storage2 = new FeatureStorage(env.DB);
        await storage2.initializeFeatures();
        await storage2.updateFeatureState(featureName, isEnabled);
        return new Response(JSON.stringify({
          success: true,
          message: `Feature ${featureName} updated successfully`,
          feature: {
            id: featureName,
            isEnabled
          }
        }), {
          headers: {
            "Content-Type": "application/json",
            "Access-Control-Allow-Origin": "*"
          }
        });
      } catch (error) {
        console.error("dashboard-features PUT failed:", error);
        return new Response(JSON.stringify({
          success: false,
          message: "Failed to update feature"
        }), {
          status: 500,
          headers: {
            "Content-Type": "application/json",
            "Access-Control-Allow-Origin": "*"
          }
        });
      }
    }, "onRequestPut");
    onRequestOptions17 = /* @__PURE__ */ __name2(async () => {
      return new Response(null, {
        headers: {
          "Access-Control-Allow-Origin": "*",
          "Access-Control-Allow-Methods": "GET, PUT, OPTIONS",
          "Access-Control-Allow-Headers": "Content-Type"
        }
      });
    }, "onRequestOptions");
  }
});
var onRequestPost7;
var init_fix_banner_price = __esm({
  "api/admin/fix-banner-price.ts"() {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    onRequestPost7 = /* @__PURE__ */ __name2(async ({ env }) => {
      try {
        const updateResult = await env.DB.prepare(`
      UPDATE countdown_banners 
      SET targetPrice = '1.00'
      WHERE id = 1
    `).run();
        const updatedBanner = await env.DB.prepare(`
      SELECT id, targetPrice, originalPrice FROM countdown_banners WHERE id = 1
    `).first();
        return new Response(JSON.stringify({
          success: true,
          message: "Banner price updated to \u20AC1.00",
          updateResult: {
            success: updateResult.success,
            meta: updateResult.meta
          },
          banner: updatedBanner
        }), {
          headers: {
            "Content-Type": "application/json",
            "Access-Control-Allow-Origin": "*"
          }
        });
      } catch (error) {
        return new Response(JSON.stringify({
          success: false,
          error: "Failed to update banner price",
          details: String(error)
        }), {
          status: 500,
          headers: {
            "Content-Type": "application/json",
            "Access-Control-Allow-Origin": "*"
          }
        });
      }
    }, "onRequestPost");
  }
});
function json8(data, status = 200) {
  return new Response(JSON.stringify(data), {
    status,
    headers: {
      "Content-Type": "application/json",
      "Access-Control-Allow-Origin": "*"
    }
  });
}
__name(json8, "json8");
var onRequestPost8;
var onRequestOptions18;
var init_fix_existing_purchases = __esm({
  "api/admin/fix-existing-purchases.ts"() {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    __name2(json8, "json");
    onRequestPost8 = /* @__PURE__ */ __name2(async ({ request, env }) => {
      try {
        if (!env.DB) {
          return json8({ success: false, message: "Database not available" }, 500);
        }
        const now = (/* @__PURE__ */ new Date()).toISOString();
        let updatedRecords = 0;
        const completedOrders = await env.DB.prepare(`
      SELECT DISTINCT customer_id, customer_email, customer_name, final_amount
      FROM orders 
      WHERE status = 'completed' AND final_amount > 0
    `).all();
        console.log("Found completed orders:", completedOrders.results?.length);
        if (completedOrders.results && completedOrders.results.length > 0) {
          for (const order of completedOrders.results) {
            const orderData = order;
            if (orderData.customer_id) {
              const customerUpdate = await env.DB.prepare(`
            UPDATE customers 
            SET is_premium = 1, 
                extension_activated = 1,
                total_spent = COALESCE(total_spent, 0) + ?,
                total_orders = COALESCE(total_orders, 0) + 1,
                updated_at = ?
            WHERE id = ? AND (is_premium != 1 OR extension_activated != 1)
          `).bind(orderData.final_amount, now, orderData.customer_id).run();
              if (customerUpdate.meta?.changes && customerUpdate.meta.changes > 0) {
                updatedRecords++;
                console.log("Updated customer:", orderData.customer_id);
              }
            }
            if (orderData.customer_email) {
              const userUpdate = await env.DB.prepare(`
            UPDATE users 
            SET is_premium = 1, 
                extension_activated = 1,
                premium_activated_at = ?,
                total_spent = COALESCE(total_spent, 0) + ?,
                total_orders = COALESCE(total_orders, 0) + 1
            WHERE email = ? AND (is_premium != 1 OR extension_activated != 1)
          `).bind(now, orderData.final_amount, orderData.customer_email).run();
              if (userUpdate.meta?.changes && userUpdate.meta.changes > 0) {
                updatedRecords++;
                console.log("Updated user:", orderData.customer_email);
              }
            }
          }
        }
        const missingPremiumCustomers = await env.DB.prepare(`
      SELECT c.id, c.email, c.name
      FROM customers c
      WHERE c.id IN (
        SELECT DISTINCT customer_id 
        FROM orders 
        WHERE status = 'completed' AND final_amount > 0
      ) AND (c.is_premium != 1 OR c.extension_activated != 1)
    `).all();
        if (missingPremiumCustomers.results && missingPremiumCustomers.results.length > 0) {
          for (const customer of missingPremiumCustomers.results) {
            const customerData = customer;
            await env.DB.prepare(`
          UPDATE customers 
          SET is_premium = 1, extension_activated = 1, updated_at = ?
          WHERE id = ?
        `).bind(now, customerData.id).run();
            updatedRecords++;
            console.log("Fixed missing premium status for customer:", customerData.id);
          }
        }
        return json8({
          success: true,
          message: `Updated ${updatedRecords} records with premium status`,
          updatedRecords
        });
      } catch (error) {
        console.error("Error fixing existing purchases:", error);
        return json8({
          success: false,
          message: "Failed to fix existing purchases",
          error: error.message
        }, 500);
      }
    }, "onRequestPost");
    onRequestOptions18 = /* @__PURE__ */ __name2(async () => {
      return new Response(null, {
        headers: {
          "Access-Control-Allow-Origin": "*",
          "Access-Control-Allow-Methods": "POST, OPTIONS",
          "Access-Control-Allow-Headers": "Content-Type"
        }
      });
    }, "onRequestOptions");
  }
});
var onRequestPost9;
var init_fix_premium_users = __esm({
  "api/admin/fix-premium-users.ts"() {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    onRequestPost9 = /* @__PURE__ */ __name2(async ({ request, env }) => {
      try {
        const body = await request.json();
        if (body.adminKey !== "fix-premium-2024") {
          return new Response(JSON.stringify({
            success: false,
            message: "Invalid admin key"
          }), {
            status: 403,
            headers: {
              "Content-Type": "application/json",
              "Access-Control-Allow-Origin": "*"
            }
          });
        }
        if (!env.DB) {
          return new Response(JSON.stringify({
            success: false,
            message: "Database not available"
          }), {
            status: 500,
            headers: {
              "Content-Type": "application/json",
              "Access-Control-Allow-Origin": "*"
            }
          });
        }
        const results = {
          usersChecked: 0,
          customersChecked: 0,
          usersFixed: 0,
          customersFixed: 0,
          errors: []
        };
        const customersWithOrders = await env.DB.prepare(`
      SELECT DISTINCT c.id, c.email, c.name, c.is_premium, c.extension_activated,
             COUNT(o.id) as orderCount, SUM(o.final_amount) as totalPaid
      FROM customers c
      JOIN orders o ON c.id = o.customer_id
      WHERE o.status = 'completed' AND o.final_amount > 0
      GROUP BY c.id, c.email, c.name, c.is_premium, c.extension_activated
    `).all();
        console.log("Found customers with completed orders:", customersWithOrders.results?.length);
        for (const customer of customersWithOrders.results || []) {
          results.customersChecked++;
          const needsUpdate = customer.is_premium !== 1 || customer.extension_activated !== 1;
          if (needsUpdate) {
            try {
              await env.DB.prepare(`
            UPDATE customers 
            SET is_premium = 1, extension_activated = 1, premium_activated_at = datetime('now')
            WHERE id = ?
          `).bind(customer.id).run();
              results.customersFixed++;
              console.log(`Fixed customer ${customer.email} (ID: ${customer.id})`);
            } catch (error) {
              results.errors.push(`Failed to fix customer ${customer.email}: ${error.message}`);
            }
          }
        }
        const usersWithOrders = await env.DB.prepare(`
      SELECT DISTINCT u.id, u.email, u.name, u.is_premium, u.extension_activated,
             COUNT(o.id) as orderCount, SUM(o.final_amount) as totalPaid
      FROM users u
      JOIN orders o ON u.email = o.customer_email
      WHERE o.status = 'completed' AND o.final_amount > 0
      GROUP BY u.id, u.email, u.name, u.is_premium, u.extension_activated
    `).all();
        console.log("Found users with completed orders:", usersWithOrders.results?.length);
        for (const user of usersWithOrders.results || []) {
          results.usersChecked++;
          const needsUpdate = user.is_premium !== 1 || user.extension_activated !== 1;
          if (needsUpdate) {
            try {
              await env.DB.prepare(`
            UPDATE users 
            SET is_premium = 1, extension_activated = 1, premium_activated_at = datetime('now')
            WHERE id = ?
          `).bind(user.id).run();
              results.usersFixed++;
              console.log(`Fixed user ${user.email} (ID: ${user.id})`);
            } catch (error) {
              results.errors.push(`Failed to fix user ${user.email}: ${error.message}`);
            }
          }
        }
        const customersNeedingCodes = await env.DB.prepare(`
      SELECT c.id, c.email
      FROM customers c
      WHERE c.is_premium = 1 AND c.extension_activated = 1
      AND NOT EXISTS (
        SELECT 1 FROM activation_codes ac WHERE ac.customer_id = c.id
      )
    `).all();
        let codesCreated = 0;
        for (const customer of customersNeedingCodes.results || []) {
          try {
            const activationCode = `OCUS-${Date.now()}-${Math.random().toString(36).substr(2, 8).toUpperCase()}`;
            await env.DB.prepare(`
          INSERT INTO activation_codes (customer_id, code, created_at)
          VALUES (?, ?, datetime('now'))
        `).bind(customer.id, activationCode).run();
            codesCreated++;
            console.log(`Created activation code for customer ${customer.email}`);
          } catch (error) {
            results.errors.push(`Failed to create activation code for ${customer.email}: ${error.message}`);
          }
        }
        return new Response(JSON.stringify({
          success: true,
          message: "Premium activation fix completed",
          results: {
            ...results,
            activationCodesCreated: codesCreated
          }
        }), {
          headers: {
            "Content-Type": "application/json",
            "Access-Control-Allow-Origin": "*"
          }
        });
      } catch (error) {
        console.error("Error fixing premium users:", error);
        return new Response(JSON.stringify({
          success: false,
          message: error.message
        }), {
          status: 500,
          headers: {
            "Content-Type": "application/json",
            "Access-Control-Allow-Origin": "*"
          }
        });
      }
    }, "onRequestPost");
  }
});
function json9(data, status = 200) {
  return new Response(JSON.stringify(data), {
    status,
    headers: {
      "Content-Type": "application/json",
      "Access-Control-Allow-Origin": "*"
    }
  });
}
__name(json9, "json9");
var onRequestPost10;
var init_fix_purchased_users = __esm({
  "api/admin/fix-purchased-users.ts"() {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    __name2(json9, "json");
    onRequestPost10 = /* @__PURE__ */ __name2(async ({ request, env }) => {
      try {
        const body = await request.json();
        const { emails } = body;
        if (!emails || !Array.isArray(emails)) {
          return json9({ success: false, message: "Array of emails required" }, 400);
        }
        if (!env.DB) {
          return json9({ success: false, message: "Database not available" }, 500);
        }
        const now = (/* @__PURE__ */ new Date()).toISOString();
        const results = [];
        for (const email of emails) {
          try {
            const user = await env.DB.prepare(`
          SELECT id, email, name FROM users WHERE email = ?
        `).bind(email).first();
            if (user) {
              await env.DB.prepare(`
            UPDATE users 
            SET is_premium = 1,
                extension_activated = 1,
                premium_activated_at = ?
            WHERE email = ?
          `).bind(now, email).run();
              results.push({
                email,
                status: "updated",
                message: "User premium status activated"
              });
            } else {
              results.push({
                email,
                status: "not_found",
                message: "User not found in users table"
              });
            }
          } catch (error) {
            results.push({
              email,
              status: "error",
              message: error.message
            });
          }
        }
        return json9({
          success: true,
          message: "Batch update completed",
          results
        });
      } catch (error) {
        console.error("Error fixing purchased users:", error);
        return json9({
          success: false,
          message: error.message
        }, 500);
      }
    }, "onRequestPost");
  }
});
var onRequestGet23;
var init_force_update_price = __esm({
  "api/admin/force-update-price.ts"() {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    onRequestGet23 = /* @__PURE__ */ __name2(async ({ env }) => {
      try {
        const updateResult = await env.DB.prepare(`
      UPDATE countdown_banners 
      SET targetPrice = '1.00'
      WHERE id = 1
    `).run();
        const banner = await env.DB.prepare(`
      SELECT id, targetPrice, originalPrice FROM countdown_banners WHERE id = 1
    `).first();
        return new Response(JSON.stringify({
          success: true,
          message: "Banner price force updated to \u20AC1.00",
          updateResult: {
            success: updateResult.success,
            meta: updateResult.meta
          },
          currentBanner: banner
        }), {
          headers: {
            "Content-Type": "application/json",
            "Access-Control-Allow-Origin": "*"
          }
        });
      } catch (error) {
        return new Response(JSON.stringify({
          success: false,
          error: "Failed to update banner price",
          details: String(error)
        }), {
          status: 500,
          headers: {
            "Content-Type": "application/json",
            "Access-Control-Allow-Origin": "*"
          }
        });
      }
    }, "onRequestGet");
  }
});
var onRequestGet24;
var onRequestOptions19;
var init_invoices2 = __esm({
  "api/admin/invoices.ts"() {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    onRequestGet24 = /* @__PURE__ */ __name2(async (context) => {
      try {
        const invoicesQuery = `
      SELECT 
        i.id,
        i.invoice_number,
        i.order_id,
        i.customer_id,
        i.total_amount as amount,
        i.currency,
        i.tax_amount,
        i.status,
        i.invoice_date,
        i.due_date,
        i.paid_at,
        i.created_at,
        i.customer_name,
        i.customer_email,
        o.payment_method
      FROM invoices i
      LEFT JOIN orders o ON i.order_id = o.id
      ORDER BY i.created_at DESC
    `;
        const invoicesResult = await context.env.DB.prepare(invoicesQuery).all();
        return new Response(JSON.stringify(invoicesResult.results || []), {
          status: 200,
          headers: {
            "Content-Type": "application/json",
            "Access-Control-Allow-Origin": "*",
            "Access-Control-Allow-Methods": "GET, OPTIONS",
            "Access-Control-Allow-Headers": "Content-Type"
          }
        });
      } catch (error) {
        console.error("Error fetching admin invoices:", error);
        return new Response(JSON.stringify({ error: "Failed to fetch invoices" }), {
          status: 500,
          headers: {
            "Content-Type": "application/json",
            "Access-Control-Allow-Origin": "*"
          }
        });
      }
    }, "onRequestGet");
    onRequestOptions19 = /* @__PURE__ */ __name2(async () => {
      return new Response(null, {
        status: 200,
        headers: {
          "Access-Control-Allow-Origin": "*",
          "Access-Control-Allow-Methods": "GET, OPTIONS",
          "Access-Control-Allow-Headers": "Content-Type"
        }
      });
    }, "onRequestOptions");
  }
});
var onRequestPost11;
var onRequestOptions20;
var init_login = __esm({
  "api/admin/login.ts"() {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    onRequestPost11 = /* @__PURE__ */ __name2(async ({ request }) => {
      try {
        const { username, password, recaptchaToken } = await request.json();
        if (username === "admin" && password === "admin123") {
          return new Response(JSON.stringify({
            success: true,
            user: {
              id: 1,
              username: "admin",
              role: "admin"
            },
            token: "demo-admin-jwt-token"
          }), {
            headers: {
              "Content-Type": "application/json",
              "Access-Control-Allow-Origin": "*"
            }
          });
        }
        return new Response(JSON.stringify({
          success: false,
          message: "Invalid credentials"
        }), {
          status: 401,
          headers: {
            "Content-Type": "application/json",
            "Access-Control-Allow-Origin": "*"
          }
        });
      } catch (error) {
        return new Response(JSON.stringify({
          success: false,
          message: "Login failed"
        }), {
          status: 500,
          headers: {
            "Content-Type": "application/json",
            "Access-Control-Allow-Origin": "*"
          }
        });
      }
    }, "onRequestPost");
    onRequestOptions20 = /* @__PURE__ */ __name2(async () => {
      return new Response(null, {
        headers: {
          "Access-Control-Allow-Origin": "*",
          "Access-Control-Allow-Methods": "POST, OPTIONS",
          "Access-Control-Allow-Headers": "Content-Type"
        }
      });
    }, "onRequestOptions");
  }
});
var onRequestGet25;
var onRequestOptions21;
var init_orders2 = __esm({
  "api/admin/orders.ts"() {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    onRequestGet25 = /* @__PURE__ */ __name2(async ({ env }) => {
      try {
        let orders2 = [];
        let stats = {
          totalOrders: 0,
          totalRevenue: 0,
          completedOrders: 0,
          pendingOrders: 0
        };
        try {
          const orderResults = await env.DB.prepare(`
        SELECT 
          id, 
          customer_email as customerEmail, 
          customer_name as customerName, 
          product_id as productId,
          original_amount as originalAmount, 
          final_amount as finalAmount, 
          currency, 
          status, 
          payment_method as paymentMethod,
          download_token as downloadToken, 
          download_count as downloadCount, 
          max_downloads as maxDownloads, 
          activation_code as activationCode,
          created_at as createdAt, 
          completed_at as completedAt
        FROM orders 
        ORDER BY created_at DESC
      `).all();
          orders2 = orderResults.results || [];
          const statsResult = await env.DB.prepare(`
        SELECT 
          COUNT(*) as totalOrders,
          SUM(CASE WHEN status = 'completed' THEN CAST(final_amount as REAL) ELSE 0 END) as totalRevenue,
          COUNT(CASE WHEN status = 'completed' THEN 1 END) as completedOrders,
          COUNT(CASE WHEN status = 'pending' THEN 1 END) as pendingOrders
        FROM orders
      `).first();
          if (statsResult) {
            stats = {
              totalOrders: Number(statsResult.totalOrders) || 0,
              totalRevenue: Number(statsResult.totalRevenue) || 0,
              completedOrders: Number(statsResult.completedOrders) || 0,
              pendingOrders: Number(statsResult.pendingOrders) || 0
            };
          }
        } catch (dbError) {
          console.log("Orders table not found, checking fallback storage:", dbError);
          const settingsResults = await env.DB.prepare(`
        SELECT key, value FROM settings 
        WHERE key LIKE 'order_%'
      `).all();
          const allOrders = [];
          for (const setting of settingsResults.results || []) {
            try {
              const orderData = JSON.parse(setting.value);
              allOrders.push(orderData);
            } catch (parseError) {
              console.log("Error parsing order data:", parseError);
            }
          }
          orders2 = allOrders.sort((a3, b2) => {
            const dateA = new Date(a3.completedAt || a3.createdAt);
            const dateB = new Date(b2.completedAt || b2.createdAt);
            return dateB.getTime() - dateA.getTime();
          });
          stats.totalOrders = orders2.length;
          stats.completedOrders = orders2.filter((o3) => o3.status === "completed").length;
          stats.pendingOrders = orders2.filter((o3) => o3.status === "pending").length;
          stats.totalRevenue = orders2.filter((o3) => o3.status === "completed").reduce((sum, o3) => sum + (parseFloat(o3.finalAmount) || 0), 0);
        }
        return new Response(JSON.stringify({
          success: true,
          orders: orders2,
          stats
        }), {
          headers: {
            "Content-Type": "application/json",
            "Access-Control-Allow-Origin": "*"
          }
        });
      } catch (error) {
        console.error("Error fetching admin orders:", error);
        return new Response(JSON.stringify({
          success: false,
          error: "Failed to fetch orders",
          details: String(error)
        }), {
          status: 500,
          headers: {
            "Content-Type": "application/json",
            "Access-Control-Allow-Origin": "*"
          }
        });
      }
    }, "onRequestGet");
    onRequestOptions21 = /* @__PURE__ */ __name2(async () => {
      return new Response(null, {
        status: 200,
        headers: {
          "Access-Control-Allow-Origin": "*",
          "Access-Control-Allow-Methods": "GET, OPTIONS",
          "Access-Control-Allow-Headers": "Content-Type"
        }
      });
    }, "onRequestOptions");
  }
});
var onRequestGet26;
var onRequestPut11;
var onRequestOptions22;
var init_payment_settings = __esm({
  "api/admin/payment-settings.ts"() {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    onRequestGet26 = /* @__PURE__ */ __name2(async ({ env }) => {
      try {
        const result = await env.DB.prepare(`
      SELECT key, value FROM settings 
      WHERE key LIKE 'payment_%'
    `).all();
        const settings3 = {
          stripeEnabled: false,
          paypalEnabled: false,
          stripePublicKey: "",
          stripeSecretKey: "",
          paypalClientId: "",
          paypalClientSecret: "",
          defaultPaymentMethod: "stripe"
        };
        result.results?.forEach((row) => {
          const key = row.key.replace("payment_", "");
          let value = row.value;
          if (value === "true") value = true;
          if (value === "false") value = false;
          settings3[key] = value;
        });
        return new Response(JSON.stringify(settings3), {
          headers: {
            "Content-Type": "application/json",
            "Access-Control-Allow-Origin": "*"
          }
        });
      } catch (error) {
        console.error("Error fetching payment settings:", error);
        const defaultSettings2 = {
          stripeEnabled: false,
          paypalEnabled: false,
          stripePublicKey: "",
          stripeSecretKey: "",
          paypalClientId: "",
          paypalClientSecret: "",
          defaultPaymentMethod: "stripe"
        };
        return new Response(JSON.stringify(defaultSettings2), {
          headers: {
            "Content-Type": "application/json",
            "Access-Control-Allow-Origin": "*"
          }
        });
      }
    }, "onRequestGet");
    onRequestPut11 = /* @__PURE__ */ __name2(async ({ request, env }) => {
      try {
        const settings3 = await request.json();
        const settingsToSave = [
          { key: "payment_stripeEnabled", value: String(settings3.stripeEnabled || false) },
          { key: "payment_paypalEnabled", value: String(settings3.paypalEnabled || false) },
          { key: "payment_stripePublicKey", value: settings3.stripePublicKey || "" },
          { key: "payment_stripeSecretKey", value: settings3.stripeSecretKey || "" },
          { key: "payment_paypalClientId", value: settings3.paypalClientId || "" },
          { key: "payment_paypalClientSecret", value: settings3.paypalClientSecret || "" },
          { key: "payment_defaultPaymentMethod", value: settings3.defaultPaymentMethod || "stripe" }
        ];
        await env.DB.batch([
          // First, delete existing payment settings
          env.DB.prepare(`DELETE FROM settings WHERE key LIKE 'payment_%'`),
          // Then insert new settings
          ...settingsToSave.map(
            (setting) => env.DB.prepare(`INSERT INTO settings (key, value) VALUES (?, ?)`).bind(setting.key, setting.value)
          )
        ]);
        return new Response(JSON.stringify({
          success: true,
          message: "Payment settings saved successfully",
          settings: settings3
        }), {
          headers: {
            "Content-Type": "application/json",
            "Access-Control-Allow-Origin": "*"
          }
        });
      } catch (error) {
        console.error("Error saving payment settings:", error);
        return new Response(JSON.stringify({
          success: false,
          message: "Failed to save payment settings",
          error: error instanceof Error ? error.message : "Unknown error"
        }), {
          status: 500,
          headers: {
            "Content-Type": "application/json",
            "Access-Control-Allow-Origin": "*"
          }
        });
      }
    }, "onRequestPut");
    onRequestOptions22 = /* @__PURE__ */ __name2(async () => {
      return new Response(null, {
        headers: {
          "Access-Control-Allow-Origin": "*",
          "Access-Control-Allow-Methods": "GET, PUT, OPTIONS",
          "Access-Control-Allow-Headers": "Content-Type"
        }
      });
    }, "onRequestOptions");
  }
});
async function onRequestGet27(context) {
  const { env } = context;
  try {
    if (!env.DB) {
      console.error("Database not available, returning default pricing");
      return new Response(JSON.stringify({
        id: 1,
        name: "OCUS Job Hunter Extension",
        price: "29.99",
        beforePrice: null
      }), {
        status: 200,
        headers: {
          "Content-Type": "application/json",
          "Access-Control-Allow-Origin": "*",
          "Access-Control-Allow-Methods": "GET, POST, PUT, DELETE, OPTIONS",
          "Access-Control-Allow-Headers": "Content-Type, Authorization"
        }
      });
    }
    const selectQuery = `SELECT * FROM products WHERE id = 1 AND isActive = 1`;
    const result = await env.DB.prepare(selectQuery).first();
    if (!result) {
      console.log("No product found in database, returning default pricing");
      return new Response(JSON.stringify({
        id: 1,
        name: "OCUS Job Hunter Extension",
        price: "29.99",
        beforePrice: null
      }), {
        status: 200,
        headers: {
          "Content-Type": "application/json",
          "Access-Control-Allow-Origin": "*",
          "Access-Control-Allow-Methods": "GET, POST, PUT, DELETE, OPTIONS",
          "Access-Control-Allow-Headers": "Content-Type, Authorization"
        }
      });
    }
    return new Response(JSON.stringify({
      id: result.id,
      name: result.name,
      price: result.price.toString(),
      beforePrice: result.beforePrice ? result.beforePrice.toString() : null
    }), {
      status: 200,
      headers: {
        "Content-Type": "application/json",
        "Access-Control-Allow-Origin": "*",
        "Access-Control-Allow-Methods": "GET, POST, PUT, DELETE, OPTIONS",
        "Access-Control-Allow-Headers": "Content-Type, Authorization"
      }
    });
  } catch (error) {
    console.error("Error fetching pricing:", error);
    return new Response(JSON.stringify({
      message: "Error fetching pricing: " + error.message
    }), {
      status: 500,
      headers: {
        "Content-Type": "application/json",
        "Access-Control-Allow-Origin": "*",
        "Access-Control-Allow-Methods": "GET, POST, PUT, DELETE, OPTIONS",
        "Access-Control-Allow-Headers": "Content-Type, Authorization"
      }
    });
  }
}
__name(onRequestGet27, "onRequestGet27");
async function onRequestPut12(context) {
  const { request, env } = context;
  try {
    const body = await request.json();
    const { price, beforePrice } = body;
    if (!price || price <= 0) {
      return new Response(JSON.stringify({ message: "Valid price is required" }), {
        status: 400,
        headers: {
          "Content-Type": "application/json",
          "Access-Control-Allow-Origin": "*",
          "Access-Control-Allow-Methods": "GET, POST, PUT, DELETE, OPTIONS",
          "Access-Control-Allow-Headers": "Content-Type, Authorization"
        }
      });
    }
    if (beforePrice && beforePrice <= price) {
      return new Response(JSON.stringify({ message: "Before price must be higher than current price" }), {
        status: 400,
        headers: {
          "Content-Type": "application/json",
          "Access-Control-Allow-Origin": "*",
          "Access-Control-Allow-Methods": "GET, POST, PUT, DELETE, OPTIONS",
          "Access-Control-Allow-Headers": "Content-Type, Authorization"
        }
      });
    }
    const updateQuery = `
      INSERT OR REPLACE INTO products (id, name, price, beforePrice, updatedAt)
      VALUES (1, 'OCUS Job Hunter Extension', ?, ?, datetime('now'))
    `;
    await env.DB.prepare(updateQuery).bind(price, beforePrice || null).run();
    const selectQuery = `SELECT * FROM products WHERE id = 1`;
    const result = await env.DB.prepare(selectQuery).first();
    return new Response(JSON.stringify({
      success: true,
      product: result,
      message: "Pricing updated successfully"
    }), {
      status: 200,
      headers: {
        "Content-Type": "application/json",
        "Access-Control-Allow-Origin": "*",
        "Access-Control-Allow-Methods": "GET, POST, PUT, DELETE, OPTIONS",
        "Access-Control-Allow-Headers": "Content-Type, Authorization"
      }
    });
  } catch (error) {
    console.error("Error updating pricing:", error);
    return new Response(JSON.stringify({ message: "Error updating pricing: " + error.message }), {
      status: 500,
      headers: {
        "Content-Type": "application/json",
        "Access-Control-Allow-Origin": "*",
        "Access-Control-Allow-Methods": "GET, POST, PUT, DELETE, OPTIONS",
        "Access-Control-Allow-Headers": "Content-Type, Authorization"
      }
    });
  }
}
__name(onRequestPut12, "onRequestPut12");
async function onRequestOptions23(context) {
  return new Response(null, {
    status: 200,
    headers: {
      "Access-Control-Allow-Origin": "*",
      "Access-Control-Allow-Methods": "GET, POST, PUT, DELETE, OPTIONS",
      "Access-Control-Allow-Headers": "Content-Type, Authorization"
    }
  });
}
__name(onRequestOptions23, "onRequestOptions23");
var init_pricing = __esm({
  "api/admin/pricing.ts"() {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    __name2(onRequestGet27, "onRequestGet");
    __name2(onRequestPut12, "onRequestPut");
    __name2(onRequestOptions23, "onRequestOptions");
  }
});
function toD1Batch(db, sql2) {
  return sql2.split(";").filter((query) => query.trim() !== "").map((query) => db.prepare(query));
}
__name(toD1Batch, "toD1Batch");
var SCHEMA_SQL;
var onRequestPost12;
var onRequestOptions24;
var init_reset_db = __esm({
  "api/admin/reset-db.ts"() {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    SCHEMA_SQL = `-- D1 Database Schema for OCUS Ticket System
-- Run: wrangler d1 execute ocus-tickets --file=./functions/schema.sql

-- Drop existing tables if they exist (for development)
DROP TABLE IF EXISTS ticket_messages;
DROP TABLE IF EXISTS tickets;
DROP TABLE IF EXISTS countdown_banners;
DROP TABLE IF EXISTS orders;
DROP TABLE IF EXISTS products;
DROP TABLE IF EXISTS auth_settings;
DROP TABLE IF EXISTS settings;
DROP TABLE IF EXISTS users;
DROP TABLE IF EXISTS customers;
DROP TABLE IF EXISTS invoices;
DROP TABLE IF EXISTS activation_codes;

CREATE TABLE IF NOT EXISTS tickets (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  title TEXT NOT NULL,
  description TEXT NOT NULL,
  category TEXT NOT NULL DEFAULT 'general',
  priority TEXT NOT NULL DEFAULT 'medium',
  status TEXT NOT NULL DEFAULT 'open',
  customer_email TEXT NOT NULL,
  customer_name TEXT NOT NULL,
  assigned_to_user_id INTEGER,
  created_at TEXT NOT NULL DEFAULT (datetime('now')),
  updated_at TEXT NOT NULL DEFAULT (datetime('now')),
  resolved_at TEXT,
  archived_at TEXT
);

CREATE TABLE IF NOT EXISTS ticket_messages (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  ticket_id INTEGER NOT NULL,
  message TEXT NOT NULL,
  is_from_customer BOOLEAN NOT NULL DEFAULT 1,
  sender_name TEXT NOT NULL,
  sender_email TEXT,
  attachments TEXT,
  created_at TEXT NOT NULL DEFAULT (datetime('now')),
  FOREIGN KEY (ticket_id) REFERENCES tickets(id) ON DELETE CASCADE
);

-- Countdown Banners Table
CREATE TABLE IF NOT EXISTS countdown_banners (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  title TEXT NOT NULL,
  subtitle TEXT NOT NULL,
  titleTranslations TEXT,
  subtitleTranslations TEXT,
  targetPrice REAL NOT NULL,
  originalPrice REAL,
  endDate TEXT NOT NULL,
  priority INTEGER NOT NULL DEFAULT 0,
  backgroundColor TEXT NOT NULL DEFAULT '#000000',
  textColor TEXT NOT NULL DEFAULT '#ffffff',
  isActive BOOLEAN NOT NULL DEFAULT 0,
  createdAt TEXT NOT NULL DEFAULT (datetime('now')),
  updatedAt TEXT NOT NULL DEFAULT (datetime('now'))
);

-- Products Table
CREATE TABLE IF NOT EXISTS products (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  name TEXT NOT NULL DEFAULT 'OCUS Job Hunter Extension',
  price REAL NOT NULL,
  beforePrice REAL,
  description TEXT,
  isActive BOOLEAN NOT NULL DEFAULT 1,
  createdAt TEXT NOT NULL DEFAULT (datetime('now')),
  updatedAt TEXT NOT NULL DEFAULT (datetime('now'))
);

-- Insert default product if not exists
INSERT OR IGNORE INTO products (id, name, price, beforePrice) 
VALUES (1, 'OCUS Job Hunter Extension', 250.00, NULL);

-- Auth Settings Table
CREATE TABLE IF NOT EXISTS auth_settings (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  google_enabled BOOLEAN DEFAULT 0,
  google_client_id TEXT,
  google_client_secret TEXT,
  facebook_enabled BOOLEAN DEFAULT 0,
  facebook_app_id TEXT,
  facebook_app_secret TEXT,
  github_enabled BOOLEAN DEFAULT 0,
  github_client_id TEXT,
  github_client_secret TEXT,
  recaptcha_enabled BOOLEAN DEFAULT 0,
  recaptcha_site_key TEXT,
  recaptcha_secret_key TEXT,
  recaptcha_mode TEXT DEFAULT 'v2',
  recaptcha_customer_enabled BOOLEAN DEFAULT 0,
  recaptcha_admin_enabled BOOLEAN DEFAULT 0,
  jwt_secret TEXT DEFAULT 'demo-jwt-secret',
  session_timeout INTEGER DEFAULT 3600,
  stripe_enabled BOOLEAN DEFAULT 0,
  stripe_public_key TEXT,
  stripe_secret_key TEXT,
  created_at TEXT NOT NULL DEFAULT (datetime('now')),
  updated_at TEXT NOT NULL DEFAULT (datetime('now'))
);

-- Insert default auth settings if not exists
INSERT OR IGNORE INTO auth_settings (id) VALUES (1);

-- Generic Settings Table for flexible key-value storage
CREATE TABLE IF NOT EXISTS settings (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  key TEXT NOT NULL UNIQUE,
  value TEXT,
  created_at TEXT NOT NULL DEFAULT (datetime('now')),
  updated_at TEXT NOT NULL DEFAULT (datetime('now'))
);

-- Orders/Purchases Table
CREATE TABLE IF NOT EXISTS orders (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  customerId INTEGER,
  customerEmail TEXT NOT NULL,
  customerName TEXT NOT NULL,
  productId INTEGER NOT NULL,
  productName TEXT NOT NULL,
  originalAmount REAL NOT NULL,
  finalAmount REAL NOT NULL,
  currency TEXT NOT NULL DEFAULT 'EUR',
  status TEXT NOT NULL DEFAULT 'pending',
  paymentMethod TEXT NOT NULL DEFAULT 'stripe',
  paymentIntentId TEXT,
  downloadToken TEXT UNIQUE,
  downloadCount INTEGER DEFAULT 0,
  maxDownloads INTEGER DEFAULT 5,
  activationCode TEXT,
  invoiceNumber TEXT UNIQUE,
  createdAt TEXT NOT NULL DEFAULT (datetime('now')),
  completedAt TEXT,
  FOREIGN KEY (productId) REFERENCES products(id)
);

-- Customers Table (renamed from users for clarity)
CREATE TABLE IF NOT EXISTS customers (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  email TEXT UNIQUE NOT NULL,
  name TEXT NOT NULL,
  hashedPassword TEXT,
  isActive BOOLEAN DEFAULT 1,
  isPremium BOOLEAN DEFAULT 0, -- Deprecated, use extension_activated
  extension_activated BOOLEAN DEFAULT 0,
  registrationDate TEXT NOT NULL DEFAULT (datetime('now')),
  lastLoginAt TEXT,
  activationToken TEXT,
  passwordResetToken TEXT,
  createdAt TEXT NOT NULL DEFAULT (datetime('now')),
  updatedAt TEXT NOT NULL DEFAULT (datetime('now'))
);

-- Create a view for backward compatibility if 'users' is still used elsewhere
CREATE VIEW IF NOT EXISTS users AS SELECT * FROM customers;

CREATE TABLE IF NOT EXISTS activation_codes (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    order_id INTEGER NOT NULL,
    code TEXT NOT NULL UNIQUE,
    is_used BOOLEAN DEFAULT 0,
    created_at TEXT DEFAULT (datetime('now')),
    FOREIGN KEY (order_id) REFERENCES orders(id)
);

-- Invoices Table
CREATE TABLE IF NOT EXISTS invoices (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  orderId INTEGER NOT NULL,
  customerId INTEGER NOT NULL,
  invoiceNumber TEXT NOT NULL UNIQUE,
  amount REAL NOT NULL,
  currency TEXT NOT NULL DEFAULT 'EUR',
  taxAmount REAL DEFAULT 0,
  status TEXT NOT NULL DEFAULT 'unpaid', -- unpaid, paid, void
  invoiceDate TEXT NOT NULL DEFAULT (datetime('now')),
  dueDate TEXT,
  paidAt TEXT,
  pdfUrl TEXT,
  createdAt TEXT NOT NULL DEFAULT (datetime('now')),
  updatedAt TEXT NOT NULL DEFAULT (datetime('now')),
  FOREIGN KEY (orderId) REFERENCES orders(id),
  FOREIGN KEY (customerId) REFERENCES customers(id)
);


-- Index for settings lookup
CREATE INDEX IF NOT EXISTS idx_settings_key ON settings(key);

-- Indexes for performance
CREATE INDEX IF NOT EXISTS idx_tickets_customer_email ON tickets(customer_email);
CREATE INDEX IF NOT EXISTS idx_tickets_status ON tickets(status);
CREATE INDEX IF NOT EXISTS idx_tickets_created_at ON tickets(created_at);
CREATE INDEX IF NOT EXISTS idx_ticket_messages_ticket_id ON ticket_messages(ticket_id);
CREATE INDEX IF NOT EXISTS idx_ticket_messages_created_at ON ticket_messages(created_at);
CREATE INDEX IF NOT EXISTS idx_countdown_banners_active ON countdown_banners(isActive);
CREATE INDEX IF NOT EXISTS idx_countdown_banners_priority ON countdown_banners(priority);
CREATE INDEX IF NOT EXISTS idx_products_active ON products(isActive);
CREATE INDEX IF NOT EXISTS idx_orders_customer_email ON orders(customerEmail);
CREATE INDEX IF NOT EXISTS idx_orders_status ON orders(status);
CREATE INDEX IF NOT EXISTS idx_orders_created_at ON orders(createdAt);
CREATE INDEX IF NOT EXISTS idx_customers_email ON customers(email);
CREATE INDEX IF NOT EXISTS idx_customers_active ON customers(isActive);
CREATE INDEX IF NOT EXISTS idx_invoices_customer_id ON invoices(customerId);
CREATE INDEX IF NOT EXISTS idx_invoices_order_id ON invoices(orderId);
CREATE INDEX IF NOT EXISTS idx_orders_customer_id ON orders(customerId);
`;
    __name2(toD1Batch, "toD1Batch");
    onRequestPost12 = /* @__PURE__ */ __name2(async (context) => {
      const { request, env } = context;
      const adminSecret = request.headers.get("X-Admin-Secret");
      if (adminSecret !== "ocus-power-secret") {
        return new Response("Unauthorized", { status: 401 });
      }
      try {
        if (!env.DB) {
          return new Response("Database not available", { status: 500 });
        }
        const statements = toD1Batch(env.DB, SCHEMA_SQL);
        await env.DB.batch(statements);
        return new Response("Database reset and initialized successfully.", {
          status: 200,
          headers: { "Content-Type": "text/plain" }
        });
      } catch (error) {
        console.error("Database reset failed:", error);
        return new Response(`Database reset failed: ${error.message}`, {
          status: 500,
          headers: { "Content-Type": "text/plain" }
        });
      }
    }, "onRequestPost");
    onRequestOptions24 = /* @__PURE__ */ __name2(async () => {
      return new Response(null, {
        status: 204,
        headers: {
          "Access-Control-Allow-Origin": "*",
          "Access-Control-Allow-Methods": "POST, OPTIONS",
          "Access-Control-Allow-Headers": "Content-Type, X-Admin-Secret"
        }
      });
    }, "onRequestOptions");
  }
});
var onRequestGet28;
var onRequestPut13;
var onRequestPatch;
var onRequestOptions25;
var init_seo_settings = __esm({
  "api/admin/seo-settings.ts"() {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    init_settings_storage();
    onRequestGet28 = /* @__PURE__ */ __name2(async ({ env }) => {
      try {
        if (!env.DB) {
          return new Response(JSON.stringify({
            success: false,
            message: "Database not available"
          }), {
            status: 500,
            headers: {
              "Content-Type": "application/json",
              "Access-Control-Allow-Origin": "*"
            }
          });
        }
        const settingsStorage = new SettingsStorage(env.DB);
        await settingsStorage.initializeSettings();
        const title = await settingsStorage.getSetting("seo_title") || "OCUS Job Hunter";
        const description = await settingsStorage.getSetting("seo_description") || "Automated job application Chrome extension";
        const keywords = await settingsStorage.getSetting("seo_keywords") || "job hunting, automation, chrome extension";
        const coverImage = await settingsStorage.getSetting("seo_cover_image") || "";
        const logo = await settingsStorage.getSetting("seo_logo") || "";
        const favicon = await settingsStorage.getSetting("seo_favicon") || "";
        console.log("GET SEO Settings - Retrieved from DB:", {
          title,
          description,
          keywords,
          coverImage: coverImage ? "Has image data" : "No image",
          logo: logo ? "Has logo data" : "No logo",
          favicon: favicon ? "Has favicon data" : "No favicon"
        });
        return new Response(JSON.stringify({
          success: true,
          title,
          description,
          keywords,
          coverImage,
          logo,
          favicon
        }), {
          headers: {
            "Content-Type": "application/json",
            "Access-Control-Allow-Origin": "*"
          }
        });
      } catch (error) {
        console.error("Failed to get SEO settings:", error);
        return new Response(JSON.stringify({
          success: false,
          message: "Failed to load SEO settings"
        }), {
          status: 500,
          headers: {
            "Content-Type": "application/json",
            "Access-Control-Allow-Origin": "*"
          }
        });
      }
    }, "onRequestGet");
    onRequestPut13 = /* @__PURE__ */ __name2(async ({ request, env }) => {
      try {
        if (!env.DB) {
          return new Response(JSON.stringify({
            success: false,
            message: "Database not available"
          }), {
            status: 500,
            headers: {
              "Content-Type": "application/json",
              "Access-Control-Allow-Origin": "*"
            }
          });
        }
        const formData = await request.formData();
        const settingsStorage = new SettingsStorage(env.DB);
        await settingsStorage.initializeSettings();
        console.log("FormData keys:", Array.from(formData.keys()));
        console.log("FormData entries:");
        for (const [key, value] of formData.entries()) {
          console.log(`${key}:`, value instanceof File ? `File(${value.name}, ${value.size} bytes)` : value);
        }
        const title = formData.get("title")?.toString();
        const description = formData.get("description")?.toString();
        const keywords = formData.get("keywords")?.toString();
        if (title) {
          await settingsStorage.setSetting("seo_title", title);
        }
        if (description) {
          await settingsStorage.setSetting("seo_description", description);
        }
        if (keywords) {
          await settingsStorage.setSetting("seo_keywords", keywords);
        }
        const coverImageFile = formData.get("coverImage");
        const logoFile = formData.get("logo");
        const faviconFile = formData.get("favicon");
        console.log("File uploads check:", {
          coverImage: coverImageFile ? `${coverImageFile.name} (${coverImageFile.size} bytes)` : "null",
          logo: logoFile ? `${logoFile.name} (${logoFile.size} bytes)` : "null",
          favicon: faviconFile ? `${faviconFile.name} (${faviconFile.size} bytes)` : "null"
        });
        if (coverImageFile && coverImageFile.size > 0) {
          console.log("Processing cover image:", coverImageFile.name, coverImageFile.type, coverImageFile.size);
          const arrayBuffer = await coverImageFile.arrayBuffer();
          const base64 = btoa(String.fromCharCode(...new Uint8Array(arrayBuffer)));
          const dataUrl = `data:${coverImageFile.type};base64,${base64}`;
          console.log("Saving cover image to DB, data URL length:", dataUrl.length);
          await settingsStorage.setSetting("seo_cover_image", dataUrl);
          console.log("Cover image saved successfully");
        }
        if (logoFile && logoFile.size > 0) {
          const arrayBuffer = await logoFile.arrayBuffer();
          const base64 = btoa(String.fromCharCode(...new Uint8Array(arrayBuffer)));
          const dataUrl = `data:${logoFile.type};base64,${base64}`;
          await settingsStorage.setSetting("seo_logo", dataUrl);
        }
        if (faviconFile && faviconFile.size > 0) {
          const arrayBuffer = await faviconFile.arrayBuffer();
          const base64 = btoa(String.fromCharCode(...new Uint8Array(arrayBuffer)));
          const dataUrl = `data:${faviconFile.type};base64,${base64}`;
          await settingsStorage.setSetting("seo_favicon", dataUrl);
        }
        console.log("SEO settings updated successfully");
        return new Response(JSON.stringify({
          success: true,
          message: "SEO settings updated successfully"
        }), {
          headers: {
            "Content-Type": "application/json",
            "Access-Control-Allow-Origin": "*"
          }
        });
      } catch (error) {
        console.error("Failed to update SEO settings:", error);
        return new Response(JSON.stringify({
          success: false,
          message: `Failed to update SEO settings: ${error.message || error}`
        }), {
          status: 500,
          headers: {
            "Content-Type": "application/json",
            "Access-Control-Allow-Origin": "*"
          }
        });
      }
    }, "onRequestPut");
    onRequestPatch = /* @__PURE__ */ __name2(async ({ request, env }) => {
      try {
        if (!env.DB) {
          return new Response(JSON.stringify({
            success: false,
            message: "Database not available"
          }), {
            status: 500,
            headers: {
              "Content-Type": "application/json",
              "Access-Control-Allow-Origin": "*"
            }
          });
        }
        const data = await request.json();
        const settingsStorage = new SettingsStorage(env.DB);
        await settingsStorage.initializeSettings();
        if (data.title) {
          await settingsStorage.setSetting("seo_title", data.title);
        }
        if (data.description) {
          await settingsStorage.setSetting("seo_description", data.description);
        }
        if (data.keywords) {
          await settingsStorage.setSetting("seo_keywords", data.keywords);
        }
        console.log("SEO text settings updated successfully");
        return new Response(JSON.stringify({
          success: true,
          message: "SEO settings updated successfully"
        }), {
          headers: {
            "Content-Type": "application/json",
            "Access-Control-Allow-Origin": "*"
          }
        });
      } catch (error) {
        console.error("Failed to update SEO text settings:", error);
        return new Response(JSON.stringify({
          success: false,
          message: `Failed to update SEO settings: ${error.message || error}`
        }), {
          status: 500,
          headers: {
            "Content-Type": "application/json",
            "Access-Control-Allow-Origin": "*"
          }
        });
      }
    }, "onRequestPatch");
    onRequestOptions25 = /* @__PURE__ */ __name2(async () => {
      return new Response(null, {
        status: 200,
        headers: {
          "Access-Control-Allow-Origin": "*",
          "Access-Control-Allow-Methods": "GET, PUT, PATCH, OPTIONS",
          "Access-Control-Allow-Headers": "Content-Type, Authorization"
        }
      });
    }, "onRequestOptions");
  }
});
var onRequestGet29;
var onRequestOptions26;
var init_stats = __esm({
  "api/admin/stats.ts"() {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    onRequestGet29 = /* @__PURE__ */ __name2(async () => {
      const stats = {
        totalUsers: 1247,
        activeUsers: 892,
        newUsersToday: 23,
        totalTickets: 156,
        openTickets: 34,
        resolvedTickets: 122,
        revenue: {
          monthly: 15420,
          yearly: 184500,
          growth: 12.5
        },
        userGrowth: [
          { month: "Jan", users: 1100 },
          { month: "Feb", users: 1180 },
          { month: "Mar", users: 1247 }
        ],
        ticketStats: [
          { category: "Technical", count: 45 },
          { category: "Billing", count: 32 },
          { category: "Feature Request", count: 28 },
          { category: "General", count: 51 }
        ],
        recentActivity: [
          { time: "2 min ago", action: "New user registration: john@example.com" },
          { time: "5 min ago", action: "Ticket #156 resolved by support team" },
          { time: "12 min ago", action: "Payment received: $49.99 from user #1234" }
        ]
      };
      return new Response(JSON.stringify(stats), {
        headers: {
          "Content-Type": "application/json",
          "Access-Control-Allow-Origin": "*"
        }
      });
    }, "onRequestGet");
    onRequestOptions26 = /* @__PURE__ */ __name2(async () => {
      return new Response(null, {
        headers: {
          "Access-Control-Allow-Origin": "*",
          "Access-Control-Allow-Methods": "GET, OPTIONS",
          "Access-Control-Allow-Headers": "Content-Type"
        }
      });
    }, "onRequestOptions");
  }
});
var onRequestPost13;
var onRequestOptions27;
var init_sync_banner_price = __esm({
  "api/admin/sync-banner-price.ts"() {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    init_settings_storage();
    onRequestPost13 = /* @__PURE__ */ __name2(async ({ request, env }) => {
      try {
        const requestData = await request.json();
        const { targetPrice } = requestData;
        if (!targetPrice) {
          return new Response(JSON.stringify({ error: "targetPrice is required" }), {
            status: 400,
            headers: {
              "Content-Type": "application/json",
              "Access-Control-Allow-Origin": "*"
            }
          });
        }
        const settingsStorage = new SettingsStorage(env.DB);
        const bannersData = await settingsStorage.getSetting("countdown_banners");
        let banners = bannersData ? JSON.parse(bannersData) : [];
        if (banners.length === 0) {
          banners = [{
            id: "1",
            title: "Limited Time Offer!",
            subtitle: "Get OCUS Job Hunter Extension at Special Price",
            targetPrice,
            originalPrice: 299.99,
            endDate: new Date(Date.now() + 7 * 24 * 60 * 60 * 1e3).toISOString(),
            priority: 1,
            backgroundColor: "#FF6B35",
            textColor: "#FFFFFF",
            isActive: true,
            createdAt: (/* @__PURE__ */ new Date()).toISOString(),
            updatedAt: (/* @__PURE__ */ new Date()).toISOString()
          }];
        } else {
          banners[0].targetPrice = targetPrice;
          banners[0].updatedAt = (/* @__PURE__ */ new Date()).toISOString();
        }
        await settingsStorage.setSetting("countdown_banners", JSON.stringify(banners));
        const updateProductResult = await env.DB.prepare(`
      UPDATE products 
      SET price = ? 
      WHERE id = 1
    `).bind(targetPrice.toString()).run();
        return new Response(JSON.stringify({
          success: true,
          message: "Banner price synced successfully",
          targetPrice
        }), {
          headers: {
            "Content-Type": "application/json",
            "Access-Control-Allow-Origin": "*"
          }
        });
      } catch (error) {
        return new Response(JSON.stringify({
          success: false,
          error: "Failed to sync banner price",
          details: String(error)
        }), {
          status: 500,
          headers: {
            "Content-Type": "application/json",
            "Access-Control-Allow-Origin": "*"
          }
        });
      }
    }, "onRequestPost");
    onRequestOptions27 = /* @__PURE__ */ __name2(async () => {
      return new Response(null, {
        status: 200,
        headers: {
          "Access-Control-Allow-Origin": "*",
          "Access-Control-Allow-Methods": "POST, OPTIONS",
          "Access-Control-Allow-Headers": "Content-Type"
        }
      });
    }, "onRequestOptions");
  }
});
function mapStatus(status) {
  if (status === "in-progress") return "in_progress";
  if (status === "resolved") return "closed";
  return status || "open";
}
__name(mapStatus, "mapStatus");
var onRequestGet30;
var onRequestOptions28;
var init_tickets = __esm({
  "api/admin/tickets.ts"() {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    init_db();
    __name2(mapStatus, "mapStatus");
    onRequestGet30 = /* @__PURE__ */ __name2(async ({ request, env }) => {
      const expressBase = env?.EXPRESS_API_BASE;
      if (expressBase) {
        const base = expressBase.replace(/\/$/, "");
        const url = `${base}/api/admin/tickets`;
        const headers = {};
        const cookie = request.headers.get("cookie");
        const auth = request.headers.get("authorization");
        if (cookie) headers["cookie"] = cookie;
        if (auth) headers["authorization"] = auth;
        const proxied = await fetch(url, { headers, redirect: "manual" });
        const respHeaders = new Headers(proxied.headers);
        const setCookie = respHeaders.get("set-cookie");
        if (setCookie) {
          const rewritten = setCookie.replace(/;\s*Domain=[^;]+/i, "");
          respHeaders.delete("set-cookie");
          respHeaders.append("set-cookie", rewritten);
        }
        return new Response(proxied.body, { status: proxied.status, headers: respHeaders });
      }
      const storage2 = new TicketStorage(env.DB);
      const allTickets = await storage2.getAllTickets();
      const tickets2 = allTickets.map((t3) => ({
        id: t3.id,
        title: t3.title,
        description: t3.description,
        status: mapStatus(t3.status),
        priority: t3.priority,
        userId: t3.assigned_to_user_id || 0,
        userName: t3.customer_name,
        userEmail: t3.customer_email,
        createdAt: t3.created_at,
        updatedAt: t3.updated_at
      }));
      return new Response(JSON.stringify(tickets2), {
        headers: {
          "Content-Type": "application/json",
          "Access-Control-Allow-Origin": "*"
        }
      });
    }, "onRequestGet");
    onRequestOptions28 = /* @__PURE__ */ __name2(async () => {
      return new Response(null, {
        headers: {
          "Access-Control-Allow-Origin": "*",
          "Access-Control-Allow-Methods": "GET, OPTIONS",
          "Access-Control-Allow-Headers": "Content-Type"
        }
      });
    }, "onRequestOptions");
  }
});
var onRequestPost14;
var onRequestOptions29;
var init_update_banner_price = __esm({
  "api/admin/update-banner-price.ts"() {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    onRequestPost14 = /* @__PURE__ */ __name2(async ({ request, env }) => {
      try {
        const { bannerId, targetPrice } = await request.json();
        const result = await env.DB.prepare(`
      UPDATE countdown_banners 
      SET targetPrice = ? 
      WHERE id = ?
    `).bind(targetPrice.toString(), bannerId).run();
        if (result.changes === 0) {
          return new Response(JSON.stringify({
            success: false,
            error: "Banner not found"
          }), {
            status: 404,
            headers: {
              "Content-Type": "application/json",
              "Access-Control-Allow-Origin": "*"
            }
          });
        }
        return new Response(JSON.stringify({
          success: true,
          message: "Banner price updated successfully",
          bannerId,
          newPrice: targetPrice
        }), {
          headers: {
            "Content-Type": "application/json",
            "Access-Control-Allow-Origin": "*"
          }
        });
      } catch (error) {
        console.error("Error updating banner price:", error);
        return new Response(JSON.stringify({
          success: false,
          error: "Failed to update banner price"
        }), {
          status: 500,
          headers: {
            "Content-Type": "application/json",
            "Access-Control-Allow-Origin": "*"
          }
        });
      }
    }, "onRequestPost");
    onRequestOptions29 = /* @__PURE__ */ __name2(async () => {
      return new Response(null, {
        status: 200,
        headers: {
          "Access-Control-Allow-Origin": "*",
          "Access-Control-Allow-Methods": "POST, OPTIONS",
          "Access-Control-Allow-Headers": "Content-Type"
        }
      });
    }, "onRequestOptions");
  }
});
var onRequestGet31;
var init_update_banner_price_direct = __esm({
  "api/admin/update-banner-price-direct.ts"() {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    onRequestGet31 = /* @__PURE__ */ __name2(async ({ env }) => {
      try {
        const result = await env.DB.prepare(`
      UPDATE countdown_banners 
      SET targetPrice = '1.00' 
      WHERE id = 1
    `).run();
        const banner = await env.DB.prepare(`
      SELECT * FROM countdown_banners WHERE id = 1
    `).first();
        return new Response(JSON.stringify({
          success: true,
          message: "Banner price updated to \u20AC1.00",
          updated: result.changes > 0,
          banner
        }), {
          headers: {
            "Content-Type": "application/json",
            "Access-Control-Allow-Origin": "*"
          }
        });
      } catch (error) {
        console.error("Error updating banner price:", error);
        return new Response(JSON.stringify({
          success: false,
          error: "Failed to update banner price",
          details: error.message
        }), {
          status: 500,
          headers: {
            "Content-Type": "application/json",
            "Access-Control-Allow-Origin": "*"
          }
        });
      }
    }, "onRequestGet");
  }
});
function json10(data, status = 200) {
  return new Response(JSON.stringify(data), {
    status,
    headers: {
      "Content-Type": "application/json",
      "Access-Control-Allow-Origin": "*"
    }
  });
}
__name(json10, "json10");
var onRequestGet32;
var onRequestOptions30;
var init_update_premium_status = __esm({
  "api/admin/update-premium-status.ts"() {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    __name2(json10, "json");
    onRequestGet32 = /* @__PURE__ */ __name2(async ({ request, env }) => {
      try {
        if (!env.DB) {
          return json10({ success: false, message: "Database not available" }, 500);
        }
        const now = (/* @__PURE__ */ new Date()).toISOString();
        let updatedRecords = 0;
        const completedOrders = await env.DB.prepare(`
      SELECT DISTINCT customer_id, customer_email, customer_name, final_amount
      FROM orders 
      WHERE status = 'completed' AND final_amount > 0
    `).all();
        console.log("Found completed orders:", completedOrders.results?.length);
        if (completedOrders.results && completedOrders.results.length > 0) {
          for (const order of completedOrders.results) {
            const orderData = order;
            if (orderData.customer_id) {
              const customerUpdate = await env.DB.prepare(`
            UPDATE customers 
            SET is_premium = 1, 
                extension_activated = 1,
                total_spent = COALESCE(total_spent, 0) + ?,
                total_orders = COALESCE(total_orders, 0) + 1,
                updated_at = ?
            WHERE id = ? AND (is_premium != 1 OR extension_activated != 1)
          `).bind(orderData.final_amount, now, orderData.customer_id).run();
              if (customerUpdate.meta?.changes && customerUpdate.meta.changes > 0) {
                updatedRecords++;
                console.log("Updated customer:", orderData.customer_id);
              }
            }
            if (orderData.customer_email) {
              const userUpdate = await env.DB.prepare(`
            UPDATE users 
            SET is_premium = 1, 
                extension_activated = 1,
                premium_activated_at = ?,
                total_spent = COALESCE(total_spent, 0) + ?,
                total_orders = COALESCE(total_orders, 0) + 1
            WHERE email = ? AND (is_premium != 1 OR extension_activated != 1)
          `).bind(now, orderData.final_amount, orderData.customer_email).run();
              if (userUpdate.meta?.changes && userUpdate.meta.changes > 0) {
                updatedRecords++;
                console.log("Updated user:", orderData.customer_email);
              }
            }
          }
        }
        const missingPremiumCustomers = await env.DB.prepare(`
      SELECT c.id, c.email, c.name
      FROM customers c
      WHERE c.id IN (
        SELECT DISTINCT customer_id 
        FROM orders 
        WHERE status = 'completed' AND final_amount > 0
      ) AND (c.is_premium != 1 OR c.extension_activated != 1)
    `).all();
        if (missingPremiumCustomers.results && missingPremiumCustomers.results.length > 0) {
          for (const customer of missingPremiumCustomers.results) {
            const customerData = customer;
            await env.DB.prepare(`
          UPDATE customers 
          SET is_premium = 1, extension_activated = 1, updated_at = ?
          WHERE id = ?
        `).bind(now, customerData.id).run();
            updatedRecords++;
            console.log("Fixed missing premium status for customer:", customerData.id);
          }
        }
        return json10({
          success: true,
          message: `Updated ${updatedRecords} records with premium status`,
          updatedRecords
        });
      } catch (error) {
        console.error("Error fixing existing purchases:", error);
        return json10({
          success: false,
          message: "Failed to fix existing purchases",
          error: error.message
        }, 500);
      }
    }, "onRequestGet");
    onRequestOptions30 = /* @__PURE__ */ __name2(async () => {
      return new Response(null, {
        headers: {
          "Access-Control-Allow-Origin": "*",
          "Access-Control-Allow-Methods": "GET, OPTIONS",
          "Access-Control-Allow-Headers": "Content-Type"
        }
      });
    }, "onRequestOptions");
  }
});
var onRequestPost15;
var init_update_user_premium = __esm({
  "api/admin/update-user-premium.ts"() {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    onRequestPost15 = /* @__PURE__ */ __name2(async ({ request, env }) => {
      try {
        const body = await request.json();
        const { email, adminKey } = body;
        if (adminKey !== "fix-premium-2024") {
          return new Response(JSON.stringify({
            success: false,
            message: "Invalid admin key"
          }), {
            status: 403,
            headers: {
              "Content-Type": "application/json",
              "Access-Control-Allow-Origin": "*"
            }
          });
        }
        if (!env.DB) {
          return new Response(JSON.stringify({ success: false, message: "Database not available" }), {
            status: 500,
            headers: {
              "Content-Type": "application/json",
              "Access-Control-Allow-Origin": "*"
            }
          });
        }
        const results = {
          usersFixed: 0,
          customersFixed: 0,
          errors: []
        };
        if (email) {
          const user = await env.DB.prepare(`
        SELECT id, email, is_premium, extension_activated FROM users WHERE email = ?
      `).bind(email).first();
          if (user) {
            const userOrders = await env.DB.prepare(`
          SELECT COUNT(*) as count FROM orders 
          WHERE customer_email = ? AND status = 'completed' AND final_amount > 0
        `).bind(email).first();
            if (userOrders && userOrders.count > 0) {
              await env.DB.prepare(`
            UPDATE users 
            SET is_premium = 1, extension_activated = 1, premium_activated_at = datetime('now')
            WHERE id = ?
          `).bind(user.id).run();
              results.usersFixed++;
            }
          }
          const customer = await env.DB.prepare(`
        SELECT id, email, is_premium, extension_activated FROM customers WHERE email = ?
      `).bind(email).first();
          if (customer) {
            const customerOrders = await env.DB.prepare(`
          SELECT COUNT(*) as count FROM orders 
          WHERE customer_id = ? AND status = 'completed' AND final_amount > 0
        `).bind(customer.id).first();
            if (customerOrders && customerOrders.count > 0) {
              await env.DB.prepare(`
            UPDATE customers 
            SET is_premium = 1, extension_activated = 1, premium_activated_at = datetime('now')
            WHERE id = ?
          `).bind(customer.id).run();
              results.customersFixed++;
            }
          }
        } else {
          const usersToFix = await env.DB.prepare(`
        SELECT DISTINCT u.id, u.email
        FROM users u
        JOIN orders o ON u.email = o.customer_email
        WHERE o.status = 'completed' AND o.final_amount > 0
        AND (u.is_premium != 1 OR u.extension_activated != 1)
      `).all();
          for (const user of usersToFix.results || []) {
            await env.DB.prepare(`
          UPDATE users 
          SET is_premium = 1, extension_activated = 1, premium_activated_at = datetime('now')
          WHERE id = ?
        `).bind(user.id).run();
            results.usersFixed++;
          }
          const customersToFix = await env.DB.prepare(`
        SELECT DISTINCT c.id, c.email
        FROM customers c
        JOIN orders o ON c.id = o.customer_id
        WHERE o.status = 'completed' AND o.final_amount > 0
        AND (c.is_premium != 1 OR c.extension_activated != 1)
      `).all();
          for (const customer of customersToFix.results || []) {
            await env.DB.prepare(`
          UPDATE customers 
          SET is_premium = 1, extension_activated = 1, premium_activated_at = datetime('now')
          WHERE id = ?
        `).bind(customer.id).run();
            results.customersFixed++;
          }
        }
        return new Response(JSON.stringify({
          success: true,
          message: `Premium activation fix completed`,
          results
        }), {
          headers: {
            "Content-Type": "application/json",
            "Access-Control-Allow-Origin": "*"
          }
        });
      } catch (error) {
        console.error("Error fixing premium activation:", error);
        return new Response(JSON.stringify({
          success: false,
          message: error.message
        }), {
          status: 500,
          headers: {
            "Content-Type": "application/json",
            "Access-Control-Allow-Origin": "*"
          }
        });
      }
    }, "onRequestPost");
  }
});
var onRequestGet33;
var onRequestOptions31;
var init_users = __esm({
  "api/admin/users.ts"() {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    onRequestGet33 = /* @__PURE__ */ __name2(async ({ env }) => {
      try {
        let users2 = [];
        let stats = {
          totalUsers: 0,
          activeUsers: 0,
          premiumUsers: 0
        };
        try {
          const userResults = await env.DB.prepare(`
        SELECT 
          u.id, 
          u.email, 
          u.name, 
          u.role,
          u.created_at,
          u.is_premium,
          u.premium_activated_at,
          u.total_spent,
          u.total_orders,
          u.extension_activated,
          COUNT(DISTINCT d.id) as trial_downloads,
          COUNT(DISTINCT o.id) as purchase_count,
          MAX(d.created_at) as last_download,
          MAX(o.created_at) as last_purchase
        FROM users u
        LEFT JOIN user_downloads d ON u.id = d.user_id
        LEFT JOIN orders o ON u.id = o.customer_id AND o.status = 'completed'
        GROUP BY u.id
        ORDER BY u.created_at DESC
      `).all();
          users2 = userResults.results || [];
          const statsResult = await env.DB.prepare(`
        SELECT 
          COUNT(*) as totalUsers,
          COUNT(CASE WHEN is_premium = 1 THEN 1 END) as premiumUsers,
          COUNT(DISTINCT d.user_id) as trialUsers
        FROM users u
        LEFT JOIN user_downloads d ON u.id = d.user_id
      `).first();
          if (statsResult) {
            stats = {
              totalUsers: Number(statsResult.totalUsers) || 0,
              activeUsers: Number(statsResult.trialUsers) || 0,
              premiumUsers: Number(statsResult.premiumUsers) || 0
            };
          }
        } catch (dbError) {
          console.log("Users table not found, checking fallback storage:", dbError);
          const settingsResults = await env.DB.prepare(`
        SELECT key, value FROM settings 
        WHERE key LIKE 'user_%'
      `).all();
          const allUsers = [];
          for (const setting of settingsResults.results || []) {
            try {
              const userData = JSON.parse(setting.value);
              userData.id = userData.email.replace("@", "_at_").replace(".", "_dot_");
              userData.registrationDate = userData.updatedAt;
              userData.createdAt = userData.updatedAt;
              userData.isActive = true;
              allUsers.push(userData);
            } catch (parseError) {
              console.log("Error parsing user data:", parseError);
            }
          }
          users2 = allUsers.sort((a3, b2) => {
            const dateA = new Date(a3.updatedAt);
            const dateB = new Date(b2.updatedAt);
            return dateB.getTime() - dateA.getTime();
          });
          stats.totalUsers = users2.length;
          stats.activeUsers = users2.filter((u3) => u3.isActive).length;
          stats.premiumUsers = users2.filter((u3) => u3.isPremium).length;
        }
        return new Response(JSON.stringify({
          success: true,
          users: users2,
          stats
        }), {
          headers: {
            "Content-Type": "application/json",
            "Access-Control-Allow-Origin": "*"
          }
        });
      } catch (error) {
        console.error("Error fetching admin users:", error);
        return new Response(JSON.stringify({
          success: false,
          error: "Failed to fetch users",
          details: String(error)
        }), {
          status: 500,
          headers: {
            "Content-Type": "application/json",
            "Access-Control-Allow-Origin": "*"
          }
        });
      }
    }, "onRequestGet");
    onRequestOptions31 = /* @__PURE__ */ __name2(async () => {
      return new Response(null, {
        status: 200,
        headers: {
          "Access-Control-Allow-Origin": "*",
          "Access-Control-Allow-Methods": "GET, OPTIONS",
          "Access-Control-Allow-Headers": "Content-Type"
        }
      });
    }, "onRequestOptions");
  }
});
var onRequestOptions32;
var onRequestGet34;
var init_active = __esm({
  "api/announcement-badge/active.ts"() {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    init_settings_storage();
    onRequestOptions32 = /* @__PURE__ */ __name2(async () => {
      return new Response(null, {
        status: 200,
        headers: {
          "Access-Control-Allow-Origin": "*",
          "Access-Control-Allow-Methods": "GET, OPTIONS",
          "Access-Control-Allow-Headers": "Content-Type, Authorization"
        }
      });
    }, "onRequestOptions");
    onRequestGet34 = /* @__PURE__ */ __name2(async (context) => {
      try {
        const settingsStorage = new SettingsStorage(context.env.DB);
        const badgesData = await settingsStorage.getSetting("announcement_badges");
        const badges = badgesData ? JSON.parse(badgesData) : [];
        console.log("Retrieved announcement badges for active endpoint:", badges.length);
        const activeBadge = badges.filter((badge) => badge.isActive).sort((a3, b2) => b2.priority - a3.priority)[0];
        if (!activeBadge) {
          return new Response(JSON.stringify(null), {
            status: 200,
            headers: {
              "Content-Type": "application/json",
              "Access-Control-Allow-Origin": "*"
            }
          });
        }
        const frontendBadge = {
          id: activeBadge.id,
          isEnabled: activeBadge.isActive,
          textEn: activeBadge.title,
          textTranslations: activeBadge.textTranslations || {},
          backgroundColor: activeBadge.backgroundColor,
          textColor: activeBadge.textColor,
          priority: activeBadge.priority
        };
        console.log("Returning active badge:", frontendBadge);
        return new Response(JSON.stringify(frontendBadge), {
          status: 200,
          headers: {
            "Content-Type": "application/json",
            "Access-Control-Allow-Origin": "*"
          }
        });
      } catch (error) {
        console.error("Error fetching active announcement badge:", error);
        return new Response(JSON.stringify({
          error: "Failed to fetch active announcement badge",
          details: error instanceof Error ? error.message : "Unknown error"
        }), {
          status: 500,
          headers: {
            "Content-Type": "application/json",
            "Access-Control-Allow-Origin": "*"
          }
        });
      }
    }, "onRequestGet");
  }
});
var onRequestGet35;
var init_facebook = __esm({
  "api/auth/facebook.ts"() {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    onRequestGet35 = /* @__PURE__ */ __name2(async ({ request, env }) => {
      const url = new URL(request.url);
      const code = url.searchParams.get("code");
      try {
        const authSettings2 = await env.DB.prepare(
          "SELECT facebook_enabled, facebook_app_id, facebook_app_secret FROM auth_settings WHERE id = 1"
        ).first();
        if (!authSettings2?.facebook_enabled) {
          return new Response("Facebook login is not enabled.", { status: 400 });
        }
        const { facebook_app_id, facebook_app_secret } = authSettings2;
        const redirectUri = `${url.origin}/api/auth/facebook`;
        if (!code) {
          const authUrl = new URL("https://www.facebook.com/v18.0/dialog/oauth");
          authUrl.searchParams.set("client_id", facebook_app_id);
          authUrl.searchParams.set("redirect_uri", redirectUri);
          authUrl.searchParams.set("response_type", "code");
          authUrl.searchParams.set("scope", "email,public_profile");
          return Response.redirect(authUrl.toString(), 302);
        }
        const tokenResponse = await fetch("https://graph.facebook.com/v18.0/oauth/access_token", {
          method: "POST",
          headers: { "Content-Type": "application/x-www-form-urlencoded" },
          body: new URLSearchParams({
            client_id: facebook_app_id,
            client_secret: facebook_app_secret,
            redirect_uri: redirectUri,
            code
          })
        });
        if (!tokenResponse.ok) {
          const errorText = await tokenResponse.text();
          throw new Error(`Failed to get access token: ${errorText}`);
        }
        const tokenData = await tokenResponse.json();
        const userResponse = await fetch(`https://graph.facebook.com/me?fields=id,name,email&access_token=${tokenData.access_token}`);
        if (!userResponse.ok) {
          throw new Error("Failed to fetch user data from Facebook.");
        }
        const userData = await userResponse.json();
        if (!userData.email) {
          return new Response("Email not provided by Facebook.", { status: 400 });
        }
        let user = await env.DB.prepare("SELECT id, name, email FROM users WHERE email = ?").bind(userData.email).first();
        if (!user) {
          const now = (/* @__PURE__ */ new Date()).toISOString();
          await env.DB.prepare(
            "INSERT INTO users (email, name, provider, provider_id, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?)"
          ).bind(userData.email, userData.name, "facebook", userData.id, now, now).run();
          user = await env.DB.prepare("SELECT id, name, email FROM users WHERE email = ?").bind(userData.email).first();
        }
        if (!user) {
          return new Response("Could not create or find user.", { status: 500 });
        }
        const redirectURL = new URL("/dashboard", url.origin);
        redirectURL.searchParams.set("userId", user.id.toString());
        redirectURL.searchParams.set("name", user.name);
        redirectURL.searchParams.set("email", user.email);
        return Response.redirect(redirectURL.toString(), 302);
      } catch (error) {
        console.error("Facebook OAuth Error:", error);
        const errorUrl = new URL("/login", url.origin);
        errorUrl.searchParams.set("error", "oauth_failed");
        errorUrl.searchParams.set("provider", "facebook");
        return Response.redirect(errorUrl.toString(), 302);
      }
    }, "onRequestGet");
  }
});
var onRequestGet36;
var init_github = __esm({
  "api/auth/github.ts"() {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    onRequestGet36 = /* @__PURE__ */ __name2(async (context) => {
      const { request, env } = context;
      const url = new URL(request.url);
      const code = url.searchParams.get("code");
      const state = url.searchParams.get("state");
      try {
        const authSettings2 = await env.DB.prepare("SELECT github_enabled, github_client_id, github_client_secret FROM auth_settings WHERE id = 1").first();
        if (!authSettings2?.github_enabled) {
          return new Response("GitHub login is not enabled.", { status: 400 });
        }
        if (!authSettings2.github_client_id || !authSettings2.github_client_secret) {
          return new Response("GitHub client ID or secret is not configured.", { status: 500 });
        }
        if (!code) {
          const authUrl = new URL("https://github.com/login/oauth/authorize");
          authUrl.searchParams.set("client_id", authSettings2.github_client_id);
          authUrl.searchParams.set("redirect_uri", `${url.origin}/api/auth/github`);
          authUrl.searchParams.set("scope", "user:email");
          authUrl.searchParams.set("state", state || crypto.randomUUID());
          return Response.redirect(authUrl.toString(), 302);
        }
        const tokenResponse = await fetch("https://github.com/login/oauth/access_token", {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
            "Accept": "application/json"
          },
          body: JSON.stringify({
            client_id: authSettings2.github_client_id,
            client_secret: authSettings2.github_client_secret,
            code
          })
        });
        const tokenData = await tokenResponse.json();
        if (tokenData.error || !tokenData.access_token) {
          throw new Error(`Failed to get access token: ${tokenData.error_description || "No token returned"}`);
        }
        const userResponse = await fetch("https://api.github.com/user", {
          headers: {
            "Authorization": `Bearer ${tokenData.access_token}`,
            "User-Agent": "OCUS-Job-Hunter"
          }
        });
        const userData = await userResponse.json();
        let userEmail = userData.email;
        if (!userEmail) {
          const emailResponse = await fetch("https://api.github.com/user/emails", {
            headers: {
              "Authorization": `Bearer ${tokenData.access_token}`,
              "User-Agent": "OCUS-Job-Hunter"
            }
          });
          const emails = await emailResponse.json();
          const primaryEmail = emails.find((e2) => e2.primary && e2.verified);
          userEmail = primaryEmail?.email || null;
        }
        if (!userEmail) {
          return new Response("Could not retrieve a verified primary email from GitHub.", { status: 400 });
        }
        let user = await env.DB.prepare("SELECT id, name, email FROM users WHERE github_id = ?").bind(userData.id).first();
        if (!user) {
          const name = userData.name || userData.login;
          const now = (/* @__PURE__ */ new Date()).toISOString();
          await env.DB.prepare(
            "INSERT INTO users (email, name, provider, provider_id, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?)"
          ).bind(userEmail, name, "github", userData.id, now, now).run();
          user = await env.DB.prepare("SELECT id, name, email FROM users WHERE github_id = ?").bind(userData.id).first();
        }
        if (!user) {
          return new Response("Failed to create or find user.", { status: 500 });
        }
        const redirectUrl = new URL(`${url.origin}/dashboard`);
        redirectUrl.searchParams.set("status", "loggedIn");
        redirectUrl.searchParams.set("userId", user.id.toString());
        redirectUrl.searchParams.set("name", user.name);
        redirectUrl.searchParams.set("email", user.email);
        return Response.redirect(redirectUrl.toString(), 302);
      } catch (error) {
        console.error("GitHub OAuth Error:", error);
        const errorUrl = new URL(`${url.origin}/login`);
        errorUrl.searchParams.set("error", "github_oauth_failed");
        return Response.redirect(errorUrl.toString(), 302);
      }
    }, "onRequestGet");
  }
});
var onRequestGet37;
var init_google = __esm({
  "api/auth/google.ts"() {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    onRequestGet37 = /* @__PURE__ */ __name2(async ({ request, env }) => {
      const url = new URL(request.url);
      const code = url.searchParams.get("code");
      try {
        const authSettings2 = await env.DB.prepare(
          "SELECT google_enabled, google_client_id, google_client_secret FROM auth_settings WHERE id = 1"
        ).first();
        if (!authSettings2?.google_enabled) {
          return new Response("Google login is not enabled.", { status: 400 });
        }
        const { google_client_id, google_client_secret } = authSettings2;
        const redirectUri = `${url.origin}/api/auth/google`;
        if (!code) {
          const authUrl = new URL("https://accounts.google.com/o/oauth2/v2/auth");
          authUrl.searchParams.set("client_id", google_client_id);
          authUrl.searchParams.set("redirect_uri", redirectUri);
          authUrl.searchParams.set("response_type", "code");
          authUrl.searchParams.set("scope", "openid email profile");
          return Response.redirect(authUrl.toString(), 302);
        }
        const tokenResponse = await fetch("https://oauth2.googleapis.com/token", {
          method: "POST",
          headers: { "Content-Type": "application/x-www-form-urlencoded" },
          body: new URLSearchParams({
            client_id: google_client_id,
            client_secret: google_client_secret,
            redirect_uri: redirectUri,
            grant_type: "authorization_code",
            code
          })
        });
        if (!tokenResponse.ok) {
          const errorText = await tokenResponse.text();
          throw new Error(`Failed to get access token: ${errorText}`);
        }
        const tokenData = await tokenResponse.json();
        const userResponse = await fetch("https://www.googleapis.com/oauth2/v2/userinfo", {
          headers: { "Authorization": `Bearer ${tokenData.access_token}` }
        });
        if (!userResponse.ok) {
          throw new Error("Failed to fetch user data from Google.");
        }
        const userData = await userResponse.json();
        if (!userData.email || !userData.verified_email) {
          return new Response("A verified email is required from Google.", { status: 400 });
        }
        let user = await env.DB.prepare("SELECT id, name, email FROM users WHERE email = ?").bind(userData.email).first();
        if (!user) {
          const now = (/* @__PURE__ */ new Date()).toISOString();
          await env.DB.prepare(
            "INSERT INTO users (email, name, provider, provider_id, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?)"
          ).bind(userData.email, userData.name, "google", userData.id, now, now).run();
          user = await env.DB.prepare("SELECT id, name, email FROM users WHERE email = ?").bind(userData.email).first();
        }
        if (!user) {
          return new Response("Could not create or find user.", { status: 500 });
        }
        const redirectURL = new URL("/dashboard", url.origin);
        redirectURL.searchParams.set("userId", user.id.toString());
        redirectURL.searchParams.set("name", user.name);
        redirectURL.searchParams.set("email", user.email);
        return Response.redirect(redirectURL.toString(), 302);
      } catch (error) {
        console.error("Google OAuth Error:", error);
        const errorUrl = new URL("/login", url.origin);
        errorUrl.searchParams.set("error", "oauth_failed");
        errorUrl.searchParams.set("provider", "google");
        return Response.redirect(errorUrl.toString(), 302);
      }
    }, "onRequestGet");
  }
});
var jsonResponse;
var onRequestPost16;
var onRequestOptions33;
var init_register = __esm({
  "api/auth/register.ts"() {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    init_user_storage();
    jsonResponse = /* @__PURE__ */ __name2((body, status) => {
      const headers = {
        "Content-Type": "application/json",
        "Access-Control-Allow-Origin": "*"
      };
      return new Response(JSON.stringify(body), { status, headers });
    }, "jsonResponse");
    onRequestPost16 = /* @__PURE__ */ __name2(async ({ request, env }) => {
      try {
        const { email, password, name } = await request.json();
        if (!email || !password || !name) {
          return jsonResponse({ success: false, message: "Missing required fields." }, 400);
        }
        const userStorage = new UserStorage(env.DB);
        await userStorage.initializeUsers();
        const existingUser = await userStorage.getUserByEmail(email);
        if (existingUser) {
          return jsonResponse({ success: false, message: "An account with this email already exists." }, 409);
        }
        const newUser = await userStorage.createUser(email, password, name);
        const { password: _3, ...userResponse } = newUser;
        return jsonResponse({ success: true, message: "Registration successful.", user: userResponse }, 201);
      } catch (error) {
        console.error("Registration Error:", error);
        const errorMessage = error instanceof Error ? error.message : "An unknown error occurred.";
        if (errorMessage.includes("UNIQUE constraint failed")) {
          return jsonResponse({ success: false, message: "An account with this email already exists." }, 409);
        }
        return jsonResponse({ success: false, message: "Registration failed.", error: errorMessage }, 500);
      }
    }, "onRequestPost");
    onRequestOptions33 = /* @__PURE__ */ __name2(async () => {
      return new Response(null, {
        headers: {
          "Access-Control-Allow-Origin": "*",
          "Access-Control-Allow-Methods": "POST, OPTIONS",
          "Access-Control-Allow-Headers": "Content-Type"
        }
      });
    }, "onRequestOptions");
  }
});
var onRequestGet38;
var onRequestOptions34;
var init_active2 = __esm({
  "api/countdown-banner/active.ts"() {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    onRequestGet38 = /* @__PURE__ */ __name2(async (context) => {
      try {
        const { env } = context;
        const banner = await env.DB.prepare(`
      SELECT * FROM countdown_banners 
      WHERE isActive = 1 
      ORDER BY priority DESC, id ASC 
      LIMIT 1
    `).first();
        try {
          const settingsStorage = new (await Promise.resolve().then(() => (init_settings_storage(), settings_storage_exports))).SettingsStorage(env.DB);
          const bannersData = await settingsStorage.getSetting("countdown_banners");
          if (bannersData) {
            const banners = JSON.parse(bannersData);
            const activeBanner = banners.find((b2) => b2.isActive);
            if (activeBanner) {
              return new Response(JSON.stringify({
                id: activeBanner.id || 1,
                isEnabled: activeBanner.isActive ? 1 : 0,
                titleEn: activeBanner.title || "Limited Time Offer!",
                subtitleEn: activeBanner.subtitle || "Get OCUS Job Hunter Extension at Special Price",
                titleTranslations: activeBanner.titleTranslations || {},
                subtitleTranslations: activeBanner.subtitleTranslations || {},
                targetPrice: String(activeBanner.targetPrice || "1.00"),
                originalPrice: String(activeBanner.originalPrice || "299.99"),
                endDateTime: activeBanner.endDate || new Date(Date.now() + 7 * 24 * 60 * 60 * 1e3).toISOString(),
                backgroundColor: activeBanner.backgroundColor || "#FF6B35",
                textColor: activeBanner.textColor || "#FFFFFF",
                priority: activeBanner.priority || 1
              }), {
                headers: {
                  "Content-Type": "application/json",
                  "Access-Control-Allow-Origin": "*"
                }
              });
            }
          }
        } catch (settingsError) {
          console.warn("Failed to check settings table for banners:", settingsError);
        }
        if (!banner) {
          return new Response(JSON.stringify({ message: "No active countdown banner found" }), {
            status: 404,
            headers: {
              "Content-Type": "application/json",
              "Access-Control-Allow-Origin": "*",
              "Access-Control-Allow-Methods": "GET, OPTIONS",
              "Access-Control-Allow-Headers": "Content-Type"
            }
          });
        }
        let titleTranslations = {};
        let subtitleTranslations = {};
        try {
          if (banner.titleTranslations && typeof banner.titleTranslations === "string") {
            titleTranslations = JSON.parse(banner.titleTranslations);
          }
        } catch (e2) {
          console.warn("Failed to parse titleTranslations:", e2);
        }
        try {
          if (banner.subtitleTranslations && typeof banner.subtitleTranslations === "string") {
            subtitleTranslations = JSON.parse(banner.subtitleTranslations);
          }
        } catch (e2) {
          console.warn("Failed to parse subtitleTranslations:", e2);
        }
        const transformedBanner = {
          id: parseInt(String(banner.id)) || 0,
          isEnabled: banner.isActive,
          titleEn: banner.title,
          subtitleEn: banner.subtitle,
          titleTranslations,
          subtitleTranslations,
          targetPrice: String(banner.targetPrice || "1.00"),
          originalPrice: banner.originalPrice ? String(banner.originalPrice) : void 0,
          endDateTime: banner.endDate,
          // Frontend expects endDateTime
          backgroundColor: banner.backgroundColor,
          textColor: banner.textColor,
          priority: banner.priority
        };
        return new Response(JSON.stringify(transformedBanner), {
          status: 200,
          headers: {
            "Content-Type": "application/json",
            "Access-Control-Allow-Origin": "*",
            "Access-Control-Allow-Methods": "GET, OPTIONS",
            "Access-Control-Allow-Headers": "Content-Type"
          }
        });
      } catch (error) {
        console.error("Error fetching active countdown banner:", error);
        return new Response(JSON.stringify({
          error: "Failed to fetch active countdown banner",
          details: error instanceof Error ? error.message : "Unknown error"
        }), {
          status: 500,
          headers: {
            "Content-Type": "application/json",
            "Access-Control-Allow-Origin": "*",
            "Access-Control-Allow-Methods": "GET, OPTIONS",
            "Access-Control-Allow-Headers": "Content-Type"
          }
        });
      }
    }, "onRequestGet");
    onRequestOptions34 = /* @__PURE__ */ __name2(async () => {
      return new Response(null, {
        status: 200,
        headers: {
          "Access-Control-Allow-Origin": "*",
          "Access-Control-Allow-Methods": "GET, OPTIONS",
          "Access-Control-Allow-Headers": "Content-Type"
        }
      });
    }, "onRequestOptions");
  }
});
var onRequestPost17;
var onRequestOptions35;
var init_login2 = __esm({
  "api/customer/login.ts"() {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    onRequestPost17 = /* @__PURE__ */ __name2(async ({ request, env }) => {
      try {
        const { email, password, recaptchaToken } = await request.json();
        console.log("Login attempt for email:", email);
        if (email === "demo@example.com" && password === "demo123") {
          return new Response(JSON.stringify({
            success: true,
            user: {
              id: 1,
              email: "demo@example.com",
              name: "Demo User",
              role: "customer"
            },
            token: "demo-jwt-token"
          }), {
            headers: {
              "Content-Type": "application/json",
              "Access-Control-Allow-Origin": "*"
            }
          });
        }
        if (!env.DB) {
          console.error("Database not available");
          return new Response(JSON.stringify({
            success: false,
            message: "Database not available"
          }), {
            status: 500,
            headers: {
              "Content-Type": "application/json",
              "Access-Control-Allow-Origin": "*"
            }
          });
        }
        let user = null;
        try {
          console.log("Querying users table for email:", email);
          const emailOnlyResult = await env.DB.prepare(`
        SELECT id, email, name, role, created_at, password
        FROM users WHERE email = ?
      `).bind(email).first();
          if (emailOnlyResult) {
            console.log("User found with email:", email);
            console.log("Stored password starts with:", emailOnlyResult.password?.substring(0, 10));
            console.log("Input password:", password);
            if (emailOnlyResult.password?.startsWith("$2b$")) {
              console.log("Password is hashed, implementing bcrypt comparison");
              try {
                const bcrypt = await Promise.resolve().then(() => (init_bcryptjs(), bcryptjs_exports));
                const isMatch = await bcrypt.compare(password, emailOnlyResult.password);
                if (isMatch) {
                  user = emailOnlyResult;
                  console.log("Bcrypt password match for user:", user.email);
                } else {
                  console.log("Bcrypt password mismatch");
                }
              } catch (bcryptError) {
                console.log("Bcrypt comparison failed:", bcryptError);
              }
            } else {
              if (emailOnlyResult.password === password) {
                user = emailOnlyResult;
                console.log("Plain text password match for user:", user.email);
              } else {
                console.log("Plain text password mismatch");
              }
            }
          } else {
            console.log("No user found with this email in users table");
          }
        } catch (e2) {
          console.log("Users table query failed:", e2);
        }
        if (user) {
          return new Response(JSON.stringify({
            success: true,
            user,
            token: `jwt-token-${user.email}-${Date.now()}`
          }), {
            headers: {
              "Content-Type": "application/json",
              "Access-Control-Allow-Origin": "*"
            }
          });
        }
        console.log("User found:", user ? "Yes" : "No");
        console.log("Email check:", email);
        console.log("Password length:", password ? password.length : 0);
        return new Response(JSON.stringify({
          success: false,
          message: "Invalid credentials"
        }), {
          status: 401,
          headers: {
            "Content-Type": "application/json",
            "Access-Control-Allow-Origin": "*"
          }
        });
      } catch (error) {
        return new Response(JSON.stringify({
          success: false,
          message: "Login failed"
        }), {
          status: 500,
          headers: {
            "Content-Type": "application/json",
            "Access-Control-Allow-Origin": "*"
          }
        });
      }
    }, "onRequestPost");
    onRequestOptions35 = /* @__PURE__ */ __name2(async () => {
      return new Response(null, {
        headers: {
          "Access-Control-Allow-Origin": "*",
          "Access-Control-Allow-Methods": "POST, OPTIONS",
          "Access-Control-Allow-Headers": "Content-Type"
        }
      });
    }, "onRequestOptions");
  }
});
var onRequestGet39;
var onRequestPut14;
var onRequestOptions36;
var init_profile = __esm({
  "api/customer/profile.ts"() {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    init_user_storage();
    onRequestGet39 = /* @__PURE__ */ __name2(async ({ request, env }) => {
      try {
        const url = new URL(request.url);
        const userId = url.searchParams.get("userId");
        if (!userId) {
          return new Response(JSON.stringify({
            success: false,
            message: "User ID is required"
          }), {
            status: 400,
            headers: {
              "Content-Type": "application/json",
              "Access-Control-Allow-Origin": "*"
            }
          });
        }
        const userStorage = new UserStorage(env.DB);
        await userStorage.initializeUsers();
        const user = await userStorage.getUserById(parseInt(userId));
        if (!user) {
          return new Response(JSON.stringify({
            success: false,
            message: "User not found"
          }), {
            status: 404,
            headers: {
              "Content-Type": "application/json",
              "Access-Control-Allow-Origin": "*"
            }
          });
        }
        const userQuery = `
      SELECT 
        id, email, name, role, created_at,
        is_premium, premium_activated_at, total_spent, 
        total_orders, extension_activated
      FROM users 
      WHERE id = ?
    `;
        const userResult = await env.DB.prepare(userQuery).bind(user.id).first();
        const profile = {
          id: user.id,
          email: user.email,
          name: user.name,
          role: user.role,
          isPremium: Boolean(userResult?.is_premium),
          premiumActivatedAt: userResult?.premium_activated_at,
          totalSpent: parseFloat(userResult?.total_spent || "0"),
          totalOrders: parseInt(userResult?.total_orders || "0"),
          extensionActivated: Boolean(userResult?.extension_activated),
          subscriptionStatus: userResult?.is_premium ? "premium" : "free",
          plan: userResult?.is_premium ? "premium" : "free",
          joinedDate: user.created_at?.split("T")[0] || "2024-01-15",
          lastLogin: (/* @__PURE__ */ new Date()).toISOString(),
          createdAt: user.created_at,
          settings: {
            notifications: true,
            emailUpdates: true,
            theme: "light"
          }
        };
        return new Response(JSON.stringify(profile), {
          headers: {
            "Content-Type": "application/json",
            "Access-Control-Allow-Origin": "*"
          }
        });
      } catch (error) {
        console.error("Failed to get user profile:", error);
        return new Response(JSON.stringify({
          success: false,
          message: "Failed to load profile"
        }), {
          status: 500,
          headers: {
            "Content-Type": "application/json",
            "Access-Control-Allow-Origin": "*"
          }
        });
      }
    }, "onRequestGet");
    onRequestPut14 = /* @__PURE__ */ __name2(async ({ request }) => {
      try {
        const updates = await request.json();
        return new Response(JSON.stringify({
          success: true,
          message: "Profile updated successfully",
          profile: {
            ...updates,
            updatedAt: (/* @__PURE__ */ new Date()).toISOString()
          }
        }), {
          headers: {
            "Content-Type": "application/json",
            "Access-Control-Allow-Origin": "*"
          }
        });
      } catch (error) {
        return new Response(JSON.stringify({
          success: false,
          message: "Failed to update profile"
        }), {
          status: 500,
          headers: {
            "Content-Type": "application/json",
            "Access-Control-Allow-Origin": "*"
          }
        });
      }
    }, "onRequestPut");
    onRequestOptions36 = /* @__PURE__ */ __name2(async () => {
      return new Response(null, {
        headers: {
          "Access-Control-Allow-Origin": "*",
          "Access-Control-Allow-Methods": "GET, PUT, OPTIONS",
          "Access-Control-Allow-Headers": "Content-Type"
        }
      });
    }, "onRequestOptions");
  }
});
var onRequestPost18;
var onRequestOptions37;
var init_register2 = __esm({
  "api/customer/register.ts"() {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    onRequestPost18 = /* @__PURE__ */ __name2(async ({ request, env }) => {
      try {
        const { email, password, name, recaptchaToken } = await request.json();
        if (!email || !password || !name) {
          return new Response(JSON.stringify({
            success: false,
            message: "Missing required fields"
          }), {
            status: 400,
            headers: {
              "Content-Type": "application/json",
              "Access-Control-Allow-Origin": "*"
            }
          });
        }
        if (!env.DB) {
          console.error("D1 database not available");
          return new Response(JSON.stringify({
            success: false,
            message: "Database not available"
          }), {
            status: 500,
            headers: {
              "Content-Type": "application/json",
              "Access-Control-Allow-Origin": "*"
            }
          });
        }
        await env.DB.prepare(`
      CREATE TABLE IF NOT EXISTS users (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        email TEXT UNIQUE NOT NULL,
        password TEXT NOT NULL,
        name TEXT NOT NULL,
        role TEXT DEFAULT 'customer',
        created_at DATETIME DEFAULT CURRENT_TIMESTAMP
      )
    `).run();
        await env.DB.prepare(`
      CREATE TABLE IF NOT EXISTS customers (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        email TEXT UNIQUE NOT NULL,
        name TEXT NOT NULL,
        created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
        is_premium BOOLEAN DEFAULT 0,
        extension_activated BOOLEAN DEFAULT 0,
        total_spent DECIMAL(10,2) DEFAULT 0,
        total_orders INTEGER DEFAULT 0
      )
    `).run();
        const now = (/* @__PURE__ */ new Date()).toISOString();
        console.log("Registering user:", email, "with password length:", password.length);
        const existingUser = await env.DB.prepare(`
      SELECT id FROM users WHERE email = ?
    `).bind(email).first();
        if (existingUser) {
          return new Response(JSON.stringify({
            success: false,
            message: "User already exists"
          }), {
            status: 400,
            headers: {
              "Content-Type": "application/json",
              "Access-Control-Allow-Origin": "*"
            }
          });
        }
        const userResult = await env.DB.prepare(`
      INSERT INTO users (email, password, name, role, created_at)
      VALUES (?, ?, ?, 'customer', ?)
    `).bind(email, password, name, now).run();
        console.log("User inserted with ID:", userResult.meta.last_row_id);
        const customerResult = await env.DB.prepare(`
      INSERT INTO customers (email, name, created_at)
      VALUES (?, ?, ?)
    `).bind(email, name, now).run();
        console.log("Customer inserted with ID:", customerResult.meta.last_row_id);
        return new Response(JSON.stringify({
          success: true,
          message: "Registration successful",
          user: {
            id: userResult.meta.last_row_id,
            email,
            name,
            role: "customer"
          }
        }), {
          headers: {
            "Content-Type": "application/json",
            "Access-Control-Allow-Origin": "*"
          }
        });
      } catch (error) {
        console.error("Registration error:", error);
        return new Response(JSON.stringify({
          success: false,
          message: "Registration failed: " + error.message
        }), {
          status: 500,
          headers: {
            "Content-Type": "application/json",
            "Access-Control-Allow-Origin": "*"
          }
        });
      }
    }, "onRequestPost");
    onRequestOptions37 = /* @__PURE__ */ __name2(async () => {
      return new Response(null, {
        headers: {
          "Access-Control-Allow-Origin": "*",
          "Access-Control-Allow-Methods": "POST, OPTIONS",
          "Access-Control-Allow-Headers": "Content-Type"
        }
      });
    }, "onRequestOptions");
  }
});
var onRequestGet40;
var onRequestOptions38;
var init_stats2 = __esm({
  "api/customer/stats.ts"() {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    onRequestGet40 = /* @__PURE__ */ __name2(async () => {
      const stats = {
        totalApplications: 47,
        successfulApplications: 12,
        pendingApplications: 8,
        rejectedApplications: 27,
        successRate: 25.5,
        averageResponseTime: "3.2 days",
        monthlyApplications: [
          { month: "Jan", applications: 15, success: 4 },
          { month: "Feb", applications: 12, success: 3 },
          { month: "Mar", applications: 20, success: 5 }
        ],
        recentActivity: [
          { date: "2024-03-15", action: "Applied to Software Engineer at TechCorp", status: "pending" },
          { date: "2024-03-14", action: "Interview scheduled with StartupXYZ", status: "success" },
          { date: "2024-03-13", action: "Application rejected by BigTech Inc", status: "rejected" }
        ]
      };
      return new Response(JSON.stringify(stats), {
        headers: {
          "Content-Type": "application/json",
          "Access-Control-Allow-Origin": "*"
        }
      });
    }, "onRequestGet");
    onRequestOptions38 = /* @__PURE__ */ __name2(async () => {
      return new Response(null, {
        headers: {
          "Access-Control-Allow-Origin": "*",
          "Access-Control-Allow-Methods": "GET, OPTIONS",
          "Access-Control-Allow-Headers": "Content-Type"
        }
      });
    }, "onRequestOptions");
  }
});
var onRequestGet41;
var init_premium = __esm({
  "api/download-extension/premium.ts"() {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    onRequestGet41 = /* @__PURE__ */ __name2(async ({ request, env }) => {
      try {
        const authHeader = request.headers.get("Authorization");
        if (!authHeader || !authHeader.startsWith("Bearer ")) {
          return new Response("Unauthorized", { status: 401 });
        }
        const token = authHeader.substring(7);
        if (token === "demo-jwt-token") {
          const mockZipContent = new Uint8Array([
            80,
            75,
            3,
            4,
            20,
            0,
            0,
            0,
            8,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            80,
            75,
            5,
            6,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0
          ]);
          return new Response(mockZipContent, {
            headers: {
              "Content-Type": "application/zip",
              "Content-Disposition": 'attachment; filename="ocus-job-hunter-premium-v2.1.8-STABLE.zip"',
              "Access-Control-Allow-Origin": "*"
            }
          });
        }
        if (token.startsWith("jwt-token-")) {
          const parts = token.split("-");
          if (parts.length < 3) {
            return new Response("Invalid token format", { status: 401 });
          }
          const userEmail = parts[2];
          if (!env.DB) {
            return new Response("Database not available", { status: 500 });
          }
          const customer = await env.DB.prepare(
            "SELECT id, extension_activated, total_spent FROM customers WHERE email = ?"
          ).bind(userEmail).first();
          if (!customer) {
            return new Response("Customer not found", { status: 404 });
          }
          const orderCheck = await env.DB.prepare(`
        SELECT COUNT(*) as orderCount, SUM(final_amount) as totalPaid
        FROM orders 
        WHERE customer_email = ? AND status = 'completed' AND final_amount > 0
      `).bind(userEmail).first();
          const hasValidPurchase = Boolean(customer.extension_activated) && orderCheck !== null && Number(orderCheck.orderCount || 0) > 0 && parseFloat(String(orderCheck.totalPaid || "0")) > 0;
          if (hasValidPurchase) {
            try {
              const downloadToken = `download_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;
              const now = (/* @__PURE__ */ new Date()).toISOString();
              await env.DB.prepare(`
            INSERT INTO extension_downloads (
              customer_id, download_token, download_type, downloaded_at, 
              ip_address, user_agent, created_at
            ) VALUES (?, ?, 'premium', ?, ?, ?, ?)
          `).bind(
                customer.id,
                downloadToken,
                now,
                request.headers.get("CF-Connecting-IP") || "unknown",
                request.headers.get("User-Agent") || "unknown",
                now
              ).run();
            } catch (e2) {
              console.log("Failed to log download:", e2);
            }
            const mockZipContent = new Uint8Array([
              80,
              75,
              3,
              4,
              20,
              0,
              0,
              0,
              8,
              0,
              0,
              0,
              0,
              0,
              0,
              0,
              0,
              0,
              0,
              0,
              0,
              0,
              0,
              0,
              0,
              0,
              0,
              0,
              80,
              75,
              5,
              6,
              0,
              0,
              0,
              0,
              0,
              0,
              0,
              0,
              0,
              0,
              0,
              0,
              0,
              0
            ]);
            return new Response(mockZipContent, {
              headers: {
                "Content-Type": "application/zip",
                "Content-Disposition": 'attachment; filename="ocus-job-hunter-premium-v2.1.8-STABLE.zip"',
                "Access-Control-Allow-Origin": "*"
              }
            });
          }
        }
        return new Response("Premium access required", { status: 403 });
      } catch (error) {
        return new Response("Download failed", { status: 500 });
      }
    }, "onRequestGet");
  }
});
var onRequestGet42;
var init_trial = __esm({
  "api/download-extension/trial.ts"() {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    onRequestGet42 = /* @__PURE__ */ __name2(async ({ request, env }) => {
      try {
        const mockZipContent = new Uint8Array([
          80,
          75,
          3,
          4,
          // ZIP file signature
          20,
          0,
          0,
          0,
          8,
          0,
          // Version, flags, compression
          0,
          0,
          0,
          0,
          // Date/time
          0,
          0,
          0,
          0,
          // CRC-32
          0,
          0,
          0,
          0,
          // Compressed size
          0,
          0,
          0,
          0,
          // Uncompressed size
          0,
          0,
          // Filename length
          0,
          0,
          // Extra field length
          80,
          75,
          5,
          6,
          // End of central directory signature
          0,
          0,
          0,
          0,
          // Number of entries
          0,
          0,
          0,
          0,
          // Size of central directory
          0,
          0,
          0,
          0,
          // Offset of central directory
          0,
          0
          // Comment length
        ]);
        return new Response(mockZipContent, {
          headers: {
            "Content-Type": "application/zip",
            "Content-Disposition": 'attachment; filename="ocus-job-hunter-trial-v2.1.8-STABLE.zip"',
            "Access-Control-Allow-Origin": "*"
          }
        });
      } catch (error) {
        return new Response("Download failed", { status: 500 });
      }
    }, "onRequestGet");
  }
});
var onRequestGet43;
var onRequestOptions39;
var init_premium_extension = __esm({
  "api/downloads/premium-extension.ts"() {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    onRequestGet43 = /* @__PURE__ */ __name2(async ({ request, env }) => {
      try {
        const url = new URL(request.url);
        const downloadToken = url.searchParams.get("token");
        if (!downloadToken) {
          return new Response(JSON.stringify({ error: "Download token is required" }), {
            status: 400,
            headers: {
              "Content-Type": "application/json",
              "Access-Control-Allow-Origin": "*"
            }
          });
        }
        const order = await env.DB.prepare(`
      SELECT * FROM orders 
      WHERE downloadToken = ? AND status = 'completed'
    `).bind(downloadToken).first();
        if (!order) {
          return new Response(JSON.stringify({ error: "Invalid or expired download token" }), {
            status: 404,
            headers: {
              "Content-Type": "application/json",
              "Access-Control-Allow-Origin": "*"
            }
          });
        }
        if (Number(order.downloadCount) >= Number(order.maxDownloads)) {
          return new Response(JSON.stringify({
            error: "Download limit exceeded",
            maxDownloads: order.maxDownloads,
            currentDownloads: order.downloadCount
          }), {
            status: 403,
            headers: {
              "Content-Type": "application/json",
              "Access-Control-Allow-Origin": "*"
            }
          });
        }
        await env.DB.prepare(`
      UPDATE orders 
      SET downloadCount = downloadCount + 1 
      WHERE downloadToken = ?
    `).bind(downloadToken).run();
        console.log(`Premium extension downloaded for order ${order.id}, download count: ${Number(order.downloadCount) + 1}`);
        return new Response(JSON.stringify({
          success: true,
          message: "Premium extension download authorized",
          orderId: order.id,
          downloadCount: Number(order.downloadCount) + 1,
          maxDownloads: Number(order.maxDownloads),
          activationCode: order.activationCode
        }), {
          status: 200,
          headers: {
            "Content-Type": "application/json",
            "Access-Control-Allow-Origin": "*"
          }
        });
      } catch (error) {
        console.error("Error processing download:", error);
        return new Response(JSON.stringify({
          success: false,
          error: "Failed to process download",
          details: String(error)
        }), {
          status: 500,
          headers: {
            "Content-Type": "application/json",
            "Access-Control-Allow-Origin": "*"
          }
        });
      }
    }, "onRequestGet");
    onRequestOptions39 = /* @__PURE__ */ __name2(async () => {
      return new Response(null, {
        status: 200,
        headers: {
          "Access-Control-Allow-Origin": "*",
          "Access-Control-Allow-Methods": "GET, OPTIONS",
          "Access-Control-Allow-Headers": "Content-Type"
        }
      });
    }, "onRequestOptions");
  }
});
function json11(data, status = 200) {
  return new Response(JSON.stringify(data), {
    status,
    headers: {
      "Content-Type": "application/json",
      "Access-Control-Allow-Origin": "*",
      "Access-Control-Allow-Methods": "GET, OPTIONS",
      "Access-Control-Allow-Headers": "Content-Type, Authorization"
    }
  });
}
__name(json11, "json11");
var onRequestGet44;
var init_customer = __esm({
  "api/invoices/customer.ts"() {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    __name2(json11, "json");
    onRequestGet44 = /* @__PURE__ */ __name2(async ({ request, env }) => {
      try {
        const { searchParams } = new URL(request.url);
        const customerId = searchParams.get("customerId");
        if (!customerId) {
          return json11({ error: "Customer ID is required" }, 400);
        }
        const { results } = await env.DB.prepare(
          "SELECT * FROM invoices WHERE customerId = ? ORDER BY invoiceDate DESC"
        ).bind(customerId).all();
        if (!results) {
          return json11([]);
        }
        return json11(results);
      } catch (error) {
        return json11({
          error: error.message
        }, 500);
      }
    }, "onRequestGet");
  }
});
var onRequestGet45;
var onRequestOptions40;
var init_generate = __esm({
  "api/invoices/generate.ts"() {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    onRequestGet45 = /* @__PURE__ */ __name2(async ({ request, env }) => {
      try {
        const url = new URL(request.url);
        const orderId = url.searchParams.get("orderId");
        const invoiceNumber = url.searchParams.get("invoiceNumber");
        if (!orderId && !invoiceNumber) {
          return new Response(JSON.stringify({ error: "Order ID or Invoice Number is required" }), {
            status: 400,
            headers: {
              "Content-Type": "application/json",
              "Access-Control-Allow-Origin": "*"
            }
          });
        }
        let order = null;
        try {
          const orderQuery = orderId ? `SELECT * FROM orders WHERE id = ?` : `SELECT * FROM orders WHERE invoiceNumber = ?`;
          order = await env.DB.prepare(orderQuery).bind(orderId || invoiceNumber).first();
        } catch (dbError) {
          console.log("Orders table not found, checking fallback storage:", dbError);
          const settingsResults = await env.DB.prepare(`
        SELECT key, value FROM settings 
        WHERE key LIKE 'order_%'
      `).all();
          for (const setting of settingsResults.results || []) {
            try {
              const orderData = JSON.parse(setting.value);
              if (orderId && orderData.id == orderId || invoiceNumber && orderData.invoiceNumber === invoiceNumber) {
                order = orderData;
                break;
              }
            } catch (parseError) {
              console.log("Error parsing order data:", parseError);
            }
          }
        }
        if (!order) {
          return new Response(JSON.stringify({ error: "Order not found" }), {
            status: 404,
            headers: {
              "Content-Type": "application/json",
              "Access-Control-Allow-Origin": "*"
            }
          });
        }
        const invoiceData = {
          invoiceNumber: order.invoiceNumber || "",
          orderId: order.id,
          customerEmail: order.customerEmail,
          customerName: order.customerName,
          issueDate: order.completedAt || order.createdAt,
          dueDate: order.completedAt || order.createdAt,
          // Company details
          company: {
            name: "OCUS Job Hunter",
            address: "Digital Services Company",
            email: "support@jobhunter.one",
            website: "https://jobhunter.one"
          },
          // Customer details
          customer: {
            name: order.customerName,
            email: order.customerEmail
          },
          // Items
          items: [{
            description: order.productName,
            quantity: 1,
            unitPrice: order.finalAmount,
            total: order.finalAmount
          }],
          // Totals
          subtotal: order.finalAmount,
          tax: 0,
          total: order.finalAmount,
          currency: order.currency,
          // Payment details
          paymentMethod: order.paymentMethod,
          paymentStatus: order.status,
          activationCode: order.activationCode,
          downloadToken: order.downloadToken
        };
        return new Response(JSON.stringify({
          success: true,
          invoice: invoiceData
        }), {
          headers: {
            "Content-Type": "application/json",
            "Access-Control-Allow-Origin": "*"
          }
        });
      } catch (error) {
        console.error("Error generating invoice:", error);
        return new Response(JSON.stringify({
          success: false,
          error: "Failed to generate invoice",
          details: String(error)
        }), {
          status: 500,
          headers: {
            "Content-Type": "application/json",
            "Access-Control-Allow-Origin": "*"
          }
        });
      }
    }, "onRequestGet");
    onRequestOptions40 = /* @__PURE__ */ __name2(async () => {
      return new Response(null, {
        status: 200,
        headers: {
          "Access-Control-Allow-Origin": "*",
          "Access-Control-Allow-Methods": "GET, OPTIONS",
          "Access-Control-Allow-Headers": "Content-Type"
        }
      });
    }, "onRequestOptions");
  }
});
function json12(data, status = 200) {
  return new Response(JSON.stringify(data), {
    status,
    headers: {
      "Content-Type": "application/json",
      "Access-Control-Allow-Origin": "*",
      "Access-Control-Allow-Methods": "GET, OPTIONS",
      "Access-Control-Allow-Headers": "Content-Type, Authorization"
    }
  });
}
__name(json12, "json12");
var onRequestGet46;
var onRequestOptions41;
var init_invoices3 = __esm({
  "api/me/invoices.ts"() {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    __name2(json12, "json");
    onRequestGet46 = /* @__PURE__ */ __name2(async ({ request, env }) => {
      try {
        const authHeader = request.headers.get("Authorization");
        if (!authHeader || !authHeader.startsWith("Bearer ")) {
          return json12({ error: "Unauthorized" }, 401);
        }
        const token = authHeader.substring(7);
        if (token === "demo-jwt-token") {
          return json12([
            {
              id: 1,
              invoice_number: "INV-2025-000001",
              order_id: 1,
              customer_name: "Demo User",
              customer_email: "demo@example.com",
              invoice_date: (/* @__PURE__ */ new Date()).toISOString(),
              due_date: (/* @__PURE__ */ new Date()).toISOString(),
              subtotal: "29.99",
              tax_amount: "0.00",
              discount_amount: "0.00",
              total_amount: "29.99",
              currency: "USD",
              status: "paid",
              paid_at: (/* @__PURE__ */ new Date()).toISOString(),
              notes: "Premium extension purchase",
              created_at: (/* @__PURE__ */ new Date()).toISOString(),
              updated_at: (/* @__PURE__ */ new Date()).toISOString(),
              payment_method: "stripe"
            }
          ]);
        }
        if (token.startsWith("jwt-token-")) {
          const parts = token.split("-");
          if (parts.length < 3) {
            return json12({ error: "Invalid token" }, 401);
          }
          const userEmail = parts[2];
          if (!env.DB) {
            return json12({ error: "Database not available" }, 500);
          }
          try {
            const query = `
          SELECT 
            i.id AS id,
            i.invoice_number AS invoice_number,
            i.order_id AS order_id,
            i.customer_name AS customer_name,
            i.customer_email AS customer_email,
            i.invoice_date AS invoice_date,
            i.due_date AS due_date,
            i.subtotal AS subtotal,
            i.tax_amount AS tax_amount,
            i.discount_amount AS discount_amount,
            i.total_amount AS total_amount,
            i.currency AS currency,
            i.status AS status,
            i.paid_at AS paid_at,
            i.notes AS notes,
            i.created_at AS created_at,
            i.updated_at AS updated_at,
            o.payment_method AS payment_method
          FROM invoices i
          LEFT JOIN orders o ON i.order_id = o.id
          WHERE i.customer_email = ?
          ORDER BY i.created_at DESC
        `;
            const invoices2 = await env.DB.prepare(query).bind(userEmail).all();
            return json12(invoices2.results || []);
          } catch (dbError) {
            console.error("Database error in /api/me/invoices:", dbError);
            return json12({ error: "Database error" }, 500);
          }
        }
        return json12({ error: "Invalid token" }, 401);
      } catch (error) {
        return json12({
          error: error.message
        }, 500);
      }
    }, "onRequestGet");
    onRequestOptions41 = /* @__PURE__ */ __name2(async () => {
      return new Response(null, {
        status: 200,
        headers: {
          "Access-Control-Allow-Origin": "*",
          "Access-Control-Allow-Methods": "GET, OPTIONS",
          "Access-Control-Allow-Headers": "Content-Type, Authorization"
        }
      });
    }, "onRequestOptions");
  }
});
function json13(data, status = 200) {
  return new Response(JSON.stringify(data), {
    status,
    headers: {
      "Content-Type": "application/json",
      "Access-Control-Allow-Origin": "*",
      "Access-Control-Allow-Methods": "GET, OPTIONS",
      "Access-Control-Allow-Headers": "Content-Type, Authorization"
    }
  });
}
__name(json13, "json13");
var onRequestGet47;
var onRequestOptions42;
var init_orders3 = __esm({
  "api/me/orders.ts"() {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    __name2(json13, "json");
    onRequestGet47 = /* @__PURE__ */ __name2(async ({ request, env }) => {
      try {
        const authHeader = request.headers.get("Authorization");
        if (!authHeader || !authHeader.startsWith("Bearer ")) {
          return json13({ error: "Unauthorized" }, 401);
        }
        const token = authHeader.substring(7);
        if (token === "demo-jwt-token") {
          return json13([
            {
              id: 1,
              customerEmail: "demo@example.com",
              customerName: "Demo User",
              originalAmount: "29.99",
              finalAmount: "29.99",
              currency: "eur",
              status: "completed",
              paymentMethod: "stripe",
              downloadToken: "demo-download-token",
              downloadCount: 1,
              maxDownloads: 5,
              activationCode: "DEMO-ACTIVATION-CODE",
              createdAt: (/* @__PURE__ */ new Date()).toISOString(),
              completedAt: (/* @__PURE__ */ new Date()).toISOString()
            }
          ]);
        }
        if (token.startsWith("jwt-token-")) {
          const parts = token.split("-");
          if (parts.length >= 3) {
            const userId = parts[2];
            if (!env.DB) {
              return json13({ error: "Database not available" }, 500);
            }
            try {
              const session = env.DB.withSession("first-primary");
              const customer = await session.prepare(`
            SELECT id FROM customers WHERE email = ?
          `).bind(userId).first();
              if (!customer) {
                return json13([]);
              }
              const orders2 = await session.prepare(`
            SELECT 
              id,
              customer_email AS customerEmail,
              customer_name AS customerName,
              original_amount AS originalAmount,
              final_amount AS finalAmount,
              currency,
              status,
              payment_method AS paymentMethod,
              payment_intent_id AS paymentIntentId,
              download_token AS downloadToken,
              download_count AS downloadCount,
              max_downloads AS maxDownloads,
              activation_code AS activationCode,
              invoice_url AS invoiceUrl,
              created_at AS createdAt,
              completed_at AS completedAt
            FROM orders 
            WHERE customer_email = ?
            ORDER BY created_at DESC
          `).bind(userId).all();
              return json13(orders2.results || []);
            } catch (dbError) {
              console.error("Database error in /api/me/orders:", dbError);
              return json13({ error: "Database error" }, 500);
            }
          }
        }
        return json13({ error: "Invalid token" }, 401);
      } catch (error) {
        return json13({
          error: error.message
        }, 500);
      }
    }, "onRequestGet");
    onRequestOptions42 = /* @__PURE__ */ __name2(async () => {
      return new Response(null, {
        status: 200,
        headers: {
          "Access-Control-Allow-Origin": "*",
          "Access-Control-Allow-Methods": "GET, OPTIONS",
          "Access-Control-Allow-Headers": "Content-Type, Authorization"
        }
      });
    }, "onRequestOptions");
  }
});
var onRequestPost19;
var onRequestOptions43;
var init_complete_purchase = __esm({
  "api/orders/complete-purchase.ts"() {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    onRequestPost19 = /* @__PURE__ */ __name2(async ({ request, env }) => {
      try {
        const body = await request.json();
        const { paymentIntentId, customerEmail, customerName, amount, currency } = body;
        if (!paymentIntentId || !customerEmail || !customerName || !amount) {
          return new Response(JSON.stringify({ error: "Missing required fields" }), {
            status: 400,
            headers: {
              "Content-Type": "application/json",
              "Access-Control-Allow-Origin": "*"
            }
          });
        }
        const downloadToken = crypto.randomUUID();
        const activationCode = Math.random().toString(36).substring(2, 15).toUpperCase();
        const invoiceNumber = `INV-${Date.now()}-${Math.random().toString(36).substring(2, 8).toUpperCase()}`;
        let orderId = null;
        try {
          const orderResult = await env.DB.prepare(`
        INSERT INTO orders (
          customerEmail, customerName, productId, productName,
          originalAmount, finalAmount, currency, status, paymentMethod,
          paymentIntentId, downloadToken, activationCode, invoiceNumber,
          completedAt
        ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, datetime('now'))
      `).bind(
            customerEmail,
            customerName,
            1,
            // Product ID for OCUS Extension
            "OCUS Job Hunter Extension",
            amount,
            amount,
            currency.toUpperCase(),
            "completed",
            "stripe",
            paymentIntentId,
            downloadToken,
            activationCode,
            invoiceNumber
          ).run();
          orderId = orderResult.meta?.last_row_id;
        } catch (dbError) {
          console.log("Orders table not found, using fallback storage:", dbError);
          const orderData = {
            id: Date.now(),
            customerEmail,
            customerName,
            productId: 1,
            productName: "OCUS Job Hunter Extension",
            originalAmount: amount,
            finalAmount: amount,
            currency: currency.toUpperCase(),
            status: "completed",
            paymentMethod: "stripe",
            paymentIntentId,
            downloadToken,
            activationCode,
            invoiceNumber,
            completedAt: (/* @__PURE__ */ new Date()).toISOString()
          };
          const settingsKey = `order_${paymentIntentId}`;
          await env.DB.prepare(`
        INSERT OR REPLACE INTO settings (key, value, updated_at)
        VALUES (?, ?, datetime('now'))
      `).bind(settingsKey, JSON.stringify(orderData)).run();
          orderId = orderData.id;
        }
        try {
          await env.DB.prepare(`
        INSERT OR REPLACE INTO users (
          email, name, isPremium, lastLoginAt, updatedAt
        ) VALUES (?, ?, 1, datetime('now'), datetime('now'))
      `).bind(customerEmail, customerName).run();
        } catch (userDbError) {
          console.log("Users table not found, using fallback storage:", userDbError);
          const userData = {
            email: customerEmail,
            name: customerName,
            isPremium: true,
            lastLoginAt: (/* @__PURE__ */ new Date()).toISOString(),
            updatedAt: (/* @__PURE__ */ new Date()).toISOString()
          };
          const userSettingsKey = `user_${customerEmail.replace("@", "_at_").replace(".", "_dot_")}`;
          await env.DB.prepare(`
        INSERT OR REPLACE INTO settings (key, value, updated_at)
        VALUES (?, ?, datetime('now'))
      `).bind(userSettingsKey, JSON.stringify(userData)).run();
        }
        return new Response(JSON.stringify({
          success: true,
          orderId,
          downloadToken,
          activationCode,
          invoiceNumber,
          message: "Purchase completed successfully"
        }), {
          headers: {
            "Content-Type": "application/json",
            "Access-Control-Allow-Origin": "*"
          }
        });
      } catch (error) {
        console.error("Error completing purchase:", error);
        return new Response(JSON.stringify({
          success: false,
          error: "Failed to complete purchase",
          details: String(error)
        }), {
          status: 500,
          headers: {
            "Content-Type": "application/json",
            "Access-Control-Allow-Origin": "*"
          }
        });
      }
    }, "onRequestPost");
    onRequestOptions43 = /* @__PURE__ */ __name2(async () => {
      return new Response(null, {
        status: 200,
        headers: {
          "Access-Control-Allow-Origin": "*",
          "Access-Control-Allow-Methods": "POST, OPTIONS",
          "Access-Control-Allow-Headers": "Content-Type"
        }
      });
    }, "onRequestOptions");
  }
});
function is(value, type) {
  if (!value || typeof value !== "object") {
    return false;
  }
  if (value instanceof type) {
    return true;
  }
  if (!Object.prototype.hasOwnProperty.call(type, entityKind)) {
    throw new Error(
      `Class "${type.name ?? "<unknown>"}" doesn't look like a Drizzle entity. If this is incorrect and the class is provided by Drizzle, please report this as a bug.`
    );
  }
  let cls = Object.getPrototypeOf(value).constructor;
  if (cls) {
    while (cls) {
      if (entityKind in cls && cls[entityKind] === type[entityKind]) {
        return true;
      }
      cls = Object.getPrototypeOf(cls);
    }
  }
  return false;
}
__name(is, "is");
var entityKind;
var hasOwnEntityKind;
var init_entity = __esm({
  "../node_modules/drizzle-orm/entity.js"() {
    init_functionsRoutes_0_8044054200943971();
    entityKind = Symbol.for("drizzle:entityKind");
    hasOwnEntityKind = Symbol.for("drizzle:hasOwnEntityKind");
    __name2(is, "is");
  }
});
var Column;
var init_column = __esm({
  "../node_modules/drizzle-orm/column.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_entity();
    Column = class {
      static {
        __name(this, "Column");
      }
      static {
        __name2(this, "Column");
      }
      constructor(table, config) {
        this.table = table;
        this.config = config;
        this.name = config.name;
        this.keyAsName = config.keyAsName;
        this.notNull = config.notNull;
        this.default = config.default;
        this.defaultFn = config.defaultFn;
        this.onUpdateFn = config.onUpdateFn;
        this.hasDefault = config.hasDefault;
        this.primary = config.primaryKey;
        this.isUnique = config.isUnique;
        this.uniqueName = config.uniqueName;
        this.uniqueType = config.uniqueType;
        this.dataType = config.dataType;
        this.columnType = config.columnType;
        this.generated = config.generated;
        this.generatedIdentity = config.generatedIdentity;
      }
      static [entityKind] = "Column";
      name;
      keyAsName;
      primary;
      notNull;
      default;
      defaultFn;
      onUpdateFn;
      hasDefault;
      isUnique;
      uniqueName;
      uniqueType;
      dataType;
      columnType;
      enumValues = void 0;
      generated = void 0;
      generatedIdentity = void 0;
      config;
      mapFromDriverValue(value) {
        return value;
      }
      mapToDriverValue(value) {
        return value;
      }
      // ** @internal */
      shouldDisableInsert() {
        return this.config.generated !== void 0 && this.config.generated.type !== "byDefault";
      }
    };
  }
});
var ColumnBuilder;
var init_column_builder = __esm({
  "../node_modules/drizzle-orm/column-builder.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_entity();
    ColumnBuilder = class {
      static {
        __name(this, "ColumnBuilder");
      }
      static {
        __name2(this, "ColumnBuilder");
      }
      static [entityKind] = "ColumnBuilder";
      config;
      constructor(name, dataType, columnType) {
        this.config = {
          name,
          keyAsName: name === "",
          notNull: false,
          default: void 0,
          hasDefault: false,
          primaryKey: false,
          isUnique: false,
          uniqueName: void 0,
          uniqueType: void 0,
          dataType,
          columnType,
          generated: void 0
        };
      }
      /**
       * Changes the data type of the column. Commonly used with `json` columns. Also, useful for branded types.
       *
       * @example
       * ```ts
       * const users = pgTable('users', {
       * 	id: integer('id').$type<UserId>().primaryKey(),
       * 	details: json('details').$type<UserDetails>().notNull(),
       * });
       * ```
       */
      $type() {
        return this;
      }
      /**
       * Adds a `not null` clause to the column definition.
       *
       * Affects the `select` model of the table - columns *without* `not null` will be nullable on select.
       */
      notNull() {
        this.config.notNull = true;
        return this;
      }
      /**
       * Adds a `default <value>` clause to the column definition.
       *
       * Affects the `insert` model of the table - columns *with* `default` are optional on insert.
       *
       * If you need to set a dynamic default value, use {@link $defaultFn} instead.
       */
      default(value) {
        this.config.default = value;
        this.config.hasDefault = true;
        return this;
      }
      /**
       * Adds a dynamic default value to the column.
       * The function will be called when the row is inserted, and the returned value will be used as the column value.
       *
       * **Note:** This value does not affect the `drizzle-kit` behavior, it is only used at runtime in `drizzle-orm`.
       */
      $defaultFn(fn) {
        this.config.defaultFn = fn;
        this.config.hasDefault = true;
        return this;
      }
      /**
       * Alias for {@link $defaultFn}.
       */
      $default = this.$defaultFn;
      /**
       * Adds a dynamic update value to the column.
       * The function will be called when the row is updated, and the returned value will be used as the column value if none is provided.
       * If no `default` (or `$defaultFn`) value is provided, the function will be called when the row is inserted as well, and the returned value will be used as the column value.
       *
       * **Note:** This value does not affect the `drizzle-kit` behavior, it is only used at runtime in `drizzle-orm`.
       */
      $onUpdateFn(fn) {
        this.config.onUpdateFn = fn;
        this.config.hasDefault = true;
        return this;
      }
      /**
       * Alias for {@link $onUpdateFn}.
       */
      $onUpdate = this.$onUpdateFn;
      /**
       * Adds a `primary key` clause to the column definition. This implicitly makes the column `not null`.
       *
       * In SQLite, `integer primary key` implicitly makes the column auto-incrementing.
       */
      primaryKey() {
        this.config.primaryKey = true;
        this.config.notNull = true;
        return this;
      }
      /** @internal Sets the name of the column to the key within the table definition if a name was not given. */
      setName(name) {
        if (this.config.name !== "")
          return;
        this.config.name = name;
      }
    };
  }
});
var TableName;
var init_table_utils = __esm({
  "../node_modules/drizzle-orm/table.utils.js"() {
    init_functionsRoutes_0_8044054200943971();
    TableName = Symbol.for("drizzle:Name");
  }
});
var ForeignKeyBuilder;
var ForeignKey;
var init_foreign_keys = __esm({
  "../node_modules/drizzle-orm/pg-core/foreign-keys.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_entity();
    init_table_utils();
    ForeignKeyBuilder = class {
      static {
        __name(this, "ForeignKeyBuilder");
      }
      static {
        __name2(this, "ForeignKeyBuilder");
      }
      static [entityKind] = "PgForeignKeyBuilder";
      /** @internal */
      reference;
      /** @internal */
      _onUpdate = "no action";
      /** @internal */
      _onDelete = "no action";
      constructor(config, actions) {
        this.reference = () => {
          const { name, columns, foreignColumns } = config();
          return { name, columns, foreignTable: foreignColumns[0].table, foreignColumns };
        };
        if (actions) {
          this._onUpdate = actions.onUpdate;
          this._onDelete = actions.onDelete;
        }
      }
      onUpdate(action) {
        this._onUpdate = action === void 0 ? "no action" : action;
        return this;
      }
      onDelete(action) {
        this._onDelete = action === void 0 ? "no action" : action;
        return this;
      }
      /** @internal */
      build(table) {
        return new ForeignKey(table, this);
      }
    };
    ForeignKey = class {
      static {
        __name(this, "ForeignKey");
      }
      static {
        __name2(this, "ForeignKey");
      }
      constructor(table, builder) {
        this.table = table;
        this.reference = builder.reference;
        this.onUpdate = builder._onUpdate;
        this.onDelete = builder._onDelete;
      }
      static [entityKind] = "PgForeignKey";
      reference;
      onUpdate;
      onDelete;
      getName() {
        const { name, columns, foreignColumns } = this.reference();
        const columnNames = columns.map((column) => column.name);
        const foreignColumnNames = foreignColumns.map((column) => column.name);
        const chunks = [
          this.table[TableName],
          ...columnNames,
          foreignColumns[0].table[TableName],
          ...foreignColumnNames
        ];
        return name ?? `${chunks.join("_")}_fk`;
      }
    };
  }
});
function iife(fn, ...args) {
  return fn(...args);
}
__name(iife, "iife");
var init_tracing_utils = __esm({
  "../node_modules/drizzle-orm/tracing-utils.js"() {
    init_functionsRoutes_0_8044054200943971();
    __name2(iife, "iife");
  }
});
function uniqueKeyName(table, columns) {
  return `${table[TableName]}_${columns.join("_")}_unique`;
}
__name(uniqueKeyName, "uniqueKeyName");
var UniqueConstraintBuilder;
var UniqueOnConstraintBuilder;
var UniqueConstraint;
var init_unique_constraint = __esm({
  "../node_modules/drizzle-orm/pg-core/unique-constraint.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_entity();
    init_table_utils();
    __name2(uniqueKeyName, "uniqueKeyName");
    UniqueConstraintBuilder = class {
      static {
        __name(this, "UniqueConstraintBuilder");
      }
      static {
        __name2(this, "UniqueConstraintBuilder");
      }
      constructor(columns, name) {
        this.name = name;
        this.columns = columns;
      }
      static [entityKind] = "PgUniqueConstraintBuilder";
      /** @internal */
      columns;
      /** @internal */
      nullsNotDistinctConfig = false;
      nullsNotDistinct() {
        this.nullsNotDistinctConfig = true;
        return this;
      }
      /** @internal */
      build(table) {
        return new UniqueConstraint(table, this.columns, this.nullsNotDistinctConfig, this.name);
      }
    };
    UniqueOnConstraintBuilder = class {
      static {
        __name(this, "UniqueOnConstraintBuilder");
      }
      static {
        __name2(this, "UniqueOnConstraintBuilder");
      }
      static [entityKind] = "PgUniqueOnConstraintBuilder";
      /** @internal */
      name;
      constructor(name) {
        this.name = name;
      }
      on(...columns) {
        return new UniqueConstraintBuilder(columns, this.name);
      }
    };
    UniqueConstraint = class {
      static {
        __name(this, "UniqueConstraint");
      }
      static {
        __name2(this, "UniqueConstraint");
      }
      constructor(table, columns, nullsNotDistinct, name) {
        this.table = table;
        this.columns = columns;
        this.name = name ?? uniqueKeyName(this.table, this.columns.map((column) => column.name));
        this.nullsNotDistinct = nullsNotDistinct;
      }
      static [entityKind] = "PgUniqueConstraint";
      columns;
      name;
      nullsNotDistinct = false;
      getName() {
        return this.name;
      }
    };
  }
});
function parsePgArrayValue(arrayString, startFrom, inQuotes) {
  for (let i33 = startFrom; i33 < arrayString.length; i33++) {
    const char = arrayString[i33];
    if (char === "\\") {
      i33++;
      continue;
    }
    if (char === '"') {
      return [arrayString.slice(startFrom, i33).replace(/\\/g, ""), i33 + 1];
    }
    if (inQuotes) {
      continue;
    }
    if (char === "," || char === "}") {
      return [arrayString.slice(startFrom, i33).replace(/\\/g, ""), i33];
    }
  }
  return [arrayString.slice(startFrom).replace(/\\/g, ""), arrayString.length];
}
__name(parsePgArrayValue, "parsePgArrayValue");
function parsePgNestedArray(arrayString, startFrom = 0) {
  const result = [];
  let i33 = startFrom;
  let lastCharIsComma = false;
  while (i33 < arrayString.length) {
    const char = arrayString[i33];
    if (char === ",") {
      if (lastCharIsComma || i33 === startFrom) {
        result.push("");
      }
      lastCharIsComma = true;
      i33++;
      continue;
    }
    lastCharIsComma = false;
    if (char === "\\") {
      i33 += 2;
      continue;
    }
    if (char === '"') {
      const [value2, startFrom2] = parsePgArrayValue(arrayString, i33 + 1, true);
      result.push(value2);
      i33 = startFrom2;
      continue;
    }
    if (char === "}") {
      return [result, i33 + 1];
    }
    if (char === "{") {
      const [value2, startFrom2] = parsePgNestedArray(arrayString, i33 + 1);
      result.push(value2);
      i33 = startFrom2;
      continue;
    }
    const [value, newStartFrom] = parsePgArrayValue(arrayString, i33, false);
    result.push(value);
    i33 = newStartFrom;
  }
  return [result, i33];
}
__name(parsePgNestedArray, "parsePgNestedArray");
function parsePgArray(arrayString) {
  const [result] = parsePgNestedArray(arrayString, 1);
  return result;
}
__name(parsePgArray, "parsePgArray");
function makePgArray(array) {
  return `{${array.map((item) => {
    if (Array.isArray(item)) {
      return makePgArray(item);
    }
    if (typeof item === "string") {
      return `"${item.replace(/\\/g, "\\\\").replace(/"/g, '\\"')}"`;
    }
    return `${item}`;
  }).join(",")}}`;
}
__name(makePgArray, "makePgArray");
var init_array = __esm({
  "../node_modules/drizzle-orm/pg-core/utils/array.js"() {
    init_functionsRoutes_0_8044054200943971();
    __name2(parsePgArrayValue, "parsePgArrayValue");
    __name2(parsePgNestedArray, "parsePgNestedArray");
    __name2(parsePgArray, "parsePgArray");
    __name2(makePgArray, "makePgArray");
  }
});
var PgColumnBuilder;
var PgColumn;
var ExtraConfigColumn;
var IndexedColumn;
var PgArrayBuilder;
var PgArray;
var init_common = __esm({
  "../node_modules/drizzle-orm/pg-core/columns/common.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_column_builder();
    init_column();
    init_entity();
    init_foreign_keys();
    init_tracing_utils();
    init_unique_constraint();
    init_array();
    PgColumnBuilder = class extends ColumnBuilder {
      static {
        __name(this, "PgColumnBuilder");
      }
      static {
        __name2(this, "PgColumnBuilder");
      }
      foreignKeyConfigs = [];
      static [entityKind] = "PgColumnBuilder";
      array(size) {
        return new PgArrayBuilder(this.config.name, this, size);
      }
      references(ref, actions = {}) {
        this.foreignKeyConfigs.push({ ref, actions });
        return this;
      }
      unique(name, config) {
        this.config.isUnique = true;
        this.config.uniqueName = name;
        this.config.uniqueType = config?.nulls;
        return this;
      }
      generatedAlwaysAs(as) {
        this.config.generated = {
          as,
          type: "always",
          mode: "stored"
        };
        return this;
      }
      /** @internal */
      buildForeignKeys(column, table) {
        return this.foreignKeyConfigs.map(({ ref, actions }) => {
          return iife(
            (ref2, actions2) => {
              const builder = new ForeignKeyBuilder(() => {
                const foreignColumn = ref2();
                return { columns: [column], foreignColumns: [foreignColumn] };
              });
              if (actions2.onUpdate) {
                builder.onUpdate(actions2.onUpdate);
              }
              if (actions2.onDelete) {
                builder.onDelete(actions2.onDelete);
              }
              return builder.build(table);
            },
            ref,
            actions
          );
        });
      }
      /** @internal */
      buildExtraConfigColumn(table) {
        return new ExtraConfigColumn(table, this.config);
      }
    };
    PgColumn = class extends Column {
      static {
        __name(this, "PgColumn");
      }
      static {
        __name2(this, "PgColumn");
      }
      constructor(table, config) {
        if (!config.uniqueName) {
          config.uniqueName = uniqueKeyName(table, [config.name]);
        }
        super(table, config);
        this.table = table;
      }
      static [entityKind] = "PgColumn";
    };
    ExtraConfigColumn = class extends PgColumn {
      static {
        __name(this, "ExtraConfigColumn");
      }
      static {
        __name2(this, "ExtraConfigColumn");
      }
      static [entityKind] = "ExtraConfigColumn";
      getSQLType() {
        return this.getSQLType();
      }
      indexConfig = {
        order: this.config.order ?? "asc",
        nulls: this.config.nulls ?? "last",
        opClass: this.config.opClass
      };
      defaultConfig = {
        order: "asc",
        nulls: "last",
        opClass: void 0
      };
      asc() {
        this.indexConfig.order = "asc";
        return this;
      }
      desc() {
        this.indexConfig.order = "desc";
        return this;
      }
      nullsFirst() {
        this.indexConfig.nulls = "first";
        return this;
      }
      nullsLast() {
        this.indexConfig.nulls = "last";
        return this;
      }
      /**
       * ### PostgreSQL documentation quote
       *
       * > An operator class with optional parameters can be specified for each column of an index.
       * The operator class identifies the operators to be used by the index for that column.
       * For example, a B-tree index on four-byte integers would use the int4_ops class;
       * this operator class includes comparison functions for four-byte integers.
       * In practice the default operator class for the column's data type is usually sufficient.
       * The main point of having operator classes is that for some data types, there could be more than one meaningful ordering.
       * For example, we might want to sort a complex-number data type either by absolute value or by real part.
       * We could do this by defining two operator classes for the data type and then selecting the proper class when creating an index.
       * More information about operator classes check:
       *
       * ### Useful links
       * https://www.postgresql.org/docs/current/sql-createindex.html
       *
       * https://www.postgresql.org/docs/current/indexes-opclass.html
       *
       * https://www.postgresql.org/docs/current/xindex.html
       *
       * ### Additional types
       * If you have the `pg_vector` extension installed in your database, you can use the
       * `vector_l2_ops`, `vector_ip_ops`, `vector_cosine_ops`, `vector_l1_ops`, `bit_hamming_ops`, `bit_jaccard_ops`, `halfvec_l2_ops`, `sparsevec_l2_ops` options, which are predefined types.
       *
       * **You can always specify any string you want in the operator class, in case Drizzle doesn't have it natively in its types**
       *
       * @param opClass
       * @returns
       */
      op(opClass) {
        this.indexConfig.opClass = opClass;
        return this;
      }
    };
    IndexedColumn = class {
      static {
        __name(this, "IndexedColumn");
      }
      static {
        __name2(this, "IndexedColumn");
      }
      static [entityKind] = "IndexedColumn";
      constructor(name, keyAsName, type, indexConfig) {
        this.name = name;
        this.keyAsName = keyAsName;
        this.type = type;
        this.indexConfig = indexConfig;
      }
      name;
      keyAsName;
      type;
      indexConfig;
    };
    PgArrayBuilder = class extends PgColumnBuilder {
      static {
        __name(this, "PgArrayBuilder");
      }
      static {
        __name2(this, "PgArrayBuilder");
      }
      static [entityKind] = "PgArrayBuilder";
      constructor(name, baseBuilder, size) {
        super(name, "array", "PgArray");
        this.config.baseBuilder = baseBuilder;
        this.config.size = size;
      }
      /** @internal */
      build(table) {
        const baseColumn = this.config.baseBuilder.build(table);
        return new PgArray(
          table,
          this.config,
          baseColumn
        );
      }
    };
    PgArray = class _PgArray extends PgColumn {
      static {
        __name(this, "_PgArray");
      }
      static {
        __name2(this, "PgArray");
      }
      constructor(table, config, baseColumn, range) {
        super(table, config);
        this.baseColumn = baseColumn;
        this.range = range;
        this.size = config.size;
      }
      size;
      static [entityKind] = "PgArray";
      getSQLType() {
        return `${this.baseColumn.getSQLType()}[${typeof this.size === "number" ? this.size : ""}]`;
      }
      mapFromDriverValue(value) {
        if (typeof value === "string") {
          value = parsePgArray(value);
        }
        return value.map((v3) => this.baseColumn.mapFromDriverValue(v3));
      }
      mapToDriverValue(value, isNestedArray = false) {
        const a3 = value.map(
          (v3) => v3 === null ? null : is(this.baseColumn, _PgArray) ? this.baseColumn.mapToDriverValue(v3, true) : this.baseColumn.mapToDriverValue(v3)
        );
        if (isNestedArray)
          return a3;
        return makePgArray(a3);
      }
    };
  }
});
function isPgEnum(obj) {
  return !!obj && typeof obj === "function" && isPgEnumSym in obj && obj[isPgEnumSym] === true;
}
__name(isPgEnum, "isPgEnum");
var isPgEnumSym;
var PgEnumColumnBuilder;
var PgEnumColumn;
var init_enum = __esm({
  "../node_modules/drizzle-orm/pg-core/columns/enum.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_entity();
    init_common();
    isPgEnumSym = Symbol.for("drizzle:isPgEnum");
    __name2(isPgEnum, "isPgEnum");
    PgEnumColumnBuilder = class extends PgColumnBuilder {
      static {
        __name(this, "PgEnumColumnBuilder");
      }
      static {
        __name2(this, "PgEnumColumnBuilder");
      }
      static [entityKind] = "PgEnumColumnBuilder";
      constructor(name, enumInstance) {
        super(name, "string", "PgEnumColumn");
        this.config.enum = enumInstance;
      }
      /** @internal */
      build(table) {
        return new PgEnumColumn(
          table,
          this.config
        );
      }
    };
    PgEnumColumn = class extends PgColumn {
      static {
        __name(this, "PgEnumColumn");
      }
      static {
        __name2(this, "PgEnumColumn");
      }
      static [entityKind] = "PgEnumColumn";
      enum = this.config.enum;
      enumValues = this.config.enum.enumValues;
      constructor(table, config) {
        super(table, config);
        this.enum = config.enum;
      }
      getSQLType() {
        return this.enum.enumName;
      }
    };
  }
});
var Subquery;
var WithSubquery;
var init_subquery = __esm({
  "../node_modules/drizzle-orm/subquery.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_entity();
    Subquery = class {
      static {
        __name(this, "Subquery");
      }
      static {
        __name2(this, "Subquery");
      }
      static [entityKind] = "Subquery";
      constructor(sql2, selection, alias, isWith = false) {
        this._ = {
          brand: "Subquery",
          sql: sql2,
          selectedFields: selection,
          alias,
          isWith
        };
      }
      // getSQL(): SQL<unknown> {
      // 	return new SQL([this]);
      // }
    };
    WithSubquery = class extends Subquery {
      static {
        __name(this, "WithSubquery");
      }
      static {
        __name2(this, "WithSubquery");
      }
      static [entityKind] = "WithSubquery";
    };
  }
});
var version;
var init_version = __esm({
  "../node_modules/drizzle-orm/version.js"() {
    init_functionsRoutes_0_8044054200943971();
    version = "0.39.1";
  }
});
var otel;
var rawTracer;
var tracer;
var init_tracing = __esm({
  "../node_modules/drizzle-orm/tracing.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_tracing_utils();
    init_version();
    tracer = {
      startActiveSpan(name, fn) {
        if (!otel) {
          return fn();
        }
        if (!rawTracer) {
          rawTracer = otel.trace.getTracer("drizzle-orm", version);
        }
        return iife(
          (otel2, rawTracer2) => rawTracer2.startActiveSpan(
            name,
            (span) => {
              try {
                return fn(span);
              } catch (e2) {
                span.setStatus({
                  code: otel2.SpanStatusCode.ERROR,
                  message: e2 instanceof Error ? e2.message : "Unknown error"
                  // eslint-disable-line no-instanceof/no-instanceof
                });
                throw e2;
              } finally {
                span.end();
              }
            }
          ),
          otel,
          rawTracer
        );
      }
    };
  }
});
var ViewBaseConfig;
var init_view_common = __esm({
  "../node_modules/drizzle-orm/view-common.js"() {
    init_functionsRoutes_0_8044054200943971();
    ViewBaseConfig = Symbol.for("drizzle:ViewBaseConfig");
  }
});
function isTable(table) {
  return typeof table === "object" && table !== null && IsDrizzleTable in table;
}
__name(isTable, "isTable");
function getTableName(table) {
  return table[TableName];
}
__name(getTableName, "getTableName");
function getTableUniqueName(table) {
  return `${table[Schema] ?? "public"}.${table[TableName]}`;
}
__name(getTableUniqueName, "getTableUniqueName");
var Schema;
var Columns;
var ExtraConfigColumns;
var OriginalName;
var BaseName;
var IsAlias;
var ExtraConfigBuilder;
var IsDrizzleTable;
var Table;
var init_table = __esm({
  "../node_modules/drizzle-orm/table.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_entity();
    init_table_utils();
    Schema = Symbol.for("drizzle:Schema");
    Columns = Symbol.for("drizzle:Columns");
    ExtraConfigColumns = Symbol.for("drizzle:ExtraConfigColumns");
    OriginalName = Symbol.for("drizzle:OriginalName");
    BaseName = Symbol.for("drizzle:BaseName");
    IsAlias = Symbol.for("drizzle:IsAlias");
    ExtraConfigBuilder = Symbol.for("drizzle:ExtraConfigBuilder");
    IsDrizzleTable = Symbol.for("drizzle:IsDrizzleTable");
    Table = class {
      static {
        __name(this, "Table");
      }
      static {
        __name2(this, "Table");
      }
      static [entityKind] = "Table";
      /** @internal */
      static Symbol = {
        Name: TableName,
        Schema,
        OriginalName,
        Columns,
        ExtraConfigColumns,
        BaseName,
        IsAlias,
        ExtraConfigBuilder
      };
      /**
       * @internal
       * Can be changed if the table is aliased.
       */
      [TableName];
      /**
       * @internal
       * Used to store the original name of the table, before any aliasing.
       */
      [OriginalName];
      /** @internal */
      [Schema];
      /** @internal */
      [Columns];
      /** @internal */
      [ExtraConfigColumns];
      /**
       *  @internal
       * Used to store the table name before the transformation via the `tableCreator` functions.
       */
      [BaseName];
      /** @internal */
      [IsAlias] = false;
      /** @internal */
      [IsDrizzleTable] = true;
      /** @internal */
      [ExtraConfigBuilder] = void 0;
      constructor(name, schema, baseName) {
        this[TableName] = this[OriginalName] = name;
        this[Schema] = schema;
        this[BaseName] = baseName;
      }
    };
    __name2(isTable, "isTable");
    __name2(getTableName, "getTableName");
    __name2(getTableUniqueName, "getTableUniqueName");
  }
});
function isSQLWrapper(value) {
  return value !== null && value !== void 0 && typeof value.getSQL === "function";
}
__name(isSQLWrapper, "isSQLWrapper");
function mergeQueries(queries) {
  const result = { sql: "", params: [] };
  for (const query of queries) {
    result.sql += query.sql;
    result.params.push(...query.params);
    if (query.typings?.length) {
      if (!result.typings) {
        result.typings = [];
      }
      result.typings.push(...query.typings);
    }
  }
  return result;
}
__name(mergeQueries, "mergeQueries");
function isDriverValueEncoder(value) {
  return typeof value === "object" && value !== null && "mapToDriverValue" in value && typeof value.mapToDriverValue === "function";
}
__name(isDriverValueEncoder, "isDriverValueEncoder");
function sql(strings, ...params) {
  const queryChunks = [];
  if (params.length > 0 || strings.length > 0 && strings[0] !== "") {
    queryChunks.push(new StringChunk(strings[0]));
  }
  for (const [paramIndex, param2] of params.entries()) {
    queryChunks.push(param2, new StringChunk(strings[paramIndex + 1]));
  }
  return new SQL(queryChunks);
}
__name(sql, "sql");
function fillPlaceholders(params, values) {
  return params.map((p3) => {
    if (is(p3, Placeholder)) {
      if (!(p3.name in values)) {
        throw new Error(`No value for placeholder "${p3.name}" was provided`);
      }
      return values[p3.name];
    }
    if (is(p3, Param) && is(p3.value, Placeholder)) {
      if (!(p3.value.name in values)) {
        throw new Error(`No value for placeholder "${p3.value.name}" was provided`);
      }
      return p3.encoder.mapToDriverValue(values[p3.value.name]);
    }
    return p3;
  });
}
__name(fillPlaceholders, "fillPlaceholders");
function isView(view) {
  return typeof view === "object" && view !== null && IsDrizzleView in view;
}
__name(isView, "isView");
var FakePrimitiveParam;
var StringChunk;
var SQL;
var Name;
var noopDecoder;
var noopEncoder;
var noopMapper;
var Param;
var Placeholder;
var IsDrizzleView;
var View;
var init_sql = __esm({
  "../node_modules/drizzle-orm/sql/sql.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_entity();
    init_enum();
    init_subquery();
    init_tracing();
    init_view_common();
    init_column();
    init_table();
    FakePrimitiveParam = class {
      static {
        __name(this, "FakePrimitiveParam");
      }
      static {
        __name2(this, "FakePrimitiveParam");
      }
      static [entityKind] = "FakePrimitiveParam";
    };
    __name2(isSQLWrapper, "isSQLWrapper");
    __name2(mergeQueries, "mergeQueries");
    StringChunk = class {
      static {
        __name(this, "StringChunk");
      }
      static {
        __name2(this, "StringChunk");
      }
      static [entityKind] = "StringChunk";
      value;
      constructor(value) {
        this.value = Array.isArray(value) ? value : [value];
      }
      getSQL() {
        return new SQL([this]);
      }
    };
    SQL = class _SQL {
      static {
        __name(this, "_SQL");
      }
      static {
        __name2(this, "SQL");
      }
      constructor(queryChunks) {
        this.queryChunks = queryChunks;
      }
      static [entityKind] = "SQL";
      /** @internal */
      decoder = noopDecoder;
      shouldInlineParams = false;
      append(query) {
        this.queryChunks.push(...query.queryChunks);
        return this;
      }
      toQuery(config) {
        return tracer.startActiveSpan("drizzle.buildSQL", (span) => {
          const query = this.buildQueryFromSourceParams(this.queryChunks, config);
          span?.setAttributes({
            "drizzle.query.text": query.sql,
            "drizzle.query.params": JSON.stringify(query.params)
          });
          return query;
        });
      }
      buildQueryFromSourceParams(chunks, _config) {
        const config = Object.assign({}, _config, {
          inlineParams: _config.inlineParams || this.shouldInlineParams,
          paramStartIndex: _config.paramStartIndex || { value: 0 }
        });
        const {
          casing,
          escapeName,
          escapeParam,
          prepareTyping,
          inlineParams,
          paramStartIndex
        } = config;
        return mergeQueries(chunks.map((chunk) => {
          if (is(chunk, StringChunk)) {
            return { sql: chunk.value.join(""), params: [] };
          }
          if (is(chunk, Name)) {
            return { sql: escapeName(chunk.value), params: [] };
          }
          if (chunk === void 0) {
            return { sql: "", params: [] };
          }
          if (Array.isArray(chunk)) {
            const result = [new StringChunk("(")];
            for (const [i33, p3] of chunk.entries()) {
              result.push(p3);
              if (i33 < chunk.length - 1) {
                result.push(new StringChunk(", "));
              }
            }
            result.push(new StringChunk(")"));
            return this.buildQueryFromSourceParams(result, config);
          }
          if (is(chunk, _SQL)) {
            return this.buildQueryFromSourceParams(chunk.queryChunks, {
              ...config,
              inlineParams: inlineParams || chunk.shouldInlineParams
            });
          }
          if (is(chunk, Table)) {
            const schemaName = chunk[Table.Symbol.Schema];
            const tableName = chunk[Table.Symbol.Name];
            return {
              sql: schemaName === void 0 || chunk[IsAlias] ? escapeName(tableName) : escapeName(schemaName) + "." + escapeName(tableName),
              params: []
            };
          }
          if (is(chunk, Column)) {
            const columnName = casing.getColumnCasing(chunk);
            if (_config.invokeSource === "indexes") {
              return { sql: escapeName(columnName), params: [] };
            }
            const schemaName = chunk.table[Table.Symbol.Schema];
            return {
              sql: chunk.table[IsAlias] || schemaName === void 0 ? escapeName(chunk.table[Table.Symbol.Name]) + "." + escapeName(columnName) : escapeName(schemaName) + "." + escapeName(chunk.table[Table.Symbol.Name]) + "." + escapeName(columnName),
              params: []
            };
          }
          if (is(chunk, View)) {
            const schemaName = chunk[ViewBaseConfig].schema;
            const viewName = chunk[ViewBaseConfig].name;
            return {
              sql: schemaName === void 0 || chunk[ViewBaseConfig].isAlias ? escapeName(viewName) : escapeName(schemaName) + "." + escapeName(viewName),
              params: []
            };
          }
          if (is(chunk, Param)) {
            if (is(chunk.value, Placeholder)) {
              return { sql: escapeParam(paramStartIndex.value++, chunk), params: [chunk], typings: ["none"] };
            }
            const mappedValue = chunk.value === null ? null : chunk.encoder.mapToDriverValue(chunk.value);
            if (is(mappedValue, _SQL)) {
              return this.buildQueryFromSourceParams([mappedValue], config);
            }
            if (inlineParams) {
              return { sql: this.mapInlineParam(mappedValue, config), params: [] };
            }
            let typings = ["none"];
            if (prepareTyping) {
              typings = [prepareTyping(chunk.encoder)];
            }
            return { sql: escapeParam(paramStartIndex.value++, mappedValue), params: [mappedValue], typings };
          }
          if (is(chunk, Placeholder)) {
            return { sql: escapeParam(paramStartIndex.value++, chunk), params: [chunk], typings: ["none"] };
          }
          if (is(chunk, _SQL.Aliased) && chunk.fieldAlias !== void 0) {
            return { sql: escapeName(chunk.fieldAlias), params: [] };
          }
          if (is(chunk, Subquery)) {
            if (chunk._.isWith) {
              return { sql: escapeName(chunk._.alias), params: [] };
            }
            return this.buildQueryFromSourceParams([
              new StringChunk("("),
              chunk._.sql,
              new StringChunk(") "),
              new Name(chunk._.alias)
            ], config);
          }
          if (isPgEnum(chunk)) {
            if (chunk.schema) {
              return { sql: escapeName(chunk.schema) + "." + escapeName(chunk.enumName), params: [] };
            }
            return { sql: escapeName(chunk.enumName), params: [] };
          }
          if (isSQLWrapper(chunk)) {
            if (chunk.shouldOmitSQLParens?.()) {
              return this.buildQueryFromSourceParams([chunk.getSQL()], config);
            }
            return this.buildQueryFromSourceParams([
              new StringChunk("("),
              chunk.getSQL(),
              new StringChunk(")")
            ], config);
          }
          if (inlineParams) {
            return { sql: this.mapInlineParam(chunk, config), params: [] };
          }
          return { sql: escapeParam(paramStartIndex.value++, chunk), params: [chunk], typings: ["none"] };
        }));
      }
      mapInlineParam(chunk, { escapeString: escapeString2 }) {
        if (chunk === null) {
          return "null";
        }
        if (typeof chunk === "number" || typeof chunk === "boolean") {
          return chunk.toString();
        }
        if (typeof chunk === "string") {
          return escapeString2(chunk);
        }
        if (typeof chunk === "object") {
          const mappedValueAsString = chunk.toString();
          if (mappedValueAsString === "[object Object]") {
            return escapeString2(JSON.stringify(chunk));
          }
          return escapeString2(mappedValueAsString);
        }
        throw new Error("Unexpected param value: " + chunk);
      }
      getSQL() {
        return this;
      }
      as(alias) {
        if (alias === void 0) {
          return this;
        }
        return new _SQL.Aliased(this, alias);
      }
      mapWith(decoder) {
        this.decoder = typeof decoder === "function" ? { mapFromDriverValue: decoder } : decoder;
        return this;
      }
      inlineParams() {
        this.shouldInlineParams = true;
        return this;
      }
      /**
       * This method is used to conditionally include a part of the query.
       *
       * @param condition - Condition to check
       * @returns itself if the condition is `true`, otherwise `undefined`
       */
      if(condition) {
        return condition ? this : void 0;
      }
    };
    Name = class {
      static {
        __name(this, "Name");
      }
      static {
        __name2(this, "Name");
      }
      constructor(value) {
        this.value = value;
      }
      static [entityKind] = "Name";
      brand;
      getSQL() {
        return new SQL([this]);
      }
    };
    __name2(isDriverValueEncoder, "isDriverValueEncoder");
    noopDecoder = {
      mapFromDriverValue: /* @__PURE__ */ __name2((value) => value, "mapFromDriverValue")
    };
    noopEncoder = {
      mapToDriverValue: /* @__PURE__ */ __name2((value) => value, "mapToDriverValue")
    };
    noopMapper = {
      ...noopDecoder,
      ...noopEncoder
    };
    Param = class {
      static {
        __name(this, "Param");
      }
      static {
        __name2(this, "Param");
      }
      /**
       * @param value - Parameter value
       * @param encoder - Encoder to convert the value to a driver parameter
       */
      constructor(value, encoder = noopEncoder) {
        this.value = value;
        this.encoder = encoder;
      }
      static [entityKind] = "Param";
      brand;
      getSQL() {
        return new SQL([this]);
      }
    };
    __name2(sql, "sql");
    ((sql2) => {
      function empty() {
        return new SQL([]);
      }
      __name(empty, "empty");
      __name2(empty, "empty");
      sql2.empty = empty;
      function fromList(list) {
        return new SQL(list);
      }
      __name(fromList, "fromList");
      __name2(fromList, "fromList");
      sql2.fromList = fromList;
      function raw(str) {
        return new SQL([new StringChunk(str)]);
      }
      __name(raw, "raw");
      __name2(raw, "raw");
      sql2.raw = raw;
      function join(chunks, separator) {
        const result = [];
        for (const [i33, chunk] of chunks.entries()) {
          if (i33 > 0 && separator !== void 0) {
            result.push(separator);
          }
          result.push(chunk);
        }
        return new SQL(result);
      }
      __name(join, "join");
      __name2(join, "join");
      sql2.join = join;
      function identifier(value) {
        return new Name(value);
      }
      __name(identifier, "identifier");
      __name2(identifier, "identifier");
      sql2.identifier = identifier;
      function placeholder2(name2) {
        return new Placeholder(name2);
      }
      __name(placeholder2, "placeholder2");
      __name2(placeholder2, "placeholder2");
      sql2.placeholder = placeholder2;
      function param2(value, encoder) {
        return new Param(value, encoder);
      }
      __name(param2, "param2");
      __name2(param2, "param2");
      sql2.param = param2;
    })(sql || (sql = {}));
    ((SQL2) => {
      class Aliased {
        static {
          __name(this, "Aliased");
        }
        static {
          __name2(this, "Aliased");
        }
        constructor(sql2, fieldAlias) {
          this.sql = sql2;
          this.fieldAlias = fieldAlias;
        }
        static [entityKind] = "SQL.Aliased";
        /** @internal */
        isSelectionField = false;
        getSQL() {
          return this.sql;
        }
        /** @internal */
        clone() {
          return new Aliased(this.sql, this.fieldAlias);
        }
      }
      SQL2.Aliased = Aliased;
    })(SQL || (SQL = {}));
    Placeholder = class {
      static {
        __name(this, "Placeholder");
      }
      static {
        __name2(this, "Placeholder");
      }
      constructor(name2) {
        this.name = name2;
      }
      static [entityKind] = "Placeholder";
      getSQL() {
        return new SQL([this]);
      }
    };
    __name2(fillPlaceholders, "fillPlaceholders");
    IsDrizzleView = Symbol.for("drizzle:IsDrizzleView");
    View = class {
      static {
        __name(this, "View");
      }
      static {
        __name2(this, "View");
      }
      static [entityKind] = "View";
      /** @internal */
      [ViewBaseConfig];
      /** @internal */
      [IsDrizzleView] = true;
      constructor({ name: name2, schema, selectedFields, query }) {
        this[ViewBaseConfig] = {
          name: name2,
          originalName: name2,
          schema,
          selectedFields,
          query,
          isExisting: !query,
          isAlias: false
        };
      }
      getSQL() {
        return new SQL([this]);
      }
    };
    __name2(isView, "isView");
    Column.prototype.getSQL = function() {
      return new SQL([this]);
    };
    Table.prototype.getSQL = function() {
      return new SQL([this]);
    };
    Subquery.prototype.getSQL = function() {
      return new SQL([this]);
    };
  }
});
function aliasedTable(table, tableAlias) {
  return new Proxy(table, new TableAliasProxyHandler(tableAlias, false));
}
__name(aliasedTable, "aliasedTable");
function aliasedTableColumn(column, tableAlias) {
  return new Proxy(
    column,
    new ColumnAliasProxyHandler(new Proxy(column.table, new TableAliasProxyHandler(tableAlias, false)))
  );
}
__name(aliasedTableColumn, "aliasedTableColumn");
function mapColumnsInAliasedSQLToAlias(query, alias) {
  return new SQL.Aliased(mapColumnsInSQLToAlias(query.sql, alias), query.fieldAlias);
}
__name(mapColumnsInAliasedSQLToAlias, "mapColumnsInAliasedSQLToAlias");
function mapColumnsInSQLToAlias(query, alias) {
  return sql.join(query.queryChunks.map((c4) => {
    if (is(c4, Column)) {
      return aliasedTableColumn(c4, alias);
    }
    if (is(c4, SQL)) {
      return mapColumnsInSQLToAlias(c4, alias);
    }
    if (is(c4, SQL.Aliased)) {
      return mapColumnsInAliasedSQLToAlias(c4, alias);
    }
    return c4;
  }));
}
__name(mapColumnsInSQLToAlias, "mapColumnsInSQLToAlias");
var ColumnAliasProxyHandler;
var TableAliasProxyHandler;
var RelationTableAliasProxyHandler;
var init_alias = __esm({
  "../node_modules/drizzle-orm/alias.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_column();
    init_entity();
    init_sql();
    init_table();
    init_view_common();
    ColumnAliasProxyHandler = class {
      static {
        __name(this, "ColumnAliasProxyHandler");
      }
      static {
        __name2(this, "ColumnAliasProxyHandler");
      }
      constructor(table) {
        this.table = table;
      }
      static [entityKind] = "ColumnAliasProxyHandler";
      get(columnObj, prop) {
        if (prop === "table") {
          return this.table;
        }
        return columnObj[prop];
      }
    };
    TableAliasProxyHandler = class {
      static {
        __name(this, "TableAliasProxyHandler");
      }
      static {
        __name2(this, "TableAliasProxyHandler");
      }
      constructor(alias, replaceOriginalName) {
        this.alias = alias;
        this.replaceOriginalName = replaceOriginalName;
      }
      static [entityKind] = "TableAliasProxyHandler";
      get(target, prop) {
        if (prop === Table.Symbol.IsAlias) {
          return true;
        }
        if (prop === Table.Symbol.Name) {
          return this.alias;
        }
        if (this.replaceOriginalName && prop === Table.Symbol.OriginalName) {
          return this.alias;
        }
        if (prop === ViewBaseConfig) {
          return {
            ...target[ViewBaseConfig],
            name: this.alias,
            isAlias: true
          };
        }
        if (prop === Table.Symbol.Columns) {
          const columns = target[Table.Symbol.Columns];
          if (!columns) {
            return columns;
          }
          const proxiedColumns = {};
          Object.keys(columns).map((key) => {
            proxiedColumns[key] = new Proxy(
              columns[key],
              new ColumnAliasProxyHandler(new Proxy(target, this))
            );
          });
          return proxiedColumns;
        }
        const value = target[prop];
        if (is(value, Column)) {
          return new Proxy(value, new ColumnAliasProxyHandler(new Proxy(target, this)));
        }
        return value;
      }
    };
    RelationTableAliasProxyHandler = class {
      static {
        __name(this, "RelationTableAliasProxyHandler");
      }
      static {
        __name2(this, "RelationTableAliasProxyHandler");
      }
      constructor(alias) {
        this.alias = alias;
      }
      static [entityKind] = "RelationTableAliasProxyHandler";
      get(target, prop) {
        if (prop === "sourceTable") {
          return aliasedTable(target.sourceTable, this.alias);
        }
        return target[prop];
      }
    };
    __name2(aliasedTable, "aliasedTable");
    __name2(aliasedTableColumn, "aliasedTableColumn");
    __name2(mapColumnsInAliasedSQLToAlias, "mapColumnsInAliasedSQLToAlias");
    __name2(mapColumnsInSQLToAlias, "mapColumnsInSQLToAlias");
  }
});
var init_alias2 = __esm({
  "../node_modules/drizzle-orm/sqlite-core/alias.js"() {
    init_functionsRoutes_0_8044054200943971();
  }
});
var CheckBuilder;
var Check;
var init_checks = __esm({
  "../node_modules/drizzle-orm/sqlite-core/checks.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_entity();
    CheckBuilder = class {
      static {
        __name(this, "CheckBuilder");
      }
      static {
        __name2(this, "CheckBuilder");
      }
      constructor(name, value) {
        this.name = name;
        this.value = value;
      }
      static [entityKind] = "SQLiteCheckBuilder";
      brand;
      build(table) {
        return new Check(table, this);
      }
    };
    Check = class {
      static {
        __name(this, "Check");
      }
      static {
        __name2(this, "Check");
      }
      constructor(table, builder) {
        this.table = table;
        this.name = builder.name;
        this.value = builder.value;
      }
      static [entityKind] = "SQLiteCheck";
      name;
      value;
    };
  }
});
function mapResultRow(columns, row, joinsNotNullableMap) {
  const nullifyMap = {};
  const result = columns.reduce(
    (result2, { path, field }, columnIndex) => {
      let decoder;
      if (is(field, Column)) {
        decoder = field;
      } else if (is(field, SQL)) {
        decoder = field.decoder;
      } else {
        decoder = field.sql.decoder;
      }
      let node2 = result2;
      for (const [pathChunkIndex, pathChunk] of path.entries()) {
        if (pathChunkIndex < path.length - 1) {
          if (!(pathChunk in node2)) {
            node2[pathChunk] = {};
          }
          node2 = node2[pathChunk];
        } else {
          const rawValue = row[columnIndex];
          const value = node2[pathChunk] = rawValue === null ? null : decoder.mapFromDriverValue(rawValue);
          if (joinsNotNullableMap && is(field, Column) && path.length === 2) {
            const objectName = path[0];
            if (!(objectName in nullifyMap)) {
              nullifyMap[objectName] = value === null ? getTableName(field.table) : false;
            } else if (typeof nullifyMap[objectName] === "string" && nullifyMap[objectName] !== getTableName(field.table)) {
              nullifyMap[objectName] = false;
            }
          }
        }
      }
      return result2;
    },
    {}
  );
  if (joinsNotNullableMap && Object.keys(nullifyMap).length > 0) {
    for (const [objectName, tableName] of Object.entries(nullifyMap)) {
      if (typeof tableName === "string" && !joinsNotNullableMap[tableName]) {
        result[objectName] = null;
      }
    }
  }
  return result;
}
__name(mapResultRow, "mapResultRow");
function orderSelectedFields(fields, pathPrefix) {
  return Object.entries(fields).reduce((result, [name, field]) => {
    if (typeof name !== "string") {
      return result;
    }
    const newPath = pathPrefix ? [...pathPrefix, name] : [name];
    if (is(field, Column) || is(field, SQL) || is(field, SQL.Aliased)) {
      result.push({ path: newPath, field });
    } else if (is(field, Table)) {
      result.push(...orderSelectedFields(field[Table.Symbol.Columns], newPath));
    } else {
      result.push(...orderSelectedFields(field, newPath));
    }
    return result;
  }, []);
}
__name(orderSelectedFields, "orderSelectedFields");
function haveSameKeys(left, right) {
  const leftKeys = Object.keys(left);
  const rightKeys = Object.keys(right);
  if (leftKeys.length !== rightKeys.length) {
    return false;
  }
  for (const [index2, key] of leftKeys.entries()) {
    if (key !== rightKeys[index2]) {
      return false;
    }
  }
  return true;
}
__name(haveSameKeys, "haveSameKeys");
function mapUpdateSet(table, values) {
  const entries2 = Object.entries(values).filter(([, value]) => value !== void 0).map(([key, value]) => {
    if (is(value, SQL) || is(value, Column)) {
      return [key, value];
    } else {
      return [key, new Param(value, table[Table.Symbol.Columns][key])];
    }
  });
  if (entries2.length === 0) {
    throw new Error("No values to set");
  }
  return Object.fromEntries(entries2);
}
__name(mapUpdateSet, "mapUpdateSet");
function applyMixins(baseClass, extendedClasses) {
  for (const extendedClass of extendedClasses) {
    for (const name of Object.getOwnPropertyNames(extendedClass.prototype)) {
      if (name === "constructor")
        continue;
      Object.defineProperty(
        baseClass.prototype,
        name,
        Object.getOwnPropertyDescriptor(extendedClass.prototype, name) || /* @__PURE__ */ Object.create(null)
      );
    }
  }
}
__name(applyMixins, "applyMixins");
function getTableColumns(table) {
  return table[Table.Symbol.Columns];
}
__name(getTableColumns, "getTableColumns");
function getViewSelectedFields(view) {
  return view[ViewBaseConfig].selectedFields;
}
__name(getViewSelectedFields, "getViewSelectedFields");
function getTableLikeName(table) {
  return is(table, Subquery) ? table._.alias : is(table, View) ? table[ViewBaseConfig].name : is(table, SQL) ? void 0 : table[Table.Symbol.IsAlias] ? table[Table.Symbol.Name] : table[Table.Symbol.BaseName];
}
__name(getTableLikeName, "getTableLikeName");
function getColumnNameAndConfig(a3, b2) {
  return {
    name: typeof a3 === "string" && a3.length > 0 ? a3 : "",
    config: typeof a3 === "object" ? a3 : b2
  };
}
__name(getColumnNameAndConfig, "getColumnNameAndConfig");
var init_utils = __esm({
  "../node_modules/drizzle-orm/utils.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_column();
    init_entity();
    init_sql();
    init_subquery();
    init_table();
    init_view_common();
    __name2(mapResultRow, "mapResultRow");
    __name2(orderSelectedFields, "orderSelectedFields");
    __name2(haveSameKeys, "haveSameKeys");
    __name2(mapUpdateSet, "mapUpdateSet");
    __name2(applyMixins, "applyMixins");
    __name2(getTableColumns, "getTableColumns");
    __name2(getViewSelectedFields, "getViewSelectedFields");
    __name2(getTableLikeName, "getTableLikeName");
    __name2(getColumnNameAndConfig, "getColumnNameAndConfig");
  }
});
var ForeignKeyBuilder2;
var ForeignKey2;
var init_foreign_keys2 = __esm({
  "../node_modules/drizzle-orm/sqlite-core/foreign-keys.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_entity();
    init_table_utils();
    ForeignKeyBuilder2 = class {
      static {
        __name(this, "ForeignKeyBuilder2");
      }
      static {
        __name2(this, "ForeignKeyBuilder");
      }
      static [entityKind] = "SQLiteForeignKeyBuilder";
      /** @internal */
      reference;
      /** @internal */
      _onUpdate;
      /** @internal */
      _onDelete;
      constructor(config, actions) {
        this.reference = () => {
          const { name, columns, foreignColumns } = config();
          return { name, columns, foreignTable: foreignColumns[0].table, foreignColumns };
        };
        if (actions) {
          this._onUpdate = actions.onUpdate;
          this._onDelete = actions.onDelete;
        }
      }
      onUpdate(action) {
        this._onUpdate = action;
        return this;
      }
      onDelete(action) {
        this._onDelete = action;
        return this;
      }
      /** @internal */
      build(table) {
        return new ForeignKey2(table, this);
      }
    };
    ForeignKey2 = class {
      static {
        __name(this, "ForeignKey2");
      }
      static {
        __name2(this, "ForeignKey");
      }
      constructor(table, builder) {
        this.table = table;
        this.reference = builder.reference;
        this.onUpdate = builder._onUpdate;
        this.onDelete = builder._onDelete;
      }
      static [entityKind] = "SQLiteForeignKey";
      reference;
      onUpdate;
      onDelete;
      getName() {
        const { name, columns, foreignColumns } = this.reference();
        const columnNames = columns.map((column) => column.name);
        const foreignColumnNames = foreignColumns.map((column) => column.name);
        const chunks = [
          this.table[TableName],
          ...columnNames,
          foreignColumns[0].table[TableName],
          ...foreignColumnNames
        ];
        return name ?? `${chunks.join("_")}_fk`;
      }
    };
  }
});
function uniqueKeyName2(table, columns) {
  return `${table[TableName]}_${columns.join("_")}_unique`;
}
__name(uniqueKeyName2, "uniqueKeyName2");
var UniqueConstraintBuilder2;
var UniqueOnConstraintBuilder2;
var UniqueConstraint2;
var init_unique_constraint2 = __esm({
  "../node_modules/drizzle-orm/sqlite-core/unique-constraint.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_entity();
    init_table_utils();
    __name2(uniqueKeyName2, "uniqueKeyName");
    UniqueConstraintBuilder2 = class {
      static {
        __name(this, "UniqueConstraintBuilder2");
      }
      static {
        __name2(this, "UniqueConstraintBuilder");
      }
      constructor(columns, name) {
        this.name = name;
        this.columns = columns;
      }
      static [entityKind] = "SQLiteUniqueConstraintBuilder";
      /** @internal */
      columns;
      /** @internal */
      build(table) {
        return new UniqueConstraint2(table, this.columns, this.name);
      }
    };
    UniqueOnConstraintBuilder2 = class {
      static {
        __name(this, "UniqueOnConstraintBuilder2");
      }
      static {
        __name2(this, "UniqueOnConstraintBuilder");
      }
      static [entityKind] = "SQLiteUniqueOnConstraintBuilder";
      /** @internal */
      name;
      constructor(name) {
        this.name = name;
      }
      on(...columns) {
        return new UniqueConstraintBuilder2(columns, this.name);
      }
    };
    UniqueConstraint2 = class {
      static {
        __name(this, "UniqueConstraint2");
      }
      static {
        __name2(this, "UniqueConstraint");
      }
      constructor(table, columns, name) {
        this.table = table;
        this.columns = columns;
        this.name = name ?? uniqueKeyName2(this.table, this.columns.map((column) => column.name));
      }
      static [entityKind] = "SQLiteUniqueConstraint";
      columns;
      name;
      getName() {
        return this.name;
      }
    };
  }
});
var SQLiteColumnBuilder;
var SQLiteColumn;
var init_common2 = __esm({
  "../node_modules/drizzle-orm/sqlite-core/columns/common.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_column_builder();
    init_column();
    init_entity();
    init_foreign_keys2();
    init_unique_constraint2();
    SQLiteColumnBuilder = class extends ColumnBuilder {
      static {
        __name(this, "SQLiteColumnBuilder");
      }
      static {
        __name2(this, "SQLiteColumnBuilder");
      }
      static [entityKind] = "SQLiteColumnBuilder";
      foreignKeyConfigs = [];
      references(ref, actions = {}) {
        this.foreignKeyConfigs.push({ ref, actions });
        return this;
      }
      unique(name) {
        this.config.isUnique = true;
        this.config.uniqueName = name;
        return this;
      }
      generatedAlwaysAs(as, config) {
        this.config.generated = {
          as,
          type: "always",
          mode: config?.mode ?? "virtual"
        };
        return this;
      }
      /** @internal */
      buildForeignKeys(column, table) {
        return this.foreignKeyConfigs.map(({ ref, actions }) => {
          return ((ref2, actions2) => {
            const builder = new ForeignKeyBuilder2(() => {
              const foreignColumn = ref2();
              return { columns: [column], foreignColumns: [foreignColumn] };
            });
            if (actions2.onUpdate) {
              builder.onUpdate(actions2.onUpdate);
            }
            if (actions2.onDelete) {
              builder.onDelete(actions2.onDelete);
            }
            return builder.build(table);
          })(ref, actions);
        });
      }
    };
    SQLiteColumn = class extends Column {
      static {
        __name(this, "SQLiteColumn");
      }
      static {
        __name2(this, "SQLiteColumn");
      }
      constructor(table, config) {
        if (!config.uniqueName) {
          config.uniqueName = uniqueKeyName2(table, [config.name]);
        }
        super(table, config);
        this.table = table;
      }
      static [entityKind] = "SQLiteColumn";
    };
  }
});
function blob(a3, b2) {
  const { name, config } = getColumnNameAndConfig(a3, b2);
  if (config?.mode === "json") {
    return new SQLiteBlobJsonBuilder(name);
  }
  if (config?.mode === "bigint") {
    return new SQLiteBigIntBuilder(name);
  }
  return new SQLiteBlobBufferBuilder(name);
}
__name(blob, "blob");
var SQLiteBigIntBuilder;
var SQLiteBigInt;
var SQLiteBlobJsonBuilder;
var SQLiteBlobJson;
var SQLiteBlobBufferBuilder;
var SQLiteBlobBuffer;
var init_blob = __esm({
  "../node_modules/drizzle-orm/sqlite-core/columns/blob.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_entity();
    init_utils();
    init_common2();
    SQLiteBigIntBuilder = class extends SQLiteColumnBuilder {
      static {
        __name(this, "SQLiteBigIntBuilder");
      }
      static {
        __name2(this, "SQLiteBigIntBuilder");
      }
      static [entityKind] = "SQLiteBigIntBuilder";
      constructor(name) {
        super(name, "bigint", "SQLiteBigInt");
      }
      /** @internal */
      build(table) {
        return new SQLiteBigInt(table, this.config);
      }
    };
    SQLiteBigInt = class extends SQLiteColumn {
      static {
        __name(this, "SQLiteBigInt");
      }
      static {
        __name2(this, "SQLiteBigInt");
      }
      static [entityKind] = "SQLiteBigInt";
      getSQLType() {
        return "blob";
      }
      mapFromDriverValue(value) {
        if (Buffer.isBuffer(value)) {
          return BigInt(value.toString());
        }
        if (value instanceof ArrayBuffer) {
          const decoder = new TextDecoder();
          return BigInt(decoder.decode(value));
        }
        return BigInt(String.fromCodePoint(...value));
      }
      mapToDriverValue(value) {
        return Buffer.from(value.toString());
      }
    };
    SQLiteBlobJsonBuilder = class extends SQLiteColumnBuilder {
      static {
        __name(this, "SQLiteBlobJsonBuilder");
      }
      static {
        __name2(this, "SQLiteBlobJsonBuilder");
      }
      static [entityKind] = "SQLiteBlobJsonBuilder";
      constructor(name) {
        super(name, "json", "SQLiteBlobJson");
      }
      /** @internal */
      build(table) {
        return new SQLiteBlobJson(
          table,
          this.config
        );
      }
    };
    SQLiteBlobJson = class extends SQLiteColumn {
      static {
        __name(this, "SQLiteBlobJson");
      }
      static {
        __name2(this, "SQLiteBlobJson");
      }
      static [entityKind] = "SQLiteBlobJson";
      getSQLType() {
        return "blob";
      }
      mapFromDriverValue(value) {
        if (Buffer.isBuffer(value)) {
          return JSON.parse(value.toString());
        }
        if (value instanceof ArrayBuffer) {
          const decoder = new TextDecoder();
          return JSON.parse(decoder.decode(value));
        }
        return JSON.parse(String.fromCodePoint(...value));
      }
      mapToDriverValue(value) {
        return Buffer.from(JSON.stringify(value));
      }
    };
    SQLiteBlobBufferBuilder = class extends SQLiteColumnBuilder {
      static {
        __name(this, "SQLiteBlobBufferBuilder");
      }
      static {
        __name2(this, "SQLiteBlobBufferBuilder");
      }
      static [entityKind] = "SQLiteBlobBufferBuilder";
      constructor(name) {
        super(name, "buffer", "SQLiteBlobBuffer");
      }
      /** @internal */
      build(table) {
        return new SQLiteBlobBuffer(table, this.config);
      }
    };
    SQLiteBlobBuffer = class extends SQLiteColumn {
      static {
        __name(this, "SQLiteBlobBuffer");
      }
      static {
        __name2(this, "SQLiteBlobBuffer");
      }
      static [entityKind] = "SQLiteBlobBuffer";
      getSQLType() {
        return "blob";
      }
    };
    __name2(blob, "blob");
  }
});
function customType(customTypeParams) {
  return (a3, b2) => {
    const { name, config } = getColumnNameAndConfig(a3, b2);
    return new SQLiteCustomColumnBuilder(
      name,
      config,
      customTypeParams
    );
  };
}
__name(customType, "customType");
var SQLiteCustomColumnBuilder;
var SQLiteCustomColumn;
var init_custom = __esm({
  "../node_modules/drizzle-orm/sqlite-core/columns/custom.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_entity();
    init_utils();
    init_common2();
    SQLiteCustomColumnBuilder = class extends SQLiteColumnBuilder {
      static {
        __name(this, "SQLiteCustomColumnBuilder");
      }
      static {
        __name2(this, "SQLiteCustomColumnBuilder");
      }
      static [entityKind] = "SQLiteCustomColumnBuilder";
      constructor(name, fieldConfig, customTypeParams) {
        super(name, "custom", "SQLiteCustomColumn");
        this.config.fieldConfig = fieldConfig;
        this.config.customTypeParams = customTypeParams;
      }
      /** @internal */
      build(table) {
        return new SQLiteCustomColumn(
          table,
          this.config
        );
      }
    };
    SQLiteCustomColumn = class extends SQLiteColumn {
      static {
        __name(this, "SQLiteCustomColumn");
      }
      static {
        __name2(this, "SQLiteCustomColumn");
      }
      static [entityKind] = "SQLiteCustomColumn";
      sqlName;
      mapTo;
      mapFrom;
      constructor(table, config) {
        super(table, config);
        this.sqlName = config.customTypeParams.dataType(config.fieldConfig);
        this.mapTo = config.customTypeParams.toDriver;
        this.mapFrom = config.customTypeParams.fromDriver;
      }
      getSQLType() {
        return this.sqlName;
      }
      mapFromDriverValue(value) {
        return typeof this.mapFrom === "function" ? this.mapFrom(value) : value;
      }
      mapToDriverValue(value) {
        return typeof this.mapTo === "function" ? this.mapTo(value) : value;
      }
    };
    __name2(customType, "customType");
  }
});
function integer(a3, b2) {
  const { name, config } = getColumnNameAndConfig(a3, b2);
  if (config?.mode === "timestamp" || config?.mode === "timestamp_ms") {
    return new SQLiteTimestampBuilder(name, config.mode);
  }
  if (config?.mode === "boolean") {
    return new SQLiteBooleanBuilder(name, config.mode);
  }
  return new SQLiteIntegerBuilder(name);
}
__name(integer, "integer");
var SQLiteBaseIntegerBuilder;
var SQLiteBaseInteger;
var SQLiteIntegerBuilder;
var SQLiteInteger;
var SQLiteTimestampBuilder;
var SQLiteTimestamp;
var SQLiteBooleanBuilder;
var SQLiteBoolean;
var init_integer = __esm({
  "../node_modules/drizzle-orm/sqlite-core/columns/integer.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_entity();
    init_sql();
    init_utils();
    init_common2();
    SQLiteBaseIntegerBuilder = class extends SQLiteColumnBuilder {
      static {
        __name(this, "SQLiteBaseIntegerBuilder");
      }
      static {
        __name2(this, "SQLiteBaseIntegerBuilder");
      }
      static [entityKind] = "SQLiteBaseIntegerBuilder";
      constructor(name, dataType, columnType) {
        super(name, dataType, columnType);
        this.config.autoIncrement = false;
      }
      primaryKey(config) {
        if (config?.autoIncrement) {
          this.config.autoIncrement = true;
        }
        this.config.hasDefault = true;
        return super.primaryKey();
      }
    };
    SQLiteBaseInteger = class extends SQLiteColumn {
      static {
        __name(this, "SQLiteBaseInteger");
      }
      static {
        __name2(this, "SQLiteBaseInteger");
      }
      static [entityKind] = "SQLiteBaseInteger";
      autoIncrement = this.config.autoIncrement;
      getSQLType() {
        return "integer";
      }
    };
    SQLiteIntegerBuilder = class extends SQLiteBaseIntegerBuilder {
      static {
        __name(this, "SQLiteIntegerBuilder");
      }
      static {
        __name2(this, "SQLiteIntegerBuilder");
      }
      static [entityKind] = "SQLiteIntegerBuilder";
      constructor(name) {
        super(name, "number", "SQLiteInteger");
      }
      build(table) {
        return new SQLiteInteger(
          table,
          this.config
        );
      }
    };
    SQLiteInteger = class extends SQLiteBaseInteger {
      static {
        __name(this, "SQLiteInteger");
      }
      static {
        __name2(this, "SQLiteInteger");
      }
      static [entityKind] = "SQLiteInteger";
    };
    SQLiteTimestampBuilder = class extends SQLiteBaseIntegerBuilder {
      static {
        __name(this, "SQLiteTimestampBuilder");
      }
      static {
        __name2(this, "SQLiteTimestampBuilder");
      }
      static [entityKind] = "SQLiteTimestampBuilder";
      constructor(name, mode) {
        super(name, "date", "SQLiteTimestamp");
        this.config.mode = mode;
      }
      /**
       * @deprecated Use `default()` with your own expression instead.
       *
       * Adds `DEFAULT (cast((julianday('now') - 2440587.5)*86400000 as integer))` to the column, which is the current epoch timestamp in milliseconds.
       */
      defaultNow() {
        return this.default(sql`(cast((julianday('now') - 2440587.5)*86400000 as integer))`);
      }
      build(table) {
        return new SQLiteTimestamp(
          table,
          this.config
        );
      }
    };
    SQLiteTimestamp = class extends SQLiteBaseInteger {
      static {
        __name(this, "SQLiteTimestamp");
      }
      static {
        __name2(this, "SQLiteTimestamp");
      }
      static [entityKind] = "SQLiteTimestamp";
      mode = this.config.mode;
      mapFromDriverValue(value) {
        if (this.config.mode === "timestamp") {
          return new Date(value * 1e3);
        }
        return new Date(value);
      }
      mapToDriverValue(value) {
        const unix = value.getTime();
        if (this.config.mode === "timestamp") {
          return Math.floor(unix / 1e3);
        }
        return unix;
      }
    };
    SQLiteBooleanBuilder = class extends SQLiteBaseIntegerBuilder {
      static {
        __name(this, "SQLiteBooleanBuilder");
      }
      static {
        __name2(this, "SQLiteBooleanBuilder");
      }
      static [entityKind] = "SQLiteBooleanBuilder";
      constructor(name, mode) {
        super(name, "boolean", "SQLiteBoolean");
        this.config.mode = mode;
      }
      build(table) {
        return new SQLiteBoolean(
          table,
          this.config
        );
      }
    };
    SQLiteBoolean = class extends SQLiteBaseInteger {
      static {
        __name(this, "SQLiteBoolean");
      }
      static {
        __name2(this, "SQLiteBoolean");
      }
      static [entityKind] = "SQLiteBoolean";
      mode = this.config.mode;
      mapFromDriverValue(value) {
        return Number(value) === 1;
      }
      mapToDriverValue(value) {
        return value ? 1 : 0;
      }
    };
    __name2(integer, "integer");
  }
});
function numeric(name) {
  return new SQLiteNumericBuilder(name ?? "");
}
__name(numeric, "numeric");
var SQLiteNumericBuilder;
var SQLiteNumeric;
var init_numeric = __esm({
  "../node_modules/drizzle-orm/sqlite-core/columns/numeric.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_entity();
    init_common2();
    SQLiteNumericBuilder = class extends SQLiteColumnBuilder {
      static {
        __name(this, "SQLiteNumericBuilder");
      }
      static {
        __name2(this, "SQLiteNumericBuilder");
      }
      static [entityKind] = "SQLiteNumericBuilder";
      constructor(name) {
        super(name, "string", "SQLiteNumeric");
      }
      /** @internal */
      build(table) {
        return new SQLiteNumeric(
          table,
          this.config
        );
      }
    };
    SQLiteNumeric = class extends SQLiteColumn {
      static {
        __name(this, "SQLiteNumeric");
      }
      static {
        __name2(this, "SQLiteNumeric");
      }
      static [entityKind] = "SQLiteNumeric";
      getSQLType() {
        return "numeric";
      }
    };
    __name2(numeric, "numeric");
  }
});
function real(name) {
  return new SQLiteRealBuilder(name ?? "");
}
__name(real, "real");
var SQLiteRealBuilder;
var SQLiteReal;
var init_real = __esm({
  "../node_modules/drizzle-orm/sqlite-core/columns/real.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_entity();
    init_common2();
    SQLiteRealBuilder = class extends SQLiteColumnBuilder {
      static {
        __name(this, "SQLiteRealBuilder");
      }
      static {
        __name2(this, "SQLiteRealBuilder");
      }
      static [entityKind] = "SQLiteRealBuilder";
      constructor(name) {
        super(name, "number", "SQLiteReal");
      }
      /** @internal */
      build(table) {
        return new SQLiteReal(table, this.config);
      }
    };
    SQLiteReal = class extends SQLiteColumn {
      static {
        __name(this, "SQLiteReal");
      }
      static {
        __name2(this, "SQLiteReal");
      }
      static [entityKind] = "SQLiteReal";
      getSQLType() {
        return "real";
      }
    };
    __name2(real, "real");
  }
});
function text2(a3, b2 = {}) {
  const { name, config } = getColumnNameAndConfig(a3, b2);
  if (config.mode === "json") {
    return new SQLiteTextJsonBuilder(name);
  }
  return new SQLiteTextBuilder(name, config);
}
__name(text2, "text2");
var SQLiteTextBuilder;
var SQLiteText;
var SQLiteTextJsonBuilder;
var SQLiteTextJson;
var init_text = __esm({
  "../node_modules/drizzle-orm/sqlite-core/columns/text.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_entity();
    init_utils();
    init_common2();
    SQLiteTextBuilder = class extends SQLiteColumnBuilder {
      static {
        __name(this, "SQLiteTextBuilder");
      }
      static {
        __name2(this, "SQLiteTextBuilder");
      }
      static [entityKind] = "SQLiteTextBuilder";
      constructor(name, config) {
        super(name, "string", "SQLiteText");
        this.config.enumValues = config.enum;
        this.config.length = config.length;
      }
      /** @internal */
      build(table) {
        return new SQLiteText(
          table,
          this.config
        );
      }
    };
    SQLiteText = class extends SQLiteColumn {
      static {
        __name(this, "SQLiteText");
      }
      static {
        __name2(this, "SQLiteText");
      }
      static [entityKind] = "SQLiteText";
      enumValues = this.config.enumValues;
      length = this.config.length;
      constructor(table, config) {
        super(table, config);
      }
      getSQLType() {
        return `text${this.config.length ? `(${this.config.length})` : ""}`;
      }
    };
    SQLiteTextJsonBuilder = class extends SQLiteColumnBuilder {
      static {
        __name(this, "SQLiteTextJsonBuilder");
      }
      static {
        __name2(this, "SQLiteTextJsonBuilder");
      }
      static [entityKind] = "SQLiteTextJsonBuilder";
      constructor(name) {
        super(name, "json", "SQLiteTextJson");
      }
      /** @internal */
      build(table) {
        return new SQLiteTextJson(
          table,
          this.config
        );
      }
    };
    SQLiteTextJson = class extends SQLiteColumn {
      static {
        __name(this, "SQLiteTextJson");
      }
      static {
        __name2(this, "SQLiteTextJson");
      }
      static [entityKind] = "SQLiteTextJson";
      getSQLType() {
        return "text";
      }
      mapFromDriverValue(value) {
        return JSON.parse(value);
      }
      mapToDriverValue(value) {
        return JSON.stringify(value);
      }
    };
    __name2(text2, "text");
  }
});
var init_columns = __esm({
  "../node_modules/drizzle-orm/sqlite-core/columns/index.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_blob();
    init_common2();
    init_custom();
    init_integer();
    init_numeric();
    init_real();
    init_text();
  }
});
var SelectionProxyHandler;
var init_selection_proxy = __esm({
  "../node_modules/drizzle-orm/selection-proxy.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_alias();
    init_column();
    init_entity();
    init_sql();
    init_subquery();
    init_view_common();
    SelectionProxyHandler = class _SelectionProxyHandler {
      static {
        __name(this, "_SelectionProxyHandler");
      }
      static {
        __name2(this, "SelectionProxyHandler");
      }
      static [entityKind] = "SelectionProxyHandler";
      config;
      constructor(config) {
        this.config = { ...config };
      }
      get(subquery, prop) {
        if (prop === "_") {
          return {
            ...subquery["_"],
            selectedFields: new Proxy(
              subquery._.selectedFields,
              this
            )
          };
        }
        if (prop === ViewBaseConfig) {
          return {
            ...subquery[ViewBaseConfig],
            selectedFields: new Proxy(
              subquery[ViewBaseConfig].selectedFields,
              this
            )
          };
        }
        if (typeof prop === "symbol") {
          return subquery[prop];
        }
        const columns = is(subquery, Subquery) ? subquery._.selectedFields : is(subquery, View) ? subquery[ViewBaseConfig].selectedFields : subquery;
        const value = columns[prop];
        if (is(value, SQL.Aliased)) {
          if (this.config.sqlAliasedBehavior === "sql" && !value.isSelectionField) {
            return value.sql;
          }
          const newValue = value.clone();
          newValue.isSelectionField = true;
          return newValue;
        }
        if (is(value, SQL)) {
          if (this.config.sqlBehavior === "sql") {
            return value;
          }
          throw new Error(
            `You tried to reference "${prop}" field from a subquery, which is a raw SQL field, but it doesn't have an alias declared. Please add an alias to the field using ".as('alias')" method.`
          );
        }
        if (is(value, Column)) {
          if (this.config.alias) {
            return new Proxy(
              value,
              new ColumnAliasProxyHandler(
                new Proxy(
                  value.table,
                  new TableAliasProxyHandler(this.config.alias, this.config.replaceOriginalName ?? false)
                )
              )
            );
          }
          return value;
        }
        if (typeof value !== "object" || value === null) {
          return value;
        }
        return new Proxy(value, new _SelectionProxyHandler(this.config));
      }
    };
  }
});
var QueryPromise;
var init_query_promise = __esm({
  "../node_modules/drizzle-orm/query-promise.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_entity();
    QueryPromise = class {
      static {
        __name(this, "QueryPromise");
      }
      static {
        __name2(this, "QueryPromise");
      }
      static [entityKind] = "QueryPromise";
      [Symbol.toStringTag] = "QueryPromise";
      catch(onRejected) {
        return this.then(void 0, onRejected);
      }
      finally(onFinally) {
        return this.then(
          (value) => {
            onFinally?.();
            return value;
          },
          (reason) => {
            onFinally?.();
            throw reason;
          }
        );
      }
      then(onFulfilled, onRejected) {
        return this.execute().then(onFulfilled, onRejected);
      }
    };
  }
});
function getSQLiteColumnBuilders() {
  return {
    blob,
    customType,
    integer,
    numeric,
    real,
    text: text2
  };
}
__name(getSQLiteColumnBuilders, "getSQLiteColumnBuilders");
var init_all = __esm({
  "../node_modules/drizzle-orm/sqlite-core/columns/all.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_blob();
    init_custom();
    init_integer();
    init_numeric();
    init_real();
    init_text();
    __name2(getSQLiteColumnBuilders, "getSQLiteColumnBuilders");
  }
});
function sqliteTableBase(name, columns, extraConfig, schema, baseName = name) {
  const rawTable = new SQLiteTable(name, schema, baseName);
  const parsedColumns = typeof columns === "function" ? columns(getSQLiteColumnBuilders()) : columns;
  const builtColumns = Object.fromEntries(
    Object.entries(parsedColumns).map(([name2, colBuilderBase]) => {
      const colBuilder = colBuilderBase;
      colBuilder.setName(name2);
      const column = colBuilder.build(rawTable);
      rawTable[InlineForeignKeys].push(...colBuilder.buildForeignKeys(column, rawTable));
      return [name2, column];
    })
  );
  const table = Object.assign(rawTable, builtColumns);
  table[Table.Symbol.Columns] = builtColumns;
  table[Table.Symbol.ExtraConfigColumns] = builtColumns;
  if (extraConfig) {
    table[SQLiteTable.Symbol.ExtraConfigBuilder] = extraConfig;
  }
  return table;
}
__name(sqliteTableBase, "sqliteTableBase");
var InlineForeignKeys;
var SQLiteTable;
var sqliteTable;
var init_table2 = __esm({
  "../node_modules/drizzle-orm/sqlite-core/table.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_entity();
    init_table();
    init_all();
    InlineForeignKeys = Symbol.for("drizzle:SQLiteInlineForeignKeys");
    SQLiteTable = class extends Table {
      static {
        __name(this, "SQLiteTable");
      }
      static {
        __name2(this, "SQLiteTable");
      }
      static [entityKind] = "SQLiteTable";
      /** @internal */
      static Symbol = Object.assign({}, Table.Symbol, {
        InlineForeignKeys
      });
      /** @internal */
      [Table.Symbol.Columns];
      /** @internal */
      [InlineForeignKeys] = [];
      /** @internal */
      [Table.Symbol.ExtraConfigBuilder] = void 0;
    };
    __name2(sqliteTableBase, "sqliteTableBase");
    sqliteTable = /* @__PURE__ */ __name2((name, columns, extraConfig) => {
      return sqliteTableBase(name, columns, extraConfig);
    }, "sqliteTable");
  }
});
var SQLiteDeleteBase;
var init_delete = __esm({
  "../node_modules/drizzle-orm/sqlite-core/query-builders/delete.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_entity();
    init_query_promise();
    init_selection_proxy();
    init_table2();
    init_table();
    init_utils();
    SQLiteDeleteBase = class extends QueryPromise {
      static {
        __name(this, "SQLiteDeleteBase");
      }
      static {
        __name2(this, "SQLiteDeleteBase");
      }
      constructor(table, session, dialect, withList) {
        super();
        this.table = table;
        this.session = session;
        this.dialect = dialect;
        this.config = { table, withList };
      }
      static [entityKind] = "SQLiteDelete";
      /** @internal */
      config;
      /**
       * Adds a `where` clause to the query.
       *
       * Calling this method will delete only those rows that fulfill a specified condition.
       *
       * See docs: {@link https://orm.drizzle.team/docs/delete}
       *
       * @param where the `where` clause.
       *
       * @example
       * You can use conditional operators and `sql function` to filter the rows to be deleted.
       *
       * ```ts
       * // Delete all cars with green color
       * db.delete(cars).where(eq(cars.color, 'green'));
       * // or
       * db.delete(cars).where(sql`${cars.color} = 'green'`)
       * ```
       *
       * You can logically combine conditional operators with `and()` and `or()` operators:
       *
       * ```ts
       * // Delete all BMW cars with a green color
       * db.delete(cars).where(and(eq(cars.color, 'green'), eq(cars.brand, 'BMW')));
       *
       * // Delete all cars with the green or blue color
       * db.delete(cars).where(or(eq(cars.color, 'green'), eq(cars.color, 'blue')));
       * ```
       */
      where(where) {
        this.config.where = where;
        return this;
      }
      orderBy(...columns) {
        if (typeof columns[0] === "function") {
          const orderBy = columns[0](
            new Proxy(
              this.config.table[Table.Symbol.Columns],
              new SelectionProxyHandler({ sqlAliasedBehavior: "alias", sqlBehavior: "sql" })
            )
          );
          const orderByArray = Array.isArray(orderBy) ? orderBy : [orderBy];
          this.config.orderBy = orderByArray;
        } else {
          const orderByArray = columns;
          this.config.orderBy = orderByArray;
        }
        return this;
      }
      limit(limit) {
        this.config.limit = limit;
        return this;
      }
      returning(fields = this.table[SQLiteTable.Symbol.Columns]) {
        this.config.returning = orderSelectedFields(fields);
        return this;
      }
      /** @internal */
      getSQL() {
        return this.dialect.buildDeleteQuery(this.config);
      }
      toSQL() {
        const { typings: _typings, ...rest } = this.dialect.sqlToQuery(this.getSQL());
        return rest;
      }
      /** @internal */
      _prepare(isOneTimeQuery = true) {
        return this.session[isOneTimeQuery ? "prepareOneTimeQuery" : "prepareQuery"](
          this.dialect.sqlToQuery(this.getSQL()),
          this.config.returning,
          this.config.returning ? "all" : "run",
          true
        );
      }
      prepare() {
        return this._prepare(false);
      }
      run = /* @__PURE__ */ __name2((placeholderValues) => {
        return this._prepare().run(placeholderValues);
      }, "run");
      all = /* @__PURE__ */ __name2((placeholderValues) => {
        return this._prepare().all(placeholderValues);
      }, "all");
      get = /* @__PURE__ */ __name2((placeholderValues) => {
        return this._prepare().get(placeholderValues);
      }, "get");
      values = /* @__PURE__ */ __name2((placeholderValues) => {
        return this._prepare().values(placeholderValues);
      }, "values");
      async execute(placeholderValues) {
        return this._prepare().execute(placeholderValues);
      }
      $dynamic() {
        return this;
      }
    };
  }
});
function toSnakeCase(input) {
  const words = input.replace(/['\u2019]/g, "").match(/[\da-z]+|[A-Z]+(?![a-z])|[A-Z][\da-z]+/g) ?? [];
  return words.map((word) => word.toLowerCase()).join("_");
}
__name(toSnakeCase, "toSnakeCase");
function toCamelCase(input) {
  const words = input.replace(/['\u2019]/g, "").match(/[\da-z]+|[A-Z]+(?![a-z])|[A-Z][\da-z]+/g) ?? [];
  return words.reduce((acc, word, i33) => {
    const formattedWord = i33 === 0 ? word.toLowerCase() : `${word[0].toUpperCase()}${word.slice(1)}`;
    return acc + formattedWord;
  }, "");
}
__name(toCamelCase, "toCamelCase");
function noopCase(input) {
  return input;
}
__name(noopCase, "noopCase");
var CasingCache;
var init_casing = __esm({
  "../node_modules/drizzle-orm/casing.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_entity();
    init_table();
    __name2(toSnakeCase, "toSnakeCase");
    __name2(toCamelCase, "toCamelCase");
    __name2(noopCase, "noopCase");
    CasingCache = class {
      static {
        __name(this, "CasingCache");
      }
      static {
        __name2(this, "CasingCache");
      }
      static [entityKind] = "CasingCache";
      /** @internal */
      cache = {};
      cachedTables = {};
      convert;
      constructor(casing) {
        this.convert = casing === "snake_case" ? toSnakeCase : casing === "camelCase" ? toCamelCase : noopCase;
      }
      getColumnCasing(column) {
        if (!column.keyAsName)
          return column.name;
        const schema = column.table[Table.Symbol.Schema] ?? "public";
        const tableName = column.table[Table.Symbol.OriginalName];
        const key = `${schema}.${tableName}.${column.name}`;
        if (!this.cache[key]) {
          this.cacheTable(column.table);
        }
        return this.cache[key];
      }
      cacheTable(table) {
        const schema = table[Table.Symbol.Schema] ?? "public";
        const tableName = table[Table.Symbol.OriginalName];
        const tableKey = `${schema}.${tableName}`;
        if (!this.cachedTables[tableKey]) {
          for (const column of Object.values(table[Table.Symbol.Columns])) {
            const columnKey = `${tableKey}.${column.name}`;
            this.cache[columnKey] = this.convert(column.name);
          }
          this.cachedTables[tableKey] = true;
        }
      }
      clearCache() {
        this.cache = {};
        this.cachedTables = {};
      }
    };
  }
});
var DrizzleError;
var TransactionRollbackError;
var init_errors = __esm({
  "../node_modules/drizzle-orm/errors.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_entity();
    DrizzleError = class extends Error {
      static {
        __name(this, "DrizzleError");
      }
      static {
        __name2(this, "DrizzleError");
      }
      static [entityKind] = "DrizzleError";
      constructor({ message, cause }) {
        super(message);
        this.name = "DrizzleError";
        this.cause = cause;
      }
    };
    TransactionRollbackError = class extends DrizzleError {
      static {
        __name(this, "TransactionRollbackError");
      }
      static {
        __name2(this, "TransactionRollbackError");
      }
      static [entityKind] = "TransactionRollbackError";
      constructor() {
        super({ message: "Rollback" });
      }
    };
  }
});
var InlineForeignKeys2;
var EnableRLS;
var PgTable;
var init_table3 = __esm({
  "../node_modules/drizzle-orm/pg-core/table.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_entity();
    init_table();
    InlineForeignKeys2 = Symbol.for("drizzle:PgInlineForeignKeys");
    EnableRLS = Symbol.for("drizzle:EnableRLS");
    PgTable = class extends Table {
      static {
        __name(this, "PgTable");
      }
      static {
        __name2(this, "PgTable");
      }
      static [entityKind] = "PgTable";
      /** @internal */
      static Symbol = Object.assign({}, Table.Symbol, {
        InlineForeignKeys: InlineForeignKeys2,
        EnableRLS
      });
      /**@internal */
      [InlineForeignKeys2] = [];
      /** @internal */
      [EnableRLS] = false;
      /** @internal */
      [Table.Symbol.ExtraConfigBuilder] = void 0;
    };
  }
});
var PrimaryKeyBuilder;
var PrimaryKey;
var init_primary_keys = __esm({
  "../node_modules/drizzle-orm/pg-core/primary-keys.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_entity();
    init_table3();
    PrimaryKeyBuilder = class {
      static {
        __name(this, "PrimaryKeyBuilder");
      }
      static {
        __name2(this, "PrimaryKeyBuilder");
      }
      static [entityKind] = "PgPrimaryKeyBuilder";
      /** @internal */
      columns;
      /** @internal */
      name;
      constructor(columns, name) {
        this.columns = columns;
        this.name = name;
      }
      /** @internal */
      build(table) {
        return new PrimaryKey(table, this.columns, this.name);
      }
    };
    PrimaryKey = class {
      static {
        __name(this, "PrimaryKey");
      }
      static {
        __name2(this, "PrimaryKey");
      }
      constructor(table, columns, name) {
        this.table = table;
        this.columns = columns;
        this.name = name;
      }
      static [entityKind] = "PgPrimaryKey";
      columns;
      name;
      getName() {
        return this.name ?? `${this.table[PgTable.Symbol.Name]}_${this.columns.map((column) => column.name).join("_")}_pk`;
      }
    };
  }
});
function bindIfParam(value, column) {
  if (isDriverValueEncoder(column) && !isSQLWrapper(value) && !is(value, Param) && !is(value, Placeholder) && !is(value, Column) && !is(value, Table) && !is(value, View)) {
    return new Param(value, column);
  }
  return value;
}
__name(bindIfParam, "bindIfParam");
function and(...unfilteredConditions) {
  const conditions = unfilteredConditions.filter(
    (c4) => c4 !== void 0
  );
  if (conditions.length === 0) {
    return void 0;
  }
  if (conditions.length === 1) {
    return new SQL(conditions);
  }
  return new SQL([
    new StringChunk("("),
    sql.join(conditions, new StringChunk(" and ")),
    new StringChunk(")")
  ]);
}
__name(and, "and");
function or(...unfilteredConditions) {
  const conditions = unfilteredConditions.filter(
    (c4) => c4 !== void 0
  );
  if (conditions.length === 0) {
    return void 0;
  }
  if (conditions.length === 1) {
    return new SQL(conditions);
  }
  return new SQL([
    new StringChunk("("),
    sql.join(conditions, new StringChunk(" or ")),
    new StringChunk(")")
  ]);
}
__name(or, "or");
function not(condition) {
  return sql`not ${condition}`;
}
__name(not, "not");
function inArray(column, values) {
  if (Array.isArray(values)) {
    if (values.length === 0) {
      return sql`false`;
    }
    return sql`${column} in ${values.map((v3) => bindIfParam(v3, column))}`;
  }
  return sql`${column} in ${bindIfParam(values, column)}`;
}
__name(inArray, "inArray");
function notInArray(column, values) {
  if (Array.isArray(values)) {
    if (values.length === 0) {
      return sql`true`;
    }
    return sql`${column} not in ${values.map((v3) => bindIfParam(v3, column))}`;
  }
  return sql`${column} not in ${bindIfParam(values, column)}`;
}
__name(notInArray, "notInArray");
function isNull(value) {
  return sql`${value} is null`;
}
__name(isNull, "isNull");
function isNotNull(value) {
  return sql`${value} is not null`;
}
__name(isNotNull, "isNotNull");
function exists(subquery) {
  return sql`exists ${subquery}`;
}
__name(exists, "exists");
function notExists(subquery) {
  return sql`not exists ${subquery}`;
}
__name(notExists, "notExists");
function between(column, min, max2) {
  return sql`${column} between ${bindIfParam(min, column)} and ${bindIfParam(
    max2,
    column
  )}`;
}
__name(between, "between");
function notBetween(column, min, max2) {
  return sql`${column} not between ${bindIfParam(
    min,
    column
  )} and ${bindIfParam(max2, column)}`;
}
__name(notBetween, "notBetween");
function like(column, value) {
  return sql`${column} like ${value}`;
}
__name(like, "like");
function notLike(column, value) {
  return sql`${column} not like ${value}`;
}
__name(notLike, "notLike");
function ilike(column, value) {
  return sql`${column} ilike ${value}`;
}
__name(ilike, "ilike");
function notIlike(column, value) {
  return sql`${column} not ilike ${value}`;
}
__name(notIlike, "notIlike");
var eq;
var ne2;
var gt2;
var gte;
var lt2;
var lte;
var init_conditions = __esm({
  "../node_modules/drizzle-orm/sql/expressions/conditions.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_column();
    init_entity();
    init_table();
    init_sql();
    __name2(bindIfParam, "bindIfParam");
    eq = /* @__PURE__ */ __name2((left, right) => {
      return sql`${left} = ${bindIfParam(right, left)}`;
    }, "eq");
    ne2 = /* @__PURE__ */ __name2((left, right) => {
      return sql`${left} <> ${bindIfParam(right, left)}`;
    }, "ne");
    __name2(and, "and");
    __name2(or, "or");
    __name2(not, "not");
    gt2 = /* @__PURE__ */ __name2((left, right) => {
      return sql`${left} > ${bindIfParam(right, left)}`;
    }, "gt");
    gte = /* @__PURE__ */ __name2((left, right) => {
      return sql`${left} >= ${bindIfParam(right, left)}`;
    }, "gte");
    lt2 = /* @__PURE__ */ __name2((left, right) => {
      return sql`${left} < ${bindIfParam(right, left)}`;
    }, "lt");
    lte = /* @__PURE__ */ __name2((left, right) => {
      return sql`${left} <= ${bindIfParam(right, left)}`;
    }, "lte");
    __name2(inArray, "inArray");
    __name2(notInArray, "notInArray");
    __name2(isNull, "isNull");
    __name2(isNotNull, "isNotNull");
    __name2(exists, "exists");
    __name2(notExists, "notExists");
    __name2(between, "between");
    __name2(notBetween, "notBetween");
    __name2(like, "like");
    __name2(notLike, "notLike");
    __name2(ilike, "ilike");
    __name2(notIlike, "notIlike");
  }
});
function asc(column) {
  return sql`${column} asc`;
}
__name(asc, "asc");
function desc(column) {
  return sql`${column} desc`;
}
__name(desc, "desc");
var init_select = __esm({
  "../node_modules/drizzle-orm/sql/expressions/select.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_sql();
    __name2(asc, "asc");
    __name2(desc, "desc");
  }
});
var init_expressions = __esm({
  "../node_modules/drizzle-orm/sql/expressions/index.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_conditions();
    init_select();
  }
});
function getOperators() {
  return {
    and,
    between,
    eq,
    exists,
    gt: gt2,
    gte,
    ilike,
    inArray,
    isNull,
    isNotNull,
    like,
    lt: lt2,
    lte,
    ne: ne2,
    not,
    notBetween,
    notExists,
    notLike,
    notIlike,
    notInArray,
    or,
    sql
  };
}
__name(getOperators, "getOperators");
function getOrderByOperators() {
  return {
    sql,
    asc,
    desc
  };
}
__name(getOrderByOperators, "getOrderByOperators");
function extractTablesRelationalConfig(schema, configHelpers) {
  if (Object.keys(schema).length === 1 && "default" in schema && !is(schema["default"], Table)) {
    schema = schema["default"];
  }
  const tableNamesMap = {};
  const relationsBuffer = {};
  const tablesConfig = {};
  for (const [key, value] of Object.entries(schema)) {
    if (is(value, Table)) {
      const dbName = getTableUniqueName(value);
      const bufferedRelations = relationsBuffer[dbName];
      tableNamesMap[dbName] = key;
      tablesConfig[key] = {
        tsName: key,
        dbName: value[Table.Symbol.Name],
        schema: value[Table.Symbol.Schema],
        columns: value[Table.Symbol.Columns],
        relations: bufferedRelations?.relations ?? {},
        primaryKey: bufferedRelations?.primaryKey ?? []
      };
      for (const column of Object.values(
        value[Table.Symbol.Columns]
      )) {
        if (column.primary) {
          tablesConfig[key].primaryKey.push(column);
        }
      }
      const extraConfig = value[Table.Symbol.ExtraConfigBuilder]?.(value[Table.Symbol.ExtraConfigColumns]);
      if (extraConfig) {
        for (const configEntry of Object.values(extraConfig)) {
          if (is(configEntry, PrimaryKeyBuilder)) {
            tablesConfig[key].primaryKey.push(...configEntry.columns);
          }
        }
      }
    } else if (is(value, Relations)) {
      const dbName = getTableUniqueName(value.table);
      const tableName = tableNamesMap[dbName];
      const relations2 = value.config(
        configHelpers(value.table)
      );
      let primaryKey;
      for (const [relationName, relation] of Object.entries(relations2)) {
        if (tableName) {
          const tableConfig = tablesConfig[tableName];
          tableConfig.relations[relationName] = relation;
          if (primaryKey) {
            tableConfig.primaryKey.push(...primaryKey);
          }
        } else {
          if (!(dbName in relationsBuffer)) {
            relationsBuffer[dbName] = {
              relations: {},
              primaryKey
            };
          }
          relationsBuffer[dbName].relations[relationName] = relation;
        }
      }
    }
  }
  return { tables: tablesConfig, tableNamesMap };
}
__name(extractTablesRelationalConfig, "extractTablesRelationalConfig");
function relations(table, relations2) {
  return new Relations(
    table,
    (helpers) => Object.fromEntries(
      Object.entries(relations2(helpers)).map(([key, value]) => [
        key,
        value.withFieldName(key)
      ])
    )
  );
}
__name(relations, "relations");
function createOne(sourceTable) {
  return /* @__PURE__ */ __name2(/* @__PURE__ */ __name(function one(table, config) {
    return new One(
      sourceTable,
      table,
      config,
      config?.fields.reduce((res, f3) => res && f3.notNull, true) ?? false
    );
  }, "one"), "one");
}
__name(createOne, "createOne");
function createMany(sourceTable) {
  return /* @__PURE__ */ __name2(/* @__PURE__ */ __name(function many(referencedTable, config) {
    return new Many(sourceTable, referencedTable, config);
  }, "many"), "many");
}
__name(createMany, "createMany");
function normalizeRelation(schema, tableNamesMap, relation) {
  if (is(relation, One) && relation.config) {
    return {
      fields: relation.config.fields,
      references: relation.config.references
    };
  }
  const referencedTableTsName = tableNamesMap[getTableUniqueName(relation.referencedTable)];
  if (!referencedTableTsName) {
    throw new Error(
      `Table "${relation.referencedTable[Table.Symbol.Name]}" not found in schema`
    );
  }
  const referencedTableConfig = schema[referencedTableTsName];
  if (!referencedTableConfig) {
    throw new Error(`Table "${referencedTableTsName}" not found in schema`);
  }
  const sourceTable = relation.sourceTable;
  const sourceTableTsName = tableNamesMap[getTableUniqueName(sourceTable)];
  if (!sourceTableTsName) {
    throw new Error(
      `Table "${sourceTable[Table.Symbol.Name]}" not found in schema`
    );
  }
  const reverseRelations = [];
  for (const referencedTableRelation of Object.values(
    referencedTableConfig.relations
  )) {
    if (relation.relationName && relation !== referencedTableRelation && referencedTableRelation.relationName === relation.relationName || !relation.relationName && referencedTableRelation.referencedTable === relation.sourceTable) {
      reverseRelations.push(referencedTableRelation);
    }
  }
  if (reverseRelations.length > 1) {
    throw relation.relationName ? new Error(
      `There are multiple relations with name "${relation.relationName}" in table "${referencedTableTsName}"`
    ) : new Error(
      `There are multiple relations between "${referencedTableTsName}" and "${relation.sourceTable[Table.Symbol.Name]}". Please specify relation name`
    );
  }
  if (reverseRelations[0] && is(reverseRelations[0], One) && reverseRelations[0].config) {
    return {
      fields: reverseRelations[0].config.references,
      references: reverseRelations[0].config.fields
    };
  }
  throw new Error(
    `There is not enough information to infer relation "${sourceTableTsName}.${relation.fieldName}"`
  );
}
__name(normalizeRelation, "normalizeRelation");
function createTableRelationsHelpers(sourceTable) {
  return {
    one: createOne(sourceTable),
    many: createMany(sourceTable)
  };
}
__name(createTableRelationsHelpers, "createTableRelationsHelpers");
function mapRelationalRow(tablesConfig, tableConfig, row, buildQueryResultSelection, mapColumnValue = (value) => value) {
  const result = {};
  for (const [
    selectionItemIndex,
    selectionItem
  ] of buildQueryResultSelection.entries()) {
    if (selectionItem.isJson) {
      const relation = tableConfig.relations[selectionItem.tsKey];
      const rawSubRows = row[selectionItemIndex];
      const subRows = typeof rawSubRows === "string" ? JSON.parse(rawSubRows) : rawSubRows;
      result[selectionItem.tsKey] = is(relation, One) ? subRows && mapRelationalRow(
        tablesConfig,
        tablesConfig[selectionItem.relationTableTsKey],
        subRows,
        selectionItem.selection,
        mapColumnValue
      ) : subRows.map(
        (subRow) => mapRelationalRow(
          tablesConfig,
          tablesConfig[selectionItem.relationTableTsKey],
          subRow,
          selectionItem.selection,
          mapColumnValue
        )
      );
    } else {
      const value = mapColumnValue(row[selectionItemIndex]);
      const field = selectionItem.field;
      let decoder;
      if (is(field, Column)) {
        decoder = field;
      } else if (is(field, SQL)) {
        decoder = field.decoder;
      } else {
        decoder = field.sql.decoder;
      }
      result[selectionItem.tsKey] = value === null ? null : decoder.mapFromDriverValue(value);
    }
  }
  return result;
}
__name(mapRelationalRow, "mapRelationalRow");
var Relation;
var Relations;
var One;
var Many;
var init_relations = __esm({
  "../node_modules/drizzle-orm/relations.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_table();
    init_column();
    init_entity();
    init_primary_keys();
    init_expressions();
    init_sql();
    Relation = class {
      static {
        __name(this, "Relation");
      }
      static {
        __name2(this, "Relation");
      }
      constructor(sourceTable, referencedTable, relationName) {
        this.sourceTable = sourceTable;
        this.referencedTable = referencedTable;
        this.relationName = relationName;
        this.referencedTableName = referencedTable[Table.Symbol.Name];
      }
      static [entityKind] = "Relation";
      referencedTableName;
      fieldName;
    };
    Relations = class {
      static {
        __name(this, "Relations");
      }
      static {
        __name2(this, "Relations");
      }
      constructor(table, config) {
        this.table = table;
        this.config = config;
      }
      static [entityKind] = "Relations";
    };
    One = class _One extends Relation {
      static {
        __name(this, "_One");
      }
      static {
        __name2(this, "One");
      }
      constructor(sourceTable, referencedTable, config, isNullable) {
        super(sourceTable, referencedTable, config?.relationName);
        this.config = config;
        this.isNullable = isNullable;
      }
      static [entityKind] = "One";
      withFieldName(fieldName) {
        const relation = new _One(
          this.sourceTable,
          this.referencedTable,
          this.config,
          this.isNullable
        );
        relation.fieldName = fieldName;
        return relation;
      }
    };
    Many = class _Many extends Relation {
      static {
        __name(this, "_Many");
      }
      static {
        __name2(this, "Many");
      }
      constructor(sourceTable, referencedTable, config) {
        super(sourceTable, referencedTable, config?.relationName);
        this.config = config;
      }
      static [entityKind] = "Many";
      withFieldName(fieldName) {
        const relation = new _Many(
          this.sourceTable,
          this.referencedTable,
          this.config
        );
        relation.fieldName = fieldName;
        return relation;
      }
    };
    __name2(getOperators, "getOperators");
    __name2(getOrderByOperators, "getOrderByOperators");
    __name2(extractTablesRelationalConfig, "extractTablesRelationalConfig");
    __name2(relations, "relations");
    __name2(createOne, "createOne");
    __name2(createMany, "createMany");
    __name2(normalizeRelation, "normalizeRelation");
    __name2(createTableRelationsHelpers, "createTableRelationsHelpers");
    __name2(mapRelationalRow, "mapRelationalRow");
  }
});
function count(expression) {
  return sql`count(${expression || sql.raw("*")})`.mapWith(Number);
}
__name(count, "count");
var init_aggregate = __esm({
  "../node_modules/drizzle-orm/sql/functions/aggregate.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_sql();
    __name2(count, "count");
  }
});
var init_vector = __esm({
  "../node_modules/drizzle-orm/sql/functions/vector.js"() {
    init_functionsRoutes_0_8044054200943971();
  }
});
var init_functions = __esm({
  "../node_modules/drizzle-orm/sql/functions/index.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_aggregate();
    init_vector();
  }
});
var init_sql2 = __esm({
  "../node_modules/drizzle-orm/sql/index.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_expressions();
    init_functions();
    init_sql();
  }
});
var SQLiteViewBase;
var init_view_base = __esm({
  "../node_modules/drizzle-orm/sqlite-core/view-base.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_entity();
    init_sql();
    SQLiteViewBase = class extends View {
      static {
        __name(this, "SQLiteViewBase");
      }
      static {
        __name2(this, "SQLiteViewBase");
      }
      static [entityKind] = "SQLiteViewBase";
    };
  }
});
var SQLiteDialect;
var SQLiteSyncDialect;
var SQLiteAsyncDialect;
var init_dialect = __esm({
  "../node_modules/drizzle-orm/sqlite-core/dialect.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_alias();
    init_casing();
    init_column();
    init_entity();
    init_errors();
    init_relations();
    init_sql2();
    init_sql();
    init_columns();
    init_table2();
    init_subquery();
    init_table();
    init_utils();
    init_view_common();
    init_view_base();
    SQLiteDialect = class {
      static {
        __name(this, "SQLiteDialect");
      }
      static {
        __name2(this, "SQLiteDialect");
      }
      static [entityKind] = "SQLiteDialect";
      /** @internal */
      casing;
      constructor(config) {
        this.casing = new CasingCache(config?.casing);
      }
      escapeName(name) {
        return `"${name}"`;
      }
      escapeParam(_num) {
        return "?";
      }
      escapeString(str) {
        return `'${str.replace(/'/g, "''")}'`;
      }
      buildWithCTE(queries) {
        if (!queries?.length)
          return void 0;
        const withSqlChunks = [sql`with `];
        for (const [i33, w2] of queries.entries()) {
          withSqlChunks.push(sql`${sql.identifier(w2._.alias)} as (${w2._.sql})`);
          if (i33 < queries.length - 1) {
            withSqlChunks.push(sql`, `);
          }
        }
        withSqlChunks.push(sql` `);
        return sql.join(withSqlChunks);
      }
      buildDeleteQuery({ table, where, returning, withList, limit, orderBy }) {
        const withSql = this.buildWithCTE(withList);
        const returningSql = returning ? sql` returning ${this.buildSelection(returning, { isSingleTable: true })}` : void 0;
        const whereSql = where ? sql` where ${where}` : void 0;
        const orderBySql = this.buildOrderBy(orderBy);
        const limitSql = this.buildLimit(limit);
        return sql`${withSql}delete from ${table}${whereSql}${returningSql}${orderBySql}${limitSql}`;
      }
      buildUpdateSet(table, set) {
        const tableColumns = table[Table.Symbol.Columns];
        const columnNames = Object.keys(tableColumns).filter(
          (colName) => set[colName] !== void 0 || tableColumns[colName]?.onUpdateFn !== void 0
        );
        const setSize = columnNames.length;
        return sql.join(columnNames.flatMap((colName, i33) => {
          const col = tableColumns[colName];
          const value = set[colName] ?? sql.param(col.onUpdateFn(), col);
          const res = sql`${sql.identifier(this.casing.getColumnCasing(col))} = ${value}`;
          if (i33 < setSize - 1) {
            return [res, sql.raw(", ")];
          }
          return [res];
        }));
      }
      buildUpdateQuery({ table, set, where, returning, withList, joins, from, limit, orderBy }) {
        const withSql = this.buildWithCTE(withList);
        const setSql = this.buildUpdateSet(table, set);
        const fromSql = from && sql.join([sql.raw(" from "), this.buildFromTable(from)]);
        const joinsSql = this.buildJoins(joins);
        const returningSql = returning ? sql` returning ${this.buildSelection(returning, { isSingleTable: true })}` : void 0;
        const whereSql = where ? sql` where ${where}` : void 0;
        const orderBySql = this.buildOrderBy(orderBy);
        const limitSql = this.buildLimit(limit);
        return sql`${withSql}update ${table} set ${setSql}${fromSql}${joinsSql}${whereSql}${returningSql}${orderBySql}${limitSql}`;
      }
      /**
       * Builds selection SQL with provided fields/expressions
       *
       * Examples:
       *
       * `select <selection> from`
       *
       * `insert ... returning <selection>`
       *
       * If `isSingleTable` is true, then columns won't be prefixed with table name
       */
      buildSelection(fields, { isSingleTable = false } = {}) {
        const columnsLen = fields.length;
        const chunks = fields.flatMap(({ field }, i33) => {
          const chunk = [];
          if (is(field, SQL.Aliased) && field.isSelectionField) {
            chunk.push(sql.identifier(field.fieldAlias));
          } else if (is(field, SQL.Aliased) || is(field, SQL)) {
            const query = is(field, SQL.Aliased) ? field.sql : field;
            if (isSingleTable) {
              chunk.push(
                new SQL(
                  query.queryChunks.map((c4) => {
                    if (is(c4, Column)) {
                      return sql.identifier(this.casing.getColumnCasing(c4));
                    }
                    return c4;
                  })
                )
              );
            } else {
              chunk.push(query);
            }
            if (is(field, SQL.Aliased)) {
              chunk.push(sql` as ${sql.identifier(field.fieldAlias)}`);
            }
          } else if (is(field, Column)) {
            const tableName = field.table[Table.Symbol.Name];
            if (isSingleTable) {
              chunk.push(sql.identifier(this.casing.getColumnCasing(field)));
            } else {
              chunk.push(sql`${sql.identifier(tableName)}.${sql.identifier(this.casing.getColumnCasing(field))}`);
            }
          }
          if (i33 < columnsLen - 1) {
            chunk.push(sql`, `);
          }
          return chunk;
        });
        return sql.join(chunks);
      }
      buildJoins(joins) {
        if (!joins || joins.length === 0) {
          return void 0;
        }
        const joinsArray = [];
        if (joins) {
          for (const [index2, joinMeta] of joins.entries()) {
            if (index2 === 0) {
              joinsArray.push(sql` `);
            }
            const table = joinMeta.table;
            if (is(table, SQLiteTable)) {
              const tableName = table[SQLiteTable.Symbol.Name];
              const tableSchema = table[SQLiteTable.Symbol.Schema];
              const origTableName = table[SQLiteTable.Symbol.OriginalName];
              const alias = tableName === origTableName ? void 0 : joinMeta.alias;
              joinsArray.push(
                sql`${sql.raw(joinMeta.joinType)} join ${tableSchema ? sql`${sql.identifier(tableSchema)}.` : void 0}${sql.identifier(origTableName)}${alias && sql` ${sql.identifier(alias)}`} on ${joinMeta.on}`
              );
            } else {
              joinsArray.push(
                sql`${sql.raw(joinMeta.joinType)} join ${table} on ${joinMeta.on}`
              );
            }
            if (index2 < joins.length - 1) {
              joinsArray.push(sql` `);
            }
          }
        }
        return sql.join(joinsArray);
      }
      buildLimit(limit) {
        return typeof limit === "object" || typeof limit === "number" && limit >= 0 ? sql` limit ${limit}` : void 0;
      }
      buildOrderBy(orderBy) {
        const orderByList = [];
        if (orderBy) {
          for (const [index2, orderByValue] of orderBy.entries()) {
            orderByList.push(orderByValue);
            if (index2 < orderBy.length - 1) {
              orderByList.push(sql`, `);
            }
          }
        }
        return orderByList.length > 0 ? sql` order by ${sql.join(orderByList)}` : void 0;
      }
      buildFromTable(table) {
        if (is(table, Table) && table[Table.Symbol.OriginalName] !== table[Table.Symbol.Name]) {
          return sql`${sql.identifier(table[Table.Symbol.OriginalName])} ${sql.identifier(table[Table.Symbol.Name])}`;
        }
        return table;
      }
      buildSelectQuery({
        withList,
        fields,
        fieldsFlat,
        where,
        having,
        table,
        joins,
        orderBy,
        groupBy,
        limit,
        offset,
        distinct,
        setOperators
      }) {
        const fieldsList = fieldsFlat ?? orderSelectedFields(fields);
        for (const f3 of fieldsList) {
          if (is(f3.field, Column) && getTableName(f3.field.table) !== (is(table, Subquery) ? table._.alias : is(table, SQLiteViewBase) ? table[ViewBaseConfig].name : is(table, SQL) ? void 0 : getTableName(table)) && !((table2) => joins?.some(
            ({ alias }) => alias === (table2[Table.Symbol.IsAlias] ? getTableName(table2) : table2[Table.Symbol.BaseName])
          ))(f3.field.table)) {
            const tableName = getTableName(f3.field.table);
            throw new Error(
              `Your "${f3.path.join("->")}" field references a column "${tableName}"."${f3.field.name}", but the table "${tableName}" is not part of the query! Did you forget to join it?`
            );
          }
        }
        const isSingleTable = !joins || joins.length === 0;
        const withSql = this.buildWithCTE(withList);
        const distinctSql = distinct ? sql` distinct` : void 0;
        const selection = this.buildSelection(fieldsList, { isSingleTable });
        const tableSql = this.buildFromTable(table);
        const joinsSql = this.buildJoins(joins);
        const whereSql = where ? sql` where ${where}` : void 0;
        const havingSql = having ? sql` having ${having}` : void 0;
        const groupByList = [];
        if (groupBy) {
          for (const [index2, groupByValue] of groupBy.entries()) {
            groupByList.push(groupByValue);
            if (index2 < groupBy.length - 1) {
              groupByList.push(sql`, `);
            }
          }
        }
        const groupBySql = groupByList.length > 0 ? sql` group by ${sql.join(groupByList)}` : void 0;
        const orderBySql = this.buildOrderBy(orderBy);
        const limitSql = this.buildLimit(limit);
        const offsetSql = offset ? sql` offset ${offset}` : void 0;
        const finalQuery = sql`${withSql}select${distinctSql} ${selection} from ${tableSql}${joinsSql}${whereSql}${groupBySql}${havingSql}${orderBySql}${limitSql}${offsetSql}`;
        if (setOperators.length > 0) {
          return this.buildSetOperations(finalQuery, setOperators);
        }
        return finalQuery;
      }
      buildSetOperations(leftSelect, setOperators) {
        const [setOperator, ...rest] = setOperators;
        if (!setOperator) {
          throw new Error("Cannot pass undefined values to any set operator");
        }
        if (rest.length === 0) {
          return this.buildSetOperationQuery({ leftSelect, setOperator });
        }
        return this.buildSetOperations(
          this.buildSetOperationQuery({ leftSelect, setOperator }),
          rest
        );
      }
      buildSetOperationQuery({
        leftSelect,
        setOperator: { type, isAll, rightSelect, limit, orderBy, offset }
      }) {
        const leftChunk = sql`${leftSelect.getSQL()} `;
        const rightChunk = sql`${rightSelect.getSQL()}`;
        let orderBySql;
        if (orderBy && orderBy.length > 0) {
          const orderByValues = [];
          for (const singleOrderBy of orderBy) {
            if (is(singleOrderBy, SQLiteColumn)) {
              orderByValues.push(sql.identifier(singleOrderBy.name));
            } else if (is(singleOrderBy, SQL)) {
              for (let i33 = 0; i33 < singleOrderBy.queryChunks.length; i33++) {
                const chunk = singleOrderBy.queryChunks[i33];
                if (is(chunk, SQLiteColumn)) {
                  singleOrderBy.queryChunks[i33] = sql.identifier(this.casing.getColumnCasing(chunk));
                }
              }
              orderByValues.push(sql`${singleOrderBy}`);
            } else {
              orderByValues.push(sql`${singleOrderBy}`);
            }
          }
          orderBySql = sql` order by ${sql.join(orderByValues, sql`, `)}`;
        }
        const limitSql = typeof limit === "object" || typeof limit === "number" && limit >= 0 ? sql` limit ${limit}` : void 0;
        const operatorChunk = sql.raw(`${type} ${isAll ? "all " : ""}`);
        const offsetSql = offset ? sql` offset ${offset}` : void 0;
        return sql`${leftChunk}${operatorChunk}${rightChunk}${orderBySql}${limitSql}${offsetSql}`;
      }
      buildInsertQuery({ table, values: valuesOrSelect, onConflict, returning, withList, select }) {
        const valuesSqlList = [];
        const columns = table[Table.Symbol.Columns];
        const colEntries = Object.entries(columns).filter(
          ([_3, col]) => !col.shouldDisableInsert()
        );
        const insertOrder = colEntries.map(([, column]) => sql.identifier(this.casing.getColumnCasing(column)));
        if (select) {
          const select2 = valuesOrSelect;
          if (is(select2, SQL)) {
            valuesSqlList.push(select2);
          } else {
            valuesSqlList.push(select2.getSQL());
          }
        } else {
          const values = valuesOrSelect;
          valuesSqlList.push(sql.raw("values "));
          for (const [valueIndex, value] of values.entries()) {
            const valueList = [];
            for (const [fieldName, col] of colEntries) {
              const colValue = value[fieldName];
              if (colValue === void 0 || is(colValue, Param) && colValue.value === void 0) {
                let defaultValue;
                if (col.default !== null && col.default !== void 0) {
                  defaultValue = is(col.default, SQL) ? col.default : sql.param(col.default, col);
                } else if (col.defaultFn !== void 0) {
                  const defaultFnResult = col.defaultFn();
                  defaultValue = is(defaultFnResult, SQL) ? defaultFnResult : sql.param(defaultFnResult, col);
                } else if (!col.default && col.onUpdateFn !== void 0) {
                  const onUpdateFnResult = col.onUpdateFn();
                  defaultValue = is(onUpdateFnResult, SQL) ? onUpdateFnResult : sql.param(onUpdateFnResult, col);
                } else {
                  defaultValue = sql`null`;
                }
                valueList.push(defaultValue);
              } else {
                valueList.push(colValue);
              }
            }
            valuesSqlList.push(valueList);
            if (valueIndex < values.length - 1) {
              valuesSqlList.push(sql`, `);
            }
          }
        }
        const withSql = this.buildWithCTE(withList);
        const valuesSql = sql.join(valuesSqlList);
        const returningSql = returning ? sql` returning ${this.buildSelection(returning, { isSingleTable: true })}` : void 0;
        const onConflictSql = onConflict?.length ? sql.join(onConflict) : void 0;
        return sql`${withSql}insert into ${table} ${insertOrder} ${valuesSql}${onConflictSql}${returningSql}`;
      }
      sqlToQuery(sql2, invokeSource) {
        return sql2.toQuery({
          casing: this.casing,
          escapeName: this.escapeName,
          escapeParam: this.escapeParam,
          escapeString: this.escapeString,
          invokeSource
        });
      }
      buildRelationalQuery({
        fullSchema,
        schema,
        tableNamesMap,
        table,
        tableConfig,
        queryConfig: config,
        tableAlias,
        nestedQueryRelation,
        joinOn
      }) {
        let selection = [];
        let limit, offset, orderBy = [], where;
        const joins = [];
        if (config === true) {
          const selectionEntries = Object.entries(tableConfig.columns);
          selection = selectionEntries.map(([key, value]) => ({
            dbKey: value.name,
            tsKey: key,
            field: aliasedTableColumn(value, tableAlias),
            relationTableTsKey: void 0,
            isJson: false,
            selection: []
          }));
        } else {
          const aliasedColumns = Object.fromEntries(
            Object.entries(tableConfig.columns).map(([key, value]) => [key, aliasedTableColumn(value, tableAlias)])
          );
          if (config.where) {
            const whereSql = typeof config.where === "function" ? config.where(aliasedColumns, getOperators()) : config.where;
            where = whereSql && mapColumnsInSQLToAlias(whereSql, tableAlias);
          }
          const fieldsSelection = [];
          let selectedColumns = [];
          if (config.columns) {
            let isIncludeMode = false;
            for (const [field, value] of Object.entries(config.columns)) {
              if (value === void 0) {
                continue;
              }
              if (field in tableConfig.columns) {
                if (!isIncludeMode && value === true) {
                  isIncludeMode = true;
                }
                selectedColumns.push(field);
              }
            }
            if (selectedColumns.length > 0) {
              selectedColumns = isIncludeMode ? selectedColumns.filter((c4) => config.columns?.[c4] === true) : Object.keys(tableConfig.columns).filter((key) => !selectedColumns.includes(key));
            }
          } else {
            selectedColumns = Object.keys(tableConfig.columns);
          }
          for (const field of selectedColumns) {
            const column = tableConfig.columns[field];
            fieldsSelection.push({ tsKey: field, value: column });
          }
          let selectedRelations = [];
          if (config.with) {
            selectedRelations = Object.entries(config.with).filter((entry) => !!entry[1]).map(([tsKey, queryConfig]) => ({ tsKey, queryConfig, relation: tableConfig.relations[tsKey] }));
          }
          let extras;
          if (config.extras) {
            extras = typeof config.extras === "function" ? config.extras(aliasedColumns, { sql }) : config.extras;
            for (const [tsKey, value] of Object.entries(extras)) {
              fieldsSelection.push({
                tsKey,
                value: mapColumnsInAliasedSQLToAlias(value, tableAlias)
              });
            }
          }
          for (const { tsKey, value } of fieldsSelection) {
            selection.push({
              dbKey: is(value, SQL.Aliased) ? value.fieldAlias : tableConfig.columns[tsKey].name,
              tsKey,
              field: is(value, Column) ? aliasedTableColumn(value, tableAlias) : value,
              relationTableTsKey: void 0,
              isJson: false,
              selection: []
            });
          }
          let orderByOrig = typeof config.orderBy === "function" ? config.orderBy(aliasedColumns, getOrderByOperators()) : config.orderBy ?? [];
          if (!Array.isArray(orderByOrig)) {
            orderByOrig = [orderByOrig];
          }
          orderBy = orderByOrig.map((orderByValue) => {
            if (is(orderByValue, Column)) {
              return aliasedTableColumn(orderByValue, tableAlias);
            }
            return mapColumnsInSQLToAlias(orderByValue, tableAlias);
          });
          limit = config.limit;
          offset = config.offset;
          for (const {
            tsKey: selectedRelationTsKey,
            queryConfig: selectedRelationConfigValue,
            relation
          } of selectedRelations) {
            const normalizedRelation = normalizeRelation(schema, tableNamesMap, relation);
            const relationTableName = getTableUniqueName(relation.referencedTable);
            const relationTableTsName = tableNamesMap[relationTableName];
            const relationTableAlias = `${tableAlias}_${selectedRelationTsKey}`;
            const joinOn2 = and(
              ...normalizedRelation.fields.map(
                (field2, i33) => eq(
                  aliasedTableColumn(normalizedRelation.references[i33], relationTableAlias),
                  aliasedTableColumn(field2, tableAlias)
                )
              )
            );
            const builtRelation = this.buildRelationalQuery({
              fullSchema,
              schema,
              tableNamesMap,
              table: fullSchema[relationTableTsName],
              tableConfig: schema[relationTableTsName],
              queryConfig: is(relation, One) ? selectedRelationConfigValue === true ? { limit: 1 } : { ...selectedRelationConfigValue, limit: 1 } : selectedRelationConfigValue,
              tableAlias: relationTableAlias,
              joinOn: joinOn2,
              nestedQueryRelation: relation
            });
            const field = sql`(${builtRelation.sql})`.as(selectedRelationTsKey);
            selection.push({
              dbKey: selectedRelationTsKey,
              tsKey: selectedRelationTsKey,
              field,
              relationTableTsKey: relationTableTsName,
              isJson: true,
              selection: builtRelation.selection
            });
          }
        }
        if (selection.length === 0) {
          throw new DrizzleError({
            message: `No fields selected for table "${tableConfig.tsName}" ("${tableAlias}"). You need to have at least one item in "columns", "with" or "extras". If you need to select all columns, omit the "columns" key or set it to undefined.`
          });
        }
        let result;
        where = and(joinOn, where);
        if (nestedQueryRelation) {
          let field = sql`json_array(${sql.join(
            selection.map(
              ({ field: field2 }) => is(field2, SQLiteColumn) ? sql.identifier(this.casing.getColumnCasing(field2)) : is(field2, SQL.Aliased) ? field2.sql : field2
            ),
            sql`, `
          )})`;
          if (is(nestedQueryRelation, Many)) {
            field = sql`coalesce(json_group_array(${field}), json_array())`;
          }
          const nestedSelection = [{
            dbKey: "data",
            tsKey: "data",
            field: field.as("data"),
            isJson: true,
            relationTableTsKey: tableConfig.tsName,
            selection
          }];
          const needsSubquery = limit !== void 0 || offset !== void 0 || orderBy.length > 0;
          if (needsSubquery) {
            result = this.buildSelectQuery({
              table: aliasedTable(table, tableAlias),
              fields: {},
              fieldsFlat: [
                {
                  path: [],
                  field: sql.raw("*")
                }
              ],
              where,
              limit,
              offset,
              orderBy,
              setOperators: []
            });
            where = void 0;
            limit = void 0;
            offset = void 0;
            orderBy = void 0;
          } else {
            result = aliasedTable(table, tableAlias);
          }
          result = this.buildSelectQuery({
            table: is(result, SQLiteTable) ? result : new Subquery(result, {}, tableAlias),
            fields: {},
            fieldsFlat: nestedSelection.map(({ field: field2 }) => ({
              path: [],
              field: is(field2, Column) ? aliasedTableColumn(field2, tableAlias) : field2
            })),
            joins,
            where,
            limit,
            offset,
            orderBy,
            setOperators: []
          });
        } else {
          result = this.buildSelectQuery({
            table: aliasedTable(table, tableAlias),
            fields: {},
            fieldsFlat: selection.map(({ field }) => ({
              path: [],
              field: is(field, Column) ? aliasedTableColumn(field, tableAlias) : field
            })),
            joins,
            where,
            limit,
            offset,
            orderBy,
            setOperators: []
          });
        }
        return {
          tableTsKey: tableConfig.tsName,
          sql: result,
          selection
        };
      }
    };
    SQLiteSyncDialect = class extends SQLiteDialect {
      static {
        __name(this, "SQLiteSyncDialect");
      }
      static {
        __name2(this, "SQLiteSyncDialect");
      }
      static [entityKind] = "SQLiteSyncDialect";
      migrate(migrations, session, config) {
        const migrationsTable = config === void 0 ? "__drizzle_migrations" : typeof config === "string" ? "__drizzle_migrations" : config.migrationsTable ?? "__drizzle_migrations";
        const migrationTableCreate = sql`
			CREATE TABLE IF NOT EXISTS ${sql.identifier(migrationsTable)} (
				id SERIAL PRIMARY KEY,
				hash text NOT NULL,
				created_at numeric
			)
		`;
        session.run(migrationTableCreate);
        const dbMigrations = session.values(
          sql`SELECT id, hash, created_at FROM ${sql.identifier(migrationsTable)} ORDER BY created_at DESC LIMIT 1`
        );
        const lastDbMigration = dbMigrations[0] ?? void 0;
        session.run(sql`BEGIN`);
        try {
          for (const migration of migrations) {
            if (!lastDbMigration || Number(lastDbMigration[2]) < migration.folderMillis) {
              for (const stmt of migration.sql) {
                session.run(sql.raw(stmt));
              }
              session.run(
                sql`INSERT INTO ${sql.identifier(migrationsTable)} ("hash", "created_at") VALUES(${migration.hash}, ${migration.folderMillis})`
              );
            }
          }
          session.run(sql`COMMIT`);
        } catch (e2) {
          session.run(sql`ROLLBACK`);
          throw e2;
        }
      }
    };
    SQLiteAsyncDialect = class extends SQLiteDialect {
      static {
        __name(this, "SQLiteAsyncDialect");
      }
      static {
        __name2(this, "SQLiteAsyncDialect");
      }
      static [entityKind] = "SQLiteAsyncDialect";
      async migrate(migrations, session, config) {
        const migrationsTable = config === void 0 ? "__drizzle_migrations" : typeof config === "string" ? "__drizzle_migrations" : config.migrationsTable ?? "__drizzle_migrations";
        const migrationTableCreate = sql`
			CREATE TABLE IF NOT EXISTS ${sql.identifier(migrationsTable)} (
				id SERIAL PRIMARY KEY,
				hash text NOT NULL,
				created_at numeric
			)
		`;
        await session.run(migrationTableCreate);
        const dbMigrations = await session.values(
          sql`SELECT id, hash, created_at FROM ${sql.identifier(migrationsTable)} ORDER BY created_at DESC LIMIT 1`
        );
        const lastDbMigration = dbMigrations[0] ?? void 0;
        await session.transaction(async (tx) => {
          for (const migration of migrations) {
            if (!lastDbMigration || Number(lastDbMigration[2]) < migration.folderMillis) {
              for (const stmt of migration.sql) {
                await tx.run(sql.raw(stmt));
              }
              await tx.run(
                sql`INSERT INTO ${sql.identifier(migrationsTable)} ("hash", "created_at") VALUES(${migration.hash}, ${migration.folderMillis})`
              );
            }
          }
        });
      }
    };
  }
});
var TypedQueryBuilder;
var init_query_builder = __esm({
  "../node_modules/drizzle-orm/query-builders/query-builder.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_entity();
    TypedQueryBuilder = class {
      static {
        __name(this, "TypedQueryBuilder");
      }
      static {
        __name2(this, "TypedQueryBuilder");
      }
      static [entityKind] = "TypedQueryBuilder";
      /** @internal */
      getSelectedFields() {
        return this._.selectedFields;
      }
    };
  }
});
function createSetOperator(type, isAll) {
  return (leftSelect, rightSelect, ...restSelects) => {
    const setOperators = [rightSelect, ...restSelects].map((select) => ({
      type,
      isAll,
      rightSelect: select
    }));
    for (const setOperator of setOperators) {
      if (!haveSameKeys(leftSelect.getSelectedFields(), setOperator.rightSelect.getSelectedFields())) {
        throw new Error(
          "Set operator error (union / intersect / except): selected fields are not the same or are in a different order"
        );
      }
    }
    return leftSelect.addSetOperators(setOperators);
  };
}
__name(createSetOperator, "createSetOperator");
var SQLiteSelectBuilder;
var SQLiteSelectQueryBuilderBase;
var SQLiteSelectBase;
var getSQLiteSetOperators;
var union;
var unionAll;
var intersect;
var except;
var init_select2 = __esm({
  "../node_modules/drizzle-orm/sqlite-core/query-builders/select.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_entity();
    init_query_builder();
    init_query_promise();
    init_selection_proxy();
    init_sql();
    init_subquery();
    init_table();
    init_utils();
    init_view_common();
    init_view_base();
    SQLiteSelectBuilder = class {
      static {
        __name(this, "SQLiteSelectBuilder");
      }
      static {
        __name2(this, "SQLiteSelectBuilder");
      }
      static [entityKind] = "SQLiteSelectBuilder";
      fields;
      session;
      dialect;
      withList;
      distinct;
      constructor(config) {
        this.fields = config.fields;
        this.session = config.session;
        this.dialect = config.dialect;
        this.withList = config.withList;
        this.distinct = config.distinct;
      }
      from(source) {
        const isPartialSelect = !!this.fields;
        let fields;
        if (this.fields) {
          fields = this.fields;
        } else if (is(source, Subquery)) {
          fields = Object.fromEntries(
            Object.keys(source._.selectedFields).map((key) => [key, source[key]])
          );
        } else if (is(source, SQLiteViewBase)) {
          fields = source[ViewBaseConfig].selectedFields;
        } else if (is(source, SQL)) {
          fields = {};
        } else {
          fields = getTableColumns(source);
        }
        return new SQLiteSelectBase({
          table: source,
          fields,
          isPartialSelect,
          session: this.session,
          dialect: this.dialect,
          withList: this.withList,
          distinct: this.distinct
        });
      }
    };
    SQLiteSelectQueryBuilderBase = class extends TypedQueryBuilder {
      static {
        __name(this, "SQLiteSelectQueryBuilderBase");
      }
      static {
        __name2(this, "SQLiteSelectQueryBuilderBase");
      }
      static [entityKind] = "SQLiteSelectQueryBuilder";
      _;
      /** @internal */
      config;
      joinsNotNullableMap;
      tableName;
      isPartialSelect;
      session;
      dialect;
      constructor({ table, fields, isPartialSelect, session, dialect, withList, distinct }) {
        super();
        this.config = {
          withList,
          table,
          fields: { ...fields },
          distinct,
          setOperators: []
        };
        this.isPartialSelect = isPartialSelect;
        this.session = session;
        this.dialect = dialect;
        this._ = {
          selectedFields: fields
        };
        this.tableName = getTableLikeName(table);
        this.joinsNotNullableMap = typeof this.tableName === "string" ? { [this.tableName]: true } : {};
      }
      createJoin(joinType) {
        return (table, on) => {
          const baseTableName = this.tableName;
          const tableName = getTableLikeName(table);
          if (typeof tableName === "string" && this.config.joins?.some((join) => join.alias === tableName)) {
            throw new Error(`Alias "${tableName}" is already used in this query`);
          }
          if (!this.isPartialSelect) {
            if (Object.keys(this.joinsNotNullableMap).length === 1 && typeof baseTableName === "string") {
              this.config.fields = {
                [baseTableName]: this.config.fields
              };
            }
            if (typeof tableName === "string" && !is(table, SQL)) {
              const selection = is(table, Subquery) ? table._.selectedFields : is(table, View) ? table[ViewBaseConfig].selectedFields : table[Table.Symbol.Columns];
              this.config.fields[tableName] = selection;
            }
          }
          if (typeof on === "function") {
            on = on(
              new Proxy(
                this.config.fields,
                new SelectionProxyHandler({ sqlAliasedBehavior: "sql", sqlBehavior: "sql" })
              )
            );
          }
          if (!this.config.joins) {
            this.config.joins = [];
          }
          this.config.joins.push({ on, table, joinType, alias: tableName });
          if (typeof tableName === "string") {
            switch (joinType) {
              case "left": {
                this.joinsNotNullableMap[tableName] = false;
                break;
              }
              case "right": {
                this.joinsNotNullableMap = Object.fromEntries(
                  Object.entries(this.joinsNotNullableMap).map(([key]) => [key, false])
                );
                this.joinsNotNullableMap[tableName] = true;
                break;
              }
              case "inner": {
                this.joinsNotNullableMap[tableName] = true;
                break;
              }
              case "full": {
                this.joinsNotNullableMap = Object.fromEntries(
                  Object.entries(this.joinsNotNullableMap).map(([key]) => [key, false])
                );
                this.joinsNotNullableMap[tableName] = false;
                break;
              }
            }
          }
          return this;
        };
      }
      /**
       * Executes a `left join` operation by adding another table to the current query.
       *
       * Calling this method associates each row of the table with the corresponding row from the joined table, if a match is found. If no matching row exists, it sets all columns of the joined table to null.
       *
       * See docs: {@link https://orm.drizzle.team/docs/joins#left-join}
       *
       * @param table the table to join.
       * @param on the `on` clause.
       *
       * @example
       *
       * ```ts
       * // Select all users and their pets
       * const usersWithPets: { user: User; pets: Pet | null }[] = await db.select()
       *   .from(users)
       *   .leftJoin(pets, eq(users.id, pets.ownerId))
       *
       * // Select userId and petId
       * const usersIdsAndPetIds: { userId: number; petId: number | null }[] = await db.select({
       *   userId: users.id,
       *   petId: pets.id,
       * })
       *   .from(users)
       *   .leftJoin(pets, eq(users.id, pets.ownerId))
       * ```
       */
      leftJoin = this.createJoin("left");
      /**
       * Executes a `right join` operation by adding another table to the current query.
       *
       * Calling this method associates each row of the joined table with the corresponding row from the main table, if a match is found. If no matching row exists, it sets all columns of the main table to null.
       *
       * See docs: {@link https://orm.drizzle.team/docs/joins#right-join}
       *
       * @param table the table to join.
       * @param on the `on` clause.
       *
       * @example
       *
       * ```ts
       * // Select all users and their pets
       * const usersWithPets: { user: User | null; pets: Pet }[] = await db.select()
       *   .from(users)
       *   .rightJoin(pets, eq(users.id, pets.ownerId))
       *
       * // Select userId and petId
       * const usersIdsAndPetIds: { userId: number | null; petId: number }[] = await db.select({
       *   userId: users.id,
       *   petId: pets.id,
       * })
       *   .from(users)
       *   .rightJoin(pets, eq(users.id, pets.ownerId))
       * ```
       */
      rightJoin = this.createJoin("right");
      /**
       * Executes an `inner join` operation, creating a new table by combining rows from two tables that have matching values.
       *
       * Calling this method retrieves rows that have corresponding entries in both joined tables. Rows without matching entries in either table are excluded, resulting in a table that includes only matching pairs.
       *
       * See docs: {@link https://orm.drizzle.team/docs/joins#inner-join}
       *
       * @param table the table to join.
       * @param on the `on` clause.
       *
       * @example
       *
       * ```ts
       * // Select all users and their pets
       * const usersWithPets: { user: User; pets: Pet }[] = await db.select()
       *   .from(users)
       *   .innerJoin(pets, eq(users.id, pets.ownerId))
       *
       * // Select userId and petId
       * const usersIdsAndPetIds: { userId: number; petId: number }[] = await db.select({
       *   userId: users.id,
       *   petId: pets.id,
       * })
       *   .from(users)
       *   .innerJoin(pets, eq(users.id, pets.ownerId))
       * ```
       */
      innerJoin = this.createJoin("inner");
      /**
       * Executes a `full join` operation by combining rows from two tables into a new table.
       *
       * Calling this method retrieves all rows from both main and joined tables, merging rows with matching values and filling in `null` for non-matching columns.
       *
       * See docs: {@link https://orm.drizzle.team/docs/joins#full-join}
       *
       * @param table the table to join.
       * @param on the `on` clause.
       *
       * @example
       *
       * ```ts
       * // Select all users and their pets
       * const usersWithPets: { user: User | null; pets: Pet | null }[] = await db.select()
       *   .from(users)
       *   .fullJoin(pets, eq(users.id, pets.ownerId))
       *
       * // Select userId and petId
       * const usersIdsAndPetIds: { userId: number | null; petId: number | null }[] = await db.select({
       *   userId: users.id,
       *   petId: pets.id,
       * })
       *   .from(users)
       *   .fullJoin(pets, eq(users.id, pets.ownerId))
       * ```
       */
      fullJoin = this.createJoin("full");
      createSetOperator(type, isAll) {
        return (rightSelection) => {
          const rightSelect = typeof rightSelection === "function" ? rightSelection(getSQLiteSetOperators()) : rightSelection;
          if (!haveSameKeys(this.getSelectedFields(), rightSelect.getSelectedFields())) {
            throw new Error(
              "Set operator error (union / intersect / except): selected fields are not the same or are in a different order"
            );
          }
          this.config.setOperators.push({ type, isAll, rightSelect });
          return this;
        };
      }
      /**
       * Adds `union` set operator to the query.
       *
       * Calling this method will combine the result sets of the `select` statements and remove any duplicate rows that appear across them.
       *
       * See docs: {@link https://orm.drizzle.team/docs/set-operations#union}
       *
       * @example
       *
       * ```ts
       * // Select all unique names from customers and users tables
       * await db.select({ name: users.name })
       *   .from(users)
       *   .union(
       *     db.select({ name: customers.name }).from(customers)
       *   );
       * // or
       * import { union } from 'drizzle-orm/sqlite-core'
       *
       * await union(
       *   db.select({ name: users.name }).from(users),
       *   db.select({ name: customers.name }).from(customers)
       * );
       * ```
       */
      union = this.createSetOperator("union", false);
      /**
       * Adds `union all` set operator to the query.
       *
       * Calling this method will combine the result-set of the `select` statements and keep all duplicate rows that appear across them.
       *
       * See docs: {@link https://orm.drizzle.team/docs/set-operations#union-all}
       *
       * @example
       *
       * ```ts
       * // Select all transaction ids from both online and in-store sales
       * await db.select({ transaction: onlineSales.transactionId })
       *   .from(onlineSales)
       *   .unionAll(
       *     db.select({ transaction: inStoreSales.transactionId }).from(inStoreSales)
       *   );
       * // or
       * import { unionAll } from 'drizzle-orm/sqlite-core'
       *
       * await unionAll(
       *   db.select({ transaction: onlineSales.transactionId }).from(onlineSales),
       *   db.select({ transaction: inStoreSales.transactionId }).from(inStoreSales)
       * );
       * ```
       */
      unionAll = this.createSetOperator("union", true);
      /**
       * Adds `intersect` set operator to the query.
       *
       * Calling this method will retain only the rows that are present in both result sets and eliminate duplicates.
       *
       * See docs: {@link https://orm.drizzle.team/docs/set-operations#intersect}
       *
       * @example
       *
       * ```ts
       * // Select course names that are offered in both departments A and B
       * await db.select({ courseName: depA.courseName })
       *   .from(depA)
       *   .intersect(
       *     db.select({ courseName: depB.courseName }).from(depB)
       *   );
       * // or
       * import { intersect } from 'drizzle-orm/sqlite-core'
       *
       * await intersect(
       *   db.select({ courseName: depA.courseName }).from(depA),
       *   db.select({ courseName: depB.courseName }).from(depB)
       * );
       * ```
       */
      intersect = this.createSetOperator("intersect", false);
      /**
       * Adds `except` set operator to the query.
       *
       * Calling this method will retrieve all unique rows from the left query, except for the rows that are present in the result set of the right query.
       *
       * See docs: {@link https://orm.drizzle.team/docs/set-operations#except}
       *
       * @example
       *
       * ```ts
       * // Select all courses offered in department A but not in department B
       * await db.select({ courseName: depA.courseName })
       *   .from(depA)
       *   .except(
       *     db.select({ courseName: depB.courseName }).from(depB)
       *   );
       * // or
       * import { except } from 'drizzle-orm/sqlite-core'
       *
       * await except(
       *   db.select({ courseName: depA.courseName }).from(depA),
       *   db.select({ courseName: depB.courseName }).from(depB)
       * );
       * ```
       */
      except = this.createSetOperator("except", false);
      /** @internal */
      addSetOperators(setOperators) {
        this.config.setOperators.push(...setOperators);
        return this;
      }
      /**
       * Adds a `where` clause to the query.
       *
       * Calling this method will select only those rows that fulfill a specified condition.
       *
       * See docs: {@link https://orm.drizzle.team/docs/select#filtering}
       *
       * @param where the `where` clause.
       *
       * @example
       * You can use conditional operators and `sql function` to filter the rows to be selected.
       *
       * ```ts
       * // Select all cars with green color
       * await db.select().from(cars).where(eq(cars.color, 'green'));
       * // or
       * await db.select().from(cars).where(sql`${cars.color} = 'green'`)
       * ```
       *
       * You can logically combine conditional operators with `and()` and `or()` operators:
       *
       * ```ts
       * // Select all BMW cars with a green color
       * await db.select().from(cars).where(and(eq(cars.color, 'green'), eq(cars.brand, 'BMW')));
       *
       * // Select all cars with the green or blue color
       * await db.select().from(cars).where(or(eq(cars.color, 'green'), eq(cars.color, 'blue')));
       * ```
       */
      where(where) {
        if (typeof where === "function") {
          where = where(
            new Proxy(
              this.config.fields,
              new SelectionProxyHandler({ sqlAliasedBehavior: "sql", sqlBehavior: "sql" })
            )
          );
        }
        this.config.where = where;
        return this;
      }
      /**
       * Adds a `having` clause to the query.
       *
       * Calling this method will select only those rows that fulfill a specified condition. It is typically used with aggregate functions to filter the aggregated data based on a specified condition.
       *
       * See docs: {@link https://orm.drizzle.team/docs/select#aggregations}
       *
       * @param having the `having` clause.
       *
       * @example
       *
       * ```ts
       * // Select all brands with more than one car
       * await db.select({
       * 	brand: cars.brand,
       * 	count: sql<number>`cast(count(${cars.id}) as int)`,
       * })
       *   .from(cars)
       *   .groupBy(cars.brand)
       *   .having(({ count }) => gt(count, 1));
       * ```
       */
      having(having) {
        if (typeof having === "function") {
          having = having(
            new Proxy(
              this.config.fields,
              new SelectionProxyHandler({ sqlAliasedBehavior: "sql", sqlBehavior: "sql" })
            )
          );
        }
        this.config.having = having;
        return this;
      }
      groupBy(...columns) {
        if (typeof columns[0] === "function") {
          const groupBy = columns[0](
            new Proxy(
              this.config.fields,
              new SelectionProxyHandler({ sqlAliasedBehavior: "alias", sqlBehavior: "sql" })
            )
          );
          this.config.groupBy = Array.isArray(groupBy) ? groupBy : [groupBy];
        } else {
          this.config.groupBy = columns;
        }
        return this;
      }
      orderBy(...columns) {
        if (typeof columns[0] === "function") {
          const orderBy = columns[0](
            new Proxy(
              this.config.fields,
              new SelectionProxyHandler({ sqlAliasedBehavior: "alias", sqlBehavior: "sql" })
            )
          );
          const orderByArray = Array.isArray(orderBy) ? orderBy : [orderBy];
          if (this.config.setOperators.length > 0) {
            this.config.setOperators.at(-1).orderBy = orderByArray;
          } else {
            this.config.orderBy = orderByArray;
          }
        } else {
          const orderByArray = columns;
          if (this.config.setOperators.length > 0) {
            this.config.setOperators.at(-1).orderBy = orderByArray;
          } else {
            this.config.orderBy = orderByArray;
          }
        }
        return this;
      }
      /**
       * Adds a `limit` clause to the query.
       *
       * Calling this method will set the maximum number of rows that will be returned by this query.
       *
       * See docs: {@link https://orm.drizzle.team/docs/select#limit--offset}
       *
       * @param limit the `limit` clause.
       *
       * @example
       *
       * ```ts
       * // Get the first 10 people from this query.
       * await db.select().from(people).limit(10);
       * ```
       */
      limit(limit) {
        if (this.config.setOperators.length > 0) {
          this.config.setOperators.at(-1).limit = limit;
        } else {
          this.config.limit = limit;
        }
        return this;
      }
      /**
       * Adds an `offset` clause to the query.
       *
       * Calling this method will skip a number of rows when returning results from this query.
       *
       * See docs: {@link https://orm.drizzle.team/docs/select#limit--offset}
       *
       * @param offset the `offset` clause.
       *
       * @example
       *
       * ```ts
       * // Get the 10th-20th people from this query.
       * await db.select().from(people).offset(10).limit(10);
       * ```
       */
      offset(offset) {
        if (this.config.setOperators.length > 0) {
          this.config.setOperators.at(-1).offset = offset;
        } else {
          this.config.offset = offset;
        }
        return this;
      }
      /** @internal */
      getSQL() {
        return this.dialect.buildSelectQuery(this.config);
      }
      toSQL() {
        const { typings: _typings, ...rest } = this.dialect.sqlToQuery(this.getSQL());
        return rest;
      }
      as(alias) {
        return new Proxy(
          new Subquery(this.getSQL(), this.config.fields, alias),
          new SelectionProxyHandler({ alias, sqlAliasedBehavior: "alias", sqlBehavior: "error" })
        );
      }
      /** @internal */
      getSelectedFields() {
        return new Proxy(
          this.config.fields,
          new SelectionProxyHandler({ alias: this.tableName, sqlAliasedBehavior: "alias", sqlBehavior: "error" })
        );
      }
      $dynamic() {
        return this;
      }
    };
    SQLiteSelectBase = class extends SQLiteSelectQueryBuilderBase {
      static {
        __name(this, "SQLiteSelectBase");
      }
      static {
        __name2(this, "SQLiteSelectBase");
      }
      static [entityKind] = "SQLiteSelect";
      /** @internal */
      _prepare(isOneTimeQuery = true) {
        if (!this.session) {
          throw new Error("Cannot execute a query on a query builder. Please use a database instance instead.");
        }
        const fieldsList = orderSelectedFields(this.config.fields);
        const query = this.session[isOneTimeQuery ? "prepareOneTimeQuery" : "prepareQuery"](
          this.dialect.sqlToQuery(this.getSQL()),
          fieldsList,
          "all",
          true
        );
        query.joinsNotNullableMap = this.joinsNotNullableMap;
        return query;
      }
      prepare() {
        return this._prepare(false);
      }
      run = /* @__PURE__ */ __name2((placeholderValues) => {
        return this._prepare().run(placeholderValues);
      }, "run");
      all = /* @__PURE__ */ __name2((placeholderValues) => {
        return this._prepare().all(placeholderValues);
      }, "all");
      get = /* @__PURE__ */ __name2((placeholderValues) => {
        return this._prepare().get(placeholderValues);
      }, "get");
      values = /* @__PURE__ */ __name2((placeholderValues) => {
        return this._prepare().values(placeholderValues);
      }, "values");
      async execute() {
        return this.all();
      }
    };
    applyMixins(SQLiteSelectBase, [QueryPromise]);
    __name2(createSetOperator, "createSetOperator");
    getSQLiteSetOperators = /* @__PURE__ */ __name2(() => ({
      union,
      unionAll,
      intersect,
      except
    }), "getSQLiteSetOperators");
    union = createSetOperator("union", false);
    unionAll = createSetOperator("union", true);
    intersect = createSetOperator("intersect", false);
    except = createSetOperator("except", false);
  }
});
var QueryBuilder;
var init_query_builder2 = __esm({
  "../node_modules/drizzle-orm/sqlite-core/query-builders/query-builder.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_entity();
    init_selection_proxy();
    init_dialect();
    init_subquery();
    init_select2();
    QueryBuilder = class {
      static {
        __name(this, "QueryBuilder");
      }
      static {
        __name2(this, "QueryBuilder");
      }
      static [entityKind] = "SQLiteQueryBuilder";
      dialect;
      dialectConfig;
      constructor(dialect) {
        this.dialect = is(dialect, SQLiteDialect) ? dialect : void 0;
        this.dialectConfig = is(dialect, SQLiteDialect) ? void 0 : dialect;
      }
      $with = /* @__PURE__ */ __name2((alias, selection) => {
        const queryBuilder = this;
        const as = /* @__PURE__ */ __name2((qb) => {
          if (typeof qb === "function") {
            qb = qb(queryBuilder);
          }
          return new Proxy(
            new WithSubquery(
              qb.getSQL(),
              selection ?? ("getSelectedFields" in qb ? qb.getSelectedFields() ?? {} : {}),
              alias,
              true
            ),
            new SelectionProxyHandler({ alias, sqlAliasedBehavior: "alias", sqlBehavior: "error" })
          );
        }, "as");
        return { as };
      }, "$with");
      with(...queries) {
        const self2 = this;
        function select(fields) {
          return new SQLiteSelectBuilder({
            fields: fields ?? void 0,
            session: void 0,
            dialect: self2.getDialect(),
            withList: queries
          });
        }
        __name(select, "select");
        __name2(select, "select");
        function selectDistinct(fields) {
          return new SQLiteSelectBuilder({
            fields: fields ?? void 0,
            session: void 0,
            dialect: self2.getDialect(),
            withList: queries,
            distinct: true
          });
        }
        __name(selectDistinct, "selectDistinct");
        __name2(selectDistinct, "selectDistinct");
        return { select, selectDistinct };
      }
      select(fields) {
        return new SQLiteSelectBuilder({ fields: fields ?? void 0, session: void 0, dialect: this.getDialect() });
      }
      selectDistinct(fields) {
        return new SQLiteSelectBuilder({
          fields: fields ?? void 0,
          session: void 0,
          dialect: this.getDialect(),
          distinct: true
        });
      }
      // Lazy load dialect to avoid circular dependency
      getDialect() {
        if (!this.dialect) {
          this.dialect = new SQLiteSyncDialect(this.dialectConfig);
        }
        return this.dialect;
      }
    };
  }
});
var SQLiteInsertBuilder;
var SQLiteInsertBase;
var init_insert = __esm({
  "../node_modules/drizzle-orm/sqlite-core/query-builders/insert.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_entity();
    init_query_promise();
    init_sql();
    init_table2();
    init_table();
    init_utils();
    init_query_builder2();
    SQLiteInsertBuilder = class {
      static {
        __name(this, "SQLiteInsertBuilder");
      }
      static {
        __name2(this, "SQLiteInsertBuilder");
      }
      constructor(table, session, dialect, withList) {
        this.table = table;
        this.session = session;
        this.dialect = dialect;
        this.withList = withList;
      }
      static [entityKind] = "SQLiteInsertBuilder";
      values(values) {
        values = Array.isArray(values) ? values : [values];
        if (values.length === 0) {
          throw new Error("values() must be called with at least one value");
        }
        const mappedValues = values.map((entry) => {
          const result = {};
          const cols = this.table[Table.Symbol.Columns];
          for (const colKey of Object.keys(entry)) {
            const colValue = entry[colKey];
            result[colKey] = is(colValue, SQL) ? colValue : new Param(colValue, cols[colKey]);
          }
          return result;
        });
        return new SQLiteInsertBase(this.table, mappedValues, this.session, this.dialect, this.withList);
      }
      select(selectQuery) {
        const select = typeof selectQuery === "function" ? selectQuery(new QueryBuilder()) : selectQuery;
        if (!is(select, SQL) && !haveSameKeys(this.table[Columns], select._.selectedFields)) {
          throw new Error(
            "Insert select error: selected fields are not the same or are in a different order compared to the table definition"
          );
        }
        return new SQLiteInsertBase(this.table, select, this.session, this.dialect, this.withList, true);
      }
    };
    SQLiteInsertBase = class extends QueryPromise {
      static {
        __name(this, "SQLiteInsertBase");
      }
      static {
        __name2(this, "SQLiteInsertBase");
      }
      constructor(table, values, session, dialect, withList, select) {
        super();
        this.session = session;
        this.dialect = dialect;
        this.config = { table, values, withList, select };
      }
      static [entityKind] = "SQLiteInsert";
      /** @internal */
      config;
      returning(fields = this.config.table[SQLiteTable.Symbol.Columns]) {
        this.config.returning = orderSelectedFields(fields);
        return this;
      }
      /**
       * Adds an `on conflict do nothing` clause to the query.
       *
       * Calling this method simply avoids inserting a row as its alternative action.
       *
       * See docs: {@link https://orm.drizzle.team/docs/insert#on-conflict-do-nothing}
       *
       * @param config The `target` and `where` clauses.
       *
       * @example
       * ```ts
       * // Insert one row and cancel the insert if there's a conflict
       * await db.insert(cars)
       *   .values({ id: 1, brand: 'BMW' })
       *   .onConflictDoNothing();
       *
       * // Explicitly specify conflict target
       * await db.insert(cars)
       *   .values({ id: 1, brand: 'BMW' })
       *   .onConflictDoNothing({ target: cars.id });
       * ```
       */
      onConflictDoNothing(config = {}) {
        if (!this.config.onConflict)
          this.config.onConflict = [];
        if (config.target === void 0) {
          this.config.onConflict.push(sql` on conflict do nothing`);
        } else {
          const targetSql = Array.isArray(config.target) ? sql`${config.target}` : sql`${[config.target]}`;
          const whereSql = config.where ? sql` where ${config.where}` : sql``;
          this.config.onConflict.push(sql` on conflict ${targetSql} do nothing${whereSql}`);
        }
        return this;
      }
      /**
       * Adds an `on conflict do update` clause to the query.
       *
       * Calling this method will update the existing row that conflicts with the row proposed for insertion as its alternative action.
       *
       * See docs: {@link https://orm.drizzle.team/docs/insert#upserts-and-conflicts}
       *
       * @param config The `target`, `set` and `where` clauses.
       *
       * @example
       * ```ts
       * // Update the row if there's a conflict
       * await db.insert(cars)
       *   .values({ id: 1, brand: 'BMW' })
       *   .onConflictDoUpdate({
       *     target: cars.id,
       *     set: { brand: 'Porsche' }
       *   });
       *
       * // Upsert with 'where' clause
       * await db.insert(cars)
       *   .values({ id: 1, brand: 'BMW' })
       *   .onConflictDoUpdate({
       *     target: cars.id,
       *     set: { brand: 'newBMW' },
       *     where: sql`${cars.createdAt} > '2023-01-01'::date`,
       *   });
       * ```
       */
      onConflictDoUpdate(config) {
        if (config.where && (config.targetWhere || config.setWhere)) {
          throw new Error(
            'You cannot use both "where" and "targetWhere"/"setWhere" at the same time - "where" is deprecated, use "targetWhere" or "setWhere" instead.'
          );
        }
        if (!this.config.onConflict)
          this.config.onConflict = [];
        const whereSql = config.where ? sql` where ${config.where}` : void 0;
        const targetWhereSql = config.targetWhere ? sql` where ${config.targetWhere}` : void 0;
        const setWhereSql = config.setWhere ? sql` where ${config.setWhere}` : void 0;
        const targetSql = Array.isArray(config.target) ? sql`${config.target}` : sql`${[config.target]}`;
        const setSql = this.dialect.buildUpdateSet(this.config.table, mapUpdateSet(this.config.table, config.set));
        this.config.onConflict.push(
          sql` on conflict ${targetSql}${targetWhereSql} do update set ${setSql}${whereSql}${setWhereSql}`
        );
        return this;
      }
      /** @internal */
      getSQL() {
        return this.dialect.buildInsertQuery(this.config);
      }
      toSQL() {
        const { typings: _typings, ...rest } = this.dialect.sqlToQuery(this.getSQL());
        return rest;
      }
      /** @internal */
      _prepare(isOneTimeQuery = true) {
        return this.session[isOneTimeQuery ? "prepareOneTimeQuery" : "prepareQuery"](
          this.dialect.sqlToQuery(this.getSQL()),
          this.config.returning,
          this.config.returning ? "all" : "run",
          true
        );
      }
      prepare() {
        return this._prepare(false);
      }
      run = /* @__PURE__ */ __name2((placeholderValues) => {
        return this._prepare().run(placeholderValues);
      }, "run");
      all = /* @__PURE__ */ __name2((placeholderValues) => {
        return this._prepare().all(placeholderValues);
      }, "all");
      get = /* @__PURE__ */ __name2((placeholderValues) => {
        return this._prepare().get(placeholderValues);
      }, "get");
      values = /* @__PURE__ */ __name2((placeholderValues) => {
        return this._prepare().values(placeholderValues);
      }, "values");
      async execute() {
        return this.config.returning ? this.all() : this.run();
      }
      $dynamic() {
        return this;
      }
    };
  }
});
var init_select_types = __esm({
  "../node_modules/drizzle-orm/sqlite-core/query-builders/select.types.js"() {
    init_functionsRoutes_0_8044054200943971();
  }
});
var SQLiteUpdateBuilder;
var SQLiteUpdateBase;
var init_update = __esm({
  "../node_modules/drizzle-orm/sqlite-core/query-builders/update.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_entity();
    init_query_promise();
    init_selection_proxy();
    init_table2();
    init_subquery();
    init_table();
    init_utils();
    init_view_common();
    init_view_base();
    SQLiteUpdateBuilder = class {
      static {
        __name(this, "SQLiteUpdateBuilder");
      }
      static {
        __name2(this, "SQLiteUpdateBuilder");
      }
      constructor(table, session, dialect, withList) {
        this.table = table;
        this.session = session;
        this.dialect = dialect;
        this.withList = withList;
      }
      static [entityKind] = "SQLiteUpdateBuilder";
      set(values) {
        return new SQLiteUpdateBase(
          this.table,
          mapUpdateSet(this.table, values),
          this.session,
          this.dialect,
          this.withList
        );
      }
    };
    SQLiteUpdateBase = class extends QueryPromise {
      static {
        __name(this, "SQLiteUpdateBase");
      }
      static {
        __name2(this, "SQLiteUpdateBase");
      }
      constructor(table, set, session, dialect, withList) {
        super();
        this.session = session;
        this.dialect = dialect;
        this.config = { set, table, withList, joins: [] };
      }
      static [entityKind] = "SQLiteUpdate";
      /** @internal */
      config;
      from(source) {
        this.config.from = source;
        return this;
      }
      createJoin(joinType) {
        return (table, on) => {
          const tableName = getTableLikeName(table);
          if (typeof tableName === "string" && this.config.joins.some((join) => join.alias === tableName)) {
            throw new Error(`Alias "${tableName}" is already used in this query`);
          }
          if (typeof on === "function") {
            const from = this.config.from ? is(table, SQLiteTable) ? table[Table.Symbol.Columns] : is(table, Subquery) ? table._.selectedFields : is(table, SQLiteViewBase) ? table[ViewBaseConfig].selectedFields : void 0 : void 0;
            on = on(
              new Proxy(
                this.config.table[Table.Symbol.Columns],
                new SelectionProxyHandler({ sqlAliasedBehavior: "sql", sqlBehavior: "sql" })
              ),
              from && new Proxy(
                from,
                new SelectionProxyHandler({ sqlAliasedBehavior: "sql", sqlBehavior: "sql" })
              )
            );
          }
          this.config.joins.push({ on, table, joinType, alias: tableName });
          return this;
        };
      }
      leftJoin = this.createJoin("left");
      rightJoin = this.createJoin("right");
      innerJoin = this.createJoin("inner");
      fullJoin = this.createJoin("full");
      /**
       * Adds a 'where' clause to the query.
       *
       * Calling this method will update only those rows that fulfill a specified condition.
       *
       * See docs: {@link https://orm.drizzle.team/docs/update}
       *
       * @param where the 'where' clause.
       *
       * @example
       * You can use conditional operators and `sql function` to filter the rows to be updated.
       *
       * ```ts
       * // Update all cars with green color
       * db.update(cars).set({ color: 'red' })
       *   .where(eq(cars.color, 'green'));
       * // or
       * db.update(cars).set({ color: 'red' })
       *   .where(sql`${cars.color} = 'green'`)
       * ```
       *
       * You can logically combine conditional operators with `and()` and `or()` operators:
       *
       * ```ts
       * // Update all BMW cars with a green color
       * db.update(cars).set({ color: 'red' })
       *   .where(and(eq(cars.color, 'green'), eq(cars.brand, 'BMW')));
       *
       * // Update all cars with the green or blue color
       * db.update(cars).set({ color: 'red' })
       *   .where(or(eq(cars.color, 'green'), eq(cars.color, 'blue')));
       * ```
       */
      where(where) {
        this.config.where = where;
        return this;
      }
      orderBy(...columns) {
        if (typeof columns[0] === "function") {
          const orderBy = columns[0](
            new Proxy(
              this.config.table[Table.Symbol.Columns],
              new SelectionProxyHandler({ sqlAliasedBehavior: "alias", sqlBehavior: "sql" })
            )
          );
          const orderByArray = Array.isArray(orderBy) ? orderBy : [orderBy];
          this.config.orderBy = orderByArray;
        } else {
          const orderByArray = columns;
          this.config.orderBy = orderByArray;
        }
        return this;
      }
      limit(limit) {
        this.config.limit = limit;
        return this;
      }
      returning(fields = this.config.table[SQLiteTable.Symbol.Columns]) {
        this.config.returning = orderSelectedFields(fields);
        return this;
      }
      /** @internal */
      getSQL() {
        return this.dialect.buildUpdateQuery(this.config);
      }
      toSQL() {
        const { typings: _typings, ...rest } = this.dialect.sqlToQuery(this.getSQL());
        return rest;
      }
      /** @internal */
      _prepare(isOneTimeQuery = true) {
        return this.session[isOneTimeQuery ? "prepareOneTimeQuery" : "prepareQuery"](
          this.dialect.sqlToQuery(this.getSQL()),
          this.config.returning,
          this.config.returning ? "all" : "run",
          true
        );
      }
      prepare() {
        return this._prepare(false);
      }
      run = /* @__PURE__ */ __name2((placeholderValues) => {
        return this._prepare().run(placeholderValues);
      }, "run");
      all = /* @__PURE__ */ __name2((placeholderValues) => {
        return this._prepare().all(placeholderValues);
      }, "all");
      get = /* @__PURE__ */ __name2((placeholderValues) => {
        return this._prepare().get(placeholderValues);
      }, "get");
      values = /* @__PURE__ */ __name2((placeholderValues) => {
        return this._prepare().values(placeholderValues);
      }, "values");
      async execute() {
        return this.config.returning ? this.all() : this.run();
      }
      $dynamic() {
        return this;
      }
    };
  }
});
var init_query_builders = __esm({
  "../node_modules/drizzle-orm/sqlite-core/query-builders/index.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_delete();
    init_insert();
    init_query_builder2();
    init_select2();
    init_select_types();
    init_update();
  }
});
var SQLiteCountBuilder;
var init_count = __esm({
  "../node_modules/drizzle-orm/sqlite-core/query-builders/count.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_entity();
    init_sql();
    SQLiteCountBuilder = class _SQLiteCountBuilder extends SQL {
      static {
        __name(this, "_SQLiteCountBuilder");
      }
      static {
        __name2(this, "SQLiteCountBuilder");
      }
      constructor(params) {
        super(_SQLiteCountBuilder.buildEmbeddedCount(params.source, params.filters).queryChunks);
        this.params = params;
        this.session = params.session;
        this.sql = _SQLiteCountBuilder.buildCount(
          params.source,
          params.filters
        );
      }
      sql;
      static [entityKind] = "SQLiteCountBuilderAsync";
      [Symbol.toStringTag] = "SQLiteCountBuilderAsync";
      session;
      static buildEmbeddedCount(source, filters) {
        return sql`(select count(*) from ${source}${sql.raw(" where ").if(filters)}${filters})`;
      }
      static buildCount(source, filters) {
        return sql`select count(*) from ${source}${sql.raw(" where ").if(filters)}${filters}`;
      }
      then(onfulfilled, onrejected) {
        return Promise.resolve(this.session.count(this.sql)).then(
          onfulfilled,
          onrejected
        );
      }
      catch(onRejected) {
        return this.then(void 0, onRejected);
      }
      finally(onFinally) {
        return this.then(
          (value) => {
            onFinally?.();
            return value;
          },
          (reason) => {
            onFinally?.();
            throw reason;
          }
        );
      }
    };
  }
});
var RelationalQueryBuilder;
var SQLiteRelationalQuery;
var SQLiteSyncRelationalQuery;
var init_query = __esm({
  "../node_modules/drizzle-orm/sqlite-core/query-builders/query.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_entity();
    init_query_promise();
    init_relations();
    RelationalQueryBuilder = class {
      static {
        __name(this, "RelationalQueryBuilder");
      }
      static {
        __name2(this, "RelationalQueryBuilder");
      }
      constructor(mode, fullSchema, schema, tableNamesMap, table, tableConfig, dialect, session) {
        this.mode = mode;
        this.fullSchema = fullSchema;
        this.schema = schema;
        this.tableNamesMap = tableNamesMap;
        this.table = table;
        this.tableConfig = tableConfig;
        this.dialect = dialect;
        this.session = session;
      }
      static [entityKind] = "SQLiteAsyncRelationalQueryBuilder";
      findMany(config) {
        return this.mode === "sync" ? new SQLiteSyncRelationalQuery(
          this.fullSchema,
          this.schema,
          this.tableNamesMap,
          this.table,
          this.tableConfig,
          this.dialect,
          this.session,
          config ? config : {},
          "many"
        ) : new SQLiteRelationalQuery(
          this.fullSchema,
          this.schema,
          this.tableNamesMap,
          this.table,
          this.tableConfig,
          this.dialect,
          this.session,
          config ? config : {},
          "many"
        );
      }
      findFirst(config) {
        return this.mode === "sync" ? new SQLiteSyncRelationalQuery(
          this.fullSchema,
          this.schema,
          this.tableNamesMap,
          this.table,
          this.tableConfig,
          this.dialect,
          this.session,
          config ? { ...config, limit: 1 } : { limit: 1 },
          "first"
        ) : new SQLiteRelationalQuery(
          this.fullSchema,
          this.schema,
          this.tableNamesMap,
          this.table,
          this.tableConfig,
          this.dialect,
          this.session,
          config ? { ...config, limit: 1 } : { limit: 1 },
          "first"
        );
      }
    };
    SQLiteRelationalQuery = class extends QueryPromise {
      static {
        __name(this, "SQLiteRelationalQuery");
      }
      static {
        __name2(this, "SQLiteRelationalQuery");
      }
      constructor(fullSchema, schema, tableNamesMap, table, tableConfig, dialect, session, config, mode) {
        super();
        this.fullSchema = fullSchema;
        this.schema = schema;
        this.tableNamesMap = tableNamesMap;
        this.table = table;
        this.tableConfig = tableConfig;
        this.dialect = dialect;
        this.session = session;
        this.config = config;
        this.mode = mode;
      }
      static [entityKind] = "SQLiteAsyncRelationalQuery";
      /** @internal */
      mode;
      /** @internal */
      getSQL() {
        return this.dialect.buildRelationalQuery({
          fullSchema: this.fullSchema,
          schema: this.schema,
          tableNamesMap: this.tableNamesMap,
          table: this.table,
          tableConfig: this.tableConfig,
          queryConfig: this.config,
          tableAlias: this.tableConfig.tsName
        }).sql;
      }
      /** @internal */
      _prepare(isOneTimeQuery = false) {
        const { query, builtQuery } = this._toSQL();
        return this.session[isOneTimeQuery ? "prepareOneTimeQuery" : "prepareQuery"](
          builtQuery,
          void 0,
          this.mode === "first" ? "get" : "all",
          true,
          (rawRows, mapColumnValue) => {
            const rows = rawRows.map(
              (row) => mapRelationalRow(this.schema, this.tableConfig, row, query.selection, mapColumnValue)
            );
            if (this.mode === "first") {
              return rows[0];
            }
            return rows;
          }
        );
      }
      prepare() {
        return this._prepare(false);
      }
      _toSQL() {
        const query = this.dialect.buildRelationalQuery({
          fullSchema: this.fullSchema,
          schema: this.schema,
          tableNamesMap: this.tableNamesMap,
          table: this.table,
          tableConfig: this.tableConfig,
          queryConfig: this.config,
          tableAlias: this.tableConfig.tsName
        });
        const builtQuery = this.dialect.sqlToQuery(query.sql);
        return { query, builtQuery };
      }
      toSQL() {
        return this._toSQL().builtQuery;
      }
      /** @internal */
      executeRaw() {
        if (this.mode === "first") {
          return this._prepare(false).get();
        }
        return this._prepare(false).all();
      }
      async execute() {
        return this.executeRaw();
      }
    };
    SQLiteSyncRelationalQuery = class extends SQLiteRelationalQuery {
      static {
        __name(this, "SQLiteSyncRelationalQuery");
      }
      static {
        __name2(this, "SQLiteSyncRelationalQuery");
      }
      static [entityKind] = "SQLiteSyncRelationalQuery";
      sync() {
        return this.executeRaw();
      }
    };
  }
});
var SQLiteRaw;
var init_raw = __esm({
  "../node_modules/drizzle-orm/sqlite-core/query-builders/raw.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_entity();
    init_query_promise();
    SQLiteRaw = class extends QueryPromise {
      static {
        __name(this, "SQLiteRaw");
      }
      static {
        __name2(this, "SQLiteRaw");
      }
      constructor(execute, getSQL, action, dialect, mapBatchResult) {
        super();
        this.execute = execute;
        this.getSQL = getSQL;
        this.dialect = dialect;
        this.mapBatchResult = mapBatchResult;
        this.config = { action };
      }
      static [entityKind] = "SQLiteRaw";
      /** @internal */
      config;
      getQuery() {
        return { ...this.dialect.sqlToQuery(this.getSQL()), method: this.config.action };
      }
      mapResult(result, isFromBatch) {
        return isFromBatch ? this.mapBatchResult(result) : result;
      }
      _prepare() {
        return this;
      }
      /** @internal */
      isResponseInArrayMode() {
        return false;
      }
    };
  }
});
var BaseSQLiteDatabase;
var init_db2 = __esm({
  "../node_modules/drizzle-orm/sqlite-core/db.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_entity();
    init_selection_proxy();
    init_sql();
    init_query_builders();
    init_subquery();
    init_count();
    init_query();
    init_raw();
    BaseSQLiteDatabase = class {
      static {
        __name(this, "BaseSQLiteDatabase");
      }
      static {
        __name2(this, "BaseSQLiteDatabase");
      }
      constructor(resultKind, dialect, session, schema) {
        this.resultKind = resultKind;
        this.dialect = dialect;
        this.session = session;
        this._ = schema ? {
          schema: schema.schema,
          fullSchema: schema.fullSchema,
          tableNamesMap: schema.tableNamesMap
        } : {
          schema: void 0,
          fullSchema: {},
          tableNamesMap: {}
        };
        this.query = {};
        const query = this.query;
        if (this._.schema) {
          for (const [tableName, columns] of Object.entries(this._.schema)) {
            query[tableName] = new RelationalQueryBuilder(
              resultKind,
              schema.fullSchema,
              this._.schema,
              this._.tableNamesMap,
              schema.fullSchema[tableName],
              columns,
              dialect,
              session
            );
          }
        }
      }
      static [entityKind] = "BaseSQLiteDatabase";
      query;
      /**
       * Creates a subquery that defines a temporary named result set as a CTE.
       *
       * It is useful for breaking down complex queries into simpler parts and for reusing the result set in subsequent parts of the query.
       *
       * See docs: {@link https://orm.drizzle.team/docs/select#with-clause}
       *
       * @param alias The alias for the subquery.
       *
       * Failure to provide an alias will result in a DrizzleTypeError, preventing the subquery from being referenced in other queries.
       *
       * @example
       *
       * ```ts
       * // Create a subquery with alias 'sq' and use it in the select query
       * const sq = db.$with('sq').as(db.select().from(users).where(eq(users.id, 42)));
       *
       * const result = await db.with(sq).select().from(sq);
       * ```
       *
       * To select arbitrary SQL values as fields in a CTE and reference them in other CTEs or in the main query, you need to add aliases to them:
       *
       * ```ts
       * // Select an arbitrary SQL value as a field in a CTE and reference it in the main query
       * const sq = db.$with('sq').as(db.select({
       *   name: sql<string>`upper(${users.name})`.as('name'),
       * })
       * .from(users));
       *
       * const result = await db.with(sq).select({ name: sq.name }).from(sq);
       * ```
       */
      $with = /* @__PURE__ */ __name2((alias, selection) => {
        const self2 = this;
        const as = /* @__PURE__ */ __name2((qb) => {
          if (typeof qb === "function") {
            qb = qb(new QueryBuilder(self2.dialect));
          }
          return new Proxy(
            new WithSubquery(
              qb.getSQL(),
              selection ?? ("getSelectedFields" in qb ? qb.getSelectedFields() ?? {} : {}),
              alias,
              true
            ),
            new SelectionProxyHandler({ alias, sqlAliasedBehavior: "alias", sqlBehavior: "error" })
          );
        }, "as");
        return { as };
      }, "$with");
      $count(source, filters) {
        return new SQLiteCountBuilder({ source, filters, session: this.session });
      }
      /**
       * Incorporates a previously defined CTE (using `$with`) into the main query.
       *
       * This method allows the main query to reference a temporary named result set.
       *
       * See docs: {@link https://orm.drizzle.team/docs/select#with-clause}
       *
       * @param queries The CTEs to incorporate into the main query.
       *
       * @example
       *
       * ```ts
       * // Define a subquery 'sq' as a CTE using $with
       * const sq = db.$with('sq').as(db.select().from(users).where(eq(users.id, 42)));
       *
       * // Incorporate the CTE 'sq' into the main query and select from it
       * const result = await db.with(sq).select().from(sq);
       * ```
       */
      with(...queries) {
        const self2 = this;
        function select(fields) {
          return new SQLiteSelectBuilder({
            fields: fields ?? void 0,
            session: self2.session,
            dialect: self2.dialect,
            withList: queries
          });
        }
        __name(select, "select");
        __name2(select, "select");
        function selectDistinct(fields) {
          return new SQLiteSelectBuilder({
            fields: fields ?? void 0,
            session: self2.session,
            dialect: self2.dialect,
            withList: queries,
            distinct: true
          });
        }
        __name(selectDistinct, "selectDistinct");
        __name2(selectDistinct, "selectDistinct");
        function update(table) {
          return new SQLiteUpdateBuilder(table, self2.session, self2.dialect, queries);
        }
        __name(update, "update");
        __name2(update, "update");
        function insert(into) {
          return new SQLiteInsertBuilder(into, self2.session, self2.dialect, queries);
        }
        __name(insert, "insert");
        __name2(insert, "insert");
        function delete_(from) {
          return new SQLiteDeleteBase(from, self2.session, self2.dialect, queries);
        }
        __name(delete_, "delete_");
        __name2(delete_, "delete_");
        return { select, selectDistinct, update, insert, delete: delete_ };
      }
      select(fields) {
        return new SQLiteSelectBuilder({ fields: fields ?? void 0, session: this.session, dialect: this.dialect });
      }
      selectDistinct(fields) {
        return new SQLiteSelectBuilder({
          fields: fields ?? void 0,
          session: this.session,
          dialect: this.dialect,
          distinct: true
        });
      }
      /**
       * Creates an update query.
       *
       * Calling this method without `.where()` clause will update all rows in a table. The `.where()` clause specifies which rows should be updated.
       *
       * Use `.set()` method to specify which values to update.
       *
       * See docs: {@link https://orm.drizzle.team/docs/update}
       *
       * @param table The table to update.
       *
       * @example
       *
       * ```ts
       * // Update all rows in the 'cars' table
       * await db.update(cars).set({ color: 'red' });
       *
       * // Update rows with filters and conditions
       * await db.update(cars).set({ color: 'red' }).where(eq(cars.brand, 'BMW'));
       *
       * // Update with returning clause
       * const updatedCar: Car[] = await db.update(cars)
       *   .set({ color: 'red' })
       *   .where(eq(cars.id, 1))
       *   .returning();
       * ```
       */
      update(table) {
        return new SQLiteUpdateBuilder(table, this.session, this.dialect);
      }
      /**
       * Creates an insert query.
       *
       * Calling this method will create new rows in a table. Use `.values()` method to specify which values to insert.
       *
       * See docs: {@link https://orm.drizzle.team/docs/insert}
       *
       * @param table The table to insert into.
       *
       * @example
       *
       * ```ts
       * // Insert one row
       * await db.insert(cars).values({ brand: 'BMW' });
       *
       * // Insert multiple rows
       * await db.insert(cars).values([{ brand: 'BMW' }, { brand: 'Porsche' }]);
       *
       * // Insert with returning clause
       * const insertedCar: Car[] = await db.insert(cars)
       *   .values({ brand: 'BMW' })
       *   .returning();
       * ```
       */
      insert(into) {
        return new SQLiteInsertBuilder(into, this.session, this.dialect);
      }
      /**
       * Creates a delete query.
       *
       * Calling this method without `.where()` clause will delete all rows in a table. The `.where()` clause specifies which rows should be deleted.
       *
       * See docs: {@link https://orm.drizzle.team/docs/delete}
       *
       * @param table The table to delete from.
       *
       * @example
       *
       * ```ts
       * // Delete all rows in the 'cars' table
       * await db.delete(cars);
       *
       * // Delete rows with filters and conditions
       * await db.delete(cars).where(eq(cars.color, 'green'));
       *
       * // Delete with returning clause
       * const deletedCar: Car[] = await db.delete(cars)
       *   .where(eq(cars.id, 1))
       *   .returning();
       * ```
       */
      delete(from) {
        return new SQLiteDeleteBase(from, this.session, this.dialect);
      }
      run(query) {
        const sequel = typeof query === "string" ? sql.raw(query) : query.getSQL();
        if (this.resultKind === "async") {
          return new SQLiteRaw(
            async () => this.session.run(sequel),
            () => sequel,
            "run",
            this.dialect,
            this.session.extractRawRunValueFromBatchResult.bind(this.session)
          );
        }
        return this.session.run(sequel);
      }
      all(query) {
        const sequel = typeof query === "string" ? sql.raw(query) : query.getSQL();
        if (this.resultKind === "async") {
          return new SQLiteRaw(
            async () => this.session.all(sequel),
            () => sequel,
            "all",
            this.dialect,
            this.session.extractRawAllValueFromBatchResult.bind(this.session)
          );
        }
        return this.session.all(sequel);
      }
      get(query) {
        const sequel = typeof query === "string" ? sql.raw(query) : query.getSQL();
        if (this.resultKind === "async") {
          return new SQLiteRaw(
            async () => this.session.get(sequel),
            () => sequel,
            "get",
            this.dialect,
            this.session.extractRawGetValueFromBatchResult.bind(this.session)
          );
        }
        return this.session.get(sequel);
      }
      values(query) {
        const sequel = typeof query === "string" ? sql.raw(query) : query.getSQL();
        if (this.resultKind === "async") {
          return new SQLiteRaw(
            async () => this.session.values(sequel),
            () => sequel,
            "values",
            this.dialect,
            this.session.extractRawValuesValueFromBatchResult.bind(this.session)
          );
        }
        return this.session.values(sequel);
      }
      transaction(transaction, config) {
        return this.session.transaction(transaction, config);
      }
    };
  }
});
var IndexBuilderOn;
var IndexBuilder;
var Index;
var init_indexes = __esm({
  "../node_modules/drizzle-orm/sqlite-core/indexes.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_entity();
    IndexBuilderOn = class {
      static {
        __name(this, "IndexBuilderOn");
      }
      static {
        __name2(this, "IndexBuilderOn");
      }
      constructor(name, unique) {
        this.name = name;
        this.unique = unique;
      }
      static [entityKind] = "SQLiteIndexBuilderOn";
      on(...columns) {
        return new IndexBuilder(this.name, columns, this.unique);
      }
    };
    IndexBuilder = class {
      static {
        __name(this, "IndexBuilder");
      }
      static {
        __name2(this, "IndexBuilder");
      }
      static [entityKind] = "SQLiteIndexBuilder";
      /** @internal */
      config;
      constructor(name, columns, unique) {
        this.config = {
          name,
          columns,
          unique,
          where: void 0
        };
      }
      /**
       * Condition for partial index.
       */
      where(condition) {
        this.config.where = condition;
        return this;
      }
      /** @internal */
      build(table) {
        return new Index(this.config, table);
      }
    };
    Index = class {
      static {
        __name(this, "Index");
      }
      static {
        __name2(this, "Index");
      }
      static [entityKind] = "SQLiteIndex";
      config;
      constructor(config, table) {
        this.config = { ...config, table };
      }
    };
  }
});
var PrimaryKeyBuilder2;
var PrimaryKey2;
var init_primary_keys2 = __esm({
  "../node_modules/drizzle-orm/sqlite-core/primary-keys.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_entity();
    init_table2();
    PrimaryKeyBuilder2 = class {
      static {
        __name(this, "PrimaryKeyBuilder2");
      }
      static {
        __name2(this, "PrimaryKeyBuilder");
      }
      static [entityKind] = "SQLitePrimaryKeyBuilder";
      /** @internal */
      columns;
      /** @internal */
      name;
      constructor(columns, name) {
        this.columns = columns;
        this.name = name;
      }
      /** @internal */
      build(table) {
        return new PrimaryKey2(table, this.columns, this.name);
      }
    };
    PrimaryKey2 = class {
      static {
        __name(this, "PrimaryKey2");
      }
      static {
        __name2(this, "PrimaryKey");
      }
      constructor(table, columns, name) {
        this.table = table;
        this.columns = columns;
        this.name = name;
      }
      static [entityKind] = "SQLitePrimaryKey";
      columns;
      name;
      getName() {
        return this.name ?? `${this.table[SQLiteTable.Symbol.Name]}_${this.columns.map((column) => column.name).join("_")}_pk`;
      }
    };
  }
});
var ExecuteResultSync;
var SQLitePreparedQuery;
var SQLiteSession;
var SQLiteTransaction;
var init_session = __esm({
  "../node_modules/drizzle-orm/sqlite-core/session.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_entity();
    init_errors();
    init_query_promise();
    init_db2();
    ExecuteResultSync = class extends QueryPromise {
      static {
        __name(this, "ExecuteResultSync");
      }
      static {
        __name2(this, "ExecuteResultSync");
      }
      constructor(resultCb) {
        super();
        this.resultCb = resultCb;
      }
      static [entityKind] = "ExecuteResultSync";
      async execute() {
        return this.resultCb();
      }
      sync() {
        return this.resultCb();
      }
    };
    SQLitePreparedQuery = class {
      static {
        __name(this, "SQLitePreparedQuery");
      }
      static {
        __name2(this, "SQLitePreparedQuery");
      }
      constructor(mode, executeMethod, query) {
        this.mode = mode;
        this.executeMethod = executeMethod;
        this.query = query;
      }
      static [entityKind] = "PreparedQuery";
      /** @internal */
      joinsNotNullableMap;
      getQuery() {
        return this.query;
      }
      mapRunResult(result, _isFromBatch) {
        return result;
      }
      mapAllResult(_result, _isFromBatch) {
        throw new Error("Not implemented");
      }
      mapGetResult(_result, _isFromBatch) {
        throw new Error("Not implemented");
      }
      execute(placeholderValues) {
        if (this.mode === "async") {
          return this[this.executeMethod](placeholderValues);
        }
        return new ExecuteResultSync(() => this[this.executeMethod](placeholderValues));
      }
      mapResult(response, isFromBatch) {
        switch (this.executeMethod) {
          case "run": {
            return this.mapRunResult(response, isFromBatch);
          }
          case "all": {
            return this.mapAllResult(response, isFromBatch);
          }
          case "get": {
            return this.mapGetResult(response, isFromBatch);
          }
        }
      }
    };
    SQLiteSession = class {
      static {
        __name(this, "SQLiteSession");
      }
      static {
        __name2(this, "SQLiteSession");
      }
      constructor(dialect) {
        this.dialect = dialect;
      }
      static [entityKind] = "SQLiteSession";
      prepareOneTimeQuery(query, fields, executeMethod, isResponseInArrayMode) {
        return this.prepareQuery(query, fields, executeMethod, isResponseInArrayMode);
      }
      run(query) {
        const staticQuery = this.dialect.sqlToQuery(query);
        try {
          return this.prepareOneTimeQuery(staticQuery, void 0, "run", false).run();
        } catch (err2) {
          throw new DrizzleError({ cause: err2, message: `Failed to run the query '${staticQuery.sql}'` });
        }
      }
      /** @internal */
      extractRawRunValueFromBatchResult(result) {
        return result;
      }
      all(query) {
        return this.prepareOneTimeQuery(this.dialect.sqlToQuery(query), void 0, "run", false).all();
      }
      /** @internal */
      extractRawAllValueFromBatchResult(_result) {
        throw new Error("Not implemented");
      }
      get(query) {
        return this.prepareOneTimeQuery(this.dialect.sqlToQuery(query), void 0, "run", false).get();
      }
      /** @internal */
      extractRawGetValueFromBatchResult(_result) {
        throw new Error("Not implemented");
      }
      values(query) {
        return this.prepareOneTimeQuery(this.dialect.sqlToQuery(query), void 0, "run", false).values();
      }
      async count(sql2) {
        const result = await this.values(sql2);
        return result[0][0];
      }
      /** @internal */
      extractRawValuesValueFromBatchResult(_result) {
        throw new Error("Not implemented");
      }
    };
    SQLiteTransaction = class extends BaseSQLiteDatabase {
      static {
        __name(this, "SQLiteTransaction");
      }
      static {
        __name2(this, "SQLiteTransaction");
      }
      constructor(resultType, dialect, session, schema, nestedIndex = 0) {
        super(resultType, dialect, session, schema);
        this.schema = schema;
        this.nestedIndex = nestedIndex;
      }
      static [entityKind] = "SQLiteTransaction";
      rollback() {
        throw new TransactionRollbackError();
      }
    };
  }
});
var init_subquery2 = __esm({
  "../node_modules/drizzle-orm/sqlite-core/subquery.js"() {
    init_functionsRoutes_0_8044054200943971();
  }
});
var init_utils2 = __esm({
  "../node_modules/drizzle-orm/sqlite-core/utils.js"() {
    init_functionsRoutes_0_8044054200943971();
  }
});
var ViewBuilderCore;
var ViewBuilder;
var ManualViewBuilder;
var SQLiteView;
var init_view = __esm({
  "../node_modules/drizzle-orm/sqlite-core/view.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_entity();
    init_selection_proxy();
    init_utils();
    init_query_builder2();
    init_table2();
    init_view_base();
    ViewBuilderCore = class {
      static {
        __name(this, "ViewBuilderCore");
      }
      static {
        __name2(this, "ViewBuilderCore");
      }
      constructor(name) {
        this.name = name;
      }
      static [entityKind] = "SQLiteViewBuilderCore";
      config = {};
    };
    ViewBuilder = class extends ViewBuilderCore {
      static {
        __name(this, "ViewBuilder");
      }
      static {
        __name2(this, "ViewBuilder");
      }
      static [entityKind] = "SQLiteViewBuilder";
      as(qb) {
        if (typeof qb === "function") {
          qb = qb(new QueryBuilder());
        }
        const selectionProxy = new SelectionProxyHandler({
          alias: this.name,
          sqlBehavior: "error",
          sqlAliasedBehavior: "alias",
          replaceOriginalName: true
        });
        const aliasedSelectedFields = qb.getSelectedFields();
        return new Proxy(
          new SQLiteView({
            // sqliteConfig: this.config,
            config: {
              name: this.name,
              schema: void 0,
              selectedFields: aliasedSelectedFields,
              query: qb.getSQL().inlineParams()
            }
          }),
          selectionProxy
        );
      }
    };
    ManualViewBuilder = class extends ViewBuilderCore {
      static {
        __name(this, "ManualViewBuilder");
      }
      static {
        __name2(this, "ManualViewBuilder");
      }
      static [entityKind] = "SQLiteManualViewBuilder";
      columns;
      constructor(name, columns) {
        super(name);
        this.columns = getTableColumns(sqliteTable(name, columns));
      }
      existing() {
        return new Proxy(
          new SQLiteView({
            config: {
              name: this.name,
              schema: void 0,
              selectedFields: this.columns,
              query: void 0
            }
          }),
          new SelectionProxyHandler({
            alias: this.name,
            sqlBehavior: "error",
            sqlAliasedBehavior: "alias",
            replaceOriginalName: true
          })
        );
      }
      as(query) {
        return new Proxy(
          new SQLiteView({
            config: {
              name: this.name,
              schema: void 0,
              selectedFields: this.columns,
              query: query.inlineParams()
            }
          }),
          new SelectionProxyHandler({
            alias: this.name,
            sqlBehavior: "error",
            sqlAliasedBehavior: "alias",
            replaceOriginalName: true
          })
        );
      }
    };
    SQLiteView = class extends SQLiteViewBase {
      static {
        __name(this, "SQLiteView");
      }
      static {
        __name2(this, "SQLiteView");
      }
      static [entityKind] = "SQLiteView";
      constructor({ config }) {
        super(config);
      }
    };
  }
});
var init_sqlite_core = __esm({
  "../node_modules/drizzle-orm/sqlite-core/index.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_alias2();
    init_checks();
    init_columns();
    init_db2();
    init_dialect();
    init_foreign_keys2();
    init_indexes();
    init_primary_keys2();
    init_query_builders();
    init_session();
    init_subquery2();
    init_table2();
    init_unique_constraint2();
    init_utils2();
    init_view();
  }
});
var init_expressions2 = __esm({
  "../node_modules/drizzle-orm/expressions.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_expressions();
  }
});
var ConsoleLogWriter;
var DefaultLogger;
var NoopLogger;
var init_logger = __esm({
  "../node_modules/drizzle-orm/logger.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_entity();
    ConsoleLogWriter = class {
      static {
        __name(this, "ConsoleLogWriter");
      }
      static {
        __name2(this, "ConsoleLogWriter");
      }
      static [entityKind] = "ConsoleLogWriter";
      write(message) {
        console.log(message);
      }
    };
    DefaultLogger = class {
      static {
        __name(this, "DefaultLogger");
      }
      static {
        __name2(this, "DefaultLogger");
      }
      static [entityKind] = "DefaultLogger";
      writer;
      constructor(config) {
        this.writer = config?.writer ?? new ConsoleLogWriter();
      }
      logQuery(query, params) {
        const stringifiedParams = params.map((p3) => {
          try {
            return JSON.stringify(p3);
          } catch {
            return String(p3);
          }
        });
        const paramsStr = stringifiedParams.length ? ` -- params: [${stringifiedParams.join(", ")}]` : "";
        this.writer.write(`Query: ${query}${paramsStr}`);
      }
    };
    NoopLogger = class {
      static {
        __name(this, "NoopLogger");
      }
      static {
        __name2(this, "NoopLogger");
      }
      static [entityKind] = "NoopLogger";
      logQuery() {
      }
    };
  }
});
var init_operations = __esm({
  "../node_modules/drizzle-orm/operations.js"() {
    init_functionsRoutes_0_8044054200943971();
  }
});
var init_drizzle_orm = __esm({
  "../node_modules/drizzle-orm/index.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_alias();
    init_column_builder();
    init_column();
    init_entity();
    init_errors();
    init_expressions2();
    init_logger();
    init_operations();
    init_query_promise();
    init_relations();
    init_sql2();
    init_subquery();
    init_table();
    init_utils();
    init_view_common();
  }
});
function setErrorMap(map) {
  overrideErrorMap = map;
}
__name(setErrorMap, "setErrorMap");
function getErrorMap() {
  return overrideErrorMap;
}
__name(getErrorMap, "getErrorMap");
function addIssueToContext(ctx, issueData) {
  const overrideMap = getErrorMap();
  const issue = makeIssue({
    issueData,
    data: ctx.data,
    path: ctx.path,
    errorMaps: [
      ctx.common.contextualErrorMap,
      // contextual error map is first priority
      ctx.schemaErrorMap,
      // then schema-bound map if available
      overrideMap,
      // then global override map
      overrideMap === errorMap ? void 0 : errorMap
      // then global default map
    ].filter((x22) => !!x22)
  });
  ctx.common.issues.push(issue);
}
__name(addIssueToContext, "addIssueToContext");
function __classPrivateFieldGet(receiver, state, kind, f3) {
  if (kind === "a" && !f3) throw new TypeError("Private accessor was defined without a getter");
  if (typeof state === "function" ? receiver !== state || !f3 : !state.has(receiver)) throw new TypeError("Cannot read private member from an object whose class did not declare it");
  return kind === "m" ? f3 : kind === "a" ? f3.call(receiver) : f3 ? f3.value : state.get(receiver);
}
__name(__classPrivateFieldGet, "__classPrivateFieldGet");
function __classPrivateFieldSet(receiver, state, value, kind, f3) {
  if (kind === "m") throw new TypeError("Private method is not writable");
  if (kind === "a" && !f3) throw new TypeError("Private accessor was defined without a setter");
  if (typeof state === "function" ? receiver !== state || !f3 : !state.has(receiver)) throw new TypeError("Cannot write private member to an object whose class did not declare it");
  return kind === "a" ? f3.call(receiver, value) : f3 ? f3.value = value : state.set(receiver, value), value;
}
__name(__classPrivateFieldSet, "__classPrivateFieldSet");
function processCreateParams(params) {
  if (!params)
    return {};
  const { errorMap: errorMap2, invalid_type_error, required_error, description } = params;
  if (errorMap2 && (invalid_type_error || required_error)) {
    throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);
  }
  if (errorMap2)
    return { errorMap: errorMap2, description };
  const customMap = /* @__PURE__ */ __name2((iss, ctx) => {
    var _a2, _b2;
    const { message } = params;
    if (iss.code === "invalid_enum_value") {
      return { message: message !== null && message !== void 0 ? message : ctx.defaultError };
    }
    if (typeof ctx.data === "undefined") {
      return { message: (_a2 = message !== null && message !== void 0 ? message : required_error) !== null && _a2 !== void 0 ? _a2 : ctx.defaultError };
    }
    if (iss.code !== "invalid_type")
      return { message: ctx.defaultError };
    return { message: (_b2 = message !== null && message !== void 0 ? message : invalid_type_error) !== null && _b2 !== void 0 ? _b2 : ctx.defaultError };
  }, "customMap");
  return { errorMap: customMap, description };
}
__name(processCreateParams, "processCreateParams");
function timeRegexSource(args) {
  let regex = `([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d`;
  if (args.precision) {
    regex = `${regex}\\.\\d{${args.precision}}`;
  } else if (args.precision == null) {
    regex = `${regex}(\\.\\d+)?`;
  }
  return regex;
}
__name(timeRegexSource, "timeRegexSource");
function timeRegex(args) {
  return new RegExp(`^${timeRegexSource(args)}$`);
}
__name(timeRegex, "timeRegex");
function datetimeRegex(args) {
  let regex = `${dateRegexSource}T${timeRegexSource(args)}`;
  const opts = [];
  opts.push(args.local ? `Z?` : `Z`);
  if (args.offset)
    opts.push(`([+-]\\d{2}:?\\d{2})`);
  regex = `${regex}(${opts.join("|")})`;
  return new RegExp(`^${regex}$`);
}
__name(datetimeRegex, "datetimeRegex");
function isValidIP(ip, version2) {
  if ((version2 === "v4" || !version2) && ipv4Regex.test(ip)) {
    return true;
  }
  if ((version2 === "v6" || !version2) && ipv6Regex.test(ip)) {
    return true;
  }
  return false;
}
__name(isValidIP, "isValidIP");
function isValidJWT(jwt, alg) {
  if (!jwtRegex.test(jwt))
    return false;
  try {
    const [header] = jwt.split(".");
    const base64 = header.replace(/-/g, "+").replace(/_/g, "/").padEnd(header.length + (4 - header.length % 4) % 4, "=");
    const decoded = JSON.parse(atob(base64));
    if (typeof decoded !== "object" || decoded === null)
      return false;
    if (!decoded.typ || !decoded.alg)
      return false;
    if (alg && decoded.alg !== alg)
      return false;
    return true;
  } catch (_a2) {
    return false;
  }
}
__name(isValidJWT, "isValidJWT");
function isValidCidr(ip, version2) {
  if ((version2 === "v4" || !version2) && ipv4CidrRegex.test(ip)) {
    return true;
  }
  if ((version2 === "v6" || !version2) && ipv6CidrRegex.test(ip)) {
    return true;
  }
  return false;
}
__name(isValidCidr, "isValidCidr");
function floatSafeRemainder(val, step) {
  const valDecCount = (val.toString().split(".")[1] || "").length;
  const stepDecCount = (step.toString().split(".")[1] || "").length;
  const decCount = valDecCount > stepDecCount ? valDecCount : stepDecCount;
  const valInt = parseInt(val.toFixed(decCount).replace(".", ""));
  const stepInt = parseInt(step.toFixed(decCount).replace(".", ""));
  return valInt % stepInt / Math.pow(10, decCount);
}
__name(floatSafeRemainder, "floatSafeRemainder");
function deepPartialify(schema) {
  if (schema instanceof ZodObject) {
    const newShape = {};
    for (const key in schema.shape) {
      const fieldSchema = schema.shape[key];
      newShape[key] = ZodOptional.create(deepPartialify(fieldSchema));
    }
    return new ZodObject({
      ...schema._def,
      shape: /* @__PURE__ */ __name2(() => newShape, "shape")
    });
  } else if (schema instanceof ZodArray) {
    return new ZodArray({
      ...schema._def,
      type: deepPartialify(schema.element)
    });
  } else if (schema instanceof ZodOptional) {
    return ZodOptional.create(deepPartialify(schema.unwrap()));
  } else if (schema instanceof ZodNullable) {
    return ZodNullable.create(deepPartialify(schema.unwrap()));
  } else if (schema instanceof ZodTuple) {
    return ZodTuple.create(schema.items.map((item) => deepPartialify(item)));
  } else {
    return schema;
  }
}
__name(deepPartialify, "deepPartialify");
function mergeValues(a3, b2) {
  const aType = getParsedType(a3);
  const bType = getParsedType(b2);
  if (a3 === b2) {
    return { valid: true, data: a3 };
  } else if (aType === ZodParsedType.object && bType === ZodParsedType.object) {
    const bKeys = util.objectKeys(b2);
    const sharedKeys = util.objectKeys(a3).filter((key) => bKeys.indexOf(key) !== -1);
    const newObj = { ...a3, ...b2 };
    for (const key of sharedKeys) {
      const sharedValue = mergeValues(a3[key], b2[key]);
      if (!sharedValue.valid) {
        return { valid: false };
      }
      newObj[key] = sharedValue.data;
    }
    return { valid: true, data: newObj };
  } else if (aType === ZodParsedType.array && bType === ZodParsedType.array) {
    if (a3.length !== b2.length) {
      return { valid: false };
    }
    const newArray = [];
    for (let index2 = 0; index2 < a3.length; index2++) {
      const itemA = a3[index2];
      const itemB = b2[index2];
      const sharedValue = mergeValues(itemA, itemB);
      if (!sharedValue.valid) {
        return { valid: false };
      }
      newArray.push(sharedValue.data);
    }
    return { valid: true, data: newArray };
  } else if (aType === ZodParsedType.date && bType === ZodParsedType.date && +a3 === +b2) {
    return { valid: true, data: a3 };
  } else {
    return { valid: false };
  }
}
__name(mergeValues, "mergeValues");
function createZodEnum(values, params) {
  return new ZodEnum({
    values,
    typeName: ZodFirstPartyTypeKind.ZodEnum,
    ...processCreateParams(params)
  });
}
__name(createZodEnum, "createZodEnum");
function cleanParams(params, data) {
  const p3 = typeof params === "function" ? params(data) : typeof params === "string" ? { message: params } : params;
  const p22 = typeof p3 === "string" ? { message: p3 } : p3;
  return p22;
}
__name(cleanParams, "cleanParams");
function custom(check, _params = {}, fatal) {
  if (check)
    return ZodAny.create().superRefine((data, ctx) => {
      var _a2, _b2;
      const r2 = check(data);
      if (r2 instanceof Promise) {
        return r2.then((r3) => {
          var _a3, _b3;
          if (!r3) {
            const params = cleanParams(_params, data);
            const _fatal = (_b3 = (_a3 = params.fatal) !== null && _a3 !== void 0 ? _a3 : fatal) !== null && _b3 !== void 0 ? _b3 : true;
            ctx.addIssue({ code: "custom", ...params, fatal: _fatal });
          }
        });
      }
      if (!r2) {
        const params = cleanParams(_params, data);
        const _fatal = (_b2 = (_a2 = params.fatal) !== null && _a2 !== void 0 ? _a2 : fatal) !== null && _b2 !== void 0 ? _b2 : true;
        ctx.addIssue({ code: "custom", ...params, fatal: _fatal });
      }
      return;
    });
  return ZodAny.create();
}
__name(custom, "custom");
var util;
var objectUtil;
var ZodParsedType;
var getParsedType;
var ZodIssueCode;
var quotelessJson;
var ZodError;
var errorMap;
var overrideErrorMap;
var makeIssue;
var EMPTY_PATH;
var ParseStatus;
var INVALID;
var DIRTY;
var OK;
var isAborted;
var isDirty;
var isValid;
var isAsync;
var errorUtil;
var _ZodEnum_cache;
var _ZodNativeEnum_cache;
var ParseInputLazyPath;
var handleResult;
var ZodType;
var cuidRegex;
var cuid2Regex;
var ulidRegex;
var uuidRegex;
var nanoidRegex;
var jwtRegex;
var durationRegex;
var emailRegex;
var _emojiRegex;
var emojiRegex;
var ipv4Regex;
var ipv4CidrRegex;
var ipv6Regex;
var ipv6CidrRegex;
var base64Regex;
var base64urlRegex;
var dateRegexSource;
var dateRegex;
var ZodString;
var ZodNumber;
var ZodBigInt;
var ZodBoolean;
var ZodDate;
var ZodSymbol;
var ZodUndefined;
var ZodNull;
var ZodAny;
var ZodUnknown;
var ZodNever;
var ZodVoid;
var ZodArray;
var ZodObject;
var ZodUnion;
var getDiscriminator;
var ZodDiscriminatedUnion;
var ZodIntersection;
var ZodTuple;
var ZodRecord;
var ZodMap;
var ZodSet;
var ZodFunction;
var ZodLazy;
var ZodLiteral;
var ZodEnum;
var ZodNativeEnum;
var ZodPromise;
var ZodEffects;
var ZodOptional;
var ZodNullable;
var ZodDefault;
var ZodCatch;
var ZodNaN;
var BRAND;
var ZodBranded;
var ZodPipeline;
var ZodReadonly;
var late;
var ZodFirstPartyTypeKind;
var instanceOfType;
var stringType;
var numberType;
var nanType;
var bigIntType;
var booleanType;
var dateType;
var symbolType;
var undefinedType;
var nullType;
var anyType;
var unknownType;
var neverType;
var voidType;
var arrayType;
var objectType;
var strictObjectType;
var unionType;
var discriminatedUnionType;
var intersectionType;
var tupleType;
var recordType;
var mapType;
var setType;
var functionType;
var lazyType;
var literalType;
var enumType;
var nativeEnumType;
var promiseType;
var effectsType;
var optionalType;
var nullableType;
var preprocessType;
var pipelineType;
var ostring;
var onumber;
var oboolean;
var coerce;
var NEVER;
var z2;
var init_lib = __esm({
  "../node_modules/zod/lib/index.mjs"() {
    init_functionsRoutes_0_8044054200943971();
    (function(util2) {
      util2.assertEqual = (val) => val;
      function assertIs(_arg) {
      }
      __name(assertIs, "assertIs");
      __name2(assertIs, "assertIs");
      util2.assertIs = assertIs;
      function assertNever(_x) {
        throw new Error();
      }
      __name(assertNever, "assertNever");
      __name2(assertNever, "assertNever");
      util2.assertNever = assertNever;
      util2.arrayToEnum = (items) => {
        const obj = {};
        for (const item of items) {
          obj[item] = item;
        }
        return obj;
      };
      util2.getValidEnumValues = (obj) => {
        const validKeys = util2.objectKeys(obj).filter((k2) => typeof obj[obj[k2]] !== "number");
        const filtered = {};
        for (const k2 of validKeys) {
          filtered[k2] = obj[k2];
        }
        return util2.objectValues(filtered);
      };
      util2.objectValues = (obj) => {
        return util2.objectKeys(obj).map(function(e2) {
          return obj[e2];
        });
      };
      util2.objectKeys = typeof Object.keys === "function" ? (obj) => Object.keys(obj) : (object) => {
        const keys = [];
        for (const key in object) {
          if (Object.prototype.hasOwnProperty.call(object, key)) {
            keys.push(key);
          }
        }
        return keys;
      };
      util2.find = (arr, checker) => {
        for (const item of arr) {
          if (checker(item))
            return item;
        }
        return void 0;
      };
      util2.isInteger = typeof Number.isInteger === "function" ? (val) => Number.isInteger(val) : (val) => typeof val === "number" && isFinite(val) && Math.floor(val) === val;
      function joinValues(array, separator = " | ") {
        return array.map((val) => typeof val === "string" ? `'${val}'` : val).join(separator);
      }
      __name(joinValues, "joinValues");
      __name2(joinValues, "joinValues");
      util2.joinValues = joinValues;
      util2.jsonStringifyReplacer = (_3, value) => {
        if (typeof value === "bigint") {
          return value.toString();
        }
        return value;
      };
    })(util || (util = {}));
    (function(objectUtil2) {
      objectUtil2.mergeShapes = (first, second) => {
        return {
          ...first,
          ...second
          // second overwrites first
        };
      };
    })(objectUtil || (objectUtil = {}));
    ZodParsedType = util.arrayToEnum([
      "string",
      "nan",
      "number",
      "integer",
      "float",
      "boolean",
      "date",
      "bigint",
      "symbol",
      "function",
      "undefined",
      "null",
      "array",
      "object",
      "unknown",
      "promise",
      "void",
      "never",
      "map",
      "set"
    ]);
    getParsedType = /* @__PURE__ */ __name2((data) => {
      const t3 = typeof data;
      switch (t3) {
        case "undefined":
          return ZodParsedType.undefined;
        case "string":
          return ZodParsedType.string;
        case "number":
          return isNaN(data) ? ZodParsedType.nan : ZodParsedType.number;
        case "boolean":
          return ZodParsedType.boolean;
        case "function":
          return ZodParsedType.function;
        case "bigint":
          return ZodParsedType.bigint;
        case "symbol":
          return ZodParsedType.symbol;
        case "object":
          if (Array.isArray(data)) {
            return ZodParsedType.array;
          }
          if (data === null) {
            return ZodParsedType.null;
          }
          if (data.then && typeof data.then === "function" && data.catch && typeof data.catch === "function") {
            return ZodParsedType.promise;
          }
          if (typeof Map !== "undefined" && data instanceof Map) {
            return ZodParsedType.map;
          }
          if (typeof Set !== "undefined" && data instanceof Set) {
            return ZodParsedType.set;
          }
          if (typeof Date !== "undefined" && data instanceof Date) {
            return ZodParsedType.date;
          }
          return ZodParsedType.object;
        default:
          return ZodParsedType.unknown;
      }
    }, "getParsedType");
    ZodIssueCode = util.arrayToEnum([
      "invalid_type",
      "invalid_literal",
      "custom",
      "invalid_union",
      "invalid_union_discriminator",
      "invalid_enum_value",
      "unrecognized_keys",
      "invalid_arguments",
      "invalid_return_type",
      "invalid_date",
      "invalid_string",
      "too_small",
      "too_big",
      "invalid_intersection_types",
      "not_multiple_of",
      "not_finite"
    ]);
    quotelessJson = /* @__PURE__ */ __name2((obj) => {
      const json25 = JSON.stringify(obj, null, 2);
      return json25.replace(/"([^"]+)":/g, "$1:");
    }, "quotelessJson");
    ZodError = class _ZodError extends Error {
      static {
        __name(this, "_ZodError");
      }
      static {
        __name2(this, "ZodError");
      }
      get errors() {
        return this.issues;
      }
      constructor(issues) {
        super();
        this.issues = [];
        this.addIssue = (sub) => {
          this.issues = [...this.issues, sub];
        };
        this.addIssues = (subs = []) => {
          this.issues = [...this.issues, ...subs];
        };
        const actualProto = new.target.prototype;
        if (Object.setPrototypeOf) {
          Object.setPrototypeOf(this, actualProto);
        } else {
          this.__proto__ = actualProto;
        }
        this.name = "ZodError";
        this.issues = issues;
      }
      format(_mapper) {
        const mapper = _mapper || function(issue) {
          return issue.message;
        };
        const fieldErrors = { _errors: [] };
        const processError = /* @__PURE__ */ __name2((error) => {
          for (const issue of error.issues) {
            if (issue.code === "invalid_union") {
              issue.unionErrors.map(processError);
            } else if (issue.code === "invalid_return_type") {
              processError(issue.returnTypeError);
            } else if (issue.code === "invalid_arguments") {
              processError(issue.argumentsError);
            } else if (issue.path.length === 0) {
              fieldErrors._errors.push(mapper(issue));
            } else {
              let curr = fieldErrors;
              let i33 = 0;
              while (i33 < issue.path.length) {
                const el = issue.path[i33];
                const terminal = i33 === issue.path.length - 1;
                if (!terminal) {
                  curr[el] = curr[el] || { _errors: [] };
                } else {
                  curr[el] = curr[el] || { _errors: [] };
                  curr[el]._errors.push(mapper(issue));
                }
                curr = curr[el];
                i33++;
              }
            }
          }
        }, "processError");
        processError(this);
        return fieldErrors;
      }
      static assert(value) {
        if (!(value instanceof _ZodError)) {
          throw new Error(`Not a ZodError: ${value}`);
        }
      }
      toString() {
        return this.message;
      }
      get message() {
        return JSON.stringify(this.issues, util.jsonStringifyReplacer, 2);
      }
      get isEmpty() {
        return this.issues.length === 0;
      }
      flatten(mapper = (issue) => issue.message) {
        const fieldErrors = {};
        const formErrors = [];
        for (const sub of this.issues) {
          if (sub.path.length > 0) {
            fieldErrors[sub.path[0]] = fieldErrors[sub.path[0]] || [];
            fieldErrors[sub.path[0]].push(mapper(sub));
          } else {
            formErrors.push(mapper(sub));
          }
        }
        return { formErrors, fieldErrors };
      }
      get formErrors() {
        return this.flatten();
      }
    };
    ZodError.create = (issues) => {
      const error = new ZodError(issues);
      return error;
    };
    errorMap = /* @__PURE__ */ __name2((issue, _ctx) => {
      let message;
      switch (issue.code) {
        case ZodIssueCode.invalid_type:
          if (issue.received === ZodParsedType.undefined) {
            message = "Required";
          } else {
            message = `Expected ${issue.expected}, received ${issue.received}`;
          }
          break;
        case ZodIssueCode.invalid_literal:
          message = `Invalid literal value, expected ${JSON.stringify(issue.expected, util.jsonStringifyReplacer)}`;
          break;
        case ZodIssueCode.unrecognized_keys:
          message = `Unrecognized key(s) in object: ${util.joinValues(issue.keys, ", ")}`;
          break;
        case ZodIssueCode.invalid_union:
          message = `Invalid input`;
          break;
        case ZodIssueCode.invalid_union_discriminator:
          message = `Invalid discriminator value. Expected ${util.joinValues(issue.options)}`;
          break;
        case ZodIssueCode.invalid_enum_value:
          message = `Invalid enum value. Expected ${util.joinValues(issue.options)}, received '${issue.received}'`;
          break;
        case ZodIssueCode.invalid_arguments:
          message = `Invalid function arguments`;
          break;
        case ZodIssueCode.invalid_return_type:
          message = `Invalid function return type`;
          break;
        case ZodIssueCode.invalid_date:
          message = `Invalid date`;
          break;
        case ZodIssueCode.invalid_string:
          if (typeof issue.validation === "object") {
            if ("includes" in issue.validation) {
              message = `Invalid input: must include "${issue.validation.includes}"`;
              if (typeof issue.validation.position === "number") {
                message = `${message} at one or more positions greater than or equal to ${issue.validation.position}`;
              }
            } else if ("startsWith" in issue.validation) {
              message = `Invalid input: must start with "${issue.validation.startsWith}"`;
            } else if ("endsWith" in issue.validation) {
              message = `Invalid input: must end with "${issue.validation.endsWith}"`;
            } else {
              util.assertNever(issue.validation);
            }
          } else if (issue.validation !== "regex") {
            message = `Invalid ${issue.validation}`;
          } else {
            message = "Invalid";
          }
          break;
        case ZodIssueCode.too_small:
          if (issue.type === "array")
            message = `Array must contain ${issue.exact ? "exactly" : issue.inclusive ? `at least` : `more than`} ${issue.minimum} element(s)`;
          else if (issue.type === "string")
            message = `String must contain ${issue.exact ? "exactly" : issue.inclusive ? `at least` : `over`} ${issue.minimum} character(s)`;
          else if (issue.type === "number")
            message = `Number must be ${issue.exact ? `exactly equal to ` : issue.inclusive ? `greater than or equal to ` : `greater than `}${issue.minimum}`;
          else if (issue.type === "date")
            message = `Date must be ${issue.exact ? `exactly equal to ` : issue.inclusive ? `greater than or equal to ` : `greater than `}${new Date(Number(issue.minimum))}`;
          else
            message = "Invalid input";
          break;
        case ZodIssueCode.too_big:
          if (issue.type === "array")
            message = `Array must contain ${issue.exact ? `exactly` : issue.inclusive ? `at most` : `less than`} ${issue.maximum} element(s)`;
          else if (issue.type === "string")
            message = `String must contain ${issue.exact ? `exactly` : issue.inclusive ? `at most` : `under`} ${issue.maximum} character(s)`;
          else if (issue.type === "number")
            message = `Number must be ${issue.exact ? `exactly` : issue.inclusive ? `less than or equal to` : `less than`} ${issue.maximum}`;
          else if (issue.type === "bigint")
            message = `BigInt must be ${issue.exact ? `exactly` : issue.inclusive ? `less than or equal to` : `less than`} ${issue.maximum}`;
          else if (issue.type === "date")
            message = `Date must be ${issue.exact ? `exactly` : issue.inclusive ? `smaller than or equal to` : `smaller than`} ${new Date(Number(issue.maximum))}`;
          else
            message = "Invalid input";
          break;
        case ZodIssueCode.custom:
          message = `Invalid input`;
          break;
        case ZodIssueCode.invalid_intersection_types:
          message = `Intersection results could not be merged`;
          break;
        case ZodIssueCode.not_multiple_of:
          message = `Number must be a multiple of ${issue.multipleOf}`;
          break;
        case ZodIssueCode.not_finite:
          message = "Number must be finite";
          break;
        default:
          message = _ctx.defaultError;
          util.assertNever(issue);
      }
      return { message };
    }, "errorMap");
    overrideErrorMap = errorMap;
    __name2(setErrorMap, "setErrorMap");
    __name2(getErrorMap, "getErrorMap");
    makeIssue = /* @__PURE__ */ __name2((params) => {
      const { data, path, errorMaps, issueData } = params;
      const fullPath = [...path, ...issueData.path || []];
      const fullIssue = {
        ...issueData,
        path: fullPath
      };
      if (issueData.message !== void 0) {
        return {
          ...issueData,
          path: fullPath,
          message: issueData.message
        };
      }
      let errorMessage = "";
      const maps = errorMaps.filter((m4) => !!m4).slice().reverse();
      for (const map of maps) {
        errorMessage = map(fullIssue, { data, defaultError: errorMessage }).message;
      }
      return {
        ...issueData,
        path: fullPath,
        message: errorMessage
      };
    }, "makeIssue");
    EMPTY_PATH = [];
    __name2(addIssueToContext, "addIssueToContext");
    ParseStatus = class _ParseStatus {
      static {
        __name(this, "_ParseStatus");
      }
      static {
        __name2(this, "ParseStatus");
      }
      constructor() {
        this.value = "valid";
      }
      dirty() {
        if (this.value === "valid")
          this.value = "dirty";
      }
      abort() {
        if (this.value !== "aborted")
          this.value = "aborted";
      }
      static mergeArray(status, results) {
        const arrayValue = [];
        for (const s3 of results) {
          if (s3.status === "aborted")
            return INVALID;
          if (s3.status === "dirty")
            status.dirty();
          arrayValue.push(s3.value);
        }
        return { status: status.value, value: arrayValue };
      }
      static async mergeObjectAsync(status, pairs) {
        const syncPairs = [];
        for (const pair of pairs) {
          const key = await pair.key;
          const value = await pair.value;
          syncPairs.push({
            key,
            value
          });
        }
        return _ParseStatus.mergeObjectSync(status, syncPairs);
      }
      static mergeObjectSync(status, pairs) {
        const finalObject = {};
        for (const pair of pairs) {
          const { key, value } = pair;
          if (key.status === "aborted")
            return INVALID;
          if (value.status === "aborted")
            return INVALID;
          if (key.status === "dirty")
            status.dirty();
          if (value.status === "dirty")
            status.dirty();
          if (key.value !== "__proto__" && (typeof value.value !== "undefined" || pair.alwaysSet)) {
            finalObject[key.value] = value.value;
          }
        }
        return { status: status.value, value: finalObject };
      }
    };
    INVALID = Object.freeze({
      status: "aborted"
    });
    DIRTY = /* @__PURE__ */ __name2((value) => ({ status: "dirty", value }), "DIRTY");
    OK = /* @__PURE__ */ __name2((value) => ({ status: "valid", value }), "OK");
    isAborted = /* @__PURE__ */ __name2((x22) => x22.status === "aborted", "isAborted");
    isDirty = /* @__PURE__ */ __name2((x22) => x22.status === "dirty", "isDirty");
    isValid = /* @__PURE__ */ __name2((x22) => x22.status === "valid", "isValid");
    isAsync = /* @__PURE__ */ __name2((x22) => typeof Promise !== "undefined" && x22 instanceof Promise, "isAsync");
    __name2(__classPrivateFieldGet, "__classPrivateFieldGet");
    __name2(__classPrivateFieldSet, "__classPrivateFieldSet");
    (function(errorUtil2) {
      errorUtil2.errToObj = (message) => typeof message === "string" ? { message } : message || {};
      errorUtil2.toString = (message) => typeof message === "string" ? message : message === null || message === void 0 ? void 0 : message.message;
    })(errorUtil || (errorUtil = {}));
    ParseInputLazyPath = class {
      static {
        __name(this, "ParseInputLazyPath");
      }
      static {
        __name2(this, "ParseInputLazyPath");
      }
      constructor(parent, value, path, key) {
        this._cachedPath = [];
        this.parent = parent;
        this.data = value;
        this._path = path;
        this._key = key;
      }
      get path() {
        if (!this._cachedPath.length) {
          if (this._key instanceof Array) {
            this._cachedPath.push(...this._path, ...this._key);
          } else {
            this._cachedPath.push(...this._path, this._key);
          }
        }
        return this._cachedPath;
      }
    };
    handleResult = /* @__PURE__ */ __name2((ctx, result) => {
      if (isValid(result)) {
        return { success: true, data: result.value };
      } else {
        if (!ctx.common.issues.length) {
          throw new Error("Validation failed but no issues detected.");
        }
        return {
          success: false,
          get error() {
            if (this._error)
              return this._error;
            const error = new ZodError(ctx.common.issues);
            this._error = error;
            return this._error;
          }
        };
      }
    }, "handleResult");
    __name2(processCreateParams, "processCreateParams");
    ZodType = class {
      static {
        __name(this, "ZodType");
      }
      static {
        __name2(this, "ZodType");
      }
      get description() {
        return this._def.description;
      }
      _getType(input) {
        return getParsedType(input.data);
      }
      _getOrReturnCtx(input, ctx) {
        return ctx || {
          common: input.parent.common,
          data: input.data,
          parsedType: getParsedType(input.data),
          schemaErrorMap: this._def.errorMap,
          path: input.path,
          parent: input.parent
        };
      }
      _processInputParams(input) {
        return {
          status: new ParseStatus(),
          ctx: {
            common: input.parent.common,
            data: input.data,
            parsedType: getParsedType(input.data),
            schemaErrorMap: this._def.errorMap,
            path: input.path,
            parent: input.parent
          }
        };
      }
      _parseSync(input) {
        const result = this._parse(input);
        if (isAsync(result)) {
          throw new Error("Synchronous parse encountered promise.");
        }
        return result;
      }
      _parseAsync(input) {
        const result = this._parse(input);
        return Promise.resolve(result);
      }
      parse(data, params) {
        const result = this.safeParse(data, params);
        if (result.success)
          return result.data;
        throw result.error;
      }
      safeParse(data, params) {
        var _a2;
        const ctx = {
          common: {
            issues: [],
            async: (_a2 = params === null || params === void 0 ? void 0 : params.async) !== null && _a2 !== void 0 ? _a2 : false,
            contextualErrorMap: params === null || params === void 0 ? void 0 : params.errorMap
          },
          path: (params === null || params === void 0 ? void 0 : params.path) || [],
          schemaErrorMap: this._def.errorMap,
          parent: null,
          data,
          parsedType: getParsedType(data)
        };
        const result = this._parseSync({ data, path: ctx.path, parent: ctx });
        return handleResult(ctx, result);
      }
      "~validate"(data) {
        var _a2, _b2;
        const ctx = {
          common: {
            issues: [],
            async: !!this["~standard"].async
          },
          path: [],
          schemaErrorMap: this._def.errorMap,
          parent: null,
          data,
          parsedType: getParsedType(data)
        };
        if (!this["~standard"].async) {
          try {
            const result = this._parseSync({ data, path: [], parent: ctx });
            return isValid(result) ? {
              value: result.value
            } : {
              issues: ctx.common.issues
            };
          } catch (err2) {
            if ((_b2 = (_a2 = err2 === null || err2 === void 0 ? void 0 : err2.message) === null || _a2 === void 0 ? void 0 : _a2.toLowerCase()) === null || _b2 === void 0 ? void 0 : _b2.includes("encountered")) {
              this["~standard"].async = true;
            }
            ctx.common = {
              issues: [],
              async: true
            };
          }
        }
        return this._parseAsync({ data, path: [], parent: ctx }).then((result) => isValid(result) ? {
          value: result.value
        } : {
          issues: ctx.common.issues
        });
      }
      async parseAsync(data, params) {
        const result = await this.safeParseAsync(data, params);
        if (result.success)
          return result.data;
        throw result.error;
      }
      async safeParseAsync(data, params) {
        const ctx = {
          common: {
            issues: [],
            contextualErrorMap: params === null || params === void 0 ? void 0 : params.errorMap,
            async: true
          },
          path: (params === null || params === void 0 ? void 0 : params.path) || [],
          schemaErrorMap: this._def.errorMap,
          parent: null,
          data,
          parsedType: getParsedType(data)
        };
        const maybeAsyncResult = this._parse({ data, path: ctx.path, parent: ctx });
        const result = await (isAsync(maybeAsyncResult) ? maybeAsyncResult : Promise.resolve(maybeAsyncResult));
        return handleResult(ctx, result);
      }
      refine(check, message) {
        const getIssueProperties = /* @__PURE__ */ __name2((val) => {
          if (typeof message === "string" || typeof message === "undefined") {
            return { message };
          } else if (typeof message === "function") {
            return message(val);
          } else {
            return message;
          }
        }, "getIssueProperties");
        return this._refinement((val, ctx) => {
          const result = check(val);
          const setError = /* @__PURE__ */ __name2(() => ctx.addIssue({
            code: ZodIssueCode.custom,
            ...getIssueProperties(val)
          }), "setError");
          if (typeof Promise !== "undefined" && result instanceof Promise) {
            return result.then((data) => {
              if (!data) {
                setError();
                return false;
              } else {
                return true;
              }
            });
          }
          if (!result) {
            setError();
            return false;
          } else {
            return true;
          }
        });
      }
      refinement(check, refinementData) {
        return this._refinement((val, ctx) => {
          if (!check(val)) {
            ctx.addIssue(typeof refinementData === "function" ? refinementData(val, ctx) : refinementData);
            return false;
          } else {
            return true;
          }
        });
      }
      _refinement(refinement) {
        return new ZodEffects({
          schema: this,
          typeName: ZodFirstPartyTypeKind.ZodEffects,
          effect: { type: "refinement", refinement }
        });
      }
      superRefine(refinement) {
        return this._refinement(refinement);
      }
      constructor(def) {
        this.spa = this.safeParseAsync;
        this._def = def;
        this.parse = this.parse.bind(this);
        this.safeParse = this.safeParse.bind(this);
        this.parseAsync = this.parseAsync.bind(this);
        this.safeParseAsync = this.safeParseAsync.bind(this);
        this.spa = this.spa.bind(this);
        this.refine = this.refine.bind(this);
        this.refinement = this.refinement.bind(this);
        this.superRefine = this.superRefine.bind(this);
        this.optional = this.optional.bind(this);
        this.nullable = this.nullable.bind(this);
        this.nullish = this.nullish.bind(this);
        this.array = this.array.bind(this);
        this.promise = this.promise.bind(this);
        this.or = this.or.bind(this);
        this.and = this.and.bind(this);
        this.transform = this.transform.bind(this);
        this.brand = this.brand.bind(this);
        this.default = this.default.bind(this);
        this.catch = this.catch.bind(this);
        this.describe = this.describe.bind(this);
        this.pipe = this.pipe.bind(this);
        this.readonly = this.readonly.bind(this);
        this.isNullable = this.isNullable.bind(this);
        this.isOptional = this.isOptional.bind(this);
        this["~standard"] = {
          version: 1,
          vendor: "zod",
          validate: /* @__PURE__ */ __name2((data) => this["~validate"](data), "validate")
        };
      }
      optional() {
        return ZodOptional.create(this, this._def);
      }
      nullable() {
        return ZodNullable.create(this, this._def);
      }
      nullish() {
        return this.nullable().optional();
      }
      array() {
        return ZodArray.create(this);
      }
      promise() {
        return ZodPromise.create(this, this._def);
      }
      or(option) {
        return ZodUnion.create([this, option], this._def);
      }
      and(incoming) {
        return ZodIntersection.create(this, incoming, this._def);
      }
      transform(transform) {
        return new ZodEffects({
          ...processCreateParams(this._def),
          schema: this,
          typeName: ZodFirstPartyTypeKind.ZodEffects,
          effect: { type: "transform", transform }
        });
      }
      default(def) {
        const defaultValueFunc = typeof def === "function" ? def : () => def;
        return new ZodDefault({
          ...processCreateParams(this._def),
          innerType: this,
          defaultValue: defaultValueFunc,
          typeName: ZodFirstPartyTypeKind.ZodDefault
        });
      }
      brand() {
        return new ZodBranded({
          typeName: ZodFirstPartyTypeKind.ZodBranded,
          type: this,
          ...processCreateParams(this._def)
        });
      }
      catch(def) {
        const catchValueFunc = typeof def === "function" ? def : () => def;
        return new ZodCatch({
          ...processCreateParams(this._def),
          innerType: this,
          catchValue: catchValueFunc,
          typeName: ZodFirstPartyTypeKind.ZodCatch
        });
      }
      describe(description) {
        const This = this.constructor;
        return new This({
          ...this._def,
          description
        });
      }
      pipe(target) {
        return ZodPipeline.create(this, target);
      }
      readonly() {
        return ZodReadonly.create(this);
      }
      isOptional() {
        return this.safeParse(void 0).success;
      }
      isNullable() {
        return this.safeParse(null).success;
      }
    };
    cuidRegex = /^c[^\s-]{8,}$/i;
    cuid2Regex = /^[0-9a-z]+$/;
    ulidRegex = /^[0-9A-HJKMNP-TV-Z]{26}$/i;
    uuidRegex = /^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i;
    nanoidRegex = /^[a-z0-9_-]{21}$/i;
    jwtRegex = /^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/;
    durationRegex = /^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/;
    emailRegex = /^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i;
    _emojiRegex = `^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$`;
    ipv4Regex = /^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/;
    ipv4CidrRegex = /^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/;
    ipv6Regex = /^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/;
    ipv6CidrRegex = /^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/;
    base64Regex = /^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/;
    base64urlRegex = /^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/;
    dateRegexSource = `((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))`;
    dateRegex = new RegExp(`^${dateRegexSource}$`);
    __name2(timeRegexSource, "timeRegexSource");
    __name2(timeRegex, "timeRegex");
    __name2(datetimeRegex, "datetimeRegex");
    __name2(isValidIP, "isValidIP");
    __name2(isValidJWT, "isValidJWT");
    __name2(isValidCidr, "isValidCidr");
    ZodString = class _ZodString extends ZodType {
      static {
        __name(this, "_ZodString");
      }
      static {
        __name2(this, "ZodString");
      }
      _parse(input) {
        if (this._def.coerce) {
          input.data = String(input.data);
        }
        const parsedType = this._getType(input);
        if (parsedType !== ZodParsedType.string) {
          const ctx2 = this._getOrReturnCtx(input);
          addIssueToContext(ctx2, {
            code: ZodIssueCode.invalid_type,
            expected: ZodParsedType.string,
            received: ctx2.parsedType
          });
          return INVALID;
        }
        const status = new ParseStatus();
        let ctx = void 0;
        for (const check of this._def.checks) {
          if (check.kind === "min") {
            if (input.data.length < check.value) {
              ctx = this._getOrReturnCtx(input, ctx);
              addIssueToContext(ctx, {
                code: ZodIssueCode.too_small,
                minimum: check.value,
                type: "string",
                inclusive: true,
                exact: false,
                message: check.message
              });
              status.dirty();
            }
          } else if (check.kind === "max") {
            if (input.data.length > check.value) {
              ctx = this._getOrReturnCtx(input, ctx);
              addIssueToContext(ctx, {
                code: ZodIssueCode.too_big,
                maximum: check.value,
                type: "string",
                inclusive: true,
                exact: false,
                message: check.message
              });
              status.dirty();
            }
          } else if (check.kind === "length") {
            const tooBig = input.data.length > check.value;
            const tooSmall = input.data.length < check.value;
            if (tooBig || tooSmall) {
              ctx = this._getOrReturnCtx(input, ctx);
              if (tooBig) {
                addIssueToContext(ctx, {
                  code: ZodIssueCode.too_big,
                  maximum: check.value,
                  type: "string",
                  inclusive: true,
                  exact: true,
                  message: check.message
                });
              } else if (tooSmall) {
                addIssueToContext(ctx, {
                  code: ZodIssueCode.too_small,
                  minimum: check.value,
                  type: "string",
                  inclusive: true,
                  exact: true,
                  message: check.message
                });
              }
              status.dirty();
            }
          } else if (check.kind === "email") {
            if (!emailRegex.test(input.data)) {
              ctx = this._getOrReturnCtx(input, ctx);
              addIssueToContext(ctx, {
                validation: "email",
                code: ZodIssueCode.invalid_string,
                message: check.message
              });
              status.dirty();
            }
          } else if (check.kind === "emoji") {
            if (!emojiRegex) {
              emojiRegex = new RegExp(_emojiRegex, "u");
            }
            if (!emojiRegex.test(input.data)) {
              ctx = this._getOrReturnCtx(input, ctx);
              addIssueToContext(ctx, {
                validation: "emoji",
                code: ZodIssueCode.invalid_string,
                message: check.message
              });
              status.dirty();
            }
          } else if (check.kind === "uuid") {
            if (!uuidRegex.test(input.data)) {
              ctx = this._getOrReturnCtx(input, ctx);
              addIssueToContext(ctx, {
                validation: "uuid",
                code: ZodIssueCode.invalid_string,
                message: check.message
              });
              status.dirty();
            }
          } else if (check.kind === "nanoid") {
            if (!nanoidRegex.test(input.data)) {
              ctx = this._getOrReturnCtx(input, ctx);
              addIssueToContext(ctx, {
                validation: "nanoid",
                code: ZodIssueCode.invalid_string,
                message: check.message
              });
              status.dirty();
            }
          } else if (check.kind === "cuid") {
            if (!cuidRegex.test(input.data)) {
              ctx = this._getOrReturnCtx(input, ctx);
              addIssueToContext(ctx, {
                validation: "cuid",
                code: ZodIssueCode.invalid_string,
                message: check.message
              });
              status.dirty();
            }
          } else if (check.kind === "cuid2") {
            if (!cuid2Regex.test(input.data)) {
              ctx = this._getOrReturnCtx(input, ctx);
              addIssueToContext(ctx, {
                validation: "cuid2",
                code: ZodIssueCode.invalid_string,
                message: check.message
              });
              status.dirty();
            }
          } else if (check.kind === "ulid") {
            if (!ulidRegex.test(input.data)) {
              ctx = this._getOrReturnCtx(input, ctx);
              addIssueToContext(ctx, {
                validation: "ulid",
                code: ZodIssueCode.invalid_string,
                message: check.message
              });
              status.dirty();
            }
          } else if (check.kind === "url") {
            try {
              new URL(input.data);
            } catch (_a2) {
              ctx = this._getOrReturnCtx(input, ctx);
              addIssueToContext(ctx, {
                validation: "url",
                code: ZodIssueCode.invalid_string,
                message: check.message
              });
              status.dirty();
            }
          } else if (check.kind === "regex") {
            check.regex.lastIndex = 0;
            const testResult = check.regex.test(input.data);
            if (!testResult) {
              ctx = this._getOrReturnCtx(input, ctx);
              addIssueToContext(ctx, {
                validation: "regex",
                code: ZodIssueCode.invalid_string,
                message: check.message
              });
              status.dirty();
            }
          } else if (check.kind === "trim") {
            input.data = input.data.trim();
          } else if (check.kind === "includes") {
            if (!input.data.includes(check.value, check.position)) {
              ctx = this._getOrReturnCtx(input, ctx);
              addIssueToContext(ctx, {
                code: ZodIssueCode.invalid_string,
                validation: { includes: check.value, position: check.position },
                message: check.message
              });
              status.dirty();
            }
          } else if (check.kind === "toLowerCase") {
            input.data = input.data.toLowerCase();
          } else if (check.kind === "toUpperCase") {
            input.data = input.data.toUpperCase();
          } else if (check.kind === "startsWith") {
            if (!input.data.startsWith(check.value)) {
              ctx = this._getOrReturnCtx(input, ctx);
              addIssueToContext(ctx, {
                code: ZodIssueCode.invalid_string,
                validation: { startsWith: check.value },
                message: check.message
              });
              status.dirty();
            }
          } else if (check.kind === "endsWith") {
            if (!input.data.endsWith(check.value)) {
              ctx = this._getOrReturnCtx(input, ctx);
              addIssueToContext(ctx, {
                code: ZodIssueCode.invalid_string,
                validation: { endsWith: check.value },
                message: check.message
              });
              status.dirty();
            }
          } else if (check.kind === "datetime") {
            const regex = datetimeRegex(check);
            if (!regex.test(input.data)) {
              ctx = this._getOrReturnCtx(input, ctx);
              addIssueToContext(ctx, {
                code: ZodIssueCode.invalid_string,
                validation: "datetime",
                message: check.message
              });
              status.dirty();
            }
          } else if (check.kind === "date") {
            const regex = dateRegex;
            if (!regex.test(input.data)) {
              ctx = this._getOrReturnCtx(input, ctx);
              addIssueToContext(ctx, {
                code: ZodIssueCode.invalid_string,
                validation: "date",
                message: check.message
              });
              status.dirty();
            }
          } else if (check.kind === "time") {
            const regex = timeRegex(check);
            if (!regex.test(input.data)) {
              ctx = this._getOrReturnCtx(input, ctx);
              addIssueToContext(ctx, {
                code: ZodIssueCode.invalid_string,
                validation: "time",
                message: check.message
              });
              status.dirty();
            }
          } else if (check.kind === "duration") {
            if (!durationRegex.test(input.data)) {
              ctx = this._getOrReturnCtx(input, ctx);
              addIssueToContext(ctx, {
                validation: "duration",
                code: ZodIssueCode.invalid_string,
                message: check.message
              });
              status.dirty();
            }
          } else if (check.kind === "ip") {
            if (!isValidIP(input.data, check.version)) {
              ctx = this._getOrReturnCtx(input, ctx);
              addIssueToContext(ctx, {
                validation: "ip",
                code: ZodIssueCode.invalid_string,
                message: check.message
              });
              status.dirty();
            }
          } else if (check.kind === "jwt") {
            if (!isValidJWT(input.data, check.alg)) {
              ctx = this._getOrReturnCtx(input, ctx);
              addIssueToContext(ctx, {
                validation: "jwt",
                code: ZodIssueCode.invalid_string,
                message: check.message
              });
              status.dirty();
            }
          } else if (check.kind === "cidr") {
            if (!isValidCidr(input.data, check.version)) {
              ctx = this._getOrReturnCtx(input, ctx);
              addIssueToContext(ctx, {
                validation: "cidr",
                code: ZodIssueCode.invalid_string,
                message: check.message
              });
              status.dirty();
            }
          } else if (check.kind === "base64") {
            if (!base64Regex.test(input.data)) {
              ctx = this._getOrReturnCtx(input, ctx);
              addIssueToContext(ctx, {
                validation: "base64",
                code: ZodIssueCode.invalid_string,
                message: check.message
              });
              status.dirty();
            }
          } else if (check.kind === "base64url") {
            if (!base64urlRegex.test(input.data)) {
              ctx = this._getOrReturnCtx(input, ctx);
              addIssueToContext(ctx, {
                validation: "base64url",
                code: ZodIssueCode.invalid_string,
                message: check.message
              });
              status.dirty();
            }
          } else {
            util.assertNever(check);
          }
        }
        return { status: status.value, value: input.data };
      }
      _regex(regex, validation, message) {
        return this.refinement((data) => regex.test(data), {
          validation,
          code: ZodIssueCode.invalid_string,
          ...errorUtil.errToObj(message)
        });
      }
      _addCheck(check) {
        return new _ZodString({
          ...this._def,
          checks: [...this._def.checks, check]
        });
      }
      email(message) {
        return this._addCheck({ kind: "email", ...errorUtil.errToObj(message) });
      }
      url(message) {
        return this._addCheck({ kind: "url", ...errorUtil.errToObj(message) });
      }
      emoji(message) {
        return this._addCheck({ kind: "emoji", ...errorUtil.errToObj(message) });
      }
      uuid(message) {
        return this._addCheck({ kind: "uuid", ...errorUtil.errToObj(message) });
      }
      nanoid(message) {
        return this._addCheck({ kind: "nanoid", ...errorUtil.errToObj(message) });
      }
      cuid(message) {
        return this._addCheck({ kind: "cuid", ...errorUtil.errToObj(message) });
      }
      cuid2(message) {
        return this._addCheck({ kind: "cuid2", ...errorUtil.errToObj(message) });
      }
      ulid(message) {
        return this._addCheck({ kind: "ulid", ...errorUtil.errToObj(message) });
      }
      base64(message) {
        return this._addCheck({ kind: "base64", ...errorUtil.errToObj(message) });
      }
      base64url(message) {
        return this._addCheck({
          kind: "base64url",
          ...errorUtil.errToObj(message)
        });
      }
      jwt(options) {
        return this._addCheck({ kind: "jwt", ...errorUtil.errToObj(options) });
      }
      ip(options) {
        return this._addCheck({ kind: "ip", ...errorUtil.errToObj(options) });
      }
      cidr(options) {
        return this._addCheck({ kind: "cidr", ...errorUtil.errToObj(options) });
      }
      datetime(options) {
        var _a2, _b2;
        if (typeof options === "string") {
          return this._addCheck({
            kind: "datetime",
            precision: null,
            offset: false,
            local: false,
            message: options
          });
        }
        return this._addCheck({
          kind: "datetime",
          precision: typeof (options === null || options === void 0 ? void 0 : options.precision) === "undefined" ? null : options === null || options === void 0 ? void 0 : options.precision,
          offset: (_a2 = options === null || options === void 0 ? void 0 : options.offset) !== null && _a2 !== void 0 ? _a2 : false,
          local: (_b2 = options === null || options === void 0 ? void 0 : options.local) !== null && _b2 !== void 0 ? _b2 : false,
          ...errorUtil.errToObj(options === null || options === void 0 ? void 0 : options.message)
        });
      }
      date(message) {
        return this._addCheck({ kind: "date", message });
      }
      time(options) {
        if (typeof options === "string") {
          return this._addCheck({
            kind: "time",
            precision: null,
            message: options
          });
        }
        return this._addCheck({
          kind: "time",
          precision: typeof (options === null || options === void 0 ? void 0 : options.precision) === "undefined" ? null : options === null || options === void 0 ? void 0 : options.precision,
          ...errorUtil.errToObj(options === null || options === void 0 ? void 0 : options.message)
        });
      }
      duration(message) {
        return this._addCheck({ kind: "duration", ...errorUtil.errToObj(message) });
      }
      regex(regex, message) {
        return this._addCheck({
          kind: "regex",
          regex,
          ...errorUtil.errToObj(message)
        });
      }
      includes(value, options) {
        return this._addCheck({
          kind: "includes",
          value,
          position: options === null || options === void 0 ? void 0 : options.position,
          ...errorUtil.errToObj(options === null || options === void 0 ? void 0 : options.message)
        });
      }
      startsWith(value, message) {
        return this._addCheck({
          kind: "startsWith",
          value,
          ...errorUtil.errToObj(message)
        });
      }
      endsWith(value, message) {
        return this._addCheck({
          kind: "endsWith",
          value,
          ...errorUtil.errToObj(message)
        });
      }
      min(minLength, message) {
        return this._addCheck({
          kind: "min",
          value: minLength,
          ...errorUtil.errToObj(message)
        });
      }
      max(maxLength, message) {
        return this._addCheck({
          kind: "max",
          value: maxLength,
          ...errorUtil.errToObj(message)
        });
      }
      length(len, message) {
        return this._addCheck({
          kind: "length",
          value: len,
          ...errorUtil.errToObj(message)
        });
      }
      /**
       * Equivalent to `.min(1)`
       */
      nonempty(message) {
        return this.min(1, errorUtil.errToObj(message));
      }
      trim() {
        return new _ZodString({
          ...this._def,
          checks: [...this._def.checks, { kind: "trim" }]
        });
      }
      toLowerCase() {
        return new _ZodString({
          ...this._def,
          checks: [...this._def.checks, { kind: "toLowerCase" }]
        });
      }
      toUpperCase() {
        return new _ZodString({
          ...this._def,
          checks: [...this._def.checks, { kind: "toUpperCase" }]
        });
      }
      get isDatetime() {
        return !!this._def.checks.find((ch) => ch.kind === "datetime");
      }
      get isDate() {
        return !!this._def.checks.find((ch) => ch.kind === "date");
      }
      get isTime() {
        return !!this._def.checks.find((ch) => ch.kind === "time");
      }
      get isDuration() {
        return !!this._def.checks.find((ch) => ch.kind === "duration");
      }
      get isEmail() {
        return !!this._def.checks.find((ch) => ch.kind === "email");
      }
      get isURL() {
        return !!this._def.checks.find((ch) => ch.kind === "url");
      }
      get isEmoji() {
        return !!this._def.checks.find((ch) => ch.kind === "emoji");
      }
      get isUUID() {
        return !!this._def.checks.find((ch) => ch.kind === "uuid");
      }
      get isNANOID() {
        return !!this._def.checks.find((ch) => ch.kind === "nanoid");
      }
      get isCUID() {
        return !!this._def.checks.find((ch) => ch.kind === "cuid");
      }
      get isCUID2() {
        return !!this._def.checks.find((ch) => ch.kind === "cuid2");
      }
      get isULID() {
        return !!this._def.checks.find((ch) => ch.kind === "ulid");
      }
      get isIP() {
        return !!this._def.checks.find((ch) => ch.kind === "ip");
      }
      get isCIDR() {
        return !!this._def.checks.find((ch) => ch.kind === "cidr");
      }
      get isBase64() {
        return !!this._def.checks.find((ch) => ch.kind === "base64");
      }
      get isBase64url() {
        return !!this._def.checks.find((ch) => ch.kind === "base64url");
      }
      get minLength() {
        let min = null;
        for (const ch of this._def.checks) {
          if (ch.kind === "min") {
            if (min === null || ch.value > min)
              min = ch.value;
          }
        }
        return min;
      }
      get maxLength() {
        let max2 = null;
        for (const ch of this._def.checks) {
          if (ch.kind === "max") {
            if (max2 === null || ch.value < max2)
              max2 = ch.value;
          }
        }
        return max2;
      }
    };
    ZodString.create = (params) => {
      var _a2;
      return new ZodString({
        checks: [],
        typeName: ZodFirstPartyTypeKind.ZodString,
        coerce: (_a2 = params === null || params === void 0 ? void 0 : params.coerce) !== null && _a2 !== void 0 ? _a2 : false,
        ...processCreateParams(params)
      });
    };
    __name2(floatSafeRemainder, "floatSafeRemainder");
    ZodNumber = class _ZodNumber extends ZodType {
      static {
        __name(this, "_ZodNumber");
      }
      static {
        __name2(this, "ZodNumber");
      }
      constructor() {
        super(...arguments);
        this.min = this.gte;
        this.max = this.lte;
        this.step = this.multipleOf;
      }
      _parse(input) {
        if (this._def.coerce) {
          input.data = Number(input.data);
        }
        const parsedType = this._getType(input);
        if (parsedType !== ZodParsedType.number) {
          const ctx2 = this._getOrReturnCtx(input);
          addIssueToContext(ctx2, {
            code: ZodIssueCode.invalid_type,
            expected: ZodParsedType.number,
            received: ctx2.parsedType
          });
          return INVALID;
        }
        let ctx = void 0;
        const status = new ParseStatus();
        for (const check of this._def.checks) {
          if (check.kind === "int") {
            if (!util.isInteger(input.data)) {
              ctx = this._getOrReturnCtx(input, ctx);
              addIssueToContext(ctx, {
                code: ZodIssueCode.invalid_type,
                expected: "integer",
                received: "float",
                message: check.message
              });
              status.dirty();
            }
          } else if (check.kind === "min") {
            const tooSmall = check.inclusive ? input.data < check.value : input.data <= check.value;
            if (tooSmall) {
              ctx = this._getOrReturnCtx(input, ctx);
              addIssueToContext(ctx, {
                code: ZodIssueCode.too_small,
                minimum: check.value,
                type: "number",
                inclusive: check.inclusive,
                exact: false,
                message: check.message
              });
              status.dirty();
            }
          } else if (check.kind === "max") {
            const tooBig = check.inclusive ? input.data > check.value : input.data >= check.value;
            if (tooBig) {
              ctx = this._getOrReturnCtx(input, ctx);
              addIssueToContext(ctx, {
                code: ZodIssueCode.too_big,
                maximum: check.value,
                type: "number",
                inclusive: check.inclusive,
                exact: false,
                message: check.message
              });
              status.dirty();
            }
          } else if (check.kind === "multipleOf") {
            if (floatSafeRemainder(input.data, check.value) !== 0) {
              ctx = this._getOrReturnCtx(input, ctx);
              addIssueToContext(ctx, {
                code: ZodIssueCode.not_multiple_of,
                multipleOf: check.value,
                message: check.message
              });
              status.dirty();
            }
          } else if (check.kind === "finite") {
            if (!Number.isFinite(input.data)) {
              ctx = this._getOrReturnCtx(input, ctx);
              addIssueToContext(ctx, {
                code: ZodIssueCode.not_finite,
                message: check.message
              });
              status.dirty();
            }
          } else {
            util.assertNever(check);
          }
        }
        return { status: status.value, value: input.data };
      }
      gte(value, message) {
        return this.setLimit("min", value, true, errorUtil.toString(message));
      }
      gt(value, message) {
        return this.setLimit("min", value, false, errorUtil.toString(message));
      }
      lte(value, message) {
        return this.setLimit("max", value, true, errorUtil.toString(message));
      }
      lt(value, message) {
        return this.setLimit("max", value, false, errorUtil.toString(message));
      }
      setLimit(kind, value, inclusive, message) {
        return new _ZodNumber({
          ...this._def,
          checks: [
            ...this._def.checks,
            {
              kind,
              value,
              inclusive,
              message: errorUtil.toString(message)
            }
          ]
        });
      }
      _addCheck(check) {
        return new _ZodNumber({
          ...this._def,
          checks: [...this._def.checks, check]
        });
      }
      int(message) {
        return this._addCheck({
          kind: "int",
          message: errorUtil.toString(message)
        });
      }
      positive(message) {
        return this._addCheck({
          kind: "min",
          value: 0,
          inclusive: false,
          message: errorUtil.toString(message)
        });
      }
      negative(message) {
        return this._addCheck({
          kind: "max",
          value: 0,
          inclusive: false,
          message: errorUtil.toString(message)
        });
      }
      nonpositive(message) {
        return this._addCheck({
          kind: "max",
          value: 0,
          inclusive: true,
          message: errorUtil.toString(message)
        });
      }
      nonnegative(message) {
        return this._addCheck({
          kind: "min",
          value: 0,
          inclusive: true,
          message: errorUtil.toString(message)
        });
      }
      multipleOf(value, message) {
        return this._addCheck({
          kind: "multipleOf",
          value,
          message: errorUtil.toString(message)
        });
      }
      finite(message) {
        return this._addCheck({
          kind: "finite",
          message: errorUtil.toString(message)
        });
      }
      safe(message) {
        return this._addCheck({
          kind: "min",
          inclusive: true,
          value: Number.MIN_SAFE_INTEGER,
          message: errorUtil.toString(message)
        })._addCheck({
          kind: "max",
          inclusive: true,
          value: Number.MAX_SAFE_INTEGER,
          message: errorUtil.toString(message)
        });
      }
      get minValue() {
        let min = null;
        for (const ch of this._def.checks) {
          if (ch.kind === "min") {
            if (min === null || ch.value > min)
              min = ch.value;
          }
        }
        return min;
      }
      get maxValue() {
        let max2 = null;
        for (const ch of this._def.checks) {
          if (ch.kind === "max") {
            if (max2 === null || ch.value < max2)
              max2 = ch.value;
          }
        }
        return max2;
      }
      get isInt() {
        return !!this._def.checks.find((ch) => ch.kind === "int" || ch.kind === "multipleOf" && util.isInteger(ch.value));
      }
      get isFinite() {
        let max2 = null, min = null;
        for (const ch of this._def.checks) {
          if (ch.kind === "finite" || ch.kind === "int" || ch.kind === "multipleOf") {
            return true;
          } else if (ch.kind === "min") {
            if (min === null || ch.value > min)
              min = ch.value;
          } else if (ch.kind === "max") {
            if (max2 === null || ch.value < max2)
              max2 = ch.value;
          }
        }
        return Number.isFinite(min) && Number.isFinite(max2);
      }
    };
    ZodNumber.create = (params) => {
      return new ZodNumber({
        checks: [],
        typeName: ZodFirstPartyTypeKind.ZodNumber,
        coerce: (params === null || params === void 0 ? void 0 : params.coerce) || false,
        ...processCreateParams(params)
      });
    };
    ZodBigInt = class _ZodBigInt extends ZodType {
      static {
        __name(this, "_ZodBigInt");
      }
      static {
        __name2(this, "ZodBigInt");
      }
      constructor() {
        super(...arguments);
        this.min = this.gte;
        this.max = this.lte;
      }
      _parse(input) {
        if (this._def.coerce) {
          try {
            input.data = BigInt(input.data);
          } catch (_a2) {
            return this._getInvalidInput(input);
          }
        }
        const parsedType = this._getType(input);
        if (parsedType !== ZodParsedType.bigint) {
          return this._getInvalidInput(input);
        }
        let ctx = void 0;
        const status = new ParseStatus();
        for (const check of this._def.checks) {
          if (check.kind === "min") {
            const tooSmall = check.inclusive ? input.data < check.value : input.data <= check.value;
            if (tooSmall) {
              ctx = this._getOrReturnCtx(input, ctx);
              addIssueToContext(ctx, {
                code: ZodIssueCode.too_small,
                type: "bigint",
                minimum: check.value,
                inclusive: check.inclusive,
                message: check.message
              });
              status.dirty();
            }
          } else if (check.kind === "max") {
            const tooBig = check.inclusive ? input.data > check.value : input.data >= check.value;
            if (tooBig) {
              ctx = this._getOrReturnCtx(input, ctx);
              addIssueToContext(ctx, {
                code: ZodIssueCode.too_big,
                type: "bigint",
                maximum: check.value,
                inclusive: check.inclusive,
                message: check.message
              });
              status.dirty();
            }
          } else if (check.kind === "multipleOf") {
            if (input.data % check.value !== BigInt(0)) {
              ctx = this._getOrReturnCtx(input, ctx);
              addIssueToContext(ctx, {
                code: ZodIssueCode.not_multiple_of,
                multipleOf: check.value,
                message: check.message
              });
              status.dirty();
            }
          } else {
            util.assertNever(check);
          }
        }
        return { status: status.value, value: input.data };
      }
      _getInvalidInput(input) {
        const ctx = this._getOrReturnCtx(input);
        addIssueToContext(ctx, {
          code: ZodIssueCode.invalid_type,
          expected: ZodParsedType.bigint,
          received: ctx.parsedType
        });
        return INVALID;
      }
      gte(value, message) {
        return this.setLimit("min", value, true, errorUtil.toString(message));
      }
      gt(value, message) {
        return this.setLimit("min", value, false, errorUtil.toString(message));
      }
      lte(value, message) {
        return this.setLimit("max", value, true, errorUtil.toString(message));
      }
      lt(value, message) {
        return this.setLimit("max", value, false, errorUtil.toString(message));
      }
      setLimit(kind, value, inclusive, message) {
        return new _ZodBigInt({
          ...this._def,
          checks: [
            ...this._def.checks,
            {
              kind,
              value,
              inclusive,
              message: errorUtil.toString(message)
            }
          ]
        });
      }
      _addCheck(check) {
        return new _ZodBigInt({
          ...this._def,
          checks: [...this._def.checks, check]
        });
      }
      positive(message) {
        return this._addCheck({
          kind: "min",
          value: BigInt(0),
          inclusive: false,
          message: errorUtil.toString(message)
        });
      }
      negative(message) {
        return this._addCheck({
          kind: "max",
          value: BigInt(0),
          inclusive: false,
          message: errorUtil.toString(message)
        });
      }
      nonpositive(message) {
        return this._addCheck({
          kind: "max",
          value: BigInt(0),
          inclusive: true,
          message: errorUtil.toString(message)
        });
      }
      nonnegative(message) {
        return this._addCheck({
          kind: "min",
          value: BigInt(0),
          inclusive: true,
          message: errorUtil.toString(message)
        });
      }
      multipleOf(value, message) {
        return this._addCheck({
          kind: "multipleOf",
          value,
          message: errorUtil.toString(message)
        });
      }
      get minValue() {
        let min = null;
        for (const ch of this._def.checks) {
          if (ch.kind === "min") {
            if (min === null || ch.value > min)
              min = ch.value;
          }
        }
        return min;
      }
      get maxValue() {
        let max2 = null;
        for (const ch of this._def.checks) {
          if (ch.kind === "max") {
            if (max2 === null || ch.value < max2)
              max2 = ch.value;
          }
        }
        return max2;
      }
    };
    ZodBigInt.create = (params) => {
      var _a2;
      return new ZodBigInt({
        checks: [],
        typeName: ZodFirstPartyTypeKind.ZodBigInt,
        coerce: (_a2 = params === null || params === void 0 ? void 0 : params.coerce) !== null && _a2 !== void 0 ? _a2 : false,
        ...processCreateParams(params)
      });
    };
    ZodBoolean = class extends ZodType {
      static {
        __name(this, "ZodBoolean");
      }
      static {
        __name2(this, "ZodBoolean");
      }
      _parse(input) {
        if (this._def.coerce) {
          input.data = Boolean(input.data);
        }
        const parsedType = this._getType(input);
        if (parsedType !== ZodParsedType.boolean) {
          const ctx = this._getOrReturnCtx(input);
          addIssueToContext(ctx, {
            code: ZodIssueCode.invalid_type,
            expected: ZodParsedType.boolean,
            received: ctx.parsedType
          });
          return INVALID;
        }
        return OK(input.data);
      }
    };
    ZodBoolean.create = (params) => {
      return new ZodBoolean({
        typeName: ZodFirstPartyTypeKind.ZodBoolean,
        coerce: (params === null || params === void 0 ? void 0 : params.coerce) || false,
        ...processCreateParams(params)
      });
    };
    ZodDate = class _ZodDate extends ZodType {
      static {
        __name(this, "_ZodDate");
      }
      static {
        __name2(this, "ZodDate");
      }
      _parse(input) {
        if (this._def.coerce) {
          input.data = new Date(input.data);
        }
        const parsedType = this._getType(input);
        if (parsedType !== ZodParsedType.date) {
          const ctx2 = this._getOrReturnCtx(input);
          addIssueToContext(ctx2, {
            code: ZodIssueCode.invalid_type,
            expected: ZodParsedType.date,
            received: ctx2.parsedType
          });
          return INVALID;
        }
        if (isNaN(input.data.getTime())) {
          const ctx2 = this._getOrReturnCtx(input);
          addIssueToContext(ctx2, {
            code: ZodIssueCode.invalid_date
          });
          return INVALID;
        }
        const status = new ParseStatus();
        let ctx = void 0;
        for (const check of this._def.checks) {
          if (check.kind === "min") {
            if (input.data.getTime() < check.value) {
              ctx = this._getOrReturnCtx(input, ctx);
              addIssueToContext(ctx, {
                code: ZodIssueCode.too_small,
                message: check.message,
                inclusive: true,
                exact: false,
                minimum: check.value,
                type: "date"
              });
              status.dirty();
            }
          } else if (check.kind === "max") {
            if (input.data.getTime() > check.value) {
              ctx = this._getOrReturnCtx(input, ctx);
              addIssueToContext(ctx, {
                code: ZodIssueCode.too_big,
                message: check.message,
                inclusive: true,
                exact: false,
                maximum: check.value,
                type: "date"
              });
              status.dirty();
            }
          } else {
            util.assertNever(check);
          }
        }
        return {
          status: status.value,
          value: new Date(input.data.getTime())
        };
      }
      _addCheck(check) {
        return new _ZodDate({
          ...this._def,
          checks: [...this._def.checks, check]
        });
      }
      min(minDate, message) {
        return this._addCheck({
          kind: "min",
          value: minDate.getTime(),
          message: errorUtil.toString(message)
        });
      }
      max(maxDate, message) {
        return this._addCheck({
          kind: "max",
          value: maxDate.getTime(),
          message: errorUtil.toString(message)
        });
      }
      get minDate() {
        let min = null;
        for (const ch of this._def.checks) {
          if (ch.kind === "min") {
            if (min === null || ch.value > min)
              min = ch.value;
          }
        }
        return min != null ? new Date(min) : null;
      }
      get maxDate() {
        let max2 = null;
        for (const ch of this._def.checks) {
          if (ch.kind === "max") {
            if (max2 === null || ch.value < max2)
              max2 = ch.value;
          }
        }
        return max2 != null ? new Date(max2) : null;
      }
    };
    ZodDate.create = (params) => {
      return new ZodDate({
        checks: [],
        coerce: (params === null || params === void 0 ? void 0 : params.coerce) || false,
        typeName: ZodFirstPartyTypeKind.ZodDate,
        ...processCreateParams(params)
      });
    };
    ZodSymbol = class extends ZodType {
      static {
        __name(this, "ZodSymbol");
      }
      static {
        __name2(this, "ZodSymbol");
      }
      _parse(input) {
        const parsedType = this._getType(input);
        if (parsedType !== ZodParsedType.symbol) {
          const ctx = this._getOrReturnCtx(input);
          addIssueToContext(ctx, {
            code: ZodIssueCode.invalid_type,
            expected: ZodParsedType.symbol,
            received: ctx.parsedType
          });
          return INVALID;
        }
        return OK(input.data);
      }
    };
    ZodSymbol.create = (params) => {
      return new ZodSymbol({
        typeName: ZodFirstPartyTypeKind.ZodSymbol,
        ...processCreateParams(params)
      });
    };
    ZodUndefined = class extends ZodType {
      static {
        __name(this, "ZodUndefined");
      }
      static {
        __name2(this, "ZodUndefined");
      }
      _parse(input) {
        const parsedType = this._getType(input);
        if (parsedType !== ZodParsedType.undefined) {
          const ctx = this._getOrReturnCtx(input);
          addIssueToContext(ctx, {
            code: ZodIssueCode.invalid_type,
            expected: ZodParsedType.undefined,
            received: ctx.parsedType
          });
          return INVALID;
        }
        return OK(input.data);
      }
    };
    ZodUndefined.create = (params) => {
      return new ZodUndefined({
        typeName: ZodFirstPartyTypeKind.ZodUndefined,
        ...processCreateParams(params)
      });
    };
    ZodNull = class extends ZodType {
      static {
        __name(this, "ZodNull");
      }
      static {
        __name2(this, "ZodNull");
      }
      _parse(input) {
        const parsedType = this._getType(input);
        if (parsedType !== ZodParsedType.null) {
          const ctx = this._getOrReturnCtx(input);
          addIssueToContext(ctx, {
            code: ZodIssueCode.invalid_type,
            expected: ZodParsedType.null,
            received: ctx.parsedType
          });
          return INVALID;
        }
        return OK(input.data);
      }
    };
    ZodNull.create = (params) => {
      return new ZodNull({
        typeName: ZodFirstPartyTypeKind.ZodNull,
        ...processCreateParams(params)
      });
    };
    ZodAny = class extends ZodType {
      static {
        __name(this, "ZodAny");
      }
      static {
        __name2(this, "ZodAny");
      }
      constructor() {
        super(...arguments);
        this._any = true;
      }
      _parse(input) {
        return OK(input.data);
      }
    };
    ZodAny.create = (params) => {
      return new ZodAny({
        typeName: ZodFirstPartyTypeKind.ZodAny,
        ...processCreateParams(params)
      });
    };
    ZodUnknown = class extends ZodType {
      static {
        __name(this, "ZodUnknown");
      }
      static {
        __name2(this, "ZodUnknown");
      }
      constructor() {
        super(...arguments);
        this._unknown = true;
      }
      _parse(input) {
        return OK(input.data);
      }
    };
    ZodUnknown.create = (params) => {
      return new ZodUnknown({
        typeName: ZodFirstPartyTypeKind.ZodUnknown,
        ...processCreateParams(params)
      });
    };
    ZodNever = class extends ZodType {
      static {
        __name(this, "ZodNever");
      }
      static {
        __name2(this, "ZodNever");
      }
      _parse(input) {
        const ctx = this._getOrReturnCtx(input);
        addIssueToContext(ctx, {
          code: ZodIssueCode.invalid_type,
          expected: ZodParsedType.never,
          received: ctx.parsedType
        });
        return INVALID;
      }
    };
    ZodNever.create = (params) => {
      return new ZodNever({
        typeName: ZodFirstPartyTypeKind.ZodNever,
        ...processCreateParams(params)
      });
    };
    ZodVoid = class extends ZodType {
      static {
        __name(this, "ZodVoid");
      }
      static {
        __name2(this, "ZodVoid");
      }
      _parse(input) {
        const parsedType = this._getType(input);
        if (parsedType !== ZodParsedType.undefined) {
          const ctx = this._getOrReturnCtx(input);
          addIssueToContext(ctx, {
            code: ZodIssueCode.invalid_type,
            expected: ZodParsedType.void,
            received: ctx.parsedType
          });
          return INVALID;
        }
        return OK(input.data);
      }
    };
    ZodVoid.create = (params) => {
      return new ZodVoid({
        typeName: ZodFirstPartyTypeKind.ZodVoid,
        ...processCreateParams(params)
      });
    };
    ZodArray = class _ZodArray extends ZodType {
      static {
        __name(this, "_ZodArray");
      }
      static {
        __name2(this, "ZodArray");
      }
      _parse(input) {
        const { ctx, status } = this._processInputParams(input);
        const def = this._def;
        if (ctx.parsedType !== ZodParsedType.array) {
          addIssueToContext(ctx, {
            code: ZodIssueCode.invalid_type,
            expected: ZodParsedType.array,
            received: ctx.parsedType
          });
          return INVALID;
        }
        if (def.exactLength !== null) {
          const tooBig = ctx.data.length > def.exactLength.value;
          const tooSmall = ctx.data.length < def.exactLength.value;
          if (tooBig || tooSmall) {
            addIssueToContext(ctx, {
              code: tooBig ? ZodIssueCode.too_big : ZodIssueCode.too_small,
              minimum: tooSmall ? def.exactLength.value : void 0,
              maximum: tooBig ? def.exactLength.value : void 0,
              type: "array",
              inclusive: true,
              exact: true,
              message: def.exactLength.message
            });
            status.dirty();
          }
        }
        if (def.minLength !== null) {
          if (ctx.data.length < def.minLength.value) {
            addIssueToContext(ctx, {
              code: ZodIssueCode.too_small,
              minimum: def.minLength.value,
              type: "array",
              inclusive: true,
              exact: false,
              message: def.minLength.message
            });
            status.dirty();
          }
        }
        if (def.maxLength !== null) {
          if (ctx.data.length > def.maxLength.value) {
            addIssueToContext(ctx, {
              code: ZodIssueCode.too_big,
              maximum: def.maxLength.value,
              type: "array",
              inclusive: true,
              exact: false,
              message: def.maxLength.message
            });
            status.dirty();
          }
        }
        if (ctx.common.async) {
          return Promise.all([...ctx.data].map((item, i33) => {
            return def.type._parseAsync(new ParseInputLazyPath(ctx, item, ctx.path, i33));
          })).then((result2) => {
            return ParseStatus.mergeArray(status, result2);
          });
        }
        const result = [...ctx.data].map((item, i33) => {
          return def.type._parseSync(new ParseInputLazyPath(ctx, item, ctx.path, i33));
        });
        return ParseStatus.mergeArray(status, result);
      }
      get element() {
        return this._def.type;
      }
      min(minLength, message) {
        return new _ZodArray({
          ...this._def,
          minLength: { value: minLength, message: errorUtil.toString(message) }
        });
      }
      max(maxLength, message) {
        return new _ZodArray({
          ...this._def,
          maxLength: { value: maxLength, message: errorUtil.toString(message) }
        });
      }
      length(len, message) {
        return new _ZodArray({
          ...this._def,
          exactLength: { value: len, message: errorUtil.toString(message) }
        });
      }
      nonempty(message) {
        return this.min(1, message);
      }
    };
    ZodArray.create = (schema, params) => {
      return new ZodArray({
        type: schema,
        minLength: null,
        maxLength: null,
        exactLength: null,
        typeName: ZodFirstPartyTypeKind.ZodArray,
        ...processCreateParams(params)
      });
    };
    __name2(deepPartialify, "deepPartialify");
    ZodObject = class _ZodObject extends ZodType {
      static {
        __name(this, "_ZodObject");
      }
      static {
        __name2(this, "ZodObject");
      }
      constructor() {
        super(...arguments);
        this._cached = null;
        this.nonstrict = this.passthrough;
        this.augment = this.extend;
      }
      _getCached() {
        if (this._cached !== null)
          return this._cached;
        const shape = this._def.shape();
        const keys = util.objectKeys(shape);
        return this._cached = { shape, keys };
      }
      _parse(input) {
        const parsedType = this._getType(input);
        if (parsedType !== ZodParsedType.object) {
          const ctx2 = this._getOrReturnCtx(input);
          addIssueToContext(ctx2, {
            code: ZodIssueCode.invalid_type,
            expected: ZodParsedType.object,
            received: ctx2.parsedType
          });
          return INVALID;
        }
        const { status, ctx } = this._processInputParams(input);
        const { shape, keys: shapeKeys } = this._getCached();
        const extraKeys = [];
        if (!(this._def.catchall instanceof ZodNever && this._def.unknownKeys === "strip")) {
          for (const key in ctx.data) {
            if (!shapeKeys.includes(key)) {
              extraKeys.push(key);
            }
          }
        }
        const pairs = [];
        for (const key of shapeKeys) {
          const keyValidator = shape[key];
          const value = ctx.data[key];
          pairs.push({
            key: { status: "valid", value: key },
            value: keyValidator._parse(new ParseInputLazyPath(ctx, value, ctx.path, key)),
            alwaysSet: key in ctx.data
          });
        }
        if (this._def.catchall instanceof ZodNever) {
          const unknownKeys = this._def.unknownKeys;
          if (unknownKeys === "passthrough") {
            for (const key of extraKeys) {
              pairs.push({
                key: { status: "valid", value: key },
                value: { status: "valid", value: ctx.data[key] }
              });
            }
          } else if (unknownKeys === "strict") {
            if (extraKeys.length > 0) {
              addIssueToContext(ctx, {
                code: ZodIssueCode.unrecognized_keys,
                keys: extraKeys
              });
              status.dirty();
            }
          } else if (unknownKeys === "strip") ;
          else {
            throw new Error(`Internal ZodObject error: invalid unknownKeys value.`);
          }
        } else {
          const catchall = this._def.catchall;
          for (const key of extraKeys) {
            const value = ctx.data[key];
            pairs.push({
              key: { status: "valid", value: key },
              value: catchall._parse(
                new ParseInputLazyPath(ctx, value, ctx.path, key)
                //, ctx.child(key), value, getParsedType(value)
              ),
              alwaysSet: key in ctx.data
            });
          }
        }
        if (ctx.common.async) {
          return Promise.resolve().then(async () => {
            const syncPairs = [];
            for (const pair of pairs) {
              const key = await pair.key;
              const value = await pair.value;
              syncPairs.push({
                key,
                value,
                alwaysSet: pair.alwaysSet
              });
            }
            return syncPairs;
          }).then((syncPairs) => {
            return ParseStatus.mergeObjectSync(status, syncPairs);
          });
        } else {
          return ParseStatus.mergeObjectSync(status, pairs);
        }
      }
      get shape() {
        return this._def.shape();
      }
      strict(message) {
        errorUtil.errToObj;
        return new _ZodObject({
          ...this._def,
          unknownKeys: "strict",
          ...message !== void 0 ? {
            errorMap: /* @__PURE__ */ __name2((issue, ctx) => {
              var _a2, _b2, _c, _d;
              const defaultError = (_c = (_b2 = (_a2 = this._def).errorMap) === null || _b2 === void 0 ? void 0 : _b2.call(_a2, issue, ctx).message) !== null && _c !== void 0 ? _c : ctx.defaultError;
              if (issue.code === "unrecognized_keys")
                return {
                  message: (_d = errorUtil.errToObj(message).message) !== null && _d !== void 0 ? _d : defaultError
                };
              return {
                message: defaultError
              };
            }, "errorMap")
          } : {}
        });
      }
      strip() {
        return new _ZodObject({
          ...this._def,
          unknownKeys: "strip"
        });
      }
      passthrough() {
        return new _ZodObject({
          ...this._def,
          unknownKeys: "passthrough"
        });
      }
      // const AugmentFactory =
      //   <Def extends ZodObjectDef>(def: Def) =>
      //   <Augmentation extends ZodRawShape>(
      //     augmentation: Augmentation
      //   ): ZodObject<
      //     extendShape<ReturnType<Def["shape"]>, Augmentation>,
      //     Def["unknownKeys"],
      //     Def["catchall"]
      //   > => {
      //     return new ZodObject({
      //       ...def,
      //       shape: () => ({
      //         ...def.shape(),
      //         ...augmentation,
      //       }),
      //     }) as any;
      //   };
      extend(augmentation) {
        return new _ZodObject({
          ...this._def,
          shape: /* @__PURE__ */ __name2(() => ({
            ...this._def.shape(),
            ...augmentation
          }), "shape")
        });
      }
      /**
       * Prior to zod@1.0.12 there was a bug in the
       * inferred type of merged objects. Please
       * upgrade if you are experiencing issues.
       */
      merge(merging) {
        const merged = new _ZodObject({
          unknownKeys: merging._def.unknownKeys,
          catchall: merging._def.catchall,
          shape: /* @__PURE__ */ __name2(() => ({
            ...this._def.shape(),
            ...merging._def.shape()
          }), "shape"),
          typeName: ZodFirstPartyTypeKind.ZodObject
        });
        return merged;
      }
      // merge<
      //   Incoming extends AnyZodObject,
      //   Augmentation extends Incoming["shape"],
      //   NewOutput extends {
      //     [k in keyof Augmentation | keyof Output]: k extends keyof Augmentation
      //       ? Augmentation[k]["_output"]
      //       : k extends keyof Output
      //       ? Output[k]
      //       : never;
      //   },
      //   NewInput extends {
      //     [k in keyof Augmentation | keyof Input]: k extends keyof Augmentation
      //       ? Augmentation[k]["_input"]
      //       : k extends keyof Input
      //       ? Input[k]
      //       : never;
      //   }
      // >(
      //   merging: Incoming
      // ): ZodObject<
      //   extendShape<T, ReturnType<Incoming["_def"]["shape"]>>,
      //   Incoming["_def"]["unknownKeys"],
      //   Incoming["_def"]["catchall"],
      //   NewOutput,
      //   NewInput
      // > {
      //   const merged: any = new ZodObject({
      //     unknownKeys: merging._def.unknownKeys,
      //     catchall: merging._def.catchall,
      //     shape: () =>
      //       objectUtil.mergeShapes(this._def.shape(), merging._def.shape()),
      //     typeName: ZodFirstPartyTypeKind.ZodObject,
      //   }) as any;
      //   return merged;
      // }
      setKey(key, schema) {
        return this.augment({ [key]: schema });
      }
      // merge<Incoming extends AnyZodObject>(
      //   merging: Incoming
      // ): //ZodObject<T & Incoming["_shape"], UnknownKeys, Catchall> = (merging) => {
      // ZodObject<
      //   extendShape<T, ReturnType<Incoming["_def"]["shape"]>>,
      //   Incoming["_def"]["unknownKeys"],
      //   Incoming["_def"]["catchall"]
      // > {
      //   // const mergedShape = objectUtil.mergeShapes(
      //   //   this._def.shape(),
      //   //   merging._def.shape()
      //   // );
      //   const merged: any = new ZodObject({
      //     unknownKeys: merging._def.unknownKeys,
      //     catchall: merging._def.catchall,
      //     shape: () =>
      //       objectUtil.mergeShapes(this._def.shape(), merging._def.shape()),
      //     typeName: ZodFirstPartyTypeKind.ZodObject,
      //   }) as any;
      //   return merged;
      // }
      catchall(index2) {
        return new _ZodObject({
          ...this._def,
          catchall: index2
        });
      }
      pick(mask) {
        const shape = {};
        util.objectKeys(mask).forEach((key) => {
          if (mask[key] && this.shape[key]) {
            shape[key] = this.shape[key];
          }
        });
        return new _ZodObject({
          ...this._def,
          shape: /* @__PURE__ */ __name2(() => shape, "shape")
        });
      }
      omit(mask) {
        const shape = {};
        util.objectKeys(this.shape).forEach((key) => {
          if (!mask[key]) {
            shape[key] = this.shape[key];
          }
        });
        return new _ZodObject({
          ...this._def,
          shape: /* @__PURE__ */ __name2(() => shape, "shape")
        });
      }
      /**
       * @deprecated
       */
      deepPartial() {
        return deepPartialify(this);
      }
      partial(mask) {
        const newShape = {};
        util.objectKeys(this.shape).forEach((key) => {
          const fieldSchema = this.shape[key];
          if (mask && !mask[key]) {
            newShape[key] = fieldSchema;
          } else {
            newShape[key] = fieldSchema.optional();
          }
        });
        return new _ZodObject({
          ...this._def,
          shape: /* @__PURE__ */ __name2(() => newShape, "shape")
        });
      }
      required(mask) {
        const newShape = {};
        util.objectKeys(this.shape).forEach((key) => {
          if (mask && !mask[key]) {
            newShape[key] = this.shape[key];
          } else {
            const fieldSchema = this.shape[key];
            let newField = fieldSchema;
            while (newField instanceof ZodOptional) {
              newField = newField._def.innerType;
            }
            newShape[key] = newField;
          }
        });
        return new _ZodObject({
          ...this._def,
          shape: /* @__PURE__ */ __name2(() => newShape, "shape")
        });
      }
      keyof() {
        return createZodEnum(util.objectKeys(this.shape));
      }
    };
    ZodObject.create = (shape, params) => {
      return new ZodObject({
        shape: /* @__PURE__ */ __name2(() => shape, "shape"),
        unknownKeys: "strip",
        catchall: ZodNever.create(),
        typeName: ZodFirstPartyTypeKind.ZodObject,
        ...processCreateParams(params)
      });
    };
    ZodObject.strictCreate = (shape, params) => {
      return new ZodObject({
        shape: /* @__PURE__ */ __name2(() => shape, "shape"),
        unknownKeys: "strict",
        catchall: ZodNever.create(),
        typeName: ZodFirstPartyTypeKind.ZodObject,
        ...processCreateParams(params)
      });
    };
    ZodObject.lazycreate = (shape, params) => {
      return new ZodObject({
        shape,
        unknownKeys: "strip",
        catchall: ZodNever.create(),
        typeName: ZodFirstPartyTypeKind.ZodObject,
        ...processCreateParams(params)
      });
    };
    ZodUnion = class extends ZodType {
      static {
        __name(this, "ZodUnion");
      }
      static {
        __name2(this, "ZodUnion");
      }
      _parse(input) {
        const { ctx } = this._processInputParams(input);
        const options = this._def.options;
        function handleResults(results) {
          for (const result of results) {
            if (result.result.status === "valid") {
              return result.result;
            }
          }
          for (const result of results) {
            if (result.result.status === "dirty") {
              ctx.common.issues.push(...result.ctx.common.issues);
              return result.result;
            }
          }
          const unionErrors = results.map((result) => new ZodError(result.ctx.common.issues));
          addIssueToContext(ctx, {
            code: ZodIssueCode.invalid_union,
            unionErrors
          });
          return INVALID;
        }
        __name(handleResults, "handleResults");
        __name2(handleResults, "handleResults");
        if (ctx.common.async) {
          return Promise.all(options.map(async (option) => {
            const childCtx = {
              ...ctx,
              common: {
                ...ctx.common,
                issues: []
              },
              parent: null
            };
            return {
              result: await option._parseAsync({
                data: ctx.data,
                path: ctx.path,
                parent: childCtx
              }),
              ctx: childCtx
            };
          })).then(handleResults);
        } else {
          let dirty = void 0;
          const issues = [];
          for (const option of options) {
            const childCtx = {
              ...ctx,
              common: {
                ...ctx.common,
                issues: []
              },
              parent: null
            };
            const result = option._parseSync({
              data: ctx.data,
              path: ctx.path,
              parent: childCtx
            });
            if (result.status === "valid") {
              return result;
            } else if (result.status === "dirty" && !dirty) {
              dirty = { result, ctx: childCtx };
            }
            if (childCtx.common.issues.length) {
              issues.push(childCtx.common.issues);
            }
          }
          if (dirty) {
            ctx.common.issues.push(...dirty.ctx.common.issues);
            return dirty.result;
          }
          const unionErrors = issues.map((issues2) => new ZodError(issues2));
          addIssueToContext(ctx, {
            code: ZodIssueCode.invalid_union,
            unionErrors
          });
          return INVALID;
        }
      }
      get options() {
        return this._def.options;
      }
    };
    ZodUnion.create = (types, params) => {
      return new ZodUnion({
        options: types,
        typeName: ZodFirstPartyTypeKind.ZodUnion,
        ...processCreateParams(params)
      });
    };
    getDiscriminator = /* @__PURE__ */ __name2((type) => {
      if (type instanceof ZodLazy) {
        return getDiscriminator(type.schema);
      } else if (type instanceof ZodEffects) {
        return getDiscriminator(type.innerType());
      } else if (type instanceof ZodLiteral) {
        return [type.value];
      } else if (type instanceof ZodEnum) {
        return type.options;
      } else if (type instanceof ZodNativeEnum) {
        return util.objectValues(type.enum);
      } else if (type instanceof ZodDefault) {
        return getDiscriminator(type._def.innerType);
      } else if (type instanceof ZodUndefined) {
        return [void 0];
      } else if (type instanceof ZodNull) {
        return [null];
      } else if (type instanceof ZodOptional) {
        return [void 0, ...getDiscriminator(type.unwrap())];
      } else if (type instanceof ZodNullable) {
        return [null, ...getDiscriminator(type.unwrap())];
      } else if (type instanceof ZodBranded) {
        return getDiscriminator(type.unwrap());
      } else if (type instanceof ZodReadonly) {
        return getDiscriminator(type.unwrap());
      } else if (type instanceof ZodCatch) {
        return getDiscriminator(type._def.innerType);
      } else {
        return [];
      }
    }, "getDiscriminator");
    ZodDiscriminatedUnion = class _ZodDiscriminatedUnion extends ZodType {
      static {
        __name(this, "_ZodDiscriminatedUnion");
      }
      static {
        __name2(this, "ZodDiscriminatedUnion");
      }
      _parse(input) {
        const { ctx } = this._processInputParams(input);
        if (ctx.parsedType !== ZodParsedType.object) {
          addIssueToContext(ctx, {
            code: ZodIssueCode.invalid_type,
            expected: ZodParsedType.object,
            received: ctx.parsedType
          });
          return INVALID;
        }
        const discriminator = this.discriminator;
        const discriminatorValue = ctx.data[discriminator];
        const option = this.optionsMap.get(discriminatorValue);
        if (!option) {
          addIssueToContext(ctx, {
            code: ZodIssueCode.invalid_union_discriminator,
            options: Array.from(this.optionsMap.keys()),
            path: [discriminator]
          });
          return INVALID;
        }
        if (ctx.common.async) {
          return option._parseAsync({
            data: ctx.data,
            path: ctx.path,
            parent: ctx
          });
        } else {
          return option._parseSync({
            data: ctx.data,
            path: ctx.path,
            parent: ctx
          });
        }
      }
      get discriminator() {
        return this._def.discriminator;
      }
      get options() {
        return this._def.options;
      }
      get optionsMap() {
        return this._def.optionsMap;
      }
      /**
       * The constructor of the discriminated union schema. Its behaviour is very similar to that of the normal z.union() constructor.
       * However, it only allows a union of objects, all of which need to share a discriminator property. This property must
       * have a different value for each object in the union.
       * @param discriminator the name of the discriminator property
       * @param types an array of object schemas
       * @param params
       */
      static create(discriminator, options, params) {
        const optionsMap = /* @__PURE__ */ new Map();
        for (const type of options) {
          const discriminatorValues = getDiscriminator(type.shape[discriminator]);
          if (!discriminatorValues.length) {
            throw new Error(`A discriminator value for key \`${discriminator}\` could not be extracted from all schema options`);
          }
          for (const value of discriminatorValues) {
            if (optionsMap.has(value)) {
              throw new Error(`Discriminator property ${String(discriminator)} has duplicate value ${String(value)}`);
            }
            optionsMap.set(value, type);
          }
        }
        return new _ZodDiscriminatedUnion({
          typeName: ZodFirstPartyTypeKind.ZodDiscriminatedUnion,
          discriminator,
          options,
          optionsMap,
          ...processCreateParams(params)
        });
      }
    };
    __name2(mergeValues, "mergeValues");
    ZodIntersection = class extends ZodType {
      static {
        __name(this, "ZodIntersection");
      }
      static {
        __name2(this, "ZodIntersection");
      }
      _parse(input) {
        const { status, ctx } = this._processInputParams(input);
        const handleParsed = /* @__PURE__ */ __name2((parsedLeft, parsedRight) => {
          if (isAborted(parsedLeft) || isAborted(parsedRight)) {
            return INVALID;
          }
          const merged = mergeValues(parsedLeft.value, parsedRight.value);
          if (!merged.valid) {
            addIssueToContext(ctx, {
              code: ZodIssueCode.invalid_intersection_types
            });
            return INVALID;
          }
          if (isDirty(parsedLeft) || isDirty(parsedRight)) {
            status.dirty();
          }
          return { status: status.value, value: merged.data };
        }, "handleParsed");
        if (ctx.common.async) {
          return Promise.all([
            this._def.left._parseAsync({
              data: ctx.data,
              path: ctx.path,
              parent: ctx
            }),
            this._def.right._parseAsync({
              data: ctx.data,
              path: ctx.path,
              parent: ctx
            })
          ]).then(([left, right]) => handleParsed(left, right));
        } else {
          return handleParsed(this._def.left._parseSync({
            data: ctx.data,
            path: ctx.path,
            parent: ctx
          }), this._def.right._parseSync({
            data: ctx.data,
            path: ctx.path,
            parent: ctx
          }));
        }
      }
    };
    ZodIntersection.create = (left, right, params) => {
      return new ZodIntersection({
        left,
        right,
        typeName: ZodFirstPartyTypeKind.ZodIntersection,
        ...processCreateParams(params)
      });
    };
    ZodTuple = class _ZodTuple extends ZodType {
      static {
        __name(this, "_ZodTuple");
      }
      static {
        __name2(this, "ZodTuple");
      }
      _parse(input) {
        const { status, ctx } = this._processInputParams(input);
        if (ctx.parsedType !== ZodParsedType.array) {
          addIssueToContext(ctx, {
            code: ZodIssueCode.invalid_type,
            expected: ZodParsedType.array,
            received: ctx.parsedType
          });
          return INVALID;
        }
        if (ctx.data.length < this._def.items.length) {
          addIssueToContext(ctx, {
            code: ZodIssueCode.too_small,
            minimum: this._def.items.length,
            inclusive: true,
            exact: false,
            type: "array"
          });
          return INVALID;
        }
        const rest = this._def.rest;
        if (!rest && ctx.data.length > this._def.items.length) {
          addIssueToContext(ctx, {
            code: ZodIssueCode.too_big,
            maximum: this._def.items.length,
            inclusive: true,
            exact: false,
            type: "array"
          });
          status.dirty();
        }
        const items = [...ctx.data].map((item, itemIndex) => {
          const schema = this._def.items[itemIndex] || this._def.rest;
          if (!schema)
            return null;
          return schema._parse(new ParseInputLazyPath(ctx, item, ctx.path, itemIndex));
        }).filter((x22) => !!x22);
        if (ctx.common.async) {
          return Promise.all(items).then((results) => {
            return ParseStatus.mergeArray(status, results);
          });
        } else {
          return ParseStatus.mergeArray(status, items);
        }
      }
      get items() {
        return this._def.items;
      }
      rest(rest) {
        return new _ZodTuple({
          ...this._def,
          rest
        });
      }
    };
    ZodTuple.create = (schemas, params) => {
      if (!Array.isArray(schemas)) {
        throw new Error("You must pass an array of schemas to z.tuple([ ... ])");
      }
      return new ZodTuple({
        items: schemas,
        typeName: ZodFirstPartyTypeKind.ZodTuple,
        rest: null,
        ...processCreateParams(params)
      });
    };
    ZodRecord = class _ZodRecord extends ZodType {
      static {
        __name(this, "_ZodRecord");
      }
      static {
        __name2(this, "ZodRecord");
      }
      get keySchema() {
        return this._def.keyType;
      }
      get valueSchema() {
        return this._def.valueType;
      }
      _parse(input) {
        const { status, ctx } = this._processInputParams(input);
        if (ctx.parsedType !== ZodParsedType.object) {
          addIssueToContext(ctx, {
            code: ZodIssueCode.invalid_type,
            expected: ZodParsedType.object,
            received: ctx.parsedType
          });
          return INVALID;
        }
        const pairs = [];
        const keyType = this._def.keyType;
        const valueType = this._def.valueType;
        for (const key in ctx.data) {
          pairs.push({
            key: keyType._parse(new ParseInputLazyPath(ctx, key, ctx.path, key)),
            value: valueType._parse(new ParseInputLazyPath(ctx, ctx.data[key], ctx.path, key)),
            alwaysSet: key in ctx.data
          });
        }
        if (ctx.common.async) {
          return ParseStatus.mergeObjectAsync(status, pairs);
        } else {
          return ParseStatus.mergeObjectSync(status, pairs);
        }
      }
      get element() {
        return this._def.valueType;
      }
      static create(first, second, third) {
        if (second instanceof ZodType) {
          return new _ZodRecord({
            keyType: first,
            valueType: second,
            typeName: ZodFirstPartyTypeKind.ZodRecord,
            ...processCreateParams(third)
          });
        }
        return new _ZodRecord({
          keyType: ZodString.create(),
          valueType: first,
          typeName: ZodFirstPartyTypeKind.ZodRecord,
          ...processCreateParams(second)
        });
      }
    };
    ZodMap = class extends ZodType {
      static {
        __name(this, "ZodMap");
      }
      static {
        __name2(this, "ZodMap");
      }
      get keySchema() {
        return this._def.keyType;
      }
      get valueSchema() {
        return this._def.valueType;
      }
      _parse(input) {
        const { status, ctx } = this._processInputParams(input);
        if (ctx.parsedType !== ZodParsedType.map) {
          addIssueToContext(ctx, {
            code: ZodIssueCode.invalid_type,
            expected: ZodParsedType.map,
            received: ctx.parsedType
          });
          return INVALID;
        }
        const keyType = this._def.keyType;
        const valueType = this._def.valueType;
        const pairs = [...ctx.data.entries()].map(([key, value], index2) => {
          return {
            key: keyType._parse(new ParseInputLazyPath(ctx, key, ctx.path, [index2, "key"])),
            value: valueType._parse(new ParseInputLazyPath(ctx, value, ctx.path, [index2, "value"]))
          };
        });
        if (ctx.common.async) {
          const finalMap = /* @__PURE__ */ new Map();
          return Promise.resolve().then(async () => {
            for (const pair of pairs) {
              const key = await pair.key;
              const value = await pair.value;
              if (key.status === "aborted" || value.status === "aborted") {
                return INVALID;
              }
              if (key.status === "dirty" || value.status === "dirty") {
                status.dirty();
              }
              finalMap.set(key.value, value.value);
            }
            return { status: status.value, value: finalMap };
          });
        } else {
          const finalMap = /* @__PURE__ */ new Map();
          for (const pair of pairs) {
            const key = pair.key;
            const value = pair.value;
            if (key.status === "aborted" || value.status === "aborted") {
              return INVALID;
            }
            if (key.status === "dirty" || value.status === "dirty") {
              status.dirty();
            }
            finalMap.set(key.value, value.value);
          }
          return { status: status.value, value: finalMap };
        }
      }
    };
    ZodMap.create = (keyType, valueType, params) => {
      return new ZodMap({
        valueType,
        keyType,
        typeName: ZodFirstPartyTypeKind.ZodMap,
        ...processCreateParams(params)
      });
    };
    ZodSet = class _ZodSet extends ZodType {
      static {
        __name(this, "_ZodSet");
      }
      static {
        __name2(this, "ZodSet");
      }
      _parse(input) {
        const { status, ctx } = this._processInputParams(input);
        if (ctx.parsedType !== ZodParsedType.set) {
          addIssueToContext(ctx, {
            code: ZodIssueCode.invalid_type,
            expected: ZodParsedType.set,
            received: ctx.parsedType
          });
          return INVALID;
        }
        const def = this._def;
        if (def.minSize !== null) {
          if (ctx.data.size < def.minSize.value) {
            addIssueToContext(ctx, {
              code: ZodIssueCode.too_small,
              minimum: def.minSize.value,
              type: "set",
              inclusive: true,
              exact: false,
              message: def.minSize.message
            });
            status.dirty();
          }
        }
        if (def.maxSize !== null) {
          if (ctx.data.size > def.maxSize.value) {
            addIssueToContext(ctx, {
              code: ZodIssueCode.too_big,
              maximum: def.maxSize.value,
              type: "set",
              inclusive: true,
              exact: false,
              message: def.maxSize.message
            });
            status.dirty();
          }
        }
        const valueType = this._def.valueType;
        function finalizeSet(elements3) {
          const parsedSet = /* @__PURE__ */ new Set();
          for (const element of elements3) {
            if (element.status === "aborted")
              return INVALID;
            if (element.status === "dirty")
              status.dirty();
            parsedSet.add(element.value);
          }
          return { status: status.value, value: parsedSet };
        }
        __name(finalizeSet, "finalizeSet");
        __name2(finalizeSet, "finalizeSet");
        const elements2 = [...ctx.data.values()].map((item, i33) => valueType._parse(new ParseInputLazyPath(ctx, item, ctx.path, i33)));
        if (ctx.common.async) {
          return Promise.all(elements2).then((elements3) => finalizeSet(elements3));
        } else {
          return finalizeSet(elements2);
        }
      }
      min(minSize, message) {
        return new _ZodSet({
          ...this._def,
          minSize: { value: minSize, message: errorUtil.toString(message) }
        });
      }
      max(maxSize, message) {
        return new _ZodSet({
          ...this._def,
          maxSize: { value: maxSize, message: errorUtil.toString(message) }
        });
      }
      size(size, message) {
        return this.min(size, message).max(size, message);
      }
      nonempty(message) {
        return this.min(1, message);
      }
    };
    ZodSet.create = (valueType, params) => {
      return new ZodSet({
        valueType,
        minSize: null,
        maxSize: null,
        typeName: ZodFirstPartyTypeKind.ZodSet,
        ...processCreateParams(params)
      });
    };
    ZodFunction = class _ZodFunction extends ZodType {
      static {
        __name(this, "_ZodFunction");
      }
      static {
        __name2(this, "ZodFunction");
      }
      constructor() {
        super(...arguments);
        this.validate = this.implement;
      }
      _parse(input) {
        const { ctx } = this._processInputParams(input);
        if (ctx.parsedType !== ZodParsedType.function) {
          addIssueToContext(ctx, {
            code: ZodIssueCode.invalid_type,
            expected: ZodParsedType.function,
            received: ctx.parsedType
          });
          return INVALID;
        }
        function makeArgsIssue(args, error) {
          return makeIssue({
            data: args,
            path: ctx.path,
            errorMaps: [
              ctx.common.contextualErrorMap,
              ctx.schemaErrorMap,
              getErrorMap(),
              errorMap
            ].filter((x22) => !!x22),
            issueData: {
              code: ZodIssueCode.invalid_arguments,
              argumentsError: error
            }
          });
        }
        __name(makeArgsIssue, "makeArgsIssue");
        __name2(makeArgsIssue, "makeArgsIssue");
        function makeReturnsIssue(returns, error) {
          return makeIssue({
            data: returns,
            path: ctx.path,
            errorMaps: [
              ctx.common.contextualErrorMap,
              ctx.schemaErrorMap,
              getErrorMap(),
              errorMap
            ].filter((x22) => !!x22),
            issueData: {
              code: ZodIssueCode.invalid_return_type,
              returnTypeError: error
            }
          });
        }
        __name(makeReturnsIssue, "makeReturnsIssue");
        __name2(makeReturnsIssue, "makeReturnsIssue");
        const params = { errorMap: ctx.common.contextualErrorMap };
        const fn = ctx.data;
        if (this._def.returns instanceof ZodPromise) {
          const me2 = this;
          return OK(async function(...args) {
            const error = new ZodError([]);
            const parsedArgs = await me2._def.args.parseAsync(args, params).catch((e2) => {
              error.addIssue(makeArgsIssue(args, e2));
              throw error;
            });
            const result = await Reflect.apply(fn, this, parsedArgs);
            const parsedReturns = await me2._def.returns._def.type.parseAsync(result, params).catch((e2) => {
              error.addIssue(makeReturnsIssue(result, e2));
              throw error;
            });
            return parsedReturns;
          });
        } else {
          const me2 = this;
          return OK(function(...args) {
            const parsedArgs = me2._def.args.safeParse(args, params);
            if (!parsedArgs.success) {
              throw new ZodError([makeArgsIssue(args, parsedArgs.error)]);
            }
            const result = Reflect.apply(fn, this, parsedArgs.data);
            const parsedReturns = me2._def.returns.safeParse(result, params);
            if (!parsedReturns.success) {
              throw new ZodError([makeReturnsIssue(result, parsedReturns.error)]);
            }
            return parsedReturns.data;
          });
        }
      }
      parameters() {
        return this._def.args;
      }
      returnType() {
        return this._def.returns;
      }
      args(...items) {
        return new _ZodFunction({
          ...this._def,
          args: ZodTuple.create(items).rest(ZodUnknown.create())
        });
      }
      returns(returnType) {
        return new _ZodFunction({
          ...this._def,
          returns: returnType
        });
      }
      implement(func) {
        const validatedFunc = this.parse(func);
        return validatedFunc;
      }
      strictImplement(func) {
        const validatedFunc = this.parse(func);
        return validatedFunc;
      }
      static create(args, returns, params) {
        return new _ZodFunction({
          args: args ? args : ZodTuple.create([]).rest(ZodUnknown.create()),
          returns: returns || ZodUnknown.create(),
          typeName: ZodFirstPartyTypeKind.ZodFunction,
          ...processCreateParams(params)
        });
      }
    };
    ZodLazy = class extends ZodType {
      static {
        __name(this, "ZodLazy");
      }
      static {
        __name2(this, "ZodLazy");
      }
      get schema() {
        return this._def.getter();
      }
      _parse(input) {
        const { ctx } = this._processInputParams(input);
        const lazySchema = this._def.getter();
        return lazySchema._parse({ data: ctx.data, path: ctx.path, parent: ctx });
      }
    };
    ZodLazy.create = (getter, params) => {
      return new ZodLazy({
        getter,
        typeName: ZodFirstPartyTypeKind.ZodLazy,
        ...processCreateParams(params)
      });
    };
    ZodLiteral = class extends ZodType {
      static {
        __name(this, "ZodLiteral");
      }
      static {
        __name2(this, "ZodLiteral");
      }
      _parse(input) {
        if (input.data !== this._def.value) {
          const ctx = this._getOrReturnCtx(input);
          addIssueToContext(ctx, {
            received: ctx.data,
            code: ZodIssueCode.invalid_literal,
            expected: this._def.value
          });
          return INVALID;
        }
        return { status: "valid", value: input.data };
      }
      get value() {
        return this._def.value;
      }
    };
    ZodLiteral.create = (value, params) => {
      return new ZodLiteral({
        value,
        typeName: ZodFirstPartyTypeKind.ZodLiteral,
        ...processCreateParams(params)
      });
    };
    __name2(createZodEnum, "createZodEnum");
    ZodEnum = class _ZodEnum extends ZodType {
      static {
        __name(this, "_ZodEnum");
      }
      static {
        __name2(this, "ZodEnum");
      }
      constructor() {
        super(...arguments);
        _ZodEnum_cache.set(this, void 0);
      }
      _parse(input) {
        if (typeof input.data !== "string") {
          const ctx = this._getOrReturnCtx(input);
          const expectedValues = this._def.values;
          addIssueToContext(ctx, {
            expected: util.joinValues(expectedValues),
            received: ctx.parsedType,
            code: ZodIssueCode.invalid_type
          });
          return INVALID;
        }
        if (!__classPrivateFieldGet(this, _ZodEnum_cache, "f")) {
          __classPrivateFieldSet(this, _ZodEnum_cache, new Set(this._def.values), "f");
        }
        if (!__classPrivateFieldGet(this, _ZodEnum_cache, "f").has(input.data)) {
          const ctx = this._getOrReturnCtx(input);
          const expectedValues = this._def.values;
          addIssueToContext(ctx, {
            received: ctx.data,
            code: ZodIssueCode.invalid_enum_value,
            options: expectedValues
          });
          return INVALID;
        }
        return OK(input.data);
      }
      get options() {
        return this._def.values;
      }
      get enum() {
        const enumValues = {};
        for (const val of this._def.values) {
          enumValues[val] = val;
        }
        return enumValues;
      }
      get Values() {
        const enumValues = {};
        for (const val of this._def.values) {
          enumValues[val] = val;
        }
        return enumValues;
      }
      get Enum() {
        const enumValues = {};
        for (const val of this._def.values) {
          enumValues[val] = val;
        }
        return enumValues;
      }
      extract(values, newDef = this._def) {
        return _ZodEnum.create(values, {
          ...this._def,
          ...newDef
        });
      }
      exclude(values, newDef = this._def) {
        return _ZodEnum.create(this.options.filter((opt) => !values.includes(opt)), {
          ...this._def,
          ...newDef
        });
      }
    };
    _ZodEnum_cache = /* @__PURE__ */ new WeakMap();
    ZodEnum.create = createZodEnum;
    ZodNativeEnum = class extends ZodType {
      static {
        __name(this, "ZodNativeEnum");
      }
      static {
        __name2(this, "ZodNativeEnum");
      }
      constructor() {
        super(...arguments);
        _ZodNativeEnum_cache.set(this, void 0);
      }
      _parse(input) {
        const nativeEnumValues = util.getValidEnumValues(this._def.values);
        const ctx = this._getOrReturnCtx(input);
        if (ctx.parsedType !== ZodParsedType.string && ctx.parsedType !== ZodParsedType.number) {
          const expectedValues = util.objectValues(nativeEnumValues);
          addIssueToContext(ctx, {
            expected: util.joinValues(expectedValues),
            received: ctx.parsedType,
            code: ZodIssueCode.invalid_type
          });
          return INVALID;
        }
        if (!__classPrivateFieldGet(this, _ZodNativeEnum_cache, "f")) {
          __classPrivateFieldSet(this, _ZodNativeEnum_cache, new Set(util.getValidEnumValues(this._def.values)), "f");
        }
        if (!__classPrivateFieldGet(this, _ZodNativeEnum_cache, "f").has(input.data)) {
          const expectedValues = util.objectValues(nativeEnumValues);
          addIssueToContext(ctx, {
            received: ctx.data,
            code: ZodIssueCode.invalid_enum_value,
            options: expectedValues
          });
          return INVALID;
        }
        return OK(input.data);
      }
      get enum() {
        return this._def.values;
      }
    };
    _ZodNativeEnum_cache = /* @__PURE__ */ new WeakMap();
    ZodNativeEnum.create = (values, params) => {
      return new ZodNativeEnum({
        values,
        typeName: ZodFirstPartyTypeKind.ZodNativeEnum,
        ...processCreateParams(params)
      });
    };
    ZodPromise = class extends ZodType {
      static {
        __name(this, "ZodPromise");
      }
      static {
        __name2(this, "ZodPromise");
      }
      unwrap() {
        return this._def.type;
      }
      _parse(input) {
        const { ctx } = this._processInputParams(input);
        if (ctx.parsedType !== ZodParsedType.promise && ctx.common.async === false) {
          addIssueToContext(ctx, {
            code: ZodIssueCode.invalid_type,
            expected: ZodParsedType.promise,
            received: ctx.parsedType
          });
          return INVALID;
        }
        const promisified = ctx.parsedType === ZodParsedType.promise ? ctx.data : Promise.resolve(ctx.data);
        return OK(promisified.then((data) => {
          return this._def.type.parseAsync(data, {
            path: ctx.path,
            errorMap: ctx.common.contextualErrorMap
          });
        }));
      }
    };
    ZodPromise.create = (schema, params) => {
      return new ZodPromise({
        type: schema,
        typeName: ZodFirstPartyTypeKind.ZodPromise,
        ...processCreateParams(params)
      });
    };
    ZodEffects = class extends ZodType {
      static {
        __name(this, "ZodEffects");
      }
      static {
        __name2(this, "ZodEffects");
      }
      innerType() {
        return this._def.schema;
      }
      sourceType() {
        return this._def.schema._def.typeName === ZodFirstPartyTypeKind.ZodEffects ? this._def.schema.sourceType() : this._def.schema;
      }
      _parse(input) {
        const { status, ctx } = this._processInputParams(input);
        const effect = this._def.effect || null;
        const checkCtx = {
          addIssue: /* @__PURE__ */ __name2((arg) => {
            addIssueToContext(ctx, arg);
            if (arg.fatal) {
              status.abort();
            } else {
              status.dirty();
            }
          }, "addIssue"),
          get path() {
            return ctx.path;
          }
        };
        checkCtx.addIssue = checkCtx.addIssue.bind(checkCtx);
        if (effect.type === "preprocess") {
          const processed = effect.transform(ctx.data, checkCtx);
          if (ctx.common.async) {
            return Promise.resolve(processed).then(async (processed2) => {
              if (status.value === "aborted")
                return INVALID;
              const result = await this._def.schema._parseAsync({
                data: processed2,
                path: ctx.path,
                parent: ctx
              });
              if (result.status === "aborted")
                return INVALID;
              if (result.status === "dirty")
                return DIRTY(result.value);
              if (status.value === "dirty")
                return DIRTY(result.value);
              return result;
            });
          } else {
            if (status.value === "aborted")
              return INVALID;
            const result = this._def.schema._parseSync({
              data: processed,
              path: ctx.path,
              parent: ctx
            });
            if (result.status === "aborted")
              return INVALID;
            if (result.status === "dirty")
              return DIRTY(result.value);
            if (status.value === "dirty")
              return DIRTY(result.value);
            return result;
          }
        }
        if (effect.type === "refinement") {
          const executeRefinement = /* @__PURE__ */ __name2((acc) => {
            const result = effect.refinement(acc, checkCtx);
            if (ctx.common.async) {
              return Promise.resolve(result);
            }
            if (result instanceof Promise) {
              throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");
            }
            return acc;
          }, "executeRefinement");
          if (ctx.common.async === false) {
            const inner = this._def.schema._parseSync({
              data: ctx.data,
              path: ctx.path,
              parent: ctx
            });
            if (inner.status === "aborted")
              return INVALID;
            if (inner.status === "dirty")
              status.dirty();
            executeRefinement(inner.value);
            return { status: status.value, value: inner.value };
          } else {
            return this._def.schema._parseAsync({ data: ctx.data, path: ctx.path, parent: ctx }).then((inner) => {
              if (inner.status === "aborted")
                return INVALID;
              if (inner.status === "dirty")
                status.dirty();
              return executeRefinement(inner.value).then(() => {
                return { status: status.value, value: inner.value };
              });
            });
          }
        }
        if (effect.type === "transform") {
          if (ctx.common.async === false) {
            const base = this._def.schema._parseSync({
              data: ctx.data,
              path: ctx.path,
              parent: ctx
            });
            if (!isValid(base))
              return base;
            const result = effect.transform(base.value, checkCtx);
            if (result instanceof Promise) {
              throw new Error(`Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.`);
            }
            return { status: status.value, value: result };
          } else {
            return this._def.schema._parseAsync({ data: ctx.data, path: ctx.path, parent: ctx }).then((base) => {
              if (!isValid(base))
                return base;
              return Promise.resolve(effect.transform(base.value, checkCtx)).then((result) => ({ status: status.value, value: result }));
            });
          }
        }
        util.assertNever(effect);
      }
    };
    ZodEffects.create = (schema, effect, params) => {
      return new ZodEffects({
        schema,
        typeName: ZodFirstPartyTypeKind.ZodEffects,
        effect,
        ...processCreateParams(params)
      });
    };
    ZodEffects.createWithPreprocess = (preprocess, schema, params) => {
      return new ZodEffects({
        schema,
        effect: { type: "preprocess", transform: preprocess },
        typeName: ZodFirstPartyTypeKind.ZodEffects,
        ...processCreateParams(params)
      });
    };
    ZodOptional = class extends ZodType {
      static {
        __name(this, "ZodOptional");
      }
      static {
        __name2(this, "ZodOptional");
      }
      _parse(input) {
        const parsedType = this._getType(input);
        if (parsedType === ZodParsedType.undefined) {
          return OK(void 0);
        }
        return this._def.innerType._parse(input);
      }
      unwrap() {
        return this._def.innerType;
      }
    };
    ZodOptional.create = (type, params) => {
      return new ZodOptional({
        innerType: type,
        typeName: ZodFirstPartyTypeKind.ZodOptional,
        ...processCreateParams(params)
      });
    };
    ZodNullable = class extends ZodType {
      static {
        __name(this, "ZodNullable");
      }
      static {
        __name2(this, "ZodNullable");
      }
      _parse(input) {
        const parsedType = this._getType(input);
        if (parsedType === ZodParsedType.null) {
          return OK(null);
        }
        return this._def.innerType._parse(input);
      }
      unwrap() {
        return this._def.innerType;
      }
    };
    ZodNullable.create = (type, params) => {
      return new ZodNullable({
        innerType: type,
        typeName: ZodFirstPartyTypeKind.ZodNullable,
        ...processCreateParams(params)
      });
    };
    ZodDefault = class extends ZodType {
      static {
        __name(this, "ZodDefault");
      }
      static {
        __name2(this, "ZodDefault");
      }
      _parse(input) {
        const { ctx } = this._processInputParams(input);
        let data = ctx.data;
        if (ctx.parsedType === ZodParsedType.undefined) {
          data = this._def.defaultValue();
        }
        return this._def.innerType._parse({
          data,
          path: ctx.path,
          parent: ctx
        });
      }
      removeDefault() {
        return this._def.innerType;
      }
    };
    ZodDefault.create = (type, params) => {
      return new ZodDefault({
        innerType: type,
        typeName: ZodFirstPartyTypeKind.ZodDefault,
        defaultValue: typeof params.default === "function" ? params.default : () => params.default,
        ...processCreateParams(params)
      });
    };
    ZodCatch = class extends ZodType {
      static {
        __name(this, "ZodCatch");
      }
      static {
        __name2(this, "ZodCatch");
      }
      _parse(input) {
        const { ctx } = this._processInputParams(input);
        const newCtx = {
          ...ctx,
          common: {
            ...ctx.common,
            issues: []
          }
        };
        const result = this._def.innerType._parse({
          data: newCtx.data,
          path: newCtx.path,
          parent: {
            ...newCtx
          }
        });
        if (isAsync(result)) {
          return result.then((result2) => {
            return {
              status: "valid",
              value: result2.status === "valid" ? result2.value : this._def.catchValue({
                get error() {
                  return new ZodError(newCtx.common.issues);
                },
                input: newCtx.data
              })
            };
          });
        } else {
          return {
            status: "valid",
            value: result.status === "valid" ? result.value : this._def.catchValue({
              get error() {
                return new ZodError(newCtx.common.issues);
              },
              input: newCtx.data
            })
          };
        }
      }
      removeCatch() {
        return this._def.innerType;
      }
    };
    ZodCatch.create = (type, params) => {
      return new ZodCatch({
        innerType: type,
        typeName: ZodFirstPartyTypeKind.ZodCatch,
        catchValue: typeof params.catch === "function" ? params.catch : () => params.catch,
        ...processCreateParams(params)
      });
    };
    ZodNaN = class extends ZodType {
      static {
        __name(this, "ZodNaN");
      }
      static {
        __name2(this, "ZodNaN");
      }
      _parse(input) {
        const parsedType = this._getType(input);
        if (parsedType !== ZodParsedType.nan) {
          const ctx = this._getOrReturnCtx(input);
          addIssueToContext(ctx, {
            code: ZodIssueCode.invalid_type,
            expected: ZodParsedType.nan,
            received: ctx.parsedType
          });
          return INVALID;
        }
        return { status: "valid", value: input.data };
      }
    };
    ZodNaN.create = (params) => {
      return new ZodNaN({
        typeName: ZodFirstPartyTypeKind.ZodNaN,
        ...processCreateParams(params)
      });
    };
    BRAND = Symbol("zod_brand");
    ZodBranded = class extends ZodType {
      static {
        __name(this, "ZodBranded");
      }
      static {
        __name2(this, "ZodBranded");
      }
      _parse(input) {
        const { ctx } = this._processInputParams(input);
        const data = ctx.data;
        return this._def.type._parse({
          data,
          path: ctx.path,
          parent: ctx
        });
      }
      unwrap() {
        return this._def.type;
      }
    };
    ZodPipeline = class _ZodPipeline extends ZodType {
      static {
        __name(this, "_ZodPipeline");
      }
      static {
        __name2(this, "ZodPipeline");
      }
      _parse(input) {
        const { status, ctx } = this._processInputParams(input);
        if (ctx.common.async) {
          const handleAsync = /* @__PURE__ */ __name2(async () => {
            const inResult = await this._def.in._parseAsync({
              data: ctx.data,
              path: ctx.path,
              parent: ctx
            });
            if (inResult.status === "aborted")
              return INVALID;
            if (inResult.status === "dirty") {
              status.dirty();
              return DIRTY(inResult.value);
            } else {
              return this._def.out._parseAsync({
                data: inResult.value,
                path: ctx.path,
                parent: ctx
              });
            }
          }, "handleAsync");
          return handleAsync();
        } else {
          const inResult = this._def.in._parseSync({
            data: ctx.data,
            path: ctx.path,
            parent: ctx
          });
          if (inResult.status === "aborted")
            return INVALID;
          if (inResult.status === "dirty") {
            status.dirty();
            return {
              status: "dirty",
              value: inResult.value
            };
          } else {
            return this._def.out._parseSync({
              data: inResult.value,
              path: ctx.path,
              parent: ctx
            });
          }
        }
      }
      static create(a3, b2) {
        return new _ZodPipeline({
          in: a3,
          out: b2,
          typeName: ZodFirstPartyTypeKind.ZodPipeline
        });
      }
    };
    ZodReadonly = class extends ZodType {
      static {
        __name(this, "ZodReadonly");
      }
      static {
        __name2(this, "ZodReadonly");
      }
      _parse(input) {
        const result = this._def.innerType._parse(input);
        const freeze2 = /* @__PURE__ */ __name2((data) => {
          if (isValid(data)) {
            data.value = Object.freeze(data.value);
          }
          return data;
        }, "freeze");
        return isAsync(result) ? result.then((data) => freeze2(data)) : freeze2(result);
      }
      unwrap() {
        return this._def.innerType;
      }
    };
    ZodReadonly.create = (type, params) => {
      return new ZodReadonly({
        innerType: type,
        typeName: ZodFirstPartyTypeKind.ZodReadonly,
        ...processCreateParams(params)
      });
    };
    __name2(cleanParams, "cleanParams");
    __name2(custom, "custom");
    late = {
      object: ZodObject.lazycreate
    };
    (function(ZodFirstPartyTypeKind2) {
      ZodFirstPartyTypeKind2["ZodString"] = "ZodString";
      ZodFirstPartyTypeKind2["ZodNumber"] = "ZodNumber";
      ZodFirstPartyTypeKind2["ZodNaN"] = "ZodNaN";
      ZodFirstPartyTypeKind2["ZodBigInt"] = "ZodBigInt";
      ZodFirstPartyTypeKind2["ZodBoolean"] = "ZodBoolean";
      ZodFirstPartyTypeKind2["ZodDate"] = "ZodDate";
      ZodFirstPartyTypeKind2["ZodSymbol"] = "ZodSymbol";
      ZodFirstPartyTypeKind2["ZodUndefined"] = "ZodUndefined";
      ZodFirstPartyTypeKind2["ZodNull"] = "ZodNull";
      ZodFirstPartyTypeKind2["ZodAny"] = "ZodAny";
      ZodFirstPartyTypeKind2["ZodUnknown"] = "ZodUnknown";
      ZodFirstPartyTypeKind2["ZodNever"] = "ZodNever";
      ZodFirstPartyTypeKind2["ZodVoid"] = "ZodVoid";
      ZodFirstPartyTypeKind2["ZodArray"] = "ZodArray";
      ZodFirstPartyTypeKind2["ZodObject"] = "ZodObject";
      ZodFirstPartyTypeKind2["ZodUnion"] = "ZodUnion";
      ZodFirstPartyTypeKind2["ZodDiscriminatedUnion"] = "ZodDiscriminatedUnion";
      ZodFirstPartyTypeKind2["ZodIntersection"] = "ZodIntersection";
      ZodFirstPartyTypeKind2["ZodTuple"] = "ZodTuple";
      ZodFirstPartyTypeKind2["ZodRecord"] = "ZodRecord";
      ZodFirstPartyTypeKind2["ZodMap"] = "ZodMap";
      ZodFirstPartyTypeKind2["ZodSet"] = "ZodSet";
      ZodFirstPartyTypeKind2["ZodFunction"] = "ZodFunction";
      ZodFirstPartyTypeKind2["ZodLazy"] = "ZodLazy";
      ZodFirstPartyTypeKind2["ZodLiteral"] = "ZodLiteral";
      ZodFirstPartyTypeKind2["ZodEnum"] = "ZodEnum";
      ZodFirstPartyTypeKind2["ZodEffects"] = "ZodEffects";
      ZodFirstPartyTypeKind2["ZodNativeEnum"] = "ZodNativeEnum";
      ZodFirstPartyTypeKind2["ZodOptional"] = "ZodOptional";
      ZodFirstPartyTypeKind2["ZodNullable"] = "ZodNullable";
      ZodFirstPartyTypeKind2["ZodDefault"] = "ZodDefault";
      ZodFirstPartyTypeKind2["ZodCatch"] = "ZodCatch";
      ZodFirstPartyTypeKind2["ZodPromise"] = "ZodPromise";
      ZodFirstPartyTypeKind2["ZodBranded"] = "ZodBranded";
      ZodFirstPartyTypeKind2["ZodPipeline"] = "ZodPipeline";
      ZodFirstPartyTypeKind2["ZodReadonly"] = "ZodReadonly";
    })(ZodFirstPartyTypeKind || (ZodFirstPartyTypeKind = {}));
    instanceOfType = /* @__PURE__ */ __name2((cls, params = {
      message: `Input not instance of ${cls.name}`
    }) => custom((data) => data instanceof cls, params), "instanceOfType");
    stringType = ZodString.create;
    numberType = ZodNumber.create;
    nanType = ZodNaN.create;
    bigIntType = ZodBigInt.create;
    booleanType = ZodBoolean.create;
    dateType = ZodDate.create;
    symbolType = ZodSymbol.create;
    undefinedType = ZodUndefined.create;
    nullType = ZodNull.create;
    anyType = ZodAny.create;
    unknownType = ZodUnknown.create;
    neverType = ZodNever.create;
    voidType = ZodVoid.create;
    arrayType = ZodArray.create;
    objectType = ZodObject.create;
    strictObjectType = ZodObject.strictCreate;
    unionType = ZodUnion.create;
    discriminatedUnionType = ZodDiscriminatedUnion.create;
    intersectionType = ZodIntersection.create;
    tupleType = ZodTuple.create;
    recordType = ZodRecord.create;
    mapType = ZodMap.create;
    setType = ZodSet.create;
    functionType = ZodFunction.create;
    lazyType = ZodLazy.create;
    literalType = ZodLiteral.create;
    enumType = ZodEnum.create;
    nativeEnumType = ZodNativeEnum.create;
    promiseType = ZodPromise.create;
    effectsType = ZodEffects.create;
    optionalType = ZodOptional.create;
    nullableType = ZodNullable.create;
    preprocessType = ZodEffects.createWithPreprocess;
    pipelineType = ZodPipeline.create;
    ostring = /* @__PURE__ */ __name2(() => stringType().optional(), "ostring");
    onumber = /* @__PURE__ */ __name2(() => numberType().optional(), "onumber");
    oboolean = /* @__PURE__ */ __name2(() => booleanType().optional(), "oboolean");
    coerce = {
      string: /* @__PURE__ */ __name2((arg) => ZodString.create({ ...arg, coerce: true }), "string"),
      number: /* @__PURE__ */ __name2((arg) => ZodNumber.create({ ...arg, coerce: true }), "number"),
      boolean: /* @__PURE__ */ __name2((arg) => ZodBoolean.create({
        ...arg,
        coerce: true
      }), "boolean"),
      bigint: /* @__PURE__ */ __name2((arg) => ZodBigInt.create({ ...arg, coerce: true }), "bigint"),
      date: /* @__PURE__ */ __name2((arg) => ZodDate.create({ ...arg, coerce: true }), "date")
    };
    NEVER = INVALID;
    z2 = /* @__PURE__ */ Object.freeze({
      __proto__: null,
      defaultErrorMap: errorMap,
      setErrorMap,
      getErrorMap,
      makeIssue,
      EMPTY_PATH,
      addIssueToContext,
      ParseStatus,
      INVALID,
      DIRTY,
      OK,
      isAborted,
      isDirty,
      isValid,
      isAsync,
      get util() {
        return util;
      },
      get objectUtil() {
        return objectUtil;
      },
      ZodParsedType,
      getParsedType,
      ZodType,
      datetimeRegex,
      ZodString,
      ZodNumber,
      ZodBigInt,
      ZodBoolean,
      ZodDate,
      ZodSymbol,
      ZodUndefined,
      ZodNull,
      ZodAny,
      ZodUnknown,
      ZodNever,
      ZodVoid,
      ZodArray,
      ZodObject,
      ZodUnion,
      ZodDiscriminatedUnion,
      ZodIntersection,
      ZodTuple,
      ZodRecord,
      ZodMap,
      ZodSet,
      ZodFunction,
      ZodLazy,
      ZodLiteral,
      ZodEnum,
      ZodNativeEnum,
      ZodPromise,
      ZodEffects,
      ZodTransformer: ZodEffects,
      ZodOptional,
      ZodNullable,
      ZodDefault,
      ZodCatch,
      ZodNaN,
      BRAND,
      ZodBranded,
      ZodPipeline,
      ZodReadonly,
      custom,
      Schema: ZodType,
      ZodSchema: ZodType,
      late,
      get ZodFirstPartyTypeKind() {
        return ZodFirstPartyTypeKind;
      },
      coerce,
      any: anyType,
      array: arrayType,
      bigint: bigIntType,
      boolean: booleanType,
      date: dateType,
      discriminatedUnion: discriminatedUnionType,
      effect: effectsType,
      "enum": enumType,
      "function": functionType,
      "instanceof": instanceOfType,
      intersection: intersectionType,
      lazy: lazyType,
      literal: literalType,
      map: mapType,
      nan: nanType,
      nativeEnum: nativeEnumType,
      never: neverType,
      "null": nullType,
      nullable: nullableType,
      number: numberType,
      object: objectType,
      oboolean,
      onumber,
      optional: optionalType,
      ostring,
      pipeline: pipelineType,
      preprocess: preprocessType,
      promise: promiseType,
      record: recordType,
      set: setType,
      strictObject: strictObjectType,
      string: stringType,
      symbol: symbolType,
      transformer: effectsType,
      tuple: tupleType,
      "undefined": undefinedType,
      union: unionType,
      unknown: unknownType,
      "void": voidType,
      NEVER,
      ZodIssueCode,
      quotelessJson,
      ZodError
    });
  }
});
function isColumnType(column, columnTypes) {
  return columnTypes.includes(column.columnType);
}
__name(isColumnType, "isColumnType");
function isWithEnum(column) {
  return "enumValues" in column && Array.isArray(column.enumValues) && column.enumValues.length > 0;
}
__name(isWithEnum, "isWithEnum");
function columnToSchema(column, factory) {
  const z$1 = factory?.zodInstance ?? z2;
  const coerce2 = factory?.coerce ?? {};
  let schema;
  if (isWithEnum(column)) {
    schema = column.enumValues.length ? z$1.enum(column.enumValues) : z$1.string();
  }
  if (!schema) {
    if (isColumnType(column, ["PgGeometry", "PgPointTuple"])) {
      schema = z$1.tuple([z$1.number(), z$1.number()]);
    } else if (isColumnType(column, ["PgGeometryObject", "PgPointObject"])) {
      schema = z$1.object({ x: z$1.number(), y: z$1.number() });
    } else if (isColumnType(column, ["PgHalfVector", "PgVector"])) {
      schema = z$1.array(z$1.number());
      schema = column.dimensions ? schema.length(column.dimensions) : schema;
    } else if (isColumnType(column, ["PgLine"])) {
      schema = z$1.tuple([z$1.number(), z$1.number(), z$1.number()]);
    } else if (isColumnType(column, ["PgLineABC"])) {
      schema = z$1.object({
        a: z$1.number(),
        b: z$1.number(),
        c: z$1.number()
      });
    } else if (isColumnType(column, ["PgArray"])) {
      schema = z$1.array(columnToSchema(column.baseColumn, z$1));
      schema = column.size ? schema.length(column.size) : schema;
    } else if (column.dataType === "array") {
      schema = z$1.array(z$1.any());
    } else if (column.dataType === "number") {
      schema = numberColumnToSchema(column, z$1, coerce2);
    } else if (column.dataType === "bigint") {
      schema = bigintColumnToSchema(column, z$1, coerce2);
    } else if (column.dataType === "boolean") {
      schema = coerce2 === true || coerce2.boolean ? z$1.coerce.boolean() : z$1.boolean();
    } else if (column.dataType === "date") {
      schema = coerce2 === true || coerce2.date ? z$1.coerce.date() : z$1.date();
    } else if (column.dataType === "string") {
      schema = stringColumnToSchema(column, z$1, coerce2);
    } else if (column.dataType === "json") {
      schema = jsonSchema;
    } else if (column.dataType === "custom") {
      schema = z$1.any();
    } else if (column.dataType === "buffer") {
      schema = bufferSchema;
    }
  }
  if (!schema) {
    schema = z$1.any();
  }
  return schema;
}
__name(columnToSchema, "columnToSchema");
function numberColumnToSchema(column, z3, coerce2) {
  let unsigned = column.getSQLType().includes("unsigned");
  let min;
  let max2;
  let integer2 = false;
  if (isColumnType(column, ["MySqlTinyInt", "SingleStoreTinyInt"])) {
    min = unsigned ? 0 : CONSTANTS.INT8_MIN;
    max2 = unsigned ? CONSTANTS.INT8_UNSIGNED_MAX : CONSTANTS.INT8_MAX;
    integer2 = true;
  } else if (isColumnType(column, [
    "PgSmallInt",
    "PgSmallSerial",
    "MySqlSmallInt",
    "SingleStoreSmallInt"
  ])) {
    min = unsigned ? 0 : CONSTANTS.INT16_MIN;
    max2 = unsigned ? CONSTANTS.INT16_UNSIGNED_MAX : CONSTANTS.INT16_MAX;
    integer2 = true;
  } else if (isColumnType(column, [
    "PgReal",
    "MySqlFloat",
    "MySqlMediumInt",
    "SingleStoreMediumInt",
    "SingleStoreFloat"
  ])) {
    min = unsigned ? 0 : CONSTANTS.INT24_MIN;
    max2 = unsigned ? CONSTANTS.INT24_UNSIGNED_MAX : CONSTANTS.INT24_MAX;
    integer2 = isColumnType(column, ["MySqlMediumInt", "SingleStoreMediumInt"]);
  } else if (isColumnType(column, [
    "PgInteger",
    "PgSerial",
    "MySqlInt",
    "SingleStoreInt"
  ])) {
    min = unsigned ? 0 : CONSTANTS.INT32_MIN;
    max2 = unsigned ? CONSTANTS.INT32_UNSIGNED_MAX : CONSTANTS.INT32_MAX;
    integer2 = true;
  } else if (isColumnType(column, [
    "PgDoublePrecision",
    "MySqlReal",
    "MySqlDouble",
    "SingleStoreReal",
    "SingleStoreDouble",
    "SQLiteReal"
  ])) {
    min = unsigned ? 0 : CONSTANTS.INT48_MIN;
    max2 = unsigned ? CONSTANTS.INT48_UNSIGNED_MAX : CONSTANTS.INT48_MAX;
  } else if (isColumnType(column, [
    "PgBigInt53",
    "PgBigSerial53",
    "MySqlBigInt53",
    "MySqlSerial",
    "SingleStoreBigInt53",
    "SingleStoreSerial",
    "SQLiteInteger"
  ])) {
    unsigned = unsigned || isColumnType(column, ["MySqlSerial", "SingleStoreSerial"]);
    min = unsigned ? 0 : Number.MIN_SAFE_INTEGER;
    max2 = Number.MAX_SAFE_INTEGER;
    integer2 = true;
  } else if (isColumnType(column, ["MySqlYear", "SingleStoreYear"])) {
    min = 1901;
    max2 = 2155;
    integer2 = true;
  } else {
    min = Number.MIN_SAFE_INTEGER;
    max2 = Number.MAX_SAFE_INTEGER;
  }
  let schema = coerce2 === true || coerce2?.number ? z3.coerce.number() : z3.number();
  schema = schema.min(min).max(max2);
  return integer2 ? schema.int() : schema;
}
__name(numberColumnToSchema, "numberColumnToSchema");
function bigintColumnToSchema(column, z3, coerce2) {
  const unsigned = column.getSQLType().includes("unsigned");
  const min = unsigned ? 0n : CONSTANTS.INT64_MIN;
  const max2 = unsigned ? CONSTANTS.INT64_UNSIGNED_MAX : CONSTANTS.INT64_MAX;
  const schema = coerce2 === true || coerce2?.bigint ? z3.coerce.bigint() : z3.bigint();
  return schema.min(min).max(max2);
}
__name(bigintColumnToSchema, "bigintColumnToSchema");
function stringColumnToSchema(column, z3, coerce2) {
  if (isColumnType(column, ["PgUUID"])) {
    return z3.string().uuid();
  }
  let max2;
  let regex;
  let fixed = false;
  if (isColumnType(column, ["PgVarchar", "SQLiteText"])) {
    max2 = column.length;
  } else if (isColumnType(column, ["MySqlVarChar", "SingleStoreVarChar"])) {
    max2 = column.length ?? CONSTANTS.INT16_UNSIGNED_MAX;
  } else if (isColumnType(column, ["MySqlText", "SingleStoreText"])) {
    if (column.textType === "longtext") {
      max2 = CONSTANTS.INT32_UNSIGNED_MAX;
    } else if (column.textType === "mediumtext") {
      max2 = CONSTANTS.INT24_UNSIGNED_MAX;
    } else if (column.textType === "text") {
      max2 = CONSTANTS.INT16_UNSIGNED_MAX;
    } else {
      max2 = CONSTANTS.INT8_UNSIGNED_MAX;
    }
  }
  if (isColumnType(column, [
    "PgChar",
    "MySqlChar",
    "SingleStoreChar"
  ])) {
    max2 = column.length;
    fixed = true;
  }
  if (isColumnType(column, ["PgBinaryVector"])) {
    regex = /^[01]+$/;
    max2 = column.dimensions;
  }
  let schema = coerce2 === true || coerce2?.string ? z3.coerce.string() : z3.string();
  schema = regex ? schema.regex(regex) : schema;
  return max2 && fixed ? schema.length(max2) : max2 ? schema.max(max2) : schema;
}
__name(stringColumnToSchema, "stringColumnToSchema");
function getColumns(tableLike) {
  return isTable(tableLike) ? getTableColumns(tableLike) : getViewSelectedFields(tableLike);
}
__name(getColumns, "getColumns");
function handleColumns(columns, refinements, conditions, factory) {
  const columnSchemas = {};
  for (const [key, selected] of Object.entries(columns)) {
    if (!is(selected, Column) && !is(selected, SQL) && !is(selected, SQL.Aliased) && typeof selected === "object") {
      const columns2 = isTable(selected) || isView(selected) ? getColumns(selected) : selected;
      columnSchemas[key] = handleColumns(columns2, refinements[key] ?? {}, conditions, factory);
      continue;
    }
    const refinement = refinements[key];
    if (refinement !== void 0 && typeof refinement !== "function") {
      columnSchemas[key] = refinement;
      continue;
    }
    const column = is(selected, Column) ? selected : void 0;
    const schema = column ? columnToSchema(column, factory) : z2.any();
    const refined = typeof refinement === "function" ? refinement(schema) : schema;
    if (conditions.never(column)) {
      continue;
    } else {
      columnSchemas[key] = refined;
    }
    if (column) {
      if (conditions.nullable(column)) {
        columnSchemas[key] = columnSchemas[key].nullable();
      }
      if (conditions.optional(column)) {
        columnSchemas[key] = columnSchemas[key].optional();
      }
    }
  }
  return z2.object(columnSchemas);
}
__name(handleColumns, "handleColumns");
var CONSTANTS;
var literalSchema;
var jsonSchema;
var bufferSchema;
var insertConditions;
var createInsertSchema;
var init_drizzle_zod = __esm({
  "../node_modules/drizzle-zod/index.mjs"() {
    init_functionsRoutes_0_8044054200943971();
    init_drizzle_orm();
    init_lib();
    CONSTANTS = {
      INT8_MIN: -128,
      INT8_MAX: 127,
      INT8_UNSIGNED_MAX: 255,
      INT16_MIN: -32768,
      INT16_MAX: 32767,
      INT16_UNSIGNED_MAX: 65535,
      INT24_MIN: -8388608,
      INT24_MAX: 8388607,
      INT24_UNSIGNED_MAX: 16777215,
      INT32_MIN: -2147483648,
      INT32_MAX: 2147483647,
      INT32_UNSIGNED_MAX: 4294967295,
      INT48_MIN: -140737488355328,
      INT48_MAX: 140737488355327,
      INT48_UNSIGNED_MAX: 281474976710655,
      INT64_MIN: -9223372036854775808n,
      INT64_MAX: 9223372036854775807n,
      INT64_UNSIGNED_MAX: 18446744073709551615n
    };
    __name2(isColumnType, "isColumnType");
    __name2(isWithEnum, "isWithEnum");
    literalSchema = z2.union([z2.string(), z2.number(), z2.boolean(), z2.null()]);
    jsonSchema = z2.union([literalSchema, z2.record(z2.any()), z2.array(z2.any())]);
    bufferSchema = z2.custom((v3) => v3 instanceof Buffer);
    __name2(columnToSchema, "columnToSchema");
    __name2(numberColumnToSchema, "numberColumnToSchema");
    __name2(bigintColumnToSchema, "bigintColumnToSchema");
    __name2(stringColumnToSchema, "stringColumnToSchema");
    __name2(getColumns, "getColumns");
    __name2(handleColumns, "handleColumns");
    insertConditions = {
      never: /* @__PURE__ */ __name2((column) => column?.generated?.type === "always" || column?.generatedIdentity?.type === "always", "never"),
      optional: /* @__PURE__ */ __name2((column) => !column.notNull || column.notNull && column.hasDefault, "optional"),
      nullable: /* @__PURE__ */ __name2((column) => !column.notNull, "nullable")
    };
    createInsertSchema = /* @__PURE__ */ __name2((entity, refine) => {
      const columns = getColumns(entity);
      return handleColumns(columns, refine ?? {}, insertConditions);
    }, "createInsertSchema");
  }
});
var schema_exports = {};
__export(schema_exports, {
  activationCodes: /* @__PURE__ */ __name(() => activationCodes, "activationCodes"),
  activationKeys: /* @__PURE__ */ __name(() => activationKeys, "activationKeys"),
  activationKeysRelations: /* @__PURE__ */ __name(() => activationKeysRelations, "activationKeysRelations"),
  affiliatePayouts: /* @__PURE__ */ __name(() => affiliatePayouts, "affiliatePayouts"),
  affiliatePrograms: /* @__PURE__ */ __name(() => affiliatePrograms, "affiliatePrograms"),
  affiliateSettings: /* @__PURE__ */ __name(() => affiliateSettings, "affiliateSettings"),
  affiliateTransactions: /* @__PURE__ */ __name(() => affiliateTransactions, "affiliateTransactions"),
  affiliateTransactionsRelations: /* @__PURE__ */ __name(() => affiliateTransactionsRelations, "affiliateTransactionsRelations"),
  announcementBadges: /* @__PURE__ */ __name(() => announcementBadges, "announcementBadges"),
  authSettings: /* @__PURE__ */ __name(() => authSettings, "authSettings"),
  cities: /* @__PURE__ */ __name(() => cities, "cities"),
  citiesRelations: /* @__PURE__ */ __name(() => citiesRelations, "citiesRelations"),
  continents: /* @__PURE__ */ __name(() => continents, "continents"),
  continentsRelations: /* @__PURE__ */ __name(() => continentsRelations, "continentsRelations"),
  countdownBanners: /* @__PURE__ */ __name(() => countdownBanners, "countdownBanners"),
  countries: /* @__PURE__ */ __name(() => countries, "countries"),
  countriesRelations: /* @__PURE__ */ __name(() => countriesRelations, "countriesRelations"),
  coupons: /* @__PURE__ */ __name(() => coupons, "coupons"),
  customerPayments: /* @__PURE__ */ __name(() => customerPayments, "customerPayments"),
  customerPaymentsRelations: /* @__PURE__ */ __name(() => customerPaymentsRelations, "customerPaymentsRelations"),
  customers: /* @__PURE__ */ __name(() => customers, "customers"),
  customersRelations: /* @__PURE__ */ __name(() => customersRelations, "customersRelations"),
  dashboardFeatures: /* @__PURE__ */ __name(() => dashboardFeatures, "dashboardFeatures"),
  demoUsers: /* @__PURE__ */ __name(() => demoUsers, "demoUsers"),
  downloads: /* @__PURE__ */ __name(() => downloads, "downloads"),
  downloadsRelations: /* @__PURE__ */ __name(() => downloadsRelations, "downloadsRelations"),
  extensionDownloads: /* @__PURE__ */ __name(() => extensionDownloads, "extensionDownloads"),
  extensionInstallations: /* @__PURE__ */ __name(() => extensionInstallations, "extensionInstallations"),
  extensionUsageLogs: /* @__PURE__ */ __name(() => extensionUsageLogs, "extensionUsageLogs"),
  extensionUsageStats: /* @__PURE__ */ __name(() => extensionUsageStats, "extensionUsageStats"),
  extensionUsageStatsRelations: /* @__PURE__ */ __name(() => extensionUsageStatsRelations, "extensionUsageStatsRelations"),
  globalUsageStats: /* @__PURE__ */ __name(() => globalUsageStats, "globalUsageStats"),
  insertActivationCodeSchema: /* @__PURE__ */ __name(() => insertActivationCodeSchema, "insertActivationCodeSchema"),
  insertActivationKeySchema: /* @__PURE__ */ __name(() => insertActivationKeySchema, "insertActivationKeySchema"),
  insertAffiliateTransactionSchema: /* @__PURE__ */ __name(() => insertAffiliateTransactionSchema, "insertAffiliateTransactionSchema"),
  insertAnnouncementBadgeSchema: /* @__PURE__ */ __name(() => insertAnnouncementBadgeSchema, "insertAnnouncementBadgeSchema"),
  insertAuthSettingSchema: /* @__PURE__ */ __name(() => insertAuthSettingSchema, "insertAuthSettingSchema"),
  insertCitySchema: /* @__PURE__ */ __name(() => insertCitySchema, "insertCitySchema"),
  insertContinentSchema: /* @__PURE__ */ __name(() => insertContinentSchema, "insertContinentSchema"),
  insertCountdownBannerSchema: /* @__PURE__ */ __name(() => insertCountdownBannerSchema, "insertCountdownBannerSchema"),
  insertCountrySchema: /* @__PURE__ */ __name(() => insertCountrySchema, "insertCountrySchema"),
  insertCouponSchema: /* @__PURE__ */ __name(() => insertCouponSchema, "insertCouponSchema"),
  insertCustomerPaymentSchema: /* @__PURE__ */ __name(() => insertCustomerPaymentSchema, "insertCustomerPaymentSchema"),
  insertCustomerSchema: /* @__PURE__ */ __name(() => insertCustomerSchema, "insertCustomerSchema"),
  insertDashboardFeaturesSchema: /* @__PURE__ */ __name(() => insertDashboardFeaturesSchema, "insertDashboardFeaturesSchema"),
  insertDemoUserSchema: /* @__PURE__ */ __name(() => insertDemoUserSchema, "insertDemoUserSchema"),
  insertDownloadSchema: /* @__PURE__ */ __name(() => insertDownloadSchema, "insertDownloadSchema"),
  insertExtensionDownloadSchema: /* @__PURE__ */ __name(() => insertExtensionDownloadSchema, "insertExtensionDownloadSchema"),
  insertExtensionInstallationSchema: /* @__PURE__ */ __name(() => insertExtensionInstallationSchema, "insertExtensionInstallationSchema"),
  insertExtensionUsageLogSchema: /* @__PURE__ */ __name(() => insertExtensionUsageLogSchema, "insertExtensionUsageLogSchema"),
  insertExtensionUsageStatsSchema: /* @__PURE__ */ __name(() => insertExtensionUsageStatsSchema, "insertExtensionUsageStatsSchema"),
  insertGlobalUsageStatsSchema: /* @__PURE__ */ __name(() => insertGlobalUsageStatsSchema, "insertGlobalUsageStatsSchema"),
  insertMissionSchema: /* @__PURE__ */ __name(() => insertMissionSchema, "insertMissionSchema"),
  insertOrderSchema: /* @__PURE__ */ __name(() => insertOrderSchema, "insertOrderSchema"),
  insertPremiumDeviceSchema: /* @__PURE__ */ __name(() => insertPremiumDeviceSchema, "insertPremiumDeviceSchema"),
  insertProductSchema: /* @__PURE__ */ __name(() => insertProductSchema, "insertProductSchema"),
  insertSeoSettingsSchema: /* @__PURE__ */ __name(() => insertSeoSettingsSchema, "insertSeoSettingsSchema"),
  insertSettingSchema: /* @__PURE__ */ __name(() => insertSettingSchema, "insertSettingSchema"),
  insertTicketMessageSchema: /* @__PURE__ */ __name(() => insertTicketMessageSchema, "insertTicketMessageSchema"),
  insertTicketSchema: /* @__PURE__ */ __name(() => insertTicketSchema, "insertTicketSchema"),
  insertUserLocationAssignmentSchema: /* @__PURE__ */ __name(() => insertUserLocationAssignmentSchema, "insertUserLocationAssignmentSchema"),
  insertUserSchema: /* @__PURE__ */ __name(() => insertUserSchema, "insertUserSchema"),
  insertUserTrialSchema: /* @__PURE__ */ __name(() => insertUserTrialSchema, "insertUserTrialSchema"),
  invoiceItems: /* @__PURE__ */ __name(() => invoiceItems, "invoiceItems"),
  invoiceSettings: /* @__PURE__ */ __name(() => invoiceSettings, "invoiceSettings"),
  invoices: /* @__PURE__ */ __name(() => invoices, "invoices"),
  missions: /* @__PURE__ */ __name(() => missions, "missions"),
  orders: /* @__PURE__ */ __name(() => orders, "orders"),
  ordersRelations: /* @__PURE__ */ __name(() => ordersRelations, "ordersRelations"),
  premiumDevices: /* @__PURE__ */ __name(() => premiumDevices, "premiumDevices"),
  products: /* @__PURE__ */ __name(() => products, "products"),
  seoSettings: /* @__PURE__ */ __name(() => seoSettings, "seoSettings"),
  settings: /* @__PURE__ */ __name(() => settings, "settings"),
  ticketMessages: /* @__PURE__ */ __name(() => ticketMessages, "ticketMessages"),
  ticketMessagesRelations: /* @__PURE__ */ __name(() => ticketMessagesRelations, "ticketMessagesRelations"),
  tickets: /* @__PURE__ */ __name(() => tickets, "tickets"),
  ticketsRelations: /* @__PURE__ */ __name(() => ticketsRelations, "ticketsRelations"),
  trialUsage: /* @__PURE__ */ __name(() => trialUsage, "trialUsage"),
  userLocationAssignments: /* @__PURE__ */ __name(() => userLocationAssignments, "userLocationAssignments"),
  userLocationAssignmentsRelations: /* @__PURE__ */ __name(() => userLocationAssignmentsRelations, "userLocationAssignmentsRelations"),
  userTrials: /* @__PURE__ */ __name(() => userTrials, "userTrials"),
  users: /* @__PURE__ */ __name(() => users, "users"),
  usersRelations: /* @__PURE__ */ __name(() => usersRelations, "usersRelations")
});
var users;
var orders;
var products;
var coupons;
var settings;
var dashboardFeatures;
var missions;
var userTrials;
var trialUsage;
var authSettings;
var downloads;
var tickets;
var ticketMessages;
var activationKeys;
var demoUsers;
var customers;
var affiliateTransactions;
var extensionUsageStats;
var customerPayments;
var globalUsageStats;
var premiumDevices;
var seoSettings;
var usersRelations;
var ordersRelations;
var downloadsRelations;
var activationKeysRelations;
var ticketsRelations;
var ticketMessagesRelations;
var customersRelations;
var customerPaymentsRelations;
var extensionUsageStatsRelations;
var affiliateTransactionsRelations;
var countdownBanners;
var announcementBadges;
var extensionDownloads;
var extensionUsageLogs;
var activationCodes;
var extensionInstallations;
var insertUserSchema;
var insertTicketSchema;
var insertTicketMessageSchema;
var insertExtensionInstallationSchema;
var insertActivationCodeSchema;
var insertOrderSchema;
var insertProductSchema;
var insertDownloadSchema;
var insertCouponSchema;
var insertSettingSchema;
var insertSeoSettingsSchema;
var insertAuthSettingSchema;
var insertCustomerSchema;
var insertExtensionDownloadSchema;
var insertAnnouncementBadgeSchema;
var insertExtensionUsageLogSchema;
var insertPremiumDeviceSchema;
var insertDashboardFeaturesSchema;
var insertAffiliateTransactionSchema;
var insertCountdownBannerSchema;
var insertActivationKeySchema;
var insertDemoUserSchema;
var affiliatePrograms;
var affiliateSettings;
var affiliatePayouts;
var invoiceSettings;
var invoices;
var invoiceItems;
var insertMissionSchema;
var insertUserTrialSchema;
var insertExtensionUsageStatsSchema;
var insertCustomerPaymentSchema;
var insertGlobalUsageStatsSchema;
var continents;
var countries;
var cities;
var userLocationAssignments;
var continentsRelations;
var countriesRelations;
var citiesRelations;
var userLocationAssignmentsRelations;
var insertContinentSchema;
var insertCountrySchema;
var insertCitySchema;
var insertUserLocationAssignmentSchema;
var init_schema = __esm({
  "../shared/schema.ts"() {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    init_sqlite_core();
    init_drizzle_zod();
    init_drizzle_orm();
    users = sqliteTable("users", {
      id: integer("id").primaryKey({ autoIncrement: true }),
      username: text2("username").notNull().unique(),
      password: text2("password").notNull(),
      email: text2("email").notNull(),
      isAdmin: integer("is_admin", { mode: "boolean" }).default(false),
      stripeCustomerId: text2("stripe_customer_id"),
      isPremium: integer("is_premium", { mode: "boolean" }).default(false),
      extensionActivated: integer("extension_activated", { mode: "boolean" }).default(false),
      premiumActivatedAt: text2("premium_activated_at"),
      totalSpent: text2("total_spent").default("0"),
      totalOrders: integer("total_orders").default(0),
      createdAt: integer("created_at").default(sql`(CURRENT_TIMESTAMP)`)
    });
    orders = sqliteTable("orders", {
      id: integer("id").primaryKey({ autoIncrement: true }),
      userId: integer("user_id").references(() => users.id),
      // Link to authenticated users
      customerEmail: text2("customer_email").notNull(),
      customerName: text2("customer_name").notNull(),
      originalAmount: text2("original_amount").notNull(),
      finalAmount: text2("final_amount").notNull(),
      discountAmount: text2("discount_amount").default("0"),
      couponCode: text2("coupon_code"),
      referralCode: text2("referral_code"),
      // Added for affiliate tracking
      currency: text2("currency").default("usd"),
      status: text2("status").notNull().default("pending"),
      // pending, completed, failed, refunded
      paymentMethod: text2("payment_method").notNull(),
      // stripe, paypal
      paymentIntentId: text2("payment_intent_id"),
      paypalOrderId: text2("paypal_order_id"),
      downloadToken: text2("download_token").notNull(),
      downloadCount: integer("download_count").default(0),
      maxDownloads: integer("max_downloads").default(3),
      activationCode: text2("activation_code"),
      // Generated activation code for the extension
      invoiceUrl: text2("invoice_url"),
      // Path to generated invoice PDF
      createdAt: integer("created_at").default(sql`(CURRENT_TIMESTAMP)`),
      completedAt: integer("completed_at")
    });
    products = sqliteTable("products", {
      id: integer("id").primaryKey({ autoIncrement: true }),
      name: text2("name").notNull(),
      description: text2("description").notNull(),
      price: text2("price").notNull(),
      beforePrice: text2("before_price"),
      currency: text2("currency").default("eur"),
      fileName: text2("file_name").notNull(),
      filePath: text2("file_path").notNull(),
      isActive: integer("is_active", { mode: "boolean" }).default(true),
      createdAt: integer("created_at").default(sql`(CURRENT_TIMESTAMP)`)
    });
    coupons = sqliteTable("coupons", {
      id: integer("id").primaryKey({ autoIncrement: true }),
      code: text2("code").notNull().unique(),
      discountType: text2("discount_type").notNull(),
      // "percentage" or "fixed"
      discountValue: text2("discount_value").notNull(),
      isActive: integer("is_active", { mode: "boolean" }).default(true),
      usageLimit: integer("usage_limit"),
      // null for unlimited
      usageCount: integer("usage_count").default(0),
      expiresAt: integer("expires_at"),
      createdAt: integer("created_at").default(sql`(CURRENT_TIMESTAMP)`)
    });
    settings = sqliteTable("settings", {
      id: integer("id").primaryKey({ autoIncrement: true }),
      key: text2("key").notNull().unique(),
      value: text2("value").notNull(),
      updatedAt: integer("updated_at").default(sql`(CURRENT_TIMESTAMP)`)
    });
    dashboardFeatures = sqliteTable("dashboard_features", {
      id: integer("id").primaryKey({ autoIncrement: true }),
      featureName: text2("feature_name").notNull().unique(),
      isEnabled: integer("is_enabled", { mode: "boolean" }).default(true),
      description: text2("description"),
      updatedAt: integer("updated_at").default(sql`(CURRENT_TIMESTAMP)`)
    });
    missions = sqliteTable("missions", {
      id: integer("id").primaryKey({ autoIncrement: true }),
      missionId: text2("mission_id").notNull().unique(),
      // OCUS mission ID
      userId: text2("user_id").notNull(),
      // Extension user ID
      customerId: integer("customer_id"),
      // References users table if logged in
      missionName: text2("mission_name").notNull(),
      compensationAmount: text2("compensation_amount"),
      status: text2("status").notNull().default("assignment_accepted"),
      // assignment_accepted, appointment_confirmation, media_upload, billing_payment, assignment_complete
      assignmentAcceptedAt: integer("assignment_accepted_at").default(sql`(CURRENT_TIMESTAMP)`),
      appointmentConfirmedAt: integer("appointment_confirmed_at"),
      mediaUploadedAt: integer("media_uploaded_at"),
      billingCompletedAt: integer("billing_completed_at"),
      assignmentCompletedAt: integer("assignment_completed_at"),
      trialUsed: integer("trial_used", { mode: "boolean" }).default(false),
      // Whether this mission used a trial attempt
      createdAt: integer("created_at").default(sql`(CURRENT_TIMESTAMP)`),
      updatedAt: integer("updated_at").default(sql`(CURRENT_TIMESTAMP)`)
    });
    userTrials = sqliteTable("user_trials", {
      id: integer("id").primaryKey({ autoIncrement: true }),
      userId: text2("user_id").notNull().unique(),
      // Extension user ID
      customerId: integer("customer_id"),
      // References users table if logged in
      trialsUsed: integer("trials_used").default(0),
      maxTrials: integer("max_trials").default(3),
      isActivated: integer("is_activated", { mode: "boolean" }).default(false),
      activationKey: text2("activation_key"),
      activatedAt: integer("activated_at"),
      createdAt: integer("created_at").default(sql`(CURRENT_TIMESTAMP)`),
      updatedAt: integer("updated_at").default(sql`(CURRENT_TIMESTAMP)`)
    });
    trialUsage = sqliteTable("trial_usage", {
      id: integer("id").primaryKey({ autoIncrement: true }),
      trialKey: text2("trial_key").notNull().unique(),
      // Combination of extensionId + userFingerprint
      extensionId: text2("extension_id").notNull(),
      userFingerprint: text2("user_fingerprint").notNull(),
      usageCount: integer("usage_count").default(0),
      lastUsed: integer("last_used").default(sql`(CURRENT_TIMESTAMP)`),
      isExpired: integer("is_expired", { mode: "boolean" }).default(false),
      createdAt: integer("created_at").default(sql`(CURRENT_TIMESTAMP)`)
    });
    authSettings = sqliteTable("auth_settings", {
      id: integer("id").primaryKey({ autoIncrement: true }),
      // Google OAuth
      googleClientId: text2("google_client_id"),
      googleClientSecret: text2("google_client_secret"),
      googleRedirectUri: text2("google_redirect_uri"),
      googleEnabled: integer("google_enabled", { mode: "boolean" }).default(false),
      // Facebook OAuth
      facebookAppId: text2("facebook_app_id"),
      facebookAppSecret: text2("facebook_app_secret"),
      facebookEnabled: integer("facebook_enabled", { mode: "boolean" }).default(false),
      // GitHub OAuth
      githubClientId: text2("github_client_id"),
      githubClientSecret: text2("github_client_secret"),
      githubEnabled: integer("github_enabled", { mode: "boolean" }).default(false),
      // reCAPTCHA settings
      recaptchaSiteKey: text2("recaptcha_site_key"),
      recaptchaSecretKey: text2("recaptcha_secret_key"),
      recaptchaEnabled: integer("recaptcha_enabled", { mode: "boolean" }).default(false),
      recaptchaMode: text2("recaptcha_mode").default("v2"),
      // v2 or v3
      recaptchaCustomerEnabled: integer("recaptcha_customer_enabled", { mode: "boolean" }).default(false),
      recaptchaAdminEnabled: integer("recaptcha_admin_enabled", { mode: "boolean" }).default(true),
      // Payment Gateway Settings
      stripePublicKey: text2("stripe_public_key"),
      stripeSecretKey: text2("stripe_secret_key"),
      stripeEnabled: integer("stripe_enabled", { mode: "boolean" }).default(false),
      paypalClientId: text2("paypal_client_id"),
      paypalClientSecret: text2("paypal_client_secret"),
      paypalEnabled: integer("paypal_enabled", { mode: "boolean" }).default(false),
      defaultPaymentMethod: text2("default_payment_method").default("stripe"),
      // stripe or paypal
      updatedAt: integer("updated_at").default(sql`(CURRENT_TIMESTAMP)`)
    });
    downloads = sqliteTable("downloads", {
      id: integer("id").primaryKey({ autoIncrement: true }),
      orderId: integer("order_id").references(() => orders.id).notNull(),
      downloadedAt: integer("downloaded_at").default(sql`(CURRENT_TIMESTAMP)`),
      ipAddress: text2("ip_address"),
      userAgent: text2("user_agent")
    });
    tickets = sqliteTable("tickets", {
      id: integer("id").primaryKey({ autoIncrement: true }),
      title: text2("title").notNull(),
      description: text2("description").notNull(),
      category: text2("category").notNull(),
      // "technical", "billing", "feature-request", "bug-report", "general"
      priority: text2("priority").notNull().default("medium"),
      // "low", "medium", "high", "urgent"
      status: text2("status").notNull().default("open"),
      // "open", "in-progress", "resolved", "closed"
      customerEmail: text2("customer_email").notNull(),
      customerName: text2("customer_name").notNull(),
      assignedToUserId: integer("assigned_to_user_id").references(() => users.id),
      createdAt: integer("created_at").default(sql`(CURRENT_TIMESTAMP)`),
      updatedAt: integer("updated_at").default(sql`(CURRENT_TIMESTAMP)`),
      resolvedAt: integer("resolved_at")
    });
    ticketMessages = sqliteTable("ticket_messages", {
      id: integer("id").primaryKey({ autoIncrement: true }),
      ticketId: integer("ticket_id").references(() => tickets.id).notNull(),
      message: text2("message").notNull(),
      isFromCustomer: integer("is_from_customer", { mode: "boolean" }).notNull().default(true),
      senderName: text2("sender_name").notNull(),
      senderEmail: text2("sender_email"),
      createdAt: integer("created_at").default(sql`(CURRENT_TIMESTAMP)`)
    });
    activationKeys = sqliteTable("activation_keys", {
      id: integer("id").primaryKey({ autoIncrement: true }),
      activationKey: text2("activation_key").notNull().unique(),
      isActive: integer("is_active", { mode: "boolean" }).default(true),
      orderId: integer("order_id").references(() => orders.id),
      userId: integer("user_id").references(() => users.id),
      // Link to authenticated user
      installationId: text2("installation_id", { length: 36 }),
      // Bind to specific installation
      usedAt: integer("used_at"),
      createdAt: integer("created_at").default(sql`(CURRENT_TIMESTAMP)`)
    });
    demoUsers = sqliteTable("demo_users", {
      id: integer("id").primaryKey({ autoIncrement: true }),
      userId: text2("user_id").notNull().unique(),
      // UUID from extension
      demoCount: integer("demo_count").default(0),
      maxDemoUses: integer("max_demo_uses").default(3),
      createdAt: integer("created_at").default(sql`(CURRENT_TIMESTAMP)`),
      lastUsedAt: integer("last_used_at").default(sql`(CURRENT_TIMESTAMP)`)
    });
    customers = sqliteTable("customers", {
      id: integer("id").primaryKey({ autoIncrement: true }),
      email: text2("email", { length: 255 }).notNull().unique(),
      password: text2("password", { length: 255 }),
      // Optional for social logins
      name: text2("name", { length: 255 }).notNull(),
      // Extension activation and usage
      activationKey: text2("activation_key", { length: 100 }).unique(),
      activationKeyRevealed: integer("activation_key_revealed", { mode: "boolean" }).default(false).notNull(),
      activationKeyGeneratedAt: integer("activation_key_generated_at").default(sql`(CURRENT_TIMESTAMP)`),
      isActivated: integer("is_activated", { mode: "boolean" }).default(false).notNull(),
      extensionActivated: integer("extension_activated", { mode: "boolean" }).default(false).notNull(),
      extensionLastUsed: integer("extension_last_used"),
      extensionUsageCount: integer("extension_usage_count").default(0).notNull(),
      extensionSuccessfulJobs: integer("extension_successful_jobs").default(0).notNull(),
      extensionTrialJobsUsed: integer("extension_trial_jobs_used").default(0).notNull(),
      extensionTrialLimit: integer("extension_trial_limit").default(3).notNull(),
      isBlocked: integer("is_blocked", { mode: "boolean" }).default(false).notNull(),
      blockedReason: text2("blocked_reason"),
      blockedAt: integer("blocked_at"),
      // Account status
      isAdmin: integer("is_admin", { mode: "boolean" }).default(false).notNull(),
      subscriptionStatus: text2("subscription_status", { length: 20 }).default("inactive").notNull(),
      // inactive, active, cancelled, expired
      subscriptionExpiresAt: integer("subscription_expires_at"),
      // Payment integration
      stripeCustomerId: text2("stripe_customer_id", { length: 255 }),
      stripeSubscriptionId: text2("stripe_subscription_id", { length: 255 }),
      paypalCustomerId: text2("paypal_customer_id", { length: 255 }),
      totalSpent: text2("total_spent").default("0").notNull(),
      totalOrders: integer("total_orders").default(0).notNull(),
      lastOrderDate: integer("last_order_date"),
      // Social login fields
      googleId: text2("google_id", { length: 255 }),
      facebookId: text2("facebook_id", { length: 255 }),
      githubId: text2("github_id", { length: 255 }),
      avatar: text2("avatar", { length: 500 }),
      // Affiliate program
      referralCode: text2("referral_code", { length: 20 }).unique(),
      referredBy: text2("referred_by", { length: 255 }),
      totalEarnings: text2("total_earnings").default("0"),
      commissionRate: text2("commission_rate").default("10.00"),
      // 10% default
      // Profile
      phone: text2("phone", { length: 50 }),
      address: text2("address"),
      dateOfBirth: text2("date_of_birth", { length: 10 }),
      preferredLanguage: text2("preferred_language", { length: 10 }).default("en").notNull(),
      marketingOptIn: integer("marketing_opt_in", { mode: "boolean" }).default(false).notNull(),
      createdAt: integer("created_at").default(sql`(CURRENT_TIMESTAMP)`).notNull(),
      updatedAt: integer("updated_at").default(sql`(CURRENT_TIMESTAMP)`).notNull()
    });
    affiliateTransactions = sqliteTable("affiliate_transactions", {
      id: integer("id").primaryKey({ autoIncrement: true }),
      affiliateId: integer("affiliate_id").notNull().references(() => customers.id),
      orderId: integer("order_id").notNull().references(() => orders.id),
      commission: text2("commission").notNull(),
      status: text2("status", { length: 20 }).default("pending").notNull(),
      // pending, paid, cancelled
      paidAt: integer("paid_at"),
      createdAt: integer("created_at").default(sql`(CURRENT_TIMESTAMP)`).notNull()
    });
    extensionUsageStats = sqliteTable("extension_usage_stats", {
      id: integer("id").primaryKey({ autoIncrement: true }),
      customerId: integer("customer_id").notNull().references(() => customers.id),
      sessionId: text2("session_id", { length: 100 }).notNull(),
      usageDate: integer("usage_date").default(sql`(CURRENT_TIMESTAMP)`).notNull(),
      jobsFound: integer("jobs_found").default(0).notNull(),
      jobsApplied: integer("jobs_applied").default(0).notNull(),
      successfulJobs: integer("successful_jobs").default(0).notNull(),
      sessionDuration: integer("session_duration_minutes").default(0).notNull(),
      // in minutes
      platform: text2("platform", { length: 50 }).default("ocus").notNull(),
      // ocus, ubereats, foodora
      location: text2("location", { length: 100 }),
      userAgent: text2("user_agent"),
      extensionVersion: text2("extension_version", { length: 20 }),
      createdAt: integer("created_at").default(sql`(CURRENT_TIMESTAMP)`).notNull()
    });
    customerPayments = sqliteTable("customer_payments", {
      id: integer("id").primaryKey({ autoIncrement: true }),
      customerId: integer("customer_id").notNull().references(() => customers.id),
      orderId: integer("order_id").notNull().references(() => orders.id),
      paymentMethod: text2("payment_method", { length: 20 }).notNull(),
      // stripe, paypal
      paymentIntentId: text2("payment_intent_id", { length: 255 }),
      paypalOrderId: text2("paypal_order_id", { length: 255 }),
      amount: text2("amount").notNull(),
      currency: text2("currency", { length: 3 }).default("usd").notNull(),
      status: text2("status", { length: 20 }).default("pending").notNull(),
      // pending, completed, failed, refunded
      failureReason: text2("failure_reason"),
      refundAmount: text2("refund_amount").default("0"),
      refundReason: text2("refund_reason"),
      processedAt: integer("processed_at"),
      createdAt: integer("created_at").default(sql`(CURRENT_TIMESTAMP)`).notNull()
    });
    globalUsageStats = sqliteTable("global_usage_stats", {
      id: integer("id").primaryKey({ autoIncrement: true }),
      statDate: text2("stat_date", { length: 10 }).notNull(),
      // YYYY-MM-DD format
      totalUsers: integer("total_users").default(0).notNull(),
      activeUsers: integer("active_users").default(0).notNull(),
      totalSessions: integer("total_sessions").default(0).notNull(),
      totalJobsFound: integer("total_jobs_found").default(0).notNull(),
      totalJobsApplied: integer("total_jobs_applied").default(0).notNull(),
      totalSuccessfulJobs: integer("total_successful_jobs").default(0).notNull(),
      avgSessionDuration: text2("avg_session_duration").default("0").notNull(),
      topPlatform: text2("top_platform", { length: 50 }),
      topLocation: text2("top_location", { length: 100 }),
      createdAt: integer("created_at").default(sql`(CURRENT_TIMESTAMP)`).notNull(),
      updatedAt: integer("updated_at").default(sql`(CURRENT_TIMESTAMP)`).notNull()
    });
    premiumDevices = sqliteTable("premium_devices", {
      id: integer("id").primaryKey({ autoIncrement: true }),
      userId: text2("user_id", { length: 100 }).notNull(),
      // Extension user ID
      deviceFingerprint: text2("device_fingerprint", { length: 64 }).notNull().unique(),
      extensionId: text2("extension_id", { length: 100 }).notNull(),
      isActive: integer("is_active", { mode: "boolean" }).default(true).notNull(),
      registeredAt: integer("registered_at").default(sql`(CURRENT_TIMESTAMP)`).notNull(),
      lastSeenAt: integer("last_seen_at").default(sql`(CURRENT_TIMESTAMP)`).notNull(),
      deactivatedAt: integer("deactivated_at"),
      deactivationReason: text2("deactivation_reason")
    });
    seoSettings = sqliteTable("seo_settings", {
      id: integer("id").primaryKey({ autoIncrement: true }),
      siteTitle: text2("site_title", { length: 100 }).default("OCUS Job Hunter - Premium Chrome Extension").notNull(),
      siteDescription: text2("site_description").default("Boost your photography career with OCUS Job Hunter Chrome Extension. Automated mission detection, smart acceptance, and unlimited job opportunities for OCUS photographers.").notNull(),
      siteKeywords: text2("site_keywords").default("OCUS extension, photography jobs, Chrome extension, job hunter, photographer tools, mission automation"),
      siteAuthor: text2("site_author", { length: 100 }).default("OCUS Job Hunter"),
      // Open Graph settings
      ogTitle: text2("og_title", { length: 100 }),
      ogDescription: text2("og_description"),
      ogImage: text2("og_image").default("/og-image.svg"),
      // URL or path to image
      ogImageAlt: text2("og_image_alt", { length: 200 }),
      ogSiteName: text2("og_site_name", { length: 100 }).default("OCUS Job Hunter"),
      ogType: text2("og_type", { length: 50 }).default("website"),
      ogUrl: text2("og_url", { length: 255 }).default("https://jobhunter.one/"),
      // Twitter Card settings  
      twitterCard: text2("twitter_card", { length: 50 }).default("summary_large_image"),
      twitterTitle: text2("twitter_title", { length: 100 }),
      twitterDescription: text2("twitter_description"),
      twitterImage: text2("twitter_image").default("/og-image.svg"),
      twitterSite: text2("twitter_site", { length: 50 }),
      twitterCreator: text2("twitter_creator", { length: 50 }),
      // Additional SEO settings
      metaRobots: text2("meta_robots", { length: 100 }).default("index, follow"),
      canonicalUrl: text2("canonical_url", { length: 255 }),
      themeColor: text2("theme_color", { length: 7 }).default("#2563eb"),
      // Custom image uploads
      customLogo: text2("custom_logo"),
      // Base64 or URL
      customFavicon: text2("custom_favicon"),
      // Base64 or URL
      customOgImage: text2("custom_og_image"),
      // Base64 or URL
      updatedAt: integer("updated_at").default(sql`(CURRENT_TIMESTAMP)`).notNull()
    });
    usersRelations = relations(users, ({ many }) => ({
      orders: many(orders)
    }));
    ordersRelations = relations(orders, ({ many, one }) => ({
      downloads: many(downloads),
      invoice: one(invoices, {
        fields: [orders.id],
        references: [invoices.orderId]
      }),
      user: one(users, {
        fields: [orders.userId],
        references: [users.id]
      })
    }));
    downloadsRelations = relations(downloads, ({ one }) => ({
      order: one(orders, {
        fields: [downloads.orderId],
        references: [orders.id]
      })
    }));
    activationKeysRelations = relations(activationKeys, ({ one }) => ({
      order: one(orders, {
        fields: [activationKeys.orderId],
        references: [orders.id]
      })
    }));
    ticketsRelations = relations(tickets, ({ many, one }) => ({
      messages: many(ticketMessages),
      assignedTo: one(users, {
        fields: [tickets.assignedToUserId],
        references: [users.id]
      })
    }));
    ticketMessagesRelations = relations(ticketMessages, ({ one }) => ({
      ticket: one(tickets, {
        fields: [ticketMessages.ticketId],
        references: [tickets.id]
      })
    }));
    customersRelations = relations(customers, ({ many }) => ({
      payments: many(customerPayments),
      usageStats: many(extensionUsageStats),
      affiliateTransactions: many(affiliateTransactions)
    }));
    customerPaymentsRelations = relations(customerPayments, ({ one }) => ({
      customer: one(customers, {
        fields: [customerPayments.customerId],
        references: [customers.id]
      }),
      order: one(orders, {
        fields: [customerPayments.orderId],
        references: [orders.id]
      })
    }));
    extensionUsageStatsRelations = relations(extensionUsageStats, ({ one }) => ({
      customer: one(customers, {
        fields: [extensionUsageStats.customerId],
        references: [customers.id]
      })
    }));
    affiliateTransactionsRelations = relations(affiliateTransactions, ({ one }) => ({
      affiliate: one(customers, {
        fields: [affiliateTransactions.affiliateId],
        references: [customers.id]
      }),
      order: one(orders, {
        fields: [affiliateTransactions.orderId],
        references: [orders.id]
      })
    }));
    countdownBanners = sqliteTable("countdown_banners", {
      id: integer("id").primaryKey({ autoIncrement: true }),
      isEnabled: integer("is_enabled", { mode: "boolean" }).default(false),
      titleEn: text2("title_en").notNull(),
      subtitleEn: text2("subtitle_en").notNull(),
      titleTranslations: text2("title_translations").default("{}"),
      subtitleTranslations: text2("subtitle_translations").default("{}"),
      targetPrice: text2("target_price").notNull(),
      originalPrice: text2("original_price"),
      endDateTime: integer("end_date_time").notNull(),
      backgroundColor: text2("background_color", { length: 20 }).default("gradient-primary"),
      textColor: text2("text_color", { length: 20 }).default("white"),
      priority: integer("priority").default(1),
      createdAt: integer("created_at").default(sql`(CURRENT_TIMESTAMP)`),
      updatedAt: integer("updated_at").default(sql`(CURRENT_TIMESTAMP)`)
    });
    announcementBadges = sqliteTable("announcement_badges", {
      id: integer("id").primaryKey({ autoIncrement: true }),
      isEnabled: integer("is_enabled", { mode: "boolean" }).default(true),
      textEn: text2("text_en").notNull(),
      textTranslations: text2("text_translations").default("{}"),
      backgroundColor: text2("background_color", { length: 20 }).default("gradient-primary"),
      textColor: text2("text_color", { length: 20 }).default("white"),
      priority: integer("priority").default(1),
      createdAt: integer("created_at").default(sql`(CURRENT_TIMESTAMP)`),
      updatedAt: integer("updated_at").default(sql`(CURRENT_TIMESTAMP)`)
    });
    extensionDownloads = sqliteTable("extension_downloads", {
      id: integer("id").primaryKey({ autoIncrement: true }),
      customerId: integer("customer_id").notNull().references(() => customers.id),
      downloadToken: text2("download_token", { length: 255 }).notNull().unique(),
      downloadType: text2("download_type", { length: 50 }).default("premium").notNull(),
      // premium, trial, etc.
      downloadedAt: integer("downloaded_at").default(sql`(CURRENT_TIMESTAMP)`).notNull(),
      ipAddress: text2("ip_address", { length: 45 }),
      userAgent: text2("user_agent"),
      downloadCount: integer("download_count").default(1).notNull(),
      maxDownloads: integer("max_downloads").default(3).notNull(),
      createdAt: integer("created_at").default(sql`(CURRENT_TIMESTAMP)`).notNull()
    });
    extensionUsageLogs = sqliteTable("extension_usage_logs", {
      id: integer("id").primaryKey({ autoIncrement: true }),
      customerId: integer("customer_id").notNull().references(() => customers.id),
      sessionId: text2("session_id", { length: 100 }).notNull(),
      jobsUsed: integer("jobs_used").default(1).notNull(),
      platform: text2("platform", { length: 50 }).default("ocus").notNull(),
      location: text2("location", { length: 100 }),
      usageDate: integer("usage_date").default(sql`(CURRENT_TIMESTAMP)`).notNull(),
      extensionVersion: text2("extension_version", { length: 20 }),
      ipAddress: text2("ip_address"),
      createdAt: integer("created_at").default(sql`(CURRENT_TIMESTAMP)`).notNull()
    });
    activationCodes = sqliteTable("activation_codes", {
      id: integer("id").primaryKey({ autoIncrement: true }),
      code: text2("code", { length: 50 }).notNull().unique(),
      customerId: integer("customer_id").references(() => customers.id),
      orderId: integer("order_id").references(() => orders.id),
      userId: integer("user_id").references(() => users.id),
      // Link to authenticated user
      installationId: text2("installation_id", { length: 36 }),
      // Unique installation identifier
      versionToken: text2("version_token", { length: 36 }).unique(),
      activatedAt: integer("activated_at"),
      activationCount: integer("activation_count").default(0).notNull(),
      maxActivations: integer("max_activations").default(1).notNull(),
      deviceId: text2("device_id", { length: 100 }),
      ipAddress: text2("ip_address"),
      isActive: integer("is_active", { mode: "boolean" }).default(true).notNull(),
      dailyValidationCount: integer("daily_validation_count").default(0).notNull(),
      // Daily rate limiting
      lastValidationDate: integer("last_validation_date"),
      // Track daily reset
      isRevoked: integer("is_revoked", { mode: "boolean" }).default(false).notNull(),
      // Manual revocation flag
      expiresAt: integer("expires_at"),
      createdAt: integer("created_at").default(sql`(CURRENT_TIMESTAMP)`).notNull()
    });
    extensionInstallations = sqliteTable("extension_installations", {
      id: integer("id").primaryKey({ autoIncrement: true }),
      installationId: text2("installation_id", { length: 36 }).notNull().unique(),
      userId: integer("user_id").references(() => users.id),
      // Link to authenticated user if logged in
      customerId: integer("customer_id").references(() => customers.id),
      // Fixed to integer
      deviceFingerprint: text2("device_fingerprint"),
      userAgent: text2("user_agent"),
      ipAddress: text2("ip_address"),
      extensionVersion: text2("extension_version", { length: 20 }),
      isActive: integer("is_active", { mode: "boolean" }).default(true).notNull(),
      lastSeenAt: integer("last_seen_at").default(sql`(CURRENT_TIMESTAMP)`).notNull(),
      createdAt: integer("created_at").default(sql`(CURRENT_TIMESTAMP)`).notNull()
    });
    insertUserSchema = createInsertSchema(users).pick({
      username: true,
      password: true,
      email: true
    });
    insertTicketSchema = createInsertSchema(tickets).pick({
      title: true,
      description: true,
      category: true,
      priority: true,
      customerEmail: true,
      customerName: true
    });
    insertTicketMessageSchema = createInsertSchema(ticketMessages).pick({
      ticketId: true,
      message: true,
      isFromCustomer: true,
      senderName: true,
      senderEmail: true
    });
    insertExtensionInstallationSchema = createInsertSchema(extensionInstallations).omit({
      id: true,
      createdAt: true,
      lastSeenAt: true
    });
    insertActivationCodeSchema = createInsertSchema(activationCodes).omit({
      id: true,
      createdAt: true,
      activatedAt: true,
      activationCount: true,
      dailyValidationCount: true,
      lastValidationDate: true
    });
    insertOrderSchema = createInsertSchema(orders).omit({
      id: true,
      createdAt: true,
      completedAt: true,
      downloadToken: true,
      downloadCount: true
    });
    insertProductSchema = createInsertSchema(products).omit({
      id: true,
      createdAt: true
    });
    insertDownloadSchema = createInsertSchema(downloads).omit({
      id: true,
      downloadedAt: true
    });
    insertCouponSchema = createInsertSchema(coupons).omit({
      id: true,
      createdAt: true,
      usageCount: true
    });
    insertSettingSchema = createInsertSchema(settings).omit({
      id: true,
      updatedAt: true
    });
    insertSeoSettingsSchema = createInsertSchema(seoSettings).omit({
      id: true,
      updatedAt: true
    });
    insertAuthSettingSchema = createInsertSchema(authSettings).omit({
      id: true,
      updatedAt: true
    });
    insertCustomerSchema = createInsertSchema(customers).omit({
      id: true,
      createdAt: true,
      updatedAt: true
    });
    insertExtensionDownloadSchema = createInsertSchema(extensionDownloads).omit({
      id: true,
      createdAt: true,
      downloadedAt: true
    });
    insertAnnouncementBadgeSchema = createInsertSchema(announcementBadges).omit({
      id: true,
      createdAt: true,
      updatedAt: true
    });
    insertExtensionUsageLogSchema = createInsertSchema(extensionUsageLogs).omit({
      id: true,
      createdAt: true
    });
    insertPremiumDeviceSchema = createInsertSchema(premiumDevices).omit({
      id: true,
      registeredAt: true,
      lastSeenAt: true
    });
    insertDashboardFeaturesSchema = createInsertSchema(dashboardFeatures).omit({
      id: true,
      updatedAt: true
    });
    insertAffiliateTransactionSchema = createInsertSchema(affiliateTransactions).omit({
      id: true,
      createdAt: true
    });
    insertCountdownBannerSchema = createInsertSchema(countdownBanners).omit({
      id: true,
      createdAt: true,
      updatedAt: true
    });
    insertActivationKeySchema = createInsertSchema(activationKeys).omit({
      id: true,
      createdAt: true
    });
    insertDemoUserSchema = createInsertSchema(demoUsers).omit({
      id: true,
      createdAt: true,
      lastUsedAt: true
    });
    affiliatePrograms = sqliteTable("affiliate_programs", {
      id: integer("id").primaryKey({ autoIncrement: true }),
      name: text2("name", { length: 100 }).notNull(),
      rewardType: text2("reward_type", { length: 20 }).default("percentage").notNull(),
      // percentage, fixed
      commissionRate: text2("commission_rate"),
      // for percentage
      fixedAmount: text2("fixed_amount"),
      // for fixed amount
      minPayout: text2("min_payout").default("50.00"),
      cookieLifetime: integer("cookie_lifetime").default(30),
      // days
      autoApproval: integer("auto_approval", { mode: "boolean" }).default(false),
      isActive: integer("is_active", { mode: "boolean" }).default(true),
      description: text2("description"),
      termsAndConditions: text2("terms_and_conditions"),
      createdAt: integer("created_at").default(sql`(CURRENT_TIMESTAMP)`).notNull(),
      updatedAt: integer("updated_at").default(sql`(CURRENT_TIMESTAMP)`).notNull()
    });
    affiliateSettings = sqliteTable("affiliate_settings", {
      id: integer("id").primaryKey({ autoIncrement: true }),
      defaultRewardType: text2("default_reward_type", { length: 20 }).default("percentage").notNull(),
      defaultCommissionRate: text2("default_commission_rate").default("10.00"),
      defaultFixedAmount: text2("default_fixed_amount").default("5.00"),
      minPayoutAmount: text2("min_payout_amount").default("50.00"),
      cookieLifetimeDays: integer("cookie_lifetime_days").default(30),
      autoApprovalEnabled: integer("auto_approval_enabled", { mode: "boolean" }).default(false),
      autoApprovalThreshold: text2("auto_approval_threshold").default("100.00"),
      payoutFrequency: text2("payout_frequency", { length: 20 }).default("monthly"),
      // weekly, monthly, quarterly
      isActive: integer("is_active", { mode: "boolean" }).default(true),
      updatedAt: integer("updated_at").default(sql`(CURRENT_TIMESTAMP)`).notNull()
    });
    affiliatePayouts = sqliteTable("affiliate_payouts", {
      id: integer("id").primaryKey({ autoIncrement: true }),
      affiliateId: integer("affiliate_id").notNull().references(() => customers.id),
      amount: text2("amount").notNull(),
      paymentMethod: text2("payment_method", { length: 20 }).notNull(),
      // paypal, bank, manual
      paymentEmail: text2("payment_email", { length: 255 }),
      bankDetails: text2("bank_details"),
      status: text2("status", { length: 20 }).default("pending").notNull(),
      // pending, processing, paid, failed
      transactionId: text2("transaction_id", { length: 255 }),
      notes: text2("notes"),
      requestedAt: integer("requested_at").default(sql`(CURRENT_TIMESTAMP)`).notNull(),
      processedAt: integer("processed_at"),
      paidAt: integer("paid_at"),
      createdAt: integer("created_at").default(sql`(CURRENT_TIMESTAMP)`).notNull()
    });
    invoiceSettings = sqliteTable("invoice_settings", {
      id: integer("id").primaryKey({ autoIncrement: true }),
      companyName: text2("company_name", { length: 255 }).default("OCUS Job Hunter").notNull(),
      companyLogo: text2("company_logo"),
      // Base64 or URL
      companyAddress: text2("company_address"),
      companyPhone: text2("company_phone", { length: 50 }),
      companyEmail: text2("company_email", { length: 255 }),
      companyWebsite: text2("company_website", { length: 255 }),
      taxNumber: text2("tax_number", { length: 100 }),
      invoicePrefix: text2("invoice_prefix", { length: 10 }).default("INV").notNull(),
      receiptPrefix: text2("receipt_prefix", { length: 10 }).default("RCP").notNull(),
      invoiceNotes: text2("invoice_notes"),
      termsAndConditions: text2("terms_and_conditions"),
      footerText: text2("footer_text"),
      primaryColor: text2("primary_color", { length: 7 }).default("#007bff"),
      secondaryColor: text2("secondary_color", { length: 7 }).default("#6c757d"),
      isActive: integer("is_active", { mode: "boolean" }).default(true),
      createdAt: integer("created_at").default(sql`(CURRENT_TIMESTAMP)`).notNull(),
      updatedAt: integer("updated_at").default(sql`(CURRENT_TIMESTAMP)`).notNull()
    });
    invoices = sqliteTable("invoices", {
      id: integer("id").primaryKey({ autoIncrement: true }),
      invoiceNumber: text2("invoice_number", { length: 50 }).notNull().unique(),
      orderId: integer("order_id").references(() => orders.id),
      customerId: integer("customer_id").references(() => customers.id),
      customerName: text2("customer_name", { length: 255 }).notNull(),
      customerEmail: text2("customer_email", { length: 255 }).notNull(),
      customerAddress: text2("customer_address"),
      billingAddress: text2("billing_address"),
      invoiceDate: integer("invoice_date").default(sql`(CURRENT_TIMESTAMP)`).notNull(),
      dueDate: integer("due_date").notNull(),
      subtotal: text2("subtotal").notNull(),
      taxAmount: text2("tax_amount").default("0.00"),
      discountAmount: text2("discount_amount").default("0.00"),
      totalAmount: text2("total_amount").notNull(),
      currency: text2("currency", { length: 3 }).default("USD").notNull(),
      status: text2("status", { length: 20 }).default("issued").notNull(),
      // issued, paid, overdue, cancelled
      paidAt: integer("paid_at"),
      notes: text2("notes"),
      createdAt: integer("created_at").default(sql`(CURRENT_TIMESTAMP)`).notNull(),
      updatedAt: integer("updated_at").default(sql`(CURRENT_TIMESTAMP)`).notNull()
    });
    invoiceItems = sqliteTable("invoice_items", {
      id: integer("id").primaryKey({ autoIncrement: true }),
      invoiceId: integer("invoice_id").references(() => invoices.id).notNull(),
      productName: text2("product_name", { length: 255 }).notNull(),
      description: text2("description"),
      quantity: integer("quantity").default(1).notNull(),
      unitPrice: text2("unit_price").notNull(),
      totalPrice: text2("total_price").notNull(),
      createdAt: integer("created_at").default(sql`(CURRENT_TIMESTAMP)`).notNull()
    });
    insertMissionSchema = createInsertSchema(missions).omit({
      id: true,
      createdAt: true,
      updatedAt: true
    });
    insertUserTrialSchema = createInsertSchema(userTrials).omit({
      id: true,
      createdAt: true,
      updatedAt: true
    });
    insertExtensionUsageStatsSchema = createInsertSchema(extensionUsageStats).omit({
      id: true,
      createdAt: true
    });
    insertCustomerPaymentSchema = createInsertSchema(customerPayments).omit({
      id: true,
      createdAt: true
    });
    insertGlobalUsageStatsSchema = createInsertSchema(globalUsageStats).omit({
      id: true,
      createdAt: true,
      updatedAt: true
    });
    continents = sqliteTable("continents", {
      id: integer("id").primaryKey({ autoIncrement: true }),
      name: text2("name", { length: 100 }).notNull().unique(),
      code: text2("code", { length: 2 }).notNull().unique(),
      createdAt: integer("created_at").notNull().default(sql`(CURRENT_TIMESTAMP)`)
    });
    countries = sqliteTable("countries", {
      id: integer("id").primaryKey({ autoIncrement: true }),
      name: text2("name", { length: 100 }).notNull(),
      code: text2("code", { length: 2 }).notNull().unique(),
      continentId: integer("continent_id").references(() => continents.id).notNull(),
      createdAt: integer("created_at").notNull().default(sql`(CURRENT_TIMESTAMP)`)
    });
    cities = sqliteTable("cities", {
      id: integer("id").primaryKey({ autoIncrement: true }),
      name: text2("name", { length: 100 }).notNull(),
      countryId: integer("country_id").references(() => countries.id).notNull(),
      isAvailable: integer("is_available", { mode: "boolean" }).notNull().default(true),
      assignedUserId: integer("assigned_user_id").references(() => customers.id),
      assignedAt: integer("assigned_at"),
      createdAt: integer("created_at").notNull().default(sql`(CURRENT_TIMESTAMP)`)
    });
    userLocationAssignments = sqliteTable("user_location_assignments", {
      id: integer("id").primaryKey({ autoIncrement: true }),
      userId: integer("user_id").references(() => customers.id).notNull().unique(),
      continentId: integer("continent_id").references(() => continents.id).notNull(),
      countryId: integer("country_id").references(() => countries.id).notNull(),
      cityId: integer("city_id").references(() => cities.id).notNull(),
      assignedAt: integer("assigned_at").notNull().default(sql`(CURRENT_TIMESTAMP)`),
      assignedBy: integer("assigned_by").references(() => customers.id),
      // null for self-assignment, admin user id for admin assignment
      isLocked: integer("is_locked", { mode: "boolean" }).notNull().default(true)
    });
    continentsRelations = relations(continents, ({ many }) => ({
      countries: many(countries)
    }));
    countriesRelations = relations(countries, ({ one, many }) => ({
      continent: one(continents, {
        fields: [countries.continentId],
        references: [continents.id]
      }),
      cities: many(cities)
    }));
    citiesRelations = relations(cities, ({ one }) => ({
      country: one(countries, {
        fields: [cities.countryId],
        references: [countries.id]
      }),
      assignedUser: one(customers, {
        fields: [cities.assignedUserId],
        references: [customers.id]
      })
    }));
    userLocationAssignmentsRelations = relations(userLocationAssignments, ({ one }) => ({
      user: one(customers, {
        fields: [userLocationAssignments.userId],
        references: [customers.id]
      }),
      continent: one(continents, {
        fields: [userLocationAssignments.continentId],
        references: [continents.id]
      }),
      country: one(countries, {
        fields: [userLocationAssignments.countryId],
        references: [countries.id]
      }),
      city: one(cities, {
        fields: [userLocationAssignments.cityId],
        references: [cities.id]
      }),
      assignedBy: one(customers, {
        fields: [userLocationAssignments.assignedBy],
        references: [customers.id]
      })
    }));
    insertContinentSchema = createInsertSchema(continents);
    insertCountrySchema = createInsertSchema(countries);
    insertCitySchema = createInsertSchema(cities);
    insertUserLocationAssignmentSchema = createInsertSchema(userLocationAssignments);
  }
});
var DatabaseStorage;
var storage;
var init_storage = __esm({
  "../server/storage.ts"() {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    init_schema();
    init_drizzle_orm();
    DatabaseStorage = class {
      static {
        __name(this, "DatabaseStorage");
      }
      static {
        __name2(this, "DatabaseStorage");
      }
      db;
      constructor(db) {
        this.db = db;
      }
      // Users
      async getUser(id) {
        const [user] = await this.db.select().from(users).where(eq(users.id, id));
        return user || void 0;
      }
      async getUserByUsername(username) {
        const [user] = await this.db.select().from(users).where(eq(users.username, username));
        return user || void 0;
      }
      async getUserByEmail(email) {
        const [user] = await this.db.select().from(users).where(eq(users.email, email));
        return user || void 0;
      }
      async createCustomer(customerData) {
        const now = (/* @__PURE__ */ new Date()).getTime();
        const [customer] = await this.db.insert(customers).values({ ...customerData, createdAt: now, updatedAt: now }).returning();
        return customer;
      }
      async updateUser(id, updates) {
        const [user] = await this.db.update(users).set(updates).where(eq(users.id, id)).returning();
        if (!user) {
          throw new Error(`User with id ${id} not found`);
        }
        return user;
      }
      async updateAuthSettings(updates) {
        const existing = await this.getAuthSettings();
        if (existing) {
          const [updated] = await this.db.update(authSettings).set({ ...updates, updatedAt: (/* @__PURE__ */ new Date()).getTime() }).where(eq(authSettings.id, existing.id)).returning();
          return updated;
        } else {
          return await this.createAuthSettings(updates);
        }
      }
      async updateSeoSettings(updates) {
        const existing = await this.getSeoSettings();
        if (existing) {
          const [updated] = await this.db.update(seoSettings).set({ ...updates, updatedAt: (/* @__PURE__ */ new Date()).getTime() }).where(eq(seoSettings.id, existing.id)).returning();
          return updated;
        } else {
          const [created] = await this.db.insert(seoSettings).values(updates).returning();
          return created;
        }
      }
      async getCustomerByEmail(email) {
        const [customer] = await this.db.select().from(customers).where(eq(customers.email, email));
        return customer;
      }
      async createActivationKey(insertActivationKey) {
        const [activationKey] = await this.db.insert(activationKeys).values(insertActivationKey).returning();
        return activationKey;
      }
      async updateTicket(id, updateData) {
        const [updatedTicket] = await this.db.update(tickets).set({ ...updateData, updatedAt: (/* @__PURE__ */ new Date()).getTime() }).where(eq(tickets.id, id)).returning();
        return updatedTicket;
      }
      async addTicketMessage(message) {
        const [newMessage] = await this.db.insert(ticketMessages).values({ ...message, createdAt: (/* @__PURE__ */ new Date()).getTime() }).returning();
        return newMessage;
      }
      async recordExtensionUsage(stats) {
        const today = /* @__PURE__ */ new Date();
        today.setHours(0, 0, 0, 0);
        const existingStats = await this.db.select().from(extensionUsageStats).where(and(eq(extensionUsageStats.customerId, stats.customerId), eq(extensionUsageStats.usageDate, today.getTime()))).limit(1);
        if (existingStats.length > 0) {
          const [updatedStats] = await this.db.update(extensionUsageStats).set({
            ...stats,
            updatedAt: (/* @__PURE__ */ new Date()).getTime()
          }).where(eq(extensionUsageStats.id, existingStats[0].id)).returning();
          return updatedStats;
        } else {
          const [newStats] = await this.db.insert(extensionUsageStats).values({
            ...stats,
            usageDate: today.getTime(),
            createdAt: (/* @__PURE__ */ new Date()).getTime(),
            updatedAt: (/* @__PURE__ */ new Date()).getTime()
          }).returning();
          return newStats;
        }
      }
      async getCustomerUsageStats(customerId) {
        const thirtyDaysAgo = /* @__PURE__ */ new Date();
        thirtyDaysAgo.setDate(thirtyDaysAgo.getDate() - 30);
        return await this.db.select().from(extensionUsageStats).where(and(eq(extensionUsageStats.customerId, parseInt(customerId)), gte(extensionUsageStats.usageDate, thirtyDaysAgo.getTime()))).orderBy(asc(extensionUsageStats.usageDate));
      }
      async getGlobalUsageStats() {
        const thirtyDaysAgo = /* @__PURE__ */ new Date();
        thirtyDaysAgo.setDate(thirtyDaysAgo.getDate() - 30);
        return await this.db.select().from(globalUsageStats).where(gte(globalUsageStats.statDate, thirtyDaysAgo.getTime())).orderBy(asc(globalUsageStats.statDate));
      }
      async updateGlobalStats(date) {
        const statDate = new Date(date).getTime();
        const [existingStats] = await this.db.select().from(globalUsageStats).where(eq(globalUsageStats.statDate, date));
        const todayStart = (/* @__PURE__ */ new Date(date + "T00:00:00Z")).getTime();
        const todayEnd = (/* @__PURE__ */ new Date(date + "T23:59:59Z")).getTime();
        const totalUsers = await this.db.select({ count: count() }).from(customers).where(eq(customers.isActivated, true));
        const activeUsers = await this.db.select({ count: count() }).from(extensionUsageStats).where(and(
          gte(extensionUsageStats.usageDate, todayStart),
          lte(extensionUsageStats.usageDate, todayEnd)
        ));
        const dailyStats = await this.db.select({
          totalSessions: count(),
          totalJobsFound: sql`COALESCE(SUM(${extensionUsageStats.jobsFound}), 0)`,
          totalJobsApplied: sql`COALESCE(SUM(${extensionUsageStats.jobsApplied}), 0)`,
          totalSuccessfulJobs: sql`COALESCE(SUM(${extensionUsageStats.successfulJobs}), 0)`,
          avgSessionDuration: sql`COALESCE(AVG(${extensionUsageStats.sessionDuration}), 0)`
        }).from(extensionUsageStats).where(and(
          gte(extensionUsageStats.usageDate, todayStart),
          lte(extensionUsageStats.usageDate, todayEnd)
        ));
        const statsData = {
          statDate: date,
          totalUsers: totalUsers[0]?.count || 0,
          activeUsers: activeUsers[0]?.count || 0,
          totalSessions: dailyStats[0]?.totalSessions || 0,
          totalJobsFound: Number(dailyStats[0]?.totalJobsFound) || 0,
          totalJobsApplied: Number(dailyStats[0]?.totalJobsApplied) || 0,
          totalSuccessfulJobs: Number(dailyStats[0]?.totalSuccessfulJobs) || 0,
          avgSessionDuration: dailyStats[0]?.avgSessionDuration?.toString() || "0",
          updatedAt: (/* @__PURE__ */ new Date()).getTime()
        };
        if (existingStats) {
          await this.db.update(globalUsageStats).set(statsData).where(eq(globalUsageStats.id, existingStats.id));
        } else {
          await this.db.insert(globalUsageStats).values(statsData);
        }
      }
      // Customer Payments
      async recordPayment(payment) {
        const [newPayment] = await this.db.insert(customerPayments).values(payment).returning();
        if (payment.status === "completed") {
          await this.db.update(customers).set({
            totalSpent: sql`${customers.totalSpent} + ${payment.amount}`,
            totalOrders: sql`${customers.totalOrders} + 1`,
            lastOrderDate: (/* @__PURE__ */ new Date()).getTime(),
            updatedAt: (/* @__PURE__ */ new Date()).getTime()
          }).where(eq(customers.id, payment.customerId));
        }
        return newPayment;
      }
      async getCustomerPayments(customerId) {
        return await this.db.select().from(customerPayments).where(eq(customerPayments.customerId, customerId)).orderBy(desc(customerPayments.createdAt));
      }
      async updatePaymentStatus(paymentId, status, processedAt) {
        const [updatedPayment] = await this.db.update(customerPayments).set({
          status,
          processedAt: (processedAt || /* @__PURE__ */ new Date()).getTime()
        }).where(eq(customerPayments.id, paymentId)).returning();
        return updatedPayment;
      }
      // Database Ticket Operations (Real Implementation)
      async createTicketDB(ticket) {
        const [newTicket] = await this.db.insert(tickets).values(ticket).returning();
        return newTicket;
      }
      async getTicketDB(id) {
        const [ticket] = await this.db.select().from(tickets).where(eq(tickets.id, id));
        return ticket;
      }
      async getCustomerTickets(customerEmail) {
        return await this.db.select().from(tickets).where(eq(tickets.customerEmail, customerEmail)).orderBy(desc(tickets.createdAt));
      }
      async getAllTicketsDB() {
        return await this.db.select().from(tickets).orderBy(desc(tickets.createdAt));
      }
      async updateTicketStatusDB(id, status) {
        const updateData = {
          status,
          updatedAt: (/* @__PURE__ */ new Date()).getTime()
        };
        if (status === "resolved" || status === "closed") {
          updateData.resolvedAt = (/* @__PURE__ */ new Date()).getTime();
        }
        const [updatedTicket] = await this.db.update(tickets).set(updateData).where(eq(tickets.id, id)).returning();
        return updatedTicket;
      }
      async deleteTicketDB(id) {
        await this.db.delete(ticketMessages).where(eq(ticketMessages.ticketId, id));
        await this.db.delete(tickets).where(eq(tickets.id, id));
      }
      async addTicketMessageDB(message) {
        const [newMessage] = await this.db.insert(ticketMessages).values(message).returning();
        await this.db.update(tickets).set({ updatedAt: (/* @__PURE__ */ new Date()).getTime() }).where(eq(tickets.id, message.ticketId));
        return newMessage;
      }
      async getTicketMessagesDB(ticketId) {
        return await this.db.select().from(ticketMessages).where(eq(ticketMessages.ticketId, ticketId)).orderBy(ticketMessages.createdAt);
      }
      // Product Pricing Management Implementation
      async updateProductPricing(data) {
        try {
          const existingProducts = await this.db.select().from(products).limit(1);
          if (existingProducts.length === 0) {
            const [newProduct] = await this.db.insert(products).values({
              name: "OCUS Job Hunter Chrome Extension",
              description: "Premium Chrome extension for photography job hunting on OCUS (Ubereats/Foodora deliveries)",
              price: data.price.toString(),
              beforePrice: data.beforePrice ? data.beforePrice.toString() : null,
              currency: "eur",
              fileName: "ocus-extension.crx",
              filePath: "/uploads/ocus-extension.crx",
              isActive: true
            }).returning();
            return newProduct;
          } else {
            const [updatedProduct] = await this.db.update(products).set({
              price: data.price.toString(),
              beforePrice: data.beforePrice ? data.beforePrice.toString() : null
            }).where(eq(products.id, existingProducts[0].id)).returning();
            return updatedProduct;
          }
        } catch (error) {
          console.error("Error updating product pricing:", error);
          throw error;
        }
      }
      async getCurrentProduct() {
        try {
          const productList = await this.db.select().from(products).where(eq(products.isActive, true)).limit(1);
          if (productList.length === 0) {
            return {
              id: 1,
              name: "OCUS Job Hunter Chrome Extension",
              description: "Premium Chrome extension for photography job hunting on OCUS (Ubereats/Foodora deliveries)",
              price: "500.00",
              beforePrice: null,
              currency: "eur"
            };
          }
          return productList[0];
        } catch (error) {
          console.error("Error fetching current product:", error);
          throw error;
        }
      }
      // Countdown Banner Management
      async createCountdownBanner(bannerData) {
        try {
          const [newBanner] = await this.db.insert(countdownBanners).values(bannerData).returning();
          return newBanner;
        } catch (error) {
          console.error("Error creating countdown banner:", error);
          throw error;
        }
      }
      async updateCountdownBanner(id, bannerData) {
        try {
          const [updatedBanner] = await this.db.update(countdownBanners).set({ ...bannerData, updatedAt: (/* @__PURE__ */ new Date()).getTime() }).where(eq(countdownBanners.id, id)).returning();
          return updatedBanner;
        } catch (error) {
          console.error("Error updating countdown banner:", error);
          throw error;
        }
      }
      async getActiveCountdownBanner() {
        try {
          const [activeBanner] = await this.db.select().from(countdownBanners).where(eq(countdownBanners.isEnabled, true)).orderBy(countdownBanners.priority, countdownBanners.createdAt).limit(1);
          if (activeBanner && new Date(activeBanner.endDateTime) <= /* @__PURE__ */ new Date()) {
            await this.db.update(countdownBanners).set({ isEnabled: false }).where(eq(countdownBanners.id, activeBanner.id));
            return null;
          }
          return activeBanner || null;
        } catch (error) {
          console.error("Error fetching active countdown banner:", error);
          throw error;
        }
      }
      async getAllCountdownBanners() {
        try {
          return await this.db.select().from(countdownBanners).orderBy(countdownBanners.createdAt);
        } catch (error) {
          console.error("Error fetching countdown banners:", error);
          throw error;
        }
      }
      async deleteCountdownBanner(id) {
        try {
          await this.db.delete(countdownBanners).where(eq(countdownBanners.id, id));
        } catch (error) {
          console.error("Error deleting countdown banner:", error);
          throw error;
        }
      }
      // Announcement Badge Management
      async getActiveAnnouncementBadge() {
        try {
          const [activeBadge] = await this.db.select().from(announcementBadges).where(eq(announcementBadges.isEnabled, true)).orderBy(desc(announcementBadges.priority), desc(announcementBadges.createdAt)).limit(1);
          return activeBadge || null;
        } catch (error) {
          console.error("Error fetching active announcement badge:", error);
          throw error;
        }
      }
      async getAllAnnouncementBadges() {
        try {
          return await this.db.select().from(announcementBadges).orderBy(desc(announcementBadges.createdAt));
        } catch (error) {
          console.error("Error fetching announcement badges:", error);
          throw error;
        }
      }
      async createAnnouncementBadge(data) {
        try {
          const [badge] = await this.db.insert(announcementBadges).values(data).returning();
          return badge;
        } catch (error) {
          console.error("Error creating announcement badge:", error);
          throw error;
        }
      }
      async updateAnnouncementBadge(id, data) {
        try {
          const [badge] = await this.db.update(announcementBadges).set({ ...data, updatedAt: (/* @__PURE__ */ new Date()).getTime() }).where(eq(announcementBadges.id, id)).returning();
          return badge;
        } catch (error) {
          console.error("Error updating announcement badge:", error);
          throw error;
        }
      }
      async deleteAnnouncementBadge(id) {
        try {
          await this.db.delete(announcementBadges).where(eq(announcementBadges.id, id));
        } catch (error) {
          console.error("Error deleting announcement badge:", error);
          throw error;
        }
      }
      async deleteCustomer(id) {
        const customerId = typeof id === "string" ? parseInt(id) : id;
        await this.db.delete(tickets).where(eq(tickets.customerEmail, (await this.getCustomer(customerId))?.email || ""));
        await this.db.delete(customers).where(eq(customers.id, customerId));
      }
      // Lottery Scratch Activation System
      generateUniqueActivationKey() {
        return Math.random().toString(36).substring(2, 15) + Math.random().toString(36).substring(2, 15);
      }
      async revealActivationKey(customerId) {
        const [customer] = await this.db.update(customers).set({
          activationKeyRevealed: true,
          extensionActivated: true,
          // Activate extension after payment
          updatedAt: (/* @__PURE__ */ new Date()).getTime()
        }).where(eq(customers.id, parseInt(customerId))).returning();
        return customer;
      }
      // Activation Code System Implementation
      async createActivationCode(codeData) {
        const [code] = await this.db.insert(activationCodes).values(codeData).returning();
        return code;
      }
      async getActivationCode(code) {
        const [activation] = await this.db.select().from(activationCodes).where(eq(activationCodes.code, code));
        return activation || void 0;
      }
      async getActivationCodeByVersionToken(versionToken) {
        const [activation] = await this.db.select().from(activationCodes).where(eq(activationCodes.versionToken, versionToken));
        return activation || void 0;
      }
      async activateCode(code, deviceId, ipAddress) {
        const activation = await this.getActivationCode(code);
        if (!activation) {
          throw new Error("Invalid activation code");
        }
        if (!activation.isActive) {
          throw new Error("Activation code is inactive");
        }
        if (activation.expiresAt && (/* @__PURE__ */ new Date()).getTime() > activation.expiresAt) {
          throw new Error("Activation code has expired");
        }
        if (activation.activationCount >= activation.maxActivations) {
          throw new Error("Activation code has reached maximum activations");
        }
        const [updated] = await this.db.update(activationCodes).set({
          activatedAt: activation.activatedAt || (/* @__PURE__ */ new Date()).getTime(),
          activationCount: activation.activationCount + 1,
          deviceId,
          ipAddress
        }).where(eq(activationCodes.code, code)).returning();
        return updated;
      }
      async getCustomerActivationCodes(customerId) {
        return await this.db.select().from(activationCodes).where(eq(activationCodes.customerId, parseInt(customerId))).orderBy(desc(activationCodes.createdAt));
      }
      async deactivateCode(code) {
        const [updated] = await this.db.update(activationCodes).set({ isActive: false }).where(eq(activationCodes.code, code)).returning();
        return updated;
      }
      async generateActivationCode(customerId, orderId) {
        let code;
        let exists2 = true;
        while (exists2) {
          code = this.generateUniqueActivationKey();
          const existing = await this.getActivationCode(code);
          exists2 = !!existing;
        }
        const versionToken = crypto.randomUUID();
        const codeData = {
          code,
          customerId: parseInt(customerId),
          orderId,
          versionToken,
          maxActivations: 1,
          isActive: true,
          expiresAt: new Date(Date.now() + 365 * 24 * 60 * 60 * 1e3).getTime()
          // 1 year expiry
        };
        return await this.createActivationCode(codeData);
      }
      async getActivationKeyByOrderId(orderId) {
        const [key] = await this.db.select().from(activationKeys).where(eq(activationKeys.orderId, orderId));
        return key || null;
      }
      // Extension Management
      async createExtensionDownload(download) {
        const [newDownload] = await this.db.insert(extensionDownloads).values({
          ...download,
          downloadToken: download.downloadToken || crypto.randomUUID()
        }).returning();
        return newDownload;
      }
      async getExtensionDownload(token) {
        const [download] = await this.db.select().from(extensionDownloads).where(eq(extensionDownloads.downloadToken, token));
        return download || void 0;
      }
      async incrementExtensionDownloadCount(id) {
        const [download] = await this.db.update(extensionDownloads).set({
          downloadCount: sql`${extensionDownloads.downloadCount} + 1`
        }).where(eq(extensionDownloads.id, id)).returning();
        return download;
      }
      async getExtensionDownloads(customerId) {
        const id = typeof customerId === "string" ? parseInt(customerId) : customerId;
        return await this.db.select().from(extensionDownloads).where(eq(extensionDownloads.customerId, id)).orderBy(desc(extensionDownloads.createdAt));
      }
      async getCustomerExtensionDownloads(customerId) {
        return await this.getExtensionDownloads(customerId);
      }
      // Social Authentication Methods
      // Customer Extension Management
      async blockCustomer(customerId, reason) {
        const id = typeof customerId === "string" ? parseInt(customerId) : customerId;
        const [customer] = await this.db.update(customers).set({
          isBlocked: true,
          blockedReason: reason,
          blockedAt: (/* @__PURE__ */ new Date()).getTime(),
          updatedAt: (/* @__PURE__ */ new Date()).getTime()
        }).where(eq(customers.id, id)).returning();
        return customer;
      }
      async unblockCustomer(customerId) {
        const id = typeof customerId === "string" ? parseInt(customerId) : customerId;
        const [customer] = await this.db.update(customers).set({
          isBlocked: false,
          blockedReason: null,
          blockedAt: null,
          updatedAt: (/* @__PURE__ */ new Date()).getTime()
        }).where(eq(customers.id, id)).returning();
        return customer;
      }
      async generateExtensionActivationKey(customerId) {
        const id = typeof customerId === "string" ? parseInt(customerId) : customerId;
        const activationKey = crypto.randomUUID().replace(/-/g, "").substring(0, 20).toUpperCase();
        const [customer] = await this.db.update(customers).set({
          activationKey,
          isActivated: true,
          updatedAt: (/* @__PURE__ */ new Date()).getTime()
        }).where(eq(customers.id, id)).returning();
        return customer;
      }
      async activateExtension(customerId, activationKey) {
        const [customer] = await this.db.update(customers).set({
          extensionActivated: true,
          extensionLastUsed: (/* @__PURE__ */ new Date()).getTime(),
          updatedAt: (/* @__PURE__ */ new Date()).getTime()
        }).where(and(
          eq(customers.id, parseInt(customerId)),
          eq(customers.activationKey, activationKey),
          eq(customers.isActivated, true)
        )).returning();
        return customer;
      }
      async recordExtensionUsageLog(usage) {
        await this.db.update(customers).set({
          extensionTrialJobsUsed: sql`${customers.extensionTrialJobsUsed} + ${usage.jobsUsed}`,
          extensionLastUsed: (/* @__PURE__ */ new Date()).getTime(),
          updatedAt: (/* @__PURE__ */ new Date()).getTime()
        }).where(eq(customers.id, typeof usage.customerId === "string" ? parseInt(usage.customerId) : usage.customerId));
        const [usageLog] = await this.db.insert(extensionUsageLogs).values(usage).returning();
        return usageLog;
      }
      // Extension installation methods
      async createExtensionInstallation(data) {
        const [installation] = await this.db.insert(extensionInstallations).values(data).returning();
        return installation;
      }
      async getExtensionInstallation(installationId) {
        const [installation] = await this.db.select().from(extensionInstallations).where(eq(extensionInstallations.installationId, installationId));
        return installation || null;
      }
      async updateInstallationLastSeen(installationId) {
        await this.db.update(extensionInstallations).set({ lastSeenAt: (/* @__PURE__ */ new Date()).getTime() }).where(eq(extensionInstallations.installationId, installationId));
      }
      async getUserInstallations(userId) {
        return await this.db.select().from(extensionInstallations).where(eq(extensionInstallations.userId, userId));
      }
      // Enhanced activation code methods
      async createActivationCodeForUser(userId, installationId, orderId) {
        const code = `OCUS-${Date.now()}-${crypto.randomBytes(4).toString("hex").toUpperCase()}`;
        const versionToken = crypto.randomUUID();
        const [activationCode] = await this.db.insert(activationCodes).values({
          code,
          userId,
          orderId,
          installationId,
          versionToken,
          maxActivations: 1,
          activationCount: 0,
          isActive: true,
          dailyValidationCount: 0,
          isRevoked: false
        }).returning();
        return activationCode;
      }
      async validateActivationCodeForInstallation(code, installationId) {
        const [activationCode] = await this.db.select().from(activationCodes).where(eq(activationCodes.code, code));
        if (!activationCode) {
          return { valid: false, message: "Invalid activation code" };
        }
        if (activationCode.isRevoked) {
          return { valid: false, message: "Activation code has been revoked" };
        }
        if (activationCode.expiresAt && (/* @__PURE__ */ new Date()).getTime() > activationCode.expiresAt) {
          return { valid: false, message: "Activation code has expired" };
        }
        if (!activationCode.isActive) {
          return { valid: false, message: "Activation code is inactive" };
        }
        if (activationCode.installationId && activationCode.installationId !== installationId) {
          return { valid: false, message: "Activation code is already bound to another installation" };
        }
        if (activationCode.activationCount >= activationCode.maxActivations) {
          return { valid: false, message: "Activation code has been used maximum number of times" };
        }
        const today = /* @__PURE__ */ new Date();
        today.setHours(0, 0, 0, 0);
        const lastValidationDate = activationCode.lastValidationDate ? new Date(activationCode.lastValidationDate) : null;
        if (lastValidationDate) {
          lastValidationDate.setHours(0, 0, 0, 0);
        }
        let dailyCount = activationCode.dailyValidationCount;
        if (!lastValidationDate || lastValidationDate.getTime() !== today.getTime()) {
          dailyCount = 0;
        }
        if (dailyCount >= 100) {
          return { valid: false, message: "Daily validation limit exceeded" };
        }
        await this.db.update(activationCodes).set({
          installationId: activationCode.installationId || installationId,
          activationCount: activationCode.installationId ? activationCode.activationCount : activationCode.activationCount + 1,
          activatedAt: activationCode.activatedAt || (/* @__PURE__ */ new Date()).getTime(),
          dailyValidationCount: dailyCount + 1,
          lastValidationDate: (/* @__PURE__ */ new Date()).getTime()
        }).where(eq(activationCodes.id, activationCode.id));
        return { valid: true, message: "Activation code is valid", activationCode };
      }
      async getActivationCodeByInstallation(installationId) {
        const [activationCode] = await this.db.select().from(activationCodes).where(eq(activationCodes.installationId, installationId));
        return activationCode || null;
      }
      async revokeActivationCode(codeId, reason) {
        await this.db.update(activationCodes).set({
          isRevoked: true,
          isActive: false
        }).where(eq(activationCodes.id, codeId));
      }
      async getCustomerTrialUsage(customerId) {
        const [customer] = await this.db.select({ extensionTrialJobsUsed: customers.extensionTrialJobsUsed }).from(customers).where(eq(customers.id, parseInt(customerId)));
        return customer?.extensionTrialJobsUsed || 0;
      }
      async canUseExtension(customerId) {
        const id = typeof customerId === "string" ? parseInt(customerId) : customerId;
        const [customer] = await this.db.select().from(customers).where(eq(customers.id, id));
        if (!customer) {
          return { canUse: false, reason: "Customer not found" };
        }
        if (customer.isBlocked) {
          return {
            canUse: false,
            reason: customer.blockedReason || "Account blocked",
            isBlocked: true
          };
        }
        if (customer.extensionActivated) {
          return { canUse: true };
        }
        if (customer.extensionTrialJobsUsed >= customer.extensionTrialLimit) {
          return {
            canUse: false,
            reason: "Trial limit exceeded. Please purchase activation code.",
            trialUsed: customer.extensionTrialJobsUsed
          };
        }
        return {
          canUse: true,
          trialUsed: customer.extensionTrialJobsUsed
        };
      }
      // Admin Customer Management
      async getAllCustomersForAdmin() {
        return await this.db.select().from(customers).orderBy(desc(customers.createdAt));
      }
      async getCustomerActivations() {
        const customersList = await this.getAllCustomersForAdmin();
        const result = [];
        for (const customer of customersList) {
          const downloads3 = await this.getCustomerExtensionDownloads(customer.id.toString());
          result.push({ customer, downloads: downloads3 });
        }
        return result;
      }
      // Mission Tracking Implementation
      async createMission(mission) {
        const [newMission] = await this.db.insert(missions).values({
          ...mission,
          createdAt: (/* @__PURE__ */ new Date()).getTime(),
          updatedAt: (/* @__PURE__ */ new Date()).getTime()
        }).returning();
        return newMission;
      }
      async getMission(missionId) {
        const [mission] = await this.db.select().from(missions).where(eq(missions.missionId, missionId));
        return mission || void 0;
      }
      async updateMissionStatus(missionId, status, timestamp) {
        const updateData = {
          status,
          updatedAt: (/* @__PURE__ */ new Date()).getTime()
        };
        switch (status) {
          case "assignment_accepted":
            updateData.assignmentAcceptedAt = (timestamp || /* @__PURE__ */ new Date()).getTime();
            break;
          case "appointment_confirmation":
            updateData.appointmentConfirmedAt = (timestamp || /* @__PURE__ */ new Date()).getTime();
            break;
          case "media_upload":
            updateData.mediaUploadedAt = (timestamp || /* @__PURE__ */ new Date()).getTime();
            break;
          case "billing_payment":
            updateData.billingCompletedAt = (timestamp || /* @__PURE__ */ new Date()).getTime();
            break;
          case "assignment_complete":
            updateData.assignmentCompletedAt = (timestamp || /* @__PURE__ */ new Date()).getTime();
            break;
        }
        const [updatedMission] = await this.db.update(missions).set(updateData).where(eq(missions.missionId, missionId)).returning();
        return updatedMission;
      }
      async getUserMissions(userId) {
        return await this.db.select().from(missions).where(eq(missions.userId, userId)).orderBy(desc(missions.createdAt));
      }
      async getCustomerMissions(customerId) {
        return await this.db.select().from(missions).where(eq(missions.customerId, customerId)).orderBy(desc(missions.createdAt));
      }
      // User Trial Management Implementation
      async createUserTrial(trial) {
        const [newTrial] = await this.db.insert(userTrials).values({
          ...trial,
          createdAt: (/* @__PURE__ */ new Date()).getTime(),
          updatedAt: (/* @__PURE__ */ new Date()).getTime()
        }).returning();
        return newTrial;
      }
      async getUserTrial(userId) {
        const [trial] = await this.db.select().from(userTrials).where(eq(userTrials.userId, userId));
        return trial || void 0;
      }
      // Trial usage methods for cross-browser tracking
      async getTrialUsage(trialKey) {
        const [usage] = await this.db.select().from(trialUsage).where(eq(trialUsage.trialKey, trialKey));
        return usage || void 0;
      }
      async createTrialUsage(data) {
        const [usage] = await this.db.insert(trialUsage).values(data).returning();
        return usage;
      }
      async incrementTrialUsage(trialKey) {
        const [usage] = await this.db.update(trialUsage).set({
          usageCount: sql`${trialUsage.usageCount} + 1`,
          lastUsed: (/* @__PURE__ */ new Date()).getTime()
        }).where(eq(trialUsage.trialKey, trialKey)).returning();
        return usage;
      }
      async expireTrialUsage(trialKey) {
        const [usage] = await this.db.update(trialUsage).set({ isExpired: true }).where(eq(trialUsage.trialKey, trialKey)).returning();
        return usage;
      }
      // Premium Device Management Implementation
      async getPremiumDevice(userId, deviceFingerprint) {
        const [device] = await this.db.select().from(premiumDevices).where(
          and(
            eq(premiumDevices.userId, userId),
            eq(premiumDevices.deviceFingerprint, deviceFingerprint),
            eq(premiumDevices.isActive, true)
          )
        );
        return device || void 0;
      }
      async getUserPremiumDevices(userId) {
        return await this.db.select().from(premiumDevices).where(
          and(
            eq(premiumDevices.userId, userId),
            eq(premiumDevices.isActive, true)
          )
        );
      }
      async registerPremiumDevice(userId, deviceFingerprint, extensionId) {
        const [device] = await this.db.insert(premiumDevices).values({
          userId,
          deviceFingerprint,
          extensionId,
          isActive: true,
          registeredAt: (/* @__PURE__ */ new Date()).getTime(),
          lastSeenAt: (/* @__PURE__ */ new Date()).getTime()
        }).returning();
        return device;
      }
      async deactivatePremiumDevice(deviceFingerprint, reason) {
        const [device] = await this.db.update(premiumDevices).set({
          isActive: false,
          deactivatedAt: (/* @__PURE__ */ new Date()).getTime(),
          deactivationReason: reason || "User requested deactivation"
        }).where(eq(premiumDevices.deviceFingerprint, deviceFingerprint)).returning();
        return device;
      }
      async updatePremiumDeviceLastSeen(deviceFingerprint) {
        const [device] = await this.db.update(premiumDevices).set({ lastSeenAt: (/* @__PURE__ */ new Date()).getTime() }).where(eq(premiumDevices.deviceFingerprint, deviceFingerprint)).returning();
        return device;
      }
      // Dashboard Features Management Implementation
      async getDashboardFeatures() {
        return await this.db.select().from(dashboardFeatures);
      }
      async getDashboardFeature(featureName) {
        const [feature] = await this.db.select().from(dashboardFeatures).where(eq(dashboardFeatures.featureName, featureName));
        return feature || void 0;
      }
      async createDashboardFeature(feature) {
        const [newFeature] = await this.db.insert(dashboardFeatures).values({
          ...feature,
          updatedAt: (/* @__PURE__ */ new Date()).getTime()
        }).returning();
        return newFeature;
      }
      async updateDashboardFeature(featureName, isEnabled, description) {
        const [updatedFeature] = await this.db.update(dashboardFeatures).set({
          isEnabled,
          description: description || void 0,
          updatedAt: (/* @__PURE__ */ new Date()).getTime()
        }).where(eq(dashboardFeatures.featureName, featureName)).returning();
        return updatedFeature;
      }
      async initializeDashboardFeatures() {
        const defaultFeatures = [
          { featureName: "affiliate_program", isEnabled: true, description: "Enable/disable affiliate program section in user dashboard" },
          { featureName: "analytics", isEnabled: true, description: "Enable/disable analytics section in user dashboard" },
          { featureName: "billing", isEnabled: true, description: "Enable/disable billing section in user dashboard" }
        ];
        for (const feature of defaultFeatures) {
          const existing = await this.getDashboardFeature(feature.featureName);
          if (!existing) {
            await this.createDashboardFeature(feature);
          }
        }
      }
      // Order Management - Missing method implementation
      async updateOrder(id, updates) {
        const [updatedOrder] = await this.db.update(orders).set({ ...updates }).where(eq(orders.id, id)).returning();
        return updatedOrder;
      }
      // Missing method implementations for Stripe webhook
      async createOrder(order) {
        const [newOrder] = await this.db.insert(orders).values({ ...order, createdAt: (/* @__PURE__ */ new Date()).getTime() }).returning();
        return newOrder;
      }
      async getOrderByPaymentIntentId(paymentIntentId) {
        const [order] = await this.db.select().from(orders).where(eq(orders.paymentIntentId, paymentIntentId));
        return order || void 0;
      }
      async updateCustomer(id, updates) {
        const customerId = typeof id === "string" ? parseInt(id) : id;
        const [updatedCustomer] = await this.db.update(customers).set({ ...updates, updatedAt: (/* @__PURE__ */ new Date()).getTime() }).where(eq(customers.id, customerId)).returning();
        return updatedCustomer;
      }
      async createInvoice(invoice) {
        const [newInvoice] = await this.db.insert(invoices).values({ ...invoice, createdAt: (/* @__PURE__ */ new Date()).getTime(), updatedAt: (/* @__PURE__ */ new Date()).getTime() }).returning();
        return newInvoice;
      }
      async createInvoiceItem(item) {
        const [newItem] = await this.db.insert(invoiceItems).values({ ...item, createdAt: (/* @__PURE__ */ new Date()).getTime() }).returning();
        return newItem;
      }
    };
    storage = new DatabaseStorage();
  }
});
function d1ToRawMapping(results) {
  const rows = [];
  for (const row of results) {
    const entry = Object.keys(row).map((k2) => row[k2]);
    rows.push(entry);
  }
  return rows;
}
__name(d1ToRawMapping, "d1ToRawMapping");
var SQLiteD1Session;
var D1Transaction;
var D1PreparedQuery;
var init_session2 = __esm({
  "../node_modules/drizzle-orm/d1/session.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_entity();
    init_logger();
    init_sql();
    init_sqlite_core();
    init_session();
    init_utils();
    SQLiteD1Session = class extends SQLiteSession {
      static {
        __name(this, "SQLiteD1Session");
      }
      static {
        __name2(this, "SQLiteD1Session");
      }
      constructor(client, dialect, schema, options = {}) {
        super(dialect);
        this.client = client;
        this.schema = schema;
        this.options = options;
        this.logger = options.logger ?? new NoopLogger();
      }
      static [entityKind] = "SQLiteD1Session";
      logger;
      prepareQuery(query, fields, executeMethod, isResponseInArrayMode, customResultMapper) {
        const stmt = this.client.prepare(query.sql);
        return new D1PreparedQuery(
          stmt,
          query,
          this.logger,
          fields,
          executeMethod,
          isResponseInArrayMode,
          customResultMapper
        );
      }
      async batch(queries) {
        const preparedQueries = [];
        const builtQueries = [];
        for (const query of queries) {
          const preparedQuery = query._prepare();
          const builtQuery = preparedQuery.getQuery();
          preparedQueries.push(preparedQuery);
          if (builtQuery.params.length > 0) {
            builtQueries.push(preparedQuery.stmt.bind(...builtQuery.params));
          } else {
            const builtQuery2 = preparedQuery.getQuery();
            builtQueries.push(
              this.client.prepare(builtQuery2.sql).bind(...builtQuery2.params)
            );
          }
        }
        const batchResults = await this.client.batch(builtQueries);
        return batchResults.map((result, i33) => preparedQueries[i33].mapResult(result, true));
      }
      extractRawAllValueFromBatchResult(result) {
        return result.results;
      }
      extractRawGetValueFromBatchResult(result) {
        return result.results[0];
      }
      extractRawValuesValueFromBatchResult(result) {
        return d1ToRawMapping(result.results);
      }
      async transaction(transaction, config) {
        const tx = new D1Transaction("async", this.dialect, this, this.schema);
        await this.run(sql.raw(`begin${config?.behavior ? " " + config.behavior : ""}`));
        try {
          const result = await transaction(tx);
          await this.run(sql`commit`);
          return result;
        } catch (err2) {
          await this.run(sql`rollback`);
          throw err2;
        }
      }
    };
    D1Transaction = class _D1Transaction extends SQLiteTransaction {
      static {
        __name(this, "_D1Transaction");
      }
      static {
        __name2(this, "D1Transaction");
      }
      static [entityKind] = "D1Transaction";
      async transaction(transaction) {
        const savepointName = `sp${this.nestedIndex}`;
        const tx = new _D1Transaction("async", this.dialect, this.session, this.schema, this.nestedIndex + 1);
        await this.session.run(sql.raw(`savepoint ${savepointName}`));
        try {
          const result = await transaction(tx);
          await this.session.run(sql.raw(`release savepoint ${savepointName}`));
          return result;
        } catch (err2) {
          await this.session.run(sql.raw(`rollback to savepoint ${savepointName}`));
          throw err2;
        }
      }
    };
    __name2(d1ToRawMapping, "d1ToRawMapping");
    D1PreparedQuery = class extends SQLitePreparedQuery {
      static {
        __name(this, "D1PreparedQuery");
      }
      static {
        __name2(this, "D1PreparedQuery");
      }
      constructor(stmt, query, logger, fields, executeMethod, _isResponseInArrayMode, customResultMapper) {
        super("async", executeMethod, query);
        this.logger = logger;
        this._isResponseInArrayMode = _isResponseInArrayMode;
        this.customResultMapper = customResultMapper;
        this.fields = fields;
        this.stmt = stmt;
      }
      static [entityKind] = "D1PreparedQuery";
      /** @internal */
      customResultMapper;
      /** @internal */
      fields;
      /** @internal */
      stmt;
      run(placeholderValues) {
        const params = fillPlaceholders(this.query.params, placeholderValues ?? {});
        this.logger.logQuery(this.query.sql, params);
        return this.stmt.bind(...params).run();
      }
      async all(placeholderValues) {
        const { fields, query, logger, stmt, customResultMapper } = this;
        if (!fields && !customResultMapper) {
          const params = fillPlaceholders(query.params, placeholderValues ?? {});
          logger.logQuery(query.sql, params);
          return stmt.bind(...params).all().then(({ results }) => this.mapAllResult(results));
        }
        const rows = await this.values(placeholderValues);
        return this.mapAllResult(rows);
      }
      mapAllResult(rows, isFromBatch) {
        if (isFromBatch) {
          rows = d1ToRawMapping(rows.results);
        }
        if (!this.fields && !this.customResultMapper) {
          return rows;
        }
        if (this.customResultMapper) {
          return this.customResultMapper(rows);
        }
        return rows.map((row) => mapResultRow(this.fields, row, this.joinsNotNullableMap));
      }
      async get(placeholderValues) {
        const { fields, joinsNotNullableMap, query, logger, stmt, customResultMapper } = this;
        if (!fields && !customResultMapper) {
          const params = fillPlaceholders(query.params, placeholderValues ?? {});
          logger.logQuery(query.sql, params);
          return stmt.bind(...params).all().then(({ results }) => results[0]);
        }
        const rows = await this.values(placeholderValues);
        if (!rows[0]) {
          return void 0;
        }
        if (customResultMapper) {
          return customResultMapper(rows);
        }
        return mapResultRow(fields, rows[0], joinsNotNullableMap);
      }
      mapGetResult(result, isFromBatch) {
        if (isFromBatch) {
          result = d1ToRawMapping(result.results)[0];
        }
        if (!this.fields && !this.customResultMapper) {
          return result;
        }
        if (this.customResultMapper) {
          return this.customResultMapper([result]);
        }
        return mapResultRow(this.fields, result, this.joinsNotNullableMap);
      }
      values(placeholderValues) {
        const params = fillPlaceholders(this.query.params, placeholderValues ?? {});
        this.logger.logQuery(this.query.sql, params);
        return this.stmt.bind(...params).raw();
      }
      /** @internal */
      isResponseInArrayMode() {
        return this._isResponseInArrayMode;
      }
    };
  }
});
function drizzle(client, config = {}) {
  const dialect = new SQLiteAsyncDialect({ casing: config.casing });
  let logger;
  if (config.logger === true) {
    logger = new DefaultLogger();
  } else if (config.logger !== false) {
    logger = config.logger;
  }
  let schema;
  if (config.schema) {
    const tablesConfig = extractTablesRelationalConfig(
      config.schema,
      createTableRelationsHelpers
    );
    schema = {
      fullSchema: config.schema,
      schema: tablesConfig.tables,
      tableNamesMap: tablesConfig.tableNamesMap
    };
  }
  const session = new SQLiteD1Session(client, dialect, schema, { logger });
  const db = new DrizzleD1Database("async", dialect, session, schema);
  db.$client = client;
  return db;
}
__name(drizzle, "drizzle");
var DrizzleD1Database;
var init_driver = __esm({
  "../node_modules/drizzle-orm/d1/driver.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_entity();
    init_logger();
    init_relations();
    init_db2();
    init_dialect();
    init_session2();
    DrizzleD1Database = class extends BaseSQLiteDatabase {
      static {
        __name(this, "DrizzleD1Database");
      }
      static {
        __name2(this, "DrizzleD1Database");
      }
      static [entityKind] = "D1Database";
      async batch(batch) {
        return this.session.batch(batch);
      }
    };
    __name2(drizzle, "drizzle");
  }
});
var init_d1 = __esm({
  "../node_modules/drizzle-orm/d1/index.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_driver();
    init_session2();
  }
});
var onRequestGet48;
var onRequestOptions44;
var init_user_orders = __esm({
  "api/orders/user-orders.ts"() {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    init_storage();
    init_d1();
    init_schema();
    onRequestGet48 = /* @__PURE__ */ __name2(async ({ request, env }) => {
      try {
        const url = new URL(request.url);
        const customerEmail = url.searchParams.get("email");
        const userId = url.searchParams.get("userId");
        if (!customerEmail && !userId) {
          return new Response(JSON.stringify({
            success: false,
            error: "Email or userId parameter is required"
          }), {
            status: 400,
            headers: {
              "Content-Type": "application/json",
              "Access-Control-Allow-Origin": "*"
            }
          });
        }
        if (!env.DB) {
          return new Response(JSON.stringify({
            success: false,
            error: "Database not available"
          }), {
            status: 500,
            headers: {
              "Content-Type": "application/json",
              "Access-Control-Allow-Origin": "*"
            }
          });
        }
        const db = drizzle(env.DB, { schema: schema_exports });
        const storage2 = new DatabaseStorage(db);
        let orders2 = [];
        let customer = null;
        try {
          if (customerEmail) {
            customer = await storage2.getCustomerByEmail(customerEmail);
            if (customer) {
              orders2 = await storage2.getCustomerOrders(customer.id.toString());
            }
            const user = await storage2.getUserByEmail(customerEmail);
            if (user) {
              const userOrders = await storage2.getUserOrders(user.id);
              const allOrders = [...orders2, ...userOrders];
              const uniqueOrders = allOrders.filter(
                (order, index2, self2) => index2 === self2.findIndex((o3) => o3.id === order.id)
              );
              orders2 = uniqueOrders;
            }
          } else if (userId) {
            orders2 = await storage2.getUserOrders(parseInt(userId));
          }
          orders2.sort((a3, b2) => {
            const dateA = a3.completedAt || a3.createdAt || 0;
            const dateB = b2.completedAt || b2.createdAt || 0;
            return dateB - dateA;
          });
          console.log(`Found ${orders2.length} orders for ${customerEmail || userId}`);
          return new Response(JSON.stringify({
            success: true,
            orders: orders2,
            customer: customer ? {
              id: customer.id,
              email: customer.email,
              name: customer.name,
              subscriptionStatus: customer.subscriptionStatus,
              extensionActivated: customer.extensionActivated
            } : null
          }), {
            headers: {
              "Content-Type": "application/json",
              "Access-Control-Allow-Origin": "*"
            }
          });
        } catch (dbError) {
          console.error("Database error in user-orders:", dbError);
          return new Response(JSON.stringify({
            success: false,
            error: "Database query failed",
            details: String(dbError)
          }), {
            status: 500,
            headers: {
              "Content-Type": "application/json",
              "Access-Control-Allow-Origin": "*"
            }
          });
        }
      } catch (error) {
        console.error("Error fetching user orders:", error);
        return new Response(JSON.stringify({
          success: false,
          error: "Failed to fetch orders",
          details: String(error)
        }), {
          status: 500,
          headers: {
            "Content-Type": "application/json",
            "Access-Control-Allow-Origin": "*"
          }
        });
      }
    }, "onRequestGet");
    onRequestOptions44 = /* @__PURE__ */ __name2(async () => {
      return new Response(null, {
        status: 200,
        headers: {
          "Access-Control-Allow-Origin": "*",
          "Access-Control-Allow-Methods": "GET, OPTIONS",
          "Access-Control-Allow-Headers": "Content-Type",
          "Access-Control-Max-Age": "86400"
        }
      });
    }, "onRequestOptions");
  }
});
async function onRequestGet49(context) {
  const { env } = context;
  try {
    const selectQuery = `SELECT * FROM products WHERE id = 1 AND isActive = 1`;
    const result = await env.DB.prepare(selectQuery).first();
    if (!result) {
      return new Response(JSON.stringify({
        id: 1,
        name: "OCUS Job Hunter Extension",
        price: "250.00",
        beforePrice: null
      }), {
        status: 200,
        headers: {
          "Content-Type": "application/json",
          "Access-Control-Allow-Origin": "*",
          "Access-Control-Allow-Methods": "GET, POST, PUT, DELETE, OPTIONS",
          "Access-Control-Allow-Headers": "Content-Type, Authorization"
        }
      });
    }
    return new Response(JSON.stringify({
      id: result.id,
      name: result.name,
      price: result.price.toString(),
      beforePrice: result.beforePrice ? result.beforePrice.toString() : null
    }), {
      status: 200,
      headers: {
        "Content-Type": "application/json",
        "Access-Control-Allow-Origin": "*",
        "Access-Control-Allow-Methods": "GET, POST, PUT, DELETE, OPTIONS",
        "Access-Control-Allow-Headers": "Content-Type, Authorization"
      }
    });
  } catch (error) {
    console.error("Error fetching pricing:", error);
    return new Response(JSON.stringify({
      message: "Error fetching pricing: " + error.message
    }), {
      status: 500,
      headers: {
        "Content-Type": "application/json",
        "Access-Control-Allow-Origin": "*",
        "Access-Control-Allow-Methods": "GET, POST, PUT, DELETE, OPTIONS",
        "Access-Control-Allow-Headers": "Content-Type, Authorization"
      }
    });
  }
}
__name(onRequestGet49, "onRequestGet49");
async function onRequestOptions45(context) {
  return new Response(null, {
    status: 200,
    headers: {
      "Access-Control-Allow-Origin": "*",
      "Access-Control-Allow-Methods": "GET, POST, PUT, DELETE, OPTIONS",
      "Access-Control-Allow-Headers": "Content-Type, Authorization"
    }
  });
}
__name(onRequestOptions45, "onRequestOptions45");
var init_pricing2 = __esm({
  "api/products/pricing.ts"() {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    __name2(onRequestGet49, "onRequestGet");
    __name2(onRequestOptions45, "onRequestOptions");
  }
});
var onRequestGet50;
var onRequestOptions46;
var init_type = __esm({
  "api/download-extension/[type].ts"() {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    onRequestGet50 = /* @__PURE__ */ __name2(async (context) => {
      try {
        const { params, request } = context;
        const downloadType = params.type;
        const url = new URL(request.url);
        const userId = url.searchParams.get("userId") || "1";
        if (!["premium", "trial"].includes(downloadType)) {
          return new Response(JSON.stringify({ error: "Invalid download type" }), {
            status: 400,
            headers: { "Content-Type": "application/json" }
          });
        }
        if (downloadType === "premium") {
          const userQuery = `SELECT is_premium FROM users WHERE id = ?`;
          const userResult = await context.env.DB.prepare(userQuery).bind(userId).first();
          if (!userResult?.is_premium) {
            return new Response(JSON.stringify({ error: "Premium access required" }), {
              status: 403,
              headers: { "Content-Type": "application/json" }
            });
          }
        }
        const downloadLogQuery = `
      INSERT INTO user_downloads (user_id, download_type, version, ip_address, user_agent)
      VALUES (?, ?, ?, ?, ?)
    `;
        const clientIP = request.headers.get("CF-Connecting-IP") || request.headers.get("X-Forwarded-For") || "unknown";
        const userAgent = request.headers.get("User-Agent") || "unknown";
        await context.env.DB.prepare(downloadLogQuery).bind(userId, downloadType, "v2.1.9", clientIP, userAgent).run();
        const fileName = downloadType === "premium" ? "ocus-job-hunter-premium-v2.1.9-STABLE.zip" : "ocus-job-hunter-trial-v2.1.9-STABLE.zip";
        const mockFileContent = `Mock ${downloadType} extension file content for ${fileName}`;
        return new Response(mockFileContent, {
          status: 200,
          headers: {
            "Content-Type": "application/zip",
            "Content-Disposition": `attachment; filename="${fileName}"`,
            "Access-Control-Allow-Origin": "*"
          }
        });
      } catch (error) {
        console.error("Error handling extension download:", error);
        return new Response(JSON.stringify({ error: "Download failed" }), {
          status: 500,
          headers: {
            "Content-Type": "application/json",
            "Access-Control-Allow-Origin": "*"
          }
        });
      }
    }, "onRequestGet");
    onRequestOptions46 = /* @__PURE__ */ __name2(async () => {
      return new Response(null, {
        status: 200,
        headers: {
          "Access-Control-Allow-Origin": "*",
          "Access-Control-Allow-Methods": "GET, OPTIONS",
          "Access-Control-Allow-Headers": "Content-Type"
        }
      });
    }, "onRequestOptions");
  }
});
async function onRequestPost20(context) {
  const { request, env, params } = context;
  const orderId = params.orderId;
  const corsHeaders = {
    "Access-Control-Allow-Origin": "*",
    "Access-Control-Allow-Methods": "POST, OPTIONS",
    "Access-Control-Allow-Headers": "Content-Type, Authorization"
  };
  if (request.method === "OPTIONS") {
    return new Response(null, { headers: corsHeaders });
  }
  try {
    const orderQuery = `
      SELECT 
        id, customer_id, customer_email, customer_name, 
        product_id, final_amount, currency, payment_method,
        status, completed_at, created_at
      FROM orders 
      WHERE id = ? AND status = 'completed'
    `;
    const orderResult = await env.DB.prepare(orderQuery).bind(orderId).first();
    if (!orderResult) {
      return new Response(JSON.stringify({
        success: false,
        error: "Order not found or not completed"
      }), {
        status: 404,
        headers: { "Content-Type": "application/json", ...corsHeaders }
      });
    }
    const existingInvoiceQuery = `
      SELECT id FROM invoices WHERE order_id = ?
    `;
    const existingInvoice = await env.DB.prepare(existingInvoiceQuery).bind(orderId).first();
    if (existingInvoice) {
      return new Response(JSON.stringify({
        success: false,
        error: "Invoice already exists for this order"
      }), {
        status: 400,
        headers: { "Content-Type": "application/json", ...corsHeaders }
      });
    }
    const invoiceNumber = `INV-${Date.now()}-${orderId}`;
    const amount = parseFloat(orderResult.final_amount);
    const taxRate = 0;
    const taxAmount = amount * taxRate;
    const createInvoiceQuery = `
      INSERT INTO invoices (
        invoice_number, order_id, customer_id, amount, currency,
        tax_amount, status, invoice_date, paid_at, created_at
      ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
    `;
    const now = (/* @__PURE__ */ new Date()).toISOString();
    const invoiceResult = await env.DB.prepare(createInvoiceQuery).bind(
      invoiceNumber,
      orderId,
      orderResult.customer_id,
      orderResult.final_amount,
      orderResult.currency,
      taxAmount.toString(),
      "paid",
      // Since order is completed, invoice is paid
      orderResult.completed_at || now,
      orderResult.completed_at || now,
      now
    ).run();
    if (!invoiceResult.success) {
      throw new Error("Failed to create invoice");
    }
    return new Response(JSON.stringify({
      success: true,
      invoiceId: invoiceResult.meta.last_row_id,
      invoiceNumber,
      message: "Invoice created successfully"
    }), {
      status: 201,
      headers: { "Content-Type": "application/json", ...corsHeaders }
    });
  } catch (error) {
    console.error("Error creating invoice:", error);
    return new Response(JSON.stringify({
      success: false,
      error: "Failed to create invoice"
    }), {
      status: 500,
      headers: { "Content-Type": "application/json", ...corsHeaders }
    });
  }
}
__name(onRequestPost20, "onRequestPost20");
var init_orderId2 = __esm({
  "api/generate-invoice/[orderId].ts"() {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    __name2(onRequestPost20, "onRequestPost");
  }
});
function json14(data, status = 200) {
  return new Response(JSON.stringify(data), {
    status,
    headers: {
      "Content-Type": "application/json",
      "Access-Control-Allow-Origin": "*"
    }
  });
}
__name(json14, "json14");
var onRequestPatch2;
var onRequestPut15;
var onRequestDelete5;
var onRequestOptions47;
var init_id5 = __esm({
  "api/tickets/[id].ts"() {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    init_db();
    __name2(json14, "json");
    onRequestPatch2 = /* @__PURE__ */ __name2(async ({ request, params, env }) => {
      try {
        const ticketId = Number(params.id);
        const expressBase = env?.EXPRESS_API_BASE;
        if (expressBase) {
          const base = expressBase.replace(/\/$/, "");
          const url = `${base}/api/tickets/${ticketId}`;
          const headers = {};
          const cookie = request.headers.get("cookie");
          const ct2 = request.headers.get("content-type");
          const auth = request.headers.get("authorization");
          if (cookie) headers["cookie"] = cookie;
          if (ct2) headers["content-type"] = ct2;
          if (auth) headers["authorization"] = auth;
          const proxied = await fetch(url, { method: "PATCH", headers, body: request.body, redirect: "manual" });
          const respHeaders = new Headers(proxied.headers);
          const setCookie = respHeaders.get("set-cookie");
          if (setCookie) {
            const rewritten = setCookie.replace(/;\s*Domain=[^;]+/i, "");
            respHeaders.delete("set-cookie");
            respHeaders.append("set-cookie", rewritten);
          }
          return new Response(proxied.body, { status: proxied.status, headers: respHeaders });
        }
        const updates = await request.json();
        const storage2 = new TicketStorage(env.DB);
        const ticket = await storage2.getTicketById(ticketId);
        if (!ticket) return json14({ success: false, message: "Ticket not found" }, 404);
        if (updates.status) {
          await storage2.updateTicketStatus(ticketId, updates.status);
        }
        const updatedTicket = await storage2.getTicketById(ticketId);
        return json14({ success: true, ticket: updatedTicket });
      } catch (error) {
        console.error("Failed to update ticket:", error);
        const message = error instanceof Error ? error.message : "An unknown error occurred";
        return json14({ success: false, message }, 500);
      }
    }, "onRequestPatch");
    onRequestPut15 = /* @__PURE__ */ __name2(async (ctx) => {
      return onRequestPatch2(ctx);
    }, "onRequestPut");
    onRequestDelete5 = /* @__PURE__ */ __name2(async ({ request, params, env }) => {
      try {
        const ticketId = Number(params.id);
        const expressBase = env?.EXPRESS_API_BASE;
        if (expressBase) {
          const base = expressBase.replace(/\/$/, "");
          const url = `${base}/api/tickets/${ticketId}`;
          const headers = {};
          const cookie = request.headers.get("cookie");
          const auth = request.headers.get("authorization");
          if (cookie) headers["cookie"] = cookie;
          if (auth) headers["authorization"] = auth;
          const proxied = await fetch(url, { method: "DELETE", headers, redirect: "manual" });
          const respHeaders = new Headers(proxied.headers);
          const setCookie = respHeaders.get("set-cookie");
          if (setCookie) {
            const rewritten = setCookie.replace(/;\s*Domain=[^;]+/i, "");
            respHeaders.delete("set-cookie");
            respHeaders.append("set-cookie", rewritten);
          }
          return new Response(proxied.body, { status: proxied.status, headers: respHeaders });
        }
        const storage2 = new TicketStorage(env.DB);
        const ticket = await storage2.getTicketById(ticketId);
        if (!ticket) {
          return json14({ success: false, message: "Ticket not found" }, 404);
        }
        await storage2.deleteTicket(ticketId);
        return json14({ success: true, message: `Ticket ${ticketId} deleted` });
      } catch (error) {
        console.error("Failed to delete ticket:", error);
        const message = error instanceof Error ? error.message : "An unknown error occurred";
        return json14({ success: false, message }, 500);
      }
    }, "onRequestDelete");
    onRequestOptions47 = /* @__PURE__ */ __name2(async () => {
      return new Response(null, {
        headers: {
          "Access-Control-Allow-Origin": "*",
          "Access-Control-Allow-Methods": "PUT, PATCH, DELETE, OPTIONS",
          "Access-Control-Allow-Headers": "Content-Type"
        }
      });
    }, "onRequestOptions");
  }
});
var defaultSettings;
var onRequestGet51;
var onRequestOptions48;
var init_auth_settings2 = __esm({
  "api/auth-settings.ts"() {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    defaultSettings = {
      googleEnabled: false,
      facebookEnabled: false,
      githubEnabled: false,
      recaptchaEnabled: false,
      recaptchaCustomerEnabled: false,
      recaptchaAdminEnabled: false,
      recaptchaSiteKey: "",
      googleClientId: "",
      facebookAppId: "",
      githubClientId: ""
    };
    onRequestGet51 = /* @__PURE__ */ __name2(async ({ env }) => {
      try {
        const dbQuery = "SELECT * FROM auth_settings WHERE id = 1";
        const dbSettings = await env.DB.prepare(dbQuery).first();
        const apiSettings = {
          ...defaultSettings,
          ...dbSettings && {
            googleEnabled: !!dbSettings.google_enabled,
            facebookEnabled: !!dbSettings.facebook_enabled,
            githubEnabled: !!dbSettings.github_enabled,
            recaptchaEnabled: !!dbSettings.recaptcha_enabled,
            recaptchaCustomerEnabled: !!dbSettings.recaptcha_customer_enabled,
            recaptchaAdminEnabled: !!dbSettings.recaptcha_admin_enabled,
            recaptchaSiteKey: dbSettings.recaptcha_site_key || "",
            googleClientId: dbSettings.google_client_id || "",
            facebookAppId: dbSettings.facebook_app_id || "",
            githubClientId: dbSettings.github_client_id || ""
          }
        };
        return new Response(JSON.stringify(apiSettings), {
          headers: {
            "Content-Type": "application/json",
            "Access-Control-Allow-Origin": "*"
          }
        });
      } catch (error) {
        console.error("Failed to fetch auth settings:", error);
        return new Response(JSON.stringify(defaultSettings), {
          status: 500,
          headers: {
            "Content-Type": "application/json",
            "Access-Control-Allow-Origin": "*"
          }
        });
      }
    }, "onRequestGet");
    onRequestOptions48 = /* @__PURE__ */ __name2(async () => {
      return new Response(null, {
        headers: {
          "Access-Control-Allow-Origin": "*",
          "Access-Control-Allow-Methods": "GET, OPTIONS",
          "Access-Control-Allow-Headers": "Content-Type"
        }
      });
    }, "onRequestOptions");
  }
});
var onRequestPost21;
var onRequestOptions49;
var init_chat = __esm({
  "api/chat.ts"() {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    init_settings_storage();
    onRequestPost21 = /* @__PURE__ */ __name2(async ({ request, env }) => {
      try {
        const { message, history } = await request.json();
        let openaiApiKey = null;
        if (env.DB) {
          try {
            const settingsStorage = new SettingsStorage(env.DB);
            await settingsStorage.initializeSettings();
            openaiApiKey = await settingsStorage.getOpenAIApiKey();
          } catch (error) {
            console.error("Failed to get API key from settings:", error);
          }
        }
        if (!openaiApiKey) {
          openaiApiKey = env.OPENAI_API_KEY;
        }
        if (!openaiApiKey) {
          return new Response(JSON.stringify({
            success: false,
            response: "I'm currently not configured to respond. Please contact our support team for assistance."
          }), {
            status: 200,
            headers: {
              "Content-Type": "application/json",
              "Access-Control-Allow-Origin": "*"
            }
          });
        }
        const conversationHistory = history?.map((msg) => ({
          role: msg.sender === "user" ? "user" : "assistant",
          content: msg.text
        })) || [];
        const systemPrompt = {
          role: "system",
          content: `You are a helpful AI assistant for the OCUS Job Hunter Chrome Extension. You help users with:
      
      - Understanding how to use the job hunting extension
      - Troubleshooting extension issues
      - Explaining features and benefits
      - Providing job search tips and strategies
      - Answering questions about pricing and subscriptions
      
      Keep responses helpful, concise, and focused on job hunting and the extension. If asked about unrelated topics, politely redirect to job hunting assistance.`
        };
        const openaiResponse = await fetch("https://api.openai.com/v1/chat/completions", {
          method: "POST",
          headers: {
            "Authorization": `Bearer ${openaiApiKey}`,
            "Content-Type": "application/json"
          },
          body: JSON.stringify({
            model: "gpt-4o-mini",
            messages: [
              systemPrompt,
              ...conversationHistory,
              { role: "user", content: message }
            ],
            max_tokens: 500,
            temperature: 0.7
          })
        });
        if (!openaiResponse.ok) {
          throw new Error(`OpenAI API error: ${openaiResponse.status}`);
        }
        const openaiData = await openaiResponse.json();
        const assistantResponse = openaiData.choices[0]?.message?.content || "I'm having trouble processing your request. Please try again or contact our support team.";
        return new Response(JSON.stringify({
          success: true,
          response: assistantResponse
        }), {
          headers: {
            "Content-Type": "application/json",
            "Access-Control-Allow-Origin": "*"
          }
        });
      } catch (error) {
        console.error("Chat API error:", error);
        return new Response(JSON.stringify({
          success: false,
          response: "I'm experiencing technical difficulties. Please contact our support team for immediate assistance."
        }), {
          status: 200,
          headers: {
            "Content-Type": "application/json",
            "Access-Control-Allow-Origin": "*"
          }
        });
      }
    }, "onRequestPost");
    onRequestOptions49 = /* @__PURE__ */ __name2(async () => {
      return new Response(null, {
        status: 200,
        headers: {
          "Access-Control-Allow-Origin": "*",
          "Access-Control-Allow-Methods": "POST, OPTIONS",
          "Access-Control-Allow-Headers": "Content-Type, Authorization"
        }
      });
    }, "onRequestOptions");
  }
});
function json15(data, status = 200) {
  return new Response(JSON.stringify(data), {
    status,
    headers: {
      "Content-Type": "application/json",
      "Access-Control-Allow-Origin": "*"
    }
  });
}
__name(json15, "json15");
var onRequestPost22;
var onRequestOptions50;
var init_complete_stripe_payment = __esm({
  "api/complete-stripe-payment.ts"() {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    init_storage();
    init_d1();
    init_schema();
    __name2(json15, "json");
    onRequestPost22 = /* @__PURE__ */ __name2(async ({ request, env }) => {
      try {
        const body = await request.json();
        const { paymentIntentId, customerEmail, customerName } = body;
        if (!paymentIntentId || !customerEmail) {
          return json15({ success: false, message: "Missing required fields" }, 400);
        }
        console.log("Stripe payment completion request:", { paymentIntentId, customerEmail, customerName });
        if (!env.DB) {
          console.error("D1 database not available");
          return json15({ success: false, message: "Database not available" }, 500);
        }
        const db = drizzle(env.DB, { schema: schema_exports });
        const storage2 = new DatabaseStorage(db);
        const now = (/* @__PURE__ */ new Date()).getTime();
        const amount = 29.99;
        const currency = "USD";
        try {
          let customer = await storage2.getCustomerByEmail(customerEmail);
          if (!customer) {
            console.log(`Creating new customer: ${customerEmail}`);
            customer = await storage2.createCustomer({
              email: customerEmail,
              name: customerName || customerEmail,
              extensionActivated: true,
              subscriptionStatus: "active",
              totalSpent: amount.toString(),
              totalOrders: 1,
              lastOrderDate: now
            });
          } else {
            console.log(`Updating existing customer: ${customerEmail}`);
            await storage2.updateCustomer(customer.id, {
              extensionActivated: true,
              subscriptionStatus: "active",
              totalSpent: (parseFloat(customer.totalSpent) + amount).toString(),
              totalOrders: customer.totalOrders + 1,
              lastOrderDate: now,
              updatedAt: now
            });
          }
          const user = await storage2.getUserByEmail(customerEmail);
          if (user) {
            console.log(`Updating user premium status: ${customerEmail}`);
            await storage2.updateUser(user.id, {
              isPremium: true,
              extensionActivated: true,
              premiumActivatedAt: now.toString(),
              totalSpent: (parseFloat(user.totalSpent) + amount).toString(),
              totalOrders: user.totalOrders + 1
            });
          }
          const downloadToken = `download_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;
          const activationCode = `activation_${Date.now()}_${Math.random().toString(36).substr(2, 12)}`;
          console.log("Creating order record...");
          const order = await storage2.createOrder({
            userId: user?.id,
            customerEmail,
            customerName: customerName || customerEmail,
            originalAmount: amount.toString(),
            finalAmount: amount.toString(),
            currency: currency.toLowerCase(),
            status: "completed",
            paymentMethod: "stripe",
            paymentIntentId,
            downloadToken,
            activationCode,
            completedAt: now
          });
          console.log(`Order created with ID: ${order.id}`);
          const invoiceNumber = `INV-${order.id}-${Date.now()}`;
          console.log(`Creating invoice: ${invoiceNumber}`);
          const invoice = await storage2.createInvoice({
            orderId: order.id,
            invoiceNumber,
            customerId: customer.id,
            customerName: customerName || customerEmail,
            customerEmail,
            invoiceDate: now,
            dueDate: now,
            // Immediate payment
            subtotal: amount.toString(),
            taxAmount: "0.00",
            discountAmount: "0.00",
            totalAmount: amount.toString(),
            currency: currency.toUpperCase(),
            status: "paid",
            paidAt: now
          });
          await storage2.createInvoiceItem({
            invoiceId: invoice.id,
            productName: "OCUS Job Hunter Extension",
            description: "Premium Chrome Extension for OCUS Job Hunting",
            quantity: 1,
            unitPrice: amount.toString(),
            totalPrice: amount.toString()
          });
          const activationKey = await storage2.createActivationKey({
            activationKey: activationCode,
            orderId: order.id,
            userId: user?.id
          });
          console.log(`\u2705 Payment completed successfully for ${customerEmail}:`);
          console.log(`   - Customer ID: ${customer.id}`);
          console.log(`   - Order ID: ${order.id}`);
          console.log(`   - Invoice: ${invoiceNumber}`);
          console.log(`   - Activation Code: ${activationCode}`);
          console.log(`   - Amount: ${amount} ${currency}`);
          return json15({
            success: true,
            message: "Payment completed successfully - Premium access activated",
            data: {
              orderId: order.id,
              invoiceNumber,
              activationCode,
              downloadToken
            }
          });
        } catch (error) {
          console.error("Error in complete-stripe-payment (primary path):", error);
          try {
            if (!env.DB) {
              return json15({ success: false, message: "Database not available" }, 500);
            }
            const session = env.DB.withSession("first-primary");
            const amountNum = amount;
            const updateRes = await session.prepare(`
            UPDATE customers
            SET 
              extension_activated = 1,
              subscription_status = 'active',
              total_spent = CAST(COALESCE(total_spent, '0') AS REAL) + ?,
              total_orders = COALESCE(total_orders, 0) + 1,
              last_order_date = ?
            WHERE email = ?
          `).bind(amountNum, now, customerEmail).run();
            const changes = updateRes?.meta?.changes ?? 0;
            if (!changes) {
              await session.prepare(`
              INSERT INTO customers (
                email, name, extension_activated, subscription_status, total_spent, total_orders, last_order_date, created_at
              ) VALUES (?, ?, 1, 'active', ?, 1, ?, ?)
            `).bind(
                customerEmail,
                customerName || customerEmail,
                amountNum,
                now,
                now
              ).run();
            }
            await session.prepare(`
            UPDATE users
            SET 
              is_premium = 1,
              extension_activated = 1,
              premium_activated_at = ?,
              total_spent = CAST(COALESCE(total_spent, '0') AS REAL) + ?,
              total_orders = COALESCE(total_orders, 0) + 1
            WHERE email = ?
          `).bind(now.toString(), amountNum, customerEmail).run();
            const downloadToken = `download_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;
            const activationCode = `activation_${Date.now()}_${Math.random().toString(36).substr(2, 12)}`;
            await session.prepare(`
            INSERT INTO orders (
              customer_email, customer_name,
              original_amount, final_amount, currency,
              status, payment_method, payment_intent_id,
              download_token, activation_code,
              created_at, completed_at
            ) VALUES (?, ?, ?, ?, ?, 'completed', 'stripe', ?, ?, ?, ?, ?)
          `).bind(
              customerEmail,
              customerName || customerEmail,
              amountNum.toString(),
              amountNum.toString(),
              currency.toLowerCase(),
              paymentIntentId,
              downloadToken,
              activationCode,
              now,
              now
            ).run();
            return json15({
              success: true,
              message: "Payment completed successfully (fallback) - Premium access activated",
              data: {
                activationCode,
                downloadToken
              }
            });
          } catch (fallbackError) {
            console.error("Fallback path failed in complete-stripe-payment:", fallbackError);
            try {
              if (!env.DB) {
                return json15({ success: false, message: "Database not available" }, 500);
              }
              const session2 = env.DB.withSession("first-primary");
              const settingsKey = `user_${customerEmail.replace("@", "_at_").replace(".", "_dot_")}`;
              const valueObj = {
                id: customerEmail,
                email: customerEmail,
                name: customerName || customerEmail,
                isPremium: true,
                extensionActivated: true,
                updatedAt: now
              };
              await session2.prepare(`
              INSERT INTO settings ("key", value) VALUES (?, ?)
              ON CONFLICT("key") DO UPDATE SET value = excluded.value
            `).bind(settingsKey, JSON.stringify(valueObj)).run();
              try {
                await session2.prepare(`
                UPDATE users
                SET 
                  is_premium = 1,
                  extension_activated = 1,
                  premium_activated_at = ?,
                  total_spent = CAST(COALESCE(total_spent, '0') AS REAL) + ?,
                  total_orders = COALESCE(total_orders, 0) + 1
                WHERE email = ?
              `).bind(now.toString(), amount, customerEmail).run();
              } catch (ignoreUserUpdate) {
                console.warn("Users table update skipped in settings fallback:", ignoreUserUpdate);
              }
              try {
                const downloadToken = `download_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;
                const activationCode = `activation_${Date.now()}_${Math.random().toString(36).substr(2, 12)}`;
                await session2.prepare(`
                INSERT INTO orders (
                  customer_email, customer_name,
                  original_amount, final_amount, currency,
                  status, payment_method, payment_intent_id,
                  download_token, activation_code,
                  created_at, completed_at
                ) VALUES (?, ?, ?, ?, ?, 'completed', 'stripe', ?, ?, ?, ?, ?)
              `).bind(
                  customerEmail,
                  customerName || customerEmail,
                  amount.toString(),
                  amount.toString(),
                  currency.toLowerCase(),
                  paymentIntentId,
                  downloadToken,
                  activationCode,
                  now,
                  now
                ).run();
                const orderRow = await session2.prepare(`SELECT id FROM orders WHERE payment_intent_id = ?`).bind(paymentIntentId).first();
                const orderIdForInvoice = orderRow?.id ?? null;
                const invoiceNumber = `INV-${orderIdForInvoice ?? "NA"}-${now}`;
                await session2.prepare(`
                INSERT INTO invoices (
                  invoice_number, order_id, customer_name, customer_email,
                  invoice_date, due_date,
                  subtotal, tax_amount, discount_amount, total_amount,
                  currency, status, paid_at
                ) VALUES (?, ?, ?, ?, ?, ?, ?, '0.00', '0.00', ?, ?, 'paid', ?)
              `).bind(
                  invoiceNumber,
                  orderIdForInvoice,
                  customerName || customerEmail,
                  customerEmail,
                  now,
                  now,
                  amount.toString(),
                  amount.toString(),
                  currency.toUpperCase(),
                  now
                ).run();
                const invoiceRow = await session2.prepare(`SELECT id FROM invoices WHERE invoice_number = ?`).bind(invoiceNumber).first();
                if (invoiceRow?.id) {
                  await session2.prepare(`
                  INSERT INTO invoice_items (
                    invoice_id, product_name, description, quantity, unit_price, total_price
                  ) VALUES (?, ?, ?, 1, ?, ?)
                `).bind(
                    invoiceRow.id,
                    "OCUS Job Hunter Extension",
                    "Premium Chrome Extension for OCUS Job Hunting",
                    amount.toString(),
                    amount.toString()
                  ).run();
                }
              } catch (orderInvoiceErr) {
                console.warn("Order/invoice insert skipped in settings fallback:", orderInvoiceErr);
              }
              return json15({
                success: true,
                message: "Payment completed (settings fallback) - Premium access activated",
                data: {
                  via: "settings"
                }
              });
            } catch (settingsError) {
              console.error("Settings fallback failed in complete-stripe-payment:", settingsError);
              return json15({
                success: false,
                message: `Payment completion failed: primary=${error?.message}; fallback=${fallbackError?.message}; settings=${settingsError?.message}`
              }, 500);
            }
          }
        }
      } catch (error) {
        console.error("Error parsing request in complete-stripe-payment:", error);
        return json15({
          success: false,
          message: "Invalid request format"
        }, 400);
      }
    }, "onRequestPost");
    onRequestOptions50 = /* @__PURE__ */ __name2(async () => {
      return new Response(null, {
        status: 200,
        headers: {
          "Access-Control-Allow-Origin": "*",
          "Access-Control-Allow-Methods": "POST, OPTIONS",
          "Access-Control-Allow-Headers": "Content-Type, Authorization",
          "Access-Control-Max-Age": "86400"
        }
      });
    }, "onRequestOptions");
  }
});
var onRequestPost23;
var onRequestOptions51;
var init_create_payment_intent = __esm({
  "api/create-payment-intent.ts"() {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    onRequestPost23 = /* @__PURE__ */ __name2(async ({ request, env }) => {
      try {
        const body = await request.json();
        const {
          amount,
          currency = "usd",
          customerEmail,
          customerName,
          productId,
          couponCode,
          originalAmount,
          discountAmount,
          referralCode
        } = body;
        console.log("create-payment-intent request:", {
          amount,
          currency,
          hasEmail: !!customerEmail,
          productId,
          hasCoupon: !!couponCode,
          hasReferral: !!referralCode
        });
        const numericAmount = typeof amount === "string" ? parseFloat(amount) : Number(amount);
        if (!numericAmount || isNaN(numericAmount) || numericAmount <= 0) {
          console.error("Invalid amount received:", { amount, numericAmount, type: typeof amount });
          return new Response(
            JSON.stringify({ success: false, error: `Invalid amount: ${amount}. Must be a positive number.` }),
            {
              status: 400,
              headers: {
                "Content-Type": "application/json",
                "Access-Control-Allow-Origin": "*"
              }
            }
          );
        }
        const paymentSettings = await env.DB.prepare(
          `SELECT key, value FROM settings WHERE key LIKE 'payment_%'`
        ).all();
        const settings3 = {};
        paymentSettings.results?.forEach((row) => {
          const key = row.key.replace("payment_", "");
          let value = row.value;
          if (value === "true") value = true;
          if (value === "false") value = false;
          settings3[key] = value;
        });
        if (!settings3.stripeEnabled || !settings3.stripeSecretKey) {
          console.error("Stripe configuration missing:", {
            stripeEnabled: settings3.stripeEnabled,
            hasSecretKey: !!settings3.stripeSecretKey,
            hasPublicKey: !!settings3.stripePublicKey
          });
          return new Response(
            JSON.stringify({
              success: false,
              error: "Payment processing not configured. Please contact support.",
              details: "Stripe payment gateway is not properly configured"
            }),
            {
              status: 503,
              headers: {
                "Content-Type": "application/json",
                "Access-Control-Allow-Origin": "*"
              }
            }
          );
        }
        if (typeof settings3.stripeSecretKey !== "string" || !settings3.stripeSecretKey.startsWith("sk_")) {
          console.error("Invalid Stripe secret key format");
          return new Response(
            JSON.stringify({ success: false, error: "Invalid payment configuration" }),
            {
              status: 503,
              headers: {
                "Content-Type": "application/json",
                "Access-Control-Allow-Origin": "*"
              }
            }
          );
        }
        const metadata = {};
        if (productId) metadata["productId"] = String(productId);
        if (customerName) metadata["customerName"] = String(customerName);
        if (couponCode) metadata["couponCode"] = String(couponCode);
        if (typeof originalAmount !== "undefined") metadata["originalAmount"] = String(originalAmount);
        if (typeof discountAmount !== "undefined") metadata["discountAmount"] = String(discountAmount);
        if (referralCode) metadata["referralCode"] = String(referralCode);
        const form = new URLSearchParams({
          amount: Math.round(numericAmount * 100).toString(),
          // cents
          currency: currency.toLowerCase(),
          "automatic_payment_methods[enabled]": "true"
        });
        if (customerEmail) form.set("receipt_email", customerEmail);
        for (const [k2, v3] of Object.entries(metadata)) {
          form.set(`metadata[${k2}]`, v3);
        }
        const stripeResponse = await fetch("https://api.stripe.com/v1/payment_intents", {
          method: "POST",
          headers: {
            Authorization: `Bearer ${settings3.stripeSecretKey}`,
            "Content-Type": "application/x-www-form-urlencoded"
          },
          body: form
        });
        if (!stripeResponse.ok) {
          const errorText = await stripeResponse.text();
          let stripeError;
          try {
            stripeError = JSON.parse(errorText);
          } catch {
            stripeError = { message: errorText };
          }
          console.error("Stripe API error creating payment intent:", {
            status: stripeResponse.status,
            statusText: stripeResponse.statusText,
            stripeError
          });
          return new Response(
            JSON.stringify({
              success: false,
              error: "Failed to create payment intent",
              details: stripeError?.error?.message || stripeError?.message || "Unknown Stripe error",
              stripeErrorType: stripeError?.error?.type,
              stripeErrorCode: stripeError?.error?.code
            }),
            {
              status: 500,
              headers: {
                "Content-Type": "application/json",
                "Access-Control-Allow-Origin": "*"
              }
            }
          );
        }
        const paymentIntent = await stripeResponse.json();
        try {
          await env.DB.prepare(
            `INSERT INTO settings (key, value) VALUES (?, ?)`
          ).bind(
            `payment_intent_${paymentIntent.id}`,
            JSON.stringify({
              id: paymentIntent.id,
              amount: numericAmount,
              currency,
              customerEmail,
              customerName,
              productId,
              couponCode,
              originalAmount,
              discountAmount,
              referralCode,
              status: "created",
              createdAt: (/* @__PURE__ */ new Date()).toISOString()
            })
          ).run();
        } catch (dbError) {
          console.warn("Failed to store payment intent in DB (non-fatal):", dbError);
        }
        return new Response(
          JSON.stringify({
            success: true,
            clientSecret: paymentIntent.client_secret,
            paymentIntentId: paymentIntent.id,
            publishableKey: settings3.stripePublicKey
          }),
          {
            headers: {
              "Content-Type": "application/json",
              "Access-Control-Allow-Origin": "*"
            }
          }
        );
      } catch (error) {
        console.error("create-payment-intent error:", error);
        return new Response(
          JSON.stringify({ success: false, error: "Internal server error" }),
          {
            status: 500,
            headers: {
              "Content-Type": "application/json",
              "Access-Control-Allow-Origin": "*"
            }
          }
        );
      }
    }, "onRequestPost");
    onRequestOptions51 = /* @__PURE__ */ __name2(async () => {
      return new Response(null, {
        headers: {
          "Access-Control-Allow-Origin": "*",
          "Access-Control-Allow-Methods": "POST, OPTIONS",
          "Access-Control-Allow-Headers": "Content-Type"
        }
      });
    }, "onRequestOptions");
  }
});
var onRequestPost24;
var onRequestOptions52;
var init_create_user_payment_intent = __esm({
  "api/create-user-payment-intent.ts"() {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    onRequestPost24 = /* @__PURE__ */ __name2(async ({ request, env }) => {
      try {
        const body = await request.json();
        const { amount, currency = "usd", customerEmail, customerName, productId } = body;
        console.log("Payment intent request:", { amount, currency, customerEmail, productId });
        const numericAmount = typeof amount === "string" ? parseFloat(amount) : Number(amount);
        if (!numericAmount || isNaN(numericAmount) || numericAmount <= 0) {
          console.error("Invalid amount received:", { amount, numericAmount, type: typeof amount });
          return new Response(JSON.stringify({
            success: false,
            error: `Invalid amount: ${amount}. Must be a positive number.`
          }), {
            status: 400,
            headers: {
              "Content-Type": "application/json",
              "Access-Control-Allow-Origin": "*"
            }
          });
        }
        const paymentSettings = await env.DB.prepare(`
      SELECT key, value FROM settings 
      WHERE key LIKE 'payment_%'
    `).all();
        const settings3 = {};
        paymentSettings.results?.forEach((row) => {
          const key = row.key.replace("payment_", "");
          let value = row.value;
          if (value === "true") value = true;
          if (value === "false") value = false;
          settings3[key] = value;
        });
        if (!settings3.stripeEnabled || !settings3.stripeSecretKey) {
          console.error("Stripe configuration missing:", {
            stripeEnabled: settings3.stripeEnabled,
            hasSecretKey: !!settings3.stripeSecretKey,
            hasPublicKey: !!settings3.stripePublicKey
          });
          return new Response(JSON.stringify({
            success: false,
            error: "Payment processing not configured. Please contact support.",
            details: "Stripe payment gateway is not properly configured"
          }), {
            status: 503,
            headers: {
              "Content-Type": "application/json",
              "Access-Control-Allow-Origin": "*"
            }
          });
        }
        if (!settings3.stripeSecretKey.startsWith("sk_")) {
          console.error("Invalid Stripe secret key format");
          return new Response(JSON.stringify({
            success: false,
            error: "Invalid payment configuration"
          }), {
            status: 503,
            headers: {
              "Content-Type": "application/json",
              "Access-Control-Allow-Origin": "*"
            }
          });
        }
        const stripeResponse = await fetch("https://api.stripe.com/v1/payment_intents", {
          method: "POST",
          headers: {
            "Authorization": `Bearer ${settings3.stripeSecretKey}`,
            "Content-Type": "application/x-www-form-urlencoded"
          },
          body: new URLSearchParams({
            amount: Math.round(numericAmount * 100).toString(),
            // Convert to cents
            currency: currency.toLowerCase(),
            "automatic_payment_methods[enabled]": "true",
            ...customerEmail && { receipt_email: customerEmail },
            ...productId && { "metadata[productId]": productId, "metadata[customerName]": customerName || "" }
          })
        });
        if (!stripeResponse.ok) {
          const errorData = await stripeResponse.text();
          console.error("Stripe API error:", {
            status: stripeResponse.status,
            statusText: stripeResponse.statusText,
            errorData,
            requestData: {
              amount: Math.round(numericAmount * 100),
              currency: currency.toLowerCase(),
              hasSecretKey: !!settings3.stripeSecretKey,
              secretKeyPrefix: settings3.stripeSecretKey?.substring(0, 12) + "..."
            }
          });
          let stripeError;
          try {
            stripeError = JSON.parse(errorData);
          } catch {
            stripeError = { message: errorData };
          }
          return new Response(JSON.stringify({
            success: false,
            error: "Failed to create payment intent",
            details: stripeError.error?.message || stripeError.message || "Unknown Stripe error",
            stripeErrorType: stripeError.error?.type,
            stripeErrorCode: stripeError.error?.code
          }), {
            status: 500,
            headers: {
              "Content-Type": "application/json",
              "Access-Control-Allow-Origin": "*"
            }
          });
        }
        const paymentIntent = await stripeResponse.json();
        try {
          await env.DB.prepare(`
        INSERT INTO settings (key, value) 
        VALUES (?, ?)
      `).bind(
            `payment_intent_${paymentIntent.id}`,
            JSON.stringify({
              id: paymentIntent.id,
              amount: numericAmount,
              currency,
              customerEmail,
              customerName,
              productId,
              status: "created",
              createdAt: (/* @__PURE__ */ new Date()).toISOString()
            })
          ).run();
        } catch (dbError) {
          console.warn("Failed to store payment intent in database:", dbError);
        }
        return new Response(JSON.stringify({
          success: true,
          clientSecret: paymentIntent.client_secret,
          paymentIntentId: paymentIntent.id,
          publishableKey: settings3.stripePublicKey
        }), {
          headers: {
            "Content-Type": "application/json",
            "Access-Control-Allow-Origin": "*"
          }
        });
      } catch (error) {
        console.error("Payment intent creation error:", error);
        return new Response(JSON.stringify({
          success: false,
          error: "Internal server error"
        }), {
          status: 500,
          headers: {
            "Content-Type": "application/json",
            "Access-Control-Allow-Origin": "*"
          }
        });
      }
    }, "onRequestPost");
    onRequestOptions52 = /* @__PURE__ */ __name2(async () => {
      return new Response(null, {
        headers: {
          "Access-Control-Allow-Origin": "*",
          "Access-Control-Allow-Methods": "POST, OPTIONS",
          "Access-Control-Allow-Headers": "Content-Type"
        }
      });
    }, "onRequestOptions");
  }
});
function json16(data, status = 200) {
  return new Response(JSON.stringify(data), {
    status,
    headers: {
      "Content-Type": "application/json",
      "Access-Control-Allow-Origin": "*"
    }
  });
}
__name(json16, "json16");
var onRequestPost25;
var onRequestGet52;
var onRequestOptions53;
var init_download_premium = __esm({
  "api/download-premium.ts"() {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    __name2(json16, "json");
    onRequestPost25 = /* @__PURE__ */ __name2(async ({ request, env }) => {
      try {
        const body = await request.json();
        const { customerId, customerEmail, activationCode, email } = body;
        const finalEmail = customerEmail || email;
        if (!customerId && !finalEmail && !activationCode) {
          return json16({
            success: false,
            message: "Customer identification required"
          }, 400);
        }
        if (!env.DB) {
          console.error("D1 database not available");
          return json16({ success: false, message: "Database not available" }, 500);
        }
        try {
          let account = null;
          let accountType = null;
          if (customerId) {
            try {
              account = await env.DB.prepare(`
            SELECT id, email, name, is_premium, extension_activated, total_spent 
            FROM customers WHERE id = ?
          `).bind(customerId).first();
              if (account) accountType = "customer";
            } catch (e2) {
              console.log("Customer query failed, trying fallback");
            }
          } else if (finalEmail) {
            try {
              account = await env.DB.prepare(`
            SELECT id, email, name, is_premium, extension_activated, total_spent 
            FROM customers WHERE email = ?
          `).bind(finalEmail).first();
              if (account) accountType = "customer";
            } catch (e2) {
              console.log("Customer email query failed, trying fallback");
            }
          } else if (activationCode) {
            try {
              const codeResult = await env.DB.prepare(`
            SELECT c.id, c.email, c.name, c.is_premium, c.extension_activated, c.total_spent
            FROM customers c
            JOIN activation_codes ac ON c.id = ac.customer_id
            WHERE ac.code = ? AND ac.isActive = 1
          `).bind(activationCode).first();
              account = codeResult;
              if (account) accountType = "customer";
            } catch (e2) {
              console.log("Activation code query failed:", e2);
            }
          }
          if (!account && finalEmail) {
            try {
              const user = await env.DB.prepare(`
            SELECT id, email, name, is_premium, extension_activated
            FROM users WHERE email = ?
          `).bind(finalEmail).first();
              if (user) {
                account = { ...user, total_spent: 0 };
                accountType = "user";
              }
            } catch (e2) {
              console.log("User email query failed:", e2);
            }
          }
          if (!account) {
            return json16({
              success: false,
              message: "Account not found or invalid credentials"
            }, 404);
          }
          const hasBasicAccess = account.is_premium && account.extension_activated;
          if (!hasBasicAccess) {
            return json16({
              success: false,
              message: "Premium access not activated. Please complete your purchase first.",
              accountStatus: {
                isPremium: account.is_premium,
                extensionActivated: account.extension_activated,
                totalSpent: account.total_spent
              }
            }, 403);
          }
          let hasValidOrders = false;
          try {
            const orderCheck = await env.DB.prepare(`
          SELECT COUNT(*) as orderCount FROM orders 
          WHERE (customer_id = ? OR customer_email = ?) AND status = 'completed' AND final_amount > 0
        `).bind(account.id, account.email).first();
            hasValidOrders = orderCheck?.orderCount > 0;
            console.log(`Order check for ${accountType} '${account.email}':`, { hasValidOrders });
          } catch (e2) {
            console.log("Order check failed:", e2);
            hasValidOrders = account.is_premium && account.extension_activated;
            console.error("Database order check failed, falling back to premium flags. This should be investigated.", e2);
          }
          if (!hasValidOrders) {
            return json16({
              success: false,
              message: "No valid premium purchases found. Premium download requires completed payment.",
              accountStatus: {
                isPremium: account.is_premium,
                extensionActivated: account.extension_activated,
                totalSpent: account.total_spent,
                requiresPayment: true
              }
            }, 403);
          }
          const downloadToken = `download_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;
          const now = (/* @__PURE__ */ new Date()).toISOString();
          try {
            await env.DB.prepare(`
          INSERT INTO extension_downloads (
            customer_id, download_token, downloaded_at, ip_address, user_agent, created_at
          ) VALUES (?, ?, ?, ?, ?, ?)
        `).bind(
              account.id,
              // Use account.id, which exists for both users and customers
              downloadToken,
              now,
              request.headers.get("CF-Connecting-IP") || "unknown",
              request.headers.get("User-Agent") || "unknown",
              now
            ).run();
          } catch (e2) {
            console.log("Failed to log download, continuing anyway:", e2);
          }
          let activationCodeResult = `TEMP_${Date.now()}_${account.id}`;
          if (accountType === "customer") {
            try {
              const result = await env.DB.prepare(`SELECT code FROM activation_codes WHERE customer_id = ? AND isActive = 1 ORDER BY created_at DESC LIMIT 1`).bind(account.id).first();
              if (result) activationCodeResult = result.code;
            } catch (e2) {
              console.log("Failed to get activation code:", e2);
            }
          }
          return json16({
            success: true,
            message: "Download access granted",
            downloadEnabled: true,
            downloadToken,
            activationCode: activationCodeResult,
            account: {
              id: account.id,
              email: account.email,
              name: account.name
            }
          });
        } catch (dbError) {
          console.error("Database error during download validation:", dbError);
          return json16({
            success: false,
            message: "Failed to validate download access",
            error: dbError.message
          }, 500);
        }
      } catch (error) {
        console.error("Download validation error:", error);
        return json16({
          success: false,
          message: "Internal server error",
          error: error.message
        }, 500);
      }
    }, "onRequestPost");
    onRequestGet52 = /* @__PURE__ */ __name2(async ({ request, env }) => {
      const url = new URL(request.url);
      const customerId = url.searchParams.get("customerId");
      const customerEmail = url.searchParams.get("customerEmail");
      if (!customerId && !customerEmail) {
        return json16({ success: false, message: "Customer identification required" }, 400);
      }
      if (!env.DB) {
        return json16({ success: false, message: "Database not available" }, 500);
      }
      try {
        let customer = null;
        if (customerId) {
          customer = await env.DB.prepare(`
        SELECT id, email, name, is_premium, extension_activated, total_spent 
        FROM customers WHERE id = ?
      `).bind(parseInt(customerId)).first();
        } else if (customerEmail) {
          customer = await env.DB.prepare(`
        SELECT id, email, name, is_premium, extension_activated, total_spent 
        FROM customers WHERE email = ?
      `).bind(customerEmail).first();
        }
        if (!customer) {
          return json16({ success: false, downloadEnabled: false, message: "Customer not found" });
        }
        const hasAccess = customer.is_premium && customer.extension_activated;
        return json16({
          success: true,
          downloadEnabled: hasAccess,
          customer: {
            id: customer.id,
            email: customer.email,
            name: customer.name,
            totalSpent: customer.total_spent,
            isPremium: customer.is_premium,
            extensionActivated: customer.extension_activated
          }
        });
      } catch (error) {
        console.error("Download status check error:", error);
        return json16({ success: false, downloadEnabled: false, error: error.message }, 500);
      }
    }, "onRequestGet");
    onRequestOptions53 = /* @__PURE__ */ __name2(async () => {
      return new Response(null, {
        headers: {
          "Access-Control-Allow-Origin": "*",
          "Access-Control-Allow-Methods": "GET, POST, OPTIONS",
          "Access-Control-Allow-Headers": "Content-Type"
        }
      });
    }, "onRequestOptions");
  }
});
var onRequestGet53;
var onRequestOptions54;
var init_init_db = __esm({
  "api/init-db.ts"() {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    onRequestGet53 = /* @__PURE__ */ __name2(async ({ env }) => {
      try {
        if (!env.DB) {
          return new Response(JSON.stringify({
            success: false,
            message: "Database not available"
          }), {
            status: 500,
            headers: {
              "Content-Type": "application/json",
              "Access-Control-Allow-Origin": "*"
            }
          });
        }
        await env.DB.prepare(`
      CREATE TABLE IF NOT EXISTS users (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        email TEXT UNIQUE NOT NULL,
        password TEXT NOT NULL,
        name TEXT NOT NULL,
        role TEXT DEFAULT 'customer',
        created_at DATETIME DEFAULT CURRENT_TIMESTAMP
      )
    `).run();
        await env.DB.prepare(`
      CREATE TABLE IF NOT EXISTS customers (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        email TEXT UNIQUE NOT NULL,
        name TEXT NOT NULL,
        created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
        is_premium BOOLEAN DEFAULT 0,
        extension_activated BOOLEAN DEFAULT 0,
        total_spent DECIMAL(10,2) DEFAULT 0,
        total_orders INTEGER DEFAULT 0
      )
    `).run();
        await env.DB.prepare(`
      CREATE TABLE IF NOT EXISTS invoices (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        invoice_number TEXT UNIQUE NOT NULL,
        customer_id INTEGER NOT NULL,
        customer_name TEXT NOT NULL,
        customer_email TEXT NOT NULL,
        invoice_date TEXT NOT NULL,
        due_date TEXT NOT NULL,
        subtotal TEXT NOT NULL,
        total_amount TEXT NOT NULL,
        currency TEXT DEFAULT 'USD',
        status TEXT DEFAULT 'pending',
        paid_at DATETIME,
        notes TEXT,
        created_at DATETIME DEFAULT CURRENT_TIMESTAMP
      )
    `).run();
        await env.DB.prepare(`
      CREATE TABLE IF NOT EXISTS orders (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        customer_id INTEGER NOT NULL,
        product_name TEXT NOT NULL,
        amount DECIMAL(10,2) NOT NULL,
        status TEXT DEFAULT 'completed',
        created_at DATETIME DEFAULT CURRENT_TIMESTAMP
      )
    `).run();
        const now = (/* @__PURE__ */ new Date()).toISOString();
        await env.DB.prepare(`
      INSERT OR REPLACE INTO users (id, email, password, name, role, created_at)
      VALUES (1, 'demo@example.com', 'demo123', 'Demo User', 'customer', ?)
    `).bind(now).run();
        await env.DB.prepare(`
      INSERT OR REPLACE INTO customers (id, email, name, created_at, is_premium, extension_activated, total_spent, total_orders)
      VALUES (1, 'demo@example.com', 'Demo User', ?, 1, 1, 29.99, 1)
    `).bind(now).run();
        await env.DB.prepare(`
      INSERT OR REPLACE INTO invoices (id, invoice_number, customer_id, customer_name, customer_email, invoice_date, due_date, subtotal, total_amount, currency, status, paid_at, notes, created_at)
      VALUES (1, 'INV-2025-000001', 1, 'Demo User', 'demo@example.com', '2025-08-25', '2025-08-25', '29.99', '29.99', 'USD', 'paid', ?, 'Premium extension purchase', ?)
    `).bind(now, now).run();
        await env.DB.prepare(`
      INSERT OR REPLACE INTO orders (id, customer_id, product_name, amount, status, created_at)
      VALUES (1, 1, 'Premium Extension', 29.99, 'completed', ?)
    `).bind(now).run();
        const userCount = await env.DB.prepare("SELECT COUNT(*) as count FROM users").first();
        const customerCount = await env.DB.prepare("SELECT COUNT(*) as count FROM customers").first();
        const invoiceCount = await env.DB.prepare("SELECT COUNT(*) as count FROM invoices").first();
        const orderCount = await env.DB.prepare("SELECT COUNT(*) as count FROM orders").first();
        return new Response(JSON.stringify({
          success: true,
          message: "Database initialized successfully",
          tables: {
            users: userCount?.count || 0,
            customers: customerCount?.count || 0,
            invoices: invoiceCount?.count || 0,
            orders: orderCount?.count || 0
          }
        }), {
          headers: {
            "Content-Type": "application/json",
            "Access-Control-Allow-Origin": "*"
          }
        });
      } catch (error) {
        console.error("Database initialization error:", error);
        return new Response(JSON.stringify({
          success: false,
          message: "Database initialization failed: " + error.message
        }), {
          status: 500,
          headers: {
            "Content-Type": "application/json",
            "Access-Control-Allow-Origin": "*"
          }
        });
      }
    }, "onRequestGet");
    onRequestOptions54 = /* @__PURE__ */ __name2(async () => {
      return new Response(null, {
        status: 200,
        headers: {
          "Access-Control-Allow-Origin": "*",
          "Access-Control-Allow-Methods": "GET, OPTIONS",
          "Access-Control-Allow-Headers": "Content-Type, Authorization"
        }
      });
    }, "onRequestOptions");
  }
});
function getSettingsStore() {
  const g2 = globalThis;
  if (!g2.__INVOICE_SETTINGS__) {
    g2.__INVOICE_SETTINGS__ = {
      id: 1,
      companyName: "OCUS Job Hunter",
      companyAddress: "",
      companyPhone: "",
      companyEmail: "",
      companyWebsite: "",
      taxNumber: "",
      invoicePrefix: "INV",
      receiptPrefix: "REC",
      invoiceNotes: "",
      termsAndConditions: "",
      footerText: "Thank you for your business!",
      primaryColor: "#007bff",
      secondaryColor: "#6c757d",
      updatedAt: (/* @__PURE__ */ new Date()).toISOString()
    };
  }
  return g2.__INVOICE_SETTINGS__;
}
__name(getSettingsStore, "getSettingsStore");
function json17(data, status = 200) {
  return new Response(JSON.stringify(data), {
    status,
    headers: {
      "Content-Type": "application/json",
      "Access-Control-Allow-Origin": "*"
    }
  });
}
__name(json17, "json17");
var onRequestGet54;
var onRequestPut16;
var onRequestOptions55;
var init_invoice_settings = __esm({
  "api/invoice-settings.ts"() {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    __name2(getSettingsStore, "getSettingsStore");
    __name2(json17, "json");
    onRequestGet54 = /* @__PURE__ */ __name2(async () => {
      const settings3 = getSettingsStore();
      const ui = {
        id: settings3.id,
        companyName: settings3.companyName,
        companyAddress: settings3.companyAddress,
        companyPhone: settings3.companyPhone,
        companyEmail: settings3.companyEmail,
        companyWebsite: settings3.companyWebsite,
        taxNumber: settings3.taxNumber,
        invoicePrefix: settings3.invoicePrefix,
        receiptPrefix: settings3.receiptPrefix,
        invoiceNotes: settings3.invoiceNotes,
        termsAndConditions: settings3.termsAndConditions,
        footerText: settings3.footerText,
        primaryColor: settings3.primaryColor,
        secondaryColor: settings3.secondaryColor
      };
      return json17(ui);
    }, "onRequestGet");
    onRequestPut16 = /* @__PURE__ */ __name2(async ({ request }) => {
      try {
        const body = await request.json().catch(() => ({}));
        const store = getSettingsStore();
        const allowedKeys = [
          "companyName",
          "companyAddress",
          "companyPhone",
          "companyEmail",
          "companyWebsite",
          "taxNumber",
          "invoicePrefix",
          "receiptPrefix",
          "invoiceNotes",
          "termsAndConditions",
          "footerText",
          "primaryColor",
          "secondaryColor"
        ];
        for (const k2 of allowedKeys) {
          if (k2 in body) store[k2] = body[k2];
        }
        store.updatedAt = (/* @__PURE__ */ new Date()).toISOString();
        return json17({ ...store });
      } catch (e2) {
        return json17({ success: false, message: "Failed to update settings" }, 500);
      }
    }, "onRequestPut");
    onRequestOptions55 = /* @__PURE__ */ __name2(async () => {
      return new Response(null, {
        headers: {
          "Access-Control-Allow-Origin": "*",
          "Access-Control-Allow-Methods": "GET, PUT, OPTIONS",
          "Access-Control-Allow-Headers": "Content-Type"
        }
      });
    }, "onRequestOptions");
  }
});
function json18(data, status = 200) {
  return new Response(JSON.stringify(data), {
    status,
    headers: {
      "Content-Type": "application/json",
      "Access-Control-Allow-Origin": "*",
      "Access-Control-Allow-Methods": "GET, OPTIONS",
      "Access-Control-Allow-Headers": "Content-Type, Authorization"
    }
  });
}
__name(json18, "json18");
var onRequestGet55;
var init_invoices4 = __esm({
  "api/invoices.ts"() {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    __name2(json18, "json");
    onRequestGet55 = /* @__PURE__ */ __name2(async ({ request, env }) => {
      try {
        const authHeader = request.headers.get("Authorization");
        if (!authHeader || !authHeader.startsWith("Bearer ")) {
          return json18([]);
        }
        const token = authHeader.substring(7);
        if (token === "demo-jwt-token") {
          const demoInvoice = {
            id: 1,
            invoiceNumber: "INV-2025-000001",
            customerId: 1,
            customerName: "Demo User",
            customerEmail: "demo@example.com",
            invoiceDate: (/* @__PURE__ */ new Date()).toISOString().split("T")[0],
            dueDate: (/* @__PURE__ */ new Date()).toISOString().split("T")[0],
            subtotal: "29.99",
            totalAmount: "29.99",
            currency: "USD",
            status: "paid",
            paidAt: (/* @__PURE__ */ new Date()).toISOString(),
            notes: "Premium extension purchase"
          };
          return json18([demoInvoice]);
        }
        if (token.startsWith("jwt-token-")) {
          const parts = token.split("-");
          if (parts.length < 3) {
            return json18([]);
          }
          const userEmail = parts[2];
          if (!env.DB) {
            return json18({ error: "Database not available" }, 500);
          }
          try {
            const query = `
          SELECT 
            i.id,
            i.invoice_number,
            i.order_id,
            i.customer_name,
            i.customer_email,
            i.invoice_date,
            i.due_date,
            i.subtotal,
            i.tax_amount,
            i.discount_amount,
            i.total_amount,
            i.currency,
            i.status,
            i.paid_at,
            i.notes,
            i.created_at,
            i.updated_at,
            o.payment_method
          FROM invoices i
          LEFT JOIN orders o ON o.id = i.order_id
          WHERE i.customer_email = ?
          ORDER BY i.created_at DESC
        `;
            const result = await env.DB.prepare(query).bind(userEmail).all();
            const rows = result.results || [];
            const invoices2 = rows.map((r2) => ({
              id: r2.id,
              invoiceNumber: r2.invoice_number,
              orderId: r2.order_id,
              customerName: r2.customer_name,
              customerEmail: r2.customer_email,
              invoiceDate: r2.invoice_date,
              dueDate: r2.due_date,
              subtotal: r2.subtotal,
              taxAmount: r2.tax_amount,
              discountAmount: r2.discount_amount,
              totalAmount: r2.total_amount,
              currency: r2.currency,
              status: r2.status,
              paidAt: r2.paid_at,
              notes: r2.notes,
              createdAt: r2.created_at,
              updatedAt: r2.updated_at,
              paymentMethod: r2.payment_method
            }));
            return json18(invoices2);
          } catch (dbError) {
            console.error("DB error in /api/invoices:", dbError);
            return json18([]);
          }
        }
        return json18([]);
      } catch (error) {
        return json18({
          error: error.message
        }, 500);
      }
    }, "onRequestGet");
  }
});
function json19(data, status = 200) {
  return new Response(JSON.stringify(data), {
    status,
    headers: {
      "Content-Type": "application/json",
      "Access-Control-Allow-Origin": "*",
      "Access-Control-Allow-Methods": "GET, OPTIONS",
      "Access-Control-Allow-Headers": "Content-Type, Authorization"
    }
  });
}
__name(json19, "json19");
var onRequestGet56;
var init_me = __esm({
  "api/me.ts"() {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    __name2(json19, "json");
    onRequestGet56 = /* @__PURE__ */ __name2(async ({ request, env }) => {
      try {
        const authHeader = request.headers.get("Authorization");
        if (!authHeader || !authHeader.startsWith("Bearer ")) {
          return json19({
            error: "Unauthorized"
          }, 401);
        }
        const token = authHeader.substring(7);
        if (token === "demo-jwt-token") {
          return json19({
            id: 1,
            email: "demo@example.com",
            name: "Demo User",
            role: "customer",
            createdAt: (/* @__PURE__ */ new Date()).toISOString(),
            isPremium: true,
            extensionActivated: true,
            totalSpent: 29.99,
            totalOrders: 1,
            isAuthenticated: true
          });
        }
        if (token.startsWith("jwt-token-")) {
          const parts = token.split("-");
          if (parts.length >= 3) {
            const userId = parts[2];
            console.log("Parsed userId from token:", userId, "from token:", token);
            if (!env.DB) {
              return json19({ error: "Database not available" }, 500);
            }
            try {
              const session = env.DB.withSession("first-primary");
              console.log("Token parts:", parts);
              const userEmail = parts[2];
              const user = await session.prepare(`
            SELECT id, email, name, role, created_at, is_premium, extension_activated, 
                   premium_activated_at, total_spent, total_orders
            FROM users WHERE email = ?
          `).bind(userEmail).first();
              console.log("User lookup result:", user);
              if (user) {
                let cust = null;
                try {
                  cust = await session.prepare(`
                SELECT subscription_status, extension_activated
                FROM customers WHERE email = ?
              `).bind(userEmail).first();
                } catch (e2) {
                  console.error("Customer lookup for user failed:", e2);
                }
                const customerIsPremium = cust ? String(cust.subscription_status || "").toLowerCase() === "active" || Boolean(cust.extension_activated) : false;
                const computedIsPremium = Boolean(user.is_premium) || customerIsPremium;
                const computedExtensionActivated = Boolean(user.extension_activated) || Boolean(cust?.extension_activated);
                return json19({
                  id: user.id,
                  email: user.email,
                  name: user.name,
                  role: user.role || "customer",
                  createdAt: user.created_at,
                  isPremium: computedIsPremium,
                  extensionActivated: computedExtensionActivated,
                  premiumActivatedAt: user.premium_activated_at,
                  totalSpent: parseFloat(String(user.total_spent || "0")),
                  totalOrders: parseInt(String(user.total_orders || "0")),
                  isAuthenticated: true
                });
              }
              const customer = await session.prepare(`
            SELECT id, email, name, subscription_status, extension_activated, created_at,
                   total_spent, total_orders
            FROM customers WHERE email = ?
          `).bind(userEmail).first();
              console.log("Customer lookup result:", customer);
              if (customer) {
                return json19({
                  id: customer.id,
                  email: customer.email,
                  name: customer.name,
                  role: "customer",
                  createdAt: customer.created_at,
                  isPremium: String(customer.subscription_status || "").toLowerCase() === "active" || Boolean(customer.extension_activated),
                  extensionActivated: Boolean(customer.extension_activated),
                  totalSpent: parseFloat(String(customer.total_spent || "0")),
                  totalOrders: parseInt(String(customer.total_orders || "0")),
                  isAuthenticated: true
                });
              }
              const userSettingsKey = `user_${userEmail.replace("@", "_at_").replace(".", "_dot_")}`;
              const userSetting = await session.prepare(`
            SELECT value FROM settings WHERE key = ?
          `).bind(userSettingsKey).first();
              console.log("User setting lookup result:", userSetting);
              if (userSetting && typeof userSetting.value === "string") {
                try {
                  const userData = JSON.parse(userSetting.value);
                  if (userData.isPremium) {
                    return json19({
                      id: userData.id || userEmail,
                      // Fallback id
                      email: userData.email,
                      name: userData.name,
                      role: "customer",
                      createdAt: userData.updatedAt,
                      // Use updatedAt as a proxy for creation
                      isPremium: true,
                      extensionActivated: true,
                      // Assume activated if premium
                      totalSpent: 0,
                      // Not tracked in this fallback
                      totalOrders: 0,
                      // Not tracked in this fallback
                      isAuthenticated: true
                    });
                  }
                } catch (parseError) {
                  console.error("Failed to parse user data from settings:", parseError);
                }
              }
            } catch (dbError) {
              console.error("Database error in /api/me:", dbError);
            }
          }
        }
        return json19({
          error: "Invalid token"
        }, 401);
      } catch (error) {
        return json19({
          error: error.message
        }, 500);
      }
    }, "onRequestGet");
  }
});
function json20(data, status = 200) {
  return new Response(JSON.stringify(data), {
    status,
    headers: {
      "Content-Type": "application/json",
      "Access-Control-Allow-Origin": "*"
    }
  });
}
__name(json20, "json20");
var onRequestGet57;
var onRequestOptions56;
var init_migrate_db = __esm({
  "api/migrate-db.ts"() {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    __name2(json20, "json");
    onRequestGet57 = /* @__PURE__ */ __name2(async ({ env }) => {
      if (!env.DB) {
        return json20({ success: false, message: "Database not available" }, 500);
      }
      try {
        const alterStmt = `ALTER TABLE tickets ADD COLUMN customer_id INTEGER;`;
        await env.DB.prepare(alterStmt).run();
        const backfillStmt = `
      UPDATE tickets
      SET customer_id = (SELECT id FROM customers WHERE email = tickets.customer_email)
      WHERE customer_id IS NULL;
    `;
        const backfillResult = await env.DB.prepare(backfillStmt).run();
        return json20({
          success: true,
          message: "Database migration successful: customer_id added and backfilled.",
          backfillDetails: backfillResult.meta
        });
      } catch (e2) {
        if (e2.message.includes("duplicate column name")) {
          return json20({
            success: true,
            message: "Migration not needed: customer_id column already exists."
          });
        }
        console.error("Migration failed:", e2);
        return json20({ success: false, message: e2.message }, 500);
      }
    }, "onRequestGet");
    onRequestOptions56 = /* @__PURE__ */ __name2(async () => {
      return new Response(null, {
        headers: {
          "Access-Control-Allow-Origin": "*",
          "Access-Control-Allow-Methods": "GET, POST, OPTIONS",
          "Access-Control-Allow-Headers": "Content-Type, Authorization"
        }
      });
    }, "onRequestOptions");
  }
});
function json21(data, status = 200) {
  return new Response(JSON.stringify(data), {
    status,
    headers: {
      "Content-Type": "application/json",
      "Access-Control-Allow-Origin": "*"
    }
  });
}
__name(json21, "json21");
var onRequestPost26;
var onRequestOptions57;
var init_purchase_complete = __esm({
  "api/purchase-complete.ts"() {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    __name2(json21, "json");
    onRequestPost26 = /* @__PURE__ */ __name2(async ({ request, env }) => {
      try {
        const body = await request.json();
        const {
          paymentIntentId,
          customerEmail,
          customerName,
          customerId,
          amount,
          currency = "USD",
          productType = "premium_extension"
        } = body;
        if (!paymentIntentId || !customerEmail || !amount) {
          return json21({ success: false, message: "Missing required fields" }, 400);
        }
        if (!env.DB) {
          console.error("D1 database not available");
          return json21({ success: false, message: "Database not available" }, 500);
        }
        const now = (/* @__PURE__ */ new Date()).toISOString();
        const nowDate = /* @__PURE__ */ new Date();
        try {
          let finalCustomerId = customerId;
          if (customerEmail) {
            const userUpdateResult = await env.DB.prepare(`
          UPDATE users 
          SET is_premium = 1,
              extension_activated = 1,
              premium_activated_at = ?,
              total_spent = COALESCE(total_spent, 0) + ?,
              total_orders = COALESCE(total_orders, 0) + 1
          WHERE email = ?
        `).bind(now, amount, customerEmail).run();
            console.log("User table update result for", customerEmail, ":", userUpdateResult);
            if (userUpdateResult.meta?.changes === 0) {
              console.log("No user found with email", customerEmail, "in users table");
            }
          }
          if (customerId) {
            await env.DB.prepare(`
          UPDATE customers 
          SET is_premium = 1,
              extension_activated = 1,
              total_spent = COALESCE(total_spent, 0) + ?,
              total_orders = COALESCE(total_orders, 0) + 1,
              updated_at = ?
          WHERE id = ?
        `).bind(amount, now, customerId).run();
          } else {
            const existingCustomer = await env.DB.prepare(`
          SELECT id FROM customers WHERE email = ?
        `).bind(customerEmail).first();
            if (existingCustomer) {
              finalCustomerId = existingCustomer.id;
              await env.DB.prepare(`
            UPDATE customers 
            SET is_premium = 1,
                extension_activated = 1,
                updated_at = ?
            WHERE id = ?
          `).bind(now, finalCustomerId).run();
            } else {
              const result = await env.DB.prepare(`
            INSERT INTO customers (
              email, name, is_premium, extension_activated, 
              created_at, updated_at
            ) VALUES (?, ?, 1, 1, ?, ?)
          `).bind(
                customerEmail,
                customerName || customerEmail,
                now,
                now
              ).run();
              finalCustomerId = result.meta?.last_row_id;
            }
          }
          if (!finalCustomerId) {
            const existingCustomer = await env.DB.prepare(`
          SELECT id FROM customers WHERE email = ?
        `).bind(customerEmail).first();
            if (existingCustomer) {
              finalCustomerId = existingCustomer.id;
              await env.DB.prepare(`
            UPDATE customers 
            SET is_premium = 1,
                extension_activated = 1,
                total_spent = COALESCE(total_spent, 0) + ?,
                total_orders = COALESCE(total_orders, 0) + 1,
                updated_at = ?
            WHERE id = ?
          `).bind(amount, now, finalCustomerId).run();
            } else {
              const result = await env.DB.prepare(`
            INSERT INTO customers (
              email, name, is_premium, extension_activated, 
              total_spent, total_orders, created_at, updated_at
            ) VALUES (?, ?, 1, 1, ?, 1, ?, ?)
          `).bind(
                customerEmail,
                customerName || customerEmail,
                amount,
                now,
                now
              ).run();
              finalCustomerId = result.meta?.last_row_id;
            }
          }
          console.log("Final customer ID for orders/invoices:", finalCustomerId);
          const downloadToken = `download_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;
          const orderResult = await env.DB.prepare(`
        INSERT INTO orders (
          customer_id, customer_email, customer_name, 
          original_amount, final_amount, currency, status, payment_method,
          payment_intent_id, download_token, created_at, completed_at
        ) VALUES (?, ?, ?, ?, ?, ?, 'completed', 'stripe', ?, ?, ?, ?)
      `).bind(
            finalCustomerId,
            customerEmail,
            customerName || customerEmail,
            amount,
            amount,
            currency.toLowerCase(),
            paymentIntentId,
            downloadToken,
            now,
            now
          ).run();
          const orderId = orderResult.meta?.last_row_id;
          const activationCode = `OCUS_${Date.now()}_${Math.random().toString(36).substr(2, 9).toUpperCase()}`;
          await env.DB.prepare(`
        INSERT INTO activation_codes (
          code, order_id, created_at
        ) VALUES (?, ?, ?)
      `).bind(activationCode, orderId, now).run();
          const invoiceNumber = `INV-${Date.now()}-${Math.random().toString(36).substr(2, 6).toUpperCase()}`;
          const invoiceDate = nowDate;
          const dueDate = new Date(Date.now() + 30 * 24 * 60 * 60 * 1e3);
          const invoiceResult = await env.DB.prepare(`
        INSERT INTO invoices (
          invoice_number, order_id, customer_id, customer_name, customer_email,
          invoice_date, due_date, subtotal, tax_amount, discount_amount, 
          total_amount, currency, status, paid_at, created_at, updated_at
        ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, 0.00, 0.00, ?, ?, 'paid', ?, ?, ?)
      `).bind(
            invoiceNumber,
            orderId,
            finalCustomerId,
            customerName || customerEmail,
            customerEmail,
            invoiceDate.toISOString(),
            dueDate.toISOString(),
            amount,
            amount,
            "USD",
            invoiceDate.toISOString(),
            invoiceDate.toISOString(),
            invoiceDate.toISOString()
          ).run();
          const invoiceId = invoiceResult.meta?.last_row_id;
          await env.DB.prepare(`
        INSERT INTO invoice_items (
          invoice_id, product_name, description, quantity, unit_price, total_price, created_at
        ) VALUES (?, ?, ?, 1, ?, ?, ?)
      `).bind(
            invoiceId,
            "OCUS Job Hunter Premium",
            "Premium access to OCUS Job Hunter extension with unlimited job applications",
            amount,
            amount,
            invoiceDate.toISOString()
          ).run();
          console.log("Invoice created successfully:", { invoiceId, invoiceNumber });
          console.log("Purchase completed successfully:", {
            customerId: finalCustomerId,
            orderId,
            paymentIntentId,
            amount,
            activationCode
          });
          return json21({
            success: true,
            message: "Purchase completed successfully",
            data: {
              customerId: finalCustomerId,
              orderId,
              activationCode,
              downloadEnabled: true
            }
          });
        } catch (dbError) {
          console.error("Database error during purchase completion:", dbError);
          return json21({
            success: false,
            message: "Failed to process purchase completion",
            error: dbError.message
          }, 500);
        }
      } catch (error) {
        console.error("Purchase completion error:", error);
        return json21({
          success: false,
          message: "Internal server error",
          error: error.message
        }, 500);
      }
    }, "onRequestPost");
    onRequestOptions57 = /* @__PURE__ */ __name2(async () => {
      return new Response(null, {
        headers: {
          "Access-Control-Allow-Origin": "*",
          "Access-Control-Allow-Methods": "POST, OPTIONS",
          "Access-Control-Allow-Headers": "Content-Type"
        }
      });
    }, "onRequestOptions");
  }
});
var require_es_object_atoms = __commonJS({
  "../node_modules/es-object-atoms/index.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    module.exports = Object;
  }
});
var require_es_errors = __commonJS({
  "../node_modules/es-errors/index.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    module.exports = Error;
  }
});
var require_eval = __commonJS({
  "../node_modules/es-errors/eval.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    module.exports = EvalError;
  }
});
var require_range = __commonJS({
  "../node_modules/es-errors/range.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    module.exports = RangeError;
  }
});
var require_ref = __commonJS({
  "../node_modules/es-errors/ref.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    module.exports = ReferenceError;
  }
});
var require_syntax = __commonJS({
  "../node_modules/es-errors/syntax.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    module.exports = SyntaxError;
  }
});
var require_type = __commonJS({
  "../node_modules/es-errors/type.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    module.exports = TypeError;
  }
});
var require_uri = __commonJS({
  "../node_modules/es-errors/uri.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    module.exports = URIError;
  }
});
var require_abs = __commonJS({
  "../node_modules/math-intrinsics/abs.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    module.exports = Math.abs;
  }
});
var require_floor = __commonJS({
  "../node_modules/math-intrinsics/floor.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    module.exports = Math.floor;
  }
});
var require_max = __commonJS({
  "../node_modules/math-intrinsics/max.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    module.exports = Math.max;
  }
});
var require_min = __commonJS({
  "../node_modules/math-intrinsics/min.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    module.exports = Math.min;
  }
});
var require_pow = __commonJS({
  "../node_modules/math-intrinsics/pow.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    module.exports = Math.pow;
  }
});
var require_round = __commonJS({
  "../node_modules/math-intrinsics/round.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    module.exports = Math.round;
  }
});
var require_isNaN = __commonJS({
  "../node_modules/math-intrinsics/isNaN.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    module.exports = Number.isNaN || /* @__PURE__ */ __name2(/* @__PURE__ */ __name(function isNaN2(a3) {
      return a3 !== a3;
    }, "isNaN2"), "isNaN");
  }
});
var require_sign = __commonJS({
  "../node_modules/math-intrinsics/sign.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var $isNaN = require_isNaN();
    module.exports = /* @__PURE__ */ __name2(/* @__PURE__ */ __name(function sign(number) {
      if ($isNaN(number) || number === 0) {
        return number;
      }
      return number < 0 ? -1 : 1;
    }, "sign"), "sign");
  }
});
var require_gOPD = __commonJS({
  "../node_modules/gopd/gOPD.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    module.exports = Object.getOwnPropertyDescriptor;
  }
});
var require_gopd = __commonJS({
  "../node_modules/gopd/index.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var $gOPD = require_gOPD();
    if ($gOPD) {
      try {
        $gOPD([], "length");
      } catch (e2) {
        $gOPD = null;
      }
    }
    module.exports = $gOPD;
  }
});
var require_es_define_property = __commonJS({
  "../node_modules/es-define-property/index.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var $defineProperty = Object.defineProperty || false;
    if ($defineProperty) {
      try {
        $defineProperty({}, "a", { value: 1 });
      } catch (e2) {
        $defineProperty = false;
      }
    }
    module.exports = $defineProperty;
  }
});
var require_shams = __commonJS({
  "../node_modules/has-symbols/shams.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    module.exports = /* @__PURE__ */ __name2(/* @__PURE__ */ __name(function hasSymbols() {
      if (typeof Symbol !== "function" || typeof Object.getOwnPropertySymbols !== "function") {
        return false;
      }
      if (typeof Symbol.iterator === "symbol") {
        return true;
      }
      var obj = {};
      var sym = Symbol("test");
      var symObj = Object(sym);
      if (typeof sym === "string") {
        return false;
      }
      if (Object.prototype.toString.call(sym) !== "[object Symbol]") {
        return false;
      }
      if (Object.prototype.toString.call(symObj) !== "[object Symbol]") {
        return false;
      }
      var symVal = 42;
      obj[sym] = symVal;
      for (var _3 in obj) {
        return false;
      }
      if (typeof Object.keys === "function" && Object.keys(obj).length !== 0) {
        return false;
      }
      if (typeof Object.getOwnPropertyNames === "function" && Object.getOwnPropertyNames(obj).length !== 0) {
        return false;
      }
      var syms = Object.getOwnPropertySymbols(obj);
      if (syms.length !== 1 || syms[0] !== sym) {
        return false;
      }
      if (!Object.prototype.propertyIsEnumerable.call(obj, sym)) {
        return false;
      }
      if (typeof Object.getOwnPropertyDescriptor === "function") {
        var descriptor = (
          /** @type {PropertyDescriptor} */
          Object.getOwnPropertyDescriptor(obj, sym)
        );
        if (descriptor.value !== symVal || descriptor.enumerable !== true) {
          return false;
        }
      }
      return true;
    }, "hasSymbols"), "hasSymbols");
  }
});
var require_has_symbols = __commonJS({
  "../node_modules/has-symbols/index.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var origSymbol = typeof Symbol !== "undefined" && Symbol;
    var hasSymbolSham = require_shams();
    module.exports = /* @__PURE__ */ __name2(/* @__PURE__ */ __name(function hasNativeSymbols() {
      if (typeof origSymbol !== "function") {
        return false;
      }
      if (typeof Symbol !== "function") {
        return false;
      }
      if (typeof origSymbol("foo") !== "symbol") {
        return false;
      }
      if (typeof Symbol("bar") !== "symbol") {
        return false;
      }
      return hasSymbolSham();
    }, "hasNativeSymbols"), "hasNativeSymbols");
  }
});
var require_Reflect_getPrototypeOf = __commonJS({
  "../node_modules/get-proto/Reflect.getPrototypeOf.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    module.exports = typeof Reflect !== "undefined" && Reflect.getPrototypeOf || null;
  }
});
var require_Object_getPrototypeOf = __commonJS({
  "../node_modules/get-proto/Object.getPrototypeOf.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var $Object = require_es_object_atoms();
    module.exports = $Object.getPrototypeOf || null;
  }
});
var require_implementation = __commonJS({
  "../node_modules/function-bind/implementation.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var ERROR_MESSAGE = "Function.prototype.bind called on incompatible ";
    var toStr = Object.prototype.toString;
    var max2 = Math.max;
    var funcType = "[object Function]";
    var concatty = /* @__PURE__ */ __name2(/* @__PURE__ */ __name(function concatty2(a3, b2) {
      var arr = [];
      for (var i33 = 0; i33 < a3.length; i33 += 1) {
        arr[i33] = a3[i33];
      }
      for (var j2 = 0; j2 < b2.length; j2 += 1) {
        arr[j2 + a3.length] = b2[j2];
      }
      return arr;
    }, "concatty2"), "concatty");
    var slicy = /* @__PURE__ */ __name2(/* @__PURE__ */ __name(function slicy2(arrLike, offset) {
      var arr = [];
      for (var i33 = offset || 0, j2 = 0; i33 < arrLike.length; i33 += 1, j2 += 1) {
        arr[j2] = arrLike[i33];
      }
      return arr;
    }, "slicy2"), "slicy");
    var joiny = /* @__PURE__ */ __name2(function(arr, joiner) {
      var str = "";
      for (var i33 = 0; i33 < arr.length; i33 += 1) {
        str += arr[i33];
        if (i33 + 1 < arr.length) {
          str += joiner;
        }
      }
      return str;
    }, "joiny");
    module.exports = /* @__PURE__ */ __name2(/* @__PURE__ */ __name(function bind(that) {
      var target = this;
      if (typeof target !== "function" || toStr.apply(target) !== funcType) {
        throw new TypeError(ERROR_MESSAGE + target);
      }
      var args = slicy(arguments, 1);
      var bound;
      var binder = /* @__PURE__ */ __name2(function() {
        if (this instanceof bound) {
          var result = target.apply(
            this,
            concatty(args, arguments)
          );
          if (Object(result) === result) {
            return result;
          }
          return this;
        }
        return target.apply(
          that,
          concatty(args, arguments)
        );
      }, "binder");
      var boundLength = max2(0, target.length - args.length);
      var boundArgs = [];
      for (var i33 = 0; i33 < boundLength; i33++) {
        boundArgs[i33] = "$" + i33;
      }
      bound = Function("binder", "return function (" + joiny(boundArgs, ",") + "){ return binder.apply(this,arguments); }")(binder);
      if (target.prototype) {
        var Empty = /* @__PURE__ */ __name2(/* @__PURE__ */ __name(function Empty2() {
        }, "Empty2"), "Empty");
        Empty.prototype = target.prototype;
        bound.prototype = new Empty();
        Empty.prototype = null;
      }
      return bound;
    }, "bind"), "bind");
  }
});
var require_function_bind = __commonJS({
  "../node_modules/function-bind/index.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var implementation = require_implementation();
    module.exports = Function.prototype.bind || implementation;
  }
});
var require_functionCall = __commonJS({
  "../node_modules/call-bind-apply-helpers/functionCall.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    module.exports = Function.prototype.call;
  }
});
var require_functionApply = __commonJS({
  "../node_modules/call-bind-apply-helpers/functionApply.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    module.exports = Function.prototype.apply;
  }
});
var require_reflectApply = __commonJS({
  "../node_modules/call-bind-apply-helpers/reflectApply.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    module.exports = typeof Reflect !== "undefined" && Reflect && Reflect.apply;
  }
});
var require_actualApply = __commonJS({
  "../node_modules/call-bind-apply-helpers/actualApply.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var bind = require_function_bind();
    var $apply = require_functionApply();
    var $call = require_functionCall();
    var $reflectApply = require_reflectApply();
    module.exports = $reflectApply || bind.call($call, $apply);
  }
});
var require_call_bind_apply_helpers = __commonJS({
  "../node_modules/call-bind-apply-helpers/index.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var bind = require_function_bind();
    var $TypeError = require_type();
    var $call = require_functionCall();
    var $actualApply = require_actualApply();
    module.exports = /* @__PURE__ */ __name2(/* @__PURE__ */ __name(function callBindBasic(args) {
      if (args.length < 1 || typeof args[0] !== "function") {
        throw new $TypeError("a function is required");
      }
      return $actualApply(bind, $call, args);
    }, "callBindBasic"), "callBindBasic");
  }
});
var require_get = __commonJS({
  "../node_modules/dunder-proto/get.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var callBind = require_call_bind_apply_helpers();
    var gOPD = require_gopd();
    var hasProtoAccessor;
    try {
      hasProtoAccessor = /** @type {{ __proto__?: typeof Array.prototype }} */
      [].__proto__ === Array.prototype;
    } catch (e2) {
      if (!e2 || typeof e2 !== "object" || !("code" in e2) || e2.code !== "ERR_PROTO_ACCESS") {
        throw e2;
      }
    }
    var desc2 = !!hasProtoAccessor && gOPD && gOPD(
      Object.prototype,
      /** @type {keyof typeof Object.prototype} */
      "__proto__"
    );
    var $Object = Object;
    var $getPrototypeOf = $Object.getPrototypeOf;
    module.exports = desc2 && typeof desc2.get === "function" ? callBind([desc2.get]) : typeof $getPrototypeOf === "function" ? (
      /** @type {import('./get')} */
      /* @__PURE__ */ __name2(/* @__PURE__ */ __name(function getDunder(value) {
        return $getPrototypeOf(value == null ? value : $Object(value));
      }, "getDunder"), "getDunder")
    ) : false;
  }
});
var require_get_proto = __commonJS({
  "../node_modules/get-proto/index.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var reflectGetProto = require_Reflect_getPrototypeOf();
    var originalGetProto = require_Object_getPrototypeOf();
    var getDunderProto = require_get();
    module.exports = reflectGetProto ? /* @__PURE__ */ __name2(/* @__PURE__ */ __name(function getProto(O3) {
      return reflectGetProto(O3);
    }, "getProto"), "getProto") : originalGetProto ? /* @__PURE__ */ __name2(/* @__PURE__ */ __name(function getProto(O3) {
      if (!O3 || typeof O3 !== "object" && typeof O3 !== "function") {
        throw new TypeError("getProto: not an object");
      }
      return originalGetProto(O3);
    }, "getProto"), "getProto") : getDunderProto ? /* @__PURE__ */ __name2(/* @__PURE__ */ __name(function getProto(O3) {
      return getDunderProto(O3);
    }, "getProto"), "getProto") : null;
  }
});
var require_hasown = __commonJS({
  "../node_modules/hasown/index.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var call = Function.prototype.call;
    var $hasOwn = Object.prototype.hasOwnProperty;
    var bind = require_function_bind();
    module.exports = bind.call(call, $hasOwn);
  }
});
var require_get_intrinsic = __commonJS({
  "../node_modules/get-intrinsic/index.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var undefined2;
    var $Object = require_es_object_atoms();
    var $Error = require_es_errors();
    var $EvalError = require_eval();
    var $RangeError = require_range();
    var $ReferenceError = require_ref();
    var $SyntaxError = require_syntax();
    var $TypeError = require_type();
    var $URIError = require_uri();
    var abs = require_abs();
    var floor = require_floor();
    var max2 = require_max();
    var min = require_min();
    var pow = require_pow();
    var round = require_round();
    var sign = require_sign();
    var $Function = Function;
    var getEvalledConstructor = /* @__PURE__ */ __name2(function(expressionSyntax) {
      try {
        return $Function('"use strict"; return (' + expressionSyntax + ").constructor;")();
      } catch (e2) {
      }
    }, "getEvalledConstructor");
    var $gOPD = require_gopd();
    var $defineProperty = require_es_define_property();
    var throwTypeError = /* @__PURE__ */ __name2(function() {
      throw new $TypeError();
    }, "throwTypeError");
    var ThrowTypeError = $gOPD ? function() {
      try {
        arguments.callee;
        return throwTypeError;
      } catch (calleeThrows) {
        try {
          return $gOPD(arguments, "callee").get;
        } catch (gOPDthrows) {
          return throwTypeError;
        }
      }
    }() : throwTypeError;
    var hasSymbols = require_has_symbols()();
    var getProto = require_get_proto();
    var $ObjectGPO = require_Object_getPrototypeOf();
    var $ReflectGPO = require_Reflect_getPrototypeOf();
    var $apply = require_functionApply();
    var $call = require_functionCall();
    var needsEval = {};
    var TypedArray = typeof Uint8Array === "undefined" || !getProto ? undefined2 : getProto(Uint8Array);
    var INTRINSICS = {
      __proto__: null,
      "%AggregateError%": typeof AggregateError === "undefined" ? undefined2 : AggregateError,
      "%Array%": Array,
      "%ArrayBuffer%": typeof ArrayBuffer === "undefined" ? undefined2 : ArrayBuffer,
      "%ArrayIteratorPrototype%": hasSymbols && getProto ? getProto([][Symbol.iterator]()) : undefined2,
      "%AsyncFromSyncIteratorPrototype%": undefined2,
      "%AsyncFunction%": needsEval,
      "%AsyncGenerator%": needsEval,
      "%AsyncGeneratorFunction%": needsEval,
      "%AsyncIteratorPrototype%": needsEval,
      "%Atomics%": typeof Atomics === "undefined" ? undefined2 : Atomics,
      "%BigInt%": typeof BigInt === "undefined" ? undefined2 : BigInt,
      "%BigInt64Array%": typeof BigInt64Array === "undefined" ? undefined2 : BigInt64Array,
      "%BigUint64Array%": typeof BigUint64Array === "undefined" ? undefined2 : BigUint64Array,
      "%Boolean%": Boolean,
      "%DataView%": typeof DataView === "undefined" ? undefined2 : DataView,
      "%Date%": Date,
      "%decodeURI%": decodeURI,
      "%decodeURIComponent%": decodeURIComponent,
      "%encodeURI%": encodeURI,
      "%encodeURIComponent%": encodeURIComponent,
      "%Error%": $Error,
      "%eval%": eval,
      // eslint-disable-line no-eval
      "%EvalError%": $EvalError,
      "%Float16Array%": typeof Float16Array === "undefined" ? undefined2 : Float16Array,
      "%Float32Array%": typeof Float32Array === "undefined" ? undefined2 : Float32Array,
      "%Float64Array%": typeof Float64Array === "undefined" ? undefined2 : Float64Array,
      "%FinalizationRegistry%": typeof FinalizationRegistry === "undefined" ? undefined2 : FinalizationRegistry,
      "%Function%": $Function,
      "%GeneratorFunction%": needsEval,
      "%Int8Array%": typeof Int8Array === "undefined" ? undefined2 : Int8Array,
      "%Int16Array%": typeof Int16Array === "undefined" ? undefined2 : Int16Array,
      "%Int32Array%": typeof Int32Array === "undefined" ? undefined2 : Int32Array,
      "%isFinite%": isFinite,
      "%isNaN%": isNaN,
      "%IteratorPrototype%": hasSymbols && getProto ? getProto(getProto([][Symbol.iterator]())) : undefined2,
      "%JSON%": typeof JSON === "object" ? JSON : undefined2,
      "%Map%": typeof Map === "undefined" ? undefined2 : Map,
      "%MapIteratorPrototype%": typeof Map === "undefined" || !hasSymbols || !getProto ? undefined2 : getProto((/* @__PURE__ */ new Map())[Symbol.iterator]()),
      "%Math%": Math,
      "%Number%": Number,
      "%Object%": $Object,
      "%Object.getOwnPropertyDescriptor%": $gOPD,
      "%parseFloat%": parseFloat,
      "%parseInt%": parseInt,
      "%Promise%": typeof Promise === "undefined" ? undefined2 : Promise,
      "%Proxy%": typeof Proxy === "undefined" ? undefined2 : Proxy,
      "%RangeError%": $RangeError,
      "%ReferenceError%": $ReferenceError,
      "%Reflect%": typeof Reflect === "undefined" ? undefined2 : Reflect,
      "%RegExp%": RegExp,
      "%Set%": typeof Set === "undefined" ? undefined2 : Set,
      "%SetIteratorPrototype%": typeof Set === "undefined" || !hasSymbols || !getProto ? undefined2 : getProto((/* @__PURE__ */ new Set())[Symbol.iterator]()),
      "%SharedArrayBuffer%": typeof SharedArrayBuffer === "undefined" ? undefined2 : SharedArrayBuffer,
      "%String%": String,
      "%StringIteratorPrototype%": hasSymbols && getProto ? getProto(""[Symbol.iterator]()) : undefined2,
      "%Symbol%": hasSymbols ? Symbol : undefined2,
      "%SyntaxError%": $SyntaxError,
      "%ThrowTypeError%": ThrowTypeError,
      "%TypedArray%": TypedArray,
      "%TypeError%": $TypeError,
      "%Uint8Array%": typeof Uint8Array === "undefined" ? undefined2 : Uint8Array,
      "%Uint8ClampedArray%": typeof Uint8ClampedArray === "undefined" ? undefined2 : Uint8ClampedArray,
      "%Uint16Array%": typeof Uint16Array === "undefined" ? undefined2 : Uint16Array,
      "%Uint32Array%": typeof Uint32Array === "undefined" ? undefined2 : Uint32Array,
      "%URIError%": $URIError,
      "%WeakMap%": typeof WeakMap === "undefined" ? undefined2 : WeakMap,
      "%WeakRef%": typeof WeakRef === "undefined" ? undefined2 : WeakRef,
      "%WeakSet%": typeof WeakSet === "undefined" ? undefined2 : WeakSet,
      "%Function.prototype.call%": $call,
      "%Function.prototype.apply%": $apply,
      "%Object.defineProperty%": $defineProperty,
      "%Object.getPrototypeOf%": $ObjectGPO,
      "%Math.abs%": abs,
      "%Math.floor%": floor,
      "%Math.max%": max2,
      "%Math.min%": min,
      "%Math.pow%": pow,
      "%Math.round%": round,
      "%Math.sign%": sign,
      "%Reflect.getPrototypeOf%": $ReflectGPO
    };
    if (getProto) {
      try {
        null.error;
      } catch (e2) {
        errorProto = getProto(getProto(e2));
        INTRINSICS["%Error.prototype%"] = errorProto;
      }
    }
    var errorProto;
    var doEval = /* @__PURE__ */ __name2(/* @__PURE__ */ __name(function doEval2(name) {
      var value;
      if (name === "%AsyncFunction%") {
        value = getEvalledConstructor("async function () {}");
      } else if (name === "%GeneratorFunction%") {
        value = getEvalledConstructor("function* () {}");
      } else if (name === "%AsyncGeneratorFunction%") {
        value = getEvalledConstructor("async function* () {}");
      } else if (name === "%AsyncGenerator%") {
        var fn = doEval2("%AsyncGeneratorFunction%");
        if (fn) {
          value = fn.prototype;
        }
      } else if (name === "%AsyncIteratorPrototype%") {
        var gen = doEval2("%AsyncGenerator%");
        if (gen && getProto) {
          value = getProto(gen.prototype);
        }
      }
      INTRINSICS[name] = value;
      return value;
    }, "doEval2"), "doEval");
    var LEGACY_ALIASES = {
      __proto__: null,
      "%ArrayBufferPrototype%": ["ArrayBuffer", "prototype"],
      "%ArrayPrototype%": ["Array", "prototype"],
      "%ArrayProto_entries%": ["Array", "prototype", "entries"],
      "%ArrayProto_forEach%": ["Array", "prototype", "forEach"],
      "%ArrayProto_keys%": ["Array", "prototype", "keys"],
      "%ArrayProto_values%": ["Array", "prototype", "values"],
      "%AsyncFunctionPrototype%": ["AsyncFunction", "prototype"],
      "%AsyncGenerator%": ["AsyncGeneratorFunction", "prototype"],
      "%AsyncGeneratorPrototype%": ["AsyncGeneratorFunction", "prototype", "prototype"],
      "%BooleanPrototype%": ["Boolean", "prototype"],
      "%DataViewPrototype%": ["DataView", "prototype"],
      "%DatePrototype%": ["Date", "prototype"],
      "%ErrorPrototype%": ["Error", "prototype"],
      "%EvalErrorPrototype%": ["EvalError", "prototype"],
      "%Float32ArrayPrototype%": ["Float32Array", "prototype"],
      "%Float64ArrayPrototype%": ["Float64Array", "prototype"],
      "%FunctionPrototype%": ["Function", "prototype"],
      "%Generator%": ["GeneratorFunction", "prototype"],
      "%GeneratorPrototype%": ["GeneratorFunction", "prototype", "prototype"],
      "%Int8ArrayPrototype%": ["Int8Array", "prototype"],
      "%Int16ArrayPrototype%": ["Int16Array", "prototype"],
      "%Int32ArrayPrototype%": ["Int32Array", "prototype"],
      "%JSONParse%": ["JSON", "parse"],
      "%JSONStringify%": ["JSON", "stringify"],
      "%MapPrototype%": ["Map", "prototype"],
      "%NumberPrototype%": ["Number", "prototype"],
      "%ObjectPrototype%": ["Object", "prototype"],
      "%ObjProto_toString%": ["Object", "prototype", "toString"],
      "%ObjProto_valueOf%": ["Object", "prototype", "valueOf"],
      "%PromisePrototype%": ["Promise", "prototype"],
      "%PromiseProto_then%": ["Promise", "prototype", "then"],
      "%Promise_all%": ["Promise", "all"],
      "%Promise_reject%": ["Promise", "reject"],
      "%Promise_resolve%": ["Promise", "resolve"],
      "%RangeErrorPrototype%": ["RangeError", "prototype"],
      "%ReferenceErrorPrototype%": ["ReferenceError", "prototype"],
      "%RegExpPrototype%": ["RegExp", "prototype"],
      "%SetPrototype%": ["Set", "prototype"],
      "%SharedArrayBufferPrototype%": ["SharedArrayBuffer", "prototype"],
      "%StringPrototype%": ["String", "prototype"],
      "%SymbolPrototype%": ["Symbol", "prototype"],
      "%SyntaxErrorPrototype%": ["SyntaxError", "prototype"],
      "%TypedArrayPrototype%": ["TypedArray", "prototype"],
      "%TypeErrorPrototype%": ["TypeError", "prototype"],
      "%Uint8ArrayPrototype%": ["Uint8Array", "prototype"],
      "%Uint8ClampedArrayPrototype%": ["Uint8ClampedArray", "prototype"],
      "%Uint16ArrayPrototype%": ["Uint16Array", "prototype"],
      "%Uint32ArrayPrototype%": ["Uint32Array", "prototype"],
      "%URIErrorPrototype%": ["URIError", "prototype"],
      "%WeakMapPrototype%": ["WeakMap", "prototype"],
      "%WeakSetPrototype%": ["WeakSet", "prototype"]
    };
    var bind = require_function_bind();
    var hasOwn = require_hasown();
    var $concat = bind.call($call, Array.prototype.concat);
    var $spliceApply = bind.call($apply, Array.prototype.splice);
    var $replace = bind.call($call, String.prototype.replace);
    var $strSlice = bind.call($call, String.prototype.slice);
    var $exec = bind.call($call, RegExp.prototype.exec);
    var rePropName = /[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g;
    var reEscapeChar = /\\(\\)?/g;
    var stringToPath = /* @__PURE__ */ __name2(/* @__PURE__ */ __name(function stringToPath2(string) {
      var first = $strSlice(string, 0, 1);
      var last = $strSlice(string, -1);
      if (first === "%" && last !== "%") {
        throw new $SyntaxError("invalid intrinsic syntax, expected closing `%`");
      } else if (last === "%" && first !== "%") {
        throw new $SyntaxError("invalid intrinsic syntax, expected opening `%`");
      }
      var result = [];
      $replace(string, rePropName, function(match2, number, quote, subString) {
        result[result.length] = quote ? $replace(subString, reEscapeChar, "$1") : number || match2;
      });
      return result;
    }, "stringToPath2"), "stringToPath");
    var getBaseIntrinsic = /* @__PURE__ */ __name2(/* @__PURE__ */ __name(function getBaseIntrinsic2(name, allowMissing) {
      var intrinsicName = name;
      var alias;
      if (hasOwn(LEGACY_ALIASES, intrinsicName)) {
        alias = LEGACY_ALIASES[intrinsicName];
        intrinsicName = "%" + alias[0] + "%";
      }
      if (hasOwn(INTRINSICS, intrinsicName)) {
        var value = INTRINSICS[intrinsicName];
        if (value === needsEval) {
          value = doEval(intrinsicName);
        }
        if (typeof value === "undefined" && !allowMissing) {
          throw new $TypeError("intrinsic " + name + " exists, but is not available. Please file an issue!");
        }
        return {
          alias,
          name: intrinsicName,
          value
        };
      }
      throw new $SyntaxError("intrinsic " + name + " does not exist!");
    }, "getBaseIntrinsic2"), "getBaseIntrinsic");
    module.exports = /* @__PURE__ */ __name2(/* @__PURE__ */ __name(function GetIntrinsic(name, allowMissing) {
      if (typeof name !== "string" || name.length === 0) {
        throw new $TypeError("intrinsic name must be a non-empty string");
      }
      if (arguments.length > 1 && typeof allowMissing !== "boolean") {
        throw new $TypeError('"allowMissing" argument must be a boolean');
      }
      if ($exec(/^%?[^%]*%?$/, name) === null) {
        throw new $SyntaxError("`%` may not be present anywhere but at the beginning and end of the intrinsic name");
      }
      var parts = stringToPath(name);
      var intrinsicBaseName = parts.length > 0 ? parts[0] : "";
      var intrinsic = getBaseIntrinsic("%" + intrinsicBaseName + "%", allowMissing);
      var intrinsicRealName = intrinsic.name;
      var value = intrinsic.value;
      var skipFurtherCaching = false;
      var alias = intrinsic.alias;
      if (alias) {
        intrinsicBaseName = alias[0];
        $spliceApply(parts, $concat([0, 1], alias));
      }
      for (var i33 = 1, isOwn = true; i33 < parts.length; i33 += 1) {
        var part = parts[i33];
        var first = $strSlice(part, 0, 1);
        var last = $strSlice(part, -1);
        if ((first === '"' || first === "'" || first === "`" || (last === '"' || last === "'" || last === "`")) && first !== last) {
          throw new $SyntaxError("property names with quotes must have matching quotes");
        }
        if (part === "constructor" || !isOwn) {
          skipFurtherCaching = true;
        }
        intrinsicBaseName += "." + part;
        intrinsicRealName = "%" + intrinsicBaseName + "%";
        if (hasOwn(INTRINSICS, intrinsicRealName)) {
          value = INTRINSICS[intrinsicRealName];
        } else if (value != null) {
          if (!(part in value)) {
            if (!allowMissing) {
              throw new $TypeError("base intrinsic for " + name + " exists, but the property is not available.");
            }
            return void undefined2;
          }
          if ($gOPD && i33 + 1 >= parts.length) {
            var desc2 = $gOPD(value, part);
            isOwn = !!desc2;
            if (isOwn && "get" in desc2 && !("originalValue" in desc2.get)) {
              value = desc2.get;
            } else {
              value = value[part];
            }
          } else {
            isOwn = hasOwn(value, part);
            value = value[part];
          }
          if (isOwn && !skipFurtherCaching) {
            INTRINSICS[intrinsicRealName] = value;
          }
        }
      }
      return value;
    }, "GetIntrinsic"), "GetIntrinsic");
  }
});
var require_define_data_property = __commonJS({
  "../node_modules/define-data-property/index.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var $defineProperty = require_es_define_property();
    var $SyntaxError = require_syntax();
    var $TypeError = require_type();
    var gopd = require_gopd();
    module.exports = /* @__PURE__ */ __name2(/* @__PURE__ */ __name(function defineDataProperty(obj, property, value) {
      if (!obj || typeof obj !== "object" && typeof obj !== "function") {
        throw new $TypeError("`obj` must be an object or a function`");
      }
      if (typeof property !== "string" && typeof property !== "symbol") {
        throw new $TypeError("`property` must be a string or a symbol`");
      }
      if (arguments.length > 3 && typeof arguments[3] !== "boolean" && arguments[3] !== null) {
        throw new $TypeError("`nonEnumerable`, if provided, must be a boolean or null");
      }
      if (arguments.length > 4 && typeof arguments[4] !== "boolean" && arguments[4] !== null) {
        throw new $TypeError("`nonWritable`, if provided, must be a boolean or null");
      }
      if (arguments.length > 5 && typeof arguments[5] !== "boolean" && arguments[5] !== null) {
        throw new $TypeError("`nonConfigurable`, if provided, must be a boolean or null");
      }
      if (arguments.length > 6 && typeof arguments[6] !== "boolean") {
        throw new $TypeError("`loose`, if provided, must be a boolean");
      }
      var nonEnumerable = arguments.length > 3 ? arguments[3] : null;
      var nonWritable = arguments.length > 4 ? arguments[4] : null;
      var nonConfigurable = arguments.length > 5 ? arguments[5] : null;
      var loose = arguments.length > 6 ? arguments[6] : false;
      var desc2 = !!gopd && gopd(obj, property);
      if ($defineProperty) {
        $defineProperty(obj, property, {
          configurable: nonConfigurable === null && desc2 ? desc2.configurable : !nonConfigurable,
          enumerable: nonEnumerable === null && desc2 ? desc2.enumerable : !nonEnumerable,
          value,
          writable: nonWritable === null && desc2 ? desc2.writable : !nonWritable
        });
      } else if (loose || !nonEnumerable && !nonWritable && !nonConfigurable) {
        obj[property] = value;
      } else {
        throw new $SyntaxError("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.");
      }
    }, "defineDataProperty"), "defineDataProperty");
  }
});
var require_has_property_descriptors = __commonJS({
  "../node_modules/has-property-descriptors/index.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var $defineProperty = require_es_define_property();
    var hasPropertyDescriptors = /* @__PURE__ */ __name2(/* @__PURE__ */ __name(function hasPropertyDescriptors2() {
      return !!$defineProperty;
    }, "hasPropertyDescriptors2"), "hasPropertyDescriptors");
    hasPropertyDescriptors.hasArrayLengthDefineBug = /* @__PURE__ */ __name2(/* @__PURE__ */ __name(function hasArrayLengthDefineBug() {
      if (!$defineProperty) {
        return null;
      }
      try {
        return $defineProperty([], "length", { value: 1 }).length !== 1;
      } catch (e2) {
        return true;
      }
    }, "hasArrayLengthDefineBug"), "hasArrayLengthDefineBug");
    module.exports = hasPropertyDescriptors;
  }
});
var require_set_function_length = __commonJS({
  "../node_modules/set-function-length/index.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var GetIntrinsic = require_get_intrinsic();
    var define2 = require_define_data_property();
    var hasDescriptors = require_has_property_descriptors()();
    var gOPD = require_gopd();
    var $TypeError = require_type();
    var $floor = GetIntrinsic("%Math.floor%");
    module.exports = /* @__PURE__ */ __name2(/* @__PURE__ */ __name(function setFunctionLength(fn, length) {
      if (typeof fn !== "function") {
        throw new $TypeError("`fn` is not a function");
      }
      if (typeof length !== "number" || length < 0 || length > 4294967295 || $floor(length) !== length) {
        throw new $TypeError("`length` must be a positive 32-bit integer");
      }
      var loose = arguments.length > 2 && !!arguments[2];
      var functionLengthIsConfigurable = true;
      var functionLengthIsWritable = true;
      if ("length" in fn && gOPD) {
        var desc2 = gOPD(fn, "length");
        if (desc2 && !desc2.configurable) {
          functionLengthIsConfigurable = false;
        }
        if (desc2 && !desc2.writable) {
          functionLengthIsWritable = false;
        }
      }
      if (functionLengthIsConfigurable || functionLengthIsWritable || !loose) {
        if (hasDescriptors) {
          define2(
            /** @type {Parameters<define>[0]} */
            fn,
            "length",
            length,
            true,
            true
          );
        } else {
          define2(
            /** @type {Parameters<define>[0]} */
            fn,
            "length",
            length
          );
        }
      }
      return fn;
    }, "setFunctionLength"), "setFunctionLength");
  }
});
var require_call_bind = __commonJS({
  "../node_modules/call-bind/index.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var bind = require_function_bind();
    var GetIntrinsic = require_get_intrinsic();
    var setFunctionLength = require_set_function_length();
    var $TypeError = require_type();
    var $apply = GetIntrinsic("%Function.prototype.apply%");
    var $call = GetIntrinsic("%Function.prototype.call%");
    var $reflectApply = GetIntrinsic("%Reflect.apply%", true) || bind.call($call, $apply);
    var $defineProperty = require_es_define_property();
    var $max = GetIntrinsic("%Math.max%");
    module.exports = /* @__PURE__ */ __name2(/* @__PURE__ */ __name(function callBind(originalFunction) {
      if (typeof originalFunction !== "function") {
        throw new $TypeError("a function is required");
      }
      var func = $reflectApply(bind, $call, arguments);
      return setFunctionLength(
        func,
        1 + $max(0, originalFunction.length - (arguments.length - 1)),
        true
      );
    }, "callBind"), "callBind");
    var applyBind = /* @__PURE__ */ __name2(/* @__PURE__ */ __name(function applyBind2() {
      return $reflectApply(bind, $apply, arguments);
    }, "applyBind2"), "applyBind");
    if ($defineProperty) {
      $defineProperty(module.exports, "apply", { value: applyBind });
    } else {
      module.exports.apply = applyBind;
    }
  }
});
var require_callBound = __commonJS({
  "../node_modules/call-bind/callBound.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var GetIntrinsic = require_get_intrinsic();
    var callBind = require_call_bind();
    var $indexOf = callBind(GetIntrinsic("String.prototype.indexOf"));
    module.exports = /* @__PURE__ */ __name2(/* @__PURE__ */ __name(function callBoundIntrinsic(name, allowMissing) {
      var intrinsic = GetIntrinsic(name, !!allowMissing);
      if (typeof intrinsic === "function" && $indexOf(name, ".prototype.") > -1) {
        return callBind(intrinsic);
      }
      return intrinsic;
    }, "callBoundIntrinsic"), "callBoundIntrinsic");
  }
});
var require_util = __commonJS({
  "(disabled):../node_modules/object-inspect/util.inspect"() {
    init_functionsRoutes_0_8044054200943971();
  }
});
var require_object_inspect = __commonJS({
  "../node_modules/object-inspect/index.js"(exports, module) {
    init_functionsRoutes_0_8044054200943971();
    var hasMap = typeof Map === "function" && Map.prototype;
    var mapSizeDescriptor = Object.getOwnPropertyDescriptor && hasMap ? Object.getOwnPropertyDescriptor(Map.prototype, "size") : null;
    var mapSize = hasMap && mapSizeDescriptor && typeof mapSizeDescriptor.get === "function" ? mapSizeDescriptor.get : null;
    var mapForEach = hasMap && Map.prototype.forEach;
    var hasSet = typeof Set === "function" && Set.prototype;
    var setSizeDescriptor = Object.getOwnPropertyDescriptor && hasSet ? Object.getOwnPropertyDescriptor(Set.prototype, "size") : null;
    var setSize = hasSet && setSizeDescriptor && typeof setSizeDescriptor.get === "function" ? setSizeDescriptor.get : null;
    var setForEach = hasSet && Set.prototype.forEach;
    var hasWeakMap = typeof WeakMap === "function" && WeakMap.prototype;
    var weakMapHas = hasWeakMap ? WeakMap.prototype.has : null;
    var hasWeakSet = typeof WeakSet === "function" && WeakSet.prototype;
    var weakSetHas = hasWeakSet ? WeakSet.prototype.has : null;
    var hasWeakRef = typeof WeakRef === "function" && WeakRef.prototype;
    var weakRefDeref = hasWeakRef ? WeakRef.prototype.deref : null;
    var booleanValueOf = Boolean.prototype.valueOf;
    var objectToString = Object.prototype.toString;
    var functionToString = Function.prototype.toString;
    var $match = String.prototype.match;
    var $slice = String.prototype.slice;
    var $replace = String.prototype.replace;
    var $toUpperCase = String.prototype.toUpperCase;
    var $toLowerCase = String.prototype.toLowerCase;
    var $test = RegExp.prototype.test;
    var $concat = Array.prototype.concat;
    var $join = Array.prototype.join;
    var $arrSlice = Array.prototype.slice;
    var $floor = Math.floor;
    var bigIntValueOf = typeof BigInt === "function" ? BigInt.prototype.valueOf : null;
    var gOPS = Object.getOwnPropertySymbols;
    var symToString = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? Symbol.prototype.toString : null;
    var hasShammedSymbols = typeof Symbol === "function" && typeof Symbol.iterator === "object";
    var toStringTag = typeof Symbol === "function" && Symbol.toStringTag && (typeof Symbol.toStringTag === hasShammedSymbols ? "object" : "symbol") ? Symbol.toStringTag : null;
    var isEnumerable = Object.prototype.propertyIsEnumerable;
    var gPO = (typeof Reflect === "function" ? Reflect.getPrototypeOf : Object.getPrototypeOf) || ([].__proto__ === Array.prototype ? function(O3) {
      return O3.__proto__;
    } : null);
    function addNumericSeparator(num, str) {
      if (num === Infinity || num === -Infinity || num !== num || num && num > -1e3 && num < 1e3 || $test.call(/e/, str)) {
        return str;
      }
      var sepRegex = /[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;
      if (typeof num === "number") {
        var int = num < 0 ? -$floor(-num) : $floor(num);
        if (int !== num) {
          var intStr = String(int);
          var dec = $slice.call(str, intStr.length + 1);
          return $replace.call(intStr, sepRegex, "$&_") + "." + $replace.call($replace.call(dec, /([0-9]{3})/g, "$&_"), /_$/, "");
        }
      }
      return $replace.call(str, sepRegex, "$&_");
    }
    __name(addNumericSeparator, "addNumericSeparator");
    __name2(addNumericSeparator, "addNumericSeparator");
    var utilInspect = require_util();
    var inspectCustom = utilInspect.custom;
    var inspectSymbol = isSymbol(inspectCustom) ? inspectCustom : null;
    module.exports = /* @__PURE__ */ __name2(/* @__PURE__ */ __name(function inspect_(obj, options, depth, seen) {
      var opts = options || {};
      if (has(opts, "quoteStyle") && (opts.quoteStyle !== "single" && opts.quoteStyle !== "double")) {
        throw new TypeError('option "quoteStyle" must be "single" or "double"');
      }
      if (has(opts, "maxStringLength") && (typeof opts.maxStringLength === "number" ? opts.maxStringLength < 0 && opts.maxStringLength !== Infinity : opts.maxStringLength !== null)) {
        throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');
      }
      var customInspect = has(opts, "customInspect") ? opts.customInspect : true;
      if (typeof customInspect !== "boolean" && customInspect !== "symbol") {
        throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");
      }
      if (has(opts, "indent") && opts.indent !== null && opts.indent !== "	" && !(parseInt(opts.indent, 10) === opts.indent && opts.indent > 0)) {
        throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');
      }
      if (has(opts, "numericSeparator") && typeof opts.numericSeparator !== "boolean") {
        throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');
      }
      var numericSeparator = opts.numericSeparator;
      if (typeof obj === "undefined") {
        return "undefined";
      }
      if (obj === null) {
        return "null";
      }
      if (typeof obj === "boolean") {
        return obj ? "true" : "false";
      }
      if (typeof obj === "string") {
        return inspectString(obj, opts);
      }
      if (typeof obj === "number") {
        if (obj === 0) {
          return Infinity / obj > 0 ? "0" : "-0";
        }
        var str = String(obj);
        return numericSeparator ? addNumericSeparator(obj, str) : str;
      }
      if (typeof obj === "bigint") {
        var bigIntStr = String(obj) + "n";
        return numericSeparator ? addNumericSeparator(obj, bigIntStr) : bigIntStr;
      }
      var maxDepth = typeof opts.depth === "undefined" ? 5 : opts.depth;
      if (typeof depth === "undefined") {
        depth = 0;
      }
      if (depth >= maxDepth && maxDepth > 0 && typeof obj === "object") {
        return isArray(obj) ? "[Array]" : "[Object]";
      }
      var indent = getIndent(opts, depth);
      if (typeof seen === "undefined") {
        seen = [];
      } else if (indexOf(seen, obj) >= 0) {
        return "[Circular]";
      }
      function inspect(value, from, noIndent) {
        if (from) {
          seen = $arrSlice.call(seen);
          seen.push(from);
        }
        if (noIndent) {
          var newOpts = {
            depth: opts.depth
          };
          if (has(opts, "quoteStyle")) {
            newOpts.quoteStyle = opts.quoteStyle;
          }
          return inspect_(value, newOpts, depth + 1, seen);
        }
        return inspect_(value, opts, depth + 1, seen);
      }
      __name(inspect, "inspect");
      __name2(inspect, "inspect");
      if (typeof obj === "function" && !isRegExp(obj)) {
        var name = nameOf(obj);
        var keys = arrObjKeys(obj, inspect);
        return "[Function" + (name ? ": " + name : " (anonymous)") + "]" + (keys.length > 0 ? " { " + $join.call(keys, ", ") + " }" : "");
      }
      if (isSymbol(obj)) {
        var symString = hasShammedSymbols ? $replace.call(String(obj), /^(Symbol\(.*\))_[^)]*$/, "$1") : symToString.call(obj);
        return typeof obj === "object" && !hasShammedSymbols ? markBoxed(symString) : symString;
      }
      if (isElement(obj)) {
        var s3 = "<" + $toLowerCase.call(String(obj.nodeName));
        var attrs = obj.attributes || [];
        for (var i33 = 0; i33 < attrs.length; i33++) {
          s3 += " " + attrs[i33].name + "=" + wrapQuotes(quote(attrs[i33].value), "double", opts);
        }
        s3 += ">";
        if (obj.childNodes && obj.childNodes.length) {
          s3 += "...";
        }
        s3 += "</" + $toLowerCase.call(String(obj.nodeName)) + ">";
        return s3;
      }
      if (isArray(obj)) {
        if (obj.length === 0) {
          return "[]";
        }
        var xs = arrObjKeys(obj, inspect);
        if (indent && !singleLineValues(xs)) {
          return "[" + indentedJoin(xs, indent) + "]";
        }
        return "[ " + $join.call(xs, ", ") + " ]";
      }
      if (isError(obj)) {
        var parts = arrObjKeys(obj, inspect);
        if (!("cause" in Error.prototype) && "cause" in obj && !isEnumerable.call(obj, "cause")) {
          return "{ [" + String(obj) + "] " + $join.call($concat.call("[cause]: " + inspect(obj.cause), parts), ", ") + " }";
        }
        if (parts.length === 0) {
          return "[" + String(obj) + "]";
        }
        return "{ [" + String(obj) + "] " + $join.call(parts, ", ") + " }";
      }
      if (typeof obj === "object" && customInspect) {
        if (inspectSymbol && typeof obj[inspectSymbol] === "function" && utilInspect) {
          return utilInspect(obj, { depth: maxDepth - depth });
        } else if (customInspect !== "symbol" && typeof obj.inspect === "function") {
          return obj.inspect();
        }
      }
      if (isMap(obj)) {
        var mapParts = [];
        if (mapForEach) {
          mapForEach.call(obj, function(value, key) {
            mapParts.push(inspect(key, obj, true) + " => " + inspect(value, obj));
          });
        }
        return collectionOf("Map", mapSize.call(obj), mapParts, indent);
      }
      if (isSet(obj)) {
        var setParts = [];
        if (setForEach) {
          setForEach.call(obj, function(value) {
            setParts.push(inspect(value, obj));
          });
        }
        return collectionOf("Set", setSize.call(obj), setParts, indent);
      }
      if (isWeakMap(obj)) {
        return weakCollectionOf("WeakMap");
      }
      if (isWeakSet(obj)) {
        return weakCollectionOf("WeakSet");
      }
      if (isWeakRef(obj)) {
        return weakCollectionOf("WeakRef");
      }
      if (isNumber(obj)) {
        return markBoxed(inspect(Number(obj)));
      }
      if (isBigInt(obj)) {
        return markBoxed(inspect(bigIntValueOf.call(obj)));
      }
      if (isBoolean(obj)) {
        return markBoxed(booleanValueOf.call(obj));
      }
      if (isString(obj)) {
        return markBoxed(inspect(String(obj)));
      }
      if (typeof window !== "undefined" && obj === window) {
        return "{ [object Window] }";
      }
      if (typeof globalThis !== "undefined" && obj === globalThis || typeof global !== "undefined" && obj === global) {
        return "{ [object globalThis] }";
      }
      if (!isDate(obj) && !isRegExp(obj)) {
        var ys = arrObjKeys(obj, inspect);
        var isPlainObject = gPO ? gPO(obj) === Object.prototype : obj instanceof Object || obj.constructor === Object;
        var protoTag = obj instanceof Object ? "" : "null prototype";
        var stringTag = !isPlainObject && toStringTag && Object(obj) === obj && toStringTag in obj ? $slice.call(toStr(obj), 8, -1) : protoTag ? "Object" : "";
        var constructorTag = isPlainObject || typeof obj.constructor !== "function" ? "" : obj.constructor.name ? obj.constructor.name + " " : "";
        var tag = constructorTag + (stringTag || protoTag ? "[" + $join.call($concat.call([], stringTag || [], protoTag || []), ": ") + "] " : "");
        if (ys.length === 0) {
          return tag + "{}";
        }
        if (indent) {
          return tag + "{" + indentedJoin(ys, indent) + "}";
        }
        return tag + "{ " + $join.call(ys, ", ") + " }";
      }
      return String(obj);
    }, "inspect_"), "inspect_");
    function wrapQuotes(s3, defaultStyle, opts) {
      var quoteChar = (opts.quoteStyle || defaultStyle) === "double" ? '"' : "'";
      return quoteChar + s3 + quoteChar;
    }
    __name(wrapQuotes, "wrapQuotes");
    __name2(wrapQuotes, "wrapQuotes");
    function quote(s3) {
      return $replace.call(String(s3), /"/g, "&quot;");
    }
    __name(quote, "quote");
    __name2(quote, "quote");
    function isArray(obj) {
      return toStr(obj) === "[object Array]" && (!toStringTag || !(typeof obj === "object" && toStringTag in obj));
    }
    __name(isArray, "isArray");
    __name2(isArray, "isArray");
    function isDate(obj) {
      return toStr(obj) === "[object Date]" && (!toStringTag || !(typeof obj === "object" && toStringTag in obj));
    }
    __name(isDate, "isDate");
    __name2(isDate, "isDate");
    function isRegExp(obj) {
      return toStr(obj) === "[object RegExp]" && (!toStringTag || !(typeof obj === "object" && toStringTag in obj));
    }
    __name(isRegExp, "isRegExp");
    __name2(isRegExp, "isRegExp");
    function isError(obj) {
      return toStr(obj) === "[object Error]" && (!toStringTag || !(typeof obj === "object" && toStringTag in obj));
    }
    __name(isError, "isError");
    __name2(isError, "isError");
    function isString(obj) {
      return toStr(obj) === "[object String]" && (!toStringTag || !(typeof obj === "object" && toStringTag in obj));
    }
    __name(isString, "isString");
    __name2(isString, "isString");
    function isNumber(obj) {
      return toStr(obj) === "[object Number]" && (!toStringTag || !(typeof obj === "object" && toStringTag in obj));
    }
    __name(isNumber, "isNumber");
    __name2(isNumber, "isNumber");
    function isBoolean(obj) {
      return toStr(obj) === "[object Boolean]" && (!toStringTag || !(typeof obj === "object" && toStringTag in obj));
    }
    __name(isBoolean, "isBoolean");
    __name2(isBoolean, "isBoolean");
    function isSymbol(obj) {
      if (hasShammedSymbols) {
        return obj && typeof obj === "object" && obj instanceof Symbol;
      }
      if (typeof obj === "symbol") {
        return true;
      }
      if (!obj || typeof obj !== "object" || !symToString) {
        return false;
      }
      try {
        symToString.call(obj);
        return true;
      } catch (e2) {
      }
      return false;
    }
    __name(isSymbol, "isSymbol");
    __name2(isSymbol, "isSymbol");
    function isBigInt(obj) {
      if (!obj || typeof obj !== "object" || !bigIntValueOf) {
        return false;
      }
      try {
        bigIntValueOf.call(obj);
        return true;
      } catch (e2) {
      }
      return false;
    }
    __name(isBigInt, "isBigInt");
    __name2(isBigInt, "isBigInt");
    var hasOwn = Object.prototype.hasOwnProperty || function(key) {
      return key in this;
    };
    function has(obj, key) {
      return hasOwn.call(obj, key);
    }
    __name(has, "has");
    __name2(has, "has");
    function toStr(obj) {
      return objectToString.call(obj);
    }
    __name(toStr, "toStr");
    __name2(toStr, "toStr");
    function nameOf(f3) {
      if (f3.name) {
        return f3.name;
      }
      var m4 = $match.call(functionToString.call(f3), /^function\s*([\w$]+)/);
      if (m4) {
        return m4[1];
      }
      return null;
    }
    __name(nameOf, "nameOf");
    __name2(nameOf, "nameOf");
    function indexOf(xs, x22) {
      if (xs.indexOf) {
        return xs.indexOf(x22);
      }
      for (var i33 = 0, l3 = xs.length; i33 < l3; i33++) {
        if (xs[i33] === x22) {
          return i33;
        }
      }
      return -1;
    }
    __name(indexOf, "indexOf");
    __name2(indexOf, "indexOf");
    function isMap(x22) {
      if (!mapSize || !x22 || typeof x22 !== "object") {
        return false;
      }
      try {
        mapSize.call(x22);
        try {
          setSize.call(x22);
        } catch (s3) {
          return true;
        }
        return x22 instanceof Map;
      } catch (e2) {
      }
      return false;
    }
    __name(isMap, "isMap");
    __name2(isMap, "isMap");
    function isWeakMap(x22) {
      if (!weakMapHas || !x22 || typeof x22 !== "object") {
        return false;
      }
      try {
        weakMapHas.call(x22, weakMapHas);
        try {
          weakSetHas.call(x22, weakSetHas);
        } catch (s3) {
          return true;
        }
        return x22 instanceof WeakMap;
      } catch (e2) {
      }
      return false;
    }
    __name(isWeakMap, "isWeakMap");
    __name2(isWeakMap, "isWeakMap");
    function isWeakRef(x22) {
      if (!weakRefDeref || !x22 || typeof x22 !== "object") {
        return false;
      }
      try {
        weakRefDeref.call(x22);
        return true;
      } catch (e2) {
      }
      return false;
    }
    __name(isWeakRef, "isWeakRef");
    __name2(isWeakRef, "isWeakRef");
    function isSet(x22) {
      if (!setSize || !x22 || typeof x22 !== "object") {
        return false;
      }
      try {
        setSize.call(x22);
        try {
          mapSize.call(x22);
        } catch (m4) {
          return true;
        }
        return x22 instanceof Set;
      } catch (e2) {
      }
      return false;
    }
    __name(isSet, "isSet");
    __name2(isSet, "isSet");
    function isWeakSet(x22) {
      if (!weakSetHas || !x22 || typeof x22 !== "object") {
        return false;
      }
      try {
        weakSetHas.call(x22, weakSetHas);
        try {
          weakMapHas.call(x22, weakMapHas);
        } catch (s3) {
          return true;
        }
        return x22 instanceof WeakSet;
      } catch (e2) {
      }
      return false;
    }
    __name(isWeakSet, "isWeakSet");
    __name2(isWeakSet, "isWeakSet");
    function isElement(x22) {
      if (!x22 || typeof x22 !== "object") {
        return false;
      }
      if (typeof HTMLElement !== "undefined" && x22 instanceof HTMLElement) {
        return true;
      }
      return typeof x22.nodeName === "string" && typeof x22.getAttribute === "function";
    }
    __name(isElement, "isElement");
    __name2(isElement, "isElement");
    function inspectString(str, opts) {
      if (str.length > opts.maxStringLength) {
        var remaining = str.length - opts.maxStringLength;
        var trailer = "... " + remaining + " more character" + (remaining > 1 ? "s" : "");
        return inspectString($slice.call(str, 0, opts.maxStringLength), opts) + trailer;
      }
      var s3 = $replace.call($replace.call(str, /(['\\])/g, "\\$1"), /[\x00-\x1f]/g, lowbyte);
      return wrapQuotes(s3, "single", opts);
    }
    __name(inspectString, "inspectString");
    __name2(inspectString, "inspectString");
    function lowbyte(c4) {
      var n3 = c4.charCodeAt(0);
      var x22 = {
        8: "b",
        9: "t",
        10: "n",
        12: "f",
        13: "r"
      }[n3];
      if (x22) {
        return "\\" + x22;
      }
      return "\\x" + (n3 < 16 ? "0" : "") + $toUpperCase.call(n3.toString(16));
    }
    __name(lowbyte, "lowbyte");
    __name2(lowbyte, "lowbyte");
    function markBoxed(str) {
      return "Object(" + str + ")";
    }
    __name(markBoxed, "markBoxed");
    __name2(markBoxed, "markBoxed");
    function weakCollectionOf(type) {
      return type + " { ? }";
    }
    __name(weakCollectionOf, "weakCollectionOf");
    __name2(weakCollectionOf, "weakCollectionOf");
    function collectionOf(type, size, entries2, indent) {
      var joinedEntries = indent ? indentedJoin(entries2, indent) : $join.call(entries2, ", ");
      return type + " (" + size + ") {" + joinedEntries + "}";
    }
    __name(collectionOf, "collectionOf");
    __name2(collectionOf, "collectionOf");
    function singleLineValues(xs) {
      for (var i33 = 0; i33 < xs.length; i33++) {
        if (indexOf(xs[i33], "\n") >= 0) {
          return false;
        }
      }
      return true;
    }
    __name(singleLineValues, "singleLineValues");
    __name2(singleLineValues, "singleLineValues");
    function getIndent(opts, depth) {
      var baseIndent;
      if (opts.indent === "	") {
        baseIndent = "	";
      } else if (typeof opts.indent === "number" && opts.indent > 0) {
        baseIndent = $join.call(Array(opts.indent + 1), " ");
      } else {
        return null;
      }
      return {
        base: baseIndent,
        prev: $join.call(Array(depth + 1), baseIndent)
      };
    }
    __name(getIndent, "getIndent");
    __name2(getIndent, "getIndent");
    function indentedJoin(xs, indent) {
      if (xs.length === 0) {
        return "";
      }
      var lineJoiner = "\n" + indent.prev + indent.base;
      return lineJoiner + $join.call(xs, "," + lineJoiner) + "\n" + indent.prev;
    }
    __name(indentedJoin, "indentedJoin");
    __name2(indentedJoin, "indentedJoin");
    function arrObjKeys(obj, inspect) {
      var isArr = isArray(obj);
      var xs = [];
      if (isArr) {
        xs.length = obj.length;
        for (var i33 = 0; i33 < obj.length; i33++) {
          xs[i33] = has(obj, i33) ? inspect(obj[i33], obj) : "";
        }
      }
      var syms = typeof gOPS === "function" ? gOPS(obj) : [];
      var symMap;
      if (hasShammedSymbols) {
        symMap = {};
        for (var k2 = 0; k2 < syms.length; k2++) {
          symMap["$" + syms[k2]] = syms[k2];
        }
      }
      for (var key in obj) {
        if (!has(obj, key)) {
          continue;
        }
        if (isArr && String(Number(key)) === key && key < obj.length) {
          continue;
        }
        if (hasShammedSymbols && symMap["$" + key] instanceof Symbol) {
          continue;
        } else if ($test.call(/[^\w$]/, key)) {
          xs.push(inspect(key, obj) + ": " + inspect(obj[key], obj));
        } else {
          xs.push(key + ": " + inspect(obj[key], obj));
        }
      }
      if (typeof gOPS === "function") {
        for (var j2 = 0; j2 < syms.length; j2++) {
          if (isEnumerable.call(obj, syms[j2])) {
            xs.push("[" + inspect(syms[j2]) + "]: " + inspect(obj[syms[j2]], obj));
          }
        }
      }
      return xs;
    }
    __name(arrObjKeys, "arrObjKeys");
    __name2(arrObjKeys, "arrObjKeys");
  }
});
var require_side_channel = __commonJS({
  "../node_modules/side-channel/index.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var GetIntrinsic = require_get_intrinsic();
    var callBound = require_callBound();
    var inspect = require_object_inspect();
    var $TypeError = require_type();
    var $WeakMap = GetIntrinsic("%WeakMap%", true);
    var $Map = GetIntrinsic("%Map%", true);
    var $weakMapGet = callBound("WeakMap.prototype.get", true);
    var $weakMapSet = callBound("WeakMap.prototype.set", true);
    var $weakMapHas = callBound("WeakMap.prototype.has", true);
    var $mapGet = callBound("Map.prototype.get", true);
    var $mapSet = callBound("Map.prototype.set", true);
    var $mapHas = callBound("Map.prototype.has", true);
    var listGetNode = /* @__PURE__ */ __name2(function(list, key) {
      var prev = list;
      var curr;
      for (; (curr = prev.next) !== null; prev = curr) {
        if (curr.key === key) {
          prev.next = curr.next;
          curr.next = /** @type {NonNullable<typeof list.next>} */
          list.next;
          list.next = curr;
          return curr;
        }
      }
    }, "listGetNode");
    var listGet = /* @__PURE__ */ __name2(function(objects, key) {
      var node2 = listGetNode(objects, key);
      return node2 && node2.value;
    }, "listGet");
    var listSet = /* @__PURE__ */ __name2(function(objects, key, value) {
      var node2 = listGetNode(objects, key);
      if (node2) {
        node2.value = value;
      } else {
        objects.next = /** @type {import('.').ListNode<typeof value>} */
        {
          // eslint-disable-line no-param-reassign, no-extra-parens
          key,
          next: objects.next,
          value
        };
      }
    }, "listSet");
    var listHas = /* @__PURE__ */ __name2(function(objects, key) {
      return !!listGetNode(objects, key);
    }, "listHas");
    module.exports = /* @__PURE__ */ __name2(/* @__PURE__ */ __name(function getSideChannel() {
      var $wm;
      var $m;
      var $o;
      var channel = {
        assert: /* @__PURE__ */ __name2(function(key) {
          if (!channel.has(key)) {
            throw new $TypeError("Side channel does not contain " + inspect(key));
          }
        }, "assert"),
        get: /* @__PURE__ */ __name2(function(key) {
          if ($WeakMap && key && (typeof key === "object" || typeof key === "function")) {
            if ($wm) {
              return $weakMapGet($wm, key);
            }
          } else if ($Map) {
            if ($m) {
              return $mapGet($m, key);
            }
          } else {
            if ($o) {
              return listGet($o, key);
            }
          }
        }, "get"),
        has: /* @__PURE__ */ __name2(function(key) {
          if ($WeakMap && key && (typeof key === "object" || typeof key === "function")) {
            if ($wm) {
              return $weakMapHas($wm, key);
            }
          } else if ($Map) {
            if ($m) {
              return $mapHas($m, key);
            }
          } else {
            if ($o) {
              return listHas($o, key);
            }
          }
          return false;
        }, "has"),
        set: /* @__PURE__ */ __name2(function(key, value) {
          if ($WeakMap && key && (typeof key === "object" || typeof key === "function")) {
            if (!$wm) {
              $wm = new $WeakMap();
            }
            $weakMapSet($wm, key, value);
          } else if ($Map) {
            if (!$m) {
              $m = new $Map();
            }
            $mapSet($m, key, value);
          } else {
            if (!$o) {
              $o = { key: {}, next: null };
            }
            listSet($o, key, value);
          }
        }, "set")
      };
      return channel;
    }, "getSideChannel"), "getSideChannel");
  }
});
var require_formats = __commonJS({
  "../node_modules/qs/lib/formats.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var replace = String.prototype.replace;
    var percentTwenties = /%20/g;
    var Format = {
      RFC1738: "RFC1738",
      RFC3986: "RFC3986"
    };
    module.exports = {
      "default": Format.RFC3986,
      formatters: {
        RFC1738: /* @__PURE__ */ __name2(function(value) {
          return replace.call(value, percentTwenties, "+");
        }, "RFC1738"),
        RFC3986: /* @__PURE__ */ __name2(function(value) {
          return String(value);
        }, "RFC3986")
      },
      RFC1738: Format.RFC1738,
      RFC3986: Format.RFC3986
    };
  }
});
var require_utils = __commonJS({
  "../node_modules/qs/lib/utils.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var formats = require_formats();
    var has = Object.prototype.hasOwnProperty;
    var isArray = Array.isArray;
    var hexTable = function() {
      var array = [];
      for (var i33 = 0; i33 < 256; ++i33) {
        array.push("%" + ((i33 < 16 ? "0" : "") + i33.toString(16)).toUpperCase());
      }
      return array;
    }();
    var compactQueue = /* @__PURE__ */ __name2(/* @__PURE__ */ __name(function compactQueue2(queue) {
      while (queue.length > 1) {
        var item = queue.pop();
        var obj = item.obj[item.prop];
        if (isArray(obj)) {
          var compacted = [];
          for (var j2 = 0; j2 < obj.length; ++j2) {
            if (typeof obj[j2] !== "undefined") {
              compacted.push(obj[j2]);
            }
          }
          item.obj[item.prop] = compacted;
        }
      }
    }, "compactQueue2"), "compactQueue");
    var arrayToObject = /* @__PURE__ */ __name2(/* @__PURE__ */ __name(function arrayToObject2(source, options) {
      var obj = options && options.plainObjects ? /* @__PURE__ */ Object.create(null) : {};
      for (var i33 = 0; i33 < source.length; ++i33) {
        if (typeof source[i33] !== "undefined") {
          obj[i33] = source[i33];
        }
      }
      return obj;
    }, "arrayToObject2"), "arrayToObject");
    var merge = /* @__PURE__ */ __name2(/* @__PURE__ */ __name(function merge2(target, source, options) {
      if (!source) {
        return target;
      }
      if (typeof source !== "object") {
        if (isArray(target)) {
          target.push(source);
        } else if (target && typeof target === "object") {
          if (options && (options.plainObjects || options.allowPrototypes) || !has.call(Object.prototype, source)) {
            target[source] = true;
          }
        } else {
          return [target, source];
        }
        return target;
      }
      if (!target || typeof target !== "object") {
        return [target].concat(source);
      }
      var mergeTarget = target;
      if (isArray(target) && !isArray(source)) {
        mergeTarget = arrayToObject(target, options);
      }
      if (isArray(target) && isArray(source)) {
        source.forEach(function(item, i33) {
          if (has.call(target, i33)) {
            var targetItem = target[i33];
            if (targetItem && typeof targetItem === "object" && item && typeof item === "object") {
              target[i33] = merge2(targetItem, item, options);
            } else {
              target.push(item);
            }
          } else {
            target[i33] = item;
          }
        });
        return target;
      }
      return Object.keys(source).reduce(function(acc, key) {
        var value = source[key];
        if (has.call(acc, key)) {
          acc[key] = merge2(acc[key], value, options);
        } else {
          acc[key] = value;
        }
        return acc;
      }, mergeTarget);
    }, "merge2"), "merge");
    var assign = /* @__PURE__ */ __name2(/* @__PURE__ */ __name(function assignSingleSource(target, source) {
      return Object.keys(source).reduce(function(acc, key) {
        acc[key] = source[key];
        return acc;
      }, target);
    }, "assignSingleSource"), "assignSingleSource");
    var decode = /* @__PURE__ */ __name2(function(str, decoder, charset) {
      var strWithoutPlus = str.replace(/\+/g, " ");
      if (charset === "iso-8859-1") {
        return strWithoutPlus.replace(/%[0-9a-f]{2}/gi, unescape);
      }
      try {
        return decodeURIComponent(strWithoutPlus);
      } catch (e2) {
        return strWithoutPlus;
      }
    }, "decode");
    var limit = 1024;
    var encode = /* @__PURE__ */ __name2(/* @__PURE__ */ __name(function encode2(str, defaultEncoder, charset, kind, format) {
      if (str.length === 0) {
        return str;
      }
      var string = str;
      if (typeof str === "symbol") {
        string = Symbol.prototype.toString.call(str);
      } else if (typeof str !== "string") {
        string = String(str);
      }
      if (charset === "iso-8859-1") {
        return escape(string).replace(/%u[0-9a-f]{4}/gi, function($0) {
          return "%26%23" + parseInt($0.slice(2), 16) + "%3B";
        });
      }
      var out = "";
      for (var j2 = 0; j2 < string.length; j2 += limit) {
        var segment = string.length >= limit ? string.slice(j2, j2 + limit) : string;
        var arr = [];
        for (var i33 = 0; i33 < segment.length; ++i33) {
          var c4 = segment.charCodeAt(i33);
          if (c4 === 45 || c4 === 46 || c4 === 95 || c4 === 126 || c4 >= 48 && c4 <= 57 || c4 >= 65 && c4 <= 90 || c4 >= 97 && c4 <= 122 || format === formats.RFC1738 && (c4 === 40 || c4 === 41)) {
            arr[arr.length] = segment.charAt(i33);
            continue;
          }
          if (c4 < 128) {
            arr[arr.length] = hexTable[c4];
            continue;
          }
          if (c4 < 2048) {
            arr[arr.length] = hexTable[192 | c4 >> 6] + hexTable[128 | c4 & 63];
            continue;
          }
          if (c4 < 55296 || c4 >= 57344) {
            arr[arr.length] = hexTable[224 | c4 >> 12] + hexTable[128 | c4 >> 6 & 63] + hexTable[128 | c4 & 63];
            continue;
          }
          i33 += 1;
          c4 = 65536 + ((c4 & 1023) << 10 | segment.charCodeAt(i33) & 1023);
          arr[arr.length] = hexTable[240 | c4 >> 18] + hexTable[128 | c4 >> 12 & 63] + hexTable[128 | c4 >> 6 & 63] + hexTable[128 | c4 & 63];
        }
        out += arr.join("");
      }
      return out;
    }, "encode2"), "encode");
    var compact = /* @__PURE__ */ __name2(/* @__PURE__ */ __name(function compact2(value) {
      var queue = [{ obj: { o: value }, prop: "o" }];
      var refs = [];
      for (var i33 = 0; i33 < queue.length; ++i33) {
        var item = queue[i33];
        var obj = item.obj[item.prop];
        var keys = Object.keys(obj);
        for (var j2 = 0; j2 < keys.length; ++j2) {
          var key = keys[j2];
          var val = obj[key];
          if (typeof val === "object" && val !== null && refs.indexOf(val) === -1) {
            queue.push({ obj, prop: key });
            refs.push(val);
          }
        }
      }
      compactQueue(queue);
      return value;
    }, "compact2"), "compact");
    var isRegExp = /* @__PURE__ */ __name2(/* @__PURE__ */ __name(function isRegExp2(obj) {
      return Object.prototype.toString.call(obj) === "[object RegExp]";
    }, "isRegExp2"), "isRegExp");
    var isBuffer = /* @__PURE__ */ __name2(/* @__PURE__ */ __name(function isBuffer2(obj) {
      if (!obj || typeof obj !== "object") {
        return false;
      }
      return !!(obj.constructor && obj.constructor.isBuffer && obj.constructor.isBuffer(obj));
    }, "isBuffer2"), "isBuffer");
    var combine = /* @__PURE__ */ __name2(/* @__PURE__ */ __name(function combine2(a3, b2) {
      return [].concat(a3, b2);
    }, "combine2"), "combine");
    var maybeMap = /* @__PURE__ */ __name2(/* @__PURE__ */ __name(function maybeMap2(val, fn) {
      if (isArray(val)) {
        var mapped = [];
        for (var i33 = 0; i33 < val.length; i33 += 1) {
          mapped.push(fn(val[i33]));
        }
        return mapped;
      }
      return fn(val);
    }, "maybeMap2"), "maybeMap");
    module.exports = {
      arrayToObject,
      assign,
      combine,
      compact,
      decode,
      encode,
      isBuffer,
      isRegExp,
      maybeMap,
      merge
    };
  }
});
var require_stringify = __commonJS({
  "../node_modules/qs/lib/stringify.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var getSideChannel = require_side_channel();
    var utils = require_utils();
    var formats = require_formats();
    var has = Object.prototype.hasOwnProperty;
    var arrayPrefixGenerators = {
      brackets: /* @__PURE__ */ __name2(/* @__PURE__ */ __name(function brackets(prefix) {
        return prefix + "[]";
      }, "brackets"), "brackets"),
      comma: "comma",
      indices: /* @__PURE__ */ __name2(/* @__PURE__ */ __name(function indices(prefix, key) {
        return prefix + "[" + key + "]";
      }, "indices"), "indices"),
      repeat: /* @__PURE__ */ __name2(/* @__PURE__ */ __name(function repeat(prefix) {
        return prefix;
      }, "repeat"), "repeat")
    };
    var isArray = Array.isArray;
    var push = Array.prototype.push;
    var pushToArray = /* @__PURE__ */ __name2(function(arr, valueOrArray) {
      push.apply(arr, isArray(valueOrArray) ? valueOrArray : [valueOrArray]);
    }, "pushToArray");
    var toISO = Date.prototype.toISOString;
    var defaultFormat = formats["default"];
    var defaults = {
      addQueryPrefix: false,
      allowDots: false,
      allowEmptyArrays: false,
      arrayFormat: "indices",
      charset: "utf-8",
      charsetSentinel: false,
      delimiter: "&",
      encode: true,
      encodeDotInKeys: false,
      encoder: utils.encode,
      encodeValuesOnly: false,
      format: defaultFormat,
      formatter: formats.formatters[defaultFormat],
      // deprecated
      indices: false,
      serializeDate: /* @__PURE__ */ __name2(/* @__PURE__ */ __name(function serializeDate(date) {
        return toISO.call(date);
      }, "serializeDate"), "serializeDate"),
      skipNulls: false,
      strictNullHandling: false
    };
    var isNonNullishPrimitive = /* @__PURE__ */ __name2(/* @__PURE__ */ __name(function isNonNullishPrimitive2(v3) {
      return typeof v3 === "string" || typeof v3 === "number" || typeof v3 === "boolean" || typeof v3 === "symbol" || typeof v3 === "bigint";
    }, "isNonNullishPrimitive2"), "isNonNullishPrimitive");
    var sentinel = {};
    var stringify2 = /* @__PURE__ */ __name2(/* @__PURE__ */ __name(function stringify3(object, prefix, generateArrayPrefix, commaRoundTrip, allowEmptyArrays, strictNullHandling, skipNulls, encodeDotInKeys, encoder, filter, sort, allowDots, serializeDate, format, formatter, encodeValuesOnly, charset, sideChannel) {
      var obj = object;
      var tmpSc = sideChannel;
      var step = 0;
      var findFlag = false;
      while ((tmpSc = tmpSc.get(sentinel)) !== void 0 && !findFlag) {
        var pos = tmpSc.get(object);
        step += 1;
        if (typeof pos !== "undefined") {
          if (pos === step) {
            throw new RangeError("Cyclic object value");
          } else {
            findFlag = true;
          }
        }
        if (typeof tmpSc.get(sentinel) === "undefined") {
          step = 0;
        }
      }
      if (typeof filter === "function") {
        obj = filter(prefix, obj);
      } else if (obj instanceof Date) {
        obj = serializeDate(obj);
      } else if (generateArrayPrefix === "comma" && isArray(obj)) {
        obj = utils.maybeMap(obj, function(value2) {
          if (value2 instanceof Date) {
            return serializeDate(value2);
          }
          return value2;
        });
      }
      if (obj === null) {
        if (strictNullHandling) {
          return encoder && !encodeValuesOnly ? encoder(prefix, defaults.encoder, charset, "key", format) : prefix;
        }
        obj = "";
      }
      if (isNonNullishPrimitive(obj) || utils.isBuffer(obj)) {
        if (encoder) {
          var keyValue = encodeValuesOnly ? prefix : encoder(prefix, defaults.encoder, charset, "key", format);
          return [formatter(keyValue) + "=" + formatter(encoder(obj, defaults.encoder, charset, "value", format))];
        }
        return [formatter(prefix) + "=" + formatter(String(obj))];
      }
      var values = [];
      if (typeof obj === "undefined") {
        return values;
      }
      var objKeys;
      if (generateArrayPrefix === "comma" && isArray(obj)) {
        if (encodeValuesOnly && encoder) {
          obj = utils.maybeMap(obj, encoder);
        }
        objKeys = [{ value: obj.length > 0 ? obj.join(",") || null : void 0 }];
      } else if (isArray(filter)) {
        objKeys = filter;
      } else {
        var keys = Object.keys(obj);
        objKeys = sort ? keys.sort(sort) : keys;
      }
      var encodedPrefix = encodeDotInKeys ? prefix.replace(/\./g, "%2E") : prefix;
      var adjustedPrefix = commaRoundTrip && isArray(obj) && obj.length === 1 ? encodedPrefix + "[]" : encodedPrefix;
      if (allowEmptyArrays && isArray(obj) && obj.length === 0) {
        return adjustedPrefix + "[]";
      }
      for (var j2 = 0; j2 < objKeys.length; ++j2) {
        var key = objKeys[j2];
        var value = typeof key === "object" && typeof key.value !== "undefined" ? key.value : obj[key];
        if (skipNulls && value === null) {
          continue;
        }
        var encodedKey = allowDots && encodeDotInKeys ? key.replace(/\./g, "%2E") : key;
        var keyPrefix = isArray(obj) ? typeof generateArrayPrefix === "function" ? generateArrayPrefix(adjustedPrefix, encodedKey) : adjustedPrefix : adjustedPrefix + (allowDots ? "." + encodedKey : "[" + encodedKey + "]");
        sideChannel.set(object, step);
        var valueSideChannel = getSideChannel();
        valueSideChannel.set(sentinel, sideChannel);
        pushToArray(values, stringify3(
          value,
          keyPrefix,
          generateArrayPrefix,
          commaRoundTrip,
          allowEmptyArrays,
          strictNullHandling,
          skipNulls,
          encodeDotInKeys,
          generateArrayPrefix === "comma" && encodeValuesOnly && isArray(obj) ? null : encoder,
          filter,
          sort,
          allowDots,
          serializeDate,
          format,
          formatter,
          encodeValuesOnly,
          charset,
          valueSideChannel
        ));
      }
      return values;
    }, "stringify3"), "stringify");
    var normalizeStringifyOptions = /* @__PURE__ */ __name2(/* @__PURE__ */ __name(function normalizeStringifyOptions2(opts) {
      if (!opts) {
        return defaults;
      }
      if (typeof opts.allowEmptyArrays !== "undefined" && typeof opts.allowEmptyArrays !== "boolean") {
        throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");
      }
      if (typeof opts.encodeDotInKeys !== "undefined" && typeof opts.encodeDotInKeys !== "boolean") {
        throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");
      }
      if (opts.encoder !== null && typeof opts.encoder !== "undefined" && typeof opts.encoder !== "function") {
        throw new TypeError("Encoder has to be a function.");
      }
      var charset = opts.charset || defaults.charset;
      if (typeof opts.charset !== "undefined" && opts.charset !== "utf-8" && opts.charset !== "iso-8859-1") {
        throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");
      }
      var format = formats["default"];
      if (typeof opts.format !== "undefined") {
        if (!has.call(formats.formatters, opts.format)) {
          throw new TypeError("Unknown format option provided.");
        }
        format = opts.format;
      }
      var formatter = formats.formatters[format];
      var filter = defaults.filter;
      if (typeof opts.filter === "function" || isArray(opts.filter)) {
        filter = opts.filter;
      }
      var arrayFormat;
      if (opts.arrayFormat in arrayPrefixGenerators) {
        arrayFormat = opts.arrayFormat;
      } else if ("indices" in opts) {
        arrayFormat = opts.indices ? "indices" : "repeat";
      } else {
        arrayFormat = defaults.arrayFormat;
      }
      if ("commaRoundTrip" in opts && typeof opts.commaRoundTrip !== "boolean") {
        throw new TypeError("`commaRoundTrip` must be a boolean, or absent");
      }
      var allowDots = typeof opts.allowDots === "undefined" ? opts.encodeDotInKeys === true ? true : defaults.allowDots : !!opts.allowDots;
      return {
        addQueryPrefix: typeof opts.addQueryPrefix === "boolean" ? opts.addQueryPrefix : defaults.addQueryPrefix,
        allowDots,
        allowEmptyArrays: typeof opts.allowEmptyArrays === "boolean" ? !!opts.allowEmptyArrays : defaults.allowEmptyArrays,
        arrayFormat,
        charset,
        charsetSentinel: typeof opts.charsetSentinel === "boolean" ? opts.charsetSentinel : defaults.charsetSentinel,
        commaRoundTrip: opts.commaRoundTrip,
        delimiter: typeof opts.delimiter === "undefined" ? defaults.delimiter : opts.delimiter,
        encode: typeof opts.encode === "boolean" ? opts.encode : defaults.encode,
        encodeDotInKeys: typeof opts.encodeDotInKeys === "boolean" ? opts.encodeDotInKeys : defaults.encodeDotInKeys,
        encoder: typeof opts.encoder === "function" ? opts.encoder : defaults.encoder,
        encodeValuesOnly: typeof opts.encodeValuesOnly === "boolean" ? opts.encodeValuesOnly : defaults.encodeValuesOnly,
        filter,
        format,
        formatter,
        serializeDate: typeof opts.serializeDate === "function" ? opts.serializeDate : defaults.serializeDate,
        skipNulls: typeof opts.skipNulls === "boolean" ? opts.skipNulls : defaults.skipNulls,
        sort: typeof opts.sort === "function" ? opts.sort : null,
        strictNullHandling: typeof opts.strictNullHandling === "boolean" ? opts.strictNullHandling : defaults.strictNullHandling
      };
    }, "normalizeStringifyOptions2"), "normalizeStringifyOptions");
    module.exports = function(object, opts) {
      var obj = object;
      var options = normalizeStringifyOptions(opts);
      var objKeys;
      var filter;
      if (typeof options.filter === "function") {
        filter = options.filter;
        obj = filter("", obj);
      } else if (isArray(options.filter)) {
        filter = options.filter;
        objKeys = filter;
      }
      var keys = [];
      if (typeof obj !== "object" || obj === null) {
        return "";
      }
      var generateArrayPrefix = arrayPrefixGenerators[options.arrayFormat];
      var commaRoundTrip = generateArrayPrefix === "comma" && options.commaRoundTrip;
      if (!objKeys) {
        objKeys = Object.keys(obj);
      }
      if (options.sort) {
        objKeys.sort(options.sort);
      }
      var sideChannel = getSideChannel();
      for (var i33 = 0; i33 < objKeys.length; ++i33) {
        var key = objKeys[i33];
        if (options.skipNulls && obj[key] === null) {
          continue;
        }
        pushToArray(keys, stringify2(
          obj[key],
          key,
          generateArrayPrefix,
          commaRoundTrip,
          options.allowEmptyArrays,
          options.strictNullHandling,
          options.skipNulls,
          options.encodeDotInKeys,
          options.encode ? options.encoder : null,
          options.filter,
          options.sort,
          options.allowDots,
          options.serializeDate,
          options.format,
          options.formatter,
          options.encodeValuesOnly,
          options.charset,
          sideChannel
        ));
      }
      var joined = keys.join(options.delimiter);
      var prefix = options.addQueryPrefix === true ? "?" : "";
      if (options.charsetSentinel) {
        if (options.charset === "iso-8859-1") {
          prefix += "utf8=%26%2310003%3B&";
        } else {
          prefix += "utf8=%E2%9C%93&";
        }
      }
      return joined.length > 0 ? prefix + joined : "";
    };
  }
});
var require_parse = __commonJS({
  "../node_modules/qs/lib/parse.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var utils = require_utils();
    var has = Object.prototype.hasOwnProperty;
    var isArray = Array.isArray;
    var defaults = {
      allowDots: false,
      allowEmptyArrays: false,
      allowPrototypes: false,
      allowSparse: false,
      arrayLimit: 20,
      charset: "utf-8",
      charsetSentinel: false,
      comma: false,
      decodeDotInKeys: false,
      decoder: utils.decode,
      delimiter: "&",
      depth: 5,
      duplicates: "combine",
      ignoreQueryPrefix: false,
      interpretNumericEntities: false,
      parameterLimit: 1e3,
      parseArrays: true,
      plainObjects: false,
      strictDepth: false,
      strictNullHandling: false
    };
    var interpretNumericEntities = /* @__PURE__ */ __name2(function(str) {
      return str.replace(/&#(\d+);/g, function($0, numberStr) {
        return String.fromCharCode(parseInt(numberStr, 10));
      });
    }, "interpretNumericEntities");
    var parseArrayValue = /* @__PURE__ */ __name2(function(val, options) {
      if (val && typeof val === "string" && options.comma && val.indexOf(",") > -1) {
        return val.split(",");
      }
      return val;
    }, "parseArrayValue");
    var isoSentinel = "utf8=%26%2310003%3B";
    var charsetSentinel = "utf8=%E2%9C%93";
    var parseValues = /* @__PURE__ */ __name2(/* @__PURE__ */ __name(function parseQueryStringValues(str, options) {
      var obj = { __proto__: null };
      var cleanStr = options.ignoreQueryPrefix ? str.replace(/^\?/, "") : str;
      cleanStr = cleanStr.replace(/%5B/gi, "[").replace(/%5D/gi, "]");
      var limit = options.parameterLimit === Infinity ? void 0 : options.parameterLimit;
      var parts = cleanStr.split(options.delimiter, limit);
      var skipIndex = -1;
      var i33;
      var charset = options.charset;
      if (options.charsetSentinel) {
        for (i33 = 0; i33 < parts.length; ++i33) {
          if (parts[i33].indexOf("utf8=") === 0) {
            if (parts[i33] === charsetSentinel) {
              charset = "utf-8";
            } else if (parts[i33] === isoSentinel) {
              charset = "iso-8859-1";
            }
            skipIndex = i33;
            i33 = parts.length;
          }
        }
      }
      for (i33 = 0; i33 < parts.length; ++i33) {
        if (i33 === skipIndex) {
          continue;
        }
        var part = parts[i33];
        var bracketEqualsPos = part.indexOf("]=");
        var pos = bracketEqualsPos === -1 ? part.indexOf("=") : bracketEqualsPos + 1;
        var key, val;
        if (pos === -1) {
          key = options.decoder(part, defaults.decoder, charset, "key");
          val = options.strictNullHandling ? null : "";
        } else {
          key = options.decoder(part.slice(0, pos), defaults.decoder, charset, "key");
          val = utils.maybeMap(
            parseArrayValue(part.slice(pos + 1), options),
            function(encodedVal) {
              return options.decoder(encodedVal, defaults.decoder, charset, "value");
            }
          );
        }
        if (val && options.interpretNumericEntities && charset === "iso-8859-1") {
          val = interpretNumericEntities(val);
        }
        if (part.indexOf("[]=") > -1) {
          val = isArray(val) ? [val] : val;
        }
        var existing = has.call(obj, key);
        if (existing && options.duplicates === "combine") {
          obj[key] = utils.combine(obj[key], val);
        } else if (!existing || options.duplicates === "last") {
          obj[key] = val;
        }
      }
      return obj;
    }, "parseQueryStringValues"), "parseQueryStringValues");
    var parseObject = /* @__PURE__ */ __name2(function(chain, val, options, valuesParsed) {
      var leaf = valuesParsed ? val : parseArrayValue(val, options);
      for (var i33 = chain.length - 1; i33 >= 0; --i33) {
        var obj;
        var root = chain[i33];
        if (root === "[]" && options.parseArrays) {
          obj = options.allowEmptyArrays && (leaf === "" || options.strictNullHandling && leaf === null) ? [] : [].concat(leaf);
        } else {
          obj = options.plainObjects ? /* @__PURE__ */ Object.create(null) : {};
          var cleanRoot = root.charAt(0) === "[" && root.charAt(root.length - 1) === "]" ? root.slice(1, -1) : root;
          var decodedRoot = options.decodeDotInKeys ? cleanRoot.replace(/%2E/g, ".") : cleanRoot;
          var index2 = parseInt(decodedRoot, 10);
          if (!options.parseArrays && decodedRoot === "") {
            obj = { 0: leaf };
          } else if (!isNaN(index2) && root !== decodedRoot && String(index2) === decodedRoot && index2 >= 0 && (options.parseArrays && index2 <= options.arrayLimit)) {
            obj = [];
            obj[index2] = leaf;
          } else if (decodedRoot !== "__proto__") {
            obj[decodedRoot] = leaf;
          }
        }
        leaf = obj;
      }
      return leaf;
    }, "parseObject");
    var parseKeys = /* @__PURE__ */ __name2(/* @__PURE__ */ __name(function parseQueryStringKeys(givenKey, val, options, valuesParsed) {
      if (!givenKey) {
        return;
      }
      var key = options.allowDots ? givenKey.replace(/\.([^.[]+)/g, "[$1]") : givenKey;
      var brackets = /(\[[^[\]]*])/;
      var child = /(\[[^[\]]*])/g;
      var segment = options.depth > 0 && brackets.exec(key);
      var parent = segment ? key.slice(0, segment.index) : key;
      var keys = [];
      if (parent) {
        if (!options.plainObjects && has.call(Object.prototype, parent)) {
          if (!options.allowPrototypes) {
            return;
          }
        }
        keys.push(parent);
      }
      var i33 = 0;
      while (options.depth > 0 && (segment = child.exec(key)) !== null && i33 < options.depth) {
        i33 += 1;
        if (!options.plainObjects && has.call(Object.prototype, segment[1].slice(1, -1))) {
          if (!options.allowPrototypes) {
            return;
          }
        }
        keys.push(segment[1]);
      }
      if (segment) {
        if (options.strictDepth === true) {
          throw new RangeError("Input depth exceeded depth option of " + options.depth + " and strictDepth is true");
        }
        keys.push("[" + key.slice(segment.index) + "]");
      }
      return parseObject(keys, val, options, valuesParsed);
    }, "parseQueryStringKeys"), "parseQueryStringKeys");
    var normalizeParseOptions = /* @__PURE__ */ __name2(/* @__PURE__ */ __name(function normalizeParseOptions2(opts) {
      if (!opts) {
        return defaults;
      }
      if (typeof opts.allowEmptyArrays !== "undefined" && typeof opts.allowEmptyArrays !== "boolean") {
        throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");
      }
      if (typeof opts.decodeDotInKeys !== "undefined" && typeof opts.decodeDotInKeys !== "boolean") {
        throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");
      }
      if (opts.decoder !== null && typeof opts.decoder !== "undefined" && typeof opts.decoder !== "function") {
        throw new TypeError("Decoder has to be a function.");
      }
      if (typeof opts.charset !== "undefined" && opts.charset !== "utf-8" && opts.charset !== "iso-8859-1") {
        throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");
      }
      var charset = typeof opts.charset === "undefined" ? defaults.charset : opts.charset;
      var duplicates = typeof opts.duplicates === "undefined" ? defaults.duplicates : opts.duplicates;
      if (duplicates !== "combine" && duplicates !== "first" && duplicates !== "last") {
        throw new TypeError("The duplicates option must be either combine, first, or last");
      }
      var allowDots = typeof opts.allowDots === "undefined" ? opts.decodeDotInKeys === true ? true : defaults.allowDots : !!opts.allowDots;
      return {
        allowDots,
        allowEmptyArrays: typeof opts.allowEmptyArrays === "boolean" ? !!opts.allowEmptyArrays : defaults.allowEmptyArrays,
        allowPrototypes: typeof opts.allowPrototypes === "boolean" ? opts.allowPrototypes : defaults.allowPrototypes,
        allowSparse: typeof opts.allowSparse === "boolean" ? opts.allowSparse : defaults.allowSparse,
        arrayLimit: typeof opts.arrayLimit === "number" ? opts.arrayLimit : defaults.arrayLimit,
        charset,
        charsetSentinel: typeof opts.charsetSentinel === "boolean" ? opts.charsetSentinel : defaults.charsetSentinel,
        comma: typeof opts.comma === "boolean" ? opts.comma : defaults.comma,
        decodeDotInKeys: typeof opts.decodeDotInKeys === "boolean" ? opts.decodeDotInKeys : defaults.decodeDotInKeys,
        decoder: typeof opts.decoder === "function" ? opts.decoder : defaults.decoder,
        delimiter: typeof opts.delimiter === "string" || utils.isRegExp(opts.delimiter) ? opts.delimiter : defaults.delimiter,
        // eslint-disable-next-line no-implicit-coercion, no-extra-parens
        depth: typeof opts.depth === "number" || opts.depth === false ? +opts.depth : defaults.depth,
        duplicates,
        ignoreQueryPrefix: opts.ignoreQueryPrefix === true,
        interpretNumericEntities: typeof opts.interpretNumericEntities === "boolean" ? opts.interpretNumericEntities : defaults.interpretNumericEntities,
        parameterLimit: typeof opts.parameterLimit === "number" ? opts.parameterLimit : defaults.parameterLimit,
        parseArrays: opts.parseArrays !== false,
        plainObjects: typeof opts.plainObjects === "boolean" ? opts.plainObjects : defaults.plainObjects,
        strictDepth: typeof opts.strictDepth === "boolean" ? !!opts.strictDepth : defaults.strictDepth,
        strictNullHandling: typeof opts.strictNullHandling === "boolean" ? opts.strictNullHandling : defaults.strictNullHandling
      };
    }, "normalizeParseOptions2"), "normalizeParseOptions");
    module.exports = function(str, opts) {
      var options = normalizeParseOptions(opts);
      if (str === "" || str === null || typeof str === "undefined") {
        return options.plainObjects ? /* @__PURE__ */ Object.create(null) : {};
      }
      var tempObj = typeof str === "string" ? parseValues(str, options) : str;
      var obj = options.plainObjects ? /* @__PURE__ */ Object.create(null) : {};
      var keys = Object.keys(tempObj);
      for (var i33 = 0; i33 < keys.length; ++i33) {
        var key = keys[i33];
        var newObj = parseKeys(key, tempObj[key], options, typeof str === "string");
        obj = utils.merge(obj, newObj, options);
      }
      if (options.allowSparse === true) {
        return obj;
      }
      return utils.compact(obj);
    };
  }
});
var require_lib = __commonJS({
  "../node_modules/qs/lib/index.js"(exports, module) {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    var stringify2 = require_stringify();
    var parse2 = require_parse();
    var formats = require_formats();
    module.exports = {
      formats,
      parse: parse2,
      stringify: stringify2
    };
  }
});
function isOptionsHash(o3) {
  return o3 && typeof o3 === "object" && OPTIONS_KEYS.some((prop) => Object.prototype.hasOwnProperty.call(o3, prop));
}
__name(isOptionsHash, "isOptionsHash");
function queryStringifyRequestData(data, apiMode) {
  return qs.stringify(data, {
    serializeDate: /* @__PURE__ */ __name2((d2) => Math.floor(d2.getTime() / 1e3).toString(), "serializeDate"),
    arrayFormat: apiMode == "v2" ? "repeat" : "indices"
  }).replace(/%5B/g, "[").replace(/%5D/g, "]");
}
__name(queryStringifyRequestData, "queryStringifyRequestData");
function isValidEncodeUriComponentType(value) {
  return ["number", "string", "boolean"].includes(typeof value);
}
__name(isValidEncodeUriComponentType, "isValidEncodeUriComponentType");
function extractUrlParams(path) {
  const params = path.match(/\{\w+\}/g);
  if (!params) {
    return [];
  }
  return params.map((param) => param.replace(/[{}]/g, ""));
}
__name(extractUrlParams, "extractUrlParams");
function getDataFromArgs(args) {
  if (!Array.isArray(args) || !args[0] || typeof args[0] !== "object") {
    return {};
  }
  if (!isOptionsHash(args[0])) {
    return args.shift();
  }
  const argKeys = Object.keys(args[0]);
  const optionKeysInArgs = argKeys.filter((key) => OPTIONS_KEYS.includes(key));
  if (optionKeysInArgs.length > 0 && optionKeysInArgs.length !== argKeys.length) {
    emitWarning(`Options found in arguments (${optionKeysInArgs.join(", ")}). Did you mean to pass an options object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.`);
  }
  return {};
}
__name(getDataFromArgs, "getDataFromArgs");
function getOptionsFromArgs(args) {
  const opts = {
    host: null,
    headers: {},
    settings: {},
    streaming: false
  };
  if (args.length > 0) {
    const arg = args[args.length - 1];
    if (typeof arg === "string") {
      opts.authenticator = createApiKeyAuthenticator(args.pop());
    } else if (isOptionsHash(arg)) {
      const params = Object.assign({}, args.pop());
      const extraKeys = Object.keys(params).filter((key) => !OPTIONS_KEYS.includes(key));
      if (extraKeys.length) {
        emitWarning(`Invalid options found (${extraKeys.join(", ")}); ignoring.`);
      }
      if (params.apiKey) {
        opts.authenticator = createApiKeyAuthenticator(params.apiKey);
      }
      if (params.idempotencyKey) {
        opts.headers["Idempotency-Key"] = params.idempotencyKey;
      }
      if (params.stripeAccount) {
        opts.headers["Stripe-Account"] = params.stripeAccount;
      }
      if (params.stripeContext) {
        if (opts.headers["Stripe-Account"]) {
          throw new Error("Can't specify both stripeAccount and stripeContext.");
        }
        opts.headers["Stripe-Context"] = params.stripeContext;
      }
      if (params.apiVersion) {
        opts.headers["Stripe-Version"] = params.apiVersion;
      }
      if (Number.isInteger(params.maxNetworkRetries)) {
        opts.settings.maxNetworkRetries = params.maxNetworkRetries;
      }
      if (Number.isInteger(params.timeout)) {
        opts.settings.timeout = params.timeout;
      }
      if (params.host) {
        opts.host = params.host;
      }
      if (params.authenticator) {
        if (params.apiKey) {
          throw new Error("Can't specify both apiKey and authenticator.");
        }
        if (typeof params.authenticator !== "function") {
          throw new Error("The authenticator must be a function receiving a request as the first parameter.");
        }
        opts.authenticator = params.authenticator;
      }
      if (params.additionalHeaders) {
        opts.headers = params.additionalHeaders;
      }
      if (params.streaming) {
        opts.streaming = true;
      }
    }
  }
  return opts;
}
__name(getOptionsFromArgs, "getOptionsFromArgs");
function protoExtend(sub) {
  const Super = this;
  const Constructor = Object.prototype.hasOwnProperty.call(sub, "constructor") ? sub.constructor : function(...args) {
    Super.apply(this, args);
  };
  Object.assign(Constructor, Super);
  Constructor.prototype = Object.create(Super.prototype);
  Object.assign(Constructor.prototype, sub);
  return Constructor;
}
__name(protoExtend, "protoExtend");
function removeNullish(obj) {
  if (typeof obj !== "object") {
    throw new Error("Argument must be an object");
  }
  return Object.keys(obj).reduce((result, key) => {
    if (obj[key] != null) {
      result[key] = obj[key];
    }
    return result;
  }, {});
}
__name(removeNullish, "removeNullish");
function normalizeHeaders(obj) {
  if (!(obj && typeof obj === "object")) {
    return obj;
  }
  return Object.keys(obj).reduce((result, header) => {
    result[normalizeHeader(header)] = obj[header];
    return result;
  }, {});
}
__name(normalizeHeaders, "normalizeHeaders");
function normalizeHeader(header) {
  return header.split("-").map((text3) => text3.charAt(0).toUpperCase() + text3.substr(1).toLowerCase()).join("-");
}
__name(normalizeHeader, "normalizeHeader");
function callbackifyPromiseWithTimeout(promise, callback) {
  if (callback) {
    return promise.then((res) => {
      setTimeout(() => {
        callback(null, res);
      }, 0);
    }, (err2) => {
      setTimeout(() => {
        callback(err2, null);
      }, 0);
    });
  }
  return promise;
}
__name(callbackifyPromiseWithTimeout, "callbackifyPromiseWithTimeout");
function pascalToCamelCase(name) {
  if (name === "OAuth") {
    return "oauth";
  } else {
    return name[0].toLowerCase() + name.substring(1);
  }
}
__name(pascalToCamelCase, "pascalToCamelCase");
function emitWarning(warning) {
  if (typeof process.emitWarning !== "function") {
    return console.warn(`Stripe: ${warning}`);
  }
  return process.emitWarning(warning, "Stripe");
}
__name(emitWarning, "emitWarning");
function isObject(obj) {
  const type = typeof obj;
  return (type === "function" || type === "object") && !!obj;
}
__name(isObject, "isObject");
function flattenAndStringify(data) {
  const result = {};
  const step = /* @__PURE__ */ __name2((obj, prevKey) => {
    Object.entries(obj).forEach(([key, value]) => {
      const newKey = prevKey ? `${prevKey}[${key}]` : key;
      if (isObject(value)) {
        if (!(value instanceof Uint8Array) && !Object.prototype.hasOwnProperty.call(value, "data")) {
          return step(value, newKey);
        } else {
          result[newKey] = value;
        }
      } else {
        result[newKey] = String(value);
      }
    });
  }, "step");
  step(data, null);
  return result;
}
__name(flattenAndStringify, "flattenAndStringify");
function validateInteger(name, n3, defaultVal) {
  if (!Number.isInteger(n3)) {
    if (defaultVal !== void 0) {
      return defaultVal;
    } else {
      throw new Error(`${name} must be an integer`);
    }
  }
  return n3;
}
__name(validateInteger, "validateInteger");
function determineProcessUserAgentProperties() {
  return typeof process === "undefined" ? {} : {
    lang_version: process.version,
    platform: process.platform
  };
}
__name(determineProcessUserAgentProperties, "determineProcessUserAgentProperties");
function createApiKeyAuthenticator(apiKey) {
  const authenticator = /* @__PURE__ */ __name2((request) => {
    request.headers.Authorization = "Bearer " + apiKey;
    return Promise.resolve();
  }, "authenticator");
  authenticator._apiKey = apiKey;
  return authenticator;
}
__name(createApiKeyAuthenticator, "createApiKeyAuthenticator");
function dateTimeReplacer(key, value) {
  if (this[key] instanceof Date) {
    return Math.floor(this[key].getTime() / 1e3).toString();
  }
  return value;
}
__name(dateTimeReplacer, "dateTimeReplacer");
function jsonStringifyRequestData(data) {
  return JSON.stringify(data, dateTimeReplacer);
}
__name(jsonStringifyRequestData, "jsonStringifyRequestData");
function getAPIMode(path) {
  if (!path) {
    return "v1";
  }
  return path.startsWith("/v2") ? "v2" : "v1";
}
__name(getAPIMode, "getAPIMode");
function parseHttpHeaderAsString(header) {
  if (Array.isArray(header)) {
    return header.join(", ");
  }
  return String(header);
}
__name(parseHttpHeaderAsString, "parseHttpHeaderAsString");
function parseHttpHeaderAsNumber(header) {
  const number = Array.isArray(header) ? header[0] : header;
  return Number(number);
}
__name(parseHttpHeaderAsNumber, "parseHttpHeaderAsNumber");
function parseHeadersForFetch(headers) {
  return Object.entries(headers).map(([key, value]) => {
    return [key, parseHttpHeaderAsString(value)];
  });
}
__name(parseHeadersForFetch, "parseHeadersForFetch");
var qs;
var OPTIONS_KEYS;
var makeURLInterpolator;
var init_utils3 = __esm({
  "../node_modules/stripe/esm/utils.js"() {
    init_functionsRoutes_0_8044054200943971();
    qs = __toESM(require_lib(), 1);
    OPTIONS_KEYS = [
      "apiKey",
      "idempotencyKey",
      "stripeAccount",
      "apiVersion",
      "maxNetworkRetries",
      "timeout",
      "host",
      "authenticator",
      "stripeContext",
      "additionalHeaders",
      "streaming"
    ];
    __name2(isOptionsHash, "isOptionsHash");
    __name2(queryStringifyRequestData, "queryStringifyRequestData");
    makeURLInterpolator = /* @__PURE__ */ (() => {
      const rc = {
        "\n": "\\n",
        '"': '\\"',
        "\u2028": "\\u2028",
        "\u2029": "\\u2029"
      };
      return (str) => {
        const cleanString = str.replace(/["\n\r\u2028\u2029]/g, ($0) => rc[$0]);
        return (outputs) => {
          return cleanString.replace(/\{([\s\S]+?)\}/g, ($0, $1) => {
            const output = outputs[$1];
            if (isValidEncodeUriComponentType(output))
              return encodeURIComponent(output);
            return "";
          });
        };
      };
    })();
    __name2(isValidEncodeUriComponentType, "isValidEncodeUriComponentType");
    __name2(extractUrlParams, "extractUrlParams");
    __name2(getDataFromArgs, "getDataFromArgs");
    __name2(getOptionsFromArgs, "getOptionsFromArgs");
    __name2(protoExtend, "protoExtend");
    __name2(removeNullish, "removeNullish");
    __name2(normalizeHeaders, "normalizeHeaders");
    __name2(normalizeHeader, "normalizeHeader");
    __name2(callbackifyPromiseWithTimeout, "callbackifyPromiseWithTimeout");
    __name2(pascalToCamelCase, "pascalToCamelCase");
    __name2(emitWarning, "emitWarning");
    __name2(isObject, "isObject");
    __name2(flattenAndStringify, "flattenAndStringify");
    __name2(validateInteger, "validateInteger");
    __name2(determineProcessUserAgentProperties, "determineProcessUserAgentProperties");
    __name2(createApiKeyAuthenticator, "createApiKeyAuthenticator");
    __name2(dateTimeReplacer, "dateTimeReplacer");
    __name2(jsonStringifyRequestData, "jsonStringifyRequestData");
    __name2(getAPIMode, "getAPIMode");
    __name2(parseHttpHeaderAsString, "parseHttpHeaderAsString");
    __name2(parseHttpHeaderAsNumber, "parseHttpHeaderAsNumber");
    __name2(parseHeadersForFetch, "parseHeadersForFetch");
  }
});
var HttpClient;
var HttpClientResponse;
var init_HttpClient = __esm({
  "../node_modules/stripe/esm/net/HttpClient.js"() {
    init_functionsRoutes_0_8044054200943971();
    HttpClient = class _HttpClient {
      static {
        __name(this, "_HttpClient");
      }
      static {
        __name2(this, "HttpClient");
      }
      /** The client name used for diagnostics. */
      getClientName() {
        throw new Error("getClientName not implemented.");
      }
      makeRequest(host, port, path, method, headers, requestData, protocol, timeout) {
        throw new Error("makeRequest not implemented.");
      }
      /** Helper to make a consistent timeout error across implementations. */
      static makeTimeoutError() {
        const timeoutErr = new TypeError(_HttpClient.TIMEOUT_ERROR_CODE);
        timeoutErr.code = _HttpClient.TIMEOUT_ERROR_CODE;
        return timeoutErr;
      }
    };
    HttpClient.CONNECTION_CLOSED_ERROR_CODES = ["ECONNRESET", "EPIPE"];
    HttpClient.TIMEOUT_ERROR_CODE = "ETIMEDOUT";
    HttpClientResponse = class {
      static {
        __name(this, "HttpClientResponse");
      }
      static {
        __name2(this, "HttpClientResponse");
      }
      constructor(statusCode, headers) {
        this._statusCode = statusCode;
        this._headers = headers;
      }
      getStatusCode() {
        return this._statusCode;
      }
      getHeaders() {
        return this._headers;
      }
      getRawResponse() {
        throw new Error("getRawResponse not implemented.");
      }
      toStream(streamCompleteCallback) {
        throw new Error("toStream not implemented.");
      }
      toJSON() {
        throw new Error("toJSON not implemented.");
      }
    };
  }
});
var FetchHttpClient;
var FetchHttpClientResponse;
var init_FetchHttpClient = __esm({
  "../node_modules/stripe/esm/net/FetchHttpClient.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_utils3();
    init_HttpClient();
    FetchHttpClient = class _FetchHttpClient extends HttpClient {
      static {
        __name(this, "_FetchHttpClient");
      }
      static {
        __name2(this, "FetchHttpClient");
      }
      constructor(fetchFn) {
        super();
        if (!fetchFn) {
          if (!globalThis.fetch) {
            throw new Error("fetch() function not provided and is not defined in the global scope. You must provide a fetch implementation.");
          }
          fetchFn = globalThis.fetch;
        }
        if (globalThis.AbortController) {
          this._fetchFn = _FetchHttpClient.makeFetchWithAbortTimeout(fetchFn);
        } else {
          this._fetchFn = _FetchHttpClient.makeFetchWithRaceTimeout(fetchFn);
        }
      }
      static makeFetchWithRaceTimeout(fetchFn) {
        return (url, init, timeout) => {
          let pendingTimeoutId;
          const timeoutPromise = new Promise((_3, reject) => {
            pendingTimeoutId = setTimeout(() => {
              pendingTimeoutId = null;
              reject(HttpClient.makeTimeoutError());
            }, timeout);
          });
          const fetchPromise = fetchFn(url, init);
          return Promise.race([fetchPromise, timeoutPromise]).finally(() => {
            if (pendingTimeoutId) {
              clearTimeout(pendingTimeoutId);
            }
          });
        };
      }
      static makeFetchWithAbortTimeout(fetchFn) {
        return async (url, init, timeout) => {
          const abort = new AbortController();
          let timeoutId = setTimeout(() => {
            timeoutId = null;
            abort.abort(HttpClient.makeTimeoutError());
          }, timeout);
          try {
            return await fetchFn(url, Object.assign(Object.assign({}, init), { signal: abort.signal }));
          } catch (err2) {
            if (err2.name === "AbortError") {
              throw HttpClient.makeTimeoutError();
            } else {
              throw err2;
            }
          } finally {
            if (timeoutId) {
              clearTimeout(timeoutId);
            }
          }
        };
      }
      /** @override. */
      getClientName() {
        return "fetch";
      }
      async makeRequest(host, port, path, method, headers, requestData, protocol, timeout) {
        const isInsecureConnection = protocol === "http";
        const url = new URL(path, `${isInsecureConnection ? "http" : "https"}://${host}`);
        url.port = port;
        const methodHasPayload = method == "POST" || method == "PUT" || method == "PATCH";
        const body = requestData || (methodHasPayload ? "" : void 0);
        const res = await this._fetchFn(url.toString(), {
          method,
          headers: parseHeadersForFetch(headers),
          body: typeof body === "object" ? JSON.stringify(body) : body
        }, timeout);
        return new FetchHttpClientResponse(res);
      }
    };
    FetchHttpClientResponse = class _FetchHttpClientResponse extends HttpClientResponse {
      static {
        __name(this, "_FetchHttpClientResponse");
      }
      static {
        __name2(this, "FetchHttpClientResponse");
      }
      constructor(res) {
        super(res.status, _FetchHttpClientResponse._transformHeadersToObject(res.headers));
        this._res = res;
      }
      getRawResponse() {
        return this._res;
      }
      toStream(streamCompleteCallback) {
        streamCompleteCallback();
        return this._res.body;
      }
      toJSON() {
        return this._res.json();
      }
      static _transformHeadersToObject(headers) {
        const headersObj = {};
        for (const entry of headers) {
          if (!Array.isArray(entry) || entry.length != 2) {
            throw new Error("Response objects produced by the fetch function given to FetchHttpClient do not have an iterable headers map. Response#headers should be an iterable object.");
          }
          headersObj[entry[0]] = entry[1];
        }
        return headersObj;
      }
    };
  }
});
var CryptoProvider;
var CryptoProviderOnlySupportsAsyncError;
var init_CryptoProvider = __esm({
  "../node_modules/stripe/esm/crypto/CryptoProvider.js"() {
    init_functionsRoutes_0_8044054200943971();
    CryptoProvider = class {
      static {
        __name(this, "CryptoProvider");
      }
      static {
        __name2(this, "CryptoProvider");
      }
      /**
       * Computes a SHA-256 HMAC given a secret and a payload (encoded in UTF-8).
       * The output HMAC should be encoded in hexadecimal.
       *
       * Sample values for implementations:
       * - computeHMACSignature('', 'test_secret') => 'f7f9bd47fb987337b5796fdc1fdb9ba221d0d5396814bfcaf9521f43fd8927fd'
       * - computeHMACSignature('\ud83d\ude00', 'test_secret') => '837da296d05c4fe31f61d5d7ead035099d9585a5bcde87de952012a78f0b0c43
       */
      computeHMACSignature(payload, secret) {
        throw new Error("computeHMACSignature not implemented.");
      }
      /**
       * Asynchronous version of `computeHMACSignature`. Some implementations may
       * only allow support async signature computation.
       *
       * Computes a SHA-256 HMAC given a secret and a payload (encoded in UTF-8).
       * The output HMAC should be encoded in hexadecimal.
       *
       * Sample values for implementations:
       * - computeHMACSignature('', 'test_secret') => 'f7f9bd47fb987337b5796fdc1fdb9ba221d0d5396814bfcaf9521f43fd8927fd'
       * - computeHMACSignature('\ud83d\ude00', 'test_secret') => '837da296d05c4fe31f61d5d7ead035099d9585a5bcde87de952012a78f0b0c43
       */
      computeHMACSignatureAsync(payload, secret) {
        throw new Error("computeHMACSignatureAsync not implemented.");
      }
      /**
       * Computes a SHA-256 hash of the data.
       */
      computeSHA256Async(data) {
        throw new Error("computeSHA256 not implemented.");
      }
    };
    CryptoProviderOnlySupportsAsyncError = class extends Error {
      static {
        __name(this, "CryptoProviderOnlySupportsAsyncError");
      }
      static {
        __name2(this, "CryptoProviderOnlySupportsAsyncError");
      }
    };
  }
});
var SubtleCryptoProvider;
var byteHexMapping;
var init_SubtleCryptoProvider = __esm({
  "../node_modules/stripe/esm/crypto/SubtleCryptoProvider.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_CryptoProvider();
    SubtleCryptoProvider = class extends CryptoProvider {
      static {
        __name(this, "SubtleCryptoProvider");
      }
      static {
        __name2(this, "SubtleCryptoProvider");
      }
      constructor(subtleCrypto) {
        super();
        this.subtleCrypto = subtleCrypto || crypto.subtle;
      }
      /** @override */
      computeHMACSignature(payload, secret) {
        throw new CryptoProviderOnlySupportsAsyncError("SubtleCryptoProvider cannot be used in a synchronous context.");
      }
      /** @override */
      async computeHMACSignatureAsync(payload, secret) {
        const encoder = new TextEncoder();
        const key = await this.subtleCrypto.importKey("raw", encoder.encode(secret), {
          name: "HMAC",
          hash: { name: "SHA-256" }
        }, false, ["sign"]);
        const signatureBuffer = await this.subtleCrypto.sign("hmac", key, encoder.encode(payload));
        const signatureBytes = new Uint8Array(signatureBuffer);
        const signatureHexCodes = new Array(signatureBytes.length);
        for (let i33 = 0; i33 < signatureBytes.length; i33++) {
          signatureHexCodes[i33] = byteHexMapping[signatureBytes[i33]];
        }
        return signatureHexCodes.join("");
      }
      /** @override */
      async computeSHA256Async(data) {
        return new Uint8Array(await this.subtleCrypto.digest("SHA-256", data));
      }
    };
    byteHexMapping = new Array(256);
    for (let i33 = 0; i33 < byteHexMapping.length; i33++) {
      byteHexMapping[i33] = i33.toString(16).padStart(2, "0");
    }
  }
});
var PlatformFunctions;
var init_PlatformFunctions = __esm({
  "../node_modules/stripe/esm/platform/PlatformFunctions.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_FetchHttpClient();
    init_SubtleCryptoProvider();
    PlatformFunctions = class {
      static {
        __name(this, "PlatformFunctions");
      }
      static {
        __name2(this, "PlatformFunctions");
      }
      constructor() {
        this._fetchFn = null;
        this._agent = null;
      }
      /**
       * Gets uname with Node's built-in `exec` function, if available.
       */
      getUname() {
        throw new Error("getUname not implemented.");
      }
      /**
       * Generates a v4 UUID. See https://stackoverflow.com/a/2117523
       */
      uuid4() {
        return "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g, (c4) => {
          const r2 = Math.random() * 16 | 0;
          const v3 = c4 === "x" ? r2 : r2 & 3 | 8;
          return v3.toString(16);
        });
      }
      /**
       * Compares strings in constant time.
       */
      secureCompare(a3, b2) {
        if (a3.length !== b2.length) {
          return false;
        }
        const len = a3.length;
        let result = 0;
        for (let i33 = 0; i33 < len; ++i33) {
          result |= a3.charCodeAt(i33) ^ b2.charCodeAt(i33);
        }
        return result === 0;
      }
      /**
       * Creates an event emitter.
       */
      createEmitter() {
        throw new Error("createEmitter not implemented.");
      }
      /**
       * Checks if the request data is a stream. If so, read the entire stream
       * to a buffer and return the buffer.
       */
      tryBufferData(data) {
        throw new Error("tryBufferData not implemented.");
      }
      /**
       * Creates an HTTP client which uses the Node `http` and `https` packages
       * to issue requests.
       */
      createNodeHttpClient(agent) {
        throw new Error("createNodeHttpClient not implemented.");
      }
      /**
       * Creates an HTTP client for issuing Stripe API requests which uses the Web
       * Fetch API.
       *
       * A fetch function can optionally be passed in as a parameter. If none is
       * passed, will default to the default `fetch` function in the global scope.
       */
      createFetchHttpClient(fetchFn) {
        return new FetchHttpClient(fetchFn);
      }
      /**
       * Creates an HTTP client using runtime-specific APIs.
       */
      createDefaultHttpClient() {
        throw new Error("createDefaultHttpClient not implemented.");
      }
      /**
       * Creates a CryptoProvider which uses the Node `crypto` package for its computations.
       */
      createNodeCryptoProvider() {
        throw new Error("createNodeCryptoProvider not implemented.");
      }
      /**
       * Creates a CryptoProvider which uses the SubtleCrypto interface of the Web Crypto API.
       */
      createSubtleCryptoProvider(subtleCrypto) {
        return new SubtleCryptoProvider(subtleCrypto);
      }
      createDefaultCryptoProvider() {
        throw new Error("createDefaultCryptoProvider not implemented.");
      }
    };
  }
});
var _StripeEvent;
var StripeEmitter;
var init_StripeEmitter = __esm({
  "../node_modules/stripe/esm/StripeEmitter.js"() {
    init_functionsRoutes_0_8044054200943971();
    _StripeEvent = class extends Event {
      static {
        __name(this, "_StripeEvent");
      }
      static {
        __name2(this, "_StripeEvent");
      }
      constructor(eventName, data) {
        super(eventName);
        this.data = data;
      }
    };
    StripeEmitter = class {
      static {
        __name(this, "StripeEmitter");
      }
      static {
        __name2(this, "StripeEmitter");
      }
      constructor() {
        this.eventTarget = new EventTarget();
        this.listenerMapping = /* @__PURE__ */ new Map();
      }
      on(eventName, listener) {
        const listenerWrapper = /* @__PURE__ */ __name2((event) => {
          listener(event.data);
        }, "listenerWrapper");
        this.listenerMapping.set(listener, listenerWrapper);
        return this.eventTarget.addEventListener(eventName, listenerWrapper);
      }
      removeListener(eventName, listener) {
        const listenerWrapper = this.listenerMapping.get(listener);
        this.listenerMapping.delete(listener);
        return this.eventTarget.removeEventListener(eventName, listenerWrapper);
      }
      once(eventName, listener) {
        const listenerWrapper = /* @__PURE__ */ __name2((event) => {
          listener(event.data);
        }, "listenerWrapper");
        this.listenerMapping.set(listener, listenerWrapper);
        return this.eventTarget.addEventListener(eventName, listenerWrapper, {
          once: true
        });
      }
      emit(eventName, data) {
        return this.eventTarget.dispatchEvent(new _StripeEvent(eventName, data));
      }
    };
  }
});
var WebPlatformFunctions;
var init_WebPlatformFunctions = __esm({
  "../node_modules/stripe/esm/platform/WebPlatformFunctions.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_PlatformFunctions();
    init_StripeEmitter();
    WebPlatformFunctions = class extends PlatformFunctions {
      static {
        __name(this, "WebPlatformFunctions");
      }
      static {
        __name2(this, "WebPlatformFunctions");
      }
      /** @override */
      getUname() {
        return Promise.resolve(null);
      }
      /** @override */
      createEmitter() {
        return new StripeEmitter();
      }
      /** @override */
      tryBufferData(data) {
        if (data.file.data instanceof ReadableStream) {
          throw new Error("Uploading a file as a stream is not supported in non-Node environments. Please open or upvote an issue at github.com/stripe/stripe-node if you use this, detailing your use-case.");
        }
        return Promise.resolve(data);
      }
      /** @override */
      createNodeHttpClient() {
        throw new Error("Stripe: `createNodeHttpClient()` is not available in non-Node environments. Please use `createFetchHttpClient()` instead.");
      }
      /** @override */
      createDefaultHttpClient() {
        return super.createFetchHttpClient();
      }
      /** @override */
      createNodeCryptoProvider() {
        throw new Error("Stripe: `createNodeCryptoProvider()` is not available in non-Node environments. Please use `createSubtleCryptoProvider()` instead.");
      }
      /** @override */
      createDefaultCryptoProvider() {
        return this.createSubtleCryptoProvider();
      }
    };
  }
});
var Error_exports = {};
__export(Error_exports, {
  StripeAPIError: /* @__PURE__ */ __name(() => StripeAPIError, "StripeAPIError"),
  StripeAuthenticationError: /* @__PURE__ */ __name(() => StripeAuthenticationError, "StripeAuthenticationError"),
  StripeCardError: /* @__PURE__ */ __name(() => StripeCardError, "StripeCardError"),
  StripeConnectionError: /* @__PURE__ */ __name(() => StripeConnectionError, "StripeConnectionError"),
  StripeError: /* @__PURE__ */ __name(() => StripeError, "StripeError"),
  StripeIdempotencyError: /* @__PURE__ */ __name(() => StripeIdempotencyError, "StripeIdempotencyError"),
  StripeInvalidGrantError: /* @__PURE__ */ __name(() => StripeInvalidGrantError, "StripeInvalidGrantError"),
  StripeInvalidRequestError: /* @__PURE__ */ __name(() => StripeInvalidRequestError, "StripeInvalidRequestError"),
  StripePermissionError: /* @__PURE__ */ __name(() => StripePermissionError, "StripePermissionError"),
  StripeRateLimitError: /* @__PURE__ */ __name(() => StripeRateLimitError, "StripeRateLimitError"),
  StripeSignatureVerificationError: /* @__PURE__ */ __name(() => StripeSignatureVerificationError, "StripeSignatureVerificationError"),
  StripeUnknownError: /* @__PURE__ */ __name(() => StripeUnknownError, "StripeUnknownError"),
  TemporarySessionExpiredError: /* @__PURE__ */ __name(() => TemporarySessionExpiredError, "TemporarySessionExpiredError"),
  generateV1Error: /* @__PURE__ */ __name(() => generateV1Error, "generateV1Error"),
  generateV2Error: /* @__PURE__ */ __name(() => generateV2Error, "generateV2Error")
});
var generateV1Error;
var generateV2Error;
var StripeError;
var StripeCardError;
var StripeInvalidRequestError;
var StripeAPIError;
var StripeAuthenticationError;
var StripePermissionError;
var StripeRateLimitError;
var StripeConnectionError;
var StripeSignatureVerificationError;
var StripeIdempotencyError;
var StripeInvalidGrantError;
var StripeUnknownError;
var TemporarySessionExpiredError;
var init_Error = __esm({
  "../node_modules/stripe/esm/Error.js"() {
    init_functionsRoutes_0_8044054200943971();
    generateV1Error = /* @__PURE__ */ __name2((rawStripeError) => {
      switch (rawStripeError.type) {
        case "card_error":
          return new StripeCardError(rawStripeError);
        case "invalid_request_error":
          return new StripeInvalidRequestError(rawStripeError);
        case "api_error":
          return new StripeAPIError(rawStripeError);
        case "authentication_error":
          return new StripeAuthenticationError(rawStripeError);
        case "rate_limit_error":
          return new StripeRateLimitError(rawStripeError);
        case "idempotency_error":
          return new StripeIdempotencyError(rawStripeError);
        case "invalid_grant":
          return new StripeInvalidGrantError(rawStripeError);
        default:
          return new StripeUnknownError(rawStripeError);
      }
    }, "generateV1Error");
    generateV2Error = /* @__PURE__ */ __name2((rawStripeError) => {
      switch (rawStripeError.type) {
        // switchCases: The beginning of the section generated from our OpenAPI spec
        case "temporary_session_expired":
          return new TemporarySessionExpiredError(rawStripeError);
      }
      switch (rawStripeError.code) {
        case "invalid_fields":
          return new StripeInvalidRequestError(rawStripeError);
      }
      return generateV1Error(rawStripeError);
    }, "generateV2Error");
    StripeError = class extends Error {
      static {
        __name(this, "StripeError");
      }
      static {
        __name2(this, "StripeError");
      }
      constructor(raw = {}, type = null) {
        var _a2;
        super(raw.message);
        this.type = type || this.constructor.name;
        this.raw = raw;
        this.rawType = raw.type;
        this.code = raw.code;
        this.doc_url = raw.doc_url;
        this.param = raw.param;
        this.detail = raw.detail;
        this.headers = raw.headers;
        this.requestId = raw.requestId;
        this.statusCode = raw.statusCode;
        this.message = (_a2 = raw.message) !== null && _a2 !== void 0 ? _a2 : "";
        this.userMessage = raw.user_message;
        this.charge = raw.charge;
        this.decline_code = raw.decline_code;
        this.payment_intent = raw.payment_intent;
        this.payment_method = raw.payment_method;
        this.payment_method_type = raw.payment_method_type;
        this.setup_intent = raw.setup_intent;
        this.source = raw.source;
      }
    };
    StripeError.generate = generateV1Error;
    StripeCardError = class extends StripeError {
      static {
        __name(this, "StripeCardError");
      }
      static {
        __name2(this, "StripeCardError");
      }
      constructor(raw = {}) {
        super(raw, "StripeCardError");
      }
    };
    StripeInvalidRequestError = class extends StripeError {
      static {
        __name(this, "StripeInvalidRequestError");
      }
      static {
        __name2(this, "StripeInvalidRequestError");
      }
      constructor(raw = {}) {
        super(raw, "StripeInvalidRequestError");
      }
    };
    StripeAPIError = class extends StripeError {
      static {
        __name(this, "StripeAPIError");
      }
      static {
        __name2(this, "StripeAPIError");
      }
      constructor(raw = {}) {
        super(raw, "StripeAPIError");
      }
    };
    StripeAuthenticationError = class extends StripeError {
      static {
        __name(this, "StripeAuthenticationError");
      }
      static {
        __name2(this, "StripeAuthenticationError");
      }
      constructor(raw = {}) {
        super(raw, "StripeAuthenticationError");
      }
    };
    StripePermissionError = class extends StripeError {
      static {
        __name(this, "StripePermissionError");
      }
      static {
        __name2(this, "StripePermissionError");
      }
      constructor(raw = {}) {
        super(raw, "StripePermissionError");
      }
    };
    StripeRateLimitError = class extends StripeError {
      static {
        __name(this, "StripeRateLimitError");
      }
      static {
        __name2(this, "StripeRateLimitError");
      }
      constructor(raw = {}) {
        super(raw, "StripeRateLimitError");
      }
    };
    StripeConnectionError = class extends StripeError {
      static {
        __name(this, "StripeConnectionError");
      }
      static {
        __name2(this, "StripeConnectionError");
      }
      constructor(raw = {}) {
        super(raw, "StripeConnectionError");
      }
    };
    StripeSignatureVerificationError = class extends StripeError {
      static {
        __name(this, "StripeSignatureVerificationError");
      }
      static {
        __name2(this, "StripeSignatureVerificationError");
      }
      constructor(header, payload, raw = {}) {
        super(raw, "StripeSignatureVerificationError");
        this.header = header;
        this.payload = payload;
      }
    };
    StripeIdempotencyError = class extends StripeError {
      static {
        __name(this, "StripeIdempotencyError");
      }
      static {
        __name2(this, "StripeIdempotencyError");
      }
      constructor(raw = {}) {
        super(raw, "StripeIdempotencyError");
      }
    };
    StripeInvalidGrantError = class extends StripeError {
      static {
        __name(this, "StripeInvalidGrantError");
      }
      static {
        __name2(this, "StripeInvalidGrantError");
      }
      constructor(raw = {}) {
        super(raw, "StripeInvalidGrantError");
      }
    };
    StripeUnknownError = class extends StripeError {
      static {
        __name(this, "StripeUnknownError");
      }
      static {
        __name2(this, "StripeUnknownError");
      }
      constructor(raw = {}) {
        super(raw, "StripeUnknownError");
      }
    };
    TemporarySessionExpiredError = class extends StripeError {
      static {
        __name(this, "TemporarySessionExpiredError");
      }
      static {
        __name2(this, "TemporarySessionExpiredError");
      }
      constructor(rawStripeError = {}) {
        super(rawStripeError, "TemporarySessionExpiredError");
      }
    };
  }
});
var MAX_RETRY_AFTER_WAIT;
var RequestSender;
var init_RequestSender = __esm({
  "../node_modules/stripe/esm/RequestSender.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_Error();
    init_HttpClient();
    init_utils3();
    MAX_RETRY_AFTER_WAIT = 60;
    RequestSender = class _RequestSender {
      static {
        __name(this, "_RequestSender");
      }
      static {
        __name2(this, "RequestSender");
      }
      constructor(stripe, maxBufferedRequestMetric) {
        this._stripe = stripe;
        this._maxBufferedRequestMetric = maxBufferedRequestMetric;
      }
      _addHeadersDirectlyToObject(obj, headers) {
        obj.requestId = headers["request-id"];
        obj.stripeAccount = obj.stripeAccount || headers["stripe-account"];
        obj.apiVersion = obj.apiVersion || headers["stripe-version"];
        obj.idempotencyKey = obj.idempotencyKey || headers["idempotency-key"];
      }
      _makeResponseEvent(requestEvent, statusCode, headers) {
        const requestEndTime = Date.now();
        const requestDurationMs = requestEndTime - requestEvent.request_start_time;
        return removeNullish({
          api_version: headers["stripe-version"],
          account: headers["stripe-account"],
          idempotency_key: headers["idempotency-key"],
          method: requestEvent.method,
          path: requestEvent.path,
          status: statusCode,
          request_id: this._getRequestId(headers),
          elapsed: requestDurationMs,
          request_start_time: requestEvent.request_start_time,
          request_end_time: requestEndTime
        });
      }
      _getRequestId(headers) {
        return headers["request-id"];
      }
      /**
       * Used by methods with spec.streaming === true. For these methods, we do not
       * buffer successful responses into memory or do parse them into stripe
       * objects, we delegate that all of that to the user and pass back the raw
       * http.Response object to the callback.
       *
       * (Unsuccessful responses shouldn't make it here, they should
       * still be buffered/parsed and handled by _jsonResponseHandler -- see
       * makeRequest)
       */
      _streamingResponseHandler(requestEvent, usage, callback) {
        return (res) => {
          const headers = res.getHeaders();
          const streamCompleteCallback = /* @__PURE__ */ __name2(() => {
            const responseEvent = this._makeResponseEvent(requestEvent, res.getStatusCode(), headers);
            this._stripe._emitter.emit("response", responseEvent);
            this._recordRequestMetrics(this._getRequestId(headers), responseEvent.elapsed, usage);
          }, "streamCompleteCallback");
          const stream = res.toStream(streamCompleteCallback);
          this._addHeadersDirectlyToObject(stream, headers);
          return callback(null, stream);
        };
      }
      /**
       * Default handler for Stripe responses. Buffers the response into memory,
       * parses the JSON and returns it (i.e. passes it to the callback) if there
       * is no "error" field. Otherwise constructs/passes an appropriate Error.
       */
      _jsonResponseHandler(requestEvent, apiMode, usage, callback) {
        return (res) => {
          const headers = res.getHeaders();
          const requestId = this._getRequestId(headers);
          const statusCode = res.getStatusCode();
          const responseEvent = this._makeResponseEvent(requestEvent, statusCode, headers);
          this._stripe._emitter.emit("response", responseEvent);
          res.toJSON().then((jsonResponse2) => {
            if (jsonResponse2.error) {
              let err2;
              if (typeof jsonResponse2.error === "string") {
                jsonResponse2.error = {
                  type: jsonResponse2.error,
                  message: jsonResponse2.error_description
                };
              }
              jsonResponse2.error.headers = headers;
              jsonResponse2.error.statusCode = statusCode;
              jsonResponse2.error.requestId = requestId;
              if (statusCode === 401) {
                err2 = new StripeAuthenticationError(jsonResponse2.error);
              } else if (statusCode === 403) {
                err2 = new StripePermissionError(jsonResponse2.error);
              } else if (statusCode === 429) {
                err2 = new StripeRateLimitError(jsonResponse2.error);
              } else if (apiMode === "v2") {
                err2 = generateV2Error(jsonResponse2.error);
              } else {
                err2 = generateV1Error(jsonResponse2.error);
              }
              throw err2;
            }
            return jsonResponse2;
          }, (e2) => {
            throw new StripeAPIError({
              message: "Invalid JSON received from the Stripe API",
              exception: e2,
              requestId: headers["request-id"]
            });
          }).then((jsonResponse2) => {
            this._recordRequestMetrics(requestId, responseEvent.elapsed, usage);
            const rawResponse = res.getRawResponse();
            this._addHeadersDirectlyToObject(rawResponse, headers);
            Object.defineProperty(jsonResponse2, "lastResponse", {
              enumerable: false,
              writable: false,
              value: rawResponse
            });
            callback(null, jsonResponse2);
          }, (e2) => callback(e2, null));
        };
      }
      static _generateConnectionErrorMessage(requestRetries) {
        return `An error occurred with our connection to Stripe.${requestRetries > 0 ? ` Request was retried ${requestRetries} times.` : ""}`;
      }
      // For more on when and how to retry API requests, see https://stripe.com/docs/error-handling#safely-retrying-requests-with-idempotency
      static _shouldRetry(res, numRetries, maxRetries, error) {
        if (error && numRetries === 0 && HttpClient.CONNECTION_CLOSED_ERROR_CODES.includes(error.code)) {
          return true;
        }
        if (numRetries >= maxRetries) {
          return false;
        }
        if (!res) {
          return true;
        }
        if (res.getHeaders()["stripe-should-retry"] === "false") {
          return false;
        }
        if (res.getHeaders()["stripe-should-retry"] === "true") {
          return true;
        }
        if (res.getStatusCode() === 409) {
          return true;
        }
        if (res.getStatusCode() >= 500) {
          return true;
        }
        return false;
      }
      _getSleepTimeInMS(numRetries, retryAfter = null) {
        const initialNetworkRetryDelay = this._stripe.getInitialNetworkRetryDelay();
        const maxNetworkRetryDelay = this._stripe.getMaxNetworkRetryDelay();
        let sleepSeconds = Math.min(initialNetworkRetryDelay * Math.pow(2, numRetries - 1), maxNetworkRetryDelay);
        sleepSeconds *= 0.5 * (1 + Math.random());
        sleepSeconds = Math.max(initialNetworkRetryDelay, sleepSeconds);
        if (Number.isInteger(retryAfter) && retryAfter <= MAX_RETRY_AFTER_WAIT) {
          sleepSeconds = Math.max(sleepSeconds, retryAfter);
        }
        return sleepSeconds * 1e3;
      }
      // Max retries can be set on a per request basis. Favor those over the global setting
      _getMaxNetworkRetries(settings3 = {}) {
        return settings3.maxNetworkRetries !== void 0 && Number.isInteger(settings3.maxNetworkRetries) ? settings3.maxNetworkRetries : this._stripe.getMaxNetworkRetries();
      }
      _defaultIdempotencyKey(method, settings3, apiMode) {
        const maxRetries = this._getMaxNetworkRetries(settings3);
        const genKey = /* @__PURE__ */ __name2(() => `stripe-node-retry-${this._stripe._platformFunctions.uuid4()}`, "genKey");
        if (apiMode === "v2") {
          if (method === "POST" || method === "DELETE") {
            return genKey();
          }
        } else if (apiMode === "v1") {
          if (method === "POST" && maxRetries > 0) {
            return genKey();
          }
        }
        return null;
      }
      _makeHeaders({ contentType, contentLength, apiVersion, clientUserAgent, method, userSuppliedHeaders, userSuppliedSettings, stripeAccount, stripeContext, apiMode }) {
        const defaultHeaders = {
          Accept: "application/json",
          "Content-Type": contentType,
          "User-Agent": this._getUserAgentString(apiMode),
          "X-Stripe-Client-User-Agent": clientUserAgent,
          "X-Stripe-Client-Telemetry": this._getTelemetryHeader(),
          "Stripe-Version": apiVersion,
          "Stripe-Account": stripeAccount,
          "Stripe-Context": stripeContext,
          "Idempotency-Key": this._defaultIdempotencyKey(method, userSuppliedSettings, apiMode)
        };
        const methodHasPayload = method == "POST" || method == "PUT" || method == "PATCH";
        if (methodHasPayload || contentLength) {
          if (!methodHasPayload) {
            emitWarning(`${method} method had non-zero contentLength but no payload is expected for this verb`);
          }
          defaultHeaders["Content-Length"] = contentLength;
        }
        return Object.assign(
          removeNullish(defaultHeaders),
          // If the user supplied, say 'idempotency-key', override instead of appending by ensuring caps are the same.
          normalizeHeaders(userSuppliedHeaders)
        );
      }
      _getUserAgentString(apiMode) {
        const packageVersion = this._stripe.getConstant("PACKAGE_VERSION");
        const appInfo = this._stripe._appInfo ? this._stripe.getAppInfoAsString() : "";
        return `Stripe/${apiMode} NodeBindings/${packageVersion} ${appInfo}`.trim();
      }
      _getTelemetryHeader() {
        if (this._stripe.getTelemetryEnabled() && this._stripe._prevRequestMetrics.length > 0) {
          const metrics = this._stripe._prevRequestMetrics.shift();
          return JSON.stringify({
            last_request_metrics: metrics
          });
        }
      }
      _recordRequestMetrics(requestId, requestDurationMs, usage) {
        if (this._stripe.getTelemetryEnabled() && requestId) {
          if (this._stripe._prevRequestMetrics.length > this._maxBufferedRequestMetric) {
            emitWarning("Request metrics buffer is full, dropping telemetry message.");
          } else {
            const m4 = {
              request_id: requestId,
              request_duration_ms: requestDurationMs
            };
            if (usage && usage.length > 0) {
              m4.usage = usage;
            }
            this._stripe._prevRequestMetrics.push(m4);
          }
        }
      }
      _rawRequest(method, path, params, options) {
        const requestPromise = new Promise((resolve, reject) => {
          let opts;
          try {
            const requestMethod = method.toUpperCase();
            if (requestMethod !== "POST" && params && Object.keys(params).length !== 0) {
              throw new Error("rawRequest only supports params on POST requests. Please pass null and add your parameters to path.");
            }
            const args = [].slice.call([params, options]);
            const dataFromArgs = getDataFromArgs(args);
            const data = requestMethod === "POST" ? Object.assign({}, dataFromArgs) : null;
            const calculatedOptions = getOptionsFromArgs(args);
            const headers2 = calculatedOptions.headers;
            const authenticator2 = calculatedOptions.authenticator;
            opts = {
              requestMethod,
              requestPath: path,
              bodyData: data,
              queryData: {},
              authenticator: authenticator2,
              headers: headers2,
              host: calculatedOptions.host,
              streaming: !!calculatedOptions.streaming,
              settings: {},
              usage: ["raw_request"]
            };
          } catch (err2) {
            reject(err2);
            return;
          }
          function requestCallback(err2, response) {
            if (err2) {
              reject(err2);
            } else {
              resolve(response);
            }
          }
          __name(requestCallback, "requestCallback");
          __name2(requestCallback, "requestCallback");
          const { headers, settings: settings3 } = opts;
          const authenticator = opts.authenticator;
          this._request(opts.requestMethod, opts.host, path, opts.bodyData, authenticator, { headers, settings: settings3, streaming: opts.streaming }, opts.usage, requestCallback);
        });
        return requestPromise;
      }
      _request(method, host, path, data, authenticator, options, usage = [], callback, requestDataProcessor = null) {
        var _a2;
        let requestData;
        authenticator = (_a2 = authenticator !== null && authenticator !== void 0 ? authenticator : this._stripe._authenticator) !== null && _a2 !== void 0 ? _a2 : null;
        const apiMode = getAPIMode(path);
        const retryRequest = /* @__PURE__ */ __name2((requestFn, apiVersion, headers, requestRetries, retryAfter) => {
          return setTimeout(requestFn, this._getSleepTimeInMS(requestRetries, retryAfter), apiVersion, headers, requestRetries + 1);
        }, "retryRequest");
        const makeRequest = /* @__PURE__ */ __name2((apiVersion, headers, numRetries) => {
          const timeout = options.settings && options.settings.timeout && Number.isInteger(options.settings.timeout) && options.settings.timeout >= 0 ? options.settings.timeout : this._stripe.getApiField("timeout");
          const request = {
            host: host || this._stripe.getApiField("host"),
            port: this._stripe.getApiField("port"),
            path,
            method,
            headers: Object.assign({}, headers),
            body: requestData,
            protocol: this._stripe.getApiField("protocol")
          };
          authenticator(request).then(() => {
            const req = this._stripe.getApiField("httpClient").makeRequest(request.host, request.port, request.path, request.method, request.headers, request.body, request.protocol, timeout);
            const requestStartTime = Date.now();
            const requestEvent = removeNullish({
              api_version: apiVersion,
              account: parseHttpHeaderAsString(headers["Stripe-Account"]),
              idempotency_key: parseHttpHeaderAsString(headers["Idempotency-Key"]),
              method,
              path,
              request_start_time: requestStartTime
            });
            const requestRetries = numRetries || 0;
            const maxRetries = this._getMaxNetworkRetries(options.settings || {});
            this._stripe._emitter.emit("request", requestEvent);
            req.then((res) => {
              if (_RequestSender._shouldRetry(res, requestRetries, maxRetries)) {
                return retryRequest(makeRequest, apiVersion, headers, requestRetries, parseHttpHeaderAsNumber(res.getHeaders()["retry-after"]));
              } else if (options.streaming && res.getStatusCode() < 400) {
                return this._streamingResponseHandler(requestEvent, usage, callback)(res);
              } else {
                return this._jsonResponseHandler(requestEvent, apiMode, usage, callback)(res);
              }
            }).catch((error) => {
              if (_RequestSender._shouldRetry(null, requestRetries, maxRetries, error)) {
                return retryRequest(makeRequest, apiVersion, headers, requestRetries, null);
              } else {
                const isTimeoutError = error.code && error.code === HttpClient.TIMEOUT_ERROR_CODE;
                return callback(new StripeConnectionError({
                  message: isTimeoutError ? `Request aborted due to timeout being reached (${timeout}ms)` : _RequestSender._generateConnectionErrorMessage(requestRetries),
                  detail: error
                }));
              }
            });
          }).catch((e2) => {
            throw new StripeError({
              message: "Unable to authenticate the request",
              exception: e2
            });
          });
        }, "makeRequest");
        const prepareAndMakeRequest = /* @__PURE__ */ __name2((error, data2) => {
          if (error) {
            return callback(error);
          }
          requestData = data2;
          this._stripe.getClientUserAgent((clientUserAgent) => {
            const apiVersion = this._stripe.getApiField("version");
            const headers = this._makeHeaders({
              contentType: apiMode == "v2" ? "application/json" : "application/x-www-form-urlencoded",
              contentLength: requestData.length,
              apiVersion,
              clientUserAgent,
              method,
              userSuppliedHeaders: options.headers,
              userSuppliedSettings: options.settings,
              stripeAccount: apiMode == "v2" ? null : this._stripe.getApiField("stripeAccount"),
              stripeContext: apiMode == "v2" ? this._stripe.getApiField("stripeContext") : null,
              apiMode
            });
            makeRequest(apiVersion, headers, 0);
          });
        }, "prepareAndMakeRequest");
        if (requestDataProcessor) {
          requestDataProcessor(method, data, options.headers, prepareAndMakeRequest);
        } else {
          let stringifiedData;
          if (apiMode == "v2") {
            stringifiedData = data ? jsonStringifyRequestData(data) : "";
          } else {
            stringifiedData = queryStringifyRequestData(data || {}, apiMode);
          }
          prepareAndMakeRequest(null, stringifiedData);
        }
      }
    };
  }
});
function getAsyncIteratorSymbol() {
  if (typeof Symbol !== "undefined" && Symbol.asyncIterator) {
    return Symbol.asyncIterator;
  }
  return "@@asyncIterator";
}
__name(getAsyncIteratorSymbol, "getAsyncIteratorSymbol");
function getDoneCallback(args) {
  if (args.length < 2) {
    return null;
  }
  const onDone = args[1];
  if (typeof onDone !== "function") {
    throw Error(`The second argument to autoPagingEach, if present, must be a callback function; received ${typeof onDone}`);
  }
  return onDone;
}
__name(getDoneCallback, "getDoneCallback");
function getItemCallback(args) {
  if (args.length === 0) {
    return void 0;
  }
  const onItem = args[0];
  if (typeof onItem !== "function") {
    throw Error(`The first argument to autoPagingEach, if present, must be a callback function; received ${typeof onItem}`);
  }
  if (onItem.length === 2) {
    return onItem;
  }
  if (onItem.length > 2) {
    throw Error(`The \`onItem\` callback function passed to autoPagingEach must accept at most two arguments; got ${onItem}`);
  }
  return /* @__PURE__ */ __name2(/* @__PURE__ */ __name(function _onItem(item, next) {
    const shouldContinue = onItem(item);
    next(shouldContinue);
  }, "_onItem"), "_onItem");
}
__name(getItemCallback, "getItemCallback");
function getLastId(listResult, reverseIteration) {
  const lastIdx = reverseIteration ? 0 : listResult.data.length - 1;
  const lastItem = listResult.data[lastIdx];
  const lastId = lastItem && lastItem.id;
  if (!lastId) {
    throw Error("Unexpected: No `id` found on the last item while auto-paging a list.");
  }
  return lastId;
}
__name(getLastId, "getLastId");
function makeAutoPagingEach(asyncIteratorNext) {
  return /* @__PURE__ */ __name2(/* @__PURE__ */ __name(function autoPagingEach() {
    const args = [].slice.call(arguments);
    const onItem = getItemCallback(args);
    const onDone = getDoneCallback(args);
    if (args.length > 2) {
      throw Error(`autoPagingEach takes up to two arguments; received ${args}`);
    }
    const autoPagePromise = wrapAsyncIteratorWithCallback(
      asyncIteratorNext,
      // @ts-ignore we might need a null check
      onItem
    );
    return callbackifyPromiseWithTimeout(autoPagePromise, onDone);
  }, "autoPagingEach"), "autoPagingEach");
}
__name(makeAutoPagingEach, "makeAutoPagingEach");
function makeAutoPagingToArray(autoPagingEach) {
  return /* @__PURE__ */ __name2(/* @__PURE__ */ __name(function autoPagingToArray(opts, onDone) {
    const limit = opts && opts.limit;
    if (!limit) {
      throw Error("You must pass a `limit` option to autoPagingToArray, e.g., `autoPagingToArray({limit: 1000});`.");
    }
    if (limit > 1e4) {
      throw Error("You cannot specify a limit of more than 10,000 items to fetch in `autoPagingToArray`; use `autoPagingEach` to iterate through longer lists.");
    }
    const promise = new Promise((resolve, reject) => {
      const items = [];
      autoPagingEach((item) => {
        items.push(item);
        if (items.length >= limit) {
          return false;
        }
      }).then(() => {
        resolve(items);
      }).catch(reject);
    });
    return callbackifyPromiseWithTimeout(promise, onDone);
  }, "autoPagingToArray"), "autoPagingToArray");
}
__name(makeAutoPagingToArray, "makeAutoPagingToArray");
function wrapAsyncIteratorWithCallback(asyncIteratorNext, onItem) {
  return new Promise((resolve, reject) => {
    function handleIteration(iterResult) {
      if (iterResult.done) {
        resolve();
        return;
      }
      const item = iterResult.value;
      return new Promise((next) => {
        onItem(item, next);
      }).then((shouldContinue) => {
        if (shouldContinue === false) {
          return handleIteration({ done: true, value: void 0 });
        } else {
          return asyncIteratorNext().then(handleIteration);
        }
      });
    }
    __name(handleIteration, "handleIteration");
    __name2(handleIteration, "handleIteration");
    asyncIteratorNext().then(handleIteration).catch(reject);
  });
}
__name(wrapAsyncIteratorWithCallback, "wrapAsyncIteratorWithCallback");
function isReverseIteration(requestArgs) {
  const args = [].slice.call(requestArgs);
  const dataFromArgs = getDataFromArgs(args);
  return !!dataFromArgs.ending_before;
}
__name(isReverseIteration, "isReverseIteration");
var V1Iterator;
var V1ListIterator;
var V1SearchIterator;
var V2ListIterator;
var makeAutoPaginationMethods;
var makeAutoPaginationMethodsFromIterator;
var init_autoPagination = __esm({
  "../node_modules/stripe/esm/autoPagination.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_utils3();
    V1Iterator = class {
      static {
        __name(this, "V1Iterator");
      }
      static {
        __name2(this, "V1Iterator");
      }
      constructor(firstPagePromise, requestArgs, spec, stripeResource) {
        this.index = 0;
        this.pagePromise = firstPagePromise;
        this.promiseCache = { currentPromise: null };
        this.requestArgs = requestArgs;
        this.spec = spec;
        this.stripeResource = stripeResource;
      }
      async iterate(pageResult) {
        if (!(pageResult && pageResult.data && typeof pageResult.data.length === "number")) {
          throw Error("Unexpected: Stripe API response does not have a well-formed `data` array.");
        }
        const reverseIteration = isReverseIteration(this.requestArgs);
        if (this.index < pageResult.data.length) {
          const idx = reverseIteration ? pageResult.data.length - 1 - this.index : this.index;
          const value = pageResult.data[idx];
          this.index += 1;
          return { value, done: false };
        } else if (pageResult.has_more) {
          this.index = 0;
          this.pagePromise = this.getNextPage(pageResult);
          const nextPageResult = await this.pagePromise;
          return this.iterate(nextPageResult);
        }
        return { done: true, value: void 0 };
      }
      /** @abstract */
      getNextPage(_pageResult) {
        throw new Error("Unimplemented");
      }
      async _next() {
        return this.iterate(await this.pagePromise);
      }
      next() {
        if (this.promiseCache.currentPromise) {
          return this.promiseCache.currentPromise;
        }
        const nextPromise = (async () => {
          const ret = await this._next();
          this.promiseCache.currentPromise = null;
          return ret;
        })();
        this.promiseCache.currentPromise = nextPromise;
        return nextPromise;
      }
    };
    V1ListIterator = class extends V1Iterator {
      static {
        __name(this, "V1ListIterator");
      }
      static {
        __name2(this, "V1ListIterator");
      }
      getNextPage(pageResult) {
        const reverseIteration = isReverseIteration(this.requestArgs);
        const lastId = getLastId(pageResult, reverseIteration);
        return this.stripeResource._makeRequest(this.requestArgs, this.spec, {
          [reverseIteration ? "ending_before" : "starting_after"]: lastId
        });
      }
    };
    V1SearchIterator = class extends V1Iterator {
      static {
        __name(this, "V1SearchIterator");
      }
      static {
        __name2(this, "V1SearchIterator");
      }
      getNextPage(pageResult) {
        if (!pageResult.next_page) {
          throw Error("Unexpected: Stripe API response does not have a well-formed `next_page` field, but `has_more` was true.");
        }
        return this.stripeResource._makeRequest(this.requestArgs, this.spec, {
          page: pageResult.next_page
        });
      }
    };
    V2ListIterator = class {
      static {
        __name(this, "V2ListIterator");
      }
      static {
        __name2(this, "V2ListIterator");
      }
      constructor(firstPagePromise, requestArgs, spec, stripeResource) {
        this.currentPageIterator = (async () => {
          const page = await firstPagePromise;
          return page.data[Symbol.iterator]();
        })();
        this.nextPageUrl = (async () => {
          const page = await firstPagePromise;
          return page.next_page_url || null;
        })();
        this.requestArgs = requestArgs;
        this.spec = spec;
        this.stripeResource = stripeResource;
      }
      async turnPage() {
        const nextPageUrl = await this.nextPageUrl;
        if (!nextPageUrl)
          return null;
        this.spec.fullPath = nextPageUrl;
        const page = await this.stripeResource._makeRequest([], this.spec, {});
        this.nextPageUrl = Promise.resolve(page.next_page_url);
        this.currentPageIterator = Promise.resolve(page.data[Symbol.iterator]());
        return this.currentPageIterator;
      }
      async next() {
        {
          const result2 = (await this.currentPageIterator).next();
          if (!result2.done)
            return { done: false, value: result2.value };
        }
        const nextPageIterator = await this.turnPage();
        if (!nextPageIterator) {
          return { done: true, value: void 0 };
        }
        const result = nextPageIterator.next();
        if (!result.done)
          return { done: false, value: result.value };
        return { done: true, value: void 0 };
      }
    };
    makeAutoPaginationMethods = /* @__PURE__ */ __name2((stripeResource, requestArgs, spec, firstPagePromise) => {
      const apiMode = getAPIMode(spec.fullPath || spec.path);
      if (apiMode !== "v2" && spec.methodType === "search") {
        return makeAutoPaginationMethodsFromIterator(new V1SearchIterator(firstPagePromise, requestArgs, spec, stripeResource));
      }
      if (apiMode !== "v2" && spec.methodType === "list") {
        return makeAutoPaginationMethodsFromIterator(new V1ListIterator(firstPagePromise, requestArgs, spec, stripeResource));
      }
      if (apiMode === "v2" && spec.methodType === "list") {
        return makeAutoPaginationMethodsFromIterator(new V2ListIterator(firstPagePromise, requestArgs, spec, stripeResource));
      }
      return null;
    }, "makeAutoPaginationMethods");
    makeAutoPaginationMethodsFromIterator = /* @__PURE__ */ __name2((iterator) => {
      const autoPagingEach = makeAutoPagingEach((...args) => iterator.next(...args));
      const autoPagingToArray = makeAutoPagingToArray(autoPagingEach);
      const autoPaginationMethods = {
        autoPagingEach,
        autoPagingToArray,
        // Async iterator functions:
        next: /* @__PURE__ */ __name2(() => iterator.next(), "next"),
        return: /* @__PURE__ */ __name2(() => {
          return {};
        }, "return"),
        [getAsyncIteratorSymbol()]: () => {
          return autoPaginationMethods;
        }
      };
      return autoPaginationMethods;
    }, "makeAutoPaginationMethodsFromIterator");
    __name2(getAsyncIteratorSymbol, "getAsyncIteratorSymbol");
    __name2(getDoneCallback, "getDoneCallback");
    __name2(getItemCallback, "getItemCallback");
    __name2(getLastId, "getLastId");
    __name2(makeAutoPagingEach, "makeAutoPagingEach");
    __name2(makeAutoPagingToArray, "makeAutoPagingToArray");
    __name2(wrapAsyncIteratorWithCallback, "wrapAsyncIteratorWithCallback");
    __name2(isReverseIteration, "isReverseIteration");
  }
});
function stripeMethod(spec) {
  if (spec.path !== void 0 && spec.fullPath !== void 0) {
    throw new Error(`Method spec specified both a 'path' (${spec.path}) and a 'fullPath' (${spec.fullPath}).`);
  }
  return function(...args) {
    const callback = typeof args[args.length - 1] == "function" && args.pop();
    spec.urlParams = extractUrlParams(spec.fullPath || this.createResourcePathWithSymbols(spec.path || ""));
    const requestPromise = callbackifyPromiseWithTimeout(this._makeRequest(args, spec, {}), callback);
    Object.assign(requestPromise, makeAutoPaginationMethods(this, args, spec, requestPromise));
    return requestPromise;
  };
}
__name(stripeMethod, "stripeMethod");
var init_StripeMethod = __esm({
  "../node_modules/stripe/esm/StripeMethod.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_utils3();
    init_autoPagination();
    __name2(stripeMethod, "stripeMethod");
  }
});
function StripeResource(stripe, deprecatedUrlData) {
  this._stripe = stripe;
  if (deprecatedUrlData) {
    throw new Error("Support for curried url params was dropped in stripe-node v7.0.0. Instead, pass two ids.");
  }
  this.basePath = makeURLInterpolator(
    // @ts-ignore changing type of basePath
    this.basePath || stripe.getApiField("basePath")
  );
  this.resourcePath = this.path;
  this.path = makeURLInterpolator(this.path);
  this.initialize(...arguments);
}
__name(StripeResource, "StripeResource");
var init_StripeResource = __esm({
  "../node_modules/stripe/esm/StripeResource.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_utils3();
    init_StripeMethod();
    StripeResource.extend = protoExtend;
    StripeResource.method = stripeMethod;
    StripeResource.MAX_BUFFERED_REQUEST_METRICS = 100;
    __name2(StripeResource, "StripeResource");
    StripeResource.prototype = {
      _stripe: null,
      // @ts-ignore the type of path changes in ctor
      path: "",
      resourcePath: "",
      // Methods that don't use the API's default '/v1' path can override it with this setting.
      basePath: null,
      initialize() {
      },
      // Function to override the default data processor. This allows full control
      // over how a StripeResource's request data will get converted into an HTTP
      // body. This is useful for non-standard HTTP requests. The function should
      // take method name, data, and headers as arguments.
      requestDataProcessor: null,
      // Function to add a validation checks before sending the request, errors should
      // be thrown, and they will be passed to the callback/promise.
      validateRequest: null,
      createFullPath(commandPath, urlData) {
        const urlParts = [this.basePath(urlData), this.path(urlData)];
        if (typeof commandPath === "function") {
          const computedCommandPath = commandPath(urlData);
          if (computedCommandPath) {
            urlParts.push(computedCommandPath);
          }
        } else {
          urlParts.push(commandPath);
        }
        return this._joinUrlParts(urlParts);
      },
      // Creates a relative resource path with symbols left in (unlike
      // createFullPath which takes some data to replace them with). For example it
      // might produce: /invoices/{id}
      createResourcePathWithSymbols(pathWithSymbols) {
        if (pathWithSymbols) {
          return `/${this._joinUrlParts([this.resourcePath, pathWithSymbols])}`;
        } else {
          return `/${this.resourcePath}`;
        }
      },
      _joinUrlParts(parts) {
        return parts.join("/").replace(/\/{2,}/g, "/");
      },
      _getRequestOpts(requestArgs, spec, overrideData) {
        var _a2;
        const requestMethod = (spec.method || "GET").toUpperCase();
        const usage = spec.usage || [];
        const urlParams = spec.urlParams || [];
        const encode = spec.encode || ((data2) => data2);
        const isUsingFullPath = !!spec.fullPath;
        const commandPath = makeURLInterpolator(isUsingFullPath ? spec.fullPath : spec.path || "");
        const path = isUsingFullPath ? spec.fullPath : this.createResourcePathWithSymbols(spec.path);
        const args = [].slice.call(requestArgs);
        const urlData = urlParams.reduce((urlData2, param) => {
          const arg = args.shift();
          if (typeof arg !== "string") {
            throw new Error(`Stripe: Argument "${param}" must be a string, but got: ${arg} (on API request to \`${requestMethod} ${path}\`)`);
          }
          urlData2[param] = arg;
          return urlData2;
        }, {});
        const dataFromArgs = getDataFromArgs(args);
        const data = encode(Object.assign({}, dataFromArgs, overrideData));
        const options = getOptionsFromArgs(args);
        const host = options.host || spec.host;
        const streaming = !!spec.streaming || !!options.streaming;
        if (args.filter((x22) => x22 != null).length) {
          throw new Error(`Stripe: Unknown arguments (${args}). Did you mean to pass an options object? See https://github.com/stripe/stripe-node/wiki/Passing-Options. (on API request to ${requestMethod} \`${path}\`)`);
        }
        const requestPath = isUsingFullPath ? commandPath(urlData) : this.createFullPath(commandPath, urlData);
        const headers = Object.assign(options.headers, spec.headers);
        if (spec.validator) {
          spec.validator(data, { headers });
        }
        const dataInQuery = spec.method === "GET" || spec.method === "DELETE";
        const bodyData = dataInQuery ? null : data;
        const queryData = dataInQuery ? data : {};
        return {
          requestMethod,
          requestPath,
          bodyData,
          queryData,
          authenticator: (_a2 = options.authenticator) !== null && _a2 !== void 0 ? _a2 : null,
          headers,
          host: host !== null && host !== void 0 ? host : null,
          streaming,
          settings: options.settings,
          usage
        };
      },
      _makeRequest(requestArgs, spec, overrideData) {
        return new Promise((resolve, reject) => {
          var _a2;
          let opts;
          try {
            opts = this._getRequestOpts(requestArgs, spec, overrideData);
          } catch (err2) {
            reject(err2);
            return;
          }
          function requestCallback(err2, response) {
            if (err2) {
              reject(err2);
            } else {
              resolve(spec.transformResponseData ? spec.transformResponseData(response) : response);
            }
          }
          __name(requestCallback, "requestCallback");
          __name2(requestCallback, "requestCallback");
          const emptyQuery = Object.keys(opts.queryData).length === 0;
          const path = [
            opts.requestPath,
            emptyQuery ? "" : "?",
            queryStringifyRequestData(opts.queryData, getAPIMode(opts.requestPath))
          ].join("");
          const { headers, settings: settings3 } = opts;
          this._stripe._requestSender._request(opts.requestMethod, opts.host, path, opts.bodyData, opts.authenticator, {
            headers,
            settings: settings3,
            streaming: opts.streaming
          }, opts.usage, requestCallback, (_a2 = this.requestDataProcessor) === null || _a2 === void 0 ? void 0 : _a2.bind(this));
        });
      }
    };
  }
});
function createWebhooks(platformFunctions) {
  const Webhook = {
    DEFAULT_TOLERANCE: 300,
    signature: null,
    constructEvent(payload, header, secret, tolerance, cryptoProvider, receivedAt) {
      try {
        if (!this.signature) {
          throw new Error("ERR: missing signature helper, unable to verify");
        }
        this.signature.verifyHeader(payload, header, secret, tolerance || Webhook.DEFAULT_TOLERANCE, cryptoProvider, receivedAt);
      } catch (e2) {
        if (e2 instanceof CryptoProviderOnlySupportsAsyncError) {
          e2.message += "\nUse `await constructEventAsync(...)` instead of `constructEvent(...)`";
        }
        throw e2;
      }
      const jsonPayload = payload instanceof Uint8Array ? JSON.parse(new TextDecoder("utf8").decode(payload)) : JSON.parse(payload);
      return jsonPayload;
    },
    async constructEventAsync(payload, header, secret, tolerance, cryptoProvider, receivedAt) {
      if (!this.signature) {
        throw new Error("ERR: missing signature helper, unable to verify");
      }
      await this.signature.verifyHeaderAsync(payload, header, secret, tolerance || Webhook.DEFAULT_TOLERANCE, cryptoProvider, receivedAt);
      const jsonPayload = payload instanceof Uint8Array ? JSON.parse(new TextDecoder("utf8").decode(payload)) : JSON.parse(payload);
      return jsonPayload;
    },
    /**
     * Generates a header to be used for webhook mocking
     *
     * @typedef {object} opts
     * @property {number} timestamp - Timestamp of the header. Defaults to Date.now()
     * @property {string} payload - JSON stringified payload object, containing the 'id' and 'object' parameters
     * @property {string} secret - Stripe webhook secret 'whsec_...'
     * @property {string} scheme - Version of API to hit. Defaults to 'v1'.
     * @property {string} signature - Computed webhook signature
     * @property {CryptoProvider} cryptoProvider - Crypto provider to use for computing the signature if none was provided. Defaults to NodeCryptoProvider.
     */
    generateTestHeaderString: /* @__PURE__ */ __name2(function(opts) {
      const preparedOpts = prepareOptions(opts);
      const signature2 = preparedOpts.signature || preparedOpts.cryptoProvider.computeHMACSignature(preparedOpts.payloadString, preparedOpts.secret);
      return preparedOpts.generateHeaderString(signature2);
    }, "generateTestHeaderString"),
    generateTestHeaderStringAsync: /* @__PURE__ */ __name2(async function(opts) {
      const preparedOpts = prepareOptions(opts);
      const signature2 = preparedOpts.signature || await preparedOpts.cryptoProvider.computeHMACSignatureAsync(preparedOpts.payloadString, preparedOpts.secret);
      return preparedOpts.generateHeaderString(signature2);
    }, "generateTestHeaderStringAsync")
  };
  const signature = {
    EXPECTED_SCHEME: "v1",
    verifyHeader(encodedPayload, encodedHeader, secret, tolerance, cryptoProvider, receivedAt) {
      const { decodedHeader: header, decodedPayload: payload, details, suspectPayloadType } = parseEventDetails(encodedPayload, encodedHeader, this.EXPECTED_SCHEME);
      const secretContainsWhitespace = /\s/.test(secret);
      cryptoProvider = cryptoProvider || getCryptoProvider();
      const expectedSignature = cryptoProvider.computeHMACSignature(makeHMACContent(payload, details), secret);
      validateComputedSignature(payload, header, details, expectedSignature, tolerance, suspectPayloadType, secretContainsWhitespace, receivedAt);
      return true;
    },
    async verifyHeaderAsync(encodedPayload, encodedHeader, secret, tolerance, cryptoProvider, receivedAt) {
      const { decodedHeader: header, decodedPayload: payload, details, suspectPayloadType } = parseEventDetails(encodedPayload, encodedHeader, this.EXPECTED_SCHEME);
      const secretContainsWhitespace = /\s/.test(secret);
      cryptoProvider = cryptoProvider || getCryptoProvider();
      const expectedSignature = await cryptoProvider.computeHMACSignatureAsync(makeHMACContent(payload, details), secret);
      return validateComputedSignature(payload, header, details, expectedSignature, tolerance, suspectPayloadType, secretContainsWhitespace, receivedAt);
    }
  };
  function makeHMACContent(payload, details) {
    return `${details.timestamp}.${payload}`;
  }
  __name(makeHMACContent, "makeHMACContent");
  __name2(makeHMACContent, "makeHMACContent");
  function parseEventDetails(encodedPayload, encodedHeader, expectedScheme) {
    if (!encodedPayload) {
      throw new StripeSignatureVerificationError(encodedHeader, encodedPayload, {
        message: "No webhook payload was provided."
      });
    }
    const suspectPayloadType = typeof encodedPayload != "string" && !(encodedPayload instanceof Uint8Array);
    const textDecoder = new TextDecoder("utf8");
    const decodedPayload = encodedPayload instanceof Uint8Array ? textDecoder.decode(encodedPayload) : encodedPayload;
    if (Array.isArray(encodedHeader)) {
      throw new Error("Unexpected: An array was passed as a header, which should not be possible for the stripe-signature header.");
    }
    if (encodedHeader == null || encodedHeader == "") {
      throw new StripeSignatureVerificationError(encodedHeader, encodedPayload, {
        message: "No stripe-signature header value was provided."
      });
    }
    const decodedHeader = encodedHeader instanceof Uint8Array ? textDecoder.decode(encodedHeader) : encodedHeader;
    const details = parseHeader(decodedHeader, expectedScheme);
    if (!details || details.timestamp === -1) {
      throw new StripeSignatureVerificationError(decodedHeader, decodedPayload, {
        message: "Unable to extract timestamp and signatures from header"
      });
    }
    if (!details.signatures.length) {
      throw new StripeSignatureVerificationError(decodedHeader, decodedPayload, {
        message: "No signatures found with expected scheme"
      });
    }
    return {
      decodedPayload,
      decodedHeader,
      details,
      suspectPayloadType
    };
  }
  __name(parseEventDetails, "parseEventDetails");
  __name2(parseEventDetails, "parseEventDetails");
  function validateComputedSignature(payload, header, details, expectedSignature, tolerance, suspectPayloadType, secretContainsWhitespace, receivedAt) {
    const signatureFound = !!details.signatures.filter(platformFunctions.secureCompare.bind(platformFunctions, expectedSignature)).length;
    const docsLocation = "\nLearn more about webhook signing and explore webhook integration examples for various frameworks at https://docs.stripe.com/webhooks/signature";
    const whitespaceMessage = secretContainsWhitespace ? "\n\nNote: The provided signing secret contains whitespace. This often indicates an extra newline or space is in the value" : "";
    if (!signatureFound) {
      if (suspectPayloadType) {
        throw new StripeSignatureVerificationError(header, payload, {
          message: "Webhook payload must be provided as a string or a Buffer (https://nodejs.org/api/buffer.html) instance representing the _raw_ request body.Payload was provided as a parsed JavaScript object instead. \nSignature verification is impossible without access to the original signed material. \n" + docsLocation + "\n" + whitespaceMessage
        });
      }
      throw new StripeSignatureVerificationError(header, payload, {
        message: "No signatures found matching the expected signature for payload. Are you passing the raw request body you received from Stripe? \n If a webhook request is being forwarded by a third-party tool, ensure that the exact request body, including JSON formatting and new line style, is preserved.\n" + docsLocation + "\n" + whitespaceMessage
      });
    }
    const timestampAge = Math.floor((typeof receivedAt === "number" ? receivedAt : Date.now()) / 1e3) - details.timestamp;
    if (tolerance > 0 && timestampAge > tolerance) {
      throw new StripeSignatureVerificationError(header, payload, {
        message: "Timestamp outside the tolerance zone"
      });
    }
    return true;
  }
  __name(validateComputedSignature, "validateComputedSignature");
  __name2(validateComputedSignature, "validateComputedSignature");
  function parseHeader(header, scheme) {
    if (typeof header !== "string") {
      return null;
    }
    return header.split(",").reduce((accum, item) => {
      const kv = item.split("=");
      if (kv[0] === "t") {
        accum.timestamp = parseInt(kv[1], 10);
      }
      if (kv[0] === scheme) {
        accum.signatures.push(kv[1]);
      }
      return accum;
    }, {
      timestamp: -1,
      signatures: []
    });
  }
  __name(parseHeader, "parseHeader");
  __name2(parseHeader, "parseHeader");
  let webhooksCryptoProviderInstance = null;
  function getCryptoProvider() {
    if (!webhooksCryptoProviderInstance) {
      webhooksCryptoProviderInstance = platformFunctions.createDefaultCryptoProvider();
    }
    return webhooksCryptoProviderInstance;
  }
  __name(getCryptoProvider, "getCryptoProvider");
  __name2(getCryptoProvider, "getCryptoProvider");
  function prepareOptions(opts) {
    if (!opts) {
      throw new StripeError({
        message: "Options are required"
      });
    }
    const timestamp = Math.floor(opts.timestamp) || Math.floor(Date.now() / 1e3);
    const scheme = opts.scheme || signature.EXPECTED_SCHEME;
    const cryptoProvider = opts.cryptoProvider || getCryptoProvider();
    const payloadString = `${timestamp}.${opts.payload}`;
    const generateHeaderString = /* @__PURE__ */ __name2((signature2) => {
      return `t=${timestamp},${scheme}=${signature2}`;
    }, "generateHeaderString");
    return Object.assign(Object.assign({}, opts), {
      timestamp,
      scheme,
      cryptoProvider,
      payloadString,
      generateHeaderString
    });
  }
  __name(prepareOptions, "prepareOptions");
  __name2(prepareOptions, "prepareOptions");
  Webhook.signature = signature;
  return Webhook;
}
__name(createWebhooks, "createWebhooks");
var init_Webhooks = __esm({
  "../node_modules/stripe/esm/Webhooks.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_Error();
    init_CryptoProvider();
    __name2(createWebhooks, "createWebhooks");
  }
});
var ApiVersion;
var init_apiVersion = __esm({
  "../node_modules/stripe/esm/apiVersion.js"() {
    init_functionsRoutes_0_8044054200943971();
    ApiVersion = "2025-07-30.basil";
  }
});
function ResourceNamespace(stripe, resources) {
  for (const name in resources) {
    if (!Object.prototype.hasOwnProperty.call(resources, name)) {
      continue;
    }
    const camelCaseName = name[0].toLowerCase() + name.substring(1);
    const resource = new resources[name](stripe);
    this[camelCaseName] = resource;
  }
}
__name(ResourceNamespace, "ResourceNamespace");
function resourceNamespace(namespace, resources) {
  return function(stripe) {
    return new ResourceNamespace(stripe, resources);
  };
}
__name(resourceNamespace, "resourceNamespace");
var init_ResourceNamespace = __esm({
  "../node_modules/stripe/esm/ResourceNamespace.js"() {
    init_functionsRoutes_0_8044054200943971();
    __name2(ResourceNamespace, "ResourceNamespace");
    __name2(resourceNamespace, "resourceNamespace");
  }
});
var stripeMethod2;
var Accounts;
var init_Accounts = __esm({
  "../node_modules/stripe/esm/resources/FinancialConnections/Accounts.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_StripeResource();
    stripeMethod2 = StripeResource.method;
    Accounts = StripeResource.extend({
      retrieve: stripeMethod2({
        method: "GET",
        fullPath: "/v1/financial_connections/accounts/{account}"
      }),
      list: stripeMethod2({
        method: "GET",
        fullPath: "/v1/financial_connections/accounts",
        methodType: "list"
      }),
      disconnect: stripeMethod2({
        method: "POST",
        fullPath: "/v1/financial_connections/accounts/{account}/disconnect"
      }),
      listOwners: stripeMethod2({
        method: "GET",
        fullPath: "/v1/financial_connections/accounts/{account}/owners",
        methodType: "list"
      }),
      refresh: stripeMethod2({
        method: "POST",
        fullPath: "/v1/financial_connections/accounts/{account}/refresh"
      }),
      subscribe: stripeMethod2({
        method: "POST",
        fullPath: "/v1/financial_connections/accounts/{account}/subscribe"
      }),
      unsubscribe: stripeMethod2({
        method: "POST",
        fullPath: "/v1/financial_connections/accounts/{account}/unsubscribe"
      })
    });
  }
});
var stripeMethod3;
var ActiveEntitlements;
var init_ActiveEntitlements = __esm({
  "../node_modules/stripe/esm/resources/Entitlements/ActiveEntitlements.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_StripeResource();
    stripeMethod3 = StripeResource.method;
    ActiveEntitlements = StripeResource.extend({
      retrieve: stripeMethod3({
        method: "GET",
        fullPath: "/v1/entitlements/active_entitlements/{id}"
      }),
      list: stripeMethod3({
        method: "GET",
        fullPath: "/v1/entitlements/active_entitlements",
        methodType: "list"
      })
    });
  }
});
var stripeMethod4;
var Alerts;
var init_Alerts = __esm({
  "../node_modules/stripe/esm/resources/Billing/Alerts.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_StripeResource();
    stripeMethod4 = StripeResource.method;
    Alerts = StripeResource.extend({
      create: stripeMethod4({ method: "POST", fullPath: "/v1/billing/alerts" }),
      retrieve: stripeMethod4({ method: "GET", fullPath: "/v1/billing/alerts/{id}" }),
      list: stripeMethod4({
        method: "GET",
        fullPath: "/v1/billing/alerts",
        methodType: "list"
      }),
      activate: stripeMethod4({
        method: "POST",
        fullPath: "/v1/billing/alerts/{id}/activate"
      }),
      archive: stripeMethod4({
        method: "POST",
        fullPath: "/v1/billing/alerts/{id}/archive"
      }),
      deactivate: stripeMethod4({
        method: "POST",
        fullPath: "/v1/billing/alerts/{id}/deactivate"
      })
    });
  }
});
var stripeMethod5;
var Authorizations;
var init_Authorizations = __esm({
  "../node_modules/stripe/esm/resources/TestHelpers/Issuing/Authorizations.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_StripeResource();
    stripeMethod5 = StripeResource.method;
    Authorizations = StripeResource.extend({
      create: stripeMethod5({
        method: "POST",
        fullPath: "/v1/test_helpers/issuing/authorizations"
      }),
      capture: stripeMethod5({
        method: "POST",
        fullPath: "/v1/test_helpers/issuing/authorizations/{authorization}/capture"
      }),
      expire: stripeMethod5({
        method: "POST",
        fullPath: "/v1/test_helpers/issuing/authorizations/{authorization}/expire"
      }),
      finalizeAmount: stripeMethod5({
        method: "POST",
        fullPath: "/v1/test_helpers/issuing/authorizations/{authorization}/finalize_amount"
      }),
      increment: stripeMethod5({
        method: "POST",
        fullPath: "/v1/test_helpers/issuing/authorizations/{authorization}/increment"
      }),
      respond: stripeMethod5({
        method: "POST",
        fullPath: "/v1/test_helpers/issuing/authorizations/{authorization}/fraud_challenges/respond"
      }),
      reverse: stripeMethod5({
        method: "POST",
        fullPath: "/v1/test_helpers/issuing/authorizations/{authorization}/reverse"
      })
    });
  }
});
var stripeMethod6;
var Authorizations2;
var init_Authorizations2 = __esm({
  "../node_modules/stripe/esm/resources/Issuing/Authorizations.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_StripeResource();
    stripeMethod6 = StripeResource.method;
    Authorizations2 = StripeResource.extend({
      retrieve: stripeMethod6({
        method: "GET",
        fullPath: "/v1/issuing/authorizations/{authorization}"
      }),
      update: stripeMethod6({
        method: "POST",
        fullPath: "/v1/issuing/authorizations/{authorization}"
      }),
      list: stripeMethod6({
        method: "GET",
        fullPath: "/v1/issuing/authorizations",
        methodType: "list"
      }),
      approve: stripeMethod6({
        method: "POST",
        fullPath: "/v1/issuing/authorizations/{authorization}/approve"
      }),
      decline: stripeMethod6({
        method: "POST",
        fullPath: "/v1/issuing/authorizations/{authorization}/decline"
      })
    });
  }
});
var stripeMethod7;
var Calculations;
var init_Calculations = __esm({
  "../node_modules/stripe/esm/resources/Tax/Calculations.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_StripeResource();
    stripeMethod7 = StripeResource.method;
    Calculations = StripeResource.extend({
      create: stripeMethod7({ method: "POST", fullPath: "/v1/tax/calculations" }),
      retrieve: stripeMethod7({
        method: "GET",
        fullPath: "/v1/tax/calculations/{calculation}"
      }),
      listLineItems: stripeMethod7({
        method: "GET",
        fullPath: "/v1/tax/calculations/{calculation}/line_items",
        methodType: "list"
      })
    });
  }
});
var stripeMethod8;
var Cardholders;
var init_Cardholders = __esm({
  "../node_modules/stripe/esm/resources/Issuing/Cardholders.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_StripeResource();
    stripeMethod8 = StripeResource.method;
    Cardholders = StripeResource.extend({
      create: stripeMethod8({ method: "POST", fullPath: "/v1/issuing/cardholders" }),
      retrieve: stripeMethod8({
        method: "GET",
        fullPath: "/v1/issuing/cardholders/{cardholder}"
      }),
      update: stripeMethod8({
        method: "POST",
        fullPath: "/v1/issuing/cardholders/{cardholder}"
      }),
      list: stripeMethod8({
        method: "GET",
        fullPath: "/v1/issuing/cardholders",
        methodType: "list"
      })
    });
  }
});
var stripeMethod9;
var Cards;
var init_Cards = __esm({
  "../node_modules/stripe/esm/resources/TestHelpers/Issuing/Cards.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_StripeResource();
    stripeMethod9 = StripeResource.method;
    Cards = StripeResource.extend({
      deliverCard: stripeMethod9({
        method: "POST",
        fullPath: "/v1/test_helpers/issuing/cards/{card}/shipping/deliver"
      }),
      failCard: stripeMethod9({
        method: "POST",
        fullPath: "/v1/test_helpers/issuing/cards/{card}/shipping/fail"
      }),
      returnCard: stripeMethod9({
        method: "POST",
        fullPath: "/v1/test_helpers/issuing/cards/{card}/shipping/return"
      }),
      shipCard: stripeMethod9({
        method: "POST",
        fullPath: "/v1/test_helpers/issuing/cards/{card}/shipping/ship"
      }),
      submitCard: stripeMethod9({
        method: "POST",
        fullPath: "/v1/test_helpers/issuing/cards/{card}/shipping/submit"
      })
    });
  }
});
var stripeMethod10;
var Cards2;
var init_Cards2 = __esm({
  "../node_modules/stripe/esm/resources/Issuing/Cards.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_StripeResource();
    stripeMethod10 = StripeResource.method;
    Cards2 = StripeResource.extend({
      create: stripeMethod10({ method: "POST", fullPath: "/v1/issuing/cards" }),
      retrieve: stripeMethod10({ method: "GET", fullPath: "/v1/issuing/cards/{card}" }),
      update: stripeMethod10({ method: "POST", fullPath: "/v1/issuing/cards/{card}" }),
      list: stripeMethod10({
        method: "GET",
        fullPath: "/v1/issuing/cards",
        methodType: "list"
      })
    });
  }
});
var stripeMethod11;
var Configurations;
var init_Configurations = __esm({
  "../node_modules/stripe/esm/resources/BillingPortal/Configurations.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_StripeResource();
    stripeMethod11 = StripeResource.method;
    Configurations = StripeResource.extend({
      create: stripeMethod11({
        method: "POST",
        fullPath: "/v1/billing_portal/configurations"
      }),
      retrieve: stripeMethod11({
        method: "GET",
        fullPath: "/v1/billing_portal/configurations/{configuration}"
      }),
      update: stripeMethod11({
        method: "POST",
        fullPath: "/v1/billing_portal/configurations/{configuration}"
      }),
      list: stripeMethod11({
        method: "GET",
        fullPath: "/v1/billing_portal/configurations",
        methodType: "list"
      })
    });
  }
});
var stripeMethod12;
var Configurations2;
var init_Configurations2 = __esm({
  "../node_modules/stripe/esm/resources/Terminal/Configurations.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_StripeResource();
    stripeMethod12 = StripeResource.method;
    Configurations2 = StripeResource.extend({
      create: stripeMethod12({
        method: "POST",
        fullPath: "/v1/terminal/configurations"
      }),
      retrieve: stripeMethod12({
        method: "GET",
        fullPath: "/v1/terminal/configurations/{configuration}"
      }),
      update: stripeMethod12({
        method: "POST",
        fullPath: "/v1/terminal/configurations/{configuration}"
      }),
      list: stripeMethod12({
        method: "GET",
        fullPath: "/v1/terminal/configurations",
        methodType: "list"
      }),
      del: stripeMethod12({
        method: "DELETE",
        fullPath: "/v1/terminal/configurations/{configuration}"
      })
    });
  }
});
var stripeMethod13;
var ConfirmationTokens;
var init_ConfirmationTokens = __esm({
  "../node_modules/stripe/esm/resources/TestHelpers/ConfirmationTokens.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_StripeResource();
    stripeMethod13 = StripeResource.method;
    ConfirmationTokens = StripeResource.extend({
      create: stripeMethod13({
        method: "POST",
        fullPath: "/v1/test_helpers/confirmation_tokens"
      })
    });
  }
});
var stripeMethod14;
var ConnectionTokens;
var init_ConnectionTokens = __esm({
  "../node_modules/stripe/esm/resources/Terminal/ConnectionTokens.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_StripeResource();
    stripeMethod14 = StripeResource.method;
    ConnectionTokens = StripeResource.extend({
      create: stripeMethod14({
        method: "POST",
        fullPath: "/v1/terminal/connection_tokens"
      })
    });
  }
});
var stripeMethod15;
var CreditBalanceSummary;
var init_CreditBalanceSummary = __esm({
  "../node_modules/stripe/esm/resources/Billing/CreditBalanceSummary.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_StripeResource();
    stripeMethod15 = StripeResource.method;
    CreditBalanceSummary = StripeResource.extend({
      retrieve: stripeMethod15({
        method: "GET",
        fullPath: "/v1/billing/credit_balance_summary"
      })
    });
  }
});
var stripeMethod16;
var CreditBalanceTransactions;
var init_CreditBalanceTransactions = __esm({
  "../node_modules/stripe/esm/resources/Billing/CreditBalanceTransactions.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_StripeResource();
    stripeMethod16 = StripeResource.method;
    CreditBalanceTransactions = StripeResource.extend({
      retrieve: stripeMethod16({
        method: "GET",
        fullPath: "/v1/billing/credit_balance_transactions/{id}"
      }),
      list: stripeMethod16({
        method: "GET",
        fullPath: "/v1/billing/credit_balance_transactions",
        methodType: "list"
      })
    });
  }
});
var stripeMethod17;
var CreditGrants;
var init_CreditGrants = __esm({
  "../node_modules/stripe/esm/resources/Billing/CreditGrants.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_StripeResource();
    stripeMethod17 = StripeResource.method;
    CreditGrants = StripeResource.extend({
      create: stripeMethod17({ method: "POST", fullPath: "/v1/billing/credit_grants" }),
      retrieve: stripeMethod17({
        method: "GET",
        fullPath: "/v1/billing/credit_grants/{id}"
      }),
      update: stripeMethod17({
        method: "POST",
        fullPath: "/v1/billing/credit_grants/{id}"
      }),
      list: stripeMethod17({
        method: "GET",
        fullPath: "/v1/billing/credit_grants",
        methodType: "list"
      }),
      expire: stripeMethod17({
        method: "POST",
        fullPath: "/v1/billing/credit_grants/{id}/expire"
      }),
      voidGrant: stripeMethod17({
        method: "POST",
        fullPath: "/v1/billing/credit_grants/{id}/void"
      })
    });
  }
});
var stripeMethod18;
var CreditReversals;
var init_CreditReversals = __esm({
  "../node_modules/stripe/esm/resources/Treasury/CreditReversals.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_StripeResource();
    stripeMethod18 = StripeResource.method;
    CreditReversals = StripeResource.extend({
      create: stripeMethod18({
        method: "POST",
        fullPath: "/v1/treasury/credit_reversals"
      }),
      retrieve: stripeMethod18({
        method: "GET",
        fullPath: "/v1/treasury/credit_reversals/{credit_reversal}"
      }),
      list: stripeMethod18({
        method: "GET",
        fullPath: "/v1/treasury/credit_reversals",
        methodType: "list"
      })
    });
  }
});
var stripeMethod19;
var Customers;
var init_Customers = __esm({
  "../node_modules/stripe/esm/resources/TestHelpers/Customers.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_StripeResource();
    stripeMethod19 = StripeResource.method;
    Customers = StripeResource.extend({
      fundCashBalance: stripeMethod19({
        method: "POST",
        fullPath: "/v1/test_helpers/customers/{customer}/fund_cash_balance"
      })
    });
  }
});
var stripeMethod20;
var DebitReversals;
var init_DebitReversals = __esm({
  "../node_modules/stripe/esm/resources/Treasury/DebitReversals.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_StripeResource();
    stripeMethod20 = StripeResource.method;
    DebitReversals = StripeResource.extend({
      create: stripeMethod20({
        method: "POST",
        fullPath: "/v1/treasury/debit_reversals"
      }),
      retrieve: stripeMethod20({
        method: "GET",
        fullPath: "/v1/treasury/debit_reversals/{debit_reversal}"
      }),
      list: stripeMethod20({
        method: "GET",
        fullPath: "/v1/treasury/debit_reversals",
        methodType: "list"
      })
    });
  }
});
var stripeMethod21;
var Disputes;
var init_Disputes = __esm({
  "../node_modules/stripe/esm/resources/Issuing/Disputes.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_StripeResource();
    stripeMethod21 = StripeResource.method;
    Disputes = StripeResource.extend({
      create: stripeMethod21({ method: "POST", fullPath: "/v1/issuing/disputes" }),
      retrieve: stripeMethod21({
        method: "GET",
        fullPath: "/v1/issuing/disputes/{dispute}"
      }),
      update: stripeMethod21({
        method: "POST",
        fullPath: "/v1/issuing/disputes/{dispute}"
      }),
      list: stripeMethod21({
        method: "GET",
        fullPath: "/v1/issuing/disputes",
        methodType: "list"
      }),
      submit: stripeMethod21({
        method: "POST",
        fullPath: "/v1/issuing/disputes/{dispute}/submit"
      })
    });
  }
});
var stripeMethod22;
var EarlyFraudWarnings;
var init_EarlyFraudWarnings = __esm({
  "../node_modules/stripe/esm/resources/Radar/EarlyFraudWarnings.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_StripeResource();
    stripeMethod22 = StripeResource.method;
    EarlyFraudWarnings = StripeResource.extend({
      retrieve: stripeMethod22({
        method: "GET",
        fullPath: "/v1/radar/early_fraud_warnings/{early_fraud_warning}"
      }),
      list: stripeMethod22({
        method: "GET",
        fullPath: "/v1/radar/early_fraud_warnings",
        methodType: "list"
      })
    });
  }
});
var stripeMethod23;
var EventDestinations;
var init_EventDestinations = __esm({
  "../node_modules/stripe/esm/resources/V2/Core/EventDestinations.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_StripeResource();
    stripeMethod23 = StripeResource.method;
    EventDestinations = StripeResource.extend({
      create: stripeMethod23({
        method: "POST",
        fullPath: "/v2/core/event_destinations"
      }),
      retrieve: stripeMethod23({
        method: "GET",
        fullPath: "/v2/core/event_destinations/{id}"
      }),
      update: stripeMethod23({
        method: "POST",
        fullPath: "/v2/core/event_destinations/{id}"
      }),
      list: stripeMethod23({
        method: "GET",
        fullPath: "/v2/core/event_destinations",
        methodType: "list"
      }),
      del: stripeMethod23({
        method: "DELETE",
        fullPath: "/v2/core/event_destinations/{id}"
      }),
      disable: stripeMethod23({
        method: "POST",
        fullPath: "/v2/core/event_destinations/{id}/disable"
      }),
      enable: stripeMethod23({
        method: "POST",
        fullPath: "/v2/core/event_destinations/{id}/enable"
      }),
      ping: stripeMethod23({
        method: "POST",
        fullPath: "/v2/core/event_destinations/{id}/ping"
      })
    });
  }
});
var stripeMethod24;
var Events;
var init_Events = __esm({
  "../node_modules/stripe/esm/resources/V2/Core/Events.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_StripeResource();
    stripeMethod24 = StripeResource.method;
    Events = StripeResource.extend({
      retrieve(...args) {
        const transformResponseData = /* @__PURE__ */ __name2((response) => {
          return this.addFetchRelatedObjectIfNeeded(response);
        }, "transformResponseData");
        return stripeMethod24({
          method: "GET",
          fullPath: "/v2/core/events/{id}",
          transformResponseData
        }).apply(this, args);
      },
      list(...args) {
        const transformResponseData = /* @__PURE__ */ __name2((response) => {
          return Object.assign(Object.assign({}, response), { data: response.data.map(this.addFetchRelatedObjectIfNeeded.bind(this)) });
        }, "transformResponseData");
        return stripeMethod24({
          method: "GET",
          fullPath: "/v2/core/events",
          methodType: "list",
          transformResponseData
        }).apply(this, args);
      },
      /**
       * @private
       *
       * For internal use in stripe-node.
       *
       * @param pulledEvent The retrieved event object
       * @returns The retrieved event object with a fetchRelatedObject method,
       * if pulledEvent.related_object is valid (non-null and has a url)
       */
      addFetchRelatedObjectIfNeeded(pulledEvent) {
        if (!pulledEvent.related_object || !pulledEvent.related_object.url) {
          return pulledEvent;
        }
        return Object.assign(Object.assign({}, pulledEvent), { fetchRelatedObject: /* @__PURE__ */ __name2(() => (
          // call stripeMethod with 'this' resource to fetch
          // the related object. 'this' is needed to construct
          // and send the request, but the method spec controls
          // the url endpoint and method, so it doesn't matter
          // that 'this' is an Events resource object here
          stripeMethod24({
            method: "GET",
            fullPath: pulledEvent.related_object.url
          }).apply(this, [
            {
              stripeAccount: pulledEvent.context
            }
          ])
        ), "fetchRelatedObject") });
      }
    });
  }
});
var stripeMethod25;
var Features;
var init_Features = __esm({
  "../node_modules/stripe/esm/resources/Entitlements/Features.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_StripeResource();
    stripeMethod25 = StripeResource.method;
    Features = StripeResource.extend({
      create: stripeMethod25({ method: "POST", fullPath: "/v1/entitlements/features" }),
      retrieve: stripeMethod25({
        method: "GET",
        fullPath: "/v1/entitlements/features/{id}"
      }),
      update: stripeMethod25({
        method: "POST",
        fullPath: "/v1/entitlements/features/{id}"
      }),
      list: stripeMethod25({
        method: "GET",
        fullPath: "/v1/entitlements/features",
        methodType: "list"
      })
    });
  }
});
var stripeMethod26;
var FinancialAccounts;
var init_FinancialAccounts = __esm({
  "../node_modules/stripe/esm/resources/Treasury/FinancialAccounts.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_StripeResource();
    stripeMethod26 = StripeResource.method;
    FinancialAccounts = StripeResource.extend({
      create: stripeMethod26({
        method: "POST",
        fullPath: "/v1/treasury/financial_accounts"
      }),
      retrieve: stripeMethod26({
        method: "GET",
        fullPath: "/v1/treasury/financial_accounts/{financial_account}"
      }),
      update: stripeMethod26({
        method: "POST",
        fullPath: "/v1/treasury/financial_accounts/{financial_account}"
      }),
      list: stripeMethod26({
        method: "GET",
        fullPath: "/v1/treasury/financial_accounts",
        methodType: "list"
      }),
      close: stripeMethod26({
        method: "POST",
        fullPath: "/v1/treasury/financial_accounts/{financial_account}/close"
      }),
      retrieveFeatures: stripeMethod26({
        method: "GET",
        fullPath: "/v1/treasury/financial_accounts/{financial_account}/features"
      }),
      updateFeatures: stripeMethod26({
        method: "POST",
        fullPath: "/v1/treasury/financial_accounts/{financial_account}/features"
      })
    });
  }
});
var stripeMethod27;
var InboundTransfers;
var init_InboundTransfers = __esm({
  "../node_modules/stripe/esm/resources/TestHelpers/Treasury/InboundTransfers.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_StripeResource();
    stripeMethod27 = StripeResource.method;
    InboundTransfers = StripeResource.extend({
      fail: stripeMethod27({
        method: "POST",
        fullPath: "/v1/test_helpers/treasury/inbound_transfers/{id}/fail"
      }),
      returnInboundTransfer: stripeMethod27({
        method: "POST",
        fullPath: "/v1/test_helpers/treasury/inbound_transfers/{id}/return"
      }),
      succeed: stripeMethod27({
        method: "POST",
        fullPath: "/v1/test_helpers/treasury/inbound_transfers/{id}/succeed"
      })
    });
  }
});
var stripeMethod28;
var InboundTransfers2;
var init_InboundTransfers2 = __esm({
  "../node_modules/stripe/esm/resources/Treasury/InboundTransfers.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_StripeResource();
    stripeMethod28 = StripeResource.method;
    InboundTransfers2 = StripeResource.extend({
      create: stripeMethod28({
        method: "POST",
        fullPath: "/v1/treasury/inbound_transfers"
      }),
      retrieve: stripeMethod28({
        method: "GET",
        fullPath: "/v1/treasury/inbound_transfers/{id}"
      }),
      list: stripeMethod28({
        method: "GET",
        fullPath: "/v1/treasury/inbound_transfers",
        methodType: "list"
      }),
      cancel: stripeMethod28({
        method: "POST",
        fullPath: "/v1/treasury/inbound_transfers/{inbound_transfer}/cancel"
      })
    });
  }
});
var stripeMethod29;
var Locations;
var init_Locations = __esm({
  "../node_modules/stripe/esm/resources/Terminal/Locations.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_StripeResource();
    stripeMethod29 = StripeResource.method;
    Locations = StripeResource.extend({
      create: stripeMethod29({ method: "POST", fullPath: "/v1/terminal/locations" }),
      retrieve: stripeMethod29({
        method: "GET",
        fullPath: "/v1/terminal/locations/{location}"
      }),
      update: stripeMethod29({
        method: "POST",
        fullPath: "/v1/terminal/locations/{location}"
      }),
      list: stripeMethod29({
        method: "GET",
        fullPath: "/v1/terminal/locations",
        methodType: "list"
      }),
      del: stripeMethod29({
        method: "DELETE",
        fullPath: "/v1/terminal/locations/{location}"
      })
    });
  }
});
var stripeMethod30;
var MeterEventAdjustments;
var init_MeterEventAdjustments = __esm({
  "../node_modules/stripe/esm/resources/Billing/MeterEventAdjustments.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_StripeResource();
    stripeMethod30 = StripeResource.method;
    MeterEventAdjustments = StripeResource.extend({
      create: stripeMethod30({
        method: "POST",
        fullPath: "/v1/billing/meter_event_adjustments"
      })
    });
  }
});
var stripeMethod31;
var MeterEventAdjustments2;
var init_MeterEventAdjustments2 = __esm({
  "../node_modules/stripe/esm/resources/V2/Billing/MeterEventAdjustments.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_StripeResource();
    stripeMethod31 = StripeResource.method;
    MeterEventAdjustments2 = StripeResource.extend({
      create: stripeMethod31({
        method: "POST",
        fullPath: "/v2/billing/meter_event_adjustments"
      })
    });
  }
});
var stripeMethod32;
var MeterEventSession;
var init_MeterEventSession = __esm({
  "../node_modules/stripe/esm/resources/V2/Billing/MeterEventSession.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_StripeResource();
    stripeMethod32 = StripeResource.method;
    MeterEventSession = StripeResource.extend({
      create: stripeMethod32({
        method: "POST",
        fullPath: "/v2/billing/meter_event_session"
      })
    });
  }
});
var stripeMethod33;
var MeterEventStream;
var init_MeterEventStream = __esm({
  "../node_modules/stripe/esm/resources/V2/Billing/MeterEventStream.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_StripeResource();
    stripeMethod33 = StripeResource.method;
    MeterEventStream = StripeResource.extend({
      create: stripeMethod33({
        method: "POST",
        fullPath: "/v2/billing/meter_event_stream",
        host: "meter-events.stripe.com"
      })
    });
  }
});
var stripeMethod34;
var MeterEvents;
var init_MeterEvents = __esm({
  "../node_modules/stripe/esm/resources/Billing/MeterEvents.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_StripeResource();
    stripeMethod34 = StripeResource.method;
    MeterEvents = StripeResource.extend({
      create: stripeMethod34({ method: "POST", fullPath: "/v1/billing/meter_events" })
    });
  }
});
var stripeMethod35;
var MeterEvents2;
var init_MeterEvents2 = __esm({
  "../node_modules/stripe/esm/resources/V2/Billing/MeterEvents.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_StripeResource();
    stripeMethod35 = StripeResource.method;
    MeterEvents2 = StripeResource.extend({
      create: stripeMethod35({ method: "POST", fullPath: "/v2/billing/meter_events" })
    });
  }
});
var stripeMethod36;
var Meters;
var init_Meters = __esm({
  "../node_modules/stripe/esm/resources/Billing/Meters.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_StripeResource();
    stripeMethod36 = StripeResource.method;
    Meters = StripeResource.extend({
      create: stripeMethod36({ method: "POST", fullPath: "/v1/billing/meters" }),
      retrieve: stripeMethod36({ method: "GET", fullPath: "/v1/billing/meters/{id}" }),
      update: stripeMethod36({ method: "POST", fullPath: "/v1/billing/meters/{id}" }),
      list: stripeMethod36({
        method: "GET",
        fullPath: "/v1/billing/meters",
        methodType: "list"
      }),
      deactivate: stripeMethod36({
        method: "POST",
        fullPath: "/v1/billing/meters/{id}/deactivate"
      }),
      listEventSummaries: stripeMethod36({
        method: "GET",
        fullPath: "/v1/billing/meters/{id}/event_summaries",
        methodType: "list"
      }),
      reactivate: stripeMethod36({
        method: "POST",
        fullPath: "/v1/billing/meters/{id}/reactivate"
      })
    });
  }
});
var stripeMethod37;
var Orders;
var init_Orders = __esm({
  "../node_modules/stripe/esm/resources/Climate/Orders.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_StripeResource();
    stripeMethod37 = StripeResource.method;
    Orders = StripeResource.extend({
      create: stripeMethod37({ method: "POST", fullPath: "/v1/climate/orders" }),
      retrieve: stripeMethod37({
        method: "GET",
        fullPath: "/v1/climate/orders/{order}"
      }),
      update: stripeMethod37({
        method: "POST",
        fullPath: "/v1/climate/orders/{order}"
      }),
      list: stripeMethod37({
        method: "GET",
        fullPath: "/v1/climate/orders",
        methodType: "list"
      }),
      cancel: stripeMethod37({
        method: "POST",
        fullPath: "/v1/climate/orders/{order}/cancel"
      })
    });
  }
});
var stripeMethod38;
var OutboundPayments;
var init_OutboundPayments = __esm({
  "../node_modules/stripe/esm/resources/TestHelpers/Treasury/OutboundPayments.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_StripeResource();
    stripeMethod38 = StripeResource.method;
    OutboundPayments = StripeResource.extend({
      update: stripeMethod38({
        method: "POST",
        fullPath: "/v1/test_helpers/treasury/outbound_payments/{id}"
      }),
      fail: stripeMethod38({
        method: "POST",
        fullPath: "/v1/test_helpers/treasury/outbound_payments/{id}/fail"
      }),
      post: stripeMethod38({
        method: "POST",
        fullPath: "/v1/test_helpers/treasury/outbound_payments/{id}/post"
      }),
      returnOutboundPayment: stripeMethod38({
        method: "POST",
        fullPath: "/v1/test_helpers/treasury/outbound_payments/{id}/return"
      })
    });
  }
});
var stripeMethod39;
var OutboundPayments2;
var init_OutboundPayments2 = __esm({
  "../node_modules/stripe/esm/resources/Treasury/OutboundPayments.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_StripeResource();
    stripeMethod39 = StripeResource.method;
    OutboundPayments2 = StripeResource.extend({
      create: stripeMethod39({
        method: "POST",
        fullPath: "/v1/treasury/outbound_payments"
      }),
      retrieve: stripeMethod39({
        method: "GET",
        fullPath: "/v1/treasury/outbound_payments/{id}"
      }),
      list: stripeMethod39({
        method: "GET",
        fullPath: "/v1/treasury/outbound_payments",
        methodType: "list"
      }),
      cancel: stripeMethod39({
        method: "POST",
        fullPath: "/v1/treasury/outbound_payments/{id}/cancel"
      })
    });
  }
});
var stripeMethod40;
var OutboundTransfers;
var init_OutboundTransfers = __esm({
  "../node_modules/stripe/esm/resources/TestHelpers/Treasury/OutboundTransfers.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_StripeResource();
    stripeMethod40 = StripeResource.method;
    OutboundTransfers = StripeResource.extend({
      update: stripeMethod40({
        method: "POST",
        fullPath: "/v1/test_helpers/treasury/outbound_transfers/{outbound_transfer}"
      }),
      fail: stripeMethod40({
        method: "POST",
        fullPath: "/v1/test_helpers/treasury/outbound_transfers/{outbound_transfer}/fail"
      }),
      post: stripeMethod40({
        method: "POST",
        fullPath: "/v1/test_helpers/treasury/outbound_transfers/{outbound_transfer}/post"
      }),
      returnOutboundTransfer: stripeMethod40({
        method: "POST",
        fullPath: "/v1/test_helpers/treasury/outbound_transfers/{outbound_transfer}/return"
      })
    });
  }
});
var stripeMethod41;
var OutboundTransfers2;
var init_OutboundTransfers2 = __esm({
  "../node_modules/stripe/esm/resources/Treasury/OutboundTransfers.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_StripeResource();
    stripeMethod41 = StripeResource.method;
    OutboundTransfers2 = StripeResource.extend({
      create: stripeMethod41({
        method: "POST",
        fullPath: "/v1/treasury/outbound_transfers"
      }),
      retrieve: stripeMethod41({
        method: "GET",
        fullPath: "/v1/treasury/outbound_transfers/{outbound_transfer}"
      }),
      list: stripeMethod41({
        method: "GET",
        fullPath: "/v1/treasury/outbound_transfers",
        methodType: "list"
      }),
      cancel: stripeMethod41({
        method: "POST",
        fullPath: "/v1/treasury/outbound_transfers/{outbound_transfer}/cancel"
      })
    });
  }
});
var stripeMethod42;
var PersonalizationDesigns;
var init_PersonalizationDesigns = __esm({
  "../node_modules/stripe/esm/resources/TestHelpers/Issuing/PersonalizationDesigns.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_StripeResource();
    stripeMethod42 = StripeResource.method;
    PersonalizationDesigns = StripeResource.extend({
      activate: stripeMethod42({
        method: "POST",
        fullPath: "/v1/test_helpers/issuing/personalization_designs/{personalization_design}/activate"
      }),
      deactivate: stripeMethod42({
        method: "POST",
        fullPath: "/v1/test_helpers/issuing/personalization_designs/{personalization_design}/deactivate"
      }),
      reject: stripeMethod42({
        method: "POST",
        fullPath: "/v1/test_helpers/issuing/personalization_designs/{personalization_design}/reject"
      })
    });
  }
});
var stripeMethod43;
var PersonalizationDesigns2;
var init_PersonalizationDesigns2 = __esm({
  "../node_modules/stripe/esm/resources/Issuing/PersonalizationDesigns.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_StripeResource();
    stripeMethod43 = StripeResource.method;
    PersonalizationDesigns2 = StripeResource.extend({
      create: stripeMethod43({
        method: "POST",
        fullPath: "/v1/issuing/personalization_designs"
      }),
      retrieve: stripeMethod43({
        method: "GET",
        fullPath: "/v1/issuing/personalization_designs/{personalization_design}"
      }),
      update: stripeMethod43({
        method: "POST",
        fullPath: "/v1/issuing/personalization_designs/{personalization_design}"
      }),
      list: stripeMethod43({
        method: "GET",
        fullPath: "/v1/issuing/personalization_designs",
        methodType: "list"
      })
    });
  }
});
var stripeMethod44;
var PhysicalBundles;
var init_PhysicalBundles = __esm({
  "../node_modules/stripe/esm/resources/Issuing/PhysicalBundles.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_StripeResource();
    stripeMethod44 = StripeResource.method;
    PhysicalBundles = StripeResource.extend({
      retrieve: stripeMethod44({
        method: "GET",
        fullPath: "/v1/issuing/physical_bundles/{physical_bundle}"
      }),
      list: stripeMethod44({
        method: "GET",
        fullPath: "/v1/issuing/physical_bundles",
        methodType: "list"
      })
    });
  }
});
var stripeMethod45;
var Products;
var init_Products = __esm({
  "../node_modules/stripe/esm/resources/Climate/Products.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_StripeResource();
    stripeMethod45 = StripeResource.method;
    Products = StripeResource.extend({
      retrieve: stripeMethod45({
        method: "GET",
        fullPath: "/v1/climate/products/{product}"
      }),
      list: stripeMethod45({
        method: "GET",
        fullPath: "/v1/climate/products",
        methodType: "list"
      })
    });
  }
});
var stripeMethod46;
var Readers;
var init_Readers = __esm({
  "../node_modules/stripe/esm/resources/TestHelpers/Terminal/Readers.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_StripeResource();
    stripeMethod46 = StripeResource.method;
    Readers = StripeResource.extend({
      presentPaymentMethod: stripeMethod46({
        method: "POST",
        fullPath: "/v1/test_helpers/terminal/readers/{reader}/present_payment_method"
      }),
      succeedInputCollection: stripeMethod46({
        method: "POST",
        fullPath: "/v1/test_helpers/terminal/readers/{reader}/succeed_input_collection"
      }),
      timeoutInputCollection: stripeMethod46({
        method: "POST",
        fullPath: "/v1/test_helpers/terminal/readers/{reader}/timeout_input_collection"
      })
    });
  }
});
var stripeMethod47;
var Readers2;
var init_Readers2 = __esm({
  "../node_modules/stripe/esm/resources/Terminal/Readers.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_StripeResource();
    stripeMethod47 = StripeResource.method;
    Readers2 = StripeResource.extend({
      create: stripeMethod47({ method: "POST", fullPath: "/v1/terminal/readers" }),
      retrieve: stripeMethod47({
        method: "GET",
        fullPath: "/v1/terminal/readers/{reader}"
      }),
      update: stripeMethod47({
        method: "POST",
        fullPath: "/v1/terminal/readers/{reader}"
      }),
      list: stripeMethod47({
        method: "GET",
        fullPath: "/v1/terminal/readers",
        methodType: "list"
      }),
      del: stripeMethod47({
        method: "DELETE",
        fullPath: "/v1/terminal/readers/{reader}"
      }),
      cancelAction: stripeMethod47({
        method: "POST",
        fullPath: "/v1/terminal/readers/{reader}/cancel_action"
      }),
      collectInputs: stripeMethod47({
        method: "POST",
        fullPath: "/v1/terminal/readers/{reader}/collect_inputs"
      }),
      collectPaymentMethod: stripeMethod47({
        method: "POST",
        fullPath: "/v1/terminal/readers/{reader}/collect_payment_method"
      }),
      confirmPaymentIntent: stripeMethod47({
        method: "POST",
        fullPath: "/v1/terminal/readers/{reader}/confirm_payment_intent"
      }),
      processPaymentIntent: stripeMethod47({
        method: "POST",
        fullPath: "/v1/terminal/readers/{reader}/process_payment_intent"
      }),
      processSetupIntent: stripeMethod47({
        method: "POST",
        fullPath: "/v1/terminal/readers/{reader}/process_setup_intent"
      }),
      refundPayment: stripeMethod47({
        method: "POST",
        fullPath: "/v1/terminal/readers/{reader}/refund_payment"
      }),
      setReaderDisplay: stripeMethod47({
        method: "POST",
        fullPath: "/v1/terminal/readers/{reader}/set_reader_display"
      })
    });
  }
});
var stripeMethod48;
var ReceivedCredits;
var init_ReceivedCredits = __esm({
  "../node_modules/stripe/esm/resources/TestHelpers/Treasury/ReceivedCredits.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_StripeResource();
    stripeMethod48 = StripeResource.method;
    ReceivedCredits = StripeResource.extend({
      create: stripeMethod48({
        method: "POST",
        fullPath: "/v1/test_helpers/treasury/received_credits"
      })
    });
  }
});
var stripeMethod49;
var ReceivedCredits2;
var init_ReceivedCredits2 = __esm({
  "../node_modules/stripe/esm/resources/Treasury/ReceivedCredits.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_StripeResource();
    stripeMethod49 = StripeResource.method;
    ReceivedCredits2 = StripeResource.extend({
      retrieve: stripeMethod49({
        method: "GET",
        fullPath: "/v1/treasury/received_credits/{id}"
      }),
      list: stripeMethod49({
        method: "GET",
        fullPath: "/v1/treasury/received_credits",
        methodType: "list"
      })
    });
  }
});
var stripeMethod50;
var ReceivedDebits;
var init_ReceivedDebits = __esm({
  "../node_modules/stripe/esm/resources/TestHelpers/Treasury/ReceivedDebits.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_StripeResource();
    stripeMethod50 = StripeResource.method;
    ReceivedDebits = StripeResource.extend({
      create: stripeMethod50({
        method: "POST",
        fullPath: "/v1/test_helpers/treasury/received_debits"
      })
    });
  }
});
var stripeMethod51;
var ReceivedDebits2;
var init_ReceivedDebits2 = __esm({
  "../node_modules/stripe/esm/resources/Treasury/ReceivedDebits.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_StripeResource();
    stripeMethod51 = StripeResource.method;
    ReceivedDebits2 = StripeResource.extend({
      retrieve: stripeMethod51({
        method: "GET",
        fullPath: "/v1/treasury/received_debits/{id}"
      }),
      list: stripeMethod51({
        method: "GET",
        fullPath: "/v1/treasury/received_debits",
        methodType: "list"
      })
    });
  }
});
var stripeMethod52;
var Refunds;
var init_Refunds = __esm({
  "../node_modules/stripe/esm/resources/TestHelpers/Refunds.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_StripeResource();
    stripeMethod52 = StripeResource.method;
    Refunds = StripeResource.extend({
      expire: stripeMethod52({
        method: "POST",
        fullPath: "/v1/test_helpers/refunds/{refund}/expire"
      })
    });
  }
});
var stripeMethod53;
var Registrations;
var init_Registrations = __esm({
  "../node_modules/stripe/esm/resources/Tax/Registrations.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_StripeResource();
    stripeMethod53 = StripeResource.method;
    Registrations = StripeResource.extend({
      create: stripeMethod53({ method: "POST", fullPath: "/v1/tax/registrations" }),
      retrieve: stripeMethod53({
        method: "GET",
        fullPath: "/v1/tax/registrations/{id}"
      }),
      update: stripeMethod53({
        method: "POST",
        fullPath: "/v1/tax/registrations/{id}"
      }),
      list: stripeMethod53({
        method: "GET",
        fullPath: "/v1/tax/registrations",
        methodType: "list"
      })
    });
  }
});
var stripeMethod54;
var ReportRuns;
var init_ReportRuns = __esm({
  "../node_modules/stripe/esm/resources/Reporting/ReportRuns.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_StripeResource();
    stripeMethod54 = StripeResource.method;
    ReportRuns = StripeResource.extend({
      create: stripeMethod54({ method: "POST", fullPath: "/v1/reporting/report_runs" }),
      retrieve: stripeMethod54({
        method: "GET",
        fullPath: "/v1/reporting/report_runs/{report_run}"
      }),
      list: stripeMethod54({
        method: "GET",
        fullPath: "/v1/reporting/report_runs",
        methodType: "list"
      })
    });
  }
});
var stripeMethod55;
var ReportTypes;
var init_ReportTypes = __esm({
  "../node_modules/stripe/esm/resources/Reporting/ReportTypes.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_StripeResource();
    stripeMethod55 = StripeResource.method;
    ReportTypes = StripeResource.extend({
      retrieve: stripeMethod55({
        method: "GET",
        fullPath: "/v1/reporting/report_types/{report_type}"
      }),
      list: stripeMethod55({
        method: "GET",
        fullPath: "/v1/reporting/report_types",
        methodType: "list"
      })
    });
  }
});
var stripeMethod56;
var Requests;
var init_Requests = __esm({
  "../node_modules/stripe/esm/resources/Forwarding/Requests.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_StripeResource();
    stripeMethod56 = StripeResource.method;
    Requests = StripeResource.extend({
      create: stripeMethod56({ method: "POST", fullPath: "/v1/forwarding/requests" }),
      retrieve: stripeMethod56({
        method: "GET",
        fullPath: "/v1/forwarding/requests/{id}"
      }),
      list: stripeMethod56({
        method: "GET",
        fullPath: "/v1/forwarding/requests",
        methodType: "list"
      })
    });
  }
});
var stripeMethod57;
var ScheduledQueryRuns;
var init_ScheduledQueryRuns = __esm({
  "../node_modules/stripe/esm/resources/Sigma/ScheduledQueryRuns.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_StripeResource();
    stripeMethod57 = StripeResource.method;
    ScheduledQueryRuns = StripeResource.extend({
      retrieve: stripeMethod57({
        method: "GET",
        fullPath: "/v1/sigma/scheduled_query_runs/{scheduled_query_run}"
      }),
      list: stripeMethod57({
        method: "GET",
        fullPath: "/v1/sigma/scheduled_query_runs",
        methodType: "list"
      })
    });
  }
});
var stripeMethod58;
var Secrets;
var init_Secrets = __esm({
  "../node_modules/stripe/esm/resources/Apps/Secrets.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_StripeResource();
    stripeMethod58 = StripeResource.method;
    Secrets = StripeResource.extend({
      create: stripeMethod58({ method: "POST", fullPath: "/v1/apps/secrets" }),
      list: stripeMethod58({
        method: "GET",
        fullPath: "/v1/apps/secrets",
        methodType: "list"
      }),
      deleteWhere: stripeMethod58({
        method: "POST",
        fullPath: "/v1/apps/secrets/delete"
      }),
      find: stripeMethod58({ method: "GET", fullPath: "/v1/apps/secrets/find" })
    });
  }
});
var stripeMethod59;
var Sessions;
var init_Sessions = __esm({
  "../node_modules/stripe/esm/resources/BillingPortal/Sessions.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_StripeResource();
    stripeMethod59 = StripeResource.method;
    Sessions = StripeResource.extend({
      create: stripeMethod59({
        method: "POST",
        fullPath: "/v1/billing_portal/sessions"
      })
    });
  }
});
var stripeMethod60;
var Sessions2;
var init_Sessions2 = __esm({
  "../node_modules/stripe/esm/resources/Checkout/Sessions.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_StripeResource();
    stripeMethod60 = StripeResource.method;
    Sessions2 = StripeResource.extend({
      create: stripeMethod60({ method: "POST", fullPath: "/v1/checkout/sessions" }),
      retrieve: stripeMethod60({
        method: "GET",
        fullPath: "/v1/checkout/sessions/{session}"
      }),
      update: stripeMethod60({
        method: "POST",
        fullPath: "/v1/checkout/sessions/{session}"
      }),
      list: stripeMethod60({
        method: "GET",
        fullPath: "/v1/checkout/sessions",
        methodType: "list"
      }),
      expire: stripeMethod60({
        method: "POST",
        fullPath: "/v1/checkout/sessions/{session}/expire"
      }),
      listLineItems: stripeMethod60({
        method: "GET",
        fullPath: "/v1/checkout/sessions/{session}/line_items",
        methodType: "list"
      })
    });
  }
});
var stripeMethod61;
var Sessions3;
var init_Sessions3 = __esm({
  "../node_modules/stripe/esm/resources/FinancialConnections/Sessions.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_StripeResource();
    stripeMethod61 = StripeResource.method;
    Sessions3 = StripeResource.extend({
      create: stripeMethod61({
        method: "POST",
        fullPath: "/v1/financial_connections/sessions"
      }),
      retrieve: stripeMethod61({
        method: "GET",
        fullPath: "/v1/financial_connections/sessions/{session}"
      })
    });
  }
});
var stripeMethod62;
var Settings;
var init_Settings = __esm({
  "../node_modules/stripe/esm/resources/Tax/Settings.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_StripeResource();
    stripeMethod62 = StripeResource.method;
    Settings = StripeResource.extend({
      retrieve: stripeMethod62({ method: "GET", fullPath: "/v1/tax/settings" }),
      update: stripeMethod62({ method: "POST", fullPath: "/v1/tax/settings" })
    });
  }
});
var stripeMethod63;
var Suppliers;
var init_Suppliers = __esm({
  "../node_modules/stripe/esm/resources/Climate/Suppliers.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_StripeResource();
    stripeMethod63 = StripeResource.method;
    Suppliers = StripeResource.extend({
      retrieve: stripeMethod63({
        method: "GET",
        fullPath: "/v1/climate/suppliers/{supplier}"
      }),
      list: stripeMethod63({
        method: "GET",
        fullPath: "/v1/climate/suppliers",
        methodType: "list"
      })
    });
  }
});
var stripeMethod64;
var TestClocks;
var init_TestClocks = __esm({
  "../node_modules/stripe/esm/resources/TestHelpers/TestClocks.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_StripeResource();
    stripeMethod64 = StripeResource.method;
    TestClocks = StripeResource.extend({
      create: stripeMethod64({
        method: "POST",
        fullPath: "/v1/test_helpers/test_clocks"
      }),
      retrieve: stripeMethod64({
        method: "GET",
        fullPath: "/v1/test_helpers/test_clocks/{test_clock}"
      }),
      list: stripeMethod64({
        method: "GET",
        fullPath: "/v1/test_helpers/test_clocks",
        methodType: "list"
      }),
      del: stripeMethod64({
        method: "DELETE",
        fullPath: "/v1/test_helpers/test_clocks/{test_clock}"
      }),
      advance: stripeMethod64({
        method: "POST",
        fullPath: "/v1/test_helpers/test_clocks/{test_clock}/advance"
      })
    });
  }
});
var stripeMethod65;
var Tokens;
var init_Tokens = __esm({
  "../node_modules/stripe/esm/resources/Issuing/Tokens.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_StripeResource();
    stripeMethod65 = StripeResource.method;
    Tokens = StripeResource.extend({
      retrieve: stripeMethod65({
        method: "GET",
        fullPath: "/v1/issuing/tokens/{token}"
      }),
      update: stripeMethod65({
        method: "POST",
        fullPath: "/v1/issuing/tokens/{token}"
      }),
      list: stripeMethod65({
        method: "GET",
        fullPath: "/v1/issuing/tokens",
        methodType: "list"
      })
    });
  }
});
var stripeMethod66;
var TransactionEntries;
var init_TransactionEntries = __esm({
  "../node_modules/stripe/esm/resources/Treasury/TransactionEntries.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_StripeResource();
    stripeMethod66 = StripeResource.method;
    TransactionEntries = StripeResource.extend({
      retrieve: stripeMethod66({
        method: "GET",
        fullPath: "/v1/treasury/transaction_entries/{id}"
      }),
      list: stripeMethod66({
        method: "GET",
        fullPath: "/v1/treasury/transaction_entries",
        methodType: "list"
      })
    });
  }
});
var stripeMethod67;
var Transactions;
var init_Transactions = __esm({
  "../node_modules/stripe/esm/resources/TestHelpers/Issuing/Transactions.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_StripeResource();
    stripeMethod67 = StripeResource.method;
    Transactions = StripeResource.extend({
      createForceCapture: stripeMethod67({
        method: "POST",
        fullPath: "/v1/test_helpers/issuing/transactions/create_force_capture"
      }),
      createUnlinkedRefund: stripeMethod67({
        method: "POST",
        fullPath: "/v1/test_helpers/issuing/transactions/create_unlinked_refund"
      }),
      refund: stripeMethod67({
        method: "POST",
        fullPath: "/v1/test_helpers/issuing/transactions/{transaction}/refund"
      })
    });
  }
});
var stripeMethod68;
var Transactions2;
var init_Transactions2 = __esm({
  "../node_modules/stripe/esm/resources/FinancialConnections/Transactions.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_StripeResource();
    stripeMethod68 = StripeResource.method;
    Transactions2 = StripeResource.extend({
      retrieve: stripeMethod68({
        method: "GET",
        fullPath: "/v1/financial_connections/transactions/{transaction}"
      }),
      list: stripeMethod68({
        method: "GET",
        fullPath: "/v1/financial_connections/transactions",
        methodType: "list"
      })
    });
  }
});
var stripeMethod69;
var Transactions3;
var init_Transactions3 = __esm({
  "../node_modules/stripe/esm/resources/Issuing/Transactions.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_StripeResource();
    stripeMethod69 = StripeResource.method;
    Transactions3 = StripeResource.extend({
      retrieve: stripeMethod69({
        method: "GET",
        fullPath: "/v1/issuing/transactions/{transaction}"
      }),
      update: stripeMethod69({
        method: "POST",
        fullPath: "/v1/issuing/transactions/{transaction}"
      }),
      list: stripeMethod69({
        method: "GET",
        fullPath: "/v1/issuing/transactions",
        methodType: "list"
      })
    });
  }
});
var stripeMethod70;
var Transactions4;
var init_Transactions4 = __esm({
  "../node_modules/stripe/esm/resources/Tax/Transactions.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_StripeResource();
    stripeMethod70 = StripeResource.method;
    Transactions4 = StripeResource.extend({
      retrieve: stripeMethod70({
        method: "GET",
        fullPath: "/v1/tax/transactions/{transaction}"
      }),
      createFromCalculation: stripeMethod70({
        method: "POST",
        fullPath: "/v1/tax/transactions/create_from_calculation"
      }),
      createReversal: stripeMethod70({
        method: "POST",
        fullPath: "/v1/tax/transactions/create_reversal"
      }),
      listLineItems: stripeMethod70({
        method: "GET",
        fullPath: "/v1/tax/transactions/{transaction}/line_items",
        methodType: "list"
      })
    });
  }
});
var stripeMethod71;
var Transactions5;
var init_Transactions5 = __esm({
  "../node_modules/stripe/esm/resources/Treasury/Transactions.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_StripeResource();
    stripeMethod71 = StripeResource.method;
    Transactions5 = StripeResource.extend({
      retrieve: stripeMethod71({
        method: "GET",
        fullPath: "/v1/treasury/transactions/{id}"
      }),
      list: stripeMethod71({
        method: "GET",
        fullPath: "/v1/treasury/transactions",
        methodType: "list"
      })
    });
  }
});
var stripeMethod72;
var ValueListItems;
var init_ValueListItems = __esm({
  "../node_modules/stripe/esm/resources/Radar/ValueListItems.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_StripeResource();
    stripeMethod72 = StripeResource.method;
    ValueListItems = StripeResource.extend({
      create: stripeMethod72({
        method: "POST",
        fullPath: "/v1/radar/value_list_items"
      }),
      retrieve: stripeMethod72({
        method: "GET",
        fullPath: "/v1/radar/value_list_items/{item}"
      }),
      list: stripeMethod72({
        method: "GET",
        fullPath: "/v1/radar/value_list_items",
        methodType: "list"
      }),
      del: stripeMethod72({
        method: "DELETE",
        fullPath: "/v1/radar/value_list_items/{item}"
      })
    });
  }
});
var stripeMethod73;
var ValueLists;
var init_ValueLists = __esm({
  "../node_modules/stripe/esm/resources/Radar/ValueLists.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_StripeResource();
    stripeMethod73 = StripeResource.method;
    ValueLists = StripeResource.extend({
      create: stripeMethod73({ method: "POST", fullPath: "/v1/radar/value_lists" }),
      retrieve: stripeMethod73({
        method: "GET",
        fullPath: "/v1/radar/value_lists/{value_list}"
      }),
      update: stripeMethod73({
        method: "POST",
        fullPath: "/v1/radar/value_lists/{value_list}"
      }),
      list: stripeMethod73({
        method: "GET",
        fullPath: "/v1/radar/value_lists",
        methodType: "list"
      }),
      del: stripeMethod73({
        method: "DELETE",
        fullPath: "/v1/radar/value_lists/{value_list}"
      })
    });
  }
});
var stripeMethod74;
var VerificationReports;
var init_VerificationReports = __esm({
  "../node_modules/stripe/esm/resources/Identity/VerificationReports.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_StripeResource();
    stripeMethod74 = StripeResource.method;
    VerificationReports = StripeResource.extend({
      retrieve: stripeMethod74({
        method: "GET",
        fullPath: "/v1/identity/verification_reports/{report}"
      }),
      list: stripeMethod74({
        method: "GET",
        fullPath: "/v1/identity/verification_reports",
        methodType: "list"
      })
    });
  }
});
var stripeMethod75;
var VerificationSessions;
var init_VerificationSessions = __esm({
  "../node_modules/stripe/esm/resources/Identity/VerificationSessions.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_StripeResource();
    stripeMethod75 = StripeResource.method;
    VerificationSessions = StripeResource.extend({
      create: stripeMethod75({
        method: "POST",
        fullPath: "/v1/identity/verification_sessions"
      }),
      retrieve: stripeMethod75({
        method: "GET",
        fullPath: "/v1/identity/verification_sessions/{session}"
      }),
      update: stripeMethod75({
        method: "POST",
        fullPath: "/v1/identity/verification_sessions/{session}"
      }),
      list: stripeMethod75({
        method: "GET",
        fullPath: "/v1/identity/verification_sessions",
        methodType: "list"
      }),
      cancel: stripeMethod75({
        method: "POST",
        fullPath: "/v1/identity/verification_sessions/{session}/cancel"
      }),
      redact: stripeMethod75({
        method: "POST",
        fullPath: "/v1/identity/verification_sessions/{session}/redact"
      })
    });
  }
});
var stripeMethod76;
var Accounts2;
var init_Accounts2 = __esm({
  "../node_modules/stripe/esm/resources/Accounts.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_StripeResource();
    stripeMethod76 = StripeResource.method;
    Accounts2 = StripeResource.extend({
      create: stripeMethod76({ method: "POST", fullPath: "/v1/accounts" }),
      retrieve(id, ...args) {
        if (typeof id === "string") {
          return stripeMethod76({
            method: "GET",
            fullPath: "/v1/accounts/{id}"
          }).apply(this, [id, ...args]);
        } else {
          if (id === null || id === void 0) {
            [].shift.apply([id, ...args]);
          }
          return stripeMethod76({
            method: "GET",
            fullPath: "/v1/account"
          }).apply(this, [id, ...args]);
        }
      },
      update: stripeMethod76({ method: "POST", fullPath: "/v1/accounts/{account}" }),
      list: stripeMethod76({
        method: "GET",
        fullPath: "/v1/accounts",
        methodType: "list"
      }),
      del: stripeMethod76({ method: "DELETE", fullPath: "/v1/accounts/{account}" }),
      createExternalAccount: stripeMethod76({
        method: "POST",
        fullPath: "/v1/accounts/{account}/external_accounts"
      }),
      createLoginLink: stripeMethod76({
        method: "POST",
        fullPath: "/v1/accounts/{account}/login_links"
      }),
      createPerson: stripeMethod76({
        method: "POST",
        fullPath: "/v1/accounts/{account}/persons"
      }),
      deleteExternalAccount: stripeMethod76({
        method: "DELETE",
        fullPath: "/v1/accounts/{account}/external_accounts/{id}"
      }),
      deletePerson: stripeMethod76({
        method: "DELETE",
        fullPath: "/v1/accounts/{account}/persons/{person}"
      }),
      listCapabilities: stripeMethod76({
        method: "GET",
        fullPath: "/v1/accounts/{account}/capabilities",
        methodType: "list"
      }),
      listExternalAccounts: stripeMethod76({
        method: "GET",
        fullPath: "/v1/accounts/{account}/external_accounts",
        methodType: "list"
      }),
      listPersons: stripeMethod76({
        method: "GET",
        fullPath: "/v1/accounts/{account}/persons",
        methodType: "list"
      }),
      reject: stripeMethod76({
        method: "POST",
        fullPath: "/v1/accounts/{account}/reject"
      }),
      retrieveCurrent: stripeMethod76({ method: "GET", fullPath: "/v1/account" }),
      retrieveCapability: stripeMethod76({
        method: "GET",
        fullPath: "/v1/accounts/{account}/capabilities/{capability}"
      }),
      retrieveExternalAccount: stripeMethod76({
        method: "GET",
        fullPath: "/v1/accounts/{account}/external_accounts/{id}"
      }),
      retrievePerson: stripeMethod76({
        method: "GET",
        fullPath: "/v1/accounts/{account}/persons/{person}"
      }),
      updateCapability: stripeMethod76({
        method: "POST",
        fullPath: "/v1/accounts/{account}/capabilities/{capability}"
      }),
      updateExternalAccount: stripeMethod76({
        method: "POST",
        fullPath: "/v1/accounts/{account}/external_accounts/{id}"
      }),
      updatePerson: stripeMethod76({
        method: "POST",
        fullPath: "/v1/accounts/{account}/persons/{person}"
      })
    });
  }
});
var stripeMethod77;
var AccountLinks;
var init_AccountLinks = __esm({
  "../node_modules/stripe/esm/resources/AccountLinks.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_StripeResource();
    stripeMethod77 = StripeResource.method;
    AccountLinks = StripeResource.extend({
      create: stripeMethod77({ method: "POST", fullPath: "/v1/account_links" })
    });
  }
});
var stripeMethod78;
var AccountSessions;
var init_AccountSessions = __esm({
  "../node_modules/stripe/esm/resources/AccountSessions.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_StripeResource();
    stripeMethod78 = StripeResource.method;
    AccountSessions = StripeResource.extend({
      create: stripeMethod78({ method: "POST", fullPath: "/v1/account_sessions" })
    });
  }
});
var stripeMethod79;
var ApplePayDomains;
var init_ApplePayDomains = __esm({
  "../node_modules/stripe/esm/resources/ApplePayDomains.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_StripeResource();
    stripeMethod79 = StripeResource.method;
    ApplePayDomains = StripeResource.extend({
      create: stripeMethod79({ method: "POST", fullPath: "/v1/apple_pay/domains" }),
      retrieve: stripeMethod79({
        method: "GET",
        fullPath: "/v1/apple_pay/domains/{domain}"
      }),
      list: stripeMethod79({
        method: "GET",
        fullPath: "/v1/apple_pay/domains",
        methodType: "list"
      }),
      del: stripeMethod79({
        method: "DELETE",
        fullPath: "/v1/apple_pay/domains/{domain}"
      })
    });
  }
});
var stripeMethod80;
var ApplicationFees;
var init_ApplicationFees = __esm({
  "../node_modules/stripe/esm/resources/ApplicationFees.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_StripeResource();
    stripeMethod80 = StripeResource.method;
    ApplicationFees = StripeResource.extend({
      retrieve: stripeMethod80({
        method: "GET",
        fullPath: "/v1/application_fees/{id}"
      }),
      list: stripeMethod80({
        method: "GET",
        fullPath: "/v1/application_fees",
        methodType: "list"
      }),
      createRefund: stripeMethod80({
        method: "POST",
        fullPath: "/v1/application_fees/{id}/refunds"
      }),
      listRefunds: stripeMethod80({
        method: "GET",
        fullPath: "/v1/application_fees/{id}/refunds",
        methodType: "list"
      }),
      retrieveRefund: stripeMethod80({
        method: "GET",
        fullPath: "/v1/application_fees/{fee}/refunds/{id}"
      }),
      updateRefund: stripeMethod80({
        method: "POST",
        fullPath: "/v1/application_fees/{fee}/refunds/{id}"
      })
    });
  }
});
var stripeMethod81;
var Balance;
var init_Balance = __esm({
  "../node_modules/stripe/esm/resources/Balance.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_StripeResource();
    stripeMethod81 = StripeResource.method;
    Balance = StripeResource.extend({
      retrieve: stripeMethod81({ method: "GET", fullPath: "/v1/balance" })
    });
  }
});
var stripeMethod82;
var BalanceTransactions;
var init_BalanceTransactions = __esm({
  "../node_modules/stripe/esm/resources/BalanceTransactions.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_StripeResource();
    stripeMethod82 = StripeResource.method;
    BalanceTransactions = StripeResource.extend({
      retrieve: stripeMethod82({
        method: "GET",
        fullPath: "/v1/balance_transactions/{id}"
      }),
      list: stripeMethod82({
        method: "GET",
        fullPath: "/v1/balance_transactions",
        methodType: "list"
      })
    });
  }
});
var stripeMethod83;
var Charges;
var init_Charges = __esm({
  "../node_modules/stripe/esm/resources/Charges.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_StripeResource();
    stripeMethod83 = StripeResource.method;
    Charges = StripeResource.extend({
      create: stripeMethod83({ method: "POST", fullPath: "/v1/charges" }),
      retrieve: stripeMethod83({ method: "GET", fullPath: "/v1/charges/{charge}" }),
      update: stripeMethod83({ method: "POST", fullPath: "/v1/charges/{charge}" }),
      list: stripeMethod83({
        method: "GET",
        fullPath: "/v1/charges",
        methodType: "list"
      }),
      capture: stripeMethod83({
        method: "POST",
        fullPath: "/v1/charges/{charge}/capture"
      }),
      search: stripeMethod83({
        method: "GET",
        fullPath: "/v1/charges/search",
        methodType: "search"
      })
    });
  }
});
var stripeMethod84;
var ConfirmationTokens2;
var init_ConfirmationTokens2 = __esm({
  "../node_modules/stripe/esm/resources/ConfirmationTokens.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_StripeResource();
    stripeMethod84 = StripeResource.method;
    ConfirmationTokens2 = StripeResource.extend({
      retrieve: stripeMethod84({
        method: "GET",
        fullPath: "/v1/confirmation_tokens/{confirmation_token}"
      })
    });
  }
});
var stripeMethod85;
var CountrySpecs;
var init_CountrySpecs = __esm({
  "../node_modules/stripe/esm/resources/CountrySpecs.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_StripeResource();
    stripeMethod85 = StripeResource.method;
    CountrySpecs = StripeResource.extend({
      retrieve: stripeMethod85({
        method: "GET",
        fullPath: "/v1/country_specs/{country}"
      }),
      list: stripeMethod85({
        method: "GET",
        fullPath: "/v1/country_specs",
        methodType: "list"
      })
    });
  }
});
var stripeMethod86;
var Coupons;
var init_Coupons = __esm({
  "../node_modules/stripe/esm/resources/Coupons.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_StripeResource();
    stripeMethod86 = StripeResource.method;
    Coupons = StripeResource.extend({
      create: stripeMethod86({ method: "POST", fullPath: "/v1/coupons" }),
      retrieve: stripeMethod86({ method: "GET", fullPath: "/v1/coupons/{coupon}" }),
      update: stripeMethod86({ method: "POST", fullPath: "/v1/coupons/{coupon}" }),
      list: stripeMethod86({
        method: "GET",
        fullPath: "/v1/coupons",
        methodType: "list"
      }),
      del: stripeMethod86({ method: "DELETE", fullPath: "/v1/coupons/{coupon}" })
    });
  }
});
var stripeMethod87;
var CreditNotes;
var init_CreditNotes = __esm({
  "../node_modules/stripe/esm/resources/CreditNotes.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_StripeResource();
    stripeMethod87 = StripeResource.method;
    CreditNotes = StripeResource.extend({
      create: stripeMethod87({ method: "POST", fullPath: "/v1/credit_notes" }),
      retrieve: stripeMethod87({ method: "GET", fullPath: "/v1/credit_notes/{id}" }),
      update: stripeMethod87({ method: "POST", fullPath: "/v1/credit_notes/{id}" }),
      list: stripeMethod87({
        method: "GET",
        fullPath: "/v1/credit_notes",
        methodType: "list"
      }),
      listLineItems: stripeMethod87({
        method: "GET",
        fullPath: "/v1/credit_notes/{credit_note}/lines",
        methodType: "list"
      }),
      listPreviewLineItems: stripeMethod87({
        method: "GET",
        fullPath: "/v1/credit_notes/preview/lines",
        methodType: "list"
      }),
      preview: stripeMethod87({ method: "GET", fullPath: "/v1/credit_notes/preview" }),
      voidCreditNote: stripeMethod87({
        method: "POST",
        fullPath: "/v1/credit_notes/{id}/void"
      })
    });
  }
});
var stripeMethod88;
var CustomerSessions;
var init_CustomerSessions = __esm({
  "../node_modules/stripe/esm/resources/CustomerSessions.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_StripeResource();
    stripeMethod88 = StripeResource.method;
    CustomerSessions = StripeResource.extend({
      create: stripeMethod88({ method: "POST", fullPath: "/v1/customer_sessions" })
    });
  }
});
var stripeMethod89;
var Customers2;
var init_Customers2 = __esm({
  "../node_modules/stripe/esm/resources/Customers.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_StripeResource();
    stripeMethod89 = StripeResource.method;
    Customers2 = StripeResource.extend({
      create: stripeMethod89({ method: "POST", fullPath: "/v1/customers" }),
      retrieve: stripeMethod89({ method: "GET", fullPath: "/v1/customers/{customer}" }),
      update: stripeMethod89({ method: "POST", fullPath: "/v1/customers/{customer}" }),
      list: stripeMethod89({
        method: "GET",
        fullPath: "/v1/customers",
        methodType: "list"
      }),
      del: stripeMethod89({ method: "DELETE", fullPath: "/v1/customers/{customer}" }),
      createBalanceTransaction: stripeMethod89({
        method: "POST",
        fullPath: "/v1/customers/{customer}/balance_transactions"
      }),
      createFundingInstructions: stripeMethod89({
        method: "POST",
        fullPath: "/v1/customers/{customer}/funding_instructions"
      }),
      createSource: stripeMethod89({
        method: "POST",
        fullPath: "/v1/customers/{customer}/sources"
      }),
      createTaxId: stripeMethod89({
        method: "POST",
        fullPath: "/v1/customers/{customer}/tax_ids"
      }),
      deleteDiscount: stripeMethod89({
        method: "DELETE",
        fullPath: "/v1/customers/{customer}/discount"
      }),
      deleteSource: stripeMethod89({
        method: "DELETE",
        fullPath: "/v1/customers/{customer}/sources/{id}"
      }),
      deleteTaxId: stripeMethod89({
        method: "DELETE",
        fullPath: "/v1/customers/{customer}/tax_ids/{id}"
      }),
      listBalanceTransactions: stripeMethod89({
        method: "GET",
        fullPath: "/v1/customers/{customer}/balance_transactions",
        methodType: "list"
      }),
      listCashBalanceTransactions: stripeMethod89({
        method: "GET",
        fullPath: "/v1/customers/{customer}/cash_balance_transactions",
        methodType: "list"
      }),
      listPaymentMethods: stripeMethod89({
        method: "GET",
        fullPath: "/v1/customers/{customer}/payment_methods",
        methodType: "list"
      }),
      listSources: stripeMethod89({
        method: "GET",
        fullPath: "/v1/customers/{customer}/sources",
        methodType: "list"
      }),
      listTaxIds: stripeMethod89({
        method: "GET",
        fullPath: "/v1/customers/{customer}/tax_ids",
        methodType: "list"
      }),
      retrieveBalanceTransaction: stripeMethod89({
        method: "GET",
        fullPath: "/v1/customers/{customer}/balance_transactions/{transaction}"
      }),
      retrieveCashBalance: stripeMethod89({
        method: "GET",
        fullPath: "/v1/customers/{customer}/cash_balance"
      }),
      retrieveCashBalanceTransaction: stripeMethod89({
        method: "GET",
        fullPath: "/v1/customers/{customer}/cash_balance_transactions/{transaction}"
      }),
      retrievePaymentMethod: stripeMethod89({
        method: "GET",
        fullPath: "/v1/customers/{customer}/payment_methods/{payment_method}"
      }),
      retrieveSource: stripeMethod89({
        method: "GET",
        fullPath: "/v1/customers/{customer}/sources/{id}"
      }),
      retrieveTaxId: stripeMethod89({
        method: "GET",
        fullPath: "/v1/customers/{customer}/tax_ids/{id}"
      }),
      search: stripeMethod89({
        method: "GET",
        fullPath: "/v1/customers/search",
        methodType: "search"
      }),
      updateBalanceTransaction: stripeMethod89({
        method: "POST",
        fullPath: "/v1/customers/{customer}/balance_transactions/{transaction}"
      }),
      updateCashBalance: stripeMethod89({
        method: "POST",
        fullPath: "/v1/customers/{customer}/cash_balance"
      }),
      updateSource: stripeMethod89({
        method: "POST",
        fullPath: "/v1/customers/{customer}/sources/{id}"
      }),
      verifySource: stripeMethod89({
        method: "POST",
        fullPath: "/v1/customers/{customer}/sources/{id}/verify"
      })
    });
  }
});
var stripeMethod90;
var Disputes2;
var init_Disputes2 = __esm({
  "../node_modules/stripe/esm/resources/Disputes.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_StripeResource();
    stripeMethod90 = StripeResource.method;
    Disputes2 = StripeResource.extend({
      retrieve: stripeMethod90({ method: "GET", fullPath: "/v1/disputes/{dispute}" }),
      update: stripeMethod90({ method: "POST", fullPath: "/v1/disputes/{dispute}" }),
      list: stripeMethod90({
        method: "GET",
        fullPath: "/v1/disputes",
        methodType: "list"
      }),
      close: stripeMethod90({
        method: "POST",
        fullPath: "/v1/disputes/{dispute}/close"
      })
    });
  }
});
var stripeMethod91;
var EphemeralKeys;
var init_EphemeralKeys = __esm({
  "../node_modules/stripe/esm/resources/EphemeralKeys.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_StripeResource();
    stripeMethod91 = StripeResource.method;
    EphemeralKeys = StripeResource.extend({
      create: stripeMethod91({
        method: "POST",
        fullPath: "/v1/ephemeral_keys",
        validator: /* @__PURE__ */ __name2((data, options) => {
          if (!options.headers || !options.headers["Stripe-Version"]) {
            throw new Error("Passing apiVersion in a separate options hash is required to create an ephemeral key. See https://stripe.com/docs/api/versioning?lang=node");
          }
        }, "validator")
      }),
      del: stripeMethod91({ method: "DELETE", fullPath: "/v1/ephemeral_keys/{key}" })
    });
  }
});
var stripeMethod92;
var Events2;
var init_Events2 = __esm({
  "../node_modules/stripe/esm/resources/Events.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_StripeResource();
    stripeMethod92 = StripeResource.method;
    Events2 = StripeResource.extend({
      retrieve: stripeMethod92({ method: "GET", fullPath: "/v1/events/{id}" }),
      list: stripeMethod92({
        method: "GET",
        fullPath: "/v1/events",
        methodType: "list"
      })
    });
  }
});
var stripeMethod93;
var ExchangeRates;
var init_ExchangeRates = __esm({
  "../node_modules/stripe/esm/resources/ExchangeRates.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_StripeResource();
    stripeMethod93 = StripeResource.method;
    ExchangeRates = StripeResource.extend({
      retrieve: stripeMethod93({
        method: "GET",
        fullPath: "/v1/exchange_rates/{rate_id}"
      }),
      list: stripeMethod93({
        method: "GET",
        fullPath: "/v1/exchange_rates",
        methodType: "list"
      })
    });
  }
});
var stripeMethod94;
var FileLinks;
var init_FileLinks = __esm({
  "../node_modules/stripe/esm/resources/FileLinks.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_StripeResource();
    stripeMethod94 = StripeResource.method;
    FileLinks = StripeResource.extend({
      create: stripeMethod94({ method: "POST", fullPath: "/v1/file_links" }),
      retrieve: stripeMethod94({ method: "GET", fullPath: "/v1/file_links/{link}" }),
      update: stripeMethod94({ method: "POST", fullPath: "/v1/file_links/{link}" }),
      list: stripeMethod94({
        method: "GET",
        fullPath: "/v1/file_links",
        methodType: "list"
      })
    });
  }
});
function multipartRequestDataProcessor(method, data, headers, callback) {
  data = data || {};
  if (method !== "POST") {
    return callback(null, queryStringifyRequestData(data));
  }
  this._stripe._platformFunctions.tryBufferData(data).then((bufferedData) => {
    const buffer = multipartDataGenerator(method, bufferedData, headers);
    return callback(null, buffer);
  }).catch((err2) => callback(err2, null));
}
__name(multipartRequestDataProcessor, "multipartRequestDataProcessor");
var multipartDataGenerator;
var init_multipart = __esm({
  "../node_modules/stripe/esm/multipart.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_utils3();
    multipartDataGenerator = /* @__PURE__ */ __name2((method, data, headers) => {
      const segno = (Math.round(Math.random() * 1e16) + Math.round(Math.random() * 1e16)).toString();
      headers["Content-Type"] = `multipart/form-data; boundary=${segno}`;
      const textEncoder = new TextEncoder();
      let buffer = new Uint8Array(0);
      const endBuffer = textEncoder.encode("\r\n");
      function push(l3) {
        const prevBuffer = buffer;
        const newBuffer = l3 instanceof Uint8Array ? l3 : new Uint8Array(textEncoder.encode(l3));
        buffer = new Uint8Array(prevBuffer.length + newBuffer.length + 2);
        buffer.set(prevBuffer);
        buffer.set(newBuffer, prevBuffer.length);
        buffer.set(endBuffer, buffer.length - 2);
      }
      __name(push, "push");
      __name2(push, "push");
      function q2(s3) {
        return `"${s3.replace(/"|"/g, "%22").replace(/\r\n|\r|\n/g, " ")}"`;
      }
      __name(q2, "q2");
      __name2(q2, "q");
      const flattenedData = flattenAndStringify(data);
      for (const k2 in flattenedData) {
        if (!Object.prototype.hasOwnProperty.call(flattenedData, k2)) {
          continue;
        }
        const v3 = flattenedData[k2];
        push(`--${segno}`);
        if (Object.prototype.hasOwnProperty.call(v3, "data")) {
          const typedEntry = v3;
          push(`Content-Disposition: form-data; name=${q2(k2)}; filename=${q2(typedEntry.name || "blob")}`);
          push(`Content-Type: ${typedEntry.type || "application/octet-stream"}`);
          push("");
          push(typedEntry.data);
        } else {
          push(`Content-Disposition: form-data; name=${q2(k2)}`);
          push("");
          push(v3);
        }
      }
      push(`--${segno}--`);
      return buffer;
    }, "multipartDataGenerator");
    __name2(multipartRequestDataProcessor, "multipartRequestDataProcessor");
  }
});
var stripeMethod95;
var Files;
var init_Files = __esm({
  "../node_modules/stripe/esm/resources/Files.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_multipart();
    init_StripeResource();
    stripeMethod95 = StripeResource.method;
    Files = StripeResource.extend({
      create: stripeMethod95({
        method: "POST",
        fullPath: "/v1/files",
        headers: {
          "Content-Type": "multipart/form-data"
        },
        host: "files.stripe.com"
      }),
      retrieve: stripeMethod95({ method: "GET", fullPath: "/v1/files/{file}" }),
      list: stripeMethod95({
        method: "GET",
        fullPath: "/v1/files",
        methodType: "list"
      }),
      requestDataProcessor: multipartRequestDataProcessor
    });
  }
});
var stripeMethod96;
var InvoiceItems;
var init_InvoiceItems = __esm({
  "../node_modules/stripe/esm/resources/InvoiceItems.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_StripeResource();
    stripeMethod96 = StripeResource.method;
    InvoiceItems = StripeResource.extend({
      create: stripeMethod96({ method: "POST", fullPath: "/v1/invoiceitems" }),
      retrieve: stripeMethod96({
        method: "GET",
        fullPath: "/v1/invoiceitems/{invoiceitem}"
      }),
      update: stripeMethod96({
        method: "POST",
        fullPath: "/v1/invoiceitems/{invoiceitem}"
      }),
      list: stripeMethod96({
        method: "GET",
        fullPath: "/v1/invoiceitems",
        methodType: "list"
      }),
      del: stripeMethod96({
        method: "DELETE",
        fullPath: "/v1/invoiceitems/{invoiceitem}"
      })
    });
  }
});
var stripeMethod97;
var InvoicePayments;
var init_InvoicePayments = __esm({
  "../node_modules/stripe/esm/resources/InvoicePayments.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_StripeResource();
    stripeMethod97 = StripeResource.method;
    InvoicePayments = StripeResource.extend({
      retrieve: stripeMethod97({
        method: "GET",
        fullPath: "/v1/invoice_payments/{invoice_payment}"
      }),
      list: stripeMethod97({
        method: "GET",
        fullPath: "/v1/invoice_payments",
        methodType: "list"
      })
    });
  }
});
var stripeMethod98;
var InvoiceRenderingTemplates;
var init_InvoiceRenderingTemplates = __esm({
  "../node_modules/stripe/esm/resources/InvoiceRenderingTemplates.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_StripeResource();
    stripeMethod98 = StripeResource.method;
    InvoiceRenderingTemplates = StripeResource.extend({
      retrieve: stripeMethod98({
        method: "GET",
        fullPath: "/v1/invoice_rendering_templates/{template}"
      }),
      list: stripeMethod98({
        method: "GET",
        fullPath: "/v1/invoice_rendering_templates",
        methodType: "list"
      }),
      archive: stripeMethod98({
        method: "POST",
        fullPath: "/v1/invoice_rendering_templates/{template}/archive"
      }),
      unarchive: stripeMethod98({
        method: "POST",
        fullPath: "/v1/invoice_rendering_templates/{template}/unarchive"
      })
    });
  }
});
var stripeMethod99;
var Invoices;
var init_Invoices = __esm({
  "../node_modules/stripe/esm/resources/Invoices.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_StripeResource();
    stripeMethod99 = StripeResource.method;
    Invoices = StripeResource.extend({
      create: stripeMethod99({ method: "POST", fullPath: "/v1/invoices" }),
      retrieve: stripeMethod99({ method: "GET", fullPath: "/v1/invoices/{invoice}" }),
      update: stripeMethod99({ method: "POST", fullPath: "/v1/invoices/{invoice}" }),
      list: stripeMethod99({
        method: "GET",
        fullPath: "/v1/invoices",
        methodType: "list"
      }),
      del: stripeMethod99({ method: "DELETE", fullPath: "/v1/invoices/{invoice}" }),
      addLines: stripeMethod99({
        method: "POST",
        fullPath: "/v1/invoices/{invoice}/add_lines"
      }),
      attachPayment: stripeMethod99({
        method: "POST",
        fullPath: "/v1/invoices/{invoice}/attach_payment"
      }),
      createPreview: stripeMethod99({
        method: "POST",
        fullPath: "/v1/invoices/create_preview"
      }),
      finalizeInvoice: stripeMethod99({
        method: "POST",
        fullPath: "/v1/invoices/{invoice}/finalize"
      }),
      listLineItems: stripeMethod99({
        method: "GET",
        fullPath: "/v1/invoices/{invoice}/lines",
        methodType: "list"
      }),
      markUncollectible: stripeMethod99({
        method: "POST",
        fullPath: "/v1/invoices/{invoice}/mark_uncollectible"
      }),
      pay: stripeMethod99({ method: "POST", fullPath: "/v1/invoices/{invoice}/pay" }),
      removeLines: stripeMethod99({
        method: "POST",
        fullPath: "/v1/invoices/{invoice}/remove_lines"
      }),
      search: stripeMethod99({
        method: "GET",
        fullPath: "/v1/invoices/search",
        methodType: "search"
      }),
      sendInvoice: stripeMethod99({
        method: "POST",
        fullPath: "/v1/invoices/{invoice}/send"
      }),
      updateLines: stripeMethod99({
        method: "POST",
        fullPath: "/v1/invoices/{invoice}/update_lines"
      }),
      updateLineItem: stripeMethod99({
        method: "POST",
        fullPath: "/v1/invoices/{invoice}/lines/{line_item_id}"
      }),
      voidInvoice: stripeMethod99({
        method: "POST",
        fullPath: "/v1/invoices/{invoice}/void"
      })
    });
  }
});
var stripeMethod100;
var Mandates;
var init_Mandates = __esm({
  "../node_modules/stripe/esm/resources/Mandates.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_StripeResource();
    stripeMethod100 = StripeResource.method;
    Mandates = StripeResource.extend({
      retrieve: stripeMethod100({ method: "GET", fullPath: "/v1/mandates/{mandate}" })
    });
  }
});
var stripeMethod101;
var oAuthHost;
var OAuth;
var init_OAuth = __esm({
  "../node_modules/stripe/esm/resources/OAuth.js"() {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    init_StripeResource();
    init_utils3();
    stripeMethod101 = StripeResource.method;
    oAuthHost = "connect.stripe.com";
    OAuth = StripeResource.extend({
      basePath: "/",
      authorizeUrl(params, options) {
        params = params || {};
        options = options || {};
        let path = "oauth/authorize";
        if (options.express) {
          path = `express/${path}`;
        }
        if (!params.response_type) {
          params.response_type = "code";
        }
        if (!params.client_id) {
          params.client_id = this._stripe.getClientId();
        }
        if (!params.scope) {
          params.scope = "read_write";
        }
        return `https://${oAuthHost}/${path}?${queryStringifyRequestData(params)}`;
      },
      token: stripeMethod101({
        method: "POST",
        path: "oauth/token",
        host: oAuthHost
      }),
      deauthorize(spec, ...args) {
        if (!spec.client_id) {
          spec.client_id = this._stripe.getClientId();
        }
        return stripeMethod101({
          method: "POST",
          path: "oauth/deauthorize",
          host: oAuthHost
        }).apply(this, [spec, ...args]);
      }
    });
  }
});
var stripeMethod102;
var PaymentIntents;
var init_PaymentIntents = __esm({
  "../node_modules/stripe/esm/resources/PaymentIntents.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_StripeResource();
    stripeMethod102 = StripeResource.method;
    PaymentIntents = StripeResource.extend({
      create: stripeMethod102({ method: "POST", fullPath: "/v1/payment_intents" }),
      retrieve: stripeMethod102({
        method: "GET",
        fullPath: "/v1/payment_intents/{intent}"
      }),
      update: stripeMethod102({
        method: "POST",
        fullPath: "/v1/payment_intents/{intent}"
      }),
      list: stripeMethod102({
        method: "GET",
        fullPath: "/v1/payment_intents",
        methodType: "list"
      }),
      applyCustomerBalance: stripeMethod102({
        method: "POST",
        fullPath: "/v1/payment_intents/{intent}/apply_customer_balance"
      }),
      cancel: stripeMethod102({
        method: "POST",
        fullPath: "/v1/payment_intents/{intent}/cancel"
      }),
      capture: stripeMethod102({
        method: "POST",
        fullPath: "/v1/payment_intents/{intent}/capture"
      }),
      confirm: stripeMethod102({
        method: "POST",
        fullPath: "/v1/payment_intents/{intent}/confirm"
      }),
      incrementAuthorization: stripeMethod102({
        method: "POST",
        fullPath: "/v1/payment_intents/{intent}/increment_authorization"
      }),
      search: stripeMethod102({
        method: "GET",
        fullPath: "/v1/payment_intents/search",
        methodType: "search"
      }),
      verifyMicrodeposits: stripeMethod102({
        method: "POST",
        fullPath: "/v1/payment_intents/{intent}/verify_microdeposits"
      })
    });
  }
});
var stripeMethod103;
var PaymentLinks;
var init_PaymentLinks = __esm({
  "../node_modules/stripe/esm/resources/PaymentLinks.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_StripeResource();
    stripeMethod103 = StripeResource.method;
    PaymentLinks = StripeResource.extend({
      create: stripeMethod103({ method: "POST", fullPath: "/v1/payment_links" }),
      retrieve: stripeMethod103({
        method: "GET",
        fullPath: "/v1/payment_links/{payment_link}"
      }),
      update: stripeMethod103({
        method: "POST",
        fullPath: "/v1/payment_links/{payment_link}"
      }),
      list: stripeMethod103({
        method: "GET",
        fullPath: "/v1/payment_links",
        methodType: "list"
      }),
      listLineItems: stripeMethod103({
        method: "GET",
        fullPath: "/v1/payment_links/{payment_link}/line_items",
        methodType: "list"
      })
    });
  }
});
var stripeMethod104;
var PaymentMethodConfigurations;
var init_PaymentMethodConfigurations = __esm({
  "../node_modules/stripe/esm/resources/PaymentMethodConfigurations.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_StripeResource();
    stripeMethod104 = StripeResource.method;
    PaymentMethodConfigurations = StripeResource.extend({
      create: stripeMethod104({
        method: "POST",
        fullPath: "/v1/payment_method_configurations"
      }),
      retrieve: stripeMethod104({
        method: "GET",
        fullPath: "/v1/payment_method_configurations/{configuration}"
      }),
      update: stripeMethod104({
        method: "POST",
        fullPath: "/v1/payment_method_configurations/{configuration}"
      }),
      list: stripeMethod104({
        method: "GET",
        fullPath: "/v1/payment_method_configurations",
        methodType: "list"
      })
    });
  }
});
var stripeMethod105;
var PaymentMethodDomains;
var init_PaymentMethodDomains = __esm({
  "../node_modules/stripe/esm/resources/PaymentMethodDomains.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_StripeResource();
    stripeMethod105 = StripeResource.method;
    PaymentMethodDomains = StripeResource.extend({
      create: stripeMethod105({
        method: "POST",
        fullPath: "/v1/payment_method_domains"
      }),
      retrieve: stripeMethod105({
        method: "GET",
        fullPath: "/v1/payment_method_domains/{payment_method_domain}"
      }),
      update: stripeMethod105({
        method: "POST",
        fullPath: "/v1/payment_method_domains/{payment_method_domain}"
      }),
      list: stripeMethod105({
        method: "GET",
        fullPath: "/v1/payment_method_domains",
        methodType: "list"
      }),
      validate: stripeMethod105({
        method: "POST",
        fullPath: "/v1/payment_method_domains/{payment_method_domain}/validate"
      })
    });
  }
});
var stripeMethod106;
var PaymentMethods;
var init_PaymentMethods = __esm({
  "../node_modules/stripe/esm/resources/PaymentMethods.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_StripeResource();
    stripeMethod106 = StripeResource.method;
    PaymentMethods = StripeResource.extend({
      create: stripeMethod106({ method: "POST", fullPath: "/v1/payment_methods" }),
      retrieve: stripeMethod106({
        method: "GET",
        fullPath: "/v1/payment_methods/{payment_method}"
      }),
      update: stripeMethod106({
        method: "POST",
        fullPath: "/v1/payment_methods/{payment_method}"
      }),
      list: stripeMethod106({
        method: "GET",
        fullPath: "/v1/payment_methods",
        methodType: "list"
      }),
      attach: stripeMethod106({
        method: "POST",
        fullPath: "/v1/payment_methods/{payment_method}/attach"
      }),
      detach: stripeMethod106({
        method: "POST",
        fullPath: "/v1/payment_methods/{payment_method}/detach"
      })
    });
  }
});
var stripeMethod107;
var Payouts;
var init_Payouts = __esm({
  "../node_modules/stripe/esm/resources/Payouts.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_StripeResource();
    stripeMethod107 = StripeResource.method;
    Payouts = StripeResource.extend({
      create: stripeMethod107({ method: "POST", fullPath: "/v1/payouts" }),
      retrieve: stripeMethod107({ method: "GET", fullPath: "/v1/payouts/{payout}" }),
      update: stripeMethod107({ method: "POST", fullPath: "/v1/payouts/{payout}" }),
      list: stripeMethod107({
        method: "GET",
        fullPath: "/v1/payouts",
        methodType: "list"
      }),
      cancel: stripeMethod107({
        method: "POST",
        fullPath: "/v1/payouts/{payout}/cancel"
      }),
      reverse: stripeMethod107({
        method: "POST",
        fullPath: "/v1/payouts/{payout}/reverse"
      })
    });
  }
});
var stripeMethod108;
var Plans;
var init_Plans = __esm({
  "../node_modules/stripe/esm/resources/Plans.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_StripeResource();
    stripeMethod108 = StripeResource.method;
    Plans = StripeResource.extend({
      create: stripeMethod108({ method: "POST", fullPath: "/v1/plans" }),
      retrieve: stripeMethod108({ method: "GET", fullPath: "/v1/plans/{plan}" }),
      update: stripeMethod108({ method: "POST", fullPath: "/v1/plans/{plan}" }),
      list: stripeMethod108({
        method: "GET",
        fullPath: "/v1/plans",
        methodType: "list"
      }),
      del: stripeMethod108({ method: "DELETE", fullPath: "/v1/plans/{plan}" })
    });
  }
});
var stripeMethod109;
var Prices;
var init_Prices = __esm({
  "../node_modules/stripe/esm/resources/Prices.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_StripeResource();
    stripeMethod109 = StripeResource.method;
    Prices = StripeResource.extend({
      create: stripeMethod109({ method: "POST", fullPath: "/v1/prices" }),
      retrieve: stripeMethod109({ method: "GET", fullPath: "/v1/prices/{price}" }),
      update: stripeMethod109({ method: "POST", fullPath: "/v1/prices/{price}" }),
      list: stripeMethod109({
        method: "GET",
        fullPath: "/v1/prices",
        methodType: "list"
      }),
      search: stripeMethod109({
        method: "GET",
        fullPath: "/v1/prices/search",
        methodType: "search"
      })
    });
  }
});
var stripeMethod110;
var Products2;
var init_Products2 = __esm({
  "../node_modules/stripe/esm/resources/Products.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_StripeResource();
    stripeMethod110 = StripeResource.method;
    Products2 = StripeResource.extend({
      create: stripeMethod110({ method: "POST", fullPath: "/v1/products" }),
      retrieve: stripeMethod110({ method: "GET", fullPath: "/v1/products/{id}" }),
      update: stripeMethod110({ method: "POST", fullPath: "/v1/products/{id}" }),
      list: stripeMethod110({
        method: "GET",
        fullPath: "/v1/products",
        methodType: "list"
      }),
      del: stripeMethod110({ method: "DELETE", fullPath: "/v1/products/{id}" }),
      createFeature: stripeMethod110({
        method: "POST",
        fullPath: "/v1/products/{product}/features"
      }),
      deleteFeature: stripeMethod110({
        method: "DELETE",
        fullPath: "/v1/products/{product}/features/{id}"
      }),
      listFeatures: stripeMethod110({
        method: "GET",
        fullPath: "/v1/products/{product}/features",
        methodType: "list"
      }),
      retrieveFeature: stripeMethod110({
        method: "GET",
        fullPath: "/v1/products/{product}/features/{id}"
      }),
      search: stripeMethod110({
        method: "GET",
        fullPath: "/v1/products/search",
        methodType: "search"
      })
    });
  }
});
var stripeMethod111;
var PromotionCodes;
var init_PromotionCodes = __esm({
  "../node_modules/stripe/esm/resources/PromotionCodes.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_StripeResource();
    stripeMethod111 = StripeResource.method;
    PromotionCodes = StripeResource.extend({
      create: stripeMethod111({ method: "POST", fullPath: "/v1/promotion_codes" }),
      retrieve: stripeMethod111({
        method: "GET",
        fullPath: "/v1/promotion_codes/{promotion_code}"
      }),
      update: stripeMethod111({
        method: "POST",
        fullPath: "/v1/promotion_codes/{promotion_code}"
      }),
      list: stripeMethod111({
        method: "GET",
        fullPath: "/v1/promotion_codes",
        methodType: "list"
      })
    });
  }
});
var stripeMethod112;
var Quotes;
var init_Quotes = __esm({
  "../node_modules/stripe/esm/resources/Quotes.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_StripeResource();
    stripeMethod112 = StripeResource.method;
    Quotes = StripeResource.extend({
      create: stripeMethod112({ method: "POST", fullPath: "/v1/quotes" }),
      retrieve: stripeMethod112({ method: "GET", fullPath: "/v1/quotes/{quote}" }),
      update: stripeMethod112({ method: "POST", fullPath: "/v1/quotes/{quote}" }),
      list: stripeMethod112({
        method: "GET",
        fullPath: "/v1/quotes",
        methodType: "list"
      }),
      accept: stripeMethod112({ method: "POST", fullPath: "/v1/quotes/{quote}/accept" }),
      cancel: stripeMethod112({ method: "POST", fullPath: "/v1/quotes/{quote}/cancel" }),
      finalizeQuote: stripeMethod112({
        method: "POST",
        fullPath: "/v1/quotes/{quote}/finalize"
      }),
      listComputedUpfrontLineItems: stripeMethod112({
        method: "GET",
        fullPath: "/v1/quotes/{quote}/computed_upfront_line_items",
        methodType: "list"
      }),
      listLineItems: stripeMethod112({
        method: "GET",
        fullPath: "/v1/quotes/{quote}/line_items",
        methodType: "list"
      }),
      pdf: stripeMethod112({
        method: "GET",
        fullPath: "/v1/quotes/{quote}/pdf",
        host: "files.stripe.com",
        streaming: true
      })
    });
  }
});
var stripeMethod113;
var Refunds2;
var init_Refunds2 = __esm({
  "../node_modules/stripe/esm/resources/Refunds.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_StripeResource();
    stripeMethod113 = StripeResource.method;
    Refunds2 = StripeResource.extend({
      create: stripeMethod113({ method: "POST", fullPath: "/v1/refunds" }),
      retrieve: stripeMethod113({ method: "GET", fullPath: "/v1/refunds/{refund}" }),
      update: stripeMethod113({ method: "POST", fullPath: "/v1/refunds/{refund}" }),
      list: stripeMethod113({
        method: "GET",
        fullPath: "/v1/refunds",
        methodType: "list"
      }),
      cancel: stripeMethod113({
        method: "POST",
        fullPath: "/v1/refunds/{refund}/cancel"
      })
    });
  }
});
var stripeMethod114;
var Reviews;
var init_Reviews = __esm({
  "../node_modules/stripe/esm/resources/Reviews.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_StripeResource();
    stripeMethod114 = StripeResource.method;
    Reviews = StripeResource.extend({
      retrieve: stripeMethod114({ method: "GET", fullPath: "/v1/reviews/{review}" }),
      list: stripeMethod114({
        method: "GET",
        fullPath: "/v1/reviews",
        methodType: "list"
      }),
      approve: stripeMethod114({
        method: "POST",
        fullPath: "/v1/reviews/{review}/approve"
      })
    });
  }
});
var stripeMethod115;
var SetupAttempts;
var init_SetupAttempts = __esm({
  "../node_modules/stripe/esm/resources/SetupAttempts.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_StripeResource();
    stripeMethod115 = StripeResource.method;
    SetupAttempts = StripeResource.extend({
      list: stripeMethod115({
        method: "GET",
        fullPath: "/v1/setup_attempts",
        methodType: "list"
      })
    });
  }
});
var stripeMethod116;
var SetupIntents;
var init_SetupIntents = __esm({
  "../node_modules/stripe/esm/resources/SetupIntents.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_StripeResource();
    stripeMethod116 = StripeResource.method;
    SetupIntents = StripeResource.extend({
      create: stripeMethod116({ method: "POST", fullPath: "/v1/setup_intents" }),
      retrieve: stripeMethod116({
        method: "GET",
        fullPath: "/v1/setup_intents/{intent}"
      }),
      update: stripeMethod116({
        method: "POST",
        fullPath: "/v1/setup_intents/{intent}"
      }),
      list: stripeMethod116({
        method: "GET",
        fullPath: "/v1/setup_intents",
        methodType: "list"
      }),
      cancel: stripeMethod116({
        method: "POST",
        fullPath: "/v1/setup_intents/{intent}/cancel"
      }),
      confirm: stripeMethod116({
        method: "POST",
        fullPath: "/v1/setup_intents/{intent}/confirm"
      }),
      verifyMicrodeposits: stripeMethod116({
        method: "POST",
        fullPath: "/v1/setup_intents/{intent}/verify_microdeposits"
      })
    });
  }
});
var stripeMethod117;
var ShippingRates;
var init_ShippingRates = __esm({
  "../node_modules/stripe/esm/resources/ShippingRates.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_StripeResource();
    stripeMethod117 = StripeResource.method;
    ShippingRates = StripeResource.extend({
      create: stripeMethod117({ method: "POST", fullPath: "/v1/shipping_rates" }),
      retrieve: stripeMethod117({
        method: "GET",
        fullPath: "/v1/shipping_rates/{shipping_rate_token}"
      }),
      update: stripeMethod117({
        method: "POST",
        fullPath: "/v1/shipping_rates/{shipping_rate_token}"
      }),
      list: stripeMethod117({
        method: "GET",
        fullPath: "/v1/shipping_rates",
        methodType: "list"
      })
    });
  }
});
var stripeMethod118;
var Sources;
var init_Sources = __esm({
  "../node_modules/stripe/esm/resources/Sources.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_StripeResource();
    stripeMethod118 = StripeResource.method;
    Sources = StripeResource.extend({
      create: stripeMethod118({ method: "POST", fullPath: "/v1/sources" }),
      retrieve: stripeMethod118({ method: "GET", fullPath: "/v1/sources/{source}" }),
      update: stripeMethod118({ method: "POST", fullPath: "/v1/sources/{source}" }),
      listSourceTransactions: stripeMethod118({
        method: "GET",
        fullPath: "/v1/sources/{source}/source_transactions",
        methodType: "list"
      }),
      verify: stripeMethod118({
        method: "POST",
        fullPath: "/v1/sources/{source}/verify"
      })
    });
  }
});
var stripeMethod119;
var SubscriptionItems;
var init_SubscriptionItems = __esm({
  "../node_modules/stripe/esm/resources/SubscriptionItems.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_StripeResource();
    stripeMethod119 = StripeResource.method;
    SubscriptionItems = StripeResource.extend({
      create: stripeMethod119({ method: "POST", fullPath: "/v1/subscription_items" }),
      retrieve: stripeMethod119({
        method: "GET",
        fullPath: "/v1/subscription_items/{item}"
      }),
      update: stripeMethod119({
        method: "POST",
        fullPath: "/v1/subscription_items/{item}"
      }),
      list: stripeMethod119({
        method: "GET",
        fullPath: "/v1/subscription_items",
        methodType: "list"
      }),
      del: stripeMethod119({
        method: "DELETE",
        fullPath: "/v1/subscription_items/{item}"
      })
    });
  }
});
var stripeMethod120;
var SubscriptionSchedules;
var init_SubscriptionSchedules = __esm({
  "../node_modules/stripe/esm/resources/SubscriptionSchedules.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_StripeResource();
    stripeMethod120 = StripeResource.method;
    SubscriptionSchedules = StripeResource.extend({
      create: stripeMethod120({
        method: "POST",
        fullPath: "/v1/subscription_schedules"
      }),
      retrieve: stripeMethod120({
        method: "GET",
        fullPath: "/v1/subscription_schedules/{schedule}"
      }),
      update: stripeMethod120({
        method: "POST",
        fullPath: "/v1/subscription_schedules/{schedule}"
      }),
      list: stripeMethod120({
        method: "GET",
        fullPath: "/v1/subscription_schedules",
        methodType: "list"
      }),
      cancel: stripeMethod120({
        method: "POST",
        fullPath: "/v1/subscription_schedules/{schedule}/cancel"
      }),
      release: stripeMethod120({
        method: "POST",
        fullPath: "/v1/subscription_schedules/{schedule}/release"
      })
    });
  }
});
var stripeMethod121;
var Subscriptions;
var init_Subscriptions = __esm({
  "../node_modules/stripe/esm/resources/Subscriptions.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_StripeResource();
    stripeMethod121 = StripeResource.method;
    Subscriptions = StripeResource.extend({
      create: stripeMethod121({ method: "POST", fullPath: "/v1/subscriptions" }),
      retrieve: stripeMethod121({
        method: "GET",
        fullPath: "/v1/subscriptions/{subscription_exposed_id}"
      }),
      update: stripeMethod121({
        method: "POST",
        fullPath: "/v1/subscriptions/{subscription_exposed_id}"
      }),
      list: stripeMethod121({
        method: "GET",
        fullPath: "/v1/subscriptions",
        methodType: "list"
      }),
      cancel: stripeMethod121({
        method: "DELETE",
        fullPath: "/v1/subscriptions/{subscription_exposed_id}"
      }),
      deleteDiscount: stripeMethod121({
        method: "DELETE",
        fullPath: "/v1/subscriptions/{subscription_exposed_id}/discount"
      }),
      migrate: stripeMethod121({
        method: "POST",
        fullPath: "/v1/subscriptions/{subscription}/migrate"
      }),
      resume: stripeMethod121({
        method: "POST",
        fullPath: "/v1/subscriptions/{subscription}/resume"
      }),
      search: stripeMethod121({
        method: "GET",
        fullPath: "/v1/subscriptions/search",
        methodType: "search"
      })
    });
  }
});
var stripeMethod122;
var TaxCodes;
var init_TaxCodes = __esm({
  "../node_modules/stripe/esm/resources/TaxCodes.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_StripeResource();
    stripeMethod122 = StripeResource.method;
    TaxCodes = StripeResource.extend({
      retrieve: stripeMethod122({ method: "GET", fullPath: "/v1/tax_codes/{id}" }),
      list: stripeMethod122({
        method: "GET",
        fullPath: "/v1/tax_codes",
        methodType: "list"
      })
    });
  }
});
var stripeMethod123;
var TaxIds;
var init_TaxIds = __esm({
  "../node_modules/stripe/esm/resources/TaxIds.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_StripeResource();
    stripeMethod123 = StripeResource.method;
    TaxIds = StripeResource.extend({
      create: stripeMethod123({ method: "POST", fullPath: "/v1/tax_ids" }),
      retrieve: stripeMethod123({ method: "GET", fullPath: "/v1/tax_ids/{id}" }),
      list: stripeMethod123({
        method: "GET",
        fullPath: "/v1/tax_ids",
        methodType: "list"
      }),
      del: stripeMethod123({ method: "DELETE", fullPath: "/v1/tax_ids/{id}" })
    });
  }
});
var stripeMethod124;
var TaxRates;
var init_TaxRates = __esm({
  "../node_modules/stripe/esm/resources/TaxRates.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_StripeResource();
    stripeMethod124 = StripeResource.method;
    TaxRates = StripeResource.extend({
      create: stripeMethod124({ method: "POST", fullPath: "/v1/tax_rates" }),
      retrieve: stripeMethod124({ method: "GET", fullPath: "/v1/tax_rates/{tax_rate}" }),
      update: stripeMethod124({ method: "POST", fullPath: "/v1/tax_rates/{tax_rate}" }),
      list: stripeMethod124({
        method: "GET",
        fullPath: "/v1/tax_rates",
        methodType: "list"
      })
    });
  }
});
var stripeMethod125;
var Tokens2;
var init_Tokens2 = __esm({
  "../node_modules/stripe/esm/resources/Tokens.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_StripeResource();
    stripeMethod125 = StripeResource.method;
    Tokens2 = StripeResource.extend({
      create: stripeMethod125({ method: "POST", fullPath: "/v1/tokens" }),
      retrieve: stripeMethod125({ method: "GET", fullPath: "/v1/tokens/{token}" })
    });
  }
});
var stripeMethod126;
var Topups;
var init_Topups = __esm({
  "../node_modules/stripe/esm/resources/Topups.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_StripeResource();
    stripeMethod126 = StripeResource.method;
    Topups = StripeResource.extend({
      create: stripeMethod126({ method: "POST", fullPath: "/v1/topups" }),
      retrieve: stripeMethod126({ method: "GET", fullPath: "/v1/topups/{topup}" }),
      update: stripeMethod126({ method: "POST", fullPath: "/v1/topups/{topup}" }),
      list: stripeMethod126({
        method: "GET",
        fullPath: "/v1/topups",
        methodType: "list"
      }),
      cancel: stripeMethod126({ method: "POST", fullPath: "/v1/topups/{topup}/cancel" })
    });
  }
});
var stripeMethod127;
var Transfers;
var init_Transfers = __esm({
  "../node_modules/stripe/esm/resources/Transfers.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_StripeResource();
    stripeMethod127 = StripeResource.method;
    Transfers = StripeResource.extend({
      create: stripeMethod127({ method: "POST", fullPath: "/v1/transfers" }),
      retrieve: stripeMethod127({ method: "GET", fullPath: "/v1/transfers/{transfer}" }),
      update: stripeMethod127({ method: "POST", fullPath: "/v1/transfers/{transfer}" }),
      list: stripeMethod127({
        method: "GET",
        fullPath: "/v1/transfers",
        methodType: "list"
      }),
      createReversal: stripeMethod127({
        method: "POST",
        fullPath: "/v1/transfers/{id}/reversals"
      }),
      listReversals: stripeMethod127({
        method: "GET",
        fullPath: "/v1/transfers/{id}/reversals",
        methodType: "list"
      }),
      retrieveReversal: stripeMethod127({
        method: "GET",
        fullPath: "/v1/transfers/{transfer}/reversals/{id}"
      }),
      updateReversal: stripeMethod127({
        method: "POST",
        fullPath: "/v1/transfers/{transfer}/reversals/{id}"
      })
    });
  }
});
var stripeMethod128;
var WebhookEndpoints;
var init_WebhookEndpoints = __esm({
  "../node_modules/stripe/esm/resources/WebhookEndpoints.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_StripeResource();
    stripeMethod128 = StripeResource.method;
    WebhookEndpoints = StripeResource.extend({
      create: stripeMethod128({ method: "POST", fullPath: "/v1/webhook_endpoints" }),
      retrieve: stripeMethod128({
        method: "GET",
        fullPath: "/v1/webhook_endpoints/{webhook_endpoint}"
      }),
      update: stripeMethod128({
        method: "POST",
        fullPath: "/v1/webhook_endpoints/{webhook_endpoint}"
      }),
      list: stripeMethod128({
        method: "GET",
        fullPath: "/v1/webhook_endpoints",
        methodType: "list"
      }),
      del: stripeMethod128({
        method: "DELETE",
        fullPath: "/v1/webhook_endpoints/{webhook_endpoint}"
      })
    });
  }
});
var resources_exports = {};
__export(resources_exports, {
  Account: /* @__PURE__ */ __name(() => Accounts2, "Account"),
  AccountLinks: /* @__PURE__ */ __name(() => AccountLinks, "AccountLinks"),
  AccountSessions: /* @__PURE__ */ __name(() => AccountSessions, "AccountSessions"),
  Accounts: /* @__PURE__ */ __name(() => Accounts2, "Accounts"),
  ApplePayDomains: /* @__PURE__ */ __name(() => ApplePayDomains, "ApplePayDomains"),
  ApplicationFees: /* @__PURE__ */ __name(() => ApplicationFees, "ApplicationFees"),
  Apps: /* @__PURE__ */ __name(() => Apps, "Apps"),
  Balance: /* @__PURE__ */ __name(() => Balance, "Balance"),
  BalanceTransactions: /* @__PURE__ */ __name(() => BalanceTransactions, "BalanceTransactions"),
  Billing: /* @__PURE__ */ __name(() => Billing, "Billing"),
  BillingPortal: /* @__PURE__ */ __name(() => BillingPortal, "BillingPortal"),
  Charges: /* @__PURE__ */ __name(() => Charges, "Charges"),
  Checkout: /* @__PURE__ */ __name(() => Checkout, "Checkout"),
  Climate: /* @__PURE__ */ __name(() => Climate, "Climate"),
  ConfirmationTokens: /* @__PURE__ */ __name(() => ConfirmationTokens2, "ConfirmationTokens"),
  CountrySpecs: /* @__PURE__ */ __name(() => CountrySpecs, "CountrySpecs"),
  Coupons: /* @__PURE__ */ __name(() => Coupons, "Coupons"),
  CreditNotes: /* @__PURE__ */ __name(() => CreditNotes, "CreditNotes"),
  CustomerSessions: /* @__PURE__ */ __name(() => CustomerSessions, "CustomerSessions"),
  Customers: /* @__PURE__ */ __name(() => Customers2, "Customers"),
  Disputes: /* @__PURE__ */ __name(() => Disputes2, "Disputes"),
  Entitlements: /* @__PURE__ */ __name(() => Entitlements, "Entitlements"),
  EphemeralKeys: /* @__PURE__ */ __name(() => EphemeralKeys, "EphemeralKeys"),
  Events: /* @__PURE__ */ __name(() => Events2, "Events"),
  ExchangeRates: /* @__PURE__ */ __name(() => ExchangeRates, "ExchangeRates"),
  FileLinks: /* @__PURE__ */ __name(() => FileLinks, "FileLinks"),
  Files: /* @__PURE__ */ __name(() => Files, "Files"),
  FinancialConnections: /* @__PURE__ */ __name(() => FinancialConnections, "FinancialConnections"),
  Forwarding: /* @__PURE__ */ __name(() => Forwarding, "Forwarding"),
  Identity: /* @__PURE__ */ __name(() => Identity, "Identity"),
  InvoiceItems: /* @__PURE__ */ __name(() => InvoiceItems, "InvoiceItems"),
  InvoicePayments: /* @__PURE__ */ __name(() => InvoicePayments, "InvoicePayments"),
  InvoiceRenderingTemplates: /* @__PURE__ */ __name(() => InvoiceRenderingTemplates, "InvoiceRenderingTemplates"),
  Invoices: /* @__PURE__ */ __name(() => Invoices, "Invoices"),
  Issuing: /* @__PURE__ */ __name(() => Issuing, "Issuing"),
  Mandates: /* @__PURE__ */ __name(() => Mandates, "Mandates"),
  OAuth: /* @__PURE__ */ __name(() => OAuth, "OAuth"),
  PaymentIntents: /* @__PURE__ */ __name(() => PaymentIntents, "PaymentIntents"),
  PaymentLinks: /* @__PURE__ */ __name(() => PaymentLinks, "PaymentLinks"),
  PaymentMethodConfigurations: /* @__PURE__ */ __name(() => PaymentMethodConfigurations, "PaymentMethodConfigurations"),
  PaymentMethodDomains: /* @__PURE__ */ __name(() => PaymentMethodDomains, "PaymentMethodDomains"),
  PaymentMethods: /* @__PURE__ */ __name(() => PaymentMethods, "PaymentMethods"),
  Payouts: /* @__PURE__ */ __name(() => Payouts, "Payouts"),
  Plans: /* @__PURE__ */ __name(() => Plans, "Plans"),
  Prices: /* @__PURE__ */ __name(() => Prices, "Prices"),
  Products: /* @__PURE__ */ __name(() => Products2, "Products"),
  PromotionCodes: /* @__PURE__ */ __name(() => PromotionCodes, "PromotionCodes"),
  Quotes: /* @__PURE__ */ __name(() => Quotes, "Quotes"),
  Radar: /* @__PURE__ */ __name(() => Radar, "Radar"),
  Refunds: /* @__PURE__ */ __name(() => Refunds2, "Refunds"),
  Reporting: /* @__PURE__ */ __name(() => Reporting, "Reporting"),
  Reviews: /* @__PURE__ */ __name(() => Reviews, "Reviews"),
  SetupAttempts: /* @__PURE__ */ __name(() => SetupAttempts, "SetupAttempts"),
  SetupIntents: /* @__PURE__ */ __name(() => SetupIntents, "SetupIntents"),
  ShippingRates: /* @__PURE__ */ __name(() => ShippingRates, "ShippingRates"),
  Sigma: /* @__PURE__ */ __name(() => Sigma, "Sigma"),
  Sources: /* @__PURE__ */ __name(() => Sources, "Sources"),
  SubscriptionItems: /* @__PURE__ */ __name(() => SubscriptionItems, "SubscriptionItems"),
  SubscriptionSchedules: /* @__PURE__ */ __name(() => SubscriptionSchedules, "SubscriptionSchedules"),
  Subscriptions: /* @__PURE__ */ __name(() => Subscriptions, "Subscriptions"),
  Tax: /* @__PURE__ */ __name(() => Tax, "Tax"),
  TaxCodes: /* @__PURE__ */ __name(() => TaxCodes, "TaxCodes"),
  TaxIds: /* @__PURE__ */ __name(() => TaxIds, "TaxIds"),
  TaxRates: /* @__PURE__ */ __name(() => TaxRates, "TaxRates"),
  Terminal: /* @__PURE__ */ __name(() => Terminal, "Terminal"),
  TestHelpers: /* @__PURE__ */ __name(() => TestHelpers, "TestHelpers"),
  Tokens: /* @__PURE__ */ __name(() => Tokens2, "Tokens"),
  Topups: /* @__PURE__ */ __name(() => Topups, "Topups"),
  Transfers: /* @__PURE__ */ __name(() => Transfers, "Transfers"),
  Treasury: /* @__PURE__ */ __name(() => Treasury, "Treasury"),
  V2: /* @__PURE__ */ __name(() => V2, "V2"),
  WebhookEndpoints: /* @__PURE__ */ __name(() => WebhookEndpoints, "WebhookEndpoints")
});
var Apps;
var Billing;
var BillingPortal;
var Checkout;
var Climate;
var Entitlements;
var FinancialConnections;
var Forwarding;
var Identity;
var Issuing;
var Radar;
var Reporting;
var Sigma;
var Tax;
var Terminal;
var TestHelpers;
var Treasury;
var V2;
var init_resources = __esm({
  "../node_modules/stripe/esm/resources.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_ResourceNamespace();
    init_Accounts();
    init_ActiveEntitlements();
    init_Alerts();
    init_Authorizations();
    init_Authorizations2();
    init_Calculations();
    init_Cardholders();
    init_Cards();
    init_Cards2();
    init_Configurations();
    init_Configurations2();
    init_ConfirmationTokens();
    init_ConnectionTokens();
    init_CreditBalanceSummary();
    init_CreditBalanceTransactions();
    init_CreditGrants();
    init_CreditReversals();
    init_Customers();
    init_DebitReversals();
    init_Disputes();
    init_EarlyFraudWarnings();
    init_EventDestinations();
    init_Events();
    init_Features();
    init_FinancialAccounts();
    init_InboundTransfers();
    init_InboundTransfers2();
    init_Locations();
    init_MeterEventAdjustments();
    init_MeterEventAdjustments2();
    init_MeterEventSession();
    init_MeterEventStream();
    init_MeterEvents();
    init_MeterEvents2();
    init_Meters();
    init_Orders();
    init_OutboundPayments();
    init_OutboundPayments2();
    init_OutboundTransfers();
    init_OutboundTransfers2();
    init_PersonalizationDesigns();
    init_PersonalizationDesigns2();
    init_PhysicalBundles();
    init_Products();
    init_Readers();
    init_Readers2();
    init_ReceivedCredits();
    init_ReceivedCredits2();
    init_ReceivedDebits();
    init_ReceivedDebits2();
    init_Refunds();
    init_Registrations();
    init_ReportRuns();
    init_ReportTypes();
    init_Requests();
    init_ScheduledQueryRuns();
    init_Secrets();
    init_Sessions();
    init_Sessions2();
    init_Sessions3();
    init_Settings();
    init_Suppliers();
    init_TestClocks();
    init_Tokens();
    init_TransactionEntries();
    init_Transactions();
    init_Transactions2();
    init_Transactions3();
    init_Transactions4();
    init_Transactions5();
    init_ValueListItems();
    init_ValueLists();
    init_VerificationReports();
    init_VerificationSessions();
    init_Accounts2();
    init_AccountLinks();
    init_AccountSessions();
    init_Accounts2();
    init_ApplePayDomains();
    init_ApplicationFees();
    init_Balance();
    init_BalanceTransactions();
    init_Charges();
    init_ConfirmationTokens2();
    init_CountrySpecs();
    init_Coupons();
    init_CreditNotes();
    init_CustomerSessions();
    init_Customers2();
    init_Disputes2();
    init_EphemeralKeys();
    init_Events2();
    init_ExchangeRates();
    init_FileLinks();
    init_Files();
    init_InvoiceItems();
    init_InvoicePayments();
    init_InvoiceRenderingTemplates();
    init_Invoices();
    init_Mandates();
    init_OAuth();
    init_PaymentIntents();
    init_PaymentLinks();
    init_PaymentMethodConfigurations();
    init_PaymentMethodDomains();
    init_PaymentMethods();
    init_Payouts();
    init_Plans();
    init_Prices();
    init_Products2();
    init_PromotionCodes();
    init_Quotes();
    init_Refunds2();
    init_Reviews();
    init_SetupAttempts();
    init_SetupIntents();
    init_ShippingRates();
    init_Sources();
    init_SubscriptionItems();
    init_SubscriptionSchedules();
    init_Subscriptions();
    init_TaxCodes();
    init_TaxIds();
    init_TaxRates();
    init_Tokens2();
    init_Topups();
    init_Transfers();
    init_WebhookEndpoints();
    Apps = resourceNamespace("apps", { Secrets });
    Billing = resourceNamespace("billing", {
      Alerts,
      CreditBalanceSummary,
      CreditBalanceTransactions,
      CreditGrants,
      MeterEventAdjustments,
      MeterEvents,
      Meters
    });
    BillingPortal = resourceNamespace("billingPortal", {
      Configurations,
      Sessions
    });
    Checkout = resourceNamespace("checkout", {
      Sessions: Sessions2
    });
    Climate = resourceNamespace("climate", {
      Orders,
      Products,
      Suppliers
    });
    Entitlements = resourceNamespace("entitlements", {
      ActiveEntitlements,
      Features
    });
    FinancialConnections = resourceNamespace("financialConnections", {
      Accounts,
      Sessions: Sessions3,
      Transactions: Transactions2
    });
    Forwarding = resourceNamespace("forwarding", {
      Requests
    });
    Identity = resourceNamespace("identity", {
      VerificationReports,
      VerificationSessions
    });
    Issuing = resourceNamespace("issuing", {
      Authorizations: Authorizations2,
      Cardholders,
      Cards: Cards2,
      Disputes,
      PersonalizationDesigns: PersonalizationDesigns2,
      PhysicalBundles,
      Tokens,
      Transactions: Transactions3
    });
    Radar = resourceNamespace("radar", {
      EarlyFraudWarnings,
      ValueListItems,
      ValueLists
    });
    Reporting = resourceNamespace("reporting", {
      ReportRuns,
      ReportTypes
    });
    Sigma = resourceNamespace("sigma", {
      ScheduledQueryRuns
    });
    Tax = resourceNamespace("tax", {
      Calculations,
      Registrations,
      Settings,
      Transactions: Transactions4
    });
    Terminal = resourceNamespace("terminal", {
      Configurations: Configurations2,
      ConnectionTokens,
      Locations,
      Readers: Readers2
    });
    TestHelpers = resourceNamespace("testHelpers", {
      ConfirmationTokens,
      Customers,
      Refunds,
      TestClocks,
      Issuing: resourceNamespace("issuing", {
        Authorizations,
        Cards,
        PersonalizationDesigns,
        Transactions
      }),
      Terminal: resourceNamespace("terminal", {
        Readers
      }),
      Treasury: resourceNamespace("treasury", {
        InboundTransfers,
        OutboundPayments,
        OutboundTransfers,
        ReceivedCredits,
        ReceivedDebits
      })
    });
    Treasury = resourceNamespace("treasury", {
      CreditReversals,
      DebitReversals,
      FinancialAccounts,
      InboundTransfers: InboundTransfers2,
      OutboundPayments: OutboundPayments2,
      OutboundTransfers: OutboundTransfers2,
      ReceivedCredits: ReceivedCredits2,
      ReceivedDebits: ReceivedDebits2,
      TransactionEntries,
      Transactions: Transactions5
    });
    V2 = resourceNamespace("v2", {
      Billing: resourceNamespace("billing", {
        MeterEventAdjustments: MeterEventAdjustments2,
        MeterEventSession,
        MeterEventStream,
        MeterEvents: MeterEvents2
      }),
      Core: resourceNamespace("core", {
        EventDestinations,
        Events
      })
    });
  }
});
function createStripe(platformFunctions, requestSender = defaultRequestSenderFactory) {
  Stripe2.PACKAGE_VERSION = "18.4.0";
  Stripe2.API_VERSION = ApiVersion;
  Stripe2.USER_AGENT = Object.assign({ bindings_version: Stripe2.PACKAGE_VERSION, lang: "node", publisher: "stripe", uname: null, typescript: false }, determineProcessUserAgentProperties());
  Stripe2.StripeResource = StripeResource;
  Stripe2.resources = resources_exports;
  Stripe2.HttpClient = HttpClient;
  Stripe2.HttpClientResponse = HttpClientResponse;
  Stripe2.CryptoProvider = CryptoProvider;
  Stripe2.webhooks = createWebhooks(platformFunctions);
  function Stripe2(key, config = {}) {
    if (!(this instanceof Stripe2)) {
      return new Stripe2(key, config);
    }
    const props = this._getPropsFromConfig(config);
    this._platformFunctions = platformFunctions;
    Object.defineProperty(this, "_emitter", {
      value: this._platformFunctions.createEmitter(),
      enumerable: false,
      configurable: false,
      writable: false
    });
    this.VERSION = Stripe2.PACKAGE_VERSION;
    this.on = this._emitter.on.bind(this._emitter);
    this.once = this._emitter.once.bind(this._emitter);
    this.off = this._emitter.removeListener.bind(this._emitter);
    const agent = props.httpAgent || null;
    this._api = {
      host: props.host || DEFAULT_HOST,
      port: props.port || DEFAULT_PORT,
      protocol: props.protocol || "https",
      basePath: DEFAULT_BASE_PATH,
      version: props.apiVersion || DEFAULT_API_VERSION,
      timeout: validateInteger("timeout", props.timeout, DEFAULT_TIMEOUT),
      maxNetworkRetries: validateInteger("maxNetworkRetries", props.maxNetworkRetries, 2),
      agent,
      httpClient: props.httpClient || (agent ? this._platformFunctions.createNodeHttpClient(agent) : this._platformFunctions.createDefaultHttpClient()),
      dev: false,
      stripeAccount: props.stripeAccount || null,
      stripeContext: props.stripeContext || null
    };
    const typescript = props.typescript || false;
    if (typescript !== Stripe2.USER_AGENT.typescript) {
      Stripe2.USER_AGENT.typescript = typescript;
    }
    if (props.appInfo) {
      this._setAppInfo(props.appInfo);
    }
    this._prepResources();
    this._setAuthenticator(key, props.authenticator);
    this.errors = Error_exports;
    this.webhooks = Stripe2.webhooks;
    this._prevRequestMetrics = [];
    this._enableTelemetry = props.telemetry !== false;
    this._requestSender = requestSender(this);
    this.StripeResource = Stripe2.StripeResource;
  }
  __name(Stripe2, "Stripe2");
  __name2(Stripe2, "Stripe");
  Stripe2.errors = Error_exports;
  Stripe2.createNodeHttpClient = platformFunctions.createNodeHttpClient;
  Stripe2.createFetchHttpClient = platformFunctions.createFetchHttpClient;
  Stripe2.createNodeCryptoProvider = platformFunctions.createNodeCryptoProvider;
  Stripe2.createSubtleCryptoProvider = platformFunctions.createSubtleCryptoProvider;
  Stripe2.prototype = {
    // Properties are set in the constructor above
    _appInfo: void 0,
    on: null,
    off: null,
    once: null,
    VERSION: null,
    StripeResource: null,
    webhooks: null,
    errors: null,
    _api: null,
    _prevRequestMetrics: null,
    _emitter: null,
    _enableTelemetry: null,
    _requestSender: null,
    _platformFunctions: null,
    rawRequest(method, path, params, options) {
      return this._requestSender._rawRequest(method, path, params, options);
    },
    /**
     * @private
     */
    _setAuthenticator(key, authenticator) {
      if (key && authenticator) {
        throw new Error("Can't specify both apiKey and authenticator");
      }
      if (!key && !authenticator) {
        throw new Error("Neither apiKey nor config.authenticator provided");
      }
      this._authenticator = key ? createApiKeyAuthenticator(key) : authenticator;
    },
    /**
     * @private
     * This may be removed in the future.
     */
    _setAppInfo(info) {
      if (info && typeof info !== "object") {
        throw new Error("AppInfo must be an object.");
      }
      if (info && !info.name) {
        throw new Error("AppInfo.name is required");
      }
      info = info || {};
      this._appInfo = APP_INFO_PROPERTIES.reduce((accum, prop) => {
        if (typeof info[prop] == "string") {
          accum = accum || {};
          accum[prop] = info[prop];
        }
        return accum;
      }, {});
    },
    /**
     * @private
     * This may be removed in the future.
     */
    _setApiField(key, value) {
      this._api[key] = value;
    },
    /**
     * @private
     * Please open or upvote an issue at github.com/stripe/stripe-node
     * if you use this, detailing your use-case.
     *
     * It may be deprecated and removed in the future.
     */
    getApiField(key) {
      return this._api[key];
    },
    setClientId(clientId) {
      this._clientId = clientId;
    },
    getClientId() {
      return this._clientId;
    },
    /**
     * @private
     * Please open or upvote an issue at github.com/stripe/stripe-node
     * if you use this, detailing your use-case.
     *
     * It may be deprecated and removed in the future.
     */
    getConstant: /* @__PURE__ */ __name2((c4) => {
      switch (c4) {
        case "DEFAULT_HOST":
          return DEFAULT_HOST;
        case "DEFAULT_PORT":
          return DEFAULT_PORT;
        case "DEFAULT_BASE_PATH":
          return DEFAULT_BASE_PATH;
        case "DEFAULT_API_VERSION":
          return DEFAULT_API_VERSION;
        case "DEFAULT_TIMEOUT":
          return DEFAULT_TIMEOUT;
        case "MAX_NETWORK_RETRY_DELAY_SEC":
          return MAX_NETWORK_RETRY_DELAY_SEC;
        case "INITIAL_NETWORK_RETRY_DELAY_SEC":
          return INITIAL_NETWORK_RETRY_DELAY_SEC;
      }
      return Stripe2[c4];
    }, "getConstant"),
    getMaxNetworkRetries() {
      return this.getApiField("maxNetworkRetries");
    },
    /**
     * @private
     * This may be removed in the future.
     */
    _setApiNumberField(prop, n3, defaultVal) {
      const val = validateInteger(prop, n3, defaultVal);
      this._setApiField(prop, val);
    },
    getMaxNetworkRetryDelay() {
      return MAX_NETWORK_RETRY_DELAY_SEC;
    },
    getInitialNetworkRetryDelay() {
      return INITIAL_NETWORK_RETRY_DELAY_SEC;
    },
    /**
     * @private
     * Please open or upvote an issue at github.com/stripe/stripe-node
     * if you use this, detailing your use-case.
     *
     * It may be deprecated and removed in the future.
     *
     * Gets a JSON version of a User-Agent and uses a cached version for a slight
     * speed advantage.
     */
    getClientUserAgent(cb) {
      return this.getClientUserAgentSeeded(Stripe2.USER_AGENT, cb);
    },
    /**
     * @private
     * Please open or upvote an issue at github.com/stripe/stripe-node
     * if you use this, detailing your use-case.
     *
     * It may be deprecated and removed in the future.
     *
     * Gets a JSON version of a User-Agent by encoding a seeded object and
     * fetching a uname from the system.
     */
    getClientUserAgentSeeded(seed, cb) {
      this._platformFunctions.getUname().then((uname) => {
        var _a2;
        const userAgent = {};
        for (const field in seed) {
          if (!Object.prototype.hasOwnProperty.call(seed, field)) {
            continue;
          }
          userAgent[field] = encodeURIComponent((_a2 = seed[field]) !== null && _a2 !== void 0 ? _a2 : "null");
        }
        userAgent.uname = encodeURIComponent(uname || "UNKNOWN");
        const client = this.getApiField("httpClient");
        if (client) {
          userAgent.httplib = encodeURIComponent(client.getClientName());
        }
        if (this._appInfo) {
          userAgent.application = this._appInfo;
        }
        cb(JSON.stringify(userAgent));
      });
    },
    /**
     * @private
     * Please open or upvote an issue at github.com/stripe/stripe-node
     * if you use this, detailing your use-case.
     *
     * It may be deprecated and removed in the future.
     */
    getAppInfoAsString() {
      if (!this._appInfo) {
        return "";
      }
      let formatted = this._appInfo.name;
      if (this._appInfo.version) {
        formatted += `/${this._appInfo.version}`;
      }
      if (this._appInfo.url) {
        formatted += ` (${this._appInfo.url})`;
      }
      return formatted;
    },
    getTelemetryEnabled() {
      return this._enableTelemetry;
    },
    /**
     * @private
     * This may be removed in the future.
     */
    _prepResources() {
      for (const name in resources_exports) {
        if (!Object.prototype.hasOwnProperty.call(resources_exports, name)) {
          continue;
        }
        this[pascalToCamelCase(name)] = new resources_exports[name](this);
      }
    },
    /**
     * @private
     * This may be removed in the future.
     */
    _getPropsFromConfig(config) {
      if (!config) {
        return {};
      }
      const isString = typeof config === "string";
      const isObject2 = config === Object(config) && !Array.isArray(config);
      if (!isObject2 && !isString) {
        throw new Error("Config must either be an object or a string");
      }
      if (isString) {
        return {
          apiVersion: config
        };
      }
      const values = Object.keys(config).filter((value) => !ALLOWED_CONFIG_PROPERTIES.includes(value));
      if (values.length > 0) {
        throw new Error(`Config object may only contain the following: ${ALLOWED_CONFIG_PROPERTIES.join(", ")}`);
      }
      return config;
    },
    parseThinEvent(payload, header, secret, tolerance, cryptoProvider, receivedAt) {
      return this.webhooks.constructEvent(payload, header, secret, tolerance, cryptoProvider, receivedAt);
    }
  };
  return Stripe2;
}
__name(createStripe, "createStripe");
var DEFAULT_HOST;
var DEFAULT_PORT;
var DEFAULT_BASE_PATH;
var DEFAULT_API_VERSION;
var DEFAULT_TIMEOUT;
var MAX_NETWORK_RETRY_DELAY_SEC;
var INITIAL_NETWORK_RETRY_DELAY_SEC;
var APP_INFO_PROPERTIES;
var ALLOWED_CONFIG_PROPERTIES;
var defaultRequestSenderFactory;
var init_stripe_core = __esm({
  "../node_modules/stripe/esm/stripe.core.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_Error();
    init_RequestSender();
    init_StripeResource();
    init_Webhooks();
    init_apiVersion();
    init_CryptoProvider();
    init_HttpClient();
    init_resources();
    init_utils3();
    DEFAULT_HOST = "api.stripe.com";
    DEFAULT_PORT = "443";
    DEFAULT_BASE_PATH = "/v1/";
    DEFAULT_API_VERSION = ApiVersion;
    DEFAULT_TIMEOUT = 8e4;
    MAX_NETWORK_RETRY_DELAY_SEC = 5;
    INITIAL_NETWORK_RETRY_DELAY_SEC = 0.5;
    APP_INFO_PROPERTIES = ["name", "version", "url", "partner_id"];
    ALLOWED_CONFIG_PROPERTIES = [
      "authenticator",
      "apiVersion",
      "typescript",
      "maxNetworkRetries",
      "httpAgent",
      "httpClient",
      "timeout",
      "host",
      "port",
      "protocol",
      "telemetry",
      "appInfo",
      "stripeAccount",
      "stripeContext"
    ];
    defaultRequestSenderFactory = /* @__PURE__ */ __name2((stripe) => new RequestSender(stripe, StripeResource.MAX_BUFFERED_REQUEST_METRICS), "defaultRequestSenderFactory");
    __name2(createStripe, "createStripe");
  }
});
var Stripe;
var stripe_esm_worker_default;
var init_stripe_esm_worker = __esm({
  "../node_modules/stripe/esm/stripe.esm.worker.js"() {
    init_functionsRoutes_0_8044054200943971();
    init_WebPlatformFunctions();
    init_stripe_core();
    Stripe = createStripe(new WebPlatformFunctions());
    stripe_esm_worker_default = Stripe;
  }
});
function json22(data, status = 200) {
  return new Response(JSON.stringify(data), {
    status,
    headers: {
      "Content-Type": "application/json",
      "Access-Control-Allow-Origin": "*"
      // Webhook: server-to-server; allow all origins
    }
  });
}
__name(json22, "json22");
async function getWebhookSecret(env) {
  if (env.STRIPE_WEBHOOK_SECRET) return env.STRIPE_WEBHOOK_SECRET;
  try {
    const row = await env.DB.prepare("SELECT value FROM settings WHERE key = ?").bind("payment_stripeWebhookSecret").first();
    if (row && row.value) return typeof row.value === "string" ? row.value : String(row.value);
  } catch (e2) {
  }
  return null;
}
__name(getWebhookSecret, "getWebhookSecret");
async function generateInvoicePDF(invoiceData) {
  const invoiceId = invoiceData?.id || invoiceData?.invoiceId;
  if (invoiceId) return `/api/invoices/${invoiceId}/download`;
  const invoiceNumber = invoiceData?.invoiceNumber;
  return `/api/invoices/${encodeURIComponent(invoiceNumber || "")}/download`;
}
__name(generateInvoicePDF, "generateInvoicePDF");
async function handleCheckoutSessionCompleted(session, storage2) {
  console.log("Processing checkout.session.completed for session:", session.id);
  const customerEmail = session.customer_details?.email;
  const customerName = session.customer_details?.name;
  const paymentIntentId = typeof session.payment_intent === "string" ? session.payment_intent : "";
  const amount = session.amount_total ? session.amount_total / 100 : 0;
  const currency = session.currency || "usd";
  if (!customerEmail) {
    throw new Error("Customer email is required for checkout completion");
  }
  if (paymentIntentId) {
    const existing = await storage2.getOrderByPaymentIntentId(paymentIntentId);
    if (existing) {
      console.log(`Idempotency: order already exists for paymentIntentId=${paymentIntentId}. Order ID: ${existing.id}`);
      return;
    }
  }
  console.log(`Processing purchase for: ${customerEmail}, Amount: ${amount} ${currency.toUpperCase()}`);
  const now = (/* @__PURE__ */ new Date()).getTime();
  try {
    let customer = await storage2.getCustomerByEmail(customerEmail);
    if (!customer) {
      console.log(`Creating new customer: ${customerEmail}`);
      customer = await storage2.createCustomer({
        email: customerEmail,
        name: customerName || customerEmail,
        extensionActivated: true,
        subscriptionStatus: "active",
        totalSpent: amount.toString(),
        totalOrders: 1,
        lastOrderDate: now
      });
    } else {
      console.log(`Updating existing customer: ${customerEmail}`);
      await storage2.updateCustomer(customer.id, {
        extensionActivated: true,
        subscriptionStatus: "active",
        totalSpent: (parseFloat(customer.totalSpent) + amount).toString(),
        totalOrders: customer.totalOrders + 1,
        lastOrderDate: now,
        updatedAt: now
      });
    }
    const user = await storage2.getUserByEmail(customerEmail);
    if (user) {
      console.log(`Updating user premium status: ${customerEmail}`);
      await storage2.updateUser(user.id, {
        isPremium: true,
        extensionActivated: true,
        premiumActivatedAt: now.toString(),
        totalSpent: (parseFloat(user.totalSpent) + amount).toString(),
        totalOrders: user.totalOrders + 1
      });
    }
    const downloadToken = `download_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;
    const activationCode = `activation_${Date.now()}_${Math.random().toString(36).substr(2, 12)}`;
    console.log("Creating order record...");
    const order = await storage2.createOrder({
      userId: user?.id || null,
      customerEmail,
      customerName: customerName || customerEmail,
      originalAmount: amount.toString(),
      finalAmount: amount.toString(),
      currency: currency.toLowerCase(),
      status: "completed",
      paymentMethod: "stripe",
      paymentIntentId,
      downloadToken,
      activationCode,
      completedAt: now
    });
    console.log(`Order created with ID: ${order.id}`);
    const invoiceNumber = `INV-${order.id}-${Date.now()}`;
    console.log(`Creating invoice: ${invoiceNumber}`);
    const invoice = await storage2.createInvoice({
      orderId: order.id,
      invoiceNumber,
      customerId: customer.id,
      customerName: customerName || customerEmail,
      customerEmail,
      invoiceDate: now,
      dueDate: now,
      // Immediate payment
      subtotal: amount.toString(),
      taxAmount: "0.00",
      discountAmount: "0.00",
      totalAmount: amount.toString(),
      currency: currency.toUpperCase(),
      status: "paid",
      paidAt: now
    });
    await storage2.createInvoiceItem({
      invoiceId: invoice.id,
      productName: "OCUS Job Hunter Extension",
      description: "Premium Chrome Extension for OCUS Job Hunting",
      quantity: 1,
      unitPrice: amount.toString(),
      totalPrice: amount.toString()
    });
    const activationKey = await storage2.createActivationKey({
      activationKey: activationCode,
      orderId: order.id,
      userId: user?.id
    });
    console.log(`Activation key created: ${activationKey.activationKey}`);
    const invoiceUrl = await generateInvoicePDF({ id: invoice.id, invoiceNumber });
    await storage2.updateOrder(order.id, { invoiceUrl });
    console.log(`\u2705 Successfully processed purchase for ${customerEmail}:`);
    console.log(`   - Customer ID: ${customer.id}`);
    console.log(`   - Order ID: ${order.id}`);
    console.log(`   - Invoice: ${invoiceNumber}`);
    console.log(`   - Activation Code: ${activationCode}`);
    console.log(`   - Amount: ${amount} ${currency.toUpperCase()}`);
  } catch (error) {
    console.error("Error in handleCheckoutSessionCompleted:", error);
    throw new Error(`Failed to process checkout completion: ${error.message}`);
  }
}
__name(handleCheckoutSessionCompleted, "handleCheckoutSessionCompleted");
var onRequestPost27;
var onRequestOptions58;
var init_stripe_webhook = __esm({
  "api/stripe-webhook.ts"() {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    init_storage();
    init_stripe_esm_worker();
    init_d1();
    init_schema();
    __name2(json22, "json");
    __name2(getWebhookSecret, "getWebhookSecret");
    __name2(generateInvoicePDF, "generateInvoicePDF");
    onRequestPost27 = /* @__PURE__ */ __name2(async (ctx) => {
      const { request, env, waitUntil } = ctx;
      const signature = request.headers.get("stripe-signature") || request.headers.get("Stripe-Signature");
      if (!signature) {
        console.error("Webhook Error: Missing Stripe-Signature header");
        return new Response("Missing Stripe-Signature header", { status: 400 });
      }
      if (!env.STRIPE_SECRET_KEY) {
        console.error("Missing STRIPE_SECRET_KEY");
        return new Response("Server not configured", { status: 500 });
      }
      const webhookSecret = await getWebhookSecret(env);
      if (!webhookSecret) {
        console.error("Missing STRIPE_WEBHOOK_SECRET");
        return new Response("Webhook not configured", { status: 500 });
      }
      let event;
      try {
        const stripe = new stripe_esm_worker_default(env.STRIPE_SECRET_KEY, {
          // Use account default API version
          httpClient: stripe_esm_worker_default.createFetchHttpClient()
        });
        const body = await request.text();
        const cryptoProvider = stripe_esm_worker_default.createSubtleCryptoProvider();
        event = await stripe.webhooks.constructEventAsync(body, signature, webhookSecret, void 0, cryptoProvider);
        console.log("Stripe webhook signature verified for event:", event.type);
      } catch (err2) {
        console.error("Webhook signature verification failed:", err2?.message || err2);
        return new Response(`Webhook signature verification failed: ${err2?.message || "unknown error"}`, { status: 400 });
      }
      const db = drizzle(env.DB, { schema: schema_exports });
      const storage2 = new DatabaseStorage(db);
      try {
        switch (event.type) {
          case "checkout.session.completed": {
            const sessionObj = event.data.object;
            if (env.STRIPE_EVENTS_QUEUE) {
              console.log("Enqueuing checkout.session.completed to STRIPE_EVENTS_QUEUE");
              try {
                waitUntil(env.STRIPE_EVENTS_QUEUE.send({
                  eventType: event.type,
                  eventId: event.id,
                  created: event.created,
                  session: sessionObj
                }));
              } catch (e2) {
                console.error("Queue enqueue failed; falling back to inline processing:", e2);
                waitUntil((async () => {
                  try {
                    await handleCheckoutSessionCompleted(sessionObj, storage2);
                  } catch (err2) {
                    console.error("Deferred processing error (checkout.session.completed fallback):", err2);
                  }
                })());
              }
            } else {
              console.log("Queue not configured; scheduling inline processing via waitUntil");
              waitUntil((async () => {
                try {
                  await handleCheckoutSessionCompleted(sessionObj, storage2);
                } catch (e2) {
                  console.error("Deferred processing error (checkout.session.completed):", e2);
                }
              })());
            }
            break;
          }
          case "payment_intent.succeeded":
            console.log("Payment intent succeeded:", event.data.object.id);
            break;
          case "payment_intent.payment_failed":
            console.log("Payment intent failed:", event.data.object.id);
            break;
          case "customer.subscription.created":
          case "customer.subscription.updated":
          case "customer.subscription.deleted":
            console.log("Subscription event:", event.type, event.data.object.id);
            break;
          default:
            console.log(`Unhandled event type: ${event.type}`);
        }
        return json22({ received: true, scheduled: true });
      } catch (err2) {
        console.error("Error processing Stripe webhook:", err2);
        return new Response(`Webhook processing error: ${err2.message}`, { status: 500 });
      }
    }, "onRequestPost");
    __name2(handleCheckoutSessionCompleted, "handleCheckoutSessionCompleted");
    onRequestOptions58 = /* @__PURE__ */ __name2(async () => {
      return new Response(null, {
        status: 200,
        headers: {
          "Access-Control-Allow-Origin": "*",
          "Access-Control-Allow-Methods": "POST, OPTIONS",
          "Access-Control-Allow-Headers": "Content-Type, stripe-signature, Stripe-Signature",
          "Access-Control-Max-Age": "86400"
        }
      });
    }, "onRequestOptions");
  }
});
var onRequestPost28;
var onRequestOptions59;
var init_test_upload = __esm({
  "api/test-upload.ts"() {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    init_settings_storage();
    onRequestPost28 = /* @__PURE__ */ __name2(async ({ request, env }) => {
      try {
        console.log("=== TEST UPLOAD ENDPOINT ===");
        if (!env.DB) {
          return new Response(JSON.stringify({
            success: false,
            message: "Database not available"
          }), {
            status: 500,
            headers: {
              "Content-Type": "application/json",
              "Access-Control-Allow-Origin": "*"
            }
          });
        }
        const formData = await request.formData();
        console.log("Test upload - FormData keys:", Array.from(formData.keys()));
        const testFile = formData.get("testImage");
        console.log("Test file received:", testFile ? `${testFile.name} (${testFile.size} bytes, ${testFile.type})` : "null");
        if (testFile && testFile.size > 0) {
          console.log("Converting test file to base64...");
          const arrayBuffer = await testFile.arrayBuffer();
          const base64 = btoa(String.fromCharCode(...new Uint8Array(arrayBuffer)));
          const dataUrl = `data:${testFile.type};base64,${base64}`;
          console.log("Test file converted, data URL length:", dataUrl.length);
          const settingsStorage = new SettingsStorage(env.DB);
          await settingsStorage.initializeSettings();
          console.log("Saving test image to database...");
          await settingsStorage.setSetting("test_image", dataUrl);
          console.log("Test image saved successfully");
          console.log("Verifying saved data...");
          const savedData = await settingsStorage.getSetting("test_image");
          console.log("Retrieved data length:", savedData ? savedData.length : "null");
          return new Response(JSON.stringify({
            success: true,
            message: "Test upload successful",
            originalSize: testFile.size,
            dataUrlLength: dataUrl.length,
            savedDataLength: savedData ? savedData.length : 0,
            verified: savedData === dataUrl
          }), {
            headers: {
              "Content-Type": "application/json",
              "Access-Control-Allow-Origin": "*"
            }
          });
        } else {
          return new Response(JSON.stringify({
            success: false,
            message: "No file received or file is empty"
          }), {
            status: 400,
            headers: {
              "Content-Type": "application/json",
              "Access-Control-Allow-Origin": "*"
            }
          });
        }
      } catch (error) {
        console.error("Test upload error:", error);
        const message = error instanceof Error ? error.message : String(error);
        return new Response(JSON.stringify({
          success: false,
          message: `Test upload failed: ${message}`
        }), {
          status: 500,
          headers: {
            "Content-Type": "application/json",
            "Access-Control-Allow-Origin": "*"
          }
        });
      }
    }, "onRequestPost");
    onRequestOptions59 = /* @__PURE__ */ __name2(async () => {
      return new Response(null, {
        status: 200,
        headers: {
          "Access-Control-Allow-Origin": "*",
          "Access-Control-Allow-Methods": "POST, OPTIONS",
          "Access-Control-Allow-Headers": "Content-Type, Authorization"
        }
      });
    }, "onRequestOptions");
  }
});
function json23(data, status = 200) {
  return new Response(JSON.stringify(data), {
    status,
    headers: {
      "Content-Type": "application/json",
      "Access-Control-Allow-Origin": "*"
    }
  });
}
__name(json23, "json23");
var onRequestPost29;
var init_test_user = __esm({
  "api/test-user.ts"() {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    __name2(json23, "json");
    onRequestPost29 = /* @__PURE__ */ __name2(async ({ request, env }) => {
      try {
        const body = await request.json();
        const email = body.email || "heshmat@gmail.com";
        if (!env.DB) {
          return json23({ success: false, message: "Database not available" }, 500);
        }
        const user = await env.DB.prepare(`
      SELECT id, email, name, is_premium, extension_activated, premium_activated_at, created_at
      FROM users WHERE email = ?
    `).bind(email).first();
        const customer = await env.DB.prepare(`
      SELECT id, email, name, is_premium, extension_activated, created_at
      FROM customers WHERE email = ?
    `).bind(email).first();
        const ordersUserQuery = await env.DB.prepare(`
      SELECT id, customer_id, customer_email, original_amount, final_amount, status, created_at, completed_at
      FROM orders WHERE customer_email = ?
    `).bind(email).all();
        const ordersCustomerQuery = customer ? await env.DB.prepare(`
      SELECT id, customer_id, customer_email, original_amount, final_amount, status, created_at, completed_at
      FROM orders WHERE customer_id = ?
    `).bind(customer.id).all() : { results: [] };
        return json23({
          success: true,
          email,
          user,
          customer,
          ordersFromEmail: ordersUserQuery.results,
          ordersFromCustomerId: ordersCustomerQuery.results,
          summary: {
            userExists: !!user,
            customerExists: !!customer,
            userPremium: user?.is_premium === 1,
            customerPremium: customer?.is_premium === 1,
            userExtensionActivated: user?.extension_activated === 1,
            customerExtensionActivated: customer?.extension_activated === 1,
            totalOrdersFromEmail: ordersUserQuery.results?.length || 0,
            totalOrdersFromCustomerId: ordersCustomerQuery.results?.length || 0
          }
        });
      } catch (error) {
        console.error("Error checking user data:", error);
        return json23({
          success: false,
          message: error.message
        }, 500);
      }
    }, "onRequestPost");
  }
});
function json24(data, status = 200) {
  return new Response(JSON.stringify(data), {
    status,
    headers: {
      "Content-Type": "application/json",
      "Access-Control-Allow-Origin": "*"
    }
  });
}
__name(json24, "json24");
var onRequestOptions60;
var onRequestGet58;
var onRequestPost30;
var init_tickets2 = __esm({
  "api/tickets/index.ts"() {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    init_db();
    init_user_storage();
    __name2(json24, "json");
    onRequestOptions60 = /* @__PURE__ */ __name2(async () => {
      return new Response(null, {
        headers: {
          "Access-Control-Allow-Origin": "*",
          "Access-Control-Allow-Methods": "GET, POST, PATCH, DELETE, OPTIONS",
          "Access-Control-Allow-Headers": "Content-Type"
        }
      });
    }, "onRequestOptions");
    onRequestGet58 = /* @__PURE__ */ __name2(async ({ request, env }) => {
      const expressBase = env?.EXPRESS_API_BASE;
      if (expressBase) {
        const base = expressBase.replace(/\/$/, "");
        const urlObj = new URL(request.url);
        const qs2 = urlObj.search ? urlObj.search : "";
        const url2 = `${base}/api/tickets${qs2}`;
        const headers = {};
        const cookie = request.headers.get("cookie");
        const auth = request.headers.get("authorization");
        if (cookie) headers["cookie"] = cookie;
        if (auth) headers["authorization"] = auth;
        const proxied = await fetch(url2, { headers, redirect: "manual" });
        const respHeaders = new Headers(proxied.headers);
        const setCookie = respHeaders.get("set-cookie");
        if (setCookie) {
          const rewritten = setCookie.replace(/;\s*Domain=[^;]+/i, "");
          respHeaders.delete("set-cookie");
          respHeaders.append("set-cookie", rewritten);
        }
        return new Response(proxied.body, { status: proxied.status, headers: respHeaders });
      }
      const url = new URL(request.url);
      const isAdmin = url.searchParams.get("isAdmin") === "true";
      const customerEmail = url.searchParams.get("customerEmail");
      const customerId = url.searchParams.get("customerId");
      if (!env.DB) {
        console.error("D1 database not available");
        return json24({ error: "Database not available" }, 500);
      }
      try {
        const storage2 = new TicketStorage(env.DB);
        let result = [];
        if (isAdmin) {
          result = await storage2.getAllTickets();
        } else if (customerId) {
          result = await storage2.getTicketsByCustomerId(parseInt(customerId));
        } else if (customerEmail) {
          result = await storage2.getTicketsByCustomerEmail(customerEmail);
        } else {
          result = [];
        }
        return json24(result);
      } catch (error) {
        console.error("Database error:", error);
        return json24({ error: "Database query failed", details: error.message }, 500);
      }
    }, "onRequestGet");
    onRequestPost30 = /* @__PURE__ */ __name2(async ({ request, env }) => {
      try {
        const expressBase = env?.EXPRESS_API_BASE;
        if (expressBase) {
          const base = expressBase.replace(/\/$/, "");
          const url = `${base}/api/tickets`;
          const headers = {};
          const cookie = request.headers.get("cookie");
          const ct2 = request.headers.get("content-type");
          const auth = request.headers.get("authorization");
          if (cookie) headers["cookie"] = cookie;
          if (ct2) headers["content-type"] = ct2;
          if (auth) headers["authorization"] = auth;
          const proxied = await fetch(url, { method: "POST", headers, body: request.body, redirect: "manual" });
          const respHeaders = new Headers(proxied.headers);
          const setCookie = respHeaders.get("set-cookie");
          if (setCookie) {
            const rewritten = setCookie.replace(/;\s*Domain=[^;]+/i, "");
            respHeaders.delete("set-cookie");
            respHeaders.append("set-cookie", rewritten);
          }
          return new Response(proxied.body, { status: proxied.status, headers: respHeaders });
        }
        const body = await request.json();
        const { title, description, category, priority, customerEmail, customerName, customerId } = body;
        const parsedCustomerId = customerId ? parseInt(customerId) : void 0;
        if (!title || !description || !customerEmail || !parsedCustomerId) {
          return json24({ success: false, message: "Missing required fields" }, 400);
        }
        if (!env.DB) {
          console.error("D1 database not available for ticket creation");
          return json24({ success: false, message: "Database not available" }, 500);
        }
        const storage2 = new TicketStorage(env.DB);
        let finalCustomerName = customerName;
        if (parsedCustomerId && !customerName) {
          try {
            const userStorage = new UserStorage(env.DB);
            await userStorage.initializeUsers();
            const user = await userStorage.getUserById(parsedCustomerId);
            if (user) {
              finalCustomerName = user.name;
            }
          } catch (error) {
            console.error("Failed to fetch user name:", error);
          }
        }
        const ticket = await storage2.createTicket({
          customer_id: parsedCustomerId,
          title,
          description,
          category: category || "general",
          priority: priority || "medium",
          status: "open",
          customer_email: customerEmail,
          customer_name: finalCustomerName || customerEmail
        });
        return json24({ success: true, ticket });
      } catch (e2) {
        console.error("Failed to create ticket:", e2);
        const message = e2 instanceof Error ? e2.message : "An unknown error occurred";
        return json24({ success: false, message }, 500);
      }
    }, "onRequestPost");
  }
});
var init_stripe = __esm({
  "webhooks/stripe.ts"() {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    init_stripe_webhook();
  }
});
var onRequestGet59;
var init_health = __esm({
  "health.ts"() {
    "use strict";
    init_functionsRoutes_0_8044054200943971();
    onRequestGet59 = /* @__PURE__ */ __name2(async () => {
      return new Response(JSON.stringify({
        status: "ok",
        timestamp: Date.now(),
        message: "OCUS Job Hunter API is running"
      }), {
        headers: {
          "Content-Type": "application/json",
          "Access-Control-Allow-Origin": "*"
        }
      });
    }, "onRequestGet");
  }
});
var routes;
var init_functionsRoutes_0_8044054200943971 = __esm({
  "../.wrangler/tmp/pages-UCTxDL/functionsRoutes-0.8044054200943971.mjs"() {
    "use strict";
    init_translate();
    init_translate();
    init_list();
    init_id();
    init_id();
    init_id();
    init_id();
    init_id2();
    init_id2();
    init_id2();
    init_id2();
    init_feature();
    init_feature();
    init_orderId();
    init_id3();
    init_id4();
    init_download();
    init_download_receipt();
    init_html();
    init_receipt();
    init_archive();
    init_messages();
    init_messages();
    init_messages();
    init_status();
    init_status();
    init_purchase_status();
    init_invoices();
    init_invoices();
    init_orders();
    init_orders();
    init_purchase_status2();
    init_purchase_status2();
    init_analytics();
    init_analytics();
    init_announcement_badges();
    init_announcement_badges();
    init_announcement_badges();
    init_announcement_badges();
    init_announcement_badges();
    init_auth_settings();
    init_auth_settings();
    init_auth_settings();
    init_chat_settings();
    init_chat_settings();
    init_chat_settings();
    init_check_user_data();
    init_countdown_banners();
    init_countdown_banners();
    init_countdown_banners();
    init_countdown_banners();
    init_countdown_banners();
    init_create_default_banner();
    init_create_default_banner();
    init_customers();
    init_customers();
    init_dashboard_features();
    init_dashboard_features();
    init_dashboard_features();
    init_fix_banner_price();
    init_fix_existing_purchases();
    init_fix_existing_purchases();
    init_fix_premium_users();
    init_fix_purchased_users();
    init_force_update_price();
    init_invoices2();
    init_invoices2();
    init_login();
    init_login();
    init_orders2();
    init_orders2();
    init_payment_settings();
    init_payment_settings();
    init_payment_settings();
    init_pricing();
    init_pricing();
    init_pricing();
    init_reset_db();
    init_reset_db();
    init_seo_settings();
    init_seo_settings();
    init_seo_settings();
    init_seo_settings();
    init_stats();
    init_stats();
    init_sync_banner_price();
    init_sync_banner_price();
    init_tickets();
    init_tickets();
    init_update_banner_price();
    init_update_banner_price();
    init_update_banner_price_direct();
    init_update_premium_status();
    init_update_premium_status();
    init_update_user_premium();
    init_users();
    init_users();
    init_active();
    init_active();
    init_facebook();
    init_github();
    init_google();
    init_register();
    init_register();
    init_active2();
    init_active2();
    init_login2();
    init_login2();
    init_profile();
    init_profile();
    init_profile();
    init_register2();
    init_register2();
    init_stats2();
    init_stats2();
    init_premium();
    init_trial();
    init_premium_extension();
    init_premium_extension();
    init_customer();
    init_generate();
    init_generate();
    init_invoices3();
    init_invoices3();
    init_orders3();
    init_orders3();
    init_complete_purchase();
    init_complete_purchase();
    init_user_orders();
    init_user_orders();
    init_pricing2();
    init_pricing2();
    init_type();
    init_type();
    init_orderId2();
    init_id5();
    init_id5();
    init_id5();
    init_id5();
    init_auth_settings2();
    init_auth_settings2();
    init_chat();
    init_chat();
    init_complete_stripe_payment();
    init_complete_stripe_payment();
    init_create_payment_intent();
    init_create_payment_intent();
    init_create_user_payment_intent();
    init_create_user_payment_intent();
    init_download_premium();
    init_download_premium();
    init_download_premium();
    init_init_db();
    init_init_db();
    init_invoice_settings();
    init_invoice_settings();
    init_invoice_settings();
    init_invoices4();
    init_me();
    init_migrate_db();
    init_migrate_db();
    init_purchase_complete();
    init_purchase_complete();
    init_stripe_webhook();
    init_stripe_webhook();
    init_test_upload();
    init_test_upload();
    init_test_user();
    init_tickets2();
    init_tickets2();
    init_tickets2();
    init_stripe();
    init_stripe();
    init_health();
    routes = [
      {
        routePath: "/api/admin/announcement-badges/translate",
        mountPath: "/api/admin/announcement-badges",
        method: "OPTIONS",
        middlewares: [],
        modules: [onRequestOptions]
      },
      {
        routePath: "/api/admin/announcement-badges/translate",
        mountPath: "/api/admin/announcement-badges",
        method: "POST",
        middlewares: [],
        modules: [onRequestPost]
      },
      {
        routePath: "/api/invoices/admin/list",
        mountPath: "/api/invoices/admin",
        method: "GET",
        middlewares: [],
        modules: [onRequestGet]
      },
      {
        routePath: "/api/admin/announcement-badges/:id",
        mountPath: "/api/admin/announcement-badges",
        method: "DELETE",
        middlewares: [],
        modules: [onRequestDelete]
      },
      {
        routePath: "/api/admin/announcement-badges/:id",
        mountPath: "/api/admin/announcement-badges",
        method: "GET",
        middlewares: [],
        modules: [onRequestGet2]
      },
      {
        routePath: "/api/admin/announcement-badges/:id",
        mountPath: "/api/admin/announcement-badges",
        method: "OPTIONS",
        middlewares: [],
        modules: [onRequestOptions2]
      },
      {
        routePath: "/api/admin/announcement-badges/:id",
        mountPath: "/api/admin/announcement-badges",
        method: "PUT",
        middlewares: [],
        modules: [onRequestPut]
      },
      {
        routePath: "/api/admin/countdown-banners/:id",
        mountPath: "/api/admin/countdown-banners",
        method: "DELETE",
        middlewares: [],
        modules: [onRequestDelete2]
      },
      {
        routePath: "/api/admin/countdown-banners/:id",
        mountPath: "/api/admin/countdown-banners",
        method: "GET",
        middlewares: [],
        modules: [onRequestGet3]
      },
      {
        routePath: "/api/admin/countdown-banners/:id",
        mountPath: "/api/admin/countdown-banners",
        method: "OPTIONS",
        middlewares: [],
        modules: [onRequestOptions3]
      },
      {
        routePath: "/api/admin/countdown-banners/:id",
        mountPath: "/api/admin/countdown-banners",
        method: "PUT",
        middlewares: [],
        modules: [onRequestPut2]
      },
      {
        routePath: "/api/admin/dashboard-features/:feature",
        mountPath: "/api/admin/dashboard-features",
        method: "OPTIONS",
        middlewares: [],
        modules: [onRequestOptions4]
      },
      {
        routePath: "/api/admin/dashboard-features/:feature",
        mountPath: "/api/admin/dashboard-features",
        method: "PUT",
        middlewares: [],
        modules: [onRequestPut3]
      },
      {
        routePath: "/api/admin/orders/:orderId",
        mountPath: "/api/admin/orders",
        method: "PUT",
        middlewares: [],
        modules: [onRequestPut4]
      },
      {
        routePath: "/api/extension/check/:id",
        mountPath: "/api/extension/check",
        method: "GET",
        middlewares: [],
        modules: [onRequestGet4]
      },
      {
        routePath: "/api/extension/downloads/:id",
        mountPath: "/api/extension/downloads",
        method: "GET",
        middlewares: [],
        modules: [onRequestGet5]
      },
      {
        routePath: "/api/invoices/:id/download",
        mountPath: "/api/invoices/:id",
        method: "GET",
        middlewares: [],
        modules: [onRequestGet6]
      },
      {
        routePath: "/api/invoices/:id/download-receipt",
        mountPath: "/api/invoices/:id",
        method: "GET",
        middlewares: [],
        modules: [onRequestGet7]
      },
      {
        routePath: "/api/invoices/:id/html",
        mountPath: "/api/invoices/:id",
        method: "GET",
        middlewares: [],
        modules: [onRequestGet8]
      },
      {
        routePath: "/api/invoices/:id/receipt",
        mountPath: "/api/invoices/:id",
        method: "GET",
        middlewares: [],
        modules: [onRequestGet9]
      },
      {
        routePath: "/api/tickets/:id/archive",
        mountPath: "/api/tickets/:id",
        method: "POST",
        middlewares: [],
        modules: [onRequestPost2]
      },
      {
        routePath: "/api/tickets/:id/messages",
        mountPath: "/api/tickets/:id",
        method: "GET",
        middlewares: [],
        modules: [onRequestGet10]
      },
      {
        routePath: "/api/tickets/:id/messages",
        mountPath: "/api/tickets/:id",
        method: "OPTIONS",
        middlewares: [],
        modules: [onRequestOptions5]
      },
      {
        routePath: "/api/tickets/:id/messages",
        mountPath: "/api/tickets/:id",
        method: "POST",
        middlewares: [],
        modules: [onRequestPost3]
      },
      {
        routePath: "/api/tickets/:id/status",
        mountPath: "/api/tickets/:id",
        method: "OPTIONS",
        middlewares: [],
        modules: [onRequestOptions6]
      },
      {
        routePath: "/api/tickets/:id/status",
        mountPath: "/api/tickets/:id",
        method: "PUT",
        middlewares: [],
        modules: [onRequestPut5]
      },
      {
        routePath: "/api/user/:id/purchase-status",
        mountPath: "/api/user/:id",
        method: "GET",
        middlewares: [],
        modules: [onRequestGet11]
      },
      {
        routePath: "/api/user/:userId/invoices",
        mountPath: "/api/user/:userId",
        method: "GET",
        middlewares: [],
        modules: [onRequestGet12]
      },
      {
        routePath: "/api/user/:userId/invoices",
        mountPath: "/api/user/:userId",
        method: "OPTIONS",
        middlewares: [],
        modules: [onRequestOptions7]
      },
      {
        routePath: "/api/user/:userId/orders",
        mountPath: "/api/user/:userId",
        method: "GET",
        middlewares: [],
        modules: [onRequestGet13]
      },
      {
        routePath: "/api/user/:userId/orders",
        mountPath: "/api/user/:userId",
        method: "OPTIONS",
        middlewares: [],
        modules: [onRequestOptions8]
      },
      {
        routePath: "/api/user/:userId/purchase-status",
        mountPath: "/api/user/:userId",
        method: "GET",
        middlewares: [],
        modules: [onRequestGet14]
      },
      {
        routePath: "/api/user/:userId/purchase-status",
        mountPath: "/api/user/:userId",
        method: "OPTIONS",
        middlewares: [],
        modules: [onRequestOptions9]
      },
      {
        routePath: "/api/admin/analytics",
        mountPath: "/api/admin",
        method: "GET",
        middlewares: [],
        modules: [onRequestGet15]
      },
      {
        routePath: "/api/admin/analytics",
        mountPath: "/api/admin",
        method: "OPTIONS",
        middlewares: [],
        modules: [onRequestOptions10]
      },
      {
        routePath: "/api/admin/announcement-badges",
        mountPath: "/api/admin",
        method: "DELETE",
        middlewares: [],
        modules: [onRequestDelete3]
      },
      {
        routePath: "/api/admin/announcement-badges",
        mountPath: "/api/admin",
        method: "GET",
        middlewares: [],
        modules: [onRequestGet16]
      },
      {
        routePath: "/api/admin/announcement-badges",
        mountPath: "/api/admin",
        method: "OPTIONS",
        middlewares: [],
        modules: [onRequestOptions11]
      },
      {
        routePath: "/api/admin/announcement-badges",
        mountPath: "/api/admin",
        method: "POST",
        middlewares: [],
        modules: [onRequestPost4]
      },
      {
        routePath: "/api/admin/announcement-badges",
        mountPath: "/api/admin",
        method: "PUT",
        middlewares: [],
        modules: [onRequestPut6]
      },
      {
        routePath: "/api/admin/auth-settings",
        mountPath: "/api/admin",
        method: "GET",
        middlewares: [],
        modules: [onRequestGet17]
      },
      {
        routePath: "/api/admin/auth-settings",
        mountPath: "/api/admin",
        method: "OPTIONS",
        middlewares: [],
        modules: [onRequestOptions12]
      },
      {
        routePath: "/api/admin/auth-settings",
        mountPath: "/api/admin",
        method: "PUT",
        middlewares: [],
        modules: [onRequestPut7]
      },
      {
        routePath: "/api/admin/chat-settings",
        mountPath: "/api/admin",
        method: "GET",
        middlewares: [],
        modules: [onRequestGet18]
      },
      {
        routePath: "/api/admin/chat-settings",
        mountPath: "/api/admin",
        method: "OPTIONS",
        middlewares: [],
        modules: [onRequestOptions13]
      },
      {
        routePath: "/api/admin/chat-settings",
        mountPath: "/api/admin",
        method: "PUT",
        middlewares: [],
        modules: [onRequestPut8]
      },
      {
        routePath: "/api/admin/check-user-data",
        mountPath: "/api/admin",
        method: "GET",
        middlewares: [],
        modules: [onRequestGet19]
      },
      {
        routePath: "/api/admin/countdown-banners",
        mountPath: "/api/admin",
        method: "DELETE",
        middlewares: [],
        modules: [onRequestDelete4]
      },
      {
        routePath: "/api/admin/countdown-banners",
        mountPath: "/api/admin",
        method: "GET",
        middlewares: [],
        modules: [onRequestGet20]
      },
      {
        routePath: "/api/admin/countdown-banners",
        mountPath: "/api/admin",
        method: "OPTIONS",
        middlewares: [],
        modules: [onRequestOptions14]
      },
      {
        routePath: "/api/admin/countdown-banners",
        mountPath: "/api/admin",
        method: "POST",
        middlewares: [],
        modules: [onRequestPost5]
      },
      {
        routePath: "/api/admin/countdown-banners",
        mountPath: "/api/admin",
        method: "PUT",
        middlewares: [],
        modules: [onRequestPut9]
      },
      {
        routePath: "/api/admin/create-default-banner",
        mountPath: "/api/admin",
        method: "OPTIONS",
        middlewares: [],
        modules: [onRequestOptions15]
      },
      {
        routePath: "/api/admin/create-default-banner",
        mountPath: "/api/admin",
        method: "POST",
        middlewares: [],
        modules: [onRequestPost6]
      },
      {
        routePath: "/api/admin/customers",
        mountPath: "/api/admin",
        method: "GET",
        middlewares: [],
        modules: [onRequestGet21]
      },
      {
        routePath: "/api/admin/customers",
        mountPath: "/api/admin",
        method: "OPTIONS",
        middlewares: [],
        modules: [onRequestOptions16]
      },
      {
        routePath: "/api/admin/dashboard-features",
        mountPath: "/api/admin",
        method: "GET",
        middlewares: [],
        modules: [onRequestGet22]
      },
      {
        routePath: "/api/admin/dashboard-features",
        mountPath: "/api/admin",
        method: "OPTIONS",
        middlewares: [],
        modules: [onRequestOptions17]
      },
      {
        routePath: "/api/admin/dashboard-features",
        mountPath: "/api/admin",
        method: "PUT",
        middlewares: [],
        modules: [onRequestPut10]
      },
      {
        routePath: "/api/admin/fix-banner-price",
        mountPath: "/api/admin",
        method: "POST",
        middlewares: [],
        modules: [onRequestPost7]
      },
      {
        routePath: "/api/admin/fix-existing-purchases",
        mountPath: "/api/admin",
        method: "OPTIONS",
        middlewares: [],
        modules: [onRequestOptions18]
      },
      {
        routePath: "/api/admin/fix-existing-purchases",
        mountPath: "/api/admin",
        method: "POST",
        middlewares: [],
        modules: [onRequestPost8]
      },
      {
        routePath: "/api/admin/fix-premium-users",
        mountPath: "/api/admin",
        method: "POST",
        middlewares: [],
        modules: [onRequestPost9]
      },
      {
        routePath: "/api/admin/fix-purchased-users",
        mountPath: "/api/admin",
        method: "POST",
        middlewares: [],
        modules: [onRequestPost10]
      },
      {
        routePath: "/api/admin/force-update-price",
        mountPath: "/api/admin",
        method: "GET",
        middlewares: [],
        modules: [onRequestGet23]
      },
      {
        routePath: "/api/admin/invoices",
        mountPath: "/api/admin",
        method: "GET",
        middlewares: [],
        modules: [onRequestGet24]
      },
      {
        routePath: "/api/admin/invoices",
        mountPath: "/api/admin",
        method: "OPTIONS",
        middlewares: [],
        modules: [onRequestOptions19]
      },
      {
        routePath: "/api/admin/login",
        mountPath: "/api/admin",
        method: "OPTIONS",
        middlewares: [],
        modules: [onRequestOptions20]
      },
      {
        routePath: "/api/admin/login",
        mountPath: "/api/admin",
        method: "POST",
        middlewares: [],
        modules: [onRequestPost11]
      },
      {
        routePath: "/api/admin/orders",
        mountPath: "/api/admin",
        method: "GET",
        middlewares: [],
        modules: [onRequestGet25]
      },
      {
        routePath: "/api/admin/orders",
        mountPath: "/api/admin",
        method: "OPTIONS",
        middlewares: [],
        modules: [onRequestOptions21]
      },
      {
        routePath: "/api/admin/payment-settings",
        mountPath: "/api/admin",
        method: "GET",
        middlewares: [],
        modules: [onRequestGet26]
      },
      {
        routePath: "/api/admin/payment-settings",
        mountPath: "/api/admin",
        method: "OPTIONS",
        middlewares: [],
        modules: [onRequestOptions22]
      },
      {
        routePath: "/api/admin/payment-settings",
        mountPath: "/api/admin",
        method: "PUT",
        middlewares: [],
        modules: [onRequestPut11]
      },
      {
        routePath: "/api/admin/pricing",
        mountPath: "/api/admin",
        method: "GET",
        middlewares: [],
        modules: [onRequestGet27]
      },
      {
        routePath: "/api/admin/pricing",
        mountPath: "/api/admin",
        method: "OPTIONS",
        middlewares: [],
        modules: [onRequestOptions23]
      },
      {
        routePath: "/api/admin/pricing",
        mountPath: "/api/admin",
        method: "PUT",
        middlewares: [],
        modules: [onRequestPut12]
      },
      {
        routePath: "/api/admin/reset-db",
        mountPath: "/api/admin",
        method: "OPTIONS",
        middlewares: [],
        modules: [onRequestOptions24]
      },
      {
        routePath: "/api/admin/reset-db",
        mountPath: "/api/admin",
        method: "POST",
        middlewares: [],
        modules: [onRequestPost12]
      },
      {
        routePath: "/api/admin/seo-settings",
        mountPath: "/api/admin",
        method: "GET",
        middlewares: [],
        modules: [onRequestGet28]
      },
      {
        routePath: "/api/admin/seo-settings",
        mountPath: "/api/admin",
        method: "OPTIONS",
        middlewares: [],
        modules: [onRequestOptions25]
      },
      {
        routePath: "/api/admin/seo-settings",
        mountPath: "/api/admin",
        method: "PATCH",
        middlewares: [],
        modules: [onRequestPatch]
      },
      {
        routePath: "/api/admin/seo-settings",
        mountPath: "/api/admin",
        method: "PUT",
        middlewares: [],
        modules: [onRequestPut13]
      },
      {
        routePath: "/api/admin/stats",
        mountPath: "/api/admin",
        method: "GET",
        middlewares: [],
        modules: [onRequestGet29]
      },
      {
        routePath: "/api/admin/stats",
        mountPath: "/api/admin",
        method: "OPTIONS",
        middlewares: [],
        modules: [onRequestOptions26]
      },
      {
        routePath: "/api/admin/sync-banner-price",
        mountPath: "/api/admin",
        method: "OPTIONS",
        middlewares: [],
        modules: [onRequestOptions27]
      },
      {
        routePath: "/api/admin/sync-banner-price",
        mountPath: "/api/admin",
        method: "POST",
        middlewares: [],
        modules: [onRequestPost13]
      },
      {
        routePath: "/api/admin/tickets",
        mountPath: "/api/admin",
        method: "GET",
        middlewares: [],
        modules: [onRequestGet30]
      },
      {
        routePath: "/api/admin/tickets",
        mountPath: "/api/admin",
        method: "OPTIONS",
        middlewares: [],
        modules: [onRequestOptions28]
      },
      {
        routePath: "/api/admin/update-banner-price",
        mountPath: "/api/admin",
        method: "OPTIONS",
        middlewares: [],
        modules: [onRequestOptions29]
      },
      {
        routePath: "/api/admin/update-banner-price",
        mountPath: "/api/admin",
        method: "POST",
        middlewares: [],
        modules: [onRequestPost14]
      },
      {
        routePath: "/api/admin/update-banner-price-direct",
        mountPath: "/api/admin",
        method: "GET",
        middlewares: [],
        modules: [onRequestGet31]
      },
      {
        routePath: "/api/admin/update-premium-status",
        mountPath: "/api/admin",
        method: "GET",
        middlewares: [],
        modules: [onRequestGet32]
      },
      {
        routePath: "/api/admin/update-premium-status",
        mountPath: "/api/admin",
        method: "OPTIONS",
        middlewares: [],
        modules: [onRequestOptions30]
      },
      {
        routePath: "/api/admin/update-user-premium",
        mountPath: "/api/admin",
        method: "POST",
        middlewares: [],
        modules: [onRequestPost15]
      },
      {
        routePath: "/api/admin/users",
        mountPath: "/api/admin",
        method: "GET",
        middlewares: [],
        modules: [onRequestGet33]
      },
      {
        routePath: "/api/admin/users",
        mountPath: "/api/admin",
        method: "OPTIONS",
        middlewares: [],
        modules: [onRequestOptions31]
      },
      {
        routePath: "/api/announcement-badge/active",
        mountPath: "/api/announcement-badge",
        method: "GET",
        middlewares: [],
        modules: [onRequestGet34]
      },
      {
        routePath: "/api/announcement-badge/active",
        mountPath: "/api/announcement-badge",
        method: "OPTIONS",
        middlewares: [],
        modules: [onRequestOptions32]
      },
      {
        routePath: "/api/auth/facebook",
        mountPath: "/api/auth",
        method: "GET",
        middlewares: [],
        modules: [onRequestGet35]
      },
      {
        routePath: "/api/auth/github",
        mountPath: "/api/auth",
        method: "GET",
        middlewares: [],
        modules: [onRequestGet36]
      },
      {
        routePath: "/api/auth/google",
        mountPath: "/api/auth",
        method: "GET",
        middlewares: [],
        modules: [onRequestGet37]
      },
      {
        routePath: "/api/auth/register",
        mountPath: "/api/auth",
        method: "OPTIONS",
        middlewares: [],
        modules: [onRequestOptions33]
      },
      {
        routePath: "/api/auth/register",
        mountPath: "/api/auth",
        method: "POST",
        middlewares: [],
        modules: [onRequestPost16]
      },
      {
        routePath: "/api/countdown-banner/active",
        mountPath: "/api/countdown-banner",
        method: "GET",
        middlewares: [],
        modules: [onRequestGet38]
      },
      {
        routePath: "/api/countdown-banner/active",
        mountPath: "/api/countdown-banner",
        method: "OPTIONS",
        middlewares: [],
        modules: [onRequestOptions34]
      },
      {
        routePath: "/api/customer/login",
        mountPath: "/api/customer",
        method: "OPTIONS",
        middlewares: [],
        modules: [onRequestOptions35]
      },
      {
        routePath: "/api/customer/login",
        mountPath: "/api/customer",
        method: "POST",
        middlewares: [],
        modules: [onRequestPost17]
      },
      {
        routePath: "/api/customer/profile",
        mountPath: "/api/customer",
        method: "GET",
        middlewares: [],
        modules: [onRequestGet39]
      },
      {
        routePath: "/api/customer/profile",
        mountPath: "/api/customer",
        method: "OPTIONS",
        middlewares: [],
        modules: [onRequestOptions36]
      },
      {
        routePath: "/api/customer/profile",
        mountPath: "/api/customer",
        method: "PUT",
        middlewares: [],
        modules: [onRequestPut14]
      },
      {
        routePath: "/api/customer/register",
        mountPath: "/api/customer",
        method: "OPTIONS",
        middlewares: [],
        modules: [onRequestOptions37]
      },
      {
        routePath: "/api/customer/register",
        mountPath: "/api/customer",
        method: "POST",
        middlewares: [],
        modules: [onRequestPost18]
      },
      {
        routePath: "/api/customer/stats",
        mountPath: "/api/customer",
        method: "GET",
        middlewares: [],
        modules: [onRequestGet40]
      },
      {
        routePath: "/api/customer/stats",
        mountPath: "/api/customer",
        method: "OPTIONS",
        middlewares: [],
        modules: [onRequestOptions38]
      },
      {
        routePath: "/api/download-extension/premium",
        mountPath: "/api/download-extension",
        method: "GET",
        middlewares: [],
        modules: [onRequestGet41]
      },
      {
        routePath: "/api/download-extension/trial",
        mountPath: "/api/download-extension",
        method: "GET",
        middlewares: [],
        modules: [onRequestGet42]
      },
      {
        routePath: "/api/downloads/premium-extension",
        mountPath: "/api/downloads",
        method: "GET",
        middlewares: [],
        modules: [onRequestGet43]
      },
      {
        routePath: "/api/downloads/premium-extension",
        mountPath: "/api/downloads",
        method: "OPTIONS",
        middlewares: [],
        modules: [onRequestOptions39]
      },
      {
        routePath: "/api/invoices/customer",
        mountPath: "/api/invoices",
        method: "GET",
        middlewares: [],
        modules: [onRequestGet44]
      },
      {
        routePath: "/api/invoices/generate",
        mountPath: "/api/invoices",
        method: "GET",
        middlewares: [],
        modules: [onRequestGet45]
      },
      {
        routePath: "/api/invoices/generate",
        mountPath: "/api/invoices",
        method: "OPTIONS",
        middlewares: [],
        modules: [onRequestOptions40]
      },
      {
        routePath: "/api/me/invoices",
        mountPath: "/api/me",
        method: "GET",
        middlewares: [],
        modules: [onRequestGet46]
      },
      {
        routePath: "/api/me/invoices",
        mountPath: "/api/me",
        method: "OPTIONS",
        middlewares: [],
        modules: [onRequestOptions41]
      },
      {
        routePath: "/api/me/orders",
        mountPath: "/api/me",
        method: "GET",
        middlewares: [],
        modules: [onRequestGet47]
      },
      {
        routePath: "/api/me/orders",
        mountPath: "/api/me",
        method: "OPTIONS",
        middlewares: [],
        modules: [onRequestOptions42]
      },
      {
        routePath: "/api/orders/complete-purchase",
        mountPath: "/api/orders",
        method: "OPTIONS",
        middlewares: [],
        modules: [onRequestOptions43]
      },
      {
        routePath: "/api/orders/complete-purchase",
        mountPath: "/api/orders",
        method: "POST",
        middlewares: [],
        modules: [onRequestPost19]
      },
      {
        routePath: "/api/orders/user-orders",
        mountPath: "/api/orders",
        method: "GET",
        middlewares: [],
        modules: [onRequestGet48]
      },
      {
        routePath: "/api/orders/user-orders",
        mountPath: "/api/orders",
        method: "OPTIONS",
        middlewares: [],
        modules: [onRequestOptions44]
      },
      {
        routePath: "/api/products/pricing",
        mountPath: "/api/products",
        method: "GET",
        middlewares: [],
        modules: [onRequestGet49]
      },
      {
        routePath: "/api/products/pricing",
        mountPath: "/api/products",
        method: "OPTIONS",
        middlewares: [],
        modules: [onRequestOptions45]
      },
      {
        routePath: "/api/download-extension/:type",
        mountPath: "/api/download-extension",
        method: "GET",
        middlewares: [],
        modules: [onRequestGet50]
      },
      {
        routePath: "/api/download-extension/:type",
        mountPath: "/api/download-extension",
        method: "OPTIONS",
        middlewares: [],
        modules: [onRequestOptions46]
      },
      {
        routePath: "/api/generate-invoice/:orderId",
        mountPath: "/api/generate-invoice",
        method: "POST",
        middlewares: [],
        modules: [onRequestPost20]
      },
      {
        routePath: "/api/tickets/:id",
        mountPath: "/api/tickets",
        method: "DELETE",
        middlewares: [],
        modules: [onRequestDelete5]
      },
      {
        routePath: "/api/tickets/:id",
        mountPath: "/api/tickets",
        method: "OPTIONS",
        middlewares: [],
        modules: [onRequestOptions47]
      },
      {
        routePath: "/api/tickets/:id",
        mountPath: "/api/tickets",
        method: "PATCH",
        middlewares: [],
        modules: [onRequestPatch2]
      },
      {
        routePath: "/api/tickets/:id",
        mountPath: "/api/tickets",
        method: "PUT",
        middlewares: [],
        modules: [onRequestPut15]
      },
      {
        routePath: "/api/auth-settings",
        mountPath: "/api",
        method: "GET",
        middlewares: [],
        modules: [onRequestGet51]
      },
      {
        routePath: "/api/auth-settings",
        mountPath: "/api",
        method: "OPTIONS",
        middlewares: [],
        modules: [onRequestOptions48]
      },
      {
        routePath: "/api/chat",
        mountPath: "/api",
        method: "OPTIONS",
        middlewares: [],
        modules: [onRequestOptions49]
      },
      {
        routePath: "/api/chat",
        mountPath: "/api",
        method: "POST",
        middlewares: [],
        modules: [onRequestPost21]
      },
      {
        routePath: "/api/complete-stripe-payment",
        mountPath: "/api",
        method: "OPTIONS",
        middlewares: [],
        modules: [onRequestOptions50]
      },
      {
        routePath: "/api/complete-stripe-payment",
        mountPath: "/api",
        method: "POST",
        middlewares: [],
        modules: [onRequestPost22]
      },
      {
        routePath: "/api/create-payment-intent",
        mountPath: "/api",
        method: "OPTIONS",
        middlewares: [],
        modules: [onRequestOptions51]
      },
      {
        routePath: "/api/create-payment-intent",
        mountPath: "/api",
        method: "POST",
        middlewares: [],
        modules: [onRequestPost23]
      },
      {
        routePath: "/api/create-user-payment-intent",
        mountPath: "/api",
        method: "OPTIONS",
        middlewares: [],
        modules: [onRequestOptions52]
      },
      {
        routePath: "/api/create-user-payment-intent",
        mountPath: "/api",
        method: "POST",
        middlewares: [],
        modules: [onRequestPost24]
      },
      {
        routePath: "/api/download-premium",
        mountPath: "/api",
        method: "GET",
        middlewares: [],
        modules: [onRequestGet52]
      },
      {
        routePath: "/api/download-premium",
        mountPath: "/api",
        method: "OPTIONS",
        middlewares: [],
        modules: [onRequestOptions53]
      },
      {
        routePath: "/api/download-premium",
        mountPath: "/api",
        method: "POST",
        middlewares: [],
        modules: [onRequestPost25]
      },
      {
        routePath: "/api/init-db",
        mountPath: "/api",
        method: "GET",
        middlewares: [],
        modules: [onRequestGet53]
      },
      {
        routePath: "/api/init-db",
        mountPath: "/api",
        method: "OPTIONS",
        middlewares: [],
        modules: [onRequestOptions54]
      },
      {
        routePath: "/api/invoice-settings",
        mountPath: "/api",
        method: "GET",
        middlewares: [],
        modules: [onRequestGet54]
      },
      {
        routePath: "/api/invoice-settings",
        mountPath: "/api",
        method: "OPTIONS",
        middlewares: [],
        modules: [onRequestOptions55]
      },
      {
        routePath: "/api/invoice-settings",
        mountPath: "/api",
        method: "PUT",
        middlewares: [],
        modules: [onRequestPut16]
      },
      {
        routePath: "/api/invoices",
        mountPath: "/api",
        method: "GET",
        middlewares: [],
        modules: [onRequestGet55]
      },
      {
        routePath: "/api/me",
        mountPath: "/api",
        method: "GET",
        middlewares: [],
        modules: [onRequestGet56]
      },
      {
        routePath: "/api/migrate-db",
        mountPath: "/api",
        method: "GET",
        middlewares: [],
        modules: [onRequestGet57]
      },
      {
        routePath: "/api/migrate-db",
        mountPath: "/api",
        method: "OPTIONS",
        middlewares: [],
        modules: [onRequestOptions56]
      },
      {
        routePath: "/api/purchase-complete",
        mountPath: "/api",
        method: "OPTIONS",
        middlewares: [],
        modules: [onRequestOptions57]
      },
      {
        routePath: "/api/purchase-complete",
        mountPath: "/api",
        method: "POST",
        middlewares: [],
        modules: [onRequestPost26]
      },
      {
        routePath: "/api/stripe-webhook",
        mountPath: "/api",
        method: "OPTIONS",
        middlewares: [],
        modules: [onRequestOptions58]
      },
      {
        routePath: "/api/stripe-webhook",
        mountPath: "/api",
        method: "POST",
        middlewares: [],
        modules: [onRequestPost27]
      },
      {
        routePath: "/api/test-upload",
        mountPath: "/api",
        method: "OPTIONS",
        middlewares: [],
        modules: [onRequestOptions59]
      },
      {
        routePath: "/api/test-upload",
        mountPath: "/api",
        method: "POST",
        middlewares: [],
        modules: [onRequestPost28]
      },
      {
        routePath: "/api/test-user",
        mountPath: "/api",
        method: "POST",
        middlewares: [],
        modules: [onRequestPost29]
      },
      {
        routePath: "/api/tickets",
        mountPath: "/api/tickets",
        method: "GET",
        middlewares: [],
        modules: [onRequestGet58]
      },
      {
        routePath: "/api/tickets",
        mountPath: "/api/tickets",
        method: "OPTIONS",
        middlewares: [],
        modules: [onRequestOptions60]
      },
      {
        routePath: "/api/tickets",
        mountPath: "/api/tickets",
        method: "POST",
        middlewares: [],
        modules: [onRequestPost30]
      },
      {
        routePath: "/webhooks/stripe",
        mountPath: "/webhooks",
        method: "OPTIONS",
        middlewares: [],
        modules: [onRequestOptions58]
      },
      {
        routePath: "/webhooks/stripe",
        mountPath: "/webhooks",
        method: "POST",
        middlewares: [],
        modules: [onRequestPost27]
      },
      {
        routePath: "/health",
        mountPath: "/",
        method: "GET",
        middlewares: [],
        modules: [onRequestGet59]
      }
    ];
  }
});
init_functionsRoutes_0_8044054200943971();
init_functionsRoutes_0_8044054200943971();
init_functionsRoutes_0_8044054200943971();
init_functionsRoutes_0_8044054200943971();
function lexer(str) {
  var tokens = [];
  var i33 = 0;
  while (i33 < str.length) {
    var char = str[i33];
    if (char === "*" || char === "+" || char === "?") {
      tokens.push({ type: "MODIFIER", index: i33, value: str[i33++] });
      continue;
    }
    if (char === "\\") {
      tokens.push({ type: "ESCAPED_CHAR", index: i33++, value: str[i33++] });
      continue;
    }
    if (char === "{") {
      tokens.push({ type: "OPEN", index: i33, value: str[i33++] });
      continue;
    }
    if (char === "}") {
      tokens.push({ type: "CLOSE", index: i33, value: str[i33++] });
      continue;
    }
    if (char === ":") {
      var name = "";
      var j2 = i33 + 1;
      while (j2 < str.length) {
        var code = str.charCodeAt(j2);
        if (
          // `0-9`
          code >= 48 && code <= 57 || // `A-Z`
          code >= 65 && code <= 90 || // `a-z`
          code >= 97 && code <= 122 || // `_`
          code === 95
        ) {
          name += str[j2++];
          continue;
        }
        break;
      }
      if (!name)
        throw new TypeError("Missing parameter name at ".concat(i33));
      tokens.push({ type: "NAME", index: i33, value: name });
      i33 = j2;
      continue;
    }
    if (char === "(") {
      var count2 = 1;
      var pattern = "";
      var j2 = i33 + 1;
      if (str[j2] === "?") {
        throw new TypeError('Pattern cannot start with "?" at '.concat(j2));
      }
      while (j2 < str.length) {
        if (str[j2] === "\\") {
          pattern += str[j2++] + str[j2++];
          continue;
        }
        if (str[j2] === ")") {
          count2--;
          if (count2 === 0) {
            j2++;
            break;
          }
        } else if (str[j2] === "(") {
          count2++;
          if (str[j2 + 1] !== "?") {
            throw new TypeError("Capturing groups are not allowed at ".concat(j2));
          }
        }
        pattern += str[j2++];
      }
      if (count2)
        throw new TypeError("Unbalanced pattern at ".concat(i33));
      if (!pattern)
        throw new TypeError("Missing pattern at ".concat(i33));
      tokens.push({ type: "PATTERN", index: i33, value: pattern });
      i33 = j2;
      continue;
    }
    tokens.push({ type: "CHAR", index: i33, value: str[i33++] });
  }
  tokens.push({ type: "END", index: i33, value: "" });
  return tokens;
}
__name(lexer, "lexer");
__name2(lexer, "lexer");
function parse(str, options) {
  if (options === void 0) {
    options = {};
  }
  var tokens = lexer(str);
  var _a2 = options.prefixes, prefixes = _a2 === void 0 ? "./" : _a2, _b2 = options.delimiter, delimiter = _b2 === void 0 ? "/#?" : _b2;
  var result = [];
  var key = 0;
  var i33 = 0;
  var path = "";
  var tryConsume = /* @__PURE__ */ __name2(function(type) {
    if (i33 < tokens.length && tokens[i33].type === type)
      return tokens[i33++].value;
  }, "tryConsume");
  var mustConsume = /* @__PURE__ */ __name2(function(type) {
    var value2 = tryConsume(type);
    if (value2 !== void 0)
      return value2;
    var _a3 = tokens[i33], nextType = _a3.type, index2 = _a3.index;
    throw new TypeError("Unexpected ".concat(nextType, " at ").concat(index2, ", expected ").concat(type));
  }, "mustConsume");
  var consumeText = /* @__PURE__ */ __name2(function() {
    var result2 = "";
    var value2;
    while (value2 = tryConsume("CHAR") || tryConsume("ESCAPED_CHAR")) {
      result2 += value2;
    }
    return result2;
  }, "consumeText");
  var isSafe = /* @__PURE__ */ __name2(function(value2) {
    for (var _i = 0, delimiter_1 = delimiter; _i < delimiter_1.length; _i++) {
      var char2 = delimiter_1[_i];
      if (value2.indexOf(char2) > -1)
        return true;
    }
    return false;
  }, "isSafe");
  var safePattern = /* @__PURE__ */ __name2(function(prefix2) {
    var prev = result[result.length - 1];
    var prevText = prefix2 || (prev && typeof prev === "string" ? prev : "");
    if (prev && !prevText) {
      throw new TypeError('Must have text between two parameters, missing text after "'.concat(prev.name, '"'));
    }
    if (!prevText || isSafe(prevText))
      return "[^".concat(escapeString(delimiter), "]+?");
    return "(?:(?!".concat(escapeString(prevText), ")[^").concat(escapeString(delimiter), "])+?");
  }, "safePattern");
  while (i33 < tokens.length) {
    var char = tryConsume("CHAR");
    var name = tryConsume("NAME");
    var pattern = tryConsume("PATTERN");
    if (name || pattern) {
      var prefix = char || "";
      if (prefixes.indexOf(prefix) === -1) {
        path += prefix;
        prefix = "";
      }
      if (path) {
        result.push(path);
        path = "";
      }
      result.push({
        name: name || key++,
        prefix,
        suffix: "",
        pattern: pattern || safePattern(prefix),
        modifier: tryConsume("MODIFIER") || ""
      });
      continue;
    }
    var value = char || tryConsume("ESCAPED_CHAR");
    if (value) {
      path += value;
      continue;
    }
    if (path) {
      result.push(path);
      path = "";
    }
    var open2 = tryConsume("OPEN");
    if (open2) {
      var prefix = consumeText();
      var name_1 = tryConsume("NAME") || "";
      var pattern_1 = tryConsume("PATTERN") || "";
      var suffix = consumeText();
      mustConsume("CLOSE");
      result.push({
        name: name_1 || (pattern_1 ? key++ : ""),
        pattern: name_1 && !pattern_1 ? safePattern(prefix) : pattern_1,
        prefix,
        suffix,
        modifier: tryConsume("MODIFIER") || ""
      });
      continue;
    }
    mustConsume("END");
  }
  return result;
}
__name(parse, "parse");
__name2(parse, "parse");
function match(str, options) {
  var keys = [];
  var re2 = pathToRegexp(str, keys, options);
  return regexpToFunction(re2, keys, options);
}
__name(match, "match");
__name2(match, "match");
function regexpToFunction(re2, keys, options) {
  if (options === void 0) {
    options = {};
  }
  var _a2 = options.decode, decode = _a2 === void 0 ? function(x22) {
    return x22;
  } : _a2;
  return function(pathname) {
    var m4 = re2.exec(pathname);
    if (!m4)
      return false;
    var path = m4[0], index2 = m4.index;
    var params = /* @__PURE__ */ Object.create(null);
    var _loop_1 = /* @__PURE__ */ __name2(function(i4) {
      if (m4[i4] === void 0)
        return "continue";
      var key = keys[i4 - 1];
      if (key.modifier === "*" || key.modifier === "+") {
        params[key.name] = m4[i4].split(key.prefix + key.suffix).map(function(value) {
          return decode(value, key);
        });
      } else {
        params[key.name] = decode(m4[i4], key);
      }
    }, "_loop_1");
    for (var i33 = 1; i33 < m4.length; i33++) {
      _loop_1(i33);
    }
    return { path, index: index2, params };
  };
}
__name(regexpToFunction, "regexpToFunction");
__name2(regexpToFunction, "regexpToFunction");
function escapeString(str) {
  return str.replace(/([.+*?=^!:${}()[\]|/\\])/g, "\\$1");
}
__name(escapeString, "escapeString");
__name2(escapeString, "escapeString");
function flags(options) {
  return options && options.sensitive ? "" : "i";
}
__name(flags, "flags");
__name2(flags, "flags");
function regexpToRegexp(path, keys) {
  if (!keys)
    return path;
  var groupsRegex = /\((?:\?<(.*?)>)?(?!\?)/g;
  var index2 = 0;
  var execResult = groupsRegex.exec(path.source);
  while (execResult) {
    keys.push({
      // Use parenthesized substring match if available, index otherwise
      name: execResult[1] || index2++,
      prefix: "",
      suffix: "",
      modifier: "",
      pattern: ""
    });
    execResult = groupsRegex.exec(path.source);
  }
  return path;
}
__name(regexpToRegexp, "regexpToRegexp");
__name2(regexpToRegexp, "regexpToRegexp");
function arrayToRegexp(paths, keys, options) {
  var parts = paths.map(function(path) {
    return pathToRegexp(path, keys, options).source;
  });
  return new RegExp("(?:".concat(parts.join("|"), ")"), flags(options));
}
__name(arrayToRegexp, "arrayToRegexp");
__name2(arrayToRegexp, "arrayToRegexp");
function stringToRegexp(path, keys, options) {
  return tokensToRegexp(parse(path, options), keys, options);
}
__name(stringToRegexp, "stringToRegexp");
__name2(stringToRegexp, "stringToRegexp");
function tokensToRegexp(tokens, keys, options) {
  if (options === void 0) {
    options = {};
  }
  var _a2 = options.strict, strict = _a2 === void 0 ? false : _a2, _b2 = options.start, start = _b2 === void 0 ? true : _b2, _c = options.end, end = _c === void 0 ? true : _c, _d = options.encode, encode = _d === void 0 ? function(x22) {
    return x22;
  } : _d, _e = options.delimiter, delimiter = _e === void 0 ? "/#?" : _e, _f = options.endsWith, endsWith = _f === void 0 ? "" : _f;
  var endsWithRe = "[".concat(escapeString(endsWith), "]|$");
  var delimiterRe = "[".concat(escapeString(delimiter), "]");
  var route = start ? "^" : "";
  for (var _i = 0, tokens_1 = tokens; _i < tokens_1.length; _i++) {
    var token = tokens_1[_i];
    if (typeof token === "string") {
      route += escapeString(encode(token));
    } else {
      var prefix = escapeString(encode(token.prefix));
      var suffix = escapeString(encode(token.suffix));
      if (token.pattern) {
        if (keys)
          keys.push(token);
        if (prefix || suffix) {
          if (token.modifier === "+" || token.modifier === "*") {
            var mod = token.modifier === "*" ? "?" : "";
            route += "(?:".concat(prefix, "((?:").concat(token.pattern, ")(?:").concat(suffix).concat(prefix, "(?:").concat(token.pattern, "))*)").concat(suffix, ")").concat(mod);
          } else {
            route += "(?:".concat(prefix, "(").concat(token.pattern, ")").concat(suffix, ")").concat(token.modifier);
          }
        } else {
          if (token.modifier === "+" || token.modifier === "*") {
            throw new TypeError('Can not repeat "'.concat(token.name, '" without a prefix and suffix'));
          }
          route += "(".concat(token.pattern, ")").concat(token.modifier);
        }
      } else {
        route += "(?:".concat(prefix).concat(suffix, ")").concat(token.modifier);
      }
    }
  }
  if (end) {
    if (!strict)
      route += "".concat(delimiterRe, "?");
    route += !options.endsWith ? "$" : "(?=".concat(endsWithRe, ")");
  } else {
    var endToken = tokens[tokens.length - 1];
    var isEndDelimited = typeof endToken === "string" ? delimiterRe.indexOf(endToken[endToken.length - 1]) > -1 : endToken === void 0;
    if (!strict) {
      route += "(?:".concat(delimiterRe, "(?=").concat(endsWithRe, "))?");
    }
    if (!isEndDelimited) {
      route += "(?=".concat(delimiterRe, "|").concat(endsWithRe, ")");
    }
  }
  return new RegExp(route, flags(options));
}
__name(tokensToRegexp, "tokensToRegexp");
__name2(tokensToRegexp, "tokensToRegexp");
function pathToRegexp(path, keys, options) {
  if (path instanceof RegExp)
    return regexpToRegexp(path, keys);
  if (Array.isArray(path))
    return arrayToRegexp(path, keys, options);
  return stringToRegexp(path, keys, options);
}
__name(pathToRegexp, "pathToRegexp");
__name2(pathToRegexp, "pathToRegexp");
var escapeRegex = /[.+?^${}()|[\]\\]/g;
function* executeRequest(request) {
  const requestPath = new URL(request.url).pathname;
  for (const route of [...routes].reverse()) {
    if (route.method && route.method !== request.method) {
      continue;
    }
    const routeMatcher = match(route.routePath.replace(escapeRegex, "\\$&"), {
      end: false
    });
    const mountMatcher = match(route.mountPath.replace(escapeRegex, "\\$&"), {
      end: false
    });
    const matchResult = routeMatcher(requestPath);
    const mountMatchResult = mountMatcher(requestPath);
    if (matchResult && mountMatchResult) {
      for (const handler of route.middlewares.flat()) {
        yield {
          handler,
          params: matchResult.params,
          path: mountMatchResult.path
        };
      }
    }
  }
  for (const route of routes) {
    if (route.method && route.method !== request.method) {
      continue;
    }
    const routeMatcher = match(route.routePath.replace(escapeRegex, "\\$&"), {
      end: true
    });
    const mountMatcher = match(route.mountPath.replace(escapeRegex, "\\$&"), {
      end: false
    });
    const matchResult = routeMatcher(requestPath);
    const mountMatchResult = mountMatcher(requestPath);
    if (matchResult && mountMatchResult && route.modules.length) {
      for (const handler of route.modules.flat()) {
        yield {
          handler,
          params: matchResult.params,
          path: matchResult.path
        };
      }
      break;
    }
  }
}
__name(executeRequest, "executeRequest");
__name2(executeRequest, "executeRequest");
var pages_template_worker_default = {
  async fetch(originalRequest, env, workerContext) {
    let request = originalRequest;
    const handlerIterator = executeRequest(request);
    let data = {};
    let isFailOpen = false;
    const next = /* @__PURE__ */ __name2(async (input, init) => {
      if (input !== void 0) {
        let url = input;
        if (typeof input === "string") {
          url = new URL(input, request.url).toString();
        }
        request = new Request(url, init);
      }
      const result = handlerIterator.next();
      if (result.done === false) {
        const { handler, params, path } = result.value;
        const context = {
          request: new Request(request.clone()),
          functionPath: path,
          next,
          params,
          get data() {
            return data;
          },
          set data(value) {
            if (typeof value !== "object" || value === null) {
              throw new Error("context.data must be an object");
            }
            data = value;
          },
          env,
          waitUntil: workerContext.waitUntil.bind(workerContext),
          passThroughOnException: /* @__PURE__ */ __name2(() => {
            isFailOpen = true;
          }, "passThroughOnException")
        };
        const response = await handler(context);
        if (!(response instanceof Response)) {
          throw new Error("Your Pages function should return a Response");
        }
        return cloneResponse(response);
      } else if ("ASSETS") {
        const response = await env["ASSETS"].fetch(request);
        return cloneResponse(response);
      } else {
        const response = await fetch(request);
        return cloneResponse(response);
      }
    }, "next");
    try {
      return await next();
    } catch (error) {
      if (isFailOpen) {
        const response = await env["ASSETS"].fetch(request);
        return cloneResponse(response);
      }
      throw error;
    }
  }
};
var cloneResponse = /* @__PURE__ */ __name2((response) => (
  // https://fetch.spec.whatwg.org/#null-body-status
  new Response(
    [101, 204, 205, 304].includes(response.status) ? null : response.body,
    response
  )
), "cloneResponse");
init_functionsRoutes_0_8044054200943971();
var drainBody = /* @__PURE__ */ __name2(async (request, env, _ctx, middlewareCtx) => {
  try {
    return await middlewareCtx.next(request, env);
  } finally {
    try {
      if (request.body !== null && !request.bodyUsed) {
        const reader = request.body.getReader();
        while (!(await reader.read()).done) {
        }
      }
    } catch (e2) {
      console.error("Failed to drain the unused request body.", e2);
    }
  }
}, "drainBody");
var middleware_ensure_req_body_drained_default = drainBody;
init_functionsRoutes_0_8044054200943971();
function reduceError(e2) {
  return {
    name: e2?.name,
    message: e2?.message ?? String(e2),
    stack: e2?.stack,
    cause: e2?.cause === void 0 ? void 0 : reduceError(e2.cause)
  };
}
__name(reduceError, "reduceError");
__name2(reduceError, "reduceError");
var jsonError = /* @__PURE__ */ __name2(async (request, env, _ctx, middlewareCtx) => {
  try {
    return await middlewareCtx.next(request, env);
  } catch (e2) {
    const error = reduceError(e2);
    return Response.json(error, {
      status: 500,
      headers: { "MF-Experimental-Error-Stack": "true" }
    });
  }
}, "jsonError");
var middleware_miniflare3_json_error_default = jsonError;
var __INTERNAL_WRANGLER_MIDDLEWARE__ = [
  middleware_ensure_req_body_drained_default,
  middleware_miniflare3_json_error_default
];
var middleware_insertion_facade_default = pages_template_worker_default;
init_functionsRoutes_0_8044054200943971();
var __facade_middleware__ = [];
function __facade_register__(...args) {
  __facade_middleware__.push(...args.flat());
}
__name(__facade_register__, "__facade_register__");
__name2(__facade_register__, "__facade_register__");
function __facade_invokeChain__(request, env, ctx, dispatch, middlewareChain) {
  const [head, ...tail] = middlewareChain;
  const middlewareCtx = {
    dispatch,
    next(newRequest, newEnv) {
      return __facade_invokeChain__(newRequest, newEnv, ctx, dispatch, tail);
    }
  };
  return head(request, env, ctx, middlewareCtx);
}
__name(__facade_invokeChain__, "__facade_invokeChain__");
__name2(__facade_invokeChain__, "__facade_invokeChain__");
function __facade_invoke__(request, env, ctx, dispatch, finalMiddleware) {
  return __facade_invokeChain__(request, env, ctx, dispatch, [
    ...__facade_middleware__,
    finalMiddleware
  ]);
}
__name(__facade_invoke__, "__facade_invoke__");
__name2(__facade_invoke__, "__facade_invoke__");
var __Facade_ScheduledController__ = class ___Facade_ScheduledController__ {
  static {
    __name(this, "___Facade_ScheduledController__");
  }
  constructor(scheduledTime, cron, noRetry) {
    this.scheduledTime = scheduledTime;
    this.cron = cron;
    this.#noRetry = noRetry;
  }
  static {
    __name2(this, "__Facade_ScheduledController__");
  }
  #noRetry;
  noRetry() {
    if (!(this instanceof ___Facade_ScheduledController__)) {
      throw new TypeError("Illegal invocation");
    }
    this.#noRetry();
  }
};
function wrapExportedHandler(worker) {
  if (__INTERNAL_WRANGLER_MIDDLEWARE__ === void 0 || __INTERNAL_WRANGLER_MIDDLEWARE__.length === 0) {
    return worker;
  }
  for (const middleware of __INTERNAL_WRANGLER_MIDDLEWARE__) {
    __facade_register__(middleware);
  }
  const fetchDispatcher = /* @__PURE__ */ __name2(function(request, env, ctx) {
    if (worker.fetch === void 0) {
      throw new Error("Handler does not export a fetch() function.");
    }
    return worker.fetch(request, env, ctx);
  }, "fetchDispatcher");
  return {
    ...worker,
    fetch(request, env, ctx) {
      const dispatcher = /* @__PURE__ */ __name2(function(type, init) {
        if (type === "scheduled" && worker.scheduled !== void 0) {
          const controller = new __Facade_ScheduledController__(
            Date.now(),
            init.cron ?? "",
            () => {
            }
          );
          return worker.scheduled(controller, env, ctx);
        }
      }, "dispatcher");
      return __facade_invoke__(request, env, ctx, dispatcher, fetchDispatcher);
    }
  };
}
__name(wrapExportedHandler, "wrapExportedHandler");
__name2(wrapExportedHandler, "wrapExportedHandler");
function wrapWorkerEntrypoint(klass) {
  if (__INTERNAL_WRANGLER_MIDDLEWARE__ === void 0 || __INTERNAL_WRANGLER_MIDDLEWARE__.length === 0) {
    return klass;
  }
  for (const middleware of __INTERNAL_WRANGLER_MIDDLEWARE__) {
    __facade_register__(middleware);
  }
  return class extends klass {
    #fetchDispatcher = /* @__PURE__ */ __name2((request, env, ctx) => {
      this.env = env;
      this.ctx = ctx;
      if (super.fetch === void 0) {
        throw new Error("Entrypoint class does not define a fetch() function.");
      }
      return super.fetch(request);
    }, "#fetchDispatcher");
    #dispatcher = /* @__PURE__ */ __name2((type, init) => {
      if (type === "scheduled" && super.scheduled !== void 0) {
        const controller = new __Facade_ScheduledController__(
          Date.now(),
          init.cron ?? "",
          () => {
          }
        );
        return super.scheduled(controller);
      }
    }, "#dispatcher");
    fetch(request) {
      return __facade_invoke__(
        request,
        this.env,
        this.ctx,
        this.#dispatcher,
        this.#fetchDispatcher
      );
    }
  };
}
__name(wrapWorkerEntrypoint, "wrapWorkerEntrypoint");
__name2(wrapWorkerEntrypoint, "wrapWorkerEntrypoint");
var WRAPPED_ENTRY;
if (typeof middleware_insertion_facade_default === "object") {
  WRAPPED_ENTRY = wrapExportedHandler(middleware_insertion_facade_default);
} else if (typeof middleware_insertion_facade_default === "function") {
  WRAPPED_ENTRY = wrapWorkerEntrypoint(middleware_insertion_facade_default);
}
var middleware_loader_entry_default = WRAPPED_ENTRY;

// node_modules/wrangler/templates/middleware/middleware-ensure-req-body-drained.ts
var drainBody2 = /* @__PURE__ */ __name(async (request, env, _ctx, middlewareCtx) => {
  try {
    return await middlewareCtx.next(request, env);
  } finally {
    try {
      if (request.body !== null && !request.bodyUsed) {
        const reader = request.body.getReader();
        while (!(await reader.read()).done) {
        }
      }
    } catch (e2) {
      console.error("Failed to drain the unused request body.", e2);
    }
  }
}, "drainBody");
var middleware_ensure_req_body_drained_default2 = drainBody2;

// node_modules/wrangler/templates/middleware/middleware-miniflare3-json-error.ts
function reduceError2(e2) {
  return {
    name: e2?.name,
    message: e2?.message ?? String(e2),
    stack: e2?.stack,
    cause: e2?.cause === void 0 ? void 0 : reduceError2(e2.cause)
  };
}
__name(reduceError2, "reduceError");
var jsonError2 = /* @__PURE__ */ __name(async (request, env, _ctx, middlewareCtx) => {
  try {
    return await middlewareCtx.next(request, env);
  } catch (e2) {
    const error = reduceError2(e2);
    return Response.json(error, {
      status: 500,
      headers: { "MF-Experimental-Error-Stack": "true" }
    });
  }
}, "jsonError");
var middleware_miniflare3_json_error_default2 = jsonError2;

// .wrangler/tmp/bundle-wYV3ux/middleware-insertion-facade.js
var __INTERNAL_WRANGLER_MIDDLEWARE__2 = [
  middleware_ensure_req_body_drained_default2,
  middleware_miniflare3_json_error_default2
];
var middleware_insertion_facade_default2 = middleware_loader_entry_default;

// node_modules/wrangler/templates/middleware/common.ts
var __facade_middleware__2 = [];
function __facade_register__2(...args) {
  __facade_middleware__2.push(...args.flat());
}
__name(__facade_register__2, "__facade_register__");
function __facade_invokeChain__2(request, env, ctx, dispatch, middlewareChain) {
  const [head, ...tail] = middlewareChain;
  const middlewareCtx = {
    dispatch,
    next(newRequest, newEnv) {
      return __facade_invokeChain__2(newRequest, newEnv, ctx, dispatch, tail);
    }
  };
  return head(request, env, ctx, middlewareCtx);
}
__name(__facade_invokeChain__2, "__facade_invokeChain__");
function __facade_invoke__2(request, env, ctx, dispatch, finalMiddleware) {
  return __facade_invokeChain__2(request, env, ctx, dispatch, [
    ...__facade_middleware__2,
    finalMiddleware
  ]);
}
__name(__facade_invoke__2, "__facade_invoke__");

// .wrangler/tmp/bundle-wYV3ux/middleware-loader.entry.ts
var __Facade_ScheduledController__2 = class ___Facade_ScheduledController__2 {
  constructor(scheduledTime, cron, noRetry) {
    this.scheduledTime = scheduledTime;
    this.cron = cron;
    this.#noRetry = noRetry;
  }
  static {
    __name(this, "__Facade_ScheduledController__");
  }
  #noRetry;
  noRetry() {
    if (!(this instanceof ___Facade_ScheduledController__2)) {
      throw new TypeError("Illegal invocation");
    }
    this.#noRetry();
  }
};
function wrapExportedHandler2(worker) {
  if (__INTERNAL_WRANGLER_MIDDLEWARE__2 === void 0 || __INTERNAL_WRANGLER_MIDDLEWARE__2.length === 0) {
    return worker;
  }
  for (const middleware of __INTERNAL_WRANGLER_MIDDLEWARE__2) {
    __facade_register__2(middleware);
  }
  const fetchDispatcher = /* @__PURE__ */ __name(function(request, env, ctx) {
    if (worker.fetch === void 0) {
      throw new Error("Handler does not export a fetch() function.");
    }
    return worker.fetch(request, env, ctx);
  }, "fetchDispatcher");
  return {
    ...worker,
    fetch(request, env, ctx) {
      const dispatcher = /* @__PURE__ */ __name(function(type, init) {
        if (type === "scheduled" && worker.scheduled !== void 0) {
          const controller = new __Facade_ScheduledController__2(
            Date.now(),
            init.cron ?? "",
            () => {
            }
          );
          return worker.scheduled(controller, env, ctx);
        }
      }, "dispatcher");
      return __facade_invoke__2(request, env, ctx, dispatcher, fetchDispatcher);
    }
  };
}
__name(wrapExportedHandler2, "wrapExportedHandler");
function wrapWorkerEntrypoint2(klass) {
  if (__INTERNAL_WRANGLER_MIDDLEWARE__2 === void 0 || __INTERNAL_WRANGLER_MIDDLEWARE__2.length === 0) {
    return klass;
  }
  for (const middleware of __INTERNAL_WRANGLER_MIDDLEWARE__2) {
    __facade_register__2(middleware);
  }
  return class extends klass {
    #fetchDispatcher = /* @__PURE__ */ __name((request, env, ctx) => {
      this.env = env;
      this.ctx = ctx;
      if (super.fetch === void 0) {
        throw new Error("Entrypoint class does not define a fetch() function.");
      }
      return super.fetch(request);
    }, "#fetchDispatcher");
    #dispatcher = /* @__PURE__ */ __name((type, init) => {
      if (type === "scheduled" && super.scheduled !== void 0) {
        const controller = new __Facade_ScheduledController__2(
          Date.now(),
          init.cron ?? "",
          () => {
          }
        );
        return super.scheduled(controller);
      }
    }, "#dispatcher");
    fetch(request) {
      return __facade_invoke__2(
        request,
        this.env,
        this.ctx,
        this.#dispatcher,
        this.#fetchDispatcher
      );
    }
  };
}
__name(wrapWorkerEntrypoint2, "wrapWorkerEntrypoint");
var WRAPPED_ENTRY2;
if (typeof middleware_insertion_facade_default2 === "object") {
  WRAPPED_ENTRY2 = wrapExportedHandler2(middleware_insertion_facade_default2);
} else if (typeof middleware_insertion_facade_default2 === "function") {
  WRAPPED_ENTRY2 = wrapWorkerEntrypoint2(middleware_insertion_facade_default2);
}
var middleware_loader_entry_default2 = WRAPPED_ENTRY2;
export {
  __INTERNAL_WRANGLER_MIDDLEWARE__2 as __INTERNAL_WRANGLER_MIDDLEWARE__,
  middleware_loader_entry_default2 as default
};
/*! Bundled license information:

html2canvas/dist/html2canvas.js:
  (*!
   * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
   * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
   * Released under MIT License
   *)
  (*! *****************************************************************************
      Copyright (c) Microsoft Corporation.
  
      Permission to use, copy, modify, and/or distribute this software for any
      purpose with or without fee is hereby granted.
  
      THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
      REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
      AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
      INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
      LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
      OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
      PERFORMANCE OF THIS SOFTWARE.
      ***************************************************************************** *)

dompurify/dist/purify.es.mjs:
  (*! @license DOMPurify 3.2.6 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.6/LICENSE *)

svg-pathdata/lib/SVGPathData.module.js:
  (*! *****************************************************************************
  Copyright (c) Microsoft Corporation.
  
  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.
  
  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** *)

jspdf/dist/jspdf.es.min.js:
  (** @license
   *
   * jsPDF - PDF Document creation from JavaScript
   * Version 3.0.1 Built on 2025-03-17T14:19:36.873Z
   *                      CommitID 00000000
   *
   * Copyright (c) 2010-2021 James Hall <james@parall.ax>, https://github.com/MrRio/jsPDF
   *               2015-2021 yWorks GmbH, http://www.yworks.com
   *               2015-2021 Lukas Hollnder <lukas.hollaender@yworks.com>, https://github.com/HackbrettXXX
   *               2016-2018 Aras Abbasi <aras.abbasi@gmail.com>
   *               2010 Aaron Spike, https://github.com/acspike
   *               2012 Willow Systems Corporation, https://github.com/willowsystems
   *               2012 Pablo Hess, https://github.com/pablohess
   *               2012 Florian Jenett, https://github.com/fjenett
   *               2013 Warren Weckesser, https://github.com/warrenweckesser
   *               2013 Youssef Beddad, https://github.com/lifof
   *               2013 Lee Driscoll, https://github.com/lsdriscoll
   *               2013 Stefan Slonevskiy, https://github.com/stefslon
   *               2013 Jeremy Morel, https://github.com/jmorel
   *               2013 Christoph Hartmann, https://github.com/chris-rock
   *               2014 Juan Pablo Gaviria, https://github.com/juanpgaviria
   *               2014 James Makes, https://github.com/dollaruw
   *               2014 Diego Casorran, https://github.com/diegocr
   *               2014 Steven Spungin, https://github.com/Flamenco
   *               2014 Kenneth Glassey, https://github.com/Gavvers
   *
   * Permission is hereby granted, free of charge, to any person obtaining
   * a copy of this software and associated documentation files (the
   * "Software"), to deal in the Software without restriction, including
   * without limitation the rights to use, copy, modify, merge, publish,
   * distribute, sublicense, and/or sell copies of the Software, and to
   * permit persons to whom the Software is furnished to do so, subject to
   * the following conditions:
   *
   * The above copyright notice and this permission notice shall be
   * included in all copies or substantial portions of the Software.
   *
   * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
   * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
   * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
   * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
   * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
   * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
   * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
   *
   * Contributor(s):
   *    siefkenj, ahwolf, rickygu, Midnith, saintclair, eaparango,
   *    kim3er, mfo, alnorth, Flamenco
   *)
  (**
   * A class to parse color values
   * @author Stoyan Stefanov <sstoo@gmail.com>
   * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
   * @license Use it if you like it
   *)
  (**
   * @license
   * Joseph Myers does not specify a particular license for his work.
   *
   * Author: Joseph Myers
   * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
   *
   * Modified by: Owen Leong
   *)
  (**
   * @license
   * FPDF is released under a permissive license: there is no usage restriction.
   * You may embed it freely in your application (commercial or not), with or
   * without modifications.
   *
   * Reference: http://www.fpdf.org/en/script/script37.php
   *)
  (**
   * @license
   * Licensed under the MIT License.
   * http://opensource.org/licenses/mit-license
   * Author: Owen Leong (@owenl131)
   * Date: 15 Oct 2020
   * References:
   * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
   * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
   * http://www.fpdf.org/en/script/script37.php
   *)
  (**
   * @license
   *
   * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
   *
   * Permission is hereby granted, free of charge, to any person obtaining
   * a copy of this software and associated documentation files (the
   * "Software"), to deal in the Software without restriction, including
   * without limitation the rights to use, copy, modify, merge, publish,
   * distribute, sublicense, and/or sell copies of the Software, and to
   * permit persons to whom the Software is furnished to do so, subject to
   * the following conditions:
   *
   * The above copyright notice and this permission notice shall be
   * included in all copies or substantial portions of the Software.
   *
   * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
   * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
   * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
   * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
   * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
   * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
   * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
   * ====================================================================
   *)
  (**
   * @license
   * (c) Dean McNamee <dean@gmail.com>, 2013.
   *
   * https://github.com/deanm/omggif
   *
   * Permission is hereby granted, free of charge, to any person obtaining a copy
   * of this software and associated documentation files (the "Software"), to
   * deal in the Software without restriction, including without limitation the
   * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
   * sell copies of the Software, and to permit persons to whom the Software is
   * furnished to do so, subject to the following conditions:
   *
   * The above copyright notice and this permission notice shall be included in
   * all copies or substantial portions of the Software.
   *
   * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
   * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
   * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
   * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
   * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
   * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
   * IN THE SOFTWARE.
   *
   * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
   * including animation and compression.  It does not rely on any specific
   * underlying system, so should run in the browser, Node, or Plask.
   *)
  (**
   * @license
    Copyright (c) 2008, Adobe Systems Incorporated
    All rights reserved.
  
    Redistribution and use in source and binary forms, with or without 
    modification, are permitted provided that the following conditions are
    met:
  
    * Redistributions of source code must retain the above copyright notice, 
      this list of conditions and the following disclaimer.
    
    * Redistributions in binary form must reproduce the above copyright
      notice, this list of conditions and the following disclaimer in the 
      documentation and/or other materials provided with the distribution.
    
    * Neither the name of Adobe Systems Incorporated nor the names of its 
      contributors may be used to endorse or promote products derived from 
      this software without specific prior written permission.
  
    THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
    IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
    THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
    PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
    CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
    EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
    PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
    PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
    LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
    NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
    SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
  *)
  (**
   * @license
   * Copyright (c) 2017 Aras Abbasi
   *
   * Licensed under the MIT License.
   * http://opensource.org/licenses/mit-license
   *)
*/
//# sourceMappingURL=functionsWorker-0.5073429534170399.js.map
